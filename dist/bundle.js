/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 123);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qcz85ZDE4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHNwZWNpZmllcikge1xuICB2YXIgbiA9IHNwZWNpZmllci5sZW5ndGggLyA2IHwgMCwgY29sb3JzID0gbmV3IEFycmF5KG4pLCBpID0gMDtcbiAgd2hpbGUgKGkgPCBuKSBjb2xvcnNbaV0gPSBcIiNcIiArIHNwZWNpZmllci5zbGljZShpICogNiwgKytpICogNik7XG4gIHJldHVybiBjb2xvcnM7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NvbG9ycy5qc1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mixin_extend__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__util__ = __webpack_require__(11);\n\n\n\n\n/**\n * Base class of all objects\n * @constructor\n * @alias clay.core.Base\n * @mixes clay.core.mixin.notifier\n */\nvar Base = function () {\n    /**\n     * @type {number}\n     */\n    this.__uid__ = __WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].genGUID();\n};\n\nBase.__initializers__ = [\n    function (opts) {\n        __WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(this, opts);\n    }\n];\n\n__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(Base, __WEBPACK_IMPORTED_MODULE_0__mixin_extend__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_2__util__[\"a\" /* default */].extend(Base.prototype, __WEBPACK_IMPORTED_MODULE_1__mixin_notifier__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Base);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS9CYXNlLmpzP2E2ZTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4dGVuZE1peGluIGZyb20gJy4vbWl4aW4vZXh0ZW5kJztcbmltcG9ydCBub3RpZmllck1peGluIGZyb20gJy4vbWl4aW4vbm90aWZpZXInO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi91dGlsJztcblxuLyoqXG4gKiBCYXNlIGNsYXNzIG9mIGFsbCBvYmplY3RzXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmNvcmUuQmFzZVxuICogQG1peGVzIGNsYXkuY29yZS5taXhpbi5ub3RpZmllclxuICovXG52YXIgQmFzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuX191aWRfXyA9IHV0aWwuZ2VuR1VJRCgpO1xufTtcblxuQmFzZS5fX2luaXRpYWxpemVyc19fID0gW1xuICAgIGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgICAgIHV0aWwuZXh0ZW5kKHRoaXMsIG9wdHMpO1xuICAgIH1cbl07XG5cbnV0aWwuZXh0ZW5kKEJhc2UsIGV4dGVuZE1peGluKTtcbnV0aWwuZXh0ZW5kKEJhc2UucHJvdG90eXBlLCBub3RpZmllck1peGluKTtcblxuZXhwb3J0IGRlZmF1bHQgQmFzZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb3JlL0Jhc2UuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_interpolate__ = __webpack_require__(65);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(scheme) {\n  return Object(__WEBPACK_IMPORTED_MODULE_0_d3_interpolate__[\"b\" /* interpolateRgbBasis */])(scheme[scheme.length - 1]);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3JhbXAuanM/ODEwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2ludGVycG9sYXRlUmdiQmFzaXN9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihzY2hlbWUpIHtcbiAgcmV0dXJuIGludGVycG9sYXRlUmdiQmFzaXMoc2NoZW1lW3NjaGVtZS5sZW5ndGggLSAxXSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3JhbXAuanNcbi8vIG1vZHVsZSBpZCA9IDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__ = __webpack_require__(5);\n\n\n/**\n * @constructor\n * @alias clay.Vector3\n * @param {number} x\n * @param {number} y\n * @param {number} z\n */\nvar Vector3 = function(x, y, z) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n\n    /**\n     * Storage of Vector3, read and write of x, y, z will change the values in array\n     * All methods also operate on the array instead of x, y, z components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector3#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].fromValues(x, y, z);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector3#\n     */\n    this._dirty = true;\n};\n\nVector3.prototype = {\n\n    constructor: Vector3,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    add: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @return {clay.Vector3}\n     */\n    set: function (x, y, z) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector3}\n     */\n    setArray: function (arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector3\n     * @return {clay.Vector3}\n     */\n    clone: function () {\n        return new Vector3(this.x, this.y, this.z);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Cross product of self and b, written to a Vector3 out\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    cross: function (a, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].cross(this.array, a.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    dist: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    distance: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    div: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    divide: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    dot: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].length(this.array);\n    },\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @param  {number}  t\n     * @return {clay.Vector3}\n     */\n    lerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    min: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    max: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector3}\n     */\n    negate: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector3}\n     */\n    normalize: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y, z components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector3}\n     */\n    random: function (scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector3}\n     */\n    scale: function (s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector3} b\n     * @param  {number}  scale\n     * @return {clay.Vector3}\n     */\n    scaleAndAdd: function (b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    sqrDist: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector3} b\n     * @return {number}\n     */\n    squaredDistance: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    sub: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector3} b\n     * @return {clay.Vector3}\n     */\n    subtract: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix3 m\n     * @param  {clay.Matrix3} m\n     * @return {clay.Vector3}\n     */\n    transformMat3: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat3(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector3}\n     */\n    transformMat4: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Transform self with a Quaternion q\n     * @param  {clay.Quaternion} q\n     * @return {clay.Vector3}\n     */\n    transformQuat: function (q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformQuat(this.array, this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Trasnform self into projection space with m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector3}\n     */\n    applyProjection: function (m) {\n        var v = this.array;\n        m = m.array;\n\n        // Perspective projection\n        if (m[15] === 0) {\n            var w = -1 / v[2];\n            v[0] = m[0] * v[0] * w;\n            v[1] = m[5] * v[1] * w;\n            v[2] = (m[10] * v[2] + m[14]) * w;\n        }\n        else {\n            v[0] = m[0] * v[0] + m[12];\n            v[1] = m[5] * v[1] + m[13];\n            v[2] = m[10] * v[2] + m[14];\n        }\n        this._dirty = true;\n\n        return this;\n    },\n\n    eulerFromQuat: function(q, order) {\n        Vector3.eulerFromQuat(this, q, order);\n    },\n\n    eulerFromMat3: function (m, order) {\n        Vector3.eulerFromMat3(this, m, order);\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Vector3.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Vector3\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {number}  x\n * @param  {number}  y\n * @param  {number}  z\n * @return {clay.Vector3}\n */\nVector3.set = function(out, x, y, z) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].set(out.array, x, y, z);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.cross = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].cross(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].distance(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.distance = Vector3.dist;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.divide = Vector3.div;\n\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].length(b.array);\n};\n\n// Vector3.length = Vector3.len;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @param  {number}  t\n * @return {clay.Vector3}\n */\nVector3.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.multiply = Vector3.mul;\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @return {clay.Vector3}\n */\nVector3.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @return {clay.Vector3}\n */\nVector3.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @param  {number}  scale\n * @return {clay.Vector3}\n */\nVector3.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {number}\n */\nVector3.squaredDistance = Vector3.sqrDist;\n/**\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector3} a\n * @return {number}\n */\nVector3.squaredLength = Vector3.sqrLen;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Vector3} b\n * @return {clay.Vector3}\n */\nVector3.subtract = Vector3.sub;\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {Matrix3} m\n * @return {clay.Vector3}\n */\nVector3.transformMat3 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat3(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector3}\n */\nVector3.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector3} a\n * @param  {clay.Quaternion} q\n * @return {clay.Vector3}\n */\nVector3.transformQuat = function(out, a, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec3__[\"a\" /* default */].transformQuat(out.array, a.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\nfunction clamp(val, min, max) {\n    return val < min ? min : (val > max ? max : val);\n}\nvar atan2 = Math.atan2;\nvar asin = Math.asin;\nvar abs = Math.abs;\n/**\n * Convert quaternion to euler angle\n * Quaternion must be normalized\n * From three.js\n */\nVector3.eulerFromQuat = function (out, q, order) {\n    out._dirty = true;\n    q = q.array;\n\n    var target = out.array;\n    var x = q[0], y = q[1], z = q[2], w = q[3];\n    var x2 = x * x;\n    var y2 = y * y;\n    var z2 = z * z;\n    var w2 = w * w;\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    switch (order) {\n        case 'XYZ':\n            target[0] = atan2(2 * (x * w - y * z), (w2 - x2 - y2 + z2));\n            target[1] = asin(clamp(2 * (x * z + y * w), - 1, 1));\n            target[2] = atan2(2 * (z * w - x * y), (w2 + x2 - y2 - z2));\n            break;\n        case 'YXZ':\n            target[0] = asin(clamp(2 * (x * w - y * z), - 1, 1));\n            target[1] = atan2(2 * (x * z + y * w), (w2 - x2 - y2 + z2));\n            target[2] = atan2(2 * (x * y + z * w), (w2 - x2 + y2 - z2));\n            break;\n        case 'ZXY':\n            target[0] = asin(clamp(2 * (x * w + y * z), - 1, 1));\n            target[1] = atan2(2 * (y * w - z * x), (w2 - x2 - y2 + z2));\n            target[2] = atan2(2 * (z * w - x * y), (w2 - x2 + y2 - z2));\n            break;\n        case 'ZYX':\n            target[0] = atan2(2 * (x * w + z * y), (w2 - x2 - y2 + z2));\n            target[1] = asin(clamp(2 * (y * w - x * z), - 1, 1));\n            target[2] = atan2(2 * (x * y + z * w), (w2 + x2 - y2 - z2));\n            break;\n        case 'YZX':\n            target[0] = atan2(2 * (x * w - z * y), (w2 - x2 + y2 - z2));\n            target[1] = atan2(2 * (y * w - x * z), (w2 + x2 - y2 - z2));\n            target[2] = asin(clamp(2 * (x * y + z * w), - 1, 1));\n            break;\n        case 'XZY':\n            target[0] = atan2(2 * (x * w + y * z), (w2 - x2 + y2 - z2));\n            target[1] = atan2(2 * (x * z + y * w), (w2 + x2 - y2 - z2));\n            target[2] = asin(clamp(2 * (z * w - x * y), - 1, 1));\n            break;\n        default:\n            console.warn('Unkown order: ' + order);\n    }\n    return out;\n};\n\n/**\n * Convert rotation matrix to euler angle\n * from three.js\n */\nVector3.eulerFromMat3 = function (out, m, order) {\n    // assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n    var te = m.array;\n    var m11 = te[0], m12 = te[3], m13 = te[6];\n    var m21 = te[1], m22 = te[4], m23 = te[7];\n    var m31 = te[2], m32 = te[5], m33 = te[8];\n    var target = out.array;\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    switch (order) {\n        case 'XYZ':\n            target[1] = asin(clamp(m13, -1, 1));\n            if (abs(m13) < 0.99999) {\n                target[0] = atan2(-m23, m33);\n                target[2] = atan2(-m12, m11);\n            }\n            else {\n                target[0] = atan2(m32, m22);\n                target[2] = 0;\n            }\n            break;\n        case 'YXZ':\n            target[0] = asin(-clamp(m23, -1, 1));\n            if (abs(m23) < 0.99999) {\n                target[1] = atan2(m13, m33);\n                target[2] = atan2(m21, m22);\n            }\n            else {\n                target[1] = atan2(-m31, m11);\n                target[2] = 0;\n            }\n            break;\n        case 'ZXY':\n            target[0] = asin(clamp(m32, -1, 1));\n            if (abs(m32) < 0.99999) {\n                target[1] = atan2(-m31, m33);\n                target[2] = atan2(-m12, m22);\n            }\n            else {\n                target[1] = 0;\n                target[2] = atan2(m21, m11);\n            }\n            break;\n        case 'ZYX':\n            target[1] = asin(-clamp(m31, -1, 1));\n            if (abs(m31) < 0.99999) {\n                target[0] = atan2(m32, m33);\n                target[2] = atan2(m21, m11);\n            }\n            else {\n                target[0] = 0;\n                target[2] = atan2(-m12, m22);\n            }\n            break;\n        case 'YZX':\n            target[2] = asin(clamp(m21, -1, 1));\n            if (abs(m21) < 0.99999) {\n                target[0] = atan2(-m23, m22);\n                target[1] = atan2(-m31, m11);\n            }\n            else {\n                target[0] = 0;\n                target[1] = atan2(m13, m33);\n            }\n            break;\n        case 'XZY':\n            target[2] = asin(-clamp(m12, -1, 1));\n            if (abs(m12) < 0.99999) {\n                target[0] = atan2(m32, m22);\n                target[1] = atan2(m13, m11);\n            }\n            else {\n                target[0] = atan2(-m23, m33);\n                target[1] = 0;\n            }\n            break;\n        default:\n            console.warn('Unkown order: ' + order);\n    }\n    out._dirty = true;\n\n    return out;\n};\n\nObject.defineProperties(Vector3, {\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_X: {\n        get: function () {\n            return new Vector3(1, 0, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    NEGATIVE_X: {\n        get: function () {\n            return new Vector3(-1, 0, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_Y: {\n        get: function () {\n            return new Vector3(0, 1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    NEGATIVE_Y: {\n        get: function () {\n            return new Vector3(0, -1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    POSITIVE_Z: {\n        get: function () {\n            return new Vector3(0, 0, 1);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     */\n    NEGATIVE_Z: {\n        get: function () {\n            return new Vector3(0, 0, -1);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    UP: {\n        get: function () {\n            return new Vector3(0, 1, 0);\n        }\n    },\n    /**\n     * @type {clay.Vector3}\n     * @readOnly\n     * @memberOf clay.Vector3\n     */\n    ZERO: {\n        get: function () {\n            return new Vector3();\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector3);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9WZWN0b3IzLmpzP2E2MTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5WZWN0b3IzXG4gKiBAcGFyYW0ge251bWJlcn0geFxuICogQHBhcmFtIHtudW1iZXJ9IHlcbiAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gKi9cbnZhciBWZWN0b3IzID0gZnVuY3Rpb24oeCwgeSwgeikge1xuXG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuICAgIHogPSB6IHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIFZlY3RvcjMsIHJlYWQgYW5kIHdyaXRlIG9mIHgsIHksIHogd2lsbCBjaGFuZ2UgdGhlIHZhbHVlcyBpbiBhcnJheVxuICAgICAqIEFsbCBtZXRob2RzIGFsc28gb3BlcmF0ZSBvbiB0aGUgYXJyYXkgaW5zdGVhZCBvZiB4LCB5LCB6IGNvbXBvbmVudHNcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yMyNcbiAgICAgKi9cbiAgICB0aGlzLmFycmF5ID0gdmVjMy5mcm9tVmFsdWVzKHgsIHksIHopO1xuXG4gICAgLyoqXG4gICAgICogRGlydHkgZmxhZyBpcyB1c2VkIGJ5IHRoZSBOb2RlIHRvIGRldGVybWluZVxuICAgICAqIGlmIHRoZSBtYXRyaXggaXMgdXBkYXRlZCB0byBsYXRlc3RcbiAgICAgKiBAbmFtZSBfZGlydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzI1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cblZlY3RvcjMucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IFZlY3RvcjMsXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYiB0byBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5hZGQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB4LCB5IGFuZCB6IGNvbXBvbmVudHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHpcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbiAoeCwgeSwgeikge1xuICAgICAgICB0aGlzLmFycmF5WzBdID0geDtcbiAgICAgICAgdGhpcy5hcnJheVsxXSA9IHk7XG4gICAgICAgIHRoaXMuYXJyYXlbMl0gPSB6O1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCwgeSBhbmQgeiBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzZXRBcnJheTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICB0aGlzLmFycmF5WzBdID0gYXJyWzBdO1xuICAgICAgICB0aGlzLmFycmF5WzFdID0gYXJyWzFdO1xuICAgICAgICB0aGlzLmFycmF5WzJdID0gYXJyWzJdO1xuXG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IFZlY3RvcjNcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKHRoaXMueCwgdGhpcy55LCB0aGlzLnopO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbiAoYikge1xuICAgICAgICB2ZWMzLmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyb3NzIHByb2R1Y3Qgb2Ygc2VsZiBhbmQgYiwgd3JpdHRlbiB0byBhIFZlY3RvcjMgb3V0XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGNyb3NzOiBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICB2ZWMzLmNyb3NzKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgZGlzdGFuY2VcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGlzdDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMuZGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzdGFuY2UgYmV0d2VlbiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3RhbmNlOiBmdW5jdGlvbiAoYikge1xuICAgICAgICByZXR1cm4gdmVjMy5kaXN0YW5jZSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpdmlkZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBkaXY6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMuZGl2KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXZpZGUgc2VsZiBieSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGRpdmlkZTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5kaXZpZGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERvdCBwcm9kdWN0IG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZG90OiBmdW5jdGlvbiAoYikge1xuICAgICAgICByZXR1cm4gdmVjMy5kb3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIG9mIGxlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBsZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMubGVuKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGxlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBsZW5ndGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHZlYzMubGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBsZXJwOiBmdW5jdGlvbiAoYSwgYiwgdCkge1xuICAgICAgICB2ZWMzLmxlcnAodGhpcy5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1pbmltdW0gb2Ygc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBtaW46IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMubWluKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbWF4OiBmdW5jdGlvbiAoYikge1xuICAgICAgICB2ZWMzLm1heCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIG11bDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5tdWwodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTmVnYXRlIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgbmVnYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZlYzMubmVnYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmVjMy5ub3JtYWxpemUodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHJhbmRvbSB4LCB5LCB6IGNvbXBvbmVudHMgd2l0aCBhIGdpdmVuIHNjYWxlXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICByYW5kb206IGZ1bmN0aW9uIChzY2FsZSkge1xuICAgICAgICB2ZWMzLnJhbmRvbSh0aGlzLmFycmF5LCBzY2FsZSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgdmVjMy5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBzKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgYiBhbmQgYWRkIHRvIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzY2FsZUFuZEFkZDogZnVuY3Rpb24gKGIsIHMpIHtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5LCBzKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWREaXN0YW5jZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXJEaXN0OiBmdW5jdGlvbiAoYikge1xuICAgICAgICByZXR1cm4gdmVjMy5zcXJEaXN0KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXVhcmVkRGlzdGFuY2U6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLnNxdWFyZWREaXN0YW5jZSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWRMZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyTGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLnNxckxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBsZW5ndGggb2Ygc2VsZlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXVhcmVkTGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB2ZWMzLnNxdWFyZWRMZW5ndGgodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzdWJ0cmFjdFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzdWI6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZlYzMuc3ViKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCBiIGZyb20gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzdWJ0cmFjdDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmVjMy5zdWJ0cmFjdCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIE1hdHJpeDMgbVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1NYXQzOiBmdW5jdGlvbiAobSkge1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDModGhpcy5hcnJheSwgdGhpcy5hcnJheSwgbS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBzZWxmIHdpdGggYSBNYXRyaXg0IG1cbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdHJhbnNmb3JtTWF0NDogZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVHJhbnNmb3JtIHNlbGYgd2l0aCBhIFF1YXRlcm5pb24gcVxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1RdWF0OiBmdW5jdGlvbiAocSkge1xuICAgICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYXNuZm9ybSBzZWxmIGludG8gcHJvamVjdGlvbiBzcGFjZSB3aXRoIG1cbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgYXBwbHlQcm9qZWN0aW9uOiBmdW5jdGlvbiAobSkge1xuICAgICAgICB2YXIgdiA9IHRoaXMuYXJyYXk7XG4gICAgICAgIG0gPSBtLmFycmF5O1xuXG4gICAgICAgIC8vIFBlcnNwZWN0aXZlIHByb2plY3Rpb25cbiAgICAgICAgaWYgKG1bMTVdID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgdyA9IC0xIC8gdlsyXTtcbiAgICAgICAgICAgIHZbMF0gPSBtWzBdICogdlswXSAqIHc7XG4gICAgICAgICAgICB2WzFdID0gbVs1XSAqIHZbMV0gKiB3O1xuICAgICAgICAgICAgdlsyXSA9IChtWzEwXSAqIHZbMl0gKyBtWzE0XSkgKiB3O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdlswXSA9IG1bMF0gKiB2WzBdICsgbVsxMl07XG4gICAgICAgICAgICB2WzFdID0gbVs1XSAqIHZbMV0gKyBtWzEzXTtcbiAgICAgICAgICAgIHZbMl0gPSBtWzEwXSAqIHZbMl0gKyBtWzE0XTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGV1bGVyRnJvbVF1YXQ6IGZ1bmN0aW9uKHEsIG9yZGVyKSB7XG4gICAgICAgIFZlY3RvcjMuZXVsZXJGcm9tUXVhdCh0aGlzLCBxLCBvcmRlcik7XG4gICAgfSxcblxuICAgIGV1bGVyRnJvbU1hdDM6IGZ1bmN0aW9uIChtLCBvcmRlcikge1xuICAgICAgICBWZWN0b3IzLmV1bGVyRnJvbU1hdDModGhpcywgbSwgb3JkZXIpO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnWycgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMuYXJyYXksICcsJykgKyAnXSc7XG4gICAgfSxcblxuICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpO1xuICAgIH1cbn07XG5cbnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbi8vIEdldHRlciBhbmQgU2V0dGVyXG5pZiAoZGVmaW5lUHJvcGVydHkpIHtcblxuICAgIHZhciBwcm90byA9IFZlY3RvcjMucHJvdG90eXBlO1xuICAgIC8qKlxuICAgICAqIEBuYW1lIHhcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3gnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3knLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzFdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3onLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMl07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzJdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuXG4vLyBTdXBwbHkgbWV0aG9kcyB0aGF0IGFyZSBub3QgaW4gcGxhY2VcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5hZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMzLmFkZChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICB4XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICB5XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICB6XG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuc2V0ID0gZnVuY3Rpb24ob3V0LCB4LCB5LCB6KSB7XG4gICAgdmVjMy5zZXQob3V0LmFycmF5LCB4LCB5LCB6KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLmNvcHkgPSBmdW5jdGlvbihvdXQsIGIpIHtcbiAgICB2ZWMzLmNvcHkob3V0LmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5jcm9zcyA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzMuY3Jvc3Mob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IzLmRpc3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHZlYzMuZGlzdGFuY2UoYS5hcnJheSwgYi5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5kaXN0YW5jZSA9IFZlY3RvcjMuZGlzdDtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5kaXYgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMzLmRpdmlkZShvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuZGl2aWRlID0gVmVjdG9yMy5kaXY7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5kb3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHZlYzMuZG90KGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5sZW4gPSBmdW5jdGlvbihiKSB7XG4gICAgcmV0dXJuIHZlYzMubGVuZ3RoKGIuYXJyYXkpO1xufTtcblxuLy8gVmVjdG9yMy5sZW5ndGggPSBWZWN0b3IzLmxlbjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEBwYXJhbSAge251bWJlcn0gIHRcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5sZXJwID0gZnVuY3Rpb24ob3V0LCBhLCBiLCB0KSB7XG4gICAgdmVjMy5sZXJwKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLm1pbiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzMubWluKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMy5tYXgob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMubXVsID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMy5tdWx0aXBseShvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLm11bHRpcGx5ID0gVmVjdG9yMy5tdWw7XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2ZWMzLm5lZ2F0ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMubm9ybWFsaXplID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmVjMy5ub3JtYWxpemUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxlXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMucmFuZG9tID0gZnVuY3Rpb24ob3V0LCBzY2FsZSkge1xuICAgIHZlYzMucmFuZG9tKG91dC5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCBzY2FsZSkge1xuICAgIHZlYzMuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgc2NhbGUpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IzLnNxckRpc3QgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIHZlYzMuc3FyRGlzdChhLmFycmF5LCBiLmFycmF5KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMy5zcXVhcmVkRGlzdGFuY2UgPSBWZWN0b3IzLnNxckRpc3Q7XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IzLnNxckxlbiA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gdmVjMy5zcXJMZW4oYS5hcnJheSk7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IzLnNxdWFyZWRMZW5ndGggPSBWZWN0b3IzLnNxckxlbjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAqL1xuVmVjdG9yMy5zdWIgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMzLnN1YnRyYWN0KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMuc3VidHJhY3QgPSBWZWN0b3IzLnN1YjtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBhXG4gKiBAcGFyYW0gIHtNYXRyaXgzfSBtXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMudHJhbnNmb3JtTWF0MyA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZlYzMudHJhbnNmb3JtTWF0MyhvdXQuYXJyYXksIGEuYXJyYXksIG0uYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICovXG5WZWN0b3IzLnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWMzLnRyYW5zZm9ybU1hdDQob3V0LmFycmF5LCBhLmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gKi9cblZlY3RvcjMudHJhbnNmb3JtUXVhdCA9IGZ1bmN0aW9uKG91dCwgYSwgcSkge1xuICAgIHZlYzMudHJhbnNmb3JtUXVhdChvdXQuYXJyYXksIGEuYXJyYXksIHEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG5mdW5jdGlvbiBjbGFtcCh2YWwsIG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIHZhbCA8IG1pbiA/IG1pbiA6ICh2YWwgPiBtYXggPyBtYXggOiB2YWwpO1xufVxudmFyIGF0YW4yID0gTWF0aC5hdGFuMjtcbnZhciBhc2luID0gTWF0aC5hc2luO1xudmFyIGFicyA9IE1hdGguYWJzO1xuLyoqXG4gKiBDb252ZXJ0IHF1YXRlcm5pb24gdG8gZXVsZXIgYW5nbGVcbiAqIFF1YXRlcm5pb24gbXVzdCBiZSBub3JtYWxpemVkXG4gKiBGcm9tIHRocmVlLmpzXG4gKi9cblZlY3RvcjMuZXVsZXJGcm9tUXVhdCA9IGZ1bmN0aW9uIChvdXQsIHEsIG9yZGVyKSB7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcSA9IHEuYXJyYXk7XG5cbiAgICB2YXIgdGFyZ2V0ID0gb3V0LmFycmF5O1xuICAgIHZhciB4ID0gcVswXSwgeSA9IHFbMV0sIHogPSBxWzJdLCB3ID0gcVszXTtcbiAgICB2YXIgeDIgPSB4ICogeDtcbiAgICB2YXIgeTIgPSB5ICogeTtcbiAgICB2YXIgejIgPSB6ICogejtcbiAgICB2YXIgdzIgPSB3ICogdztcblxuICAgIHZhciBvcmRlciA9IChvcmRlciB8fCAnWFlaJykudG9VcHBlckNhc2UoKTtcblxuICAgIHN3aXRjaCAob3JkZXIpIHtcbiAgICAgICAgY2FzZSAnWFlaJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKDIgKiAoeCAqIHcgLSB5ICogeiksICh3MiAtIHgyIC0geTIgKyB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXNpbihjbGFtcCgyICogKHggKiB6ICsgeSAqIHcpLCAtIDEsIDEpKTtcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKDIgKiAoeiAqIHcgLSB4ICogeSksICh3MiArIHgyIC0geTIgLSB6MikpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1lYWic6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhc2luKGNsYW1wKDIgKiAoeCAqIHcgLSB5ICogeiksIC0gMSwgMSkpO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIoMiAqICh4ICogeiArIHkgKiB3KSwgKHcyIC0geDIgLSB5MiArIHoyKSk7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigyICogKHggKiB5ICsgeiAqIHcpLCAodzIgLSB4MiArIHkyIC0gejIpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdaWFknOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXNpbihjbGFtcCgyICogKHggKiB3ICsgeSAqIHopLCAtIDEsIDEpKTtcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKDIgKiAoeSAqIHcgLSB6ICogeCksICh3MiAtIHgyIC0geTIgKyB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXRhbjIoMiAqICh6ICogdyAtIHggKiB5KSwgKHcyIC0geDIgKyB5MiAtIHoyKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWllYJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKDIgKiAoeCAqIHcgKyB6ICogeSksICh3MiAtIHgyIC0geTIgKyB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXNpbihjbGFtcCgyICogKHkgKiB3IC0geCAqIHopLCAtIDEsIDEpKTtcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKDIgKiAoeCAqIHkgKyB6ICogdyksICh3MiArIHgyIC0geTIgLSB6MikpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1laWCc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhdGFuMigyICogKHggKiB3IC0geiAqIHkpLCAodzIgLSB4MiArIHkyIC0gejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKDIgKiAoeSAqIHcgLSB4ICogeiksICh3MiArIHgyIC0geTIgLSB6MikpO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXNpbihjbGFtcCgyICogKHggKiB5ICsgeiAqIHcpLCAtIDEsIDEpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdYWlknOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXRhbjIoMiAqICh4ICogdyArIHkgKiB6KSwgKHcyIC0geDIgKyB5MiAtIHoyKSk7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMigyICogKHggKiB6ICsgeSAqIHcpLCAodzIgKyB4MiAtIHkyIC0gejIpKTtcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGFzaW4oY2xhbXAoMiAqICh6ICogdyAtIHggKiB5KSwgLSAxLCAxKSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5rb3duIG9yZGVyOiAnICsgb3JkZXIpO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb252ZXJ0IHJvdGF0aW9uIG1hdHJpeCB0byBldWxlciBhbmdsZVxuICogZnJvbSB0aHJlZS5qc1xuICovXG5WZWN0b3IzLmV1bGVyRnJvbU1hdDMgPSBmdW5jdGlvbiAob3V0LCBtLCBvcmRlcikge1xuICAgIC8vIGFzc3VtZXMgdGhlIHVwcGVyIDN4MyBvZiBtIGlzIGEgcHVyZSByb3RhdGlvbiBtYXRyaXggKGkuZSwgdW5zY2FsZWQpXG4gICAgdmFyIHRlID0gbS5hcnJheTtcbiAgICB2YXIgbTExID0gdGVbMF0sIG0xMiA9IHRlWzNdLCBtMTMgPSB0ZVs2XTtcbiAgICB2YXIgbTIxID0gdGVbMV0sIG0yMiA9IHRlWzRdLCBtMjMgPSB0ZVs3XTtcbiAgICB2YXIgbTMxID0gdGVbMl0sIG0zMiA9IHRlWzVdLCBtMzMgPSB0ZVs4XTtcbiAgICB2YXIgdGFyZ2V0ID0gb3V0LmFycmF5O1xuXG4gICAgdmFyIG9yZGVyID0gKG9yZGVyIHx8ICdYWVonKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgICBjYXNlICdYWVonOlxuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXNpbihjbGFtcChtMTMsIC0xLCAxKSk7XG4gICAgICAgICAgICBpZiAoYWJzKG0xMykgPCAwLjk5OTk5KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXRhbjIoLW0yMywgbTMzKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMigtbTEyLCBtMTEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXRhbjIobTMyLCBtMjIpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsyXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWVhaJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IGFzaW4oLWNsYW1wKG0yMywgLTEsIDEpKTtcbiAgICAgICAgICAgIGlmIChhYnMobTIzKSA8IDAuOTk5OTkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMihtMTMsIG0zMyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzJdID0gYXRhbjIobTIxLCBtMjIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIoLW0zMSwgbTExKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1pYWSc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBhc2luKGNsYW1wKG0zMiwgLTEsIDEpKTtcbiAgICAgICAgICAgIGlmIChhYnMobTMyKSA8IDAuOTk5OTkpIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMV0gPSBhdGFuMigtbTMxLCBtMzMpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKC1tMTIsIG0yMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMV0gPSAwO1xuICAgICAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKG0yMSwgbTExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdaWVgnOlxuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXNpbigtY2xhbXAobTMxLCAtMSwgMSkpO1xuICAgICAgICAgICAgaWYgKGFicyhtMzEpIDwgMC45OTk5OSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKG0zMiwgbTMzKTtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMl0gPSBhdGFuMihtMjEsIG0xMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0YXJnZXRbMF0gPSAwO1xuICAgICAgICAgICAgICAgIHRhcmdldFsyXSA9IGF0YW4yKC1tMTIsIG0yMik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWVpYJzpcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGFzaW4oY2xhbXAobTIxLCAtMSwgMSkpO1xuICAgICAgICAgICAgaWYgKGFicyhtMjEpIDwgMC45OTk5OSkge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKC1tMjMsIG0yMik7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIoLW0zMSwgbTExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IDA7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gYXRhbjIobTEzLCBtMzMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1haWSc6XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBhc2luKC1jbGFtcChtMTIsIC0xLCAxKSk7XG4gICAgICAgICAgICBpZiAoYWJzKG0xMikgPCAwLjk5OTk5KSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzBdID0gYXRhbjIobTMyLCBtMjIpO1xuICAgICAgICAgICAgICAgIHRhcmdldFsxXSA9IGF0YW4yKG0xMywgbTExKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFswXSA9IGF0YW4yKC1tMjMsIG0zMyk7XG4gICAgICAgICAgICAgICAgdGFyZ2V0WzFdID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmtvd24gb3JkZXI6ICcgKyBvcmRlcik7XG4gICAgfVxuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKFZlY3RvcjMsIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKi9cbiAgICBQT1NJVElWRV9YOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKDEsIDAsIDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKi9cbiAgICBORUdBVElWRV9YOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKC0xLCAwLCAwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICovXG4gICAgUE9TSVRJVkVfWToge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygwLCAxLCAwKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IzXG4gICAgICovXG4gICAgTkVHQVRJVkVfWToge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygwLCAtMSwgMCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yM1xuICAgICAqL1xuICAgIFBPU0lUSVZFX1o6IHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFZlY3RvcjMoMCwgMCwgMSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgTkVHQVRJVkVfWjoge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMygwLCAwLCAtMSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQHJlYWRPbmx5XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yM1xuICAgICAqL1xuICAgIFVQOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKDAsIDEsIDApO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEByZWFkT25seVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjNcbiAgICAgKi9cbiAgICBaRVJPOiB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVmVjdG9yMztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL1ZlY3RvcjMuanNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* WEBPACK VAR INJECTION */(function(global) {/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__request__ = __webpack_require__(74);\n\n\nvar supportWebGL;\n\nvar vendor = {};\n\n/**\n * If support WebGL\n * @return {boolean}\n */\nvendor.supportWebGL = function () {\n    if (supportWebGL == null) {\n        try {\n            var canvas = document.createElement('canvas');\n            var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n            if (!gl) {\n                throw new Error();\n            }\n        }\n        catch (e) {\n            supportWebGL = false;\n        }\n\n    }\n    return supportWebGL;\n};\n\nvendor.Int8Array = typeof Int8Array === 'undefined' ? Array : Int8Array;\n\nvendor.Uint8Array = typeof Uint8Array === 'undefined' ? Array : Uint8Array;\n\nvendor.Uint16Array = typeof Uint16Array === 'undefined' ? Array : Uint16Array;\n\nvendor.Uint32Array = typeof Uint32Array === 'undefined' ? Array : Uint32Array;\n\nvendor.Int16Array = typeof Int16Array === 'undefined' ? Array : Int16Array;\n\nvendor.Float32Array = typeof Float32Array === 'undefined' ? Array : Float32Array;\n\nvendor.Float64Array = typeof Float64Array === 'undefined' ? Array : Float64Array;\n\nvar g = {};\nif (typeof window !== 'undefined') {\n    g = window;\n}\nelse if (typeof global !== 'undefined') {\n    g = global;\n}\n\n\nvendor.requestAnimationFrame = g.requestAnimationFrame\n    || g.msRequestAnimationFrame\n    || g.mozRequestAnimationFrame\n    || g.webkitRequestAnimationFrame\n    || function (func){ setTimeout(func, 16); };\n\nvendor.createCanvas = function () {\n    return document.createElement('canvas');\n};\n\nvendor.createImage = function () {\n    return new g.Image();\n};\n\nvendor.request = {\n    get: __WEBPACK_IMPORTED_MODULE_0__request__[\"a\" /* default */].get\n};\n\nvendor.addEventListener = function (dom, type, func, useCapture) {\n    dom.addEventListener(type, func, useCapture);\n};\n\nvendor.removeEventListener = function (dom, type, func) {\n    dom.removeEventListener(type, func);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vendor);\n\n/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(129)))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS92ZW5kb3IuanM/MTI1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgcmVxdWVzdCBmcm9tICcuL3JlcXVlc3QnO1xuXG52YXIgc3VwcG9ydFdlYkdMO1xuXG52YXIgdmVuZG9yID0ge307XG5cbi8qKlxuICogSWYgc3VwcG9ydCBXZWJHTFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xudmVuZG9yLnN1cHBvcnRXZWJHTCA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3VwcG9ydFdlYkdMID09IG51bGwpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIHZhciBnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCd3ZWJnbCcpIHx8IGNhbnZhcy5nZXRDb250ZXh0KCdleHBlcmltZW50YWwtd2ViZ2wnKTtcbiAgICAgICAgICAgIGlmICghZ2wpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgc3VwcG9ydFdlYkdMID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgIH1cbiAgICByZXR1cm4gc3VwcG9ydFdlYkdMO1xufTtcblxudmVuZG9yLkludDhBcnJheSA9IHR5cGVvZiBJbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBJbnQ4QXJyYXk7XG5cbnZlbmRvci5VaW50OEFycmF5ID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBVaW50OEFycmF5O1xuXG52ZW5kb3IuVWludDE2QXJyYXkgPSB0eXBlb2YgVWludDE2QXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBVaW50MTZBcnJheTtcblxudmVuZG9yLlVpbnQzMkFycmF5ID0gdHlwZW9mIFVpbnQzMkFycmF5ID09PSAndW5kZWZpbmVkJyA/IEFycmF5IDogVWludDMyQXJyYXk7XG5cbnZlbmRvci5JbnQxNkFycmF5ID0gdHlwZW9mIEludDE2QXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBJbnQxNkFycmF5O1xuXG52ZW5kb3IuRmxvYXQzMkFycmF5ID0gdHlwZW9mIEZsb2F0MzJBcnJheSA9PT0gJ3VuZGVmaW5lZCcgPyBBcnJheSA6IEZsb2F0MzJBcnJheTtcblxudmVuZG9yLkZsb2F0NjRBcnJheSA9IHR5cGVvZiBGbG9hdDY0QXJyYXkgPT09ICd1bmRlZmluZWQnID8gQXJyYXkgOiBGbG9hdDY0QXJyYXk7XG5cbnZhciBnID0ge307XG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnID0gd2luZG93O1xufVxuZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBnID0gZ2xvYmFsO1xufVxuXG5cbnZlbmRvci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSBnLnJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgIHx8IGcubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcbiAgICB8fCBnLm1velJlcXVlc3RBbmltYXRpb25GcmFtZVxuICAgIHx8IGcud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXG4gICAgfHwgZnVuY3Rpb24gKGZ1bmMpeyBzZXRUaW1lb3V0KGZ1bmMsIDE2KTsgfTtcblxudmVuZG9yLmNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG59O1xuXG52ZW5kb3IuY3JlYXRlSW1hZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5ldyBnLkltYWdlKCk7XG59O1xuXG52ZW5kb3IucmVxdWVzdCA9IHtcbiAgICBnZXQ6IHJlcXVlc3QuZ2V0XG59O1xuXG52ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lciA9IGZ1bmN0aW9uIChkb20sIHR5cGUsIGZ1bmMsIHVzZUNhcHR1cmUpIHtcbiAgICBkb20uYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBmdW5jLCB1c2VDYXB0dXJlKTtcbn07XG5cbnZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyID0gZnVuY3Rpb24gKGRvbSwgdHlwZSwgZnVuYykge1xuICAgIGRvbS5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsIGZ1bmMpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgdmVuZG9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvdmVuZG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 3 Dimensional Vector\n * @name vec3\n */\n\nvar vec3 = {};\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nvec3.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nvec3.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nvec3.fromValues = function(x, y, z) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nvec3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nvec3.set = function(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvec3.sub = vec3.subtract;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvec3.mul = vec3.multiply;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvec3.div = vec3.divide;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n};\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nvec3.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n};\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nvec3.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nvec3.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvec3.dist = vec3.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec3.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvec3.sqrDist = vec3.squaredDistance;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec3.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvec3.len = vec3.length;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec3.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvec3.sqrLen = vec3.squaredLength;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nvec3.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to invert\n * @returns {vec3} out\n */\nvec3.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n};\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nvec3.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    var len = x*x + y*y + z*z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.cross = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nvec3.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    var r = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])() * 2.0 * Math.PI;\n    var z = (Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])() * 2.0) - 1.0;\n    var zScale = Math.sqrt(1.0-z*z) * scale;\n\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2],\n        w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat3 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nvec3.transformQuat = function(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateX = function(out, a, b, c){\n   var p = [], r=[];\n      //Translate point to the origin\n      p[0] = a[0] - b[0];\n      p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n      //perform rotation\n      r[0] = p[0];\n      r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n      r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n      //translate to correct position\n      out[0] = r[0] + b[0];\n      out[1] = r[1] + b[1];\n      out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateY = function(out, a, b, c){\n    var p = [], r=[];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n    r[1] = p[1];\n    r[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {vec3} a The vec3 point to rotate\n * @param {vec3} b The origin of the rotation\n * @param {Number} c The angle of rotation\n * @returns {vec3} out\n */\nvec3.rotateZ = function(out, a, b, c){\n    var p = [], r=[];\n    //Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n\n    //perform rotation\n    r[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n    r[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n    r[2] = p[2];\n\n    //translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec3.forEach = (function() {\n    var vec = vec3.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 3;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n        }\n\n        return a;\n    };\n})();\n\n/**\n * Get the angle between two 3D vectors\n * @param {vec3} a The first operand\n * @param {vec3} b The second operand\n * @returns {Number} The angle in radians\n */\nvec3.angle = function(a, b) {\n\n    var tempA = vec3.fromValues(a[0], a[1], a[2]);\n    var tempB = vec3.fromValues(b[0], b[1], b[2]);\n\n    vec3.normalize(tempA, tempA);\n    vec3.normalize(tempB, tempB);\n\n    var cosine = vec3.dot(tempA, tempB);\n\n    if(cosine > 1.0){\n        return 0;\n    } else {\n        return Math.acos(cosine);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec3);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ2xtYXRyaXgvdmVjMy5qcz9jMDI3Il0sInNvdXJjZXNDb250ZW50IjpbIlxuLyogQ29weXJpZ2h0IChjKSAyMDEzLCBCcmFuZG9uIEpvbmVzLCBDb2xpbiBNYWNLZW56aWUgSVYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG5hcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbkFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG5XQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUlxuQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4oSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG5MT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbkFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4oSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuICovXG5cbmltcG9ydCB7IEdMTUFUX1JBTkRPTSwgR0xNQVRfQVJSQVlfVFlQRSB9IGZyb20gJy4vY29tbW9uJztcblxuLyoqXG4gKiBAY2xhc3MgMyBEaW1lbnNpb25hbCBWZWN0b3JcbiAqIEBuYW1lIHZlYzNcbiAqL1xuXG52YXIgdmVjMyA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcsIGVtcHR5IHZlYzNcbiAqXG4gKiBAcmV0dXJucyB7dmVjM30gYSBuZXcgM0QgdmVjdG9yXG4gKi9cbnZlYzMuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDMpO1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMyBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7dmVjM30gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xudmVjMy5jbG9uZSA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoMyk7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWMzIGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMzfSBhIG5ldyAzRCB2ZWN0b3JcbiAqL1xudmVjMy5mcm9tVmFsdWVzID0gZnVuY3Rpb24oeCwgeSwgeikge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSgzKTtcbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgb3V0WzJdID0gejtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjMyB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgc291cmNlIHZlY3RvclxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzIHRvIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLnNldCA9IGZ1bmN0aW9uKG91dCwgeCwgeSwgeikge1xuICAgIG91dFswXSA9IHg7XG4gICAgb3V0WzFdID0geTtcbiAgICBvdXRbMl0gPSB6O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFkZHMgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5hZGQgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdICsgYlsxXTtcbiAgICBvdXRbMl0gPSBhWzJdICsgYlsyXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTdWJ0cmFjdHMgdmVjdG9yIGIgZnJvbSB2ZWN0b3IgYVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5zdWJ0cmFjdCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gLSBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIG91dFsyXSA9IGFbMl0gLSBiWzJdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5zdWJ0cmFjdH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLnN1YiA9IHZlYzMuc3VidHJhY3Q7XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLm11bHRpcGx5ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAqIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAqIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSAqIGJbMl07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzMubXVsID0gdmVjMy5tdWx0aXBseTtcblxuLyoqXG4gKiBEaXZpZGVzIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuZGl2aWRlID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAvIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAvIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSAvIGJbMl07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLmRpdmlkZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLmRpdiA9IHZlYzMuZGl2aWRlO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1pbmltdW0gb2YgdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5taW4gPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBNYXRoLm1pbihhWzBdLCBiWzBdKTtcbiAgICBvdXRbMV0gPSBNYXRoLm1pbihhWzFdLCBiWzFdKTtcbiAgICBvdXRbMl0gPSBNYXRoLm1pbihhWzJdLCBiWzJdKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBtYXhpbXVtIG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gTWF0aC5tYXgoYVswXSwgYlswXSk7XG4gICAgb3V0WzFdID0gTWF0aC5tYXgoYVsxXSwgYlsxXSk7XG4gICAgb3V0WzJdID0gTWF0aC5tYXgoYVsyXSwgYlsyXSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIGEgdmVjMyBieSBhIHNjYWxhciBudW1iZXJcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSB2ZWN0b3IgdG8gc2NhbGVcbiAqIEBwYXJhbSB7TnVtYmVyfSBiIGFtb3VudCB0byBzY2FsZSB0aGUgdmVjdG9yIGJ5XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICogYjtcbiAgICBvdXRbMV0gPSBhWzFdICogYjtcbiAgICBvdXRbMl0gPSBhWzJdICogYjtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBZGRzIHR3byB2ZWMzJ3MgYWZ0ZXIgc2NhbGluZyB0aGUgc2Vjb25kIG9wZXJhbmQgYnkgYSBzY2FsYXIgdmFsdWVcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gc2NhbGUgdGhlIGFtb3VudCB0byBzY2FsZSBiIGJ5IGJlZm9yZSBhZGRpbmdcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5zY2FsZUFuZEFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgc2NhbGUpIHtcbiAgICBvdXRbMF0gPSBhWzBdICsgKGJbMF0gKiBzY2FsZSk7XG4gICAgb3V0WzFdID0gYVsxXSArIChiWzFdICogc2NhbGUpO1xuICAgIG91dFsyXSA9IGFbMl0gKyAoYlsyXSAqIHNjYWxlKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xudmVjMy5kaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgICB5ID0gYlsxXSAtIGFbMV0sXG4gICAgICAgIHogPSBiWzJdIC0gYVsyXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSArIHoqeik7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMy5kaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLmRpc3QgPSB2ZWMzLmRpc3RhbmNlO1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzMnc1xuICpcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xudmVjMy5zcXVhcmVkRGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdLFxuICAgICAgICB6ID0gYlsyXSAtIGFbMl07XG4gICAgcmV0dXJuIHgqeCArIHkqeSArIHoqejtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMzLnNxdWFyZWREaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLnNxckRpc3QgPSB2ZWMzLnNxdWFyZWREaXN0YW5jZTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG52ZWMzLmxlbmd0aCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXSxcbiAgICAgICAgeiA9IGFbMl07XG4gICAgcmV0dXJuIE1hdGguc3FydCh4KnggKyB5KnkgKyB6KnopO1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzMubGVuID0gdmVjMy5sZW5ndGg7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqL1xudmVjMy5zcXVhcmVkTGVuZ3RoID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sXG4gICAgICAgIHkgPSBhWzFdLFxuICAgICAgICB6ID0gYVsyXTtcbiAgICByZXR1cm4geCp4ICsgeSp5ICsgeip6O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzMuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLnNxckxlbiA9IHZlYzMuc3F1YXJlZExlbmd0aDtcblxuLyoqXG4gKiBOZWdhdGVzIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjM1xuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLm5lZ2F0ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IC1hWzBdO1xuICAgIG91dFsxXSA9IC1hWzFdO1xuICAgIG91dFsyXSA9IC1hWzJdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuaW52ZXJzZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICBvdXRbMl0gPSAxLjAgLyBhWzJdO1xuICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWMzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMubm9ybWFsaXplID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXSxcbiAgICAgICAgeiA9IGFbMl07XG4gICAgdmFyIGxlbiA9IHgqeCArIHkqeSArIHoqejtcbiAgICBpZiAobGVuID4gMCkge1xuICAgICAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgICAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgICAgIG91dFswXSA9IGFbMF0gKiBsZW47XG4gICAgICAgIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gICAgICAgIG91dFsyXSA9IGFbMl0gKiBsZW47XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xudmVjMy5kb3QgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdICsgYVsyXSAqIGJbMl07XG59O1xuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byB2ZWMzJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzN9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMuY3Jvc3MgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2YXIgYXggPSBhWzBdLCBheSA9IGFbMV0sIGF6ID0gYVsyXSxcbiAgICAgICAgYnggPSBiWzBdLCBieSA9IGJbMV0sIGJ6ID0gYlsyXTtcblxuICAgIG91dFswXSA9IGF5ICogYnogLSBheiAqIGJ5O1xuICAgIG91dFsxXSA9IGF6ICogYnggLSBheCAqIGJ6O1xuICAgIG91dFsyXSA9IGF4ICogYnkgLSBheSAqIGJ4O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjMydzXG4gKlxuICogQHBhcmFtIHt2ZWMzfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjM30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzN9IG91dFxuICovXG52ZWMzLmxlcnAgPSBmdW5jdGlvbiAob3V0LCBhLCBiLCB0KSB7XG4gICAgdmFyIGF4ID0gYVswXSxcbiAgICAgICAgYXkgPSBhWzFdLFxuICAgICAgICBheiA9IGFbMl07XG4gICAgb3V0WzBdID0gYXggKyB0ICogKGJbMF0gLSBheCk7XG4gICAgb3V0WzFdID0gYXkgKyB0ICogKGJbMV0gLSBheSk7XG4gICAgb3V0WzJdID0gYXogKyB0ICogKGJbMl0gLSBheik7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZVxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0gW3NjYWxlXSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9tbWl0dGVkLCBhIHVuaXQgdmVjdG9yIHdpbGwgYmUgcmV0dXJuZWRcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5yYW5kb20gPSBmdW5jdGlvbiAob3V0LCBzY2FsZSkge1xuICAgIHNjYWxlID0gc2NhbGUgfHwgMS4wO1xuXG4gICAgdmFyIHIgPSBHTE1BVF9SQU5ET00oKSAqIDIuMCAqIE1hdGguUEk7XG4gICAgdmFyIHogPSAoR0xNQVRfUkFORE9NKCkgKiAyLjApIC0gMS4wO1xuICAgIHZhciB6U2NhbGUgPSBNYXRoLnNxcnQoMS4wLXoqeikgKiBzY2FsZTtcblxuICAgIG91dFswXSA9IE1hdGguY29zKHIpICogelNjYWxlO1xuICAgIG91dFsxXSA9IE1hdGguc2luKHIpICogelNjYWxlO1xuICAgIG91dFsyXSA9IHogKiBzY2FsZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMzIHdpdGggYSBtYXQ0LlxuICogNHRoIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMSdcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMudHJhbnNmb3JtTWF0NCA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSwgeSA9IGFbMV0sIHogPSBhWzJdLFxuICAgICAgICB3ID0gbVszXSAqIHggKyBtWzddICogeSArIG1bMTFdICogeiArIG1bMTVdO1xuICAgIHcgPSB3IHx8IDEuMDtcbiAgICBvdXRbMF0gPSAobVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6ICsgbVsxMl0pIC8gdztcbiAgICBvdXRbMV0gPSAobVsxXSAqIHggKyBtWzVdICogeSArIG1bOV0gKiB6ICsgbVsxM10pIC8gdztcbiAgICBvdXRbMl0gPSAobVsyXSAqIHggKyBtWzZdICogeSArIG1bMTBdICogeiArIG1bMTRdKSAvIHc7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgbWF0My5cbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDR9IG0gdGhlIDN4MyBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy50cmFuc2Zvcm1NYXQzID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmFyIHggPSBhWzBdLCB5ID0gYVsxXSwgeiA9IGFbMl07XG4gICAgb3V0WzBdID0geCAqIG1bMF0gKyB5ICogbVszXSArIHogKiBtWzZdO1xuICAgIG91dFsxXSA9IHggKiBtWzFdICsgeSAqIG1bNF0gKyB6ICogbVs3XTtcbiAgICBvdXRbMl0gPSB4ICogbVsyXSArIHkgKiBtWzVdICsgeiAqIG1bOF07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMyB3aXRoIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7dmVjM30gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzN9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7cXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzMudHJhbnNmb3JtUXVhdCA9IGZ1bmN0aW9uKG91dCwgYSwgcSkge1xuICAgIC8vIGJlbmNobWFya3M6IGh0dHA6Ly9qc3BlcmYuY29tL3F1YXRlcm5pb24tdHJhbnNmb3JtLXZlYzMtaW1wbGVtZW50YXRpb25zXG5cbiAgICB2YXIgeCA9IGFbMF0sIHkgPSBhWzFdLCB6ID0gYVsyXSxcbiAgICAgICAgcXggPSBxWzBdLCBxeSA9IHFbMV0sIHF6ID0gcVsyXSwgcXcgPSBxWzNdLFxuXG4gICAgICAgIC8vIGNhbGN1bGF0ZSBxdWF0ICogdmVjXG4gICAgICAgIGl4ID0gcXcgKiB4ICsgcXkgKiB6IC0gcXogKiB5LFxuICAgICAgICBpeSA9IHF3ICogeSArIHF6ICogeCAtIHF4ICogeixcbiAgICAgICAgaXogPSBxdyAqIHogKyBxeCAqIHkgLSBxeSAqIHgsXG4gICAgICAgIGl3ID0gLXF4ICogeCAtIHF5ICogeSAtIHF6ICogejtcblxuICAgIC8vIGNhbGN1bGF0ZSByZXN1bHQgKiBpbnZlcnNlIHF1YXRcbiAgICBvdXRbMF0gPSBpeCAqIHF3ICsgaXcgKiAtcXggKyBpeSAqIC1xeiAtIGl6ICogLXF5O1xuICAgIG91dFsxXSA9IGl5ICogcXcgKyBpdyAqIC1xeSArIGl6ICogLXF4IC0gaXggKiAtcXo7XG4gICAgb3V0WzJdID0gaXogKiBxdyArIGl3ICogLXF6ICsgaXggKiAtcXkgLSBpeSAqIC1xeDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB4LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHt2ZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHt2ZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gYyBUaGUgYW5nbGUgb2Ygcm90YXRpb25cbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5yb3RhdGVYID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBjKXtcbiAgIHZhciBwID0gW10sIHI9W107XG4gICAgICAvL1RyYW5zbGF0ZSBwb2ludCB0byB0aGUgb3JpZ2luXG4gICAgICBwWzBdID0gYVswXSAtIGJbMF07XG4gICAgICBwWzFdID0gYVsxXSAtIGJbMV07XG4gICAgcFsyXSA9IGFbMl0gLSBiWzJdO1xuXG4gICAgICAvL3BlcmZvcm0gcm90YXRpb25cbiAgICAgIHJbMF0gPSBwWzBdO1xuICAgICAgclsxXSA9IHBbMV0qTWF0aC5jb3MoYykgLSBwWzJdKk1hdGguc2luKGMpO1xuICAgICAgclsyXSA9IHBbMV0qTWF0aC5zaW4oYykgKyBwWzJdKk1hdGguY29zKGMpO1xuXG4gICAgICAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG4gICAgICBvdXRbMF0gPSByWzBdICsgYlswXTtcbiAgICAgIG91dFsxXSA9IHJbMV0gKyBiWzFdO1xuICAgICAgb3V0WzJdID0gclsyXSArIGJbMl07XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB5LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHt2ZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHt2ZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gYyBUaGUgYW5nbGUgb2Ygcm90YXRpb25cbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5yb3RhdGVZID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBjKXtcbiAgICB2YXIgcCA9IFtdLCByPVtdO1xuICAgIC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cbiAgICBwWzBdID0gYVswXSAtIGJbMF07XG4gICAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIHBbMl0gPSBhWzJdIC0gYlsyXTtcblxuICAgIC8vcGVyZm9ybSByb3RhdGlvblxuICAgIHJbMF0gPSBwWzJdKk1hdGguc2luKGMpICsgcFswXSpNYXRoLmNvcyhjKTtcbiAgICByWzFdID0gcFsxXTtcbiAgICByWzJdID0gcFsyXSpNYXRoLmNvcyhjKSAtIHBbMF0qTWF0aC5zaW4oYyk7XG5cbiAgICAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG4gICAgb3V0WzBdID0gclswXSArIGJbMF07XG4gICAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gICAgb3V0WzJdID0gclsyXSArIGJbMl07XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGUgYSAzRCB2ZWN0b3IgYXJvdW5kIHRoZSB6LWF4aXNcbiAqIEBwYXJhbSB7dmVjM30gb3V0IFRoZSByZWNlaXZpbmcgdmVjM1xuICogQHBhcmFtIHt2ZWMzfSBhIFRoZSB2ZWMzIHBvaW50IHRvIHJvdGF0ZVxuICogQHBhcmFtIHt2ZWMzfSBiIFRoZSBvcmlnaW4gb2YgdGhlIHJvdGF0aW9uXG4gKiBAcGFyYW0ge051bWJlcn0gYyBUaGUgYW5nbGUgb2Ygcm90YXRpb25cbiAqIEByZXR1cm5zIHt2ZWMzfSBvdXRcbiAqL1xudmVjMy5yb3RhdGVaID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBjKXtcbiAgICB2YXIgcCA9IFtdLCByPVtdO1xuICAgIC8vVHJhbnNsYXRlIHBvaW50IHRvIHRoZSBvcmlnaW5cbiAgICBwWzBdID0gYVswXSAtIGJbMF07XG4gICAgcFsxXSA9IGFbMV0gLSBiWzFdO1xuICAgIHBbMl0gPSBhWzJdIC0gYlsyXTtcblxuICAgIC8vcGVyZm9ybSByb3RhdGlvblxuICAgIHJbMF0gPSBwWzBdKk1hdGguY29zKGMpIC0gcFsxXSpNYXRoLnNpbihjKTtcbiAgICByWzFdID0gcFswXSpNYXRoLnNpbihjKSArIHBbMV0qTWF0aC5jb3MoYyk7XG4gICAgclsyXSA9IHBbMl07XG5cbiAgICAvL3RyYW5zbGF0ZSB0byBjb3JyZWN0IHBvc2l0aW9uXG4gICAgb3V0WzBdID0gclswXSArIGJbMF07XG4gICAgb3V0WzFdID0gclsxXSArIGJbMV07XG4gICAgb3V0WzJdID0gclsyXSArIGJbMl07XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjM3MuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMy4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzNzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG52ZWMzLmZvckVhY2ggPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlYyA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgICAgIHZhciBpLCBsO1xuICAgICAgICBpZighc3RyaWRlKSB7XG4gICAgICAgICAgICBzdHJpZGUgPSAzO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIW9mZnNldCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvdW50KSB7XG4gICAgICAgICAgICBsID0gTWF0aC5taW4oKGNvdW50ICogc3RyaWRlKSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbCA9IGEubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmVjWzBdID0gYVtpXTsgdmVjWzFdID0gYVtpKzFdOyB2ZWNbMl0gPSBhW2krMl07XG4gICAgICAgICAgICBmbih2ZWMsIHZlYywgYXJnKTtcbiAgICAgICAgICAgIGFbaV0gPSB2ZWNbMF07IGFbaSsxXSA9IHZlY1sxXTsgYVtpKzJdID0gdmVjWzJdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbn0pKCk7XG5cbi8qKlxuICogR2V0IHRoZSBhbmdsZSBiZXR3ZWVuIHR3byAzRCB2ZWN0b3JzXG4gKiBAcGFyYW0ge3ZlYzN9IGEgVGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjM30gYiBUaGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFRoZSBhbmdsZSBpbiByYWRpYW5zXG4gKi9cbnZlYzMuYW5nbGUgPSBmdW5jdGlvbihhLCBiKSB7XG5cbiAgICB2YXIgdGVtcEEgPSB2ZWMzLmZyb21WYWx1ZXMoYVswXSwgYVsxXSwgYVsyXSk7XG4gICAgdmFyIHRlbXBCID0gdmVjMy5mcm9tVmFsdWVzKGJbMF0sIGJbMV0sIGJbMl0pO1xuXG4gICAgdmVjMy5ub3JtYWxpemUodGVtcEEsIHRlbXBBKTtcbiAgICB2ZWMzLm5vcm1hbGl6ZSh0ZW1wQiwgdGVtcEIpO1xuXG4gICAgdmFyIGNvc2luZSA9IHZlYzMuZG90KHRlbXBBLCB0ZW1wQik7XG5cbiAgICBpZihjb3NpbmUgPiAxLjApe1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gTWF0aC5hY29zKGNvc2luZSk7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdmVjMztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ2xtYXRyaXgvdmVjMy5qc1xuLy8gbW9kdWxlIGlkID0gNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/**\n * Mainly do the parse and compile of shader string\n * Support shader code chunk import and export\n * Support shader semantics\n * http://www.nvidia.com/object/using_sas.html\n * https://github.com/KhronosGroup/collada2json/issues/45\n */\n\n\n\nvar uniformRegex = /uniform\\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\\s+([\\s\\S]*?);/g;\nvar attributeRegex = /attribute\\s+(float|int|vec2|vec3|vec4)\\s+([\\s\\S]*?);/g;\n// Only parse number define.\nvar defineRegex = /#define\\s+(\\w+)?(\\s+[\\d-.]+)?\\s*;?\\s*\\n/g;\n\nvar uniformTypeMap = {\n    'bool': '1i',\n    'int': '1i',\n    'sampler2D': 't',\n    'samplerCube': 't',\n    'float': '1f',\n    'vec2': '2f',\n    'vec3': '3f',\n    'vec4': '4f',\n    'ivec2': '2i',\n    'ivec3': '3i',\n    'ivec4': '4i',\n    'mat2': 'm2',\n    'mat3': 'm3',\n    'mat4': 'm4'\n};\n\nfunction createZeroArray(len) {\n    var arr = [];\n    for (var i = 0; i < len; i++) {\n        arr[i] = 0;\n    }\n    return arr;\n}\n\nvar uniformValueConstructor = {\n    'bool': function () { return true; },\n    'int': function () { return 0; },\n    'float': function () { return 0; },\n    'sampler2D': function () { return null; },\n    'samplerCube': function () { return null; },\n\n    'vec2': function () { return createZeroArray(2); },\n    'vec3': function () { return createZeroArray(3); },\n    'vec4': function () { return createZeroArray(4); },\n\n    'ivec2': function () { return createZeroArray(2); },\n    'ivec3': function () { return createZeroArray(3); },\n    'ivec4': function () { return createZeroArray(4); },\n\n    'mat2': function () { return createZeroArray(4); },\n    'mat3': function () { return createZeroArray(9); },\n    'mat4': function () { return createZeroArray(16); },\n\n    'array': function () { return []; }\n};\n\nvar attributeSemantics = [\n    'POSITION',\n    'NORMAL',\n    'BINORMAL',\n    'TANGENT',\n    'TEXCOORD',\n    'TEXCOORD_0',\n    'TEXCOORD_1',\n    'COLOR',\n    // Skinning\n    // https://github.com/KhronosGroup/glTF/blob/master/specification/README.md#semantics\n    'JOINT',\n    'WEIGHT'\n];\nvar uniformSemantics = [\n    'SKIN_MATRIX',\n    // Information about viewport\n    'VIEWPORT_SIZE',\n    'VIEWPORT',\n    'DEVICEPIXELRATIO',\n    // Window size for window relative coordinate\n    // https://www.opengl.org/sdk/docs/man/html/gl_FragCoord.xhtml\n    'WINDOW_SIZE',\n    // Infomation about camera\n    'NEAR',\n    'FAR',\n    // Time\n    'TIME',\n    // Log depth buffer\n    'LOG_DEPTH_BUFFER_FC'\n];\nvar matrixSemantics = [\n    'WORLD',\n    'VIEW',\n    'PROJECTION',\n    'WORLDVIEW',\n    'VIEWPROJECTION',\n    'WORLDVIEWPROJECTION',\n    'WORLDINVERSE',\n    'VIEWINVERSE',\n    'PROJECTIONINVERSE',\n    'WORLDVIEWINVERSE',\n    'VIEWPROJECTIONINVERSE',\n    'WORLDVIEWPROJECTIONINVERSE',\n    'WORLDTRANSPOSE',\n    'VIEWTRANSPOSE',\n    'PROJECTIONTRANSPOSE',\n    'WORLDVIEWTRANSPOSE',\n    'VIEWPROJECTIONTRANSPOSE',\n    'WORLDVIEWPROJECTIONTRANSPOSE',\n    'WORLDINVERSETRANSPOSE',\n    'VIEWINVERSETRANSPOSE',\n    'PROJECTIONINVERSETRANSPOSE',\n    'WORLDVIEWINVERSETRANSPOSE',\n    'VIEWPROJECTIONINVERSETRANSPOSE',\n    'WORLDVIEWPROJECTIONINVERSETRANSPOSE'\n];\n\nvar attributeSizeMap = {\n    // WebGL does not support integer attributes\n    'vec4': 4,\n    'vec3': 3,\n    'vec2': 2,\n    'float': 1\n};\n\n\nvar shaderIDCache = {};\nvar shaderCodeCache = {};\n\nfunction getShaderID(vertex, fragment) {\n    var key = 'vertex:' + vertex + 'fragment:' + fragment;\n    if (shaderIDCache[key]) {\n        return shaderIDCache[key];\n    }\n    var id = __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].genGUID();\n    shaderIDCache[key] = id;\n\n    shaderCodeCache[id] = {\n        vertex: vertex,\n        fragment: fragment\n    };\n\n    return id;\n}\n\nfunction removeComment(code) {\n    return code.replace(/[ \\t]*\\/\\/.*\\n/g, '' )   // remove //\n        .replace(/[ \\t]*\\/\\*[\\s\\S]*?\\*\\//g, '' ); // remove /* */\n}\n\nfunction logSyntaxError() {\n    console.error('Wrong uniform/attributes syntax');\n}\n\nfunction parseDeclarations(type, line) {\n    var speratorsRegexp = /[,=\\(\\):]/;\n    var tokens = line\n        // Convert `symbol: [1,2,3]` to `symbol: vec3(1,2,3)`\n        .replace(/:\\s*\\[\\s*(.*)\\s*\\]/g, '=' + type + '($1)')\n        .replace(/\\s+/g, '')\n        .split(/(?=[,=\\(\\):])/g);\n\n    var newTokens = [];\n    for (var i = 0; i < tokens.length; i++) {\n        if (tokens[i].match(speratorsRegexp)) {\n            newTokens.push(\n                tokens[i].charAt(0),\n                tokens[i].slice(1)\n            );\n        }\n        else {\n            newTokens.push(tokens[i]);\n        }\n    }\n    tokens = newTokens;\n\n    var TYPE_SYMBOL = 0;\n    var TYPE_ASSIGN = 1;\n    var TYPE_VEC = 2;\n    var TYPE_ARR = 3;\n    var TYPE_SEMANTIC = 4;\n    var TYPE_NORMAL = 5;\n\n    var opType = TYPE_SYMBOL;\n    var declarations = {};\n    var declarationValue = null;\n    var currentDeclaration;\n\n    addSymbol(tokens[0]);\n\n    function addSymbol(symbol) {\n        if (!symbol) {\n            logSyntaxError();\n        }\n        var arrResult = symbol.match(/\\[(.*?)\\]/);\n        currentDeclaration = symbol.replace(/\\[(.*?)\\]/, '');\n        declarations[currentDeclaration] = {};\n        if (arrResult) {\n            declarations[currentDeclaration].isArray = true;\n            declarations[currentDeclaration].arraySize = arrResult[1];\n        }\n    }\n\n    for (var i = 1; i < tokens.length; i++) {\n        var token = tokens[i];\n        if (!token) {   // Empty token;\n            continue;\n        }\n        if (token === '=') {\n            if (opType !== TYPE_SYMBOL\n            && opType !== TYPE_ARR) {\n                logSyntaxError();\n                break;\n            }\n            opType = TYPE_ASSIGN;\n\n            continue;\n        }\n        else if (token === ':') {\n            opType = TYPE_SEMANTIC;\n\n            continue;\n        }\n        else if (token === ',') {\n            if (opType === TYPE_VEC) {\n                if (!(declarationValue instanceof Array)) {\n                    logSyntaxError();\n                    break;\n                }\n                declarationValue.push(+tokens[++i]);\n            }\n            else {\n                opType = TYPE_NORMAL;\n            }\n\n            continue;\n        }\n        else if (token === ')') {\n            declarations[currentDeclaration].value = new __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].Float32Array(declarationValue);\n            declarationValue = null;\n            opType = TYPE_NORMAL;\n            continue;\n        }\n        else if (token === '(') {\n            if (opType !== TYPE_VEC) {\n                logSyntaxError();\n                break;\n            }\n            if (!(declarationValue instanceof Array)) {\n                logSyntaxError();\n                break;\n            }\n            declarationValue.push(+tokens[++i]);\n            continue;\n        }\n        else if (token.indexOf('vec') >= 0) {\n            if (opType !== TYPE_ASSIGN\n            // Compatitable with old syntax `symbol: [1,2,3]`\n            && opType !== TYPE_SEMANTIC) {\n                logSyntaxError();\n                break;\n            }\n            opType = TYPE_VEC;\n            declarationValue = [];\n            continue;\n        }\n        else if (opType === TYPE_ASSIGN) {\n            if (type === 'bool') {\n                declarations[currentDeclaration].value = token === 'true';\n            }\n            else {\n                declarations[currentDeclaration].value = parseFloat(token);\n            }\n            declarationValue = null;\n            continue;\n        }\n        else if (opType === TYPE_SEMANTIC) {\n            var semantic = token;\n            if (attributeSemantics.indexOf(semantic) >= 0\n                || uniformSemantics.indexOf(semantic) >= 0\n                || matrixSemantics.indexOf(semantic) >= 0\n            ) {\n                declarations[currentDeclaration].semantic = semantic;\n            }\n            else if (semantic === 'ignore' || semantic === 'unconfigurable') {\n                declarations[currentDeclaration].ignore = true;\n            }\n            else {\n                // Try to parse as a default tvalue.\n                if (type === 'bool') {\n                    declarations[currentDeclaration].value = semantic === 'true';\n                }\n                else {\n                    declarations[currentDeclaration].value = parseFloat(semantic);\n                }\n            }\n            continue;\n        }\n\n        // treat as symbol.\n        addSymbol(token);\n        opType = TYPE_SYMBOL;\n    }\n\n    return declarations;\n}\n\n\n/**\n * @constructor\n * @extends clay.core.Base\n * @alias clay.Shader\n * @param {string} vertex\n * @param {string} fragment\n * @example\n * // Create a phong shader\n * var shader = new clay.Shader(\n *      clay.Shader.source('clay.standard.vertex'),\n *      clay.Shader.source('clay.standard.fragment')\n * );\n */\nfunction Shader(vertex, fragment) {\n    // First argument can be { vertex, fragment }\n    if (typeof vertex === 'object') {\n        fragment = vertex.fragment;\n        vertex = vertex.vertex;\n    }\n\n    vertex = removeComment(vertex);\n    fragment = removeComment(fragment);\n\n    this._shaderID = getShaderID(vertex, fragment);\n\n    this._vertexCode = Shader.parseImport(vertex);\n    this._fragmentCode = Shader.parseImport(fragment);\n\n    /**\n     * @readOnly\n     */\n    this.attributeSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.matrixSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.uniformSemantics = {};\n    /**\n     * @readOnly\n     */\n    this.matrixSemanticKeys = [];\n    /**\n     * @readOnly\n     */\n    this.uniformTemplates = {};\n    /**\n     * @readOnly\n     */\n    this.attributes = {};\n    /**\n     * @readOnly\n     */\n    this.textures = {};\n    /**\n     * @readOnly\n     */\n    this.vertexDefines = {};\n    /**\n     * @readOnly\n     */\n    this.fragmentDefines = {};\n\n    this._parseAttributes();\n    this._parseUniforms();\n    this._parseDefines();\n}\n\nShader.prototype = {\n\n    constructor: Shader,\n\n    // Create a new uniform instance for material\n    createUniforms: function () {\n        var uniforms = {};\n\n        for (var symbol in this.uniformTemplates){\n            var uniformTpl = this.uniformTemplates[symbol];\n            uniforms[symbol] = {\n                type: uniformTpl.type,\n                value: uniformTpl.value()\n            };\n        }\n\n        return uniforms;\n    },\n\n    _parseImport: function () {\n        this._vertexCode = Shader.parseImport(this.vertex);\n        this._fragmentCode = Shader.parseImport(this.fragment);\n    },\n\n    _addSemanticUniform: function (symbol, uniformType, semantic) {\n        // This case is only for SKIN_MATRIX\n        // TODO\n        if (attributeSemantics.indexOf(semantic) >= 0) {\n            this.attributeSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType\n            };\n        }\n        else if (matrixSemantics.indexOf(semantic) >= 0) {\n            var isTranspose = false;\n            var semanticNoTranspose = semantic;\n            if (semantic.match(/TRANSPOSE$/)) {\n                isTranspose = true;\n                semanticNoTranspose = semantic.slice(0, -9);\n            }\n            this.matrixSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType,\n                isTranspose: isTranspose,\n                semanticNoTranspose: semanticNoTranspose\n            };\n        }\n        else if (uniformSemantics.indexOf(semantic) >= 0) {\n            this.uniformSemantics[semantic] = {\n                symbol: symbol,\n                type: uniformType\n            };\n        }\n    },\n\n    _addMaterialUniform: function (symbol, type, uniformType, defaultValueFunc, isArray, materialUniforms) {\n        materialUniforms[symbol] = {\n            type: uniformType,\n            value: isArray ? uniformValueConstructor['array'] : (defaultValueFunc || uniformValueConstructor[type]),\n            semantic: null\n        };\n    },\n\n    _parseUniforms: function () {\n        var uniforms = {};\n        var self = this;\n        var shaderType = 'vertex';\n        this._uniformList = [];\n\n        this._vertexCode = this._vertexCode.replace(uniformRegex, _uniformParser);\n        shaderType = 'fragment';\n        this._fragmentCode = this._fragmentCode.replace(uniformRegex, _uniformParser);\n\n        self.matrixSemanticKeys = Object.keys(this.matrixSemantics);\n\n        function makeDefaultValueFunc(value) {\n            return value != null ? function () { return value; } : null;\n        }\n\n        function _uniformParser(str, type, content) {\n            var declaredUniforms = parseDeclarations(type, content);\n            var uniformMainStr = [];\n            for (var symbol in declaredUniforms) {\n\n                var uniformInfo = declaredUniforms[symbol];\n                var semantic = uniformInfo.semantic;\n                var tmpStr = symbol;\n                var uniformType = uniformTypeMap[type];\n                var defaultValueFunc = makeDefaultValueFunc(declaredUniforms[symbol].value);\n                if (declaredUniforms[symbol].isArray) {\n                    tmpStr += '[' + declaredUniforms[symbol].arraySize + ']';\n                    uniformType += 'v';\n                }\n\n                uniformMainStr.push(tmpStr);\n\n                self._uniformList.push(symbol);\n\n                if (!uniformInfo.ignore) {\n                    if (type === 'sampler2D' || type === 'samplerCube') {\n                        // Texture is default disabled\n                        self.textures[symbol] = {\n                            shaderType: shaderType,\n                            type: type\n                        };\n                    }\n\n                    if (semantic) {\n                        // TODO Should not declare multiple symbols if have semantic.\n                        self._addSemanticUniform(symbol, uniformType, semantic);\n                    }\n                    else {\n                        self._addMaterialUniform(\n                            symbol, type, uniformType, defaultValueFunc,\n                            declaredUniforms[symbol].isArray, uniforms\n                        );\n                    }\n                }\n            }\n            return uniformMainStr.length > 0\n                ? 'uniform ' + type + ' ' + uniformMainStr.join(',') + ';\\n' : '';\n        }\n\n        this.uniformTemplates = uniforms;\n    },\n\n    _parseAttributes: function () {\n        var attributes = {};\n        var self = this;\n        this._vertexCode = this._vertexCode.replace(attributeRegex, _attributeParser);\n\n        function _attributeParser(str, type, content) {\n            var declaredAttributes = parseDeclarations(type, content);\n\n            var size = attributeSizeMap[type] || 1;\n            var attributeMainStr = [];\n            for (var symbol in declaredAttributes) {\n                var semantic = declaredAttributes[symbol].semantic;\n                attributes[symbol] = {\n                    // TODO Can only be float\n                    type: 'float',\n                    size: size,\n                    semantic: semantic || null\n                };\n                // TODO Should not declare multiple symbols if have semantic.\n                if (semantic) {\n                    if (attributeSemantics.indexOf(semantic) < 0) {\n                        throw new Error('Unkown semantic \"' + semantic + '\"');\n                    }\n                    else {\n                        self.attributeSemantics[semantic] = {\n                            symbol: symbol,\n                            type: type\n                        };\n                    }\n                }\n                attributeMainStr.push(symbol);\n            }\n\n            return 'attribute ' + type + ' ' + attributeMainStr.join(',') + ';\\n';\n        }\n\n        this.attributes = attributes;\n    },\n\n    _parseDefines: function () {\n        var self = this;\n        var shaderType = 'vertex';\n        this._vertexCode = this._vertexCode.replace(defineRegex, _defineParser);\n        shaderType = 'fragment';\n        this._fragmentCode = this._fragmentCode.replace(defineRegex, _defineParser);\n\n        function _defineParser(str, symbol, value) {\n            var defines = shaderType === 'vertex' ? self.vertexDefines : self.fragmentDefines;\n            if (!defines[symbol]) { // Haven't been defined by user\n                if (value === 'false') {\n                    defines[symbol] = false;\n                }\n                else if (value === 'true') {\n                    defines[symbol] = true;\n                }\n                else {\n                    defines[symbol] = value\n                        // If can parse to float\n                        ? (isNaN(parseFloat(value)) ? value.trim() : parseFloat(value))\n                        : null;\n                }\n            }\n            return '';\n        }\n    },\n\n    /**\n     * Clone a new shader\n     * @return {clay.Shader}\n     */\n    clone: function () {\n        var code = shaderCodeCache[this._shaderID];\n        var shader = new Shader(code.vertex, code.fragment);\n        return shader;\n    }\n};\n\nif (Object.defineProperty) {\n    Object.defineProperty(Shader.prototype, 'shaderID', {\n        get: function () {\n            return this._shaderID;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'vertex', {\n        get: function () {\n            return this._vertexCode;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'fragment', {\n        get: function () {\n            return this._fragmentCode;\n        }\n    });\n    Object.defineProperty(Shader.prototype, 'uniforms', {\n        get: function () {\n            return this._uniformList;\n        }\n    });\n}\n\nvar importRegex = /(@import)\\s*([0-9a-zA-Z_\\-\\.]*)/g;\nShader.parseImport = function (shaderStr) {\n    shaderStr = shaderStr.replace(importRegex, function (str, importSymbol, importName) {\n        var str = Shader.source(importName);\n        if (str) {\n            // Recursively parse\n            return Shader.parseImport(str);\n        }\n        else {\n            console.error('Shader chunk \"' + importName + '\" not existed in library');\n            return '';\n        }\n    });\n    return shaderStr;\n};\n\nvar exportRegex = /(@export)\\s*([0-9a-zA-Z_\\-\\.]*)\\s*\\n([\\s\\S]*?)@end/g;\n\n/**\n * Import shader source\n * @param  {string} shaderStr\n * @memberOf clay.Shader\n */\nShader['import'] = function (shaderStr) {\n    shaderStr.replace(exportRegex, function (str, exportSymbol, exportName, code) {\n        var code = code.replace(/(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+\\x24)/g, '');\n        if (code) {\n            var parts = exportName.split('.');\n            var obj = Shader.codes;\n            var i = 0;\n            var key;\n            while (i < parts.length - 1) {\n                key = parts[i++];\n                if (!obj[key]) {\n                    obj[key] = {};\n                }\n                obj = obj[key];\n            }\n            key = parts[i];\n            obj[key] = code;\n        }\n        return code;\n    });\n};\n\n/**\n * Library to store all the loaded shader codes\n * @type {Object}\n * @readOnly\n * @memberOf clay.Shader\n */\nShader.codes = {};\n\n/**\n * Get shader source\n * @param  {string} name\n * @return {string}\n */\nShader.source = function (name) {\n    var parts = name.split('.');\n    var obj = Shader.codes;\n    var i = 0;\n    while (obj && i < parts.length) {\n        var key = parts[i++];\n        obj = obj[key];\n    }\n    if (typeof obj !== 'string') {\n        // FIXME Use default instead\n        console.error('Shader \"' + name + '\" not existed in library');\n        return '';\n    }\n    return obj;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Shader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvU2hhZGVyLmpzPzNmNGEiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNYWlubHkgZG8gdGhlIHBhcnNlIGFuZCBjb21waWxlIG9mIHNoYWRlciBzdHJpbmdcbiAqIFN1cHBvcnQgc2hhZGVyIGNvZGUgY2h1bmsgaW1wb3J0IGFuZCBleHBvcnRcbiAqIFN1cHBvcnQgc2hhZGVyIHNlbWFudGljc1xuICogaHR0cDovL3d3dy5udmlkaWEuY29tL29iamVjdC91c2luZ19zYXMuaHRtbFxuICogaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9jb2xsYWRhMmpzb24vaXNzdWVzLzQ1XG4gKi9cbmltcG9ydCB1dGlsIGZyb20gJy4vY29yZS91dGlsJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5cbnZhciB1bmlmb3JtUmVnZXggPSAvdW5pZm9ybVxccysoYm9vbHxmbG9hdHxpbnR8dmVjMnx2ZWMzfHZlYzR8aXZlYzJ8aXZlYzN8aXZlYzR8bWF0MnxtYXQzfG1hdDR8c2FtcGxlcjJEfHNhbXBsZXJDdWJlKVxccysoW1xcc1xcU10qPyk7L2c7XG52YXIgYXR0cmlidXRlUmVnZXggPSAvYXR0cmlidXRlXFxzKyhmbG9hdHxpbnR8dmVjMnx2ZWMzfHZlYzQpXFxzKyhbXFxzXFxTXSo/KTsvZztcbi8vIE9ubHkgcGFyc2UgbnVtYmVyIGRlZmluZS5cbnZhciBkZWZpbmVSZWdleCA9IC8jZGVmaW5lXFxzKyhcXHcrKT8oXFxzK1tcXGQtLl0rKT9cXHMqOz9cXHMqXFxuL2c7XG5cbnZhciB1bmlmb3JtVHlwZU1hcCA9IHtcbiAgICAnYm9vbCc6ICcxaScsXG4gICAgJ2ludCc6ICcxaScsXG4gICAgJ3NhbXBsZXIyRCc6ICd0JyxcbiAgICAnc2FtcGxlckN1YmUnOiAndCcsXG4gICAgJ2Zsb2F0JzogJzFmJyxcbiAgICAndmVjMic6ICcyZicsXG4gICAgJ3ZlYzMnOiAnM2YnLFxuICAgICd2ZWM0JzogJzRmJyxcbiAgICAnaXZlYzInOiAnMmknLFxuICAgICdpdmVjMyc6ICczaScsXG4gICAgJ2l2ZWM0JzogJzRpJyxcbiAgICAnbWF0Mic6ICdtMicsXG4gICAgJ21hdDMnOiAnbTMnLFxuICAgICdtYXQ0JzogJ200J1xufTtcblxuZnVuY3Rpb24gY3JlYXRlWmVyb0FycmF5KGxlbikge1xuICAgIHZhciBhcnIgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IDA7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59XG5cbnZhciB1bmlmb3JtVmFsdWVDb25zdHJ1Y3RvciA9IHtcbiAgICAnYm9vbCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgJ2ludCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIDA7IH0sXG4gICAgJ2Zsb2F0JzogZnVuY3Rpb24gKCkgeyByZXR1cm4gMDsgfSxcbiAgICAnc2FtcGxlcjJEJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gbnVsbDsgfSxcbiAgICAnc2FtcGxlckN1YmUnOiBmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9LFxuXG4gICAgJ3ZlYzInOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVaZXJvQXJyYXkoMik7IH0sXG4gICAgJ3ZlYzMnOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVaZXJvQXJyYXkoMyk7IH0sXG4gICAgJ3ZlYzQnOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVaZXJvQXJyYXkoNCk7IH0sXG5cbiAgICAnaXZlYzInOiBmdW5jdGlvbiAoKSB7IHJldHVybiBjcmVhdGVaZXJvQXJyYXkoMik7IH0sXG4gICAgJ2l2ZWMzJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDMpOyB9LFxuICAgICdpdmVjNCc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGNyZWF0ZVplcm9BcnJheSg0KTsgfSxcblxuICAgICdtYXQyJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDQpOyB9LFxuICAgICdtYXQzJzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDkpOyB9LFxuICAgICdtYXQ0JzogZnVuY3Rpb24gKCkgeyByZXR1cm4gY3JlYXRlWmVyb0FycmF5KDE2KTsgfSxcblxuICAgICdhcnJheSc6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIFtdOyB9XG59O1xuXG52YXIgYXR0cmlidXRlU2VtYW50aWNzID0gW1xuICAgICdQT1NJVElPTicsXG4gICAgJ05PUk1BTCcsXG4gICAgJ0JJTk9STUFMJyxcbiAgICAnVEFOR0VOVCcsXG4gICAgJ1RFWENPT1JEJyxcbiAgICAnVEVYQ09PUkRfMCcsXG4gICAgJ1RFWENPT1JEXzEnLFxuICAgICdDT0xPUicsXG4gICAgLy8gU2tpbm5pbmdcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi9SRUFETUUubWQjc2VtYW50aWNzXG4gICAgJ0pPSU5UJyxcbiAgICAnV0VJR0hUJ1xuXTtcbnZhciB1bmlmb3JtU2VtYW50aWNzID0gW1xuICAgICdTS0lOX01BVFJJWCcsXG4gICAgLy8gSW5mb3JtYXRpb24gYWJvdXQgdmlld3BvcnRcbiAgICAnVklFV1BPUlRfU0laRScsXG4gICAgJ1ZJRVdQT1JUJyxcbiAgICAnREVWSUNFUElYRUxSQVRJTycsXG4gICAgLy8gV2luZG93IHNpemUgZm9yIHdpbmRvdyByZWxhdGl2ZSBjb29yZGluYXRlXG4gICAgLy8gaHR0cHM6Ly93d3cub3BlbmdsLm9yZy9zZGsvZG9jcy9tYW4vaHRtbC9nbF9GcmFnQ29vcmQueGh0bWxcbiAgICAnV0lORE9XX1NJWkUnLFxuICAgIC8vIEluZm9tYXRpb24gYWJvdXQgY2FtZXJhXG4gICAgJ05FQVInLFxuICAgICdGQVInLFxuICAgIC8vIFRpbWVcbiAgICAnVElNRScsXG4gICAgLy8gTG9nIGRlcHRoIGJ1ZmZlclxuICAgICdMT0dfREVQVEhfQlVGRkVSX0ZDJ1xuXTtcbnZhciBtYXRyaXhTZW1hbnRpY3MgPSBbXG4gICAgJ1dPUkxEJyxcbiAgICAnVklFVycsXG4gICAgJ1BST0pFQ1RJT04nLFxuICAgICdXT1JMRFZJRVcnLFxuICAgICdWSUVXUFJPSkVDVElPTicsXG4gICAgJ1dPUkxEVklFV1BST0pFQ1RJT04nLFxuICAgICdXT1JMRElOVkVSU0UnLFxuICAgICdWSUVXSU5WRVJTRScsXG4gICAgJ1BST0pFQ1RJT05JTlZFUlNFJyxcbiAgICAnV09STERWSUVXSU5WRVJTRScsXG4gICAgJ1ZJRVdQUk9KRUNUSU9OSU5WRVJTRScsXG4gICAgJ1dPUkxEVklFV1BST0pFQ1RJT05JTlZFUlNFJyxcbiAgICAnV09STERUUkFOU1BPU0UnLFxuICAgICdWSUVXVFJBTlNQT1NFJyxcbiAgICAnUFJPSkVDVElPTlRSQU5TUE9TRScsXG4gICAgJ1dPUkxEVklFV1RSQU5TUE9TRScsXG4gICAgJ1ZJRVdQUk9KRUNUSU9OVFJBTlNQT1NFJyxcbiAgICAnV09STERWSUVXUFJPSkVDVElPTlRSQU5TUE9TRScsXG4gICAgJ1dPUkxESU5WRVJTRVRSQU5TUE9TRScsXG4gICAgJ1ZJRVdJTlZFUlNFVFJBTlNQT1NFJyxcbiAgICAnUFJPSkVDVElPTklOVkVSU0VUUkFOU1BPU0UnLFxuICAgICdXT1JMRFZJRVdJTlZFUlNFVFJBTlNQT1NFJyxcbiAgICAnVklFV1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFJyxcbiAgICAnV09STERWSUVXUFJPSkVDVElPTklOVkVSU0VUUkFOU1BPU0UnXG5dO1xuXG52YXIgYXR0cmlidXRlU2l6ZU1hcCA9IHtcbiAgICAvLyBXZWJHTCBkb2VzIG5vdCBzdXBwb3J0IGludGVnZXIgYXR0cmlidXRlc1xuICAgICd2ZWM0JzogNCxcbiAgICAndmVjMyc6IDMsXG4gICAgJ3ZlYzInOiAyLFxuICAgICdmbG9hdCc6IDFcbn07XG5cblxudmFyIHNoYWRlcklEQ2FjaGUgPSB7fTtcbnZhciBzaGFkZXJDb2RlQ2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gZ2V0U2hhZGVySUQodmVydGV4LCBmcmFnbWVudCkge1xuICAgIHZhciBrZXkgPSAndmVydGV4OicgKyB2ZXJ0ZXggKyAnZnJhZ21lbnQ6JyArIGZyYWdtZW50O1xuICAgIGlmIChzaGFkZXJJRENhY2hlW2tleV0pIHtcbiAgICAgICAgcmV0dXJuIHNoYWRlcklEQ2FjaGVba2V5XTtcbiAgICB9XG4gICAgdmFyIGlkID0gdXRpbC5nZW5HVUlEKCk7XG4gICAgc2hhZGVySURDYWNoZVtrZXldID0gaWQ7XG5cbiAgICBzaGFkZXJDb2RlQ2FjaGVbaWRdID0ge1xuICAgICAgICB2ZXJ0ZXg6IHZlcnRleCxcbiAgICAgICAgZnJhZ21lbnQ6IGZyYWdtZW50XG4gICAgfTtcblxuICAgIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlQ29tbWVudChjb2RlKSB7XG4gICAgcmV0dXJuIGNvZGUucmVwbGFjZSgvWyBcXHRdKlxcL1xcLy4qXFxuL2csICcnICkgICAvLyByZW1vdmUgLy9cbiAgICAgICAgLnJlcGxhY2UoL1sgXFx0XSpcXC9cXCpbXFxzXFxTXSo/XFwqXFwvL2csICcnICk7IC8vIHJlbW92ZSAvKiAqL1xufVxuXG5mdW5jdGlvbiBsb2dTeW50YXhFcnJvcigpIHtcbiAgICBjb25zb2xlLmVycm9yKCdXcm9uZyB1bmlmb3JtL2F0dHJpYnV0ZXMgc3ludGF4Jyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGVjbGFyYXRpb25zKHR5cGUsIGxpbmUpIHtcbiAgICB2YXIgc3BlcmF0b3JzUmVnZXhwID0gL1ssPVxcKFxcKTpdLztcbiAgICB2YXIgdG9rZW5zID0gbGluZVxuICAgICAgICAvLyBDb252ZXJ0IGBzeW1ib2w6IFsxLDIsM11gIHRvIGBzeW1ib2w6IHZlYzMoMSwyLDMpYFxuICAgICAgICAucmVwbGFjZSgvOlxccypcXFtcXHMqKC4qKVxccypcXF0vZywgJz0nICsgdHlwZSArICcoJDEpJylcbiAgICAgICAgLnJlcGxhY2UoL1xccysvZywgJycpXG4gICAgICAgIC5zcGxpdCgvKD89Wyw9XFwoXFwpOl0pL2cpO1xuXG4gICAgdmFyIG5ld1Rva2VucyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGlmICh0b2tlbnNbaV0ubWF0Y2goc3BlcmF0b3JzUmVnZXhwKSkge1xuICAgICAgICAgICAgbmV3VG9rZW5zLnB1c2goXG4gICAgICAgICAgICAgICAgdG9rZW5zW2ldLmNoYXJBdCgwKSxcbiAgICAgICAgICAgICAgICB0b2tlbnNbaV0uc2xpY2UoMSlcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdUb2tlbnMucHVzaCh0b2tlbnNbaV0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRva2VucyA9IG5ld1Rva2VucztcblxuICAgIHZhciBUWVBFX1NZTUJPTCA9IDA7XG4gICAgdmFyIFRZUEVfQVNTSUdOID0gMTtcbiAgICB2YXIgVFlQRV9WRUMgPSAyO1xuICAgIHZhciBUWVBFX0FSUiA9IDM7XG4gICAgdmFyIFRZUEVfU0VNQU5USUMgPSA0O1xuICAgIHZhciBUWVBFX05PUk1BTCA9IDU7XG5cbiAgICB2YXIgb3BUeXBlID0gVFlQRV9TWU1CT0w7XG4gICAgdmFyIGRlY2xhcmF0aW9ucyA9IHt9O1xuICAgIHZhciBkZWNsYXJhdGlvblZhbHVlID0gbnVsbDtcbiAgICB2YXIgY3VycmVudERlY2xhcmF0aW9uO1xuXG4gICAgYWRkU3ltYm9sKHRva2Vuc1swXSk7XG5cbiAgICBmdW5jdGlvbiBhZGRTeW1ib2woc3ltYm9sKSB7XG4gICAgICAgIGlmICghc3ltYm9sKSB7XG4gICAgICAgICAgICBsb2dTeW50YXhFcnJvcigpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBhcnJSZXN1bHQgPSBzeW1ib2wubWF0Y2goL1xcWyguKj8pXFxdLyk7XG4gICAgICAgIGN1cnJlbnREZWNsYXJhdGlvbiA9IHN5bWJvbC5yZXBsYWNlKC9cXFsoLio/KVxcXS8sICcnKTtcbiAgICAgICAgZGVjbGFyYXRpb25zW2N1cnJlbnREZWNsYXJhdGlvbl0gPSB7fTtcbiAgICAgICAgaWYgKGFyclJlc3VsdCkge1xuICAgICAgICAgICAgZGVjbGFyYXRpb25zW2N1cnJlbnREZWNsYXJhdGlvbl0uaXNBcnJheSA9IHRydWU7XG4gICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS5hcnJheVNpemUgPSBhcnJSZXN1bHRbMV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IHRva2Vucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICAgIGlmICghdG9rZW4pIHsgICAvLyBFbXB0eSB0b2tlbjtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2tlbiA9PT0gJz0nKSB7XG4gICAgICAgICAgICBpZiAob3BUeXBlICE9PSBUWVBFX1NZTUJPTFxuICAgICAgICAgICAgJiYgb3BUeXBlICE9PSBUWVBFX0FSUikge1xuICAgICAgICAgICAgICAgIGxvZ1N5bnRheEVycm9yKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcFR5cGUgPSBUWVBFX0FTU0lHTjtcblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9rZW4gPT09ICc6Jykge1xuICAgICAgICAgICAgb3BUeXBlID0gVFlQRV9TRU1BTlRJQztcblxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodG9rZW4gPT09ICcsJykge1xuICAgICAgICAgICAgaWYgKG9wVHlwZSA9PT0gVFlQRV9WRUMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIShkZWNsYXJhdGlvblZhbHVlIGluc3RhbmNlb2YgQXJyYXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvZ1N5bnRheEVycm9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvblZhbHVlLnB1c2goK3Rva2Vuc1srK2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wVHlwZSA9IFRZUEVfTk9STUFMO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b2tlbiA9PT0gJyknKSB7XG4gICAgICAgICAgICBkZWNsYXJhdGlvbnNbY3VycmVudERlY2xhcmF0aW9uXS52YWx1ZSA9IG5ldyB2ZW5kb3IuRmxvYXQzMkFycmF5KGRlY2xhcmF0aW9uVmFsdWUpO1xuICAgICAgICAgICAgZGVjbGFyYXRpb25WYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBvcFR5cGUgPSBUWVBFX05PUk1BTDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRva2VuID09PSAnKCcpIHtcbiAgICAgICAgICAgIGlmIChvcFR5cGUgIT09IFRZUEVfVkVDKSB7XG4gICAgICAgICAgICAgICAgbG9nU3ludGF4RXJyb3IoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghKGRlY2xhcmF0aW9uVmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcbiAgICAgICAgICAgICAgICBsb2dTeW50YXhFcnJvcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVjbGFyYXRpb25WYWx1ZS5wdXNoKCt0b2tlbnNbKytpXSk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0b2tlbi5pbmRleE9mKCd2ZWMnKSA+PSAwKSB7XG4gICAgICAgICAgICBpZiAob3BUeXBlICE9PSBUWVBFX0FTU0lHTlxuICAgICAgICAgICAgLy8gQ29tcGF0aXRhYmxlIHdpdGggb2xkIHN5bnRheCBgc3ltYm9sOiBbMSwyLDNdYFxuICAgICAgICAgICAgJiYgb3BUeXBlICE9PSBUWVBFX1NFTUFOVElDKSB7XG4gICAgICAgICAgICAgICAgbG9nU3ludGF4RXJyb3IoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wVHlwZSA9IFRZUEVfVkVDO1xuICAgICAgICAgICAgZGVjbGFyYXRpb25WYWx1ZSA9IFtdO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3BUeXBlID09PSBUWVBFX0FTU0lHTikge1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdib29sJykge1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLnZhbHVlID0gdG9rZW4gPT09ICd0cnVlJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLnZhbHVlID0gcGFyc2VGbG9hdCh0b2tlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWNsYXJhdGlvblZhbHVlID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9wVHlwZSA9PT0gVFlQRV9TRU1BTlRJQykge1xuICAgICAgICAgICAgdmFyIHNlbWFudGljID0gdG9rZW47XG4gICAgICAgICAgICBpZiAoYXR0cmlidXRlU2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpID49IDBcbiAgICAgICAgICAgICAgICB8fCB1bmlmb3JtU2VtYW50aWNzLmluZGV4T2Yoc2VtYW50aWMpID49IDBcbiAgICAgICAgICAgICAgICB8fCBtYXRyaXhTZW1hbnRpY3MuaW5kZXhPZihzZW1hbnRpYykgPj0gMFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zW2N1cnJlbnREZWNsYXJhdGlvbl0uc2VtYW50aWMgPSBzZW1hbnRpYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHNlbWFudGljID09PSAnaWdub3JlJyB8fCBzZW1hbnRpYyA9PT0gJ3VuY29uZmlndXJhYmxlJykge1xuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLmlnbm9yZSA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgYXMgYSBkZWZhdWx0IHR2YWx1ZS5cbiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJ2Jvb2wnKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLnZhbHVlID0gc2VtYW50aWMgPT09ICd0cnVlJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uc1tjdXJyZW50RGVjbGFyYXRpb25dLnZhbHVlID0gcGFyc2VGbG9hdChzZW1hbnRpYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB0cmVhdCBhcyBzeW1ib2wuXG4gICAgICAgIGFkZFN5bWJvbCh0b2tlbik7XG4gICAgICAgIG9wVHlwZSA9IFRZUEVfU1lNQk9MO1xuICAgIH1cblxuICAgIHJldHVybiBkZWNsYXJhdGlvbnM7XG59XG5cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKiBAYWxpYXMgY2xheS5TaGFkZXJcbiAqIEBwYXJhbSB7c3RyaW5nfSB2ZXJ0ZXhcbiAqIEBwYXJhbSB7c3RyaW5nfSBmcmFnbWVudFxuICogQGV4YW1wbGVcbiAqIC8vIENyZWF0ZSBhIHBob25nIHNoYWRlclxuICogdmFyIHNoYWRlciA9IG5ldyBjbGF5LlNoYWRlcihcbiAqICAgICAgY2xheS5TaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkLnZlcnRleCcpLFxuICogICAgICBjbGF5LlNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmQuZnJhZ21lbnQnKVxuICogKTtcbiAqL1xuZnVuY3Rpb24gU2hhZGVyKHZlcnRleCwgZnJhZ21lbnQpIHtcbiAgICAvLyBGaXJzdCBhcmd1bWVudCBjYW4gYmUgeyB2ZXJ0ZXgsIGZyYWdtZW50IH1cbiAgICBpZiAodHlwZW9mIHZlcnRleCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgZnJhZ21lbnQgPSB2ZXJ0ZXguZnJhZ21lbnQ7XG4gICAgICAgIHZlcnRleCA9IHZlcnRleC52ZXJ0ZXg7XG4gICAgfVxuXG4gICAgdmVydGV4ID0gcmVtb3ZlQ29tbWVudCh2ZXJ0ZXgpO1xuICAgIGZyYWdtZW50ID0gcmVtb3ZlQ29tbWVudChmcmFnbWVudCk7XG5cbiAgICB0aGlzLl9zaGFkZXJJRCA9IGdldFNoYWRlcklEKHZlcnRleCwgZnJhZ21lbnQpO1xuXG4gICAgdGhpcy5fdmVydGV4Q29kZSA9IFNoYWRlci5wYXJzZUltcG9ydCh2ZXJ0ZXgpO1xuICAgIHRoaXMuX2ZyYWdtZW50Q29kZSA9IFNoYWRlci5wYXJzZUltcG9ydChmcmFnbWVudCk7XG5cbiAgICAvKipcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0ZVNlbWFudGljcyA9IHt9O1xuICAgIC8qKlxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIHRoaXMubWF0cml4U2VtYW50aWNzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy51bmlmb3JtU2VtYW50aWNzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy5tYXRyaXhTZW1hbnRpY0tleXMgPSBbXTtcbiAgICAvKipcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLnVuaWZvcm1UZW1wbGF0ZXMgPSB7fTtcbiAgICAvKipcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICAvKipcbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICB0aGlzLnRleHR1cmVzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy52ZXJ0ZXhEZWZpbmVzID0ge307XG4gICAgLyoqXG4gICAgICogQHJlYWRPbmx5XG4gICAgICovXG4gICAgdGhpcy5mcmFnbWVudERlZmluZXMgPSB7fTtcblxuICAgIHRoaXMuX3BhcnNlQXR0cmlidXRlcygpO1xuICAgIHRoaXMuX3BhcnNlVW5pZm9ybXMoKTtcbiAgICB0aGlzLl9wYXJzZURlZmluZXMoKTtcbn1cblxuU2hhZGVyLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBTaGFkZXIsXG5cbiAgICAvLyBDcmVhdGUgYSBuZXcgdW5pZm9ybSBpbnN0YW5jZSBmb3IgbWF0ZXJpYWxcbiAgICBjcmVhdGVVbmlmb3JtczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdGhpcy51bmlmb3JtVGVtcGxhdGVzKXtcbiAgICAgICAgICAgIHZhciB1bmlmb3JtVHBsID0gdGhpcy51bmlmb3JtVGVtcGxhdGVzW3N5bWJvbF07XG4gICAgICAgICAgICB1bmlmb3Jtc1tzeW1ib2xdID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IHVuaWZvcm1UcGwudHlwZSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdW5pZm9ybVRwbC52YWx1ZSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHVuaWZvcm1zO1xuICAgIH0sXG5cbiAgICBfcGFyc2VJbXBvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fdmVydGV4Q29kZSA9IFNoYWRlci5wYXJzZUltcG9ydCh0aGlzLnZlcnRleCk7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50Q29kZSA9IFNoYWRlci5wYXJzZUltcG9ydCh0aGlzLmZyYWdtZW50KTtcbiAgICB9LFxuXG4gICAgX2FkZFNlbWFudGljVW5pZm9ybTogZnVuY3Rpb24gKHN5bWJvbCwgdW5pZm9ybVR5cGUsIHNlbWFudGljKSB7XG4gICAgICAgIC8vIFRoaXMgY2FzZSBpcyBvbmx5IGZvciBTS0lOX01BVFJJWFxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIGlmIChhdHRyaWJ1dGVTZW1hbnRpY3MuaW5kZXhPZihzZW1hbnRpYykgPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVTZW1hbnRpY3Nbc2VtYW50aWNdID0ge1xuICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgICAgICAgIHR5cGU6IHVuaWZvcm1UeXBlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG1hdHJpeFNlbWFudGljcy5pbmRleE9mKHNlbWFudGljKSA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgaXNUcmFuc3Bvc2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHZhciBzZW1hbnRpY05vVHJhbnNwb3NlID0gc2VtYW50aWM7XG4gICAgICAgICAgICBpZiAoc2VtYW50aWMubWF0Y2goL1RSQU5TUE9TRSQvKSkge1xuICAgICAgICAgICAgICAgIGlzVHJhbnNwb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBzZW1hbnRpY05vVHJhbnNwb3NlID0gc2VtYW50aWMuc2xpY2UoMCwgLTkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5tYXRyaXhTZW1hbnRpY3Nbc2VtYW50aWNdID0ge1xuICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgICAgICAgIHR5cGU6IHVuaWZvcm1UeXBlLFxuICAgICAgICAgICAgICAgIGlzVHJhbnNwb3NlOiBpc1RyYW5zcG9zZSxcbiAgICAgICAgICAgICAgICBzZW1hbnRpY05vVHJhbnNwb3NlOiBzZW1hbnRpY05vVHJhbnNwb3NlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVuaWZvcm1TZW1hbnRpY3MuaW5kZXhPZihzZW1hbnRpYykgPj0gMCkge1xuICAgICAgICAgICAgdGhpcy51bmlmb3JtU2VtYW50aWNzW3NlbWFudGljXSA9IHtcbiAgICAgICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICAgICAgICB0eXBlOiB1bmlmb3JtVHlwZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfYWRkTWF0ZXJpYWxVbmlmb3JtOiBmdW5jdGlvbiAoc3ltYm9sLCB0eXBlLCB1bmlmb3JtVHlwZSwgZGVmYXVsdFZhbHVlRnVuYywgaXNBcnJheSwgbWF0ZXJpYWxVbmlmb3Jtcykge1xuICAgICAgICBtYXRlcmlhbFVuaWZvcm1zW3N5bWJvbF0gPSB7XG4gICAgICAgICAgICB0eXBlOiB1bmlmb3JtVHlwZSxcbiAgICAgICAgICAgIHZhbHVlOiBpc0FycmF5ID8gdW5pZm9ybVZhbHVlQ29uc3RydWN0b3JbJ2FycmF5J10gOiAoZGVmYXVsdFZhbHVlRnVuYyB8fCB1bmlmb3JtVmFsdWVDb25zdHJ1Y3Rvclt0eXBlXSksXG4gICAgICAgICAgICBzZW1hbnRpYzogbnVsbFxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICBfcGFyc2VVbmlmb3JtczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdW5pZm9ybXMgPSB7fTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgc2hhZGVyVHlwZSA9ICd2ZXJ0ZXgnO1xuICAgICAgICB0aGlzLl91bmlmb3JtTGlzdCA9IFtdO1xuXG4gICAgICAgIHRoaXMuX3ZlcnRleENvZGUgPSB0aGlzLl92ZXJ0ZXhDb2RlLnJlcGxhY2UodW5pZm9ybVJlZ2V4LCBfdW5pZm9ybVBhcnNlcik7XG4gICAgICAgIHNoYWRlclR5cGUgPSAnZnJhZ21lbnQnO1xuICAgICAgICB0aGlzLl9mcmFnbWVudENvZGUgPSB0aGlzLl9mcmFnbWVudENvZGUucmVwbGFjZSh1bmlmb3JtUmVnZXgsIF91bmlmb3JtUGFyc2VyKTtcblxuICAgICAgICBzZWxmLm1hdHJpeFNlbWFudGljS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubWF0cml4U2VtYW50aWNzKTtcblxuICAgICAgICBmdW5jdGlvbiBtYWtlRGVmYXVsdFZhbHVlRnVuYyh2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBmdW5jdGlvbiAoKSB7IHJldHVybiB2YWx1ZTsgfSA6IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBfdW5pZm9ybVBhcnNlcihzdHIsIHR5cGUsIGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHZhciBkZWNsYXJlZFVuaWZvcm1zID0gcGFyc2VEZWNsYXJhdGlvbnModHlwZSwgY29udGVudCk7XG4gICAgICAgICAgICB2YXIgdW5pZm9ybU1haW5TdHIgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIHN5bWJvbCBpbiBkZWNsYXJlZFVuaWZvcm1zKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybUluZm8gPSBkZWNsYXJlZFVuaWZvcm1zW3N5bWJvbF07XG4gICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gdW5pZm9ybUluZm8uc2VtYW50aWM7XG4gICAgICAgICAgICAgICAgdmFyIHRtcFN0ciA9IHN5bWJvbDtcbiAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybVR5cGUgPSB1bmlmb3JtVHlwZU1hcFt0eXBlXTtcbiAgICAgICAgICAgICAgICB2YXIgZGVmYXVsdFZhbHVlRnVuYyA9IG1ha2VEZWZhdWx0VmFsdWVGdW5jKGRlY2xhcmVkVW5pZm9ybXNbc3ltYm9sXS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgaWYgKGRlY2xhcmVkVW5pZm9ybXNbc3ltYm9sXS5pc0FycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcFN0ciArPSAnWycgKyBkZWNsYXJlZFVuaWZvcm1zW3N5bWJvbF0uYXJyYXlTaXplICsgJ10nO1xuICAgICAgICAgICAgICAgICAgICB1bmlmb3JtVHlwZSArPSAndic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdW5pZm9ybU1haW5TdHIucHVzaCh0bXBTdHIpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5fdW5pZm9ybUxpc3QucHVzaChzeW1ib2wpO1xuXG4gICAgICAgICAgICAgICAgaWYgKCF1bmlmb3JtSW5mby5pZ25vcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdzYW1wbGVyMkQnIHx8IHR5cGUgPT09ICdzYW1wbGVyQ3ViZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRleHR1cmUgaXMgZGVmYXVsdCBkaXNhYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi50ZXh0dXJlc1tzeW1ib2xdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRlclR5cGU6IHNoYWRlclR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyBTaG91bGQgbm90IGRlY2xhcmUgbXVsdGlwbGUgc3ltYm9scyBpZiBoYXZlIHNlbWFudGljLlxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYWRkU2VtYW50aWNVbmlmb3JtKHN5bWJvbCwgdW5pZm9ybVR5cGUsIHNlbWFudGljKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX2FkZE1hdGVyaWFsVW5pZm9ybShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzeW1ib2wsIHR5cGUsIHVuaWZvcm1UeXBlLCBkZWZhdWx0VmFsdWVGdW5jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlY2xhcmVkVW5pZm9ybXNbc3ltYm9sXS5pc0FycmF5LCB1bmlmb3Jtc1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB1bmlmb3JtTWFpblN0ci5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyAndW5pZm9ybSAnICsgdHlwZSArICcgJyArIHVuaWZvcm1NYWluU3RyLmpvaW4oJywnKSArICc7XFxuJyA6ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51bmlmb3JtVGVtcGxhdGVzID0gdW5pZm9ybXM7XG4gICAgfSxcblxuICAgIF9wYXJzZUF0dHJpYnV0ZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB0aGlzLl92ZXJ0ZXhDb2RlID0gdGhpcy5fdmVydGV4Q29kZS5yZXBsYWNlKGF0dHJpYnV0ZVJlZ2V4LCBfYXR0cmlidXRlUGFyc2VyKTtcblxuICAgICAgICBmdW5jdGlvbiBfYXR0cmlidXRlUGFyc2VyKHN0ciwgdHlwZSwgY29udGVudCkge1xuICAgICAgICAgICAgdmFyIGRlY2xhcmVkQXR0cmlidXRlcyA9IHBhcnNlRGVjbGFyYXRpb25zKHR5cGUsIGNvbnRlbnQpO1xuXG4gICAgICAgICAgICB2YXIgc2l6ZSA9IGF0dHJpYnV0ZVNpemVNYXBbdHlwZV0gfHwgMTtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVNYWluU3RyID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gZGVjbGFyZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gZGVjbGFyZWRBdHRyaWJ1dGVzW3N5bWJvbF0uc2VtYW50aWM7XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlc1tzeW1ib2xdID0ge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIENhbiBvbmx5IGJlIGZsb2F0XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdmbG9hdCcsXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IHNpemUsXG4gICAgICAgICAgICAgICAgICAgIHNlbWFudGljOiBzZW1hbnRpYyB8fCBudWxsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIFNob3VsZCBub3QgZGVjbGFyZSBtdWx0aXBsZSBzeW1ib2xzIGlmIGhhdmUgc2VtYW50aWMuXG4gICAgICAgICAgICAgICAgaWYgKHNlbWFudGljKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRyaWJ1dGVTZW1hbnRpY3MuaW5kZXhPZihzZW1hbnRpYykgPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua293biBzZW1hbnRpYyBcIicgKyBzZW1hbnRpYyArICdcIicpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5hdHRyaWJ1dGVTZW1hbnRpY3Nbc2VtYW50aWNdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN5bWJvbDogc3ltYm9sLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXR0cmlidXRlTWFpblN0ci5wdXNoKHN5bWJvbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAnYXR0cmlidXRlICcgKyB0eXBlICsgJyAnICsgYXR0cmlidXRlTWFpblN0ci5qb2luKCcsJykgKyAnO1xcbic7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhdHRyaWJ1dGVzO1xuICAgIH0sXG5cbiAgICBfcGFyc2VEZWZpbmVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIHNoYWRlclR5cGUgPSAndmVydGV4JztcbiAgICAgICAgdGhpcy5fdmVydGV4Q29kZSA9IHRoaXMuX3ZlcnRleENvZGUucmVwbGFjZShkZWZpbmVSZWdleCwgX2RlZmluZVBhcnNlcik7XG4gICAgICAgIHNoYWRlclR5cGUgPSAnZnJhZ21lbnQnO1xuICAgICAgICB0aGlzLl9mcmFnbWVudENvZGUgPSB0aGlzLl9mcmFnbWVudENvZGUucmVwbGFjZShkZWZpbmVSZWdleCwgX2RlZmluZVBhcnNlcik7XG5cbiAgICAgICAgZnVuY3Rpb24gX2RlZmluZVBhcnNlcihzdHIsIHN5bWJvbCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHZhciBkZWZpbmVzID0gc2hhZGVyVHlwZSA9PT0gJ3ZlcnRleCcgPyBzZWxmLnZlcnRleERlZmluZXMgOiBzZWxmLmZyYWdtZW50RGVmaW5lcztcbiAgICAgICAgICAgIGlmICghZGVmaW5lc1tzeW1ib2xdKSB7IC8vIEhhdmVuJ3QgYmVlbiBkZWZpbmVkIGJ5IHVzZXJcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lc1tzeW1ib2xdID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVmaW5lc1tzeW1ib2xdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlZmluZXNbc3ltYm9sXSA9IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiBjYW4gcGFyc2UgdG8gZmxvYXRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gKGlzTmFOKHBhcnNlRmxvYXQodmFsdWUpKSA/IHZhbHVlLnRyaW0oKSA6IHBhcnNlRmxvYXQodmFsdWUpKVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBzaGFkZXJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlNoYWRlcn1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29kZSA9IHNoYWRlckNvZGVDYWNoZVt0aGlzLl9zaGFkZXJJRF07XG4gICAgICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKGNvZGUudmVydGV4LCBjb2RlLmZyYWdtZW50KTtcbiAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICB9XG59O1xuXG5pZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFNoYWRlci5wcm90b3R5cGUsICdzaGFkZXJJRCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc2hhZGVySUQ7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU2hhZGVyLnByb3RvdHlwZSwgJ3ZlcnRleCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmVydGV4Q29kZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaGFkZXIucHJvdG90eXBlLCAnZnJhZ21lbnQnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZyYWdtZW50Q29kZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTaGFkZXIucHJvdG90eXBlLCAndW5pZm9ybXMnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VuaWZvcm1MaXN0O1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbnZhciBpbXBvcnRSZWdleCA9IC8oQGltcG9ydClcXHMqKFswLTlhLXpBLVpfXFwtXFwuXSopL2c7XG5TaGFkZXIucGFyc2VJbXBvcnQgPSBmdW5jdGlvbiAoc2hhZGVyU3RyKSB7XG4gICAgc2hhZGVyU3RyID0gc2hhZGVyU3RyLnJlcGxhY2UoaW1wb3J0UmVnZXgsIGZ1bmN0aW9uIChzdHIsIGltcG9ydFN5bWJvbCwgaW1wb3J0TmFtZSkge1xuICAgICAgICB2YXIgc3RyID0gU2hhZGVyLnNvdXJjZShpbXBvcnROYW1lKTtcbiAgICAgICAgaWYgKHN0cikge1xuICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgcGFyc2VcbiAgICAgICAgICAgIHJldHVybiBTaGFkZXIucGFyc2VJbXBvcnQoc3RyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlciBjaHVuayBcIicgKyBpbXBvcnROYW1lICsgJ1wiIG5vdCBleGlzdGVkIGluIGxpYnJhcnknKTtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzaGFkZXJTdHI7XG59O1xuXG52YXIgZXhwb3J0UmVnZXggPSAvKEBleHBvcnQpXFxzKihbMC05YS16QS1aX1xcLVxcLl0qKVxccypcXG4oW1xcc1xcU10qPylAZW5kL2c7XG5cbi8qKlxuICogSW1wb3J0IHNoYWRlciBzb3VyY2VcbiAqIEBwYXJhbSAge3N0cmluZ30gc2hhZGVyU3RyXG4gKiBAbWVtYmVyT2YgY2xheS5TaGFkZXJcbiAqL1xuU2hhZGVyWydpbXBvcnQnXSA9IGZ1bmN0aW9uIChzaGFkZXJTdHIpIHtcbiAgICBzaGFkZXJTdHIucmVwbGFjZShleHBvcnRSZWdleCwgZnVuY3Rpb24gKHN0ciwgZXhwb3J0U3ltYm9sLCBleHBvcnROYW1lLCBjb2RlKSB7XG4gICAgICAgIHZhciBjb2RlID0gY29kZS5yZXBsYWNlKC8oXltcXHNcXHRcXHhhMFxcdTMwMDBdKyl8KFtcXHUzMDAwXFx4YTBcXHNcXHRdK1xceDI0KS9nLCAnJyk7XG4gICAgICAgIGlmIChjb2RlKSB7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBleHBvcnROYW1lLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICB2YXIgb2JqID0gU2hhZGVyLmNvZGVzO1xuICAgICAgICAgICAgdmFyIGkgPSAwO1xuICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgcGFydHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgICAgIGtleSA9IHBhcnRzW2krK107XG4gICAgICAgICAgICAgICAgaWYgKCFvYmpba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICBvYmpba2V5XSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGtleSA9IHBhcnRzW2ldO1xuICAgICAgICAgICAgb2JqW2tleV0gPSBjb2RlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2RlO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBMaWJyYXJ5IHRvIHN0b3JlIGFsbCB0aGUgbG9hZGVkIHNoYWRlciBjb2Rlc1xuICogQHR5cGUge09iamVjdH1cbiAqIEByZWFkT25seVxuICogQG1lbWJlck9mIGNsYXkuU2hhZGVyXG4gKi9cblNoYWRlci5jb2RlcyA9IHt9O1xuXG4vKipcbiAqIEdldCBzaGFkZXIgc291cmNlXG4gKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuU2hhZGVyLnNvdXJjZSA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdmFyIHBhcnRzID0gbmFtZS5zcGxpdCgnLicpO1xuICAgIHZhciBvYmogPSBTaGFkZXIuY29kZXM7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChvYmogJiYgaSA8IHBhcnRzLmxlbmd0aCkge1xuICAgICAgICB2YXIga2V5ID0gcGFydHNbaSsrXTtcbiAgICAgICAgb2JqID0gb2JqW2tleV07XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnc3RyaW5nJykge1xuICAgICAgICAvLyBGSVhNRSBVc2UgZGVmYXVsdCBpbnN0ZWFkXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NoYWRlciBcIicgKyBuYW1lICsgJ1wiIG5vdCBleGlzdGVkIGluIGxpYnJhcnknKTtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgU2hhZGVyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1NoYWRlci5qc1xuLy8gbW9kdWxlIGlkID0gNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_Cache__ = __webpack_require__(33);\n/**\n * Base class for all textures like compressed texture, texture2d, texturecube\n * TODO mapping\n */\n\n\n\n\n/**\n * @constructor\n * @alias clay.Texture\n * @extends clay.core.Base\n */\nvar Texture = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend( /** @lends clay.Texture# */ {\n    /**\n     * Texture width, readonly when the texture source is image\n     * @type {number}\n     */\n    width: 512,\n    /**\n     * Texture height, readonly when the texture source is image\n     * @type {number}\n     */\n    height: 512,\n    /**\n     * Texel data type.\n     * Possible values:\n     *  + {@link clay.Texture.UNSIGNED_BYTE}\n     *  + {@link clay.Texture.HALF_FLOAT}\n     *  + {@link clay.Texture.FLOAT}\n     *  + {@link clay.Texture.UNSIGNED_INT_24_8_WEBGL}\n     *  + {@link clay.Texture.UNSIGNED_INT}\n     * @type {number}\n     */\n    type: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    /**\n     * Format of texel data\n     * Possible values:\n     *  + {@link clay.Texture.RGBA}\n     *  + {@link clay.Texture.DEPTH_COMPONENT}\n     *  + {@link clay.Texture.DEPTH_STENCIL}\n     * @type {number}\n     */\n    format: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA,\n    /**\n     * Texture wrap. Default to be REPEAT.\n     * Possible values:\n     *  + {@link clay.Texture.CLAMP_TO_EDGE}\n     *  + {@link clay.Texture.REPEAT}\n     *  + {@link clay.Texture.MIRRORED_REPEAT}\n     * @type {number}\n     */\n    wrapS: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT,\n    /**\n     * Texture wrap. Default to be REPEAT.\n     * Possible values:\n     *  + {@link clay.Texture.CLAMP_TO_EDGE}\n     *  + {@link clay.Texture.REPEAT}\n     *  + {@link clay.Texture.MIRRORED_REPEAT}\n     * @type {number}\n     */\n    wrapT: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT,\n    /**\n     * Possible values:\n     *  + {@link clay.Texture.NEAREST}\n     *  + {@link clay.Texture.LINEAR}\n     *  + {@link clay.Texture.NEAREST_MIPMAP_NEAREST}\n     *  + {@link clay.Texture.LINEAR_MIPMAP_NEAREST}\n     *  + {@link clay.Texture.NEAREST_MIPMAP_LINEAR}\n     *  + {@link clay.Texture.LINEAR_MIPMAP_LINEAR}\n     * @type {number}\n     */\n    minFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR,\n    /**\n     * Possible values:\n     *  + {@link clay.Texture.NEAREST}\n     *  + {@link clay.Texture.LINEAR}\n     * @type {number}\n     */\n    magFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR,\n    /**\n     * If enable mimap.\n     * @type {boolean}\n     */\n    useMipmap: true,\n\n    /**\n     * Anisotropic filtering, enabled if value is larger than 1\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/EXT_texture_filter_anisotropic\n     * @type {number}\n     */\n    anisotropic: 1,\n    // pixelStorei parameters, not available when texture is used as render target\n    // http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml\n    /**\n     * If flip in y axis for given image source\n     * @type {boolean}\n     * @default true\n     */\n    flipY: true,\n\n    /**\n     * A flag to indicate if texture source is sRGB\n     */\n    sRGB: true,\n    /**\n     * @type {number}\n     * @default 4\n     */\n    unpackAlignment: 4,\n    /**\n     * @type {boolean}\n     * @default false\n     */\n    premultiplyAlpha: false,\n\n    /**\n     * Dynamic option for texture like video\n     * @type {boolean}\n     */\n    dynamic: false,\n\n    NPOT: false,\n\n    // PENDING\n    // Init it here to avoid deoptimization when it's assigned in application dynamically\n    __used: 0\n\n}, function () {\n    this._cache = new __WEBPACK_IMPORTED_MODULE_2__core_Cache__[\"a\" /* default */]();\n},\n/** @lends clay.Texture.prototype */\n{\n\n    getWebGLTexture: function (renderer) {\n        var _gl = renderer.gl;\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n\n        if (cache.miss('webgl_texture')) {\n            // In a new gl context, create new texture and set dirty true\n            cache.put('webgl_texture', _gl.createTexture());\n        }\n        if (this.dynamic) {\n            this.update(renderer);\n        }\n        else if (cache.isDirty()) {\n            this.update(renderer);\n            cache.fresh();\n        }\n\n        return cache.get('webgl_texture');\n    },\n\n    bind: function () {},\n    unbind: function () {},\n\n    /**\n     * Mark texture is dirty and update in the next frame\n     */\n    dirty: function () {\n        if (this._cache) {\n            this._cache.dirtyAll();\n        }\n    },\n\n    update: function (renderer) {},\n\n    // Update the common parameters of texture\n    updateCommon: function (renderer) {\n        var _gl = renderer.gl;\n        _gl.pixelStorei(_gl.UNPACK_FLIP_Y_WEBGL, this.flipY);\n        _gl.pixelStorei(_gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this.premultiplyAlpha);\n        _gl.pixelStorei(_gl.UNPACK_ALIGNMENT, this.unpackAlignment);\n\n        // Use of none-power of two texture\n        // http://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences\n        if (this.format === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT) {\n            this.useMipmap = false;\n        }\n\n        var sRGBExt = renderer.getGLExtension('EXT_sRGB');\n        // Fallback\n        if (this.format === Texture.SRGB && !sRGBExt) {\n            this.format = Texture.RGB;\n        }\n        if (this.format === Texture.SRGB_ALPHA && !sRGBExt) {\n            this.format = Texture.RGBA;\n        }\n\n        this.NPOT = !this.isPowerOfTwo();\n    },\n\n    getAvailableWrapS: function () {\n        if (this.NPOT) {\n            return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        }\n        return this.wrapS;\n    },\n    getAvailableWrapT: function () {\n        if (this.NPOT) {\n            return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        }\n        return this.wrapT;\n    },\n    getAvailableMinFilter: function () {\n        var minFilter = this.minFilter;\n        if (this.NPOT || !this.useMipmap) {\n            if (minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST ||\n                minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR\n            ) {\n                return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n            }\n            else if (minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR ||\n                minFilter === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST\n            ) {\n                return __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n            }\n            else {\n                return minFilter;\n            }\n        }\n        else {\n            return minFilter;\n        }\n    },\n    getAvailableMagFilter: function () {\n        return this.magFilter;\n    },\n\n    nextHighestPowerOfTwo: function (x) {\n        --x;\n        for (var i = 1; i < 32; i <<= 1) {\n            x = x | x >> i;\n        }\n        return x + 1;\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var webglTexture = cache.get('webgl_texture');\n        if (webglTexture){\n            renderer.gl.deleteTexture(webglTexture);\n        }\n        cache.deleteContext(renderer.__uid__);\n\n    },\n    /**\n     * Test if image of texture is valid and loaded.\n     * @return {boolean}\n     */\n    isRenderable: function () {},\n\n    /**\n     * Test if texture size is power of two\n     * @return {boolean}\n     */\n    isPowerOfTwo: function () {}\n});\n\nObject.defineProperty(Texture.prototype, 'width', {\n    get: function () {\n        return this._width;\n    },\n    set: function (value) {\n        this._width = value;\n    }\n});\nObject.defineProperty(Texture.prototype, 'height', {\n    get: function () {\n        return this._height;\n    },\n    set: function (value) {\n        this._height = value;\n    }\n});\n\n/* DataType */\n\n/**\n * @type {number}\n */\nTexture.BYTE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BYTE;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_BYTE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE;\n/**\n * @type {number}\n */\nTexture.SHORT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].SHORT;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_SHORT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_SHORT;\n/**\n * @type {number}\n */\nTexture.INT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].INT;\n/**\n * @type {number}\n */\nTexture.UNSIGNED_INT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_INT;\n/**\n * @type {number}\n */\nTexture.FLOAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n/**\n * @type {number}\n */\nTexture.HALF_FLOAT = 0x8D61;\n\n/**\n * UNSIGNED_INT_24_8_WEBGL for WEBGL_depth_texture extension\n * @type {number}\n */\nTexture.UNSIGNED_INT_24_8_WEBGL = 34042;\n\n/* PixelFormat */\n/**\n * @type {number}\n */\nTexture.DEPTH_COMPONENT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT;\n/**\n * @type {number}\n */\nTexture.DEPTH_STENCIL = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_STENCIL;\n/**\n * @type {number}\n */\nTexture.ALPHA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].ALPHA;\n/**\n * @type {number}\n */\nTexture.RGB = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGB;\n/**\n * @type {number}\n */\nTexture.RGBA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA;\n/**\n * @type {number}\n */\nTexture.LUMINANCE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LUMINANCE;\n/**\n * @type {number}\n */\nTexture.LUMINANCE_ALPHA = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LUMINANCE_ALPHA;\n\n/**\n * @see https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/\n * @type {number}\n */\nTexture.SRGB = 0x8C40;\n/**\n * @see https://www.khronos.org/registry/webgl/extensions/EXT_sRGB/\n * @type {number}\n */\nTexture.SRGB_ALPHA = 0x8C42;\n\n/* Compressed Texture */\n// https://developer.mozilla.org/zh-CN/docs/Web/API/WebGL_API/Constants\n// s3tc\nTexture.COMPRESSED_RGB_S3TC_DXT1_EXT = 0x83F0;\nTexture.COMPRESSED_RGBA_S3TC_DXT1_EXT = 0x83F1;\nTexture.COMPRESSED_RGBA_S3TC_DXT3_EXT = 0x83F2;\nTexture.COMPRESSED_RGBA_S3TC_DXT5_EXT = 0x83F3;\n\n// etc\nTexture.COMPRESSED_RGB_ETC1_WEBGL = 0x8D64;\n\n// pvrtc\nTexture.COMPRESSED_RGB_PVRTC_4BPPV1_IMG = 0x8C00;\nTexture.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG = 0x8C02;\nTexture.COMPRESSED_RGB_PVRTC_2BPPV1_IMG = 0x8C01;\nTexture.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG = 0x8C03;\n\n// atc\nTexture.COMPRESSED_RGB_ATC_WEBGL = 0x8C92;\nTexture.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL = 0x8C93;\nTexture.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL = 0x87EE;\n\n/* TextureMagFilter */\n/**\n * @type {number}\n */\nTexture.NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n/**\n * @type {number}\n */\nTexture.LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n\n/* TextureMinFilter */\n/**\n * @type {number}\n */\nTexture.NEAREST_MIPMAP_NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST;\n/**\n * @type {number}\n */\nTexture.LINEAR_MIPMAP_NEAREST = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST;\n/**\n * @type {number}\n */\nTexture.NEAREST_MIPMAP_LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR;\n/**\n * @type {number}\n */\nTexture.LINEAR_MIPMAP_LINEAR = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR;\n\n/* TextureWrapMode */\n/**\n * @type {number}\n */\nTexture.REPEAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].REPEAT;\n/**\n * @type {number}\n */\nTexture.CLAMP_TO_EDGE = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n/**\n * @type {number}\n */\nTexture.MIRRORED_REPEAT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].MIRRORED_REPEAT;\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Texture);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvVGV4dHVyZS5qcz8xMDRhIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIHRleHR1cmVzIGxpa2UgY29tcHJlc3NlZCB0ZXh0dXJlLCB0ZXh0dXJlMmQsIHRleHR1cmVjdWJlXG4gKiBUT0RPIG1hcHBpbmdcbiAqL1xuaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuL2NvcmUvZ2xlbnVtJztcbmltcG9ydCBDYWNoZSBmcm9tICcuL2NvcmUvQ2FjaGUnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuVGV4dHVyZVxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIFRleHR1cmUgPSBCYXNlLmV4dGVuZCggLyoqIEBsZW5kcyBjbGF5LlRleHR1cmUjICovIHtcbiAgICAvKipcbiAgICAgKiBUZXh0dXJlIHdpZHRoLCByZWFkb25seSB3aGVuIHRoZSB0ZXh0dXJlIHNvdXJjZSBpcyBpbWFnZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgd2lkdGg6IDUxMixcbiAgICAvKipcbiAgICAgKiBUZXh0dXJlIGhlaWdodCwgcmVhZG9ubHkgd2hlbiB0aGUgdGV4dHVyZSBzb3VyY2UgaXMgaW1hZ2VcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGhlaWdodDogNTEyLFxuICAgIC8qKlxuICAgICAqIFRleGVsIGRhdGEgdHlwZS5cbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5VTlNJR05FRF9CWVRFfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuSEFMRl9GTE9BVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkZMT0FUfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuVU5TSUdORURfSU5UXzI0XzhfV0VCR0x9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5VTlNJR05FRF9JTlR9XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0eXBlOiBnbGVudW0uVU5TSUdORURfQllURSxcbiAgICAvKipcbiAgICAgKiBGb3JtYXQgb2YgdGV4ZWwgZGF0YVxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLlJHQkF9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5ERVBUSF9DT01QT05FTlR9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5ERVBUSF9TVEVOQ0lMfVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZm9ybWF0OiBnbGVudW0uUkdCQSxcbiAgICAvKipcbiAgICAgKiBUZXh0dXJlIHdyYXAuIERlZmF1bHQgdG8gYmUgUkVQRUFULlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkNMQU1QX1RPX0VER0V9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5SRVBFQVR9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5NSVJST1JFRF9SRVBFQVR9XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB3cmFwUzogZ2xlbnVtLlJFUEVBVCxcbiAgICAvKipcbiAgICAgKiBUZXh0dXJlIHdyYXAuIERlZmF1bHQgdG8gYmUgUkVQRUFULlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkNMQU1QX1RPX0VER0V9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5SRVBFQVR9XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5NSVJST1JFRF9SRVBFQVR9XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB3cmFwVDogZ2xlbnVtLlJFUEVBVCxcbiAgICAvKipcbiAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6XG4gICAgICogICsge0BsaW5rIGNsYXkuVGV4dHVyZS5ORUFSRVNUfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTElORUFSfVxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTkVBUkVTVF9NSVBNQVBfTkVBUkVTVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkxJTkVBUl9NSVBNQVBfTkVBUkVTVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLk5FQVJFU1RfTUlQTUFQX0xJTkVBUn1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkxJTkVBUl9NSVBNQVBfTElORUFSfVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgbWluRmlsdGVyOiBnbGVudW0uTElORUFSX01JUE1BUF9MSU5FQVIsXG4gICAgLyoqXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIHtAbGluayBjbGF5LlRleHR1cmUuTkVBUkVTVH1cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5UZXh0dXJlLkxJTkVBUn1cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG1hZ0ZpbHRlcjogZ2xlbnVtLkxJTkVBUixcbiAgICAvKipcbiAgICAgKiBJZiBlbmFibGUgbWltYXAuXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdXNlTWlwbWFwOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogQW5pc290cm9waWMgZmlsdGVyaW5nLCBlbmFibGVkIGlmIHZhbHVlIGlzIGxhcmdlciB0aGFuIDFcbiAgICAgKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWNcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGFuaXNvdHJvcGljOiAxLFxuICAgIC8vIHBpeGVsU3RvcmVpIHBhcmFtZXRlcnMsIG5vdCBhdmFpbGFibGUgd2hlbiB0ZXh0dXJlIGlzIHVzZWQgYXMgcmVuZGVyIHRhcmdldFxuICAgIC8vIGh0dHA6Ly93d3cua2hyb25vcy5vcmcvb3BlbmdsZXMvc2RrL2RvY3MvbWFuL3hodG1sL2dsUGl4ZWxTdG9yZWkueG1sXG4gICAgLyoqXG4gICAgICogSWYgZmxpcCBpbiB5IGF4aXMgZm9yIGdpdmVuIGltYWdlIHNvdXJjZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBkZWZhdWx0IHRydWVcbiAgICAgKi9cbiAgICBmbGlwWTogdHJ1ZSxcblxuICAgIC8qKlxuICAgICAqIEEgZmxhZyB0byBpbmRpY2F0ZSBpZiB0ZXh0dXJlIHNvdXJjZSBpcyBzUkdCXG4gICAgICovXG4gICAgc1JHQjogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBkZWZhdWx0IDRcbiAgICAgKi9cbiAgICB1bnBhY2tBbGlnbm1lbnQ6IDQsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICBwcmVtdWx0aXBseUFscGhhOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIER5bmFtaWMgb3B0aW9uIGZvciB0ZXh0dXJlIGxpa2UgdmlkZW9cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBkeW5hbWljOiBmYWxzZSxcblxuICAgIE5QT1Q6IGZhbHNlLFxuXG4gICAgLy8gUEVORElOR1xuICAgIC8vIEluaXQgaXQgaGVyZSB0byBhdm9pZCBkZW9wdGltaXphdGlvbiB3aGVuIGl0J3MgYXNzaWduZWQgaW4gYXBwbGljYXRpb24gZHluYW1pY2FsbHlcbiAgICBfX3VzZWQ6IDBcblxufSwgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NhY2hlID0gbmV3IENhY2hlKCk7XG59LFxuLyoqIEBsZW5kcyBjbGF5LlRleHR1cmUucHJvdG90eXBlICovXG57XG5cbiAgICBnZXRXZWJHTFRleHR1cmU6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG5cbiAgICAgICAgaWYgKGNhY2hlLm1pc3MoJ3dlYmdsX3RleHR1cmUnKSkge1xuICAgICAgICAgICAgLy8gSW4gYSBuZXcgZ2wgY29udGV4dCwgY3JlYXRlIG5ldyB0ZXh0dXJlIGFuZCBzZXQgZGlydHkgdHJ1ZVxuICAgICAgICAgICAgY2FjaGUucHV0KCd3ZWJnbF90ZXh0dXJlJywgX2dsLmNyZWF0ZVRleHR1cmUoKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZHluYW1pYykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGNhY2hlLmlzRGlydHkoKSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUocmVuZGVyZXIpO1xuICAgICAgICAgICAgY2FjaGUuZnJlc2goKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQoJ3dlYmdsX3RleHR1cmUnKTtcbiAgICB9LFxuXG4gICAgYmluZDogZnVuY3Rpb24gKCkge30sXG4gICAgdW5iaW5kOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgIC8qKlxuICAgICAqIE1hcmsgdGV4dHVyZSBpcyBkaXJ0eSBhbmQgdXBkYXRlIGluIHRoZSBuZXh0IGZyYW1lXG4gICAgICovXG4gICAgZGlydHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NhY2hlKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZS5kaXJ0eUFsbCgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7fSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgY29tbW9uIHBhcmFtZXRlcnMgb2YgdGV4dHVyZVxuICAgIHVwZGF0ZUNvbW1vbjogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgX2dsLnBpeGVsU3RvcmVpKF9nbC5VTlBBQ0tfRkxJUF9ZX1dFQkdMLCB0aGlzLmZsaXBZKTtcbiAgICAgICAgX2dsLnBpeGVsU3RvcmVpKF9nbC5VTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wsIHRoaXMucHJlbXVsdGlwbHlBbHBoYSk7XG4gICAgICAgIF9nbC5waXhlbFN0b3JlaShfZ2wuVU5QQUNLX0FMSUdOTUVOVCwgdGhpcy51bnBhY2tBbGlnbm1lbnQpO1xuXG4gICAgICAgIC8vIFVzZSBvZiBub25lLXBvd2VyIG9mIHR3byB0ZXh0dXJlXG4gICAgICAgIC8vIGh0dHA6Ly93d3cua2hyb25vcy5vcmcvd2ViZ2wvd2lraS9XZWJHTF9hbmRfT3BlbkdMX0RpZmZlcmVuY2VzXG4gICAgICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gZ2xlbnVtLkRFUFRIX0NPTVBPTkVOVCkge1xuICAgICAgICAgICAgdGhpcy51c2VNaXBtYXAgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzUkdCRXh0ID0gcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ0VYVF9zUkdCJyk7XG4gICAgICAgIC8vIEZhbGxiYWNrXG4gICAgICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gVGV4dHVyZS5TUkdCICYmICFzUkdCRXh0KSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IFRleHR1cmUuUkdCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmZvcm1hdCA9PT0gVGV4dHVyZS5TUkdCX0FMUEhBICYmICFzUkdCRXh0KSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1hdCA9IFRleHR1cmUuUkdCQTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuTlBPVCA9ICF0aGlzLmlzUG93ZXJPZlR3bygpO1xuICAgIH0sXG5cbiAgICBnZXRBdmFpbGFibGVXcmFwUzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5OUE9UKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2xlbnVtLkNMQU1QX1RPX0VER0U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFM7XG4gICAgfSxcbiAgICBnZXRBdmFpbGFibGVXcmFwVDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5OUE9UKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2xlbnVtLkNMQU1QX1RPX0VER0U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcFQ7XG4gICAgfSxcbiAgICBnZXRBdmFpbGFibGVNaW5GaWx0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1pbkZpbHRlciA9IHRoaXMubWluRmlsdGVyO1xuICAgICAgICBpZiAodGhpcy5OUE9UIHx8ICF0aGlzLnVzZU1pcG1hcCkge1xuICAgICAgICAgICAgaWYgKG1pbkZpbHRlciA9PT0gZ2xlbnVtLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgfHxcbiAgICAgICAgICAgICAgICBtaW5GaWx0ZXIgPT09IGdsZW51bS5ORUFSRVNUX01JUE1BUF9MSU5FQVJcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHJldHVybiBnbGVudW0uTkVBUkVTVDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1pbkZpbHRlciA9PT0gZ2xlbnVtLkxJTkVBUl9NSVBNQVBfTElORUFSIHx8XG4gICAgICAgICAgICAgICAgbWluRmlsdGVyID09PSBnbGVudW0uTElORUFSX01JUE1BUF9ORUFSRVNUXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZ2xlbnVtLkxJTkVBUjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBtaW5GaWx0ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gbWluRmlsdGVyO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBnZXRBdmFpbGFibGVNYWdGaWx0ZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFnRmlsdGVyO1xuICAgIH0sXG5cbiAgICBuZXh0SGlnaGVzdFBvd2VyT2ZUd286IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIC0teDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCAzMjsgaSA8PD0gMSkge1xuICAgICAgICAgICAgeCA9IHggfCB4ID4+IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHggKyAxO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG5cbiAgICAgICAgdmFyIHdlYmdsVGV4dHVyZSA9IGNhY2hlLmdldCgnd2ViZ2xfdGV4dHVyZScpO1xuICAgICAgICBpZiAod2ViZ2xUZXh0dXJlKXtcbiAgICAgICAgICAgIHJlbmRlcmVyLmdsLmRlbGV0ZVRleHR1cmUod2ViZ2xUZXh0dXJlKTtcbiAgICAgICAgfVxuICAgICAgICBjYWNoZS5kZWxldGVDb250ZXh0KHJlbmRlcmVyLl9fdWlkX18pO1xuXG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIGltYWdlIG9mIHRleHR1cmUgaXMgdmFsaWQgYW5kIGxvYWRlZC5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzUmVuZGVyYWJsZTogZnVuY3Rpb24gKCkge30sXG5cbiAgICAvKipcbiAgICAgKiBUZXN0IGlmIHRleHR1cmUgc2l6ZSBpcyBwb3dlciBvZiB0d29cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGlzUG93ZXJPZlR3bzogZnVuY3Rpb24gKCkge31cbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZS5wcm90b3R5cGUsICd3aWR0aCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fd2lkdGggPSB2YWx1ZTtcbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0dXJlLnByb3RvdHlwZSwgJ2hlaWdodCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgIH1cbn0pO1xuXG4vKiBEYXRhVHlwZSAqL1xuXG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuQllURSA9IGdsZW51bS5CWVRFO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlVOU0lHTkVEX0JZVEUgPSBnbGVudW0uVU5TSUdORURfQllURTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5TSE9SVCA9IGdsZW51bS5TSE9SVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5VTlNJR05FRF9TSE9SVCA9IGdsZW51bS5VTlNJR05FRF9TSE9SVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5JTlQgPSBnbGVudW0uSU5UO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlVOU0lHTkVEX0lOVCA9IGdsZW51bS5VTlNJR05FRF9JTlQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuRkxPQVQgPSBnbGVudW0uRkxPQVQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuSEFMRl9GTE9BVCA9IDB4OEQ2MTtcblxuLyoqXG4gKiBVTlNJR05FRF9JTlRfMjRfOF9XRUJHTCBmb3IgV0VCR0xfZGVwdGhfdGV4dHVyZSBleHRlbnNpb25cbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuVU5TSUdORURfSU5UXzI0XzhfV0VCR0wgPSAzNDA0MjtcblxuLyogUGl4ZWxGb3JtYXQgKi9cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5ERVBUSF9DT01QT05FTlQgPSBnbGVudW0uREVQVEhfQ09NUE9ORU5UO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkRFUFRIX1NURU5DSUwgPSBnbGVudW0uREVQVEhfU1RFTkNJTDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5BTFBIQSA9IGdsZW51bS5BTFBIQTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5SR0IgPSBnbGVudW0uUkdCO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlJHQkEgPSBnbGVudW0uUkdCQTtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5MVU1JTkFOQ0UgPSBnbGVudW0uTFVNSU5BTkNFO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLkxVTUlOQU5DRV9BTFBIQSA9IGdsZW51bS5MVU1JTkFOQ0VfQUxQSEE7XG5cbi8qKlxuICogQHNlZSBodHRwczovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9leHRlbnNpb25zL0VYVF9zUkdCL1xuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5TUkdCID0gMHg4QzQwO1xuLyoqXG4gKiBAc2VlIGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL2V4dGVuc2lvbnMvRVhUX3NSR0IvXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlNSR0JfQUxQSEEgPSAweDhDNDI7XG5cbi8qIENvbXByZXNzZWQgVGV4dHVyZSAqL1xuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvemgtQ04vZG9jcy9XZWIvQVBJL1dlYkdMX0FQSS9Db25zdGFudHNcbi8vIHMzdGNcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JfUzNUQ19EWFQxX0VYVCA9IDB4ODNGMDtcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX1MzVENfRFhUMV9FWFQgPSAweDgzRjE7XG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUID0gMHg4M0YyO1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVCA9IDB4ODNGMztcblxuLy8gZXRjXG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCX0VUQzFfV0VCR0wgPSAweDhENjQ7XG5cbi8vIHB2cnRjXG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCX1BWUlRDXzRCUFBWMV9JTUcgPSAweDhDMDA7XG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9QVlJUQ180QlBQVjFfSU1HID0gMHg4QzAyO1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9QVlJUQ18yQlBQVjFfSU1HID0gMHg4QzAxO1xuVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUFZSVENfMkJQUFYxX0lNRyA9IDB4OEMwMztcblxuLy8gYXRjXG5UZXh0dXJlLkNPTVBSRVNTRURfUkdCX0FUQ19XRUJHTCA9IDB4OEM5MjtcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX0FUQ19FWFBMSUNJVF9BTFBIQV9XRUJHTCA9IDB4OEM5MztcblRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX0FUQ19JTlRFUlBPTEFURURfQUxQSEFfV0VCR0wgPSAweDg3RUU7XG5cbi8qIFRleHR1cmVNYWdGaWx0ZXIgKi9cbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5ORUFSRVNUID0gZ2xlbnVtLk5FQVJFU1Q7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuTElORUFSID0gZ2xlbnVtLkxJTkVBUjtcblxuLyogVGV4dHVyZU1pbkZpbHRlciAqL1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLk5FQVJFU1RfTUlQTUFQX05FQVJFU1QgPSBnbGVudW0uTkVBUkVTVF9NSVBNQVBfTkVBUkVTVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuVGV4dHVyZS5MSU5FQVJfTUlQTUFQX05FQVJFU1QgPSBnbGVudW0uTElORUFSX01JUE1BUF9ORUFSRVNUO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLk5FQVJFU1RfTUlQTUFQX0xJTkVBUiA9IGdsZW51bS5ORUFSRVNUX01JUE1BUF9MSU5FQVI7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuTElORUFSX01JUE1BUF9MSU5FQVIgPSBnbGVudW0uTElORUFSX01JUE1BUF9MSU5FQVI7XG5cbi8qIFRleHR1cmVXcmFwTW9kZSAqL1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLlJFUEVBVCA9IGdsZW51bS5SRVBFQVQ7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblRleHR1cmUuQ0xBTVBfVE9fRURHRSA9IGdsZW51bS5DTEFNUF9UT19FREdFO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5UZXh0dXJlLk1JUlJPUkVEX1JFUEVBVCA9IGdsZW51bS5NSVJST1JFRF9SRVBFQVQ7XG5cblxuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9UZXh0dXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * @namespace clay.core.glenum\n * @see http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.14\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    /* ClearBufferMask */\n    DEPTH_BUFFER_BIT               : 0x00000100,\n    STENCIL_BUFFER_BIT             : 0x00000400,\n    COLOR_BUFFER_BIT               : 0x00004000,\n\n    /* BeginMode */\n    POINTS                         : 0x0000,\n    LINES                          : 0x0001,\n    LINE_LOOP                      : 0x0002,\n    LINE_STRIP                     : 0x0003,\n    TRIANGLES                      : 0x0004,\n    TRIANGLE_STRIP                 : 0x0005,\n    TRIANGLE_FAN                   : 0x0006,\n\n    /* AlphaFunction (not supported in ES20) */\n    /*      NEVER */\n    /*      LESS */\n    /*      EQUAL */\n    /*      LEQUAL */\n    /*      GREATER */\n    /*      NOTEQUAL */\n    /*      GEQUAL */\n    /*      ALWAYS */\n\n    /* BlendingFactorDest */\n    ZERO                           : 0,\n    ONE                            : 1,\n    SRC_COLOR                      : 0x0300,\n    ONE_MINUS_SRC_COLOR            : 0x0301,\n    SRC_ALPHA                      : 0x0302,\n    ONE_MINUS_SRC_ALPHA            : 0x0303,\n    DST_ALPHA                      : 0x0304,\n    ONE_MINUS_DST_ALPHA            : 0x0305,\n\n    /* BlendingFactorSrc */\n    /*      ZERO */\n    /*      ONE */\n    DST_COLOR                      : 0x0306,\n    ONE_MINUS_DST_COLOR            : 0x0307,\n    SRC_ALPHA_SATURATE             : 0x0308,\n    /*      SRC_ALPHA */\n    /*      ONE_MINUS_SRC_ALPHA */\n    /*      DST_ALPHA */\n    /*      ONE_MINUS_DST_ALPHA */\n\n    /* BlendEquationSeparate */\n    FUNC_ADD                       : 0x8006,\n    BLEND_EQUATION                 : 0x8009,\n    BLEND_EQUATION_RGB             : 0x8009, /* same as BLEND_EQUATION */\n    BLEND_EQUATION_ALPHA           : 0x883D,\n\n    /* BlendSubtract */\n    FUNC_SUBTRACT                  : 0x800A,\n    FUNC_REVERSE_SUBTRACT          : 0x800B,\n\n    /* Separate Blend Functions */\n    BLEND_DST_RGB                  : 0x80C8,\n    BLEND_SRC_RGB                  : 0x80C9,\n    BLEND_DST_ALPHA                : 0x80CA,\n    BLEND_SRC_ALPHA                : 0x80CB,\n    CONSTANT_COLOR                 : 0x8001,\n    ONE_MINUS_CONSTANT_COLOR       : 0x8002,\n    CONSTANT_ALPHA                 : 0x8003,\n    ONE_MINUS_CONSTANT_ALPHA       : 0x8004,\n    BLEND_COLOR                    : 0x8005,\n\n    /* Buffer Objects */\n    ARRAY_BUFFER                   : 0x8892,\n    ELEMENT_ARRAY_BUFFER           : 0x8893,\n    ARRAY_BUFFER_BINDING           : 0x8894,\n    ELEMENT_ARRAY_BUFFER_BINDING   : 0x8895,\n\n    STREAM_DRAW                    : 0x88E0,\n    STATIC_DRAW                    : 0x88E4,\n    DYNAMIC_DRAW                   : 0x88E8,\n\n    BUFFER_SIZE                    : 0x8764,\n    BUFFER_USAGE                   : 0x8765,\n\n    CURRENT_VERTEX_ATTRIB          : 0x8626,\n\n    /* CullFaceMode */\n    FRONT                          : 0x0404,\n    BACK                           : 0x0405,\n    FRONT_AND_BACK                 : 0x0408,\n\n    /* DepthFunction */\n    /*      NEVER */\n    /*      LESS */\n    /*      EQUAL */\n    /*      LEQUAL */\n    /*      GREATER */\n    /*      NOTEQUAL */\n    /*      GEQUAL */\n    /*      ALWAYS */\n\n    /* EnableCap */\n    /* TEXTURE_2D */\n    CULL_FACE                      : 0x0B44,\n    BLEND                          : 0x0BE2,\n    DITHER                         : 0x0BD0,\n    STENCIL_TEST                   : 0x0B90,\n    DEPTH_TEST                     : 0x0B71,\n    SCISSOR_TEST                   : 0x0C11,\n    POLYGON_OFFSET_FILL            : 0x8037,\n    SAMPLE_ALPHA_TO_COVERAGE       : 0x809E,\n    SAMPLE_COVERAGE                : 0x80A0,\n\n    /* ErrorCode */\n    NO_ERROR                       : 0,\n    INVALID_ENUM                   : 0x0500,\n    INVALID_VALUE                  : 0x0501,\n    INVALID_OPERATION              : 0x0502,\n    OUT_OF_MEMORY                  : 0x0505,\n\n    /* FrontFaceDirection */\n    CW                             : 0x0900,\n    CCW                            : 0x0901,\n\n    /* GetPName */\n    LINE_WIDTH                     : 0x0B21,\n    ALIASED_POINT_SIZE_RANGE       : 0x846D,\n    ALIASED_LINE_WIDTH_RANGE       : 0x846E,\n    CULL_FACE_MODE                 : 0x0B45,\n    FRONT_FACE                     : 0x0B46,\n    DEPTH_RANGE                    : 0x0B70,\n    DEPTH_WRITEMASK                : 0x0B72,\n    DEPTH_CLEAR_VALUE              : 0x0B73,\n    DEPTH_FUNC                     : 0x0B74,\n    STENCIL_CLEAR_VALUE            : 0x0B91,\n    STENCIL_FUNC                   : 0x0B92,\n    STENCIL_FAIL                   : 0x0B94,\n    STENCIL_PASS_DEPTH_FAIL        : 0x0B95,\n    STENCIL_PASS_DEPTH_PASS        : 0x0B96,\n    STENCIL_REF                    : 0x0B97,\n    STENCIL_VALUE_MASK             : 0x0B93,\n    STENCIL_WRITEMASK              : 0x0B98,\n    STENCIL_BACK_FUNC              : 0x8800,\n    STENCIL_BACK_FAIL              : 0x8801,\n    STENCIL_BACK_PASS_DEPTH_FAIL   : 0x8802,\n    STENCIL_BACK_PASS_DEPTH_PASS   : 0x8803,\n    STENCIL_BACK_REF               : 0x8CA3,\n    STENCIL_BACK_VALUE_MASK        : 0x8CA4,\n    STENCIL_BACK_WRITEMASK         : 0x8CA5,\n    VIEWPORT                       : 0x0BA2,\n    SCISSOR_BOX                    : 0x0C10,\n    /*      SCISSOR_TEST */\n    COLOR_CLEAR_VALUE              : 0x0C22,\n    COLOR_WRITEMASK                : 0x0C23,\n    UNPACK_ALIGNMENT               : 0x0CF5,\n    PACK_ALIGNMENT                 : 0x0D05,\n    MAX_TEXTURE_SIZE               : 0x0D33,\n    MAX_VIEWPORT_DIMS              : 0x0D3A,\n    SUBPIXEL_BITS                  : 0x0D50,\n    RED_BITS                       : 0x0D52,\n    GREEN_BITS                     : 0x0D53,\n    BLUE_BITS                      : 0x0D54,\n    ALPHA_BITS                     : 0x0D55,\n    DEPTH_BITS                     : 0x0D56,\n    STENCIL_BITS                   : 0x0D57,\n    POLYGON_OFFSET_UNITS           : 0x2A00,\n    /*      POLYGON_OFFSET_FILL */\n    POLYGON_OFFSET_FACTOR          : 0x8038,\n    TEXTURE_BINDING_2D             : 0x8069,\n    SAMPLE_BUFFERS                 : 0x80A8,\n    SAMPLES                        : 0x80A9,\n    SAMPLE_COVERAGE_VALUE          : 0x80AA,\n    SAMPLE_COVERAGE_INVERT         : 0x80AB,\n\n    /* GetTextureParameter */\n    /*      TEXTURE_MAG_FILTER */\n    /*      TEXTURE_MIN_FILTER */\n    /*      TEXTURE_WRAP_S */\n    /*      TEXTURE_WRAP_T */\n\n    COMPRESSED_TEXTURE_FORMATS     : 0x86A3,\n\n    /* HintMode */\n    DONT_CARE                      : 0x1100,\n    FASTEST                        : 0x1101,\n    NICEST                         : 0x1102,\n\n    /* HintTarget */\n    GENERATE_MIPMAP_HINT            : 0x8192,\n\n    /* DataType */\n    BYTE                           : 0x1400,\n    UNSIGNED_BYTE                  : 0x1401,\n    SHORT                          : 0x1402,\n    UNSIGNED_SHORT                 : 0x1403,\n    INT                            : 0x1404,\n    UNSIGNED_INT                   : 0x1405,\n    FLOAT                          : 0x1406,\n\n    /* PixelFormat */\n    DEPTH_COMPONENT                : 0x1902,\n    ALPHA                          : 0x1906,\n    RGB                            : 0x1907,\n    RGBA                           : 0x1908,\n    LUMINANCE                      : 0x1909,\n    LUMINANCE_ALPHA                : 0x190A,\n\n    /* PixelType */\n    /*      UNSIGNED_BYTE */\n    UNSIGNED_SHORT_4_4_4_4         : 0x8033,\n    UNSIGNED_SHORT_5_5_5_1         : 0x8034,\n    UNSIGNED_SHORT_5_6_5           : 0x8363,\n\n    /* Shaders */\n    FRAGMENT_SHADER                  : 0x8B30,\n    VERTEX_SHADER                    : 0x8B31,\n    MAX_VERTEX_ATTRIBS               : 0x8869,\n    MAX_VERTEX_UNIFORM_VECTORS       : 0x8DFB,\n    MAX_VARYING_VECTORS              : 0x8DFC,\n    MAX_COMBINED_TEXTURE_IMAGE_UNITS : 0x8B4D,\n    MAX_VERTEX_TEXTURE_IMAGE_UNITS   : 0x8B4C,\n    MAX_TEXTURE_IMAGE_UNITS          : 0x8872,\n    MAX_FRAGMENT_UNIFORM_VECTORS     : 0x8DFD,\n    SHADER_TYPE                      : 0x8B4F,\n    DELETE_STATUS                    : 0x8B80,\n    LINK_STATUS                      : 0x8B82,\n    VALIDATE_STATUS                  : 0x8B83,\n    ATTACHED_SHADERS                 : 0x8B85,\n    ACTIVE_UNIFORMS                  : 0x8B86,\n    ACTIVE_ATTRIBUTES                : 0x8B89,\n    SHADING_LANGUAGE_VERSION         : 0x8B8C,\n    CURRENT_PROGRAM                  : 0x8B8D,\n\n    /* StencilFunction */\n    NEVER                          : 0x0200,\n    LESS                           : 0x0201,\n    EQUAL                          : 0x0202,\n    LEQUAL                         : 0x0203,\n    GREATER                        : 0x0204,\n    NOTEQUAL                       : 0x0205,\n    GEQUAL                         : 0x0206,\n    ALWAYS                         : 0x0207,\n\n    /* StencilOp */\n    /*      ZERO */\n    KEEP                           : 0x1E00,\n    REPLACE                        : 0x1E01,\n    INCR                           : 0x1E02,\n    DECR                           : 0x1E03,\n    INVERT                         : 0x150A,\n    INCR_WRAP                      : 0x8507,\n    DECR_WRAP                      : 0x8508,\n\n    /* StringName */\n    VENDOR                         : 0x1F00,\n    RENDERER                       : 0x1F01,\n    VERSION                        : 0x1F02,\n\n    /* TextureMagFilter */\n    NEAREST                        : 0x2600,\n    LINEAR                         : 0x2601,\n\n    /* TextureMinFilter */\n    /*      NEAREST */\n    /*      LINEAR */\n    NEAREST_MIPMAP_NEAREST         : 0x2700,\n    LINEAR_MIPMAP_NEAREST          : 0x2701,\n    NEAREST_MIPMAP_LINEAR          : 0x2702,\n    LINEAR_MIPMAP_LINEAR           : 0x2703,\n\n    /* TextureParameterName */\n    TEXTURE_MAG_FILTER             : 0x2800,\n    TEXTURE_MIN_FILTER             : 0x2801,\n    TEXTURE_WRAP_S                 : 0x2802,\n    TEXTURE_WRAP_T                 : 0x2803,\n\n    /* TextureTarget */\n    TEXTURE_2D                     : 0x0DE1,\n    TEXTURE                        : 0x1702,\n\n    TEXTURE_CUBE_MAP               : 0x8513,\n    TEXTURE_BINDING_CUBE_MAP       : 0x8514,\n    TEXTURE_CUBE_MAP_POSITIVE_X    : 0x8515,\n    TEXTURE_CUBE_MAP_NEGATIVE_X    : 0x8516,\n    TEXTURE_CUBE_MAP_POSITIVE_Y    : 0x8517,\n    TEXTURE_CUBE_MAP_NEGATIVE_Y    : 0x8518,\n    TEXTURE_CUBE_MAP_POSITIVE_Z    : 0x8519,\n    TEXTURE_CUBE_MAP_NEGATIVE_Z    : 0x851A,\n    MAX_CUBE_MAP_TEXTURE_SIZE      : 0x851C,\n\n    /* TextureUnit */\n    TEXTURE0                       : 0x84C0,\n    TEXTURE1                       : 0x84C1,\n    TEXTURE2                       : 0x84C2,\n    TEXTURE3                       : 0x84C3,\n    TEXTURE4                       : 0x84C4,\n    TEXTURE5                       : 0x84C5,\n    TEXTURE6                       : 0x84C6,\n    TEXTURE7                       : 0x84C7,\n    TEXTURE8                       : 0x84C8,\n    TEXTURE9                       : 0x84C9,\n    TEXTURE10                      : 0x84CA,\n    TEXTURE11                      : 0x84CB,\n    TEXTURE12                      : 0x84CC,\n    TEXTURE13                      : 0x84CD,\n    TEXTURE14                      : 0x84CE,\n    TEXTURE15                      : 0x84CF,\n    TEXTURE16                      : 0x84D0,\n    TEXTURE17                      : 0x84D1,\n    TEXTURE18                      : 0x84D2,\n    TEXTURE19                      : 0x84D3,\n    TEXTURE20                      : 0x84D4,\n    TEXTURE21                      : 0x84D5,\n    TEXTURE22                      : 0x84D6,\n    TEXTURE23                      : 0x84D7,\n    TEXTURE24                      : 0x84D8,\n    TEXTURE25                      : 0x84D9,\n    TEXTURE26                      : 0x84DA,\n    TEXTURE27                      : 0x84DB,\n    TEXTURE28                      : 0x84DC,\n    TEXTURE29                      : 0x84DD,\n    TEXTURE30                      : 0x84DE,\n    TEXTURE31                      : 0x84DF,\n    ACTIVE_TEXTURE                 : 0x84E0,\n\n    /* TextureWrapMode */\n    REPEAT                         : 0x2901,\n    CLAMP_TO_EDGE                  : 0x812F,\n    MIRRORED_REPEAT                : 0x8370,\n\n    /* Uniform Types */\n    FLOAT_VEC2                     : 0x8B50,\n    FLOAT_VEC3                     : 0x8B51,\n    FLOAT_VEC4                     : 0x8B52,\n    INT_VEC2                       : 0x8B53,\n    INT_VEC3                       : 0x8B54,\n    INT_VEC4                       : 0x8B55,\n    BOOL                           : 0x8B56,\n    BOOL_VEC2                      : 0x8B57,\n    BOOL_VEC3                      : 0x8B58,\n    BOOL_VEC4                      : 0x8B59,\n    FLOAT_MAT2                     : 0x8B5A,\n    FLOAT_MAT3                     : 0x8B5B,\n    FLOAT_MAT4                     : 0x8B5C,\n    SAMPLER_2D                     : 0x8B5E,\n    SAMPLER_CUBE                   : 0x8B60,\n\n    /* Vertex Arrays */\n    VERTEX_ATTRIB_ARRAY_ENABLED        : 0x8622,\n    VERTEX_ATTRIB_ARRAY_SIZE           : 0x8623,\n    VERTEX_ATTRIB_ARRAY_STRIDE         : 0x8624,\n    VERTEX_ATTRIB_ARRAY_TYPE           : 0x8625,\n    VERTEX_ATTRIB_ARRAY_NORMALIZED     : 0x886A,\n    VERTEX_ATTRIB_ARRAY_POINTER        : 0x8645,\n    VERTEX_ATTRIB_ARRAY_BUFFER_BINDING : 0x889F,\n\n    /* Shader Source */\n    COMPILE_STATUS                 : 0x8B81,\n\n    /* Shader Precision-Specified Types */\n    LOW_FLOAT                      : 0x8DF0,\n    MEDIUM_FLOAT                   : 0x8DF1,\n    HIGH_FLOAT                     : 0x8DF2,\n    LOW_INT                        : 0x8DF3,\n    MEDIUM_INT                     : 0x8DF4,\n    HIGH_INT                       : 0x8DF5,\n\n    /* Framebuffer Object. */\n    FRAMEBUFFER                    : 0x8D40,\n    RENDERBUFFER                   : 0x8D41,\n\n    RGBA4                          : 0x8056,\n    RGB5_A1                        : 0x8057,\n    RGB565                         : 0x8D62,\n    DEPTH_COMPONENT16              : 0x81A5,\n    STENCIL_INDEX                  : 0x1901,\n    STENCIL_INDEX8                 : 0x8D48,\n    DEPTH_STENCIL                  : 0x84F9,\n\n    RENDERBUFFER_WIDTH             : 0x8D42,\n    RENDERBUFFER_HEIGHT            : 0x8D43,\n    RENDERBUFFER_INTERNAL_FORMAT   : 0x8D44,\n    RENDERBUFFER_RED_SIZE          : 0x8D50,\n    RENDERBUFFER_GREEN_SIZE        : 0x8D51,\n    RENDERBUFFER_BLUE_SIZE         : 0x8D52,\n    RENDERBUFFER_ALPHA_SIZE        : 0x8D53,\n    RENDERBUFFER_DEPTH_SIZE        : 0x8D54,\n    RENDERBUFFER_STENCIL_SIZE      : 0x8D55,\n\n    FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE           : 0x8CD0,\n    FRAMEBUFFER_ATTACHMENT_OBJECT_NAME           : 0x8CD1,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL         : 0x8CD2,\n    FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE : 0x8CD3,\n\n    COLOR_ATTACHMENT0              : 0x8CE0,\n    DEPTH_ATTACHMENT               : 0x8D00,\n    STENCIL_ATTACHMENT             : 0x8D20,\n    DEPTH_STENCIL_ATTACHMENT       : 0x821A,\n\n    NONE                           : 0,\n\n    FRAMEBUFFER_COMPLETE                      : 0x8CD5,\n    FRAMEBUFFER_INCOMPLETE_ATTACHMENT         : 0x8CD6,\n    FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT : 0x8CD7,\n    FRAMEBUFFER_INCOMPLETE_DIMENSIONS         : 0x8CD9,\n    FRAMEBUFFER_UNSUPPORTED                   : 0x8CDD,\n\n    FRAMEBUFFER_BINDING            : 0x8CA6,\n    RENDERBUFFER_BINDING           : 0x8CA7,\n    MAX_RENDERBUFFER_SIZE          : 0x84E8,\n\n    INVALID_FRAMEBUFFER_OPERATION  : 0x0506,\n\n    /* WebGL-specific enums */\n    UNPACK_FLIP_Y_WEBGL            : 0x9240,\n    UNPACK_PREMULTIPLY_ALPHA_WEBGL : 0x9241,\n    CONTEXT_LOST_WEBGL             : 0x9242,\n    UNPACK_COLORSPACE_CONVERSION_WEBGL : 0x9243,\n    BROWSER_DEFAULT_WEBGL          : 0x9244,\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS9nbGVudW0uanM/YjAzNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBuYW1lc3BhY2UgY2xheS5jb3JlLmdsZW51bVxuICogQHNlZSBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL3NwZWNzL2xhdGVzdC8xLjAvIzUuMTRcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qIENsZWFyQnVmZmVyTWFzayAqL1xuICAgIERFUFRIX0JVRkZFUl9CSVQgICAgICAgICAgICAgICA6IDB4MDAwMDAxMDAsXG4gICAgU1RFTkNJTF9CVUZGRVJfQklUICAgICAgICAgICAgIDogMHgwMDAwMDQwMCxcbiAgICBDT0xPUl9CVUZGRVJfQklUICAgICAgICAgICAgICAgOiAweDAwMDA0MDAwLFxuXG4gICAgLyogQmVnaW5Nb2RlICovXG4gICAgUE9JTlRTICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMDAwLFxuICAgIExJTkVTICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDAwMSxcbiAgICBMSU5FX0xPT1AgICAgICAgICAgICAgICAgICAgICAgOiAweDAwMDIsXG4gICAgTElORV9TVFJJUCAgICAgICAgICAgICAgICAgICAgIDogMHgwMDAzLFxuICAgIFRSSUFOR0xFUyAgICAgICAgICAgICAgICAgICAgICA6IDB4MDAwNCxcbiAgICBUUklBTkdMRV9TVFJJUCAgICAgICAgICAgICAgICAgOiAweDAwMDUsXG4gICAgVFJJQU5HTEVfRkFOICAgICAgICAgICAgICAgICAgIDogMHgwMDA2LFxuXG4gICAgLyogQWxwaGFGdW5jdGlvbiAobm90IHN1cHBvcnRlZCBpbiBFUzIwKSAqL1xuICAgIC8qICAgICAgTkVWRVIgKi9cbiAgICAvKiAgICAgIExFU1MgKi9cbiAgICAvKiAgICAgIEVRVUFMICovXG4gICAgLyogICAgICBMRVFVQUwgKi9cbiAgICAvKiAgICAgIEdSRUFURVIgKi9cbiAgICAvKiAgICAgIE5PVEVRVUFMICovXG4gICAgLyogICAgICBHRVFVQUwgKi9cbiAgICAvKiAgICAgIEFMV0FZUyAqL1xuXG4gICAgLyogQmxlbmRpbmdGYWN0b3JEZXN0ICovXG4gICAgWkVSTyAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcbiAgICBPTkUgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAxLFxuICAgIFNSQ19DT0xPUiAgICAgICAgICAgICAgICAgICAgICA6IDB4MDMwMCxcbiAgICBPTkVfTUlOVVNfU1JDX0NPTE9SICAgICAgICAgICAgOiAweDAzMDEsXG4gICAgU1JDX0FMUEhBICAgICAgICAgICAgICAgICAgICAgIDogMHgwMzAyLFxuICAgIE9ORV9NSU5VU19TUkNfQUxQSEEgICAgICAgICAgICA6IDB4MDMwMyxcbiAgICBEU1RfQUxQSEEgICAgICAgICAgICAgICAgICAgICAgOiAweDAzMDQsXG4gICAgT05FX01JTlVTX0RTVF9BTFBIQSAgICAgICAgICAgIDogMHgwMzA1LFxuXG4gICAgLyogQmxlbmRpbmdGYWN0b3JTcmMgKi9cbiAgICAvKiAgICAgIFpFUk8gKi9cbiAgICAvKiAgICAgIE9ORSAqL1xuICAgIERTVF9DT0xPUiAgICAgICAgICAgICAgICAgICAgICA6IDB4MDMwNixcbiAgICBPTkVfTUlOVVNfRFNUX0NPTE9SICAgICAgICAgICAgOiAweDAzMDcsXG4gICAgU1JDX0FMUEhBX1NBVFVSQVRFICAgICAgICAgICAgIDogMHgwMzA4LFxuICAgIC8qICAgICAgU1JDX0FMUEhBICovXG4gICAgLyogICAgICBPTkVfTUlOVVNfU1JDX0FMUEhBICovXG4gICAgLyogICAgICBEU1RfQUxQSEEgKi9cbiAgICAvKiAgICAgIE9ORV9NSU5VU19EU1RfQUxQSEEgKi9cblxuICAgIC8qIEJsZW5kRXF1YXRpb25TZXBhcmF0ZSAqL1xuICAgIEZVTkNfQUREICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODAwNixcbiAgICBCTEVORF9FUVVBVElPTiAgICAgICAgICAgICAgICAgOiAweDgwMDksXG4gICAgQkxFTkRfRVFVQVRJT05fUkdCICAgICAgICAgICAgIDogMHg4MDA5LCAvKiBzYW1lIGFzIEJMRU5EX0VRVUFUSU9OICovXG4gICAgQkxFTkRfRVFVQVRJT05fQUxQSEEgICAgICAgICAgIDogMHg4ODNELFxuXG4gICAgLyogQmxlbmRTdWJ0cmFjdCAqL1xuICAgIEZVTkNfU1VCVFJBQ1QgICAgICAgICAgICAgICAgICA6IDB4ODAwQSxcbiAgICBGVU5DX1JFVkVSU0VfU1VCVFJBQ1QgICAgICAgICAgOiAweDgwMEIsXG5cbiAgICAvKiBTZXBhcmF0ZSBCbGVuZCBGdW5jdGlvbnMgKi9cbiAgICBCTEVORF9EU1RfUkdCICAgICAgICAgICAgICAgICAgOiAweDgwQzgsXG4gICAgQkxFTkRfU1JDX1JHQiAgICAgICAgICAgICAgICAgIDogMHg4MEM5LFxuICAgIEJMRU5EX0RTVF9BTFBIQSAgICAgICAgICAgICAgICA6IDB4ODBDQSxcbiAgICBCTEVORF9TUkNfQUxQSEEgICAgICAgICAgICAgICAgOiAweDgwQ0IsXG4gICAgQ09OU1RBTlRfQ09MT1IgICAgICAgICAgICAgICAgIDogMHg4MDAxLFxuICAgIE9ORV9NSU5VU19DT05TVEFOVF9DT0xPUiAgICAgICA6IDB4ODAwMixcbiAgICBDT05TVEFOVF9BTFBIQSAgICAgICAgICAgICAgICAgOiAweDgwMDMsXG4gICAgT05FX01JTlVTX0NPTlNUQU5UX0FMUEhBICAgICAgIDogMHg4MDA0LFxuICAgIEJMRU5EX0NPTE9SICAgICAgICAgICAgICAgICAgICA6IDB4ODAwNSxcblxuICAgIC8qIEJ1ZmZlciBPYmplY3RzICovXG4gICAgQVJSQVlfQlVGRkVSICAgICAgICAgICAgICAgICAgIDogMHg4ODkyLFxuICAgIEVMRU1FTlRfQVJSQVlfQlVGRkVSICAgICAgICAgICA6IDB4ODg5MyxcbiAgICBBUlJBWV9CVUZGRVJfQklORElORyAgICAgICAgICAgOiAweDg4OTQsXG4gICAgRUxFTUVOVF9BUlJBWV9CVUZGRVJfQklORElORyAgIDogMHg4ODk1LFxuXG4gICAgU1RSRUFNX0RSQVcgICAgICAgICAgICAgICAgICAgIDogMHg4OEUwLFxuICAgIFNUQVRJQ19EUkFXICAgICAgICAgICAgICAgICAgICA6IDB4ODhFNCxcbiAgICBEWU5BTUlDX0RSQVcgICAgICAgICAgICAgICAgICAgOiAweDg4RTgsXG5cbiAgICBCVUZGRVJfU0laRSAgICAgICAgICAgICAgICAgICAgOiAweDg3NjQsXG4gICAgQlVGRkVSX1VTQUdFICAgICAgICAgICAgICAgICAgIDogMHg4NzY1LFxuXG4gICAgQ1VSUkVOVF9WRVJURVhfQVRUUklCICAgICAgICAgIDogMHg4NjI2LFxuXG4gICAgLyogQ3VsbEZhY2VNb2RlICovXG4gICAgRlJPTlQgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwNDA0LFxuICAgIEJBQ0sgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDQwNSxcbiAgICBGUk9OVF9BTkRfQkFDSyAgICAgICAgICAgICAgICAgOiAweDA0MDgsXG5cbiAgICAvKiBEZXB0aEZ1bmN0aW9uICovXG4gICAgLyogICAgICBORVZFUiAqL1xuICAgIC8qICAgICAgTEVTUyAqL1xuICAgIC8qICAgICAgRVFVQUwgKi9cbiAgICAvKiAgICAgIExFUVVBTCAqL1xuICAgIC8qICAgICAgR1JFQVRFUiAqL1xuICAgIC8qICAgICAgTk9URVFVQUwgKi9cbiAgICAvKiAgICAgIEdFUVVBTCAqL1xuICAgIC8qICAgICAgQUxXQVlTICovXG5cbiAgICAvKiBFbmFibGVDYXAgKi9cbiAgICAvKiBURVhUVVJFXzJEICovXG4gICAgQ1VMTF9GQUNFICAgICAgICAgICAgICAgICAgICAgIDogMHgwQjQ0LFxuICAgIEJMRU5EICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MEJFMixcbiAgICBESVRIRVIgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDBCRDAsXG4gICAgU1RFTkNJTF9URVNUICAgICAgICAgICAgICAgICAgIDogMHgwQjkwLFxuICAgIERFUFRIX1RFU1QgICAgICAgICAgICAgICAgICAgICA6IDB4MEI3MSxcbiAgICBTQ0lTU09SX1RFU1QgICAgICAgICAgICAgICAgICAgOiAweDBDMTEsXG4gICAgUE9MWUdPTl9PRkZTRVRfRklMTCAgICAgICAgICAgIDogMHg4MDM3LFxuICAgIFNBTVBMRV9BTFBIQV9UT19DT1ZFUkFHRSAgICAgICA6IDB4ODA5RSxcbiAgICBTQU1QTEVfQ09WRVJBR0UgICAgICAgICAgICAgICAgOiAweDgwQTAsXG5cbiAgICAvKiBFcnJvckNvZGUgKi9cbiAgICBOT19FUlJPUiAgICAgICAgICAgICAgICAgICAgICAgOiAwLFxuICAgIElOVkFMSURfRU5VTSAgICAgICAgICAgICAgICAgICA6IDB4MDUwMCxcbiAgICBJTlZBTElEX1ZBTFVFICAgICAgICAgICAgICAgICAgOiAweDA1MDEsXG4gICAgSU5WQUxJRF9PUEVSQVRJT04gICAgICAgICAgICAgIDogMHgwNTAyLFxuICAgIE9VVF9PRl9NRU1PUlkgICAgICAgICAgICAgICAgICA6IDB4MDUwNSxcblxuICAgIC8qIEZyb250RmFjZURpcmVjdGlvbiAqL1xuICAgIENXICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDkwMCxcbiAgICBDQ1cgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDA5MDEsXG5cbiAgICAvKiBHZXRQTmFtZSAqL1xuICAgIExJTkVfV0lEVEggICAgICAgICAgICAgICAgICAgICA6IDB4MEIyMSxcbiAgICBBTElBU0VEX1BPSU5UX1NJWkVfUkFOR0UgICAgICAgOiAweDg0NkQsXG4gICAgQUxJQVNFRF9MSU5FX1dJRFRIX1JBTkdFICAgICAgIDogMHg4NDZFLFxuICAgIENVTExfRkFDRV9NT0RFICAgICAgICAgICAgICAgICA6IDB4MEI0NSxcbiAgICBGUk9OVF9GQUNFICAgICAgICAgICAgICAgICAgICAgOiAweDBCNDYsXG4gICAgREVQVEhfUkFOR0UgICAgICAgICAgICAgICAgICAgIDogMHgwQjcwLFxuICAgIERFUFRIX1dSSVRFTUFTSyAgICAgICAgICAgICAgICA6IDB4MEI3MixcbiAgICBERVBUSF9DTEVBUl9WQUxVRSAgICAgICAgICAgICAgOiAweDBCNzMsXG4gICAgREVQVEhfRlVOQyAgICAgICAgICAgICAgICAgICAgIDogMHgwQjc0LFxuICAgIFNURU5DSUxfQ0xFQVJfVkFMVUUgICAgICAgICAgICA6IDB4MEI5MSxcbiAgICBTVEVOQ0lMX0ZVTkMgICAgICAgICAgICAgICAgICAgOiAweDBCOTIsXG4gICAgU1RFTkNJTF9GQUlMICAgICAgICAgICAgICAgICAgIDogMHgwQjk0LFxuICAgIFNURU5DSUxfUEFTU19ERVBUSF9GQUlMICAgICAgICA6IDB4MEI5NSxcbiAgICBTVEVOQ0lMX1BBU1NfREVQVEhfUEFTUyAgICAgICAgOiAweDBCOTYsXG4gICAgU1RFTkNJTF9SRUYgICAgICAgICAgICAgICAgICAgIDogMHgwQjk3LFxuICAgIFNURU5DSUxfVkFMVUVfTUFTSyAgICAgICAgICAgICA6IDB4MEI5MyxcbiAgICBTVEVOQ0lMX1dSSVRFTUFTSyAgICAgICAgICAgICAgOiAweDBCOTgsXG4gICAgU1RFTkNJTF9CQUNLX0ZVTkMgICAgICAgICAgICAgIDogMHg4ODAwLFxuICAgIFNURU5DSUxfQkFDS19GQUlMICAgICAgICAgICAgICA6IDB4ODgwMSxcbiAgICBTVEVOQ0lMX0JBQ0tfUEFTU19ERVBUSF9GQUlMICAgOiAweDg4MDIsXG4gICAgU1RFTkNJTF9CQUNLX1BBU1NfREVQVEhfUEFTUyAgIDogMHg4ODAzLFxuICAgIFNURU5DSUxfQkFDS19SRUYgICAgICAgICAgICAgICA6IDB4OENBMyxcbiAgICBTVEVOQ0lMX0JBQ0tfVkFMVUVfTUFTSyAgICAgICAgOiAweDhDQTQsXG4gICAgU1RFTkNJTF9CQUNLX1dSSVRFTUFTSyAgICAgICAgIDogMHg4Q0E1LFxuICAgIFZJRVdQT1JUICAgICAgICAgICAgICAgICAgICAgICA6IDB4MEJBMixcbiAgICBTQ0lTU09SX0JPWCAgICAgICAgICAgICAgICAgICAgOiAweDBDMTAsXG4gICAgLyogICAgICBTQ0lTU09SX1RFU1QgKi9cbiAgICBDT0xPUl9DTEVBUl9WQUxVRSAgICAgICAgICAgICAgOiAweDBDMjIsXG4gICAgQ09MT1JfV1JJVEVNQVNLICAgICAgICAgICAgICAgIDogMHgwQzIzLFxuICAgIFVOUEFDS19BTElHTk1FTlQgICAgICAgICAgICAgICA6IDB4MENGNSxcbiAgICBQQUNLX0FMSUdOTUVOVCAgICAgICAgICAgICAgICAgOiAweDBEMDUsXG4gICAgTUFYX1RFWFRVUkVfU0laRSAgICAgICAgICAgICAgIDogMHgwRDMzLFxuICAgIE1BWF9WSUVXUE9SVF9ESU1TICAgICAgICAgICAgICA6IDB4MEQzQSxcbiAgICBTVUJQSVhFTF9CSVRTICAgICAgICAgICAgICAgICAgOiAweDBENTAsXG4gICAgUkVEX0JJVFMgICAgICAgICAgICAgICAgICAgICAgIDogMHgwRDUyLFxuICAgIEdSRUVOX0JJVFMgICAgICAgICAgICAgICAgICAgICA6IDB4MEQ1MyxcbiAgICBCTFVFX0JJVFMgICAgICAgICAgICAgICAgICAgICAgOiAweDBENTQsXG4gICAgQUxQSEFfQklUUyAgICAgICAgICAgICAgICAgICAgIDogMHgwRDU1LFxuICAgIERFUFRIX0JJVFMgICAgICAgICAgICAgICAgICAgICA6IDB4MEQ1NixcbiAgICBTVEVOQ0lMX0JJVFMgICAgICAgICAgICAgICAgICAgOiAweDBENTcsXG4gICAgUE9MWUdPTl9PRkZTRVRfVU5JVFMgICAgICAgICAgIDogMHgyQTAwLFxuICAgIC8qICAgICAgUE9MWUdPTl9PRkZTRVRfRklMTCAqL1xuICAgIFBPTFlHT05fT0ZGU0VUX0ZBQ1RPUiAgICAgICAgICA6IDB4ODAzOCxcbiAgICBURVhUVVJFX0JJTkRJTkdfMkQgICAgICAgICAgICAgOiAweDgwNjksXG4gICAgU0FNUExFX0JVRkZFUlMgICAgICAgICAgICAgICAgIDogMHg4MEE4LFxuICAgIFNBTVBMRVMgICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODBBOSxcbiAgICBTQU1QTEVfQ09WRVJBR0VfVkFMVUUgICAgICAgICAgOiAweDgwQUEsXG4gICAgU0FNUExFX0NPVkVSQUdFX0lOVkVSVCAgICAgICAgIDogMHg4MEFCLFxuXG4gICAgLyogR2V0VGV4dHVyZVBhcmFtZXRlciAqL1xuICAgIC8qICAgICAgVEVYVFVSRV9NQUdfRklMVEVSICovXG4gICAgLyogICAgICBURVhUVVJFX01JTl9GSUxURVIgKi9cbiAgICAvKiAgICAgIFRFWFRVUkVfV1JBUF9TICovXG4gICAgLyogICAgICBURVhUVVJFX1dSQVBfVCAqL1xuXG4gICAgQ09NUFJFU1NFRF9URVhUVVJFX0ZPUk1BVFMgICAgIDogMHg4NkEzLFxuXG4gICAgLyogSGludE1vZGUgKi9cbiAgICBET05UX0NBUkUgICAgICAgICAgICAgICAgICAgICAgOiAweDExMDAsXG4gICAgRkFTVEVTVCAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxMTAxLFxuICAgIE5JQ0VTVCAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTEwMixcblxuICAgIC8qIEhpbnRUYXJnZXQgKi9cbiAgICBHRU5FUkFURV9NSVBNQVBfSElOVCAgICAgICAgICAgIDogMHg4MTkyLFxuXG4gICAgLyogRGF0YVR5cGUgKi9cbiAgICBCWVRFICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE0MDAsXG4gICAgVU5TSUdORURfQllURSAgICAgICAgICAgICAgICAgIDogMHgxNDAxLFxuICAgIFNIT1JUICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTQwMixcbiAgICBVTlNJR05FRF9TSE9SVCAgICAgICAgICAgICAgICAgOiAweDE0MDMsXG4gICAgSU5UICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxNDA0LFxuICAgIFVOU0lHTkVEX0lOVCAgICAgICAgICAgICAgICAgICA6IDB4MTQwNSxcbiAgICBGTE9BVCAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE0MDYsXG5cbiAgICAvKiBQaXhlbEZvcm1hdCAqL1xuICAgIERFUFRIX0NPTVBPTkVOVCAgICAgICAgICAgICAgICA6IDB4MTkwMixcbiAgICBBTFBIQSAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDE5MDYsXG4gICAgUkdCICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxOTA3LFxuICAgIFJHQkEgICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTkwOCxcbiAgICBMVU1JTkFOQ0UgICAgICAgICAgICAgICAgICAgICAgOiAweDE5MDksXG4gICAgTFVNSU5BTkNFX0FMUEhBICAgICAgICAgICAgICAgIDogMHgxOTBBLFxuXG4gICAgLyogUGl4ZWxUeXBlICovXG4gICAgLyogICAgICBVTlNJR05FRF9CWVRFICovXG4gICAgVU5TSUdORURfU0hPUlRfNF80XzRfNCAgICAgICAgIDogMHg4MDMzLFxuICAgIFVOU0lHTkVEX1NIT1JUXzVfNV81XzEgICAgICAgICA6IDB4ODAzNCxcbiAgICBVTlNJR05FRF9TSE9SVF81XzZfNSAgICAgICAgICAgOiAweDgzNjMsXG5cbiAgICAvKiBTaGFkZXJzICovXG4gICAgRlJBR01FTlRfU0hBREVSICAgICAgICAgICAgICAgICAgOiAweDhCMzAsXG4gICAgVkVSVEVYX1NIQURFUiAgICAgICAgICAgICAgICAgICAgOiAweDhCMzEsXG4gICAgTUFYX1ZFUlRFWF9BVFRSSUJTICAgICAgICAgICAgICAgOiAweDg4NjksXG4gICAgTUFYX1ZFUlRFWF9VTklGT1JNX1ZFQ1RPUlMgICAgICAgOiAweDhERkIsXG4gICAgTUFYX1ZBUllJTkdfVkVDVE9SUyAgICAgICAgICAgICAgOiAweDhERkMsXG4gICAgTUFYX0NPTUJJTkVEX1RFWFRVUkVfSU1BR0VfVU5JVFMgOiAweDhCNEQsXG4gICAgTUFYX1ZFUlRFWF9URVhUVVJFX0lNQUdFX1VOSVRTICAgOiAweDhCNEMsXG4gICAgTUFYX1RFWFRVUkVfSU1BR0VfVU5JVFMgICAgICAgICAgOiAweDg4NzIsXG4gICAgTUFYX0ZSQUdNRU5UX1VOSUZPUk1fVkVDVE9SUyAgICAgOiAweDhERkQsXG4gICAgU0hBREVSX1RZUEUgICAgICAgICAgICAgICAgICAgICAgOiAweDhCNEYsXG4gICAgREVMRVRFX1NUQVRVUyAgICAgICAgICAgICAgICAgICAgOiAweDhCODAsXG4gICAgTElOS19TVEFUVVMgICAgICAgICAgICAgICAgICAgICAgOiAweDhCODIsXG4gICAgVkFMSURBVEVfU1RBVFVTICAgICAgICAgICAgICAgICAgOiAweDhCODMsXG4gICAgQVRUQUNIRURfU0hBREVSUyAgICAgICAgICAgICAgICAgOiAweDhCODUsXG4gICAgQUNUSVZFX1VOSUZPUk1TICAgICAgICAgICAgICAgICAgOiAweDhCODYsXG4gICAgQUNUSVZFX0FUVFJJQlVURVMgICAgICAgICAgICAgICAgOiAweDhCODksXG4gICAgU0hBRElOR19MQU5HVUFHRV9WRVJTSU9OICAgICAgICAgOiAweDhCOEMsXG4gICAgQ1VSUkVOVF9QUk9HUkFNICAgICAgICAgICAgICAgICAgOiAweDhCOEQsXG5cbiAgICAvKiBTdGVuY2lsRnVuY3Rpb24gKi9cbiAgICBORVZFUiAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDAyMDAsXG4gICAgTEVTUyAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjAxLFxuICAgIEVRVUFMICAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDIwMixcbiAgICBMRVFVQUwgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDAyMDMsXG4gICAgR1JFQVRFUiAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjA0LFxuICAgIE5PVEVRVUFMICAgICAgICAgICAgICAgICAgICAgICA6IDB4MDIwNSxcbiAgICBHRVFVQUwgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDAyMDYsXG4gICAgQUxXQVlTICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgwMjA3LFxuXG4gICAgLyogU3RlbmNpbE9wICovXG4gICAgLyogICAgICBaRVJPICovXG4gICAgS0VFUCAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxRTAwLFxuICAgIFJFUExBQ0UgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MUUwMSxcbiAgICBJTkNSICAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDFFMDIsXG4gICAgREVDUiAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxRTAzLFxuICAgIElOVkVSVCAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MTUwQSxcbiAgICBJTkNSX1dSQVAgICAgICAgICAgICAgICAgICAgICAgOiAweDg1MDcsXG4gICAgREVDUl9XUkFQICAgICAgICAgICAgICAgICAgICAgIDogMHg4NTA4LFxuXG4gICAgLyogU3RyaW5nTmFtZSAqL1xuICAgIFZFTkRPUiAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MUYwMCxcbiAgICBSRU5ERVJFUiAgICAgICAgICAgICAgICAgICAgICAgOiAweDFGMDEsXG4gICAgVkVSU0lPTiAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxRjAyLFxuXG4gICAgLyogVGV4dHVyZU1hZ0ZpbHRlciAqL1xuICAgIE5FQVJFU1QgICAgICAgICAgICAgICAgICAgICAgICA6IDB4MjYwMCxcbiAgICBMSU5FQVIgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDI2MDEsXG5cbiAgICAvKiBUZXh0dXJlTWluRmlsdGVyICovXG4gICAgLyogICAgICBORUFSRVNUICovXG4gICAgLyogICAgICBMSU5FQVIgKi9cbiAgICBORUFSRVNUX01JUE1BUF9ORUFSRVNUICAgICAgICAgOiAweDI3MDAsXG4gICAgTElORUFSX01JUE1BUF9ORUFSRVNUICAgICAgICAgIDogMHgyNzAxLFxuICAgIE5FQVJFU1RfTUlQTUFQX0xJTkVBUiAgICAgICAgICA6IDB4MjcwMixcbiAgICBMSU5FQVJfTUlQTUFQX0xJTkVBUiAgICAgICAgICAgOiAweDI3MDMsXG5cbiAgICAvKiBUZXh0dXJlUGFyYW1ldGVyTmFtZSAqL1xuICAgIFRFWFRVUkVfTUFHX0ZJTFRFUiAgICAgICAgICAgICA6IDB4MjgwMCxcbiAgICBURVhUVVJFX01JTl9GSUxURVIgICAgICAgICAgICAgOiAweDI4MDEsXG4gICAgVEVYVFVSRV9XUkFQX1MgICAgICAgICAgICAgICAgIDogMHgyODAyLFxuICAgIFRFWFRVUkVfV1JBUF9UICAgICAgICAgICAgICAgICA6IDB4MjgwMyxcblxuICAgIC8qIFRleHR1cmVUYXJnZXQgKi9cbiAgICBURVhUVVJFXzJEICAgICAgICAgICAgICAgICAgICAgOiAweDBERTEsXG4gICAgVEVYVFVSRSAgICAgICAgICAgICAgICAgICAgICAgIDogMHgxNzAyLFxuXG4gICAgVEVYVFVSRV9DVUJFX01BUCAgICAgICAgICAgICAgIDogMHg4NTEzLFxuICAgIFRFWFRVUkVfQklORElOR19DVUJFX01BUCAgICAgICA6IDB4ODUxNCxcbiAgICBURVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggICAgOiAweDg1MTUsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9ORUdBVElWRV9YICAgIDogMHg4NTE2LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWSAgICA6IDB4ODUxNyxcbiAgICBURVhUVVJFX0NVQkVfTUFQX05FR0FUSVZFX1kgICAgOiAweDg1MTgsXG4gICAgVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9aICAgIDogMHg4NTE5LFxuICAgIFRFWFRVUkVfQ1VCRV9NQVBfTkVHQVRJVkVfWiAgICA6IDB4ODUxQSxcbiAgICBNQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFICAgICAgOiAweDg1MUMsXG5cbiAgICAvKiBUZXh0dXJlVW5pdCAqL1xuICAgIFRFWFRVUkUwICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDMCxcbiAgICBURVhUVVJFMSAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzEsXG4gICAgVEVYVFVSRTIgICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEMyLFxuICAgIFRFWFRVUkUzICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDMyxcbiAgICBURVhUVVJFNCAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzQsXG4gICAgVEVYVFVSRTUgICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEM1LFxuICAgIFRFWFRVUkU2ICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDNixcbiAgICBURVhUVVJFNyAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0QzcsXG4gICAgVEVYVFVSRTggICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEM4LFxuICAgIFRFWFRVUkU5ICAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDOSxcbiAgICBURVhUVVJFMTAgICAgICAgICAgICAgICAgICAgICAgOiAweDg0Q0EsXG4gICAgVEVYVFVSRTExICAgICAgICAgICAgICAgICAgICAgIDogMHg4NENCLFxuICAgIFRFWFRVUkUxMiAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDQyxcbiAgICBURVhUVVJFMTMgICAgICAgICAgICAgICAgICAgICAgOiAweDg0Q0QsXG4gICAgVEVYVFVSRTE0ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NENFLFxuICAgIFRFWFRVUkUxNSAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRDRixcbiAgICBURVhUVVJFMTYgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDAsXG4gICAgVEVYVFVSRTE3ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQxLFxuICAgIFRFWFRVUkUxOCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODREMixcbiAgICBURVhUVVJFMTkgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDMsXG4gICAgVEVYVFVSRTIwICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQ0LFxuICAgIFRFWFRVUkUyMSAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRENSxcbiAgICBURVhUVVJFMjIgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDYsXG4gICAgVEVYVFVSRTIzICAgICAgICAgICAgICAgICAgICAgIDogMHg4NEQ3LFxuICAgIFRFWFRVUkUyNCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODREOCxcbiAgICBURVhUVVJFMjUgICAgICAgICAgICAgICAgICAgICAgOiAweDg0RDksXG4gICAgVEVYVFVSRTI2ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NERBLFxuICAgIFRFWFRVUkUyNyAgICAgICAgICAgICAgICAgICAgICA6IDB4ODREQixcbiAgICBURVhUVVJFMjggICAgICAgICAgICAgICAgICAgICAgOiAweDg0REMsXG4gICAgVEVYVFVSRTI5ICAgICAgICAgICAgICAgICAgICAgIDogMHg4NERELFxuICAgIFRFWFRVUkUzMCAgICAgICAgICAgICAgICAgICAgICA6IDB4ODRERSxcbiAgICBURVhUVVJFMzEgICAgICAgICAgICAgICAgICAgICAgOiAweDg0REYsXG4gICAgQUNUSVZFX1RFWFRVUkUgICAgICAgICAgICAgICAgIDogMHg4NEUwLFxuXG4gICAgLyogVGV4dHVyZVdyYXBNb2RlICovXG4gICAgUkVQRUFUICAgICAgICAgICAgICAgICAgICAgICAgIDogMHgyOTAxLFxuICAgIENMQU1QX1RPX0VER0UgICAgICAgICAgICAgICAgICA6IDB4ODEyRixcbiAgICBNSVJST1JFRF9SRVBFQVQgICAgICAgICAgICAgICAgOiAweDgzNzAsXG5cbiAgICAvKiBVbmlmb3JtIFR5cGVzICovXG4gICAgRkxPQVRfVkVDMiAgICAgICAgICAgICAgICAgICAgIDogMHg4QjUwLFxuICAgIEZMT0FUX1ZFQzMgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1MSxcbiAgICBGTE9BVF9WRUM0ICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTIsXG4gICAgSU5UX1ZFQzIgICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjUzLFxuICAgIElOVF9WRUMzICAgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1NCxcbiAgICBJTlRfVkVDNCAgICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTUsXG4gICAgQk9PTCAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjU2LFxuICAgIEJPT0xfVkVDMiAgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1NyxcbiAgICBCT09MX1ZFQzMgICAgICAgICAgICAgICAgICAgICAgOiAweDhCNTgsXG4gICAgQk9PTF9WRUM0ICAgICAgICAgICAgICAgICAgICAgIDogMHg4QjU5LFxuICAgIEZMT0FUX01BVDIgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1QSxcbiAgICBGTE9BVF9NQVQzICAgICAgICAgICAgICAgICAgICAgOiAweDhCNUIsXG4gICAgRkxPQVRfTUFUNCAgICAgICAgICAgICAgICAgICAgIDogMHg4QjVDLFxuICAgIFNBTVBMRVJfMkQgICAgICAgICAgICAgICAgICAgICA6IDB4OEI1RSxcbiAgICBTQU1QTEVSX0NVQkUgICAgICAgICAgICAgICAgICAgOiAweDhCNjAsXG5cbiAgICAvKiBWZXJ0ZXggQXJyYXlzICovXG4gICAgVkVSVEVYX0FUVFJJQl9BUlJBWV9FTkFCTEVEICAgICAgICA6IDB4ODYyMixcbiAgICBWRVJURVhfQVRUUklCX0FSUkFZX1NJWkUgICAgICAgICAgIDogMHg4NjIzLFxuICAgIFZFUlRFWF9BVFRSSUJfQVJSQVlfU1RSSURFICAgICAgICAgOiAweDg2MjQsXG4gICAgVkVSVEVYX0FUVFJJQl9BUlJBWV9UWVBFICAgICAgICAgICA6IDB4ODYyNSxcbiAgICBWRVJURVhfQVRUUklCX0FSUkFZX05PUk1BTElaRUQgICAgIDogMHg4ODZBLFxuICAgIFZFUlRFWF9BVFRSSUJfQVJSQVlfUE9JTlRFUiAgICAgICAgOiAweDg2NDUsXG4gICAgVkVSVEVYX0FUVFJJQl9BUlJBWV9CVUZGRVJfQklORElORyA6IDB4ODg5RixcblxuICAgIC8qIFNoYWRlciBTb3VyY2UgKi9cbiAgICBDT01QSUxFX1NUQVRVUyAgICAgICAgICAgICAgICAgOiAweDhCODEsXG5cbiAgICAvKiBTaGFkZXIgUHJlY2lzaW9uLVNwZWNpZmllZCBUeXBlcyAqL1xuICAgIExPV19GTE9BVCAgICAgICAgICAgICAgICAgICAgICA6IDB4OERGMCxcbiAgICBNRURJVU1fRkxPQVQgICAgICAgICAgICAgICAgICAgOiAweDhERjEsXG4gICAgSElHSF9GTE9BVCAgICAgICAgICAgICAgICAgICAgIDogMHg4REYyLFxuICAgIExPV19JTlQgICAgICAgICAgICAgICAgICAgICAgICA6IDB4OERGMyxcbiAgICBNRURJVU1fSU5UICAgICAgICAgICAgICAgICAgICAgOiAweDhERjQsXG4gICAgSElHSF9JTlQgICAgICAgICAgICAgICAgICAgICAgIDogMHg4REY1LFxuXG4gICAgLyogRnJhbWVidWZmZXIgT2JqZWN0LiAqL1xuICAgIEZSQU1FQlVGRkVSICAgICAgICAgICAgICAgICAgICA6IDB4OEQ0MCxcbiAgICBSRU5ERVJCVUZGRVIgICAgICAgICAgICAgICAgICAgOiAweDhENDEsXG5cbiAgICBSR0JBNCAgICAgICAgICAgICAgICAgICAgICAgICAgOiAweDgwNTYsXG4gICAgUkdCNV9BMSAgICAgICAgICAgICAgICAgICAgICAgIDogMHg4MDU3LFxuICAgIFJHQjU2NSAgICAgICAgICAgICAgICAgICAgICAgICA6IDB4OEQ2MixcbiAgICBERVBUSF9DT01QT05FTlQxNiAgICAgICAgICAgICAgOiAweDgxQTUsXG4gICAgU1RFTkNJTF9JTkRFWCAgICAgICAgICAgICAgICAgIDogMHgxOTAxLFxuICAgIFNURU5DSUxfSU5ERVg4ICAgICAgICAgICAgICAgICA6IDB4OEQ0OCxcbiAgICBERVBUSF9TVEVOQ0lMICAgICAgICAgICAgICAgICAgOiAweDg0RjksXG5cbiAgICBSRU5ERVJCVUZGRVJfV0lEVEggICAgICAgICAgICAgOiAweDhENDIsXG4gICAgUkVOREVSQlVGRkVSX0hFSUdIVCAgICAgICAgICAgIDogMHg4RDQzLFxuICAgIFJFTkRFUkJVRkZFUl9JTlRFUk5BTF9GT1JNQVQgICA6IDB4OEQ0NCxcbiAgICBSRU5ERVJCVUZGRVJfUkVEX1NJWkUgICAgICAgICAgOiAweDhENTAsXG4gICAgUkVOREVSQlVGRkVSX0dSRUVOX1NJWkUgICAgICAgIDogMHg4RDUxLFxuICAgIFJFTkRFUkJVRkZFUl9CTFVFX1NJWkUgICAgICAgICA6IDB4OEQ1MixcbiAgICBSRU5ERVJCVUZGRVJfQUxQSEFfU0laRSAgICAgICAgOiAweDhENTMsXG4gICAgUkVOREVSQlVGRkVSX0RFUFRIX1NJWkUgICAgICAgIDogMHg4RDU0LFxuICAgIFJFTkRFUkJVRkZFUl9TVEVOQ0lMX1NJWkUgICAgICA6IDB4OEQ1NSxcblxuICAgIEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfT0JKRUNUX1RZUEUgICAgICAgICAgIDogMHg4Q0QwLFxuICAgIEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfT0JKRUNUX05BTUUgICAgICAgICAgIDogMHg4Q0QxLFxuICAgIEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfVEVYVFVSRV9MRVZFTCAgICAgICAgIDogMHg4Q0QyLFxuICAgIEZSQU1FQlVGRkVSX0FUVEFDSE1FTlRfVEVYVFVSRV9DVUJFX01BUF9GQUNFIDogMHg4Q0QzLFxuXG4gICAgQ09MT1JfQVRUQUNITUVOVDAgICAgICAgICAgICAgIDogMHg4Q0UwLFxuICAgIERFUFRIX0FUVEFDSE1FTlQgICAgICAgICAgICAgICA6IDB4OEQwMCxcbiAgICBTVEVOQ0lMX0FUVEFDSE1FTlQgICAgICAgICAgICAgOiAweDhEMjAsXG4gICAgREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UICAgICAgIDogMHg4MjFBLFxuXG4gICAgTk9ORSAgICAgICAgICAgICAgICAgICAgICAgICAgIDogMCxcblxuICAgIEZSQU1FQlVGRkVSX0NPTVBMRVRFICAgICAgICAgICAgICAgICAgICAgIDogMHg4Q0Q1LFxuICAgIEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfQVRUQUNITUVOVCAgICAgICAgIDogMHg4Q0Q2LFxuICAgIEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfTUlTU0lOR19BVFRBQ0hNRU5UIDogMHg4Q0Q3LFxuICAgIEZSQU1FQlVGRkVSX0lOQ09NUExFVEVfRElNRU5TSU9OUyAgICAgICAgIDogMHg4Q0Q5LFxuICAgIEZSQU1FQlVGRkVSX1VOU1VQUE9SVEVEICAgICAgICAgICAgICAgICAgIDogMHg4Q0RELFxuXG4gICAgRlJBTUVCVUZGRVJfQklORElORyAgICAgICAgICAgIDogMHg4Q0E2LFxuICAgIFJFTkRFUkJVRkZFUl9CSU5ESU5HICAgICAgICAgICA6IDB4OENBNyxcbiAgICBNQVhfUkVOREVSQlVGRkVSX1NJWkUgICAgICAgICAgOiAweDg0RTgsXG5cbiAgICBJTlZBTElEX0ZSQU1FQlVGRkVSX09QRVJBVElPTiAgOiAweDA1MDYsXG5cbiAgICAvKiBXZWJHTC1zcGVjaWZpYyBlbnVtcyAqL1xuICAgIFVOUEFDS19GTElQX1lfV0VCR0wgICAgICAgICAgICA6IDB4OTI0MCxcbiAgICBVTlBBQ0tfUFJFTVVMVElQTFlfQUxQSEFfV0VCR0wgOiAweDkyNDEsXG4gICAgQ09OVEVYVF9MT1NUX1dFQkdMICAgICAgICAgICAgIDogMHg5MjQyLFxuICAgIFVOUEFDS19DT0xPUlNQQUNFX0NPTlZFUlNJT05fV0VCR0wgOiAweDkyNDMsXG4gICAgQlJPV1NFUl9ERUZBVUxUX1dFQkdMICAgICAgICAgIDogMHg5MjQ0LFxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb3JlL2dsZW51bS5qc1xuLy8gbW9kdWxlIGlkID0gOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set;\nvar vec3Copy = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy;\n\n/**\n * Axis aligned bounding box\n * @constructor\n * @alias clay.BoundingBox\n * @param {clay.Vector3} [min]\n * @param {clay.Vector3} [max]\n */\nvar BoundingBox = function (min, max) {\n\n    /**\n     * Minimum coords of bounding box\n     * @type {clay.Vector3}\n     */\n    this.min = min || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](Infinity, Infinity, Infinity);\n\n    /**\n     * Maximum coords of bounding box\n     * @type {clay.Vector3}\n     */\n    this.max = max || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](-Infinity, -Infinity, -Infinity);\n\n    this.vertices = null;\n};\n\nBoundingBox.prototype = {\n\n    constructor: BoundingBox,\n    /**\n     * Update min and max coords from a vertices array\n     * @param  {array} vertices\n     */\n    updateFromVertices: function (vertices) {\n        if (vertices.length > 0) {\n            var min = this.min;\n            var max = this.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            vec3Copy(minArr, vertices[0]);\n            vec3Copy(maxArr, vertices[0]);\n            for (var i = 1; i < vertices.length; i++) {\n                var vertex = vertices[i];\n\n                if (vertex[0] < minArr[0]) { minArr[0] = vertex[0]; }\n                if (vertex[1] < minArr[1]) { minArr[1] = vertex[1]; }\n                if (vertex[2] < minArr[2]) { minArr[2] = vertex[2]; }\n\n                if (vertex[0] > maxArr[0]) { maxArr[0] = vertex[0]; }\n                if (vertex[1] > maxArr[1]) { maxArr[1] = vertex[1]; }\n                if (vertex[2] > maxArr[2]) { maxArr[2] = vertex[2]; }\n            }\n            min._dirty = true;\n            max._dirty = true;\n        }\n    },\n\n    /**\n     * Union operation with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    union: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].min(min.array, min.array, bbox.min.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].max(max.array, max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * Intersection operation with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    intersection: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].max(min.array, min.array, bbox.min.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].min(max.array, max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * If intersect with another bounding box\n     * @param  {clay.BoundingBox} bbox\n     * @return {boolean}\n     */\n    intersectBoundingBox: function (bbox) {\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _min2 = bbox.min.array;\n        var _max2 = bbox.max.array;\n\n        return ! (_min[0] > _max2[0] || _min[1] > _max2[1] || _min[2] > _max2[2]\n            || _max[0] < _min2[0] || _max[1] < _min2[1] || _max[2] < _min2[2]);\n    },\n\n    /**\n     * If contain another bounding box entirely\n     * @param  {clay.BoundingBox} bbox\n     * @return {boolean}\n     */\n    containBoundingBox: function (bbox) {\n\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _min2 = bbox.min.array;\n        var _max2 = bbox.max.array;\n\n        return _min[0] <= _min2[0] && _min[1] <= _min2[1] && _min[2] <= _min2[2]\n            && _max[0] >= _max2[0] && _max[1] >= _max2[1] && _max[2] >= _max2[2];\n    },\n\n    /**\n     * If contain point entirely\n     * @param  {clay.Vector3} point\n     * @return {boolean}\n     */\n    containPoint: function (p) {\n        var _min = this.min.array;\n        var _max = this.max.array;\n\n        var _p = p.array;\n\n        return _min[0] <= _p[0] && _min[1] <= _p[1] && _min[2] <= _p[2]\n            && _max[0] >= _p[0] && _max[1] >= _p[1] && _max[2] >= _p[2];\n    },\n\n    /**\n     * If bounding box is finite\n     */\n    isFinite: function () {\n        var _min = this.min.array;\n        var _max = this.max.array;\n        return isFinite(_min[0]) && isFinite(_min[1]) && isFinite(_min[2])\n            && isFinite(_max[0]) && isFinite(_max[1]) && isFinite(_max[2]);\n    },\n\n    /**\n     * Apply an affine transform matrix to the bounding box\n     * @param  {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n        this.transformFrom(this, matrix);\n    },\n\n    /**\n     * Get from another bounding box and an affine transform matrix.\n     * @param {clay.BoundingBox} source\n     * @param {clay.Matrix4} matrix\n     */\n    transformFrom: (function () {\n        // http://dev.theomader.com/transform-bounding-boxes/\n        var xa = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var xb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var ya = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var yb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var za = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var zb = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function (source, matrix) {\n            var min = source.min.array;\n            var max = source.max.array;\n\n            var m = matrix.array;\n\n            xa[0] = m[0] * min[0]; xa[1] = m[1] * min[0]; xa[2] = m[2] * min[0];\n            xb[0] = m[0] * max[0]; xb[1] = m[1] * max[0]; xb[2] = m[2] * max[0];\n\n            ya[0] = m[4] * min[1]; ya[1] = m[5] * min[1]; ya[2] = m[6] * min[1];\n            yb[0] = m[4] * max[1]; yb[1] = m[5] * max[1]; yb[2] = m[6] * max[1];\n\n            za[0] = m[8] * min[2]; za[1] = m[9] * min[2]; za[2] = m[10] * min[2];\n            zb[0] = m[8] * max[2]; zb[1] = m[9] * max[2]; zb[2] = m[10] * max[2];\n\n            min = this.min.array;\n            max = this.max.array;\n            min[0] = Math.min(xa[0], xb[0]) + Math.min(ya[0], yb[0]) + Math.min(za[0], zb[0]) + m[12];\n            min[1] = Math.min(xa[1], xb[1]) + Math.min(ya[1], yb[1]) + Math.min(za[1], zb[1]) + m[13];\n            min[2] = Math.min(xa[2], xb[2]) + Math.min(ya[2], yb[2]) + Math.min(za[2], zb[2]) + m[14];\n\n            max[0] = Math.max(xa[0], xb[0]) + Math.max(ya[0], yb[0]) + Math.max(za[0], zb[0]) + m[12];\n            max[1] = Math.max(xa[1], xb[1]) + Math.max(ya[1], yb[1]) + Math.max(za[1], zb[1]) + m[13];\n            max[2] = Math.max(xa[2], xb[2]) + Math.max(ya[2], yb[2]) + Math.max(za[2], zb[2]) + m[14];\n\n            this.min._dirty = true;\n            this.max._dirty = true;\n\n            return this;\n        };\n    })(),\n\n    /**\n     * Apply a projection matrix to the bounding box\n     * @param  {clay.Matrix4} matrix\n     */\n    applyProjection: function (matrix) {\n        var min = this.min.array;\n        var max = this.max.array;\n\n        var m = matrix.array;\n        // min in min z\n        var v10 = min[0];\n        var v11 = min[1];\n        var v12 = min[2];\n        // max in min z\n        var v20 = max[0];\n        var v21 = max[1];\n        var v22 = min[2];\n        // max in max z\n        var v30 = max[0];\n        var v31 = max[1];\n        var v32 = max[2];\n\n        if (m[15] === 1) {  // Orthographic projection\n            min[0] = m[0] * v10 + m[12];\n            min[1] = m[5] * v11 + m[13];\n            max[2] = m[10] * v12 + m[14];\n\n            max[0] = m[0] * v30 + m[12];\n            max[1] = m[5] * v31 + m[13];\n            min[2] = m[10] * v32 + m[14];\n        }\n        else {\n            var w = -1 / v12;\n            min[0] = m[0] * v10 * w;\n            min[1] = m[5] * v11 * w;\n            max[2] = (m[10] * v12 + m[14]) * w;\n\n            w = -1 / v22;\n            max[0] = m[0] * v20 * w;\n            max[1] = m[5] * v21 * w;\n\n            w = -1 / v32;\n            min[2] = (m[10] * v32 + m[14]) * w;\n        }\n        this.min._dirty = true;\n        this.max._dirty = true;\n\n        return this;\n    },\n\n    updateVertices: function () {\n        var vertices = this.vertices;\n        if (!vertices) {\n            // Cube vertices\n            vertices = [];\n            for (var i = 0; i < 8; i++) {\n                vertices[i] = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].fromValues(0, 0, 0);\n            }\n\n            /**\n             * Eight coords of bounding box\n             * @type {Float32Array[]}\n             */\n            this.vertices = vertices;\n        }\n        var min = this.min.array;\n        var max = this.max.array;\n        //--- min z\n        // min x\n        vec3Set(vertices[0], min[0], min[1], min[2]);\n        vec3Set(vertices[1], min[0], max[1], min[2]);\n        // max x\n        vec3Set(vertices[2], max[0], min[1], min[2]);\n        vec3Set(vertices[3], max[0], max[1], min[2]);\n\n        //-- max z\n        vec3Set(vertices[4], min[0], min[1], max[2]);\n        vec3Set(vertices[5], min[0], max[1], max[2]);\n        vec3Set(vertices[6], max[0], min[1], max[2]);\n        vec3Set(vertices[7], max[0], max[1], max[2]);\n\n        return this;\n    },\n    /**\n     * Copy values from another bounding box\n     * @param  {clay.BoundingBox} bbox\n     */\n    copy: function (bbox) {\n        var min = this.min;\n        var max = this.max;\n        vec3Copy(min.array, bbox.min.array);\n        vec3Copy(max.array, bbox.max.array);\n        min._dirty = true;\n        max._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new bounding box\n     * @return {clay.BoundingBox}\n     */\n    clone: function () {\n        var boundingBox = new BoundingBox();\n        boundingBox.copy(this);\n        return boundingBox;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (BoundingBox);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8vVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9Cb3VuZGluZ0JveC5qcz8wNzg5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMyc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxudmFyIHZlYzNTZXQgPSB2ZWMzLnNldDtcbnZhciB2ZWMzQ29weSA9IHZlYzMuY29weTtcblxuLyoqXG4gKiBBeGlzIGFsaWduZWQgYm91bmRpbmcgYm94XG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LkJvdW5kaW5nQm94XG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW21pbl1cbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBbbWF4XVxuICovXG52YXIgQm91bmRpbmdCb3ggPSBmdW5jdGlvbiAobWluLCBtYXgpIHtcblxuICAgIC8qKlxuICAgICAqIE1pbmltdW0gY29vcmRzIG9mIGJvdW5kaW5nIGJveFxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5taW4gPSBtaW4gfHwgbmV3IFZlY3RvcjMoSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eSk7XG5cbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIGNvb3JkcyBvZiBib3VuZGluZyBib3hcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMubWF4ID0gbWF4IHx8IG5ldyBWZWN0b3IzKC1JbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHkpO1xuXG4gICAgdGhpcy52ZXJ0aWNlcyA9IG51bGw7XG59O1xuXG5Cb3VuZGluZ0JveC5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogQm91bmRpbmdCb3gsXG4gICAgLyoqXG4gICAgICogVXBkYXRlIG1pbiBhbmQgbWF4IGNvb3JkcyBmcm9tIGEgdmVydGljZXMgYXJyYXlcbiAgICAgKiBAcGFyYW0gIHthcnJheX0gdmVydGljZXNcbiAgICAgKi9cbiAgICB1cGRhdGVGcm9tVmVydGljZXM6IGZ1bmN0aW9uICh2ZXJ0aWNlcykge1xuICAgICAgICBpZiAodmVydGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIG1pbiA9IHRoaXMubWluO1xuICAgICAgICAgICAgdmFyIG1heCA9IHRoaXMubWF4O1xuICAgICAgICAgICAgdmFyIG1pbkFyciA9IG1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXhBcnIgPSBtYXguYXJyYXk7XG4gICAgICAgICAgICB2ZWMzQ29weShtaW5BcnIsIHZlcnRpY2VzWzBdKTtcbiAgICAgICAgICAgIHZlYzNDb3B5KG1heEFyciwgdmVydGljZXNbMF0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCB2ZXJ0aWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciB2ZXJ0ZXggPSB2ZXJ0aWNlc1tpXTtcblxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0ZXhbMF0gPCBtaW5BcnJbMF0pIHsgbWluQXJyWzBdID0gdmVydGV4WzBdOyB9XG4gICAgICAgICAgICAgICAgaWYgKHZlcnRleFsxXSA8IG1pbkFyclsxXSkgeyBtaW5BcnJbMV0gPSB2ZXJ0ZXhbMV07IH1cbiAgICAgICAgICAgICAgICBpZiAodmVydGV4WzJdIDwgbWluQXJyWzJdKSB7IG1pbkFyclsyXSA9IHZlcnRleFsyXTsgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHZlcnRleFswXSA+IG1heEFyclswXSkgeyBtYXhBcnJbMF0gPSB2ZXJ0ZXhbMF07IH1cbiAgICAgICAgICAgICAgICBpZiAodmVydGV4WzFdID4gbWF4QXJyWzFdKSB7IG1heEFyclsxXSA9IHZlcnRleFsxXTsgfVxuICAgICAgICAgICAgICAgIGlmICh2ZXJ0ZXhbMl0gPiBtYXhBcnJbMl0pIHsgbWF4QXJyWzJdID0gdmVydGV4WzJdOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtaW4uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIG1heC5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVuaW9uIG9wZXJhdGlvbiB3aXRoIGFub3RoZXIgYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtICB7Y2xheS5Cb3VuZGluZ0JveH0gYmJveFxuICAgICAqL1xuICAgIHVuaW9uOiBmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICB2YXIgbWluID0gdGhpcy5taW47XG4gICAgICAgIHZhciBtYXggPSB0aGlzLm1heDtcbiAgICAgICAgdmVjMy5taW4obWluLmFycmF5LCBtaW4uYXJyYXksIGJib3gubWluLmFycmF5KTtcbiAgICAgICAgdmVjMy5tYXgobWF4LmFycmF5LCBtYXguYXJyYXksIGJib3gubWF4LmFycmF5KTtcbiAgICAgICAgbWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIG1heC5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0aW9uIG9wZXJhdGlvbiB3aXRoIGFub3RoZXIgYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtICB7Y2xheS5Cb3VuZGluZ0JveH0gYmJveFxuICAgICAqL1xuICAgIGludGVyc2VjdGlvbjogZnVuY3Rpb24gKGJib3gpIHtcbiAgICAgICAgdmFyIG1pbiA9IHRoaXMubWluO1xuICAgICAgICB2YXIgbWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIHZlYzMubWF4KG1pbi5hcnJheSwgbWluLmFycmF5LCBiYm94Lm1pbi5hcnJheSk7XG4gICAgICAgIHZlYzMubWluKG1heC5hcnJheSwgbWF4LmFycmF5LCBiYm94Lm1heC5hcnJheSk7XG4gICAgICAgIG1pbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICBtYXguX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIGludGVyc2VjdCB3aXRoIGFub3RoZXIgYm91bmRpbmcgYm94XG4gICAgICogQHBhcmFtICB7Y2xheS5Cb3VuZGluZ0JveH0gYmJveFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaW50ZXJzZWN0Qm91bmRpbmdCb3g6IGZ1bmN0aW9uIChiYm94KSB7XG4gICAgICAgIHZhciBfbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4ID0gdGhpcy5tYXguYXJyYXk7XG5cbiAgICAgICAgdmFyIF9taW4yID0gYmJveC5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4MiA9IGJib3gubWF4LmFycmF5O1xuXG4gICAgICAgIHJldHVybiAhIChfbWluWzBdID4gX21heDJbMF0gfHwgX21pblsxXSA+IF9tYXgyWzFdIHx8IF9taW5bMl0gPiBfbWF4MlsyXVxuICAgICAgICAgICAgfHwgX21heFswXSA8IF9taW4yWzBdIHx8IF9tYXhbMV0gPCBfbWluMlsxXSB8fCBfbWF4WzJdIDwgX21pbjJbMl0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiBjb250YWluIGFub3RoZXIgYm91bmRpbmcgYm94IGVudGlyZWx5XG4gICAgICogQHBhcmFtICB7Y2xheS5Cb3VuZGluZ0JveH0gYmJveFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgY29udGFpbkJvdW5kaW5nQm94OiBmdW5jdGlvbiAoYmJveCkge1xuXG4gICAgICAgIHZhciBfbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4ID0gdGhpcy5tYXguYXJyYXk7XG5cbiAgICAgICAgdmFyIF9taW4yID0gYmJveC5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4MiA9IGJib3gubWF4LmFycmF5O1xuXG4gICAgICAgIHJldHVybiBfbWluWzBdIDw9IF9taW4yWzBdICYmIF9taW5bMV0gPD0gX21pbjJbMV0gJiYgX21pblsyXSA8PSBfbWluMlsyXVxuICAgICAgICAgICAgJiYgX21heFswXSA+PSBfbWF4MlswXSAmJiBfbWF4WzFdID49IF9tYXgyWzFdICYmIF9tYXhbMl0gPj0gX21heDJbMl07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIGNvbnRhaW4gcG9pbnQgZW50aXJlbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHBvaW50XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBjb250YWluUG9pbnQ6IGZ1bmN0aW9uIChwKSB7XG4gICAgICAgIHZhciBfbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBfbWF4ID0gdGhpcy5tYXguYXJyYXk7XG5cbiAgICAgICAgdmFyIF9wID0gcC5hcnJheTtcblxuICAgICAgICByZXR1cm4gX21pblswXSA8PSBfcFswXSAmJiBfbWluWzFdIDw9IF9wWzFdICYmIF9taW5bMl0gPD0gX3BbMl1cbiAgICAgICAgICAgICYmIF9tYXhbMF0gPj0gX3BbMF0gJiYgX21heFsxXSA+PSBfcFsxXSAmJiBfbWF4WzJdID49IF9wWzJdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiBib3VuZGluZyBib3ggaXMgZmluaXRlXG4gICAgICovXG4gICAgaXNGaW5pdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9taW4gPSB0aGlzLm1pbi5hcnJheTtcbiAgICAgICAgdmFyIF9tYXggPSB0aGlzLm1heC5hcnJheTtcbiAgICAgICAgcmV0dXJuIGlzRmluaXRlKF9taW5bMF0pICYmIGlzRmluaXRlKF9taW5bMV0pICYmIGlzRmluaXRlKF9taW5bMl0pXG4gICAgICAgICAgICAmJiBpc0Zpbml0ZShfbWF4WzBdKSAmJiBpc0Zpbml0ZShfbWF4WzFdKSAmJiBpc0Zpbml0ZShfbWF4WzJdKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXBwbHkgYW4gYWZmaW5lIHRyYW5zZm9ybSBtYXRyaXggdG8gdGhlIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbWF0cml4XG4gICAgICovXG4gICAgYXBwbHlUcmFuc2Zvcm06IGZ1bmN0aW9uIChtYXRyaXgpIHtcbiAgICAgICAgdGhpcy50cmFuc2Zvcm1Gcm9tKHRoaXMsIG1hdHJpeCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBmcm9tIGFub3RoZXIgYm91bmRpbmcgYm94IGFuZCBhbiBhZmZpbmUgdHJhbnNmb3JtIG1hdHJpeC5cbiAgICAgKiBAcGFyYW0ge2NsYXkuQm91bmRpbmdCb3h9IHNvdXJjZVxuICAgICAqIEBwYXJhbSB7Y2xheS5NYXRyaXg0fSBtYXRyaXhcbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1Gcm9tOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBodHRwOi8vZGV2LnRoZW9tYWRlci5jb20vdHJhbnNmb3JtLWJvdW5kaW5nLWJveGVzL1xuICAgICAgICB2YXIgeGEgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgeGIgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgeWEgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgeWIgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgemEgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgemIgPSB2ZWMzLmNyZWF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoc291cmNlLCBtYXRyaXgpIHtcbiAgICAgICAgICAgIHZhciBtaW4gPSBzb3VyY2UubWluLmFycmF5O1xuICAgICAgICAgICAgdmFyIG1heCA9IHNvdXJjZS5tYXguYXJyYXk7XG5cbiAgICAgICAgICAgIHZhciBtID0gbWF0cml4LmFycmF5O1xuXG4gICAgICAgICAgICB4YVswXSA9IG1bMF0gKiBtaW5bMF07IHhhWzFdID0gbVsxXSAqIG1pblswXTsgeGFbMl0gPSBtWzJdICogbWluWzBdO1xuICAgICAgICAgICAgeGJbMF0gPSBtWzBdICogbWF4WzBdOyB4YlsxXSA9IG1bMV0gKiBtYXhbMF07IHhiWzJdID0gbVsyXSAqIG1heFswXTtcblxuICAgICAgICAgICAgeWFbMF0gPSBtWzRdICogbWluWzFdOyB5YVsxXSA9IG1bNV0gKiBtaW5bMV07IHlhWzJdID0gbVs2XSAqIG1pblsxXTtcbiAgICAgICAgICAgIHliWzBdID0gbVs0XSAqIG1heFsxXTsgeWJbMV0gPSBtWzVdICogbWF4WzFdOyB5YlsyXSA9IG1bNl0gKiBtYXhbMV07XG5cbiAgICAgICAgICAgIHphWzBdID0gbVs4XSAqIG1pblsyXTsgemFbMV0gPSBtWzldICogbWluWzJdOyB6YVsyXSA9IG1bMTBdICogbWluWzJdO1xuICAgICAgICAgICAgemJbMF0gPSBtWzhdICogbWF4WzJdOyB6YlsxXSA9IG1bOV0gKiBtYXhbMl07IHpiWzJdID0gbVsxMF0gKiBtYXhbMl07XG5cbiAgICAgICAgICAgIG1pbiA9IHRoaXMubWluLmFycmF5O1xuICAgICAgICAgICAgbWF4ID0gdGhpcy5tYXguYXJyYXk7XG4gICAgICAgICAgICBtaW5bMF0gPSBNYXRoLm1pbih4YVswXSwgeGJbMF0pICsgTWF0aC5taW4oeWFbMF0sIHliWzBdKSArIE1hdGgubWluKHphWzBdLCB6YlswXSkgKyBtWzEyXTtcbiAgICAgICAgICAgIG1pblsxXSA9IE1hdGgubWluKHhhWzFdLCB4YlsxXSkgKyBNYXRoLm1pbih5YVsxXSwgeWJbMV0pICsgTWF0aC5taW4oemFbMV0sIHpiWzFdKSArIG1bMTNdO1xuICAgICAgICAgICAgbWluWzJdID0gTWF0aC5taW4oeGFbMl0sIHhiWzJdKSArIE1hdGgubWluKHlhWzJdLCB5YlsyXSkgKyBNYXRoLm1pbih6YVsyXSwgemJbMl0pICsgbVsxNF07XG5cbiAgICAgICAgICAgIG1heFswXSA9IE1hdGgubWF4KHhhWzBdLCB4YlswXSkgKyBNYXRoLm1heCh5YVswXSwgeWJbMF0pICsgTWF0aC5tYXgoemFbMF0sIHpiWzBdKSArIG1bMTJdO1xuICAgICAgICAgICAgbWF4WzFdID0gTWF0aC5tYXgoeGFbMV0sIHhiWzFdKSArIE1hdGgubWF4KHlhWzFdLCB5YlsxXSkgKyBNYXRoLm1heCh6YVsxXSwgemJbMV0pICsgbVsxM107XG4gICAgICAgICAgICBtYXhbMl0gPSBNYXRoLm1heCh4YVsyXSwgeGJbMl0pICsgTWF0aC5tYXgoeWFbMl0sIHliWzJdKSArIE1hdGgubWF4KHphWzJdLCB6YlsyXSkgKyBtWzE0XTtcblxuICAgICAgICAgICAgdGhpcy5taW4uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMubWF4Ll9kaXJ0eSA9IHRydWU7XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBBcHBseSBhIHByb2plY3Rpb24gbWF0cml4IHRvIHRoZSBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG1hdHJpeFxuICAgICAqL1xuICAgIGFwcGx5UHJvamVjdGlvbjogZnVuY3Rpb24gKG1hdHJpeCkge1xuICAgICAgICB2YXIgbWluID0gdGhpcy5taW4uYXJyYXk7XG4gICAgICAgIHZhciBtYXggPSB0aGlzLm1heC5hcnJheTtcblxuICAgICAgICB2YXIgbSA9IG1hdHJpeC5hcnJheTtcbiAgICAgICAgLy8gbWluIGluIG1pbiB6XG4gICAgICAgIHZhciB2MTAgPSBtaW5bMF07XG4gICAgICAgIHZhciB2MTEgPSBtaW5bMV07XG4gICAgICAgIHZhciB2MTIgPSBtaW5bMl07XG4gICAgICAgIC8vIG1heCBpbiBtaW4gelxuICAgICAgICB2YXIgdjIwID0gbWF4WzBdO1xuICAgICAgICB2YXIgdjIxID0gbWF4WzFdO1xuICAgICAgICB2YXIgdjIyID0gbWluWzJdO1xuICAgICAgICAvLyBtYXggaW4gbWF4IHpcbiAgICAgICAgdmFyIHYzMCA9IG1heFswXTtcbiAgICAgICAgdmFyIHYzMSA9IG1heFsxXTtcbiAgICAgICAgdmFyIHYzMiA9IG1heFsyXTtcblxuICAgICAgICBpZiAobVsxNV0gPT09IDEpIHsgIC8vIE9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uXG4gICAgICAgICAgICBtaW5bMF0gPSBtWzBdICogdjEwICsgbVsxMl07XG4gICAgICAgICAgICBtaW5bMV0gPSBtWzVdICogdjExICsgbVsxM107XG4gICAgICAgICAgICBtYXhbMl0gPSBtWzEwXSAqIHYxMiArIG1bMTRdO1xuXG4gICAgICAgICAgICBtYXhbMF0gPSBtWzBdICogdjMwICsgbVsxMl07XG4gICAgICAgICAgICBtYXhbMV0gPSBtWzVdICogdjMxICsgbVsxM107XG4gICAgICAgICAgICBtaW5bMl0gPSBtWzEwXSAqIHYzMiArIG1bMTRdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHcgPSAtMSAvIHYxMjtcbiAgICAgICAgICAgIG1pblswXSA9IG1bMF0gKiB2MTAgKiB3O1xuICAgICAgICAgICAgbWluWzFdID0gbVs1XSAqIHYxMSAqIHc7XG4gICAgICAgICAgICBtYXhbMl0gPSAobVsxMF0gKiB2MTIgKyBtWzE0XSkgKiB3O1xuXG4gICAgICAgICAgICB3ID0gLTEgLyB2MjI7XG4gICAgICAgICAgICBtYXhbMF0gPSBtWzBdICogdjIwICogdztcbiAgICAgICAgICAgIG1heFsxXSA9IG1bNV0gKiB2MjEgKiB3O1xuXG4gICAgICAgICAgICB3ID0gLTEgLyB2MzI7XG4gICAgICAgICAgICBtaW5bMl0gPSAobVsxMF0gKiB2MzIgKyBtWzE0XSkgKiB3O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHRoaXMubWF4Ll9kaXJ0eSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHVwZGF0ZVZlcnRpY2VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG4gICAgICAgIGlmICghdmVydGljZXMpIHtcbiAgICAgICAgICAgIC8vIEN1YmUgdmVydGljZXNcbiAgICAgICAgICAgIHZlcnRpY2VzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZlcnRpY2VzW2ldID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVpZ2h0IGNvb3JkcyBvZiBib3VuZGluZyBib3hcbiAgICAgICAgICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXlbXX1cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy52ZXJ0aWNlcyA9IHZlcnRpY2VzO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtaW4gPSB0aGlzLm1pbi5hcnJheTtcbiAgICAgICAgdmFyIG1heCA9IHRoaXMubWF4LmFycmF5O1xuICAgICAgICAvLy0tLSBtaW4gelxuICAgICAgICAvLyBtaW4geFxuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzBdLCBtaW5bMF0sIG1pblsxXSwgbWluWzJdKTtcbiAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1sxXSwgbWluWzBdLCBtYXhbMV0sIG1pblsyXSk7XG4gICAgICAgIC8vIG1heCB4XG4gICAgICAgIHZlYzNTZXQodmVydGljZXNbMl0sIG1heFswXSwgbWluWzFdLCBtaW5bMl0pO1xuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzNdLCBtYXhbMF0sIG1heFsxXSwgbWluWzJdKTtcblxuICAgICAgICAvLy0tIG1heCB6XG4gICAgICAgIHZlYzNTZXQodmVydGljZXNbNF0sIG1pblswXSwgbWluWzFdLCBtYXhbMl0pO1xuICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzVdLCBtaW5bMF0sIG1heFsxXSwgbWF4WzJdKTtcbiAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s2XSwgbWF4WzBdLCBtaW5bMV0sIG1heFsyXSk7XG4gICAgICAgIHZlYzNTZXQodmVydGljZXNbN10sIG1heFswXSwgbWF4WzFdLCBtYXhbMl0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ29weSB2YWx1ZXMgZnJvbSBhbm90aGVyIGJvdW5kaW5nIGJveFxuICAgICAqIEBwYXJhbSAge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbiAoYmJveCkge1xuICAgICAgICB2YXIgbWluID0gdGhpcy5taW47XG4gICAgICAgIHZhciBtYXggPSB0aGlzLm1heDtcbiAgICAgICAgdmVjM0NvcHkobWluLmFycmF5LCBiYm94Lm1pbi5hcnJheSk7XG4gICAgICAgIHZlYzNDb3B5KG1heC5hcnJheSwgYmJveC5tYXguYXJyYXkpO1xuICAgICAgICBtaW4uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgbWF4Ll9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBib3VuZGluZyBib3hcbiAgICAgKiBAcmV0dXJuIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICBib3VuZGluZ0JveC5jb3B5KHRoaXMpO1xuICAgICAgICByZXR1cm4gYm91bmRpbmdCb3g7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgQm91bmRpbmdCb3g7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9Cb3VuZGluZ0JveC5qc1xuLy8gbW9kdWxlIGlkID0gOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_util__ = __webpack_require__(56);\n\n\n\n\nvar isPowerOfTwo = __WEBPACK_IMPORTED_MODULE_3__math_util__[\"a\" /* default */].isPowerOfTwo;\n\nfunction nearestPowerOfTwo(val) {\n    return Math.pow(2, Math.round(Math.log(val) / Math.LN2));\n}\nfunction convertTextureToPowerOfTwo(texture, canvas) {\n    // var canvas = document.createElement('canvas');\n    var width = nearestPowerOfTwo(texture.width);\n    var height = nearestPowerOfTwo(texture.height);\n    canvas = canvas || document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.drawImage(texture.image, 0, 0, width, height);\n\n    return canvas;\n}\n\n/**\n * @constructor clay.Texture2D\n * @extends clay.Texture\n *\n * @example\n *     ...\n *     var mat = new clay.Material({\n *         shader: clay.shader.library.get('clay.phong', 'diffuseMap')\n *     });\n *     var diffuseMap = new clay.Texture2D();\n *     diffuseMap.load('assets/textures/diffuse.jpg');\n *     mat.set('diffuseMap', diffuseMap);\n *     ...\n *     diffuseMap.success(function () {\n *         // Wait for the diffuse texture loaded\n *         animation.on('frame', function (frameTime) {\n *             renderer.render(scene, camera);\n *         });\n *     });\n */\nvar Texture2D = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Texture2D# */ {\n        /**\n         * @type {?HTMLImageElement|HTMLCanvasElemnet}\n         */\n        // TODO mark dirty when assigned.\n        image: null,\n        /**\n         * Pixels data. Will be ignored if image is set.\n         * @type {?Uint8Array|Float32Array}\n         */\n        pixels: null,\n        /**\n         * @type {Array.<Object>}\n         * @example\n         *     [{\n         *         image: mipmap0,\n         *         pixels: null\n         *     }, {\n         *         image: mipmap1,\n         *         pixels: null\n         *     }, ....]\n         */\n        mipmaps: [],\n\n        /**\n         * If convert texture to power-of-two\n         * @type {boolean}\n         */\n        convertToPOT: false\n    };\n}, {\n\n    textureType: 'texture2D',\n\n    update: function (renderer) {\n\n        var _gl = renderer.gl;\n        _gl.bindTexture(_gl.TEXTURE_2D, this._cache.get('webgl_texture'));\n\n        this.updateCommon(renderer);\n\n        var glFormat = this.format;\n        var glType = this.type;\n\n        // Convert to pot is only available when using image/canvas/video element.\n        var convertToPOT = !!(this.convertToPOT\n            && !this.mipmaps.length && this.image\n            && (this.wrapS === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].REPEAT || this.wrapT === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].REPEAT)\n            && this.NPOT\n        );\n\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_S, convertToPOT ? this.wrapS : this.getAvailableWrapS());\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_WRAP_T, convertToPOT ? this.wrapT : this.getAvailableWrapT());\n\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MAG_FILTER, convertToPOT ? this.magFilter : this.getAvailableMagFilter());\n        _gl.texParameteri(_gl.TEXTURE_2D, _gl.TEXTURE_MIN_FILTER, convertToPOT ? this.minFilter : this.getAvailableMinFilter());\n\n        var anisotropicExt = renderer.getGLExtension('EXT_texture_filter_anisotropic');\n        if (anisotropicExt && this.anisotropic > 1) {\n            _gl.texParameterf(_gl.TEXTURE_2D, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, this.anisotropic);\n        }\n\n        // Fallback to float type if browser don't have half float extension\n        if (glType === 36193) {\n            var halfFloatExt = renderer.getGLExtension('OES_texture_half_float');\n            if (!halfFloatExt) {\n                glType = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n            }\n        }\n\n        if (this.mipmaps.length) {\n            var width = this.width;\n            var height = this.height;\n            for (var i = 0; i < this.mipmaps.length; i++) {\n                var mipmap = this.mipmaps[i];\n                this._updateTextureData(_gl, mipmap, i, width, height, glFormat, glType, false);\n                width /= 2;\n                height /= 2;\n            }\n        }\n        else {\n            this._updateTextureData(_gl, this, 0, this.width, this.height, glFormat, glType, convertToPOT);\n\n            if (this.useMipmap && (!this.NPOT || convertToPOT)) {\n                _gl.generateMipmap(_gl.TEXTURE_2D);\n            }\n        }\n\n        _gl.bindTexture(_gl.TEXTURE_2D, null);\n    },\n\n    _updateTextureData: function (_gl, data, level, width, height, glFormat, glType, convertToPOT) {\n        if (data.image) {\n            var imgData = data.image;\n            if (convertToPOT) {\n                this._potCanvas = convertTextureToPowerOfTwo(this, this._potCanvas);\n                imgData = this._potCanvas;\n            }\n            _gl.texImage2D(_gl.TEXTURE_2D, level, glFormat, glFormat, glType, imgData);\n        }\n        else {\n            // Can be used as a blank texture when writing render to texture(RTT)\n            if (\n                // S3TC\n                (glFormat <= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT5_EXT\n                    && glFormat >= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_S3TC_DXT1_EXT)\n                // ETC\n                || glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_ETC1_WEBGL\n                // PVRTC\n                || (glFormat >= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_PVRTC_4BPPV1_IMG\n                    && glFormat <= __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_PVRTC_2BPPV1_IMG)\n                // ATC\n                || (glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_ATC_WEBGL\n                    && glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL\n                    && glFormat === __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL)\n            ) {\n                _gl.compressedTexImage2D(_gl.TEXTURE_2D, level, glFormat, width, height, 0, data.pixels);\n            }\n            else {\n                // Is a render target if pixels is null\n                _gl.texImage2D(_gl.TEXTURE_2D, level, glFormat, width, height, 0, glFormat, glType, data.pixels);\n            }\n        }\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     * @memberOf clay.Texture2D.prototype\n     */\n    generateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        if (this.useMipmap && !this.NPOT) {\n            _gl.bindTexture(_gl.TEXTURE_2D, this._cache.get('webgl_texture'));\n            _gl.generateMipmap(_gl.TEXTURE_2D);\n        }\n    },\n\n    isPowerOfTwo: function () {\n        return isPowerOfTwo(this.width) && isPowerOfTwo(this.height);\n    },\n\n    isRenderable: function () {\n        if (this.image) {\n            return this.image.width > 0 && this.image.height > 0;\n        }\n        else {\n            return !!(this.width && this.height);\n        }\n    },\n\n    bind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, this.getWebGLTexture(renderer));\n    },\n\n    unbind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, null);\n    },\n\n    load: function (src, crossOrigin) {\n        var image = __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].createImage();\n        if (crossOrigin) {\n            image.crossOrigin = crossOrigin;\n        }\n        var self = this;\n        image.onload = function () {\n            self.dirty();\n            self.trigger('success', self);\n        };\n        image.onerror = function () {\n            self.trigger('error', self);\n        };\n\n        image.src = src;\n        this.image = image;\n\n        return this;\n    }\n});\n\nObject.defineProperty(Texture2D.prototype, 'width', {\n    get: function () {\n        if (this.image) {\n            return this.image.width;\n        }\n        return this._width;\n    },\n    set: function (value) {\n        if (this.image) {\n            console.warn('Texture from image can\\'t set width');\n        }\n        else {\n            if (this._width !== value) {\n                this.dirty();\n            }\n            this._width = value;\n        }\n    }\n});\nObject.defineProperty(Texture2D.prototype, 'height', {\n    get: function () {\n        if (this.image) {\n            return this.image.height;\n        }\n        return this._height;\n    },\n    set: function (value) {\n        if (this.image) {\n            console.warn('Texture from image can\\'t set height');\n        }\n        else {\n            if (this._height !== value) {\n                this.dirty();\n            }\n            this._height = value;\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Texture2D);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1RleHR1cmUyRC5qcz85MTU4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZXh0dXJlIGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4vY29yZS9nbGVudW0nO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuL2NvcmUvdmVuZG9yJztcbmltcG9ydCBtYXRoVXRpbCBmcm9tICcuL21hdGgvdXRpbCc7XG52YXIgaXNQb3dlck9mVHdvID0gbWF0aFV0aWwuaXNQb3dlck9mVHdvO1xuXG5mdW5jdGlvbiBuZWFyZXN0UG93ZXJPZlR3byh2YWwpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coMiwgTWF0aC5yb3VuZChNYXRoLmxvZyh2YWwpIC8gTWF0aC5MTjIpKTtcbn1cbmZ1bmN0aW9uIGNvbnZlcnRUZXh0dXJlVG9Qb3dlck9mVHdvKHRleHR1cmUsIGNhbnZhcykge1xuICAgIC8vIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB2YXIgd2lkdGggPSBuZWFyZXN0UG93ZXJPZlR3byh0ZXh0dXJlLndpZHRoKTtcbiAgICB2YXIgaGVpZ2h0ID0gbmVhcmVzdFBvd2VyT2ZUd28odGV4dHVyZS5oZWlnaHQpO1xuICAgIGNhbnZhcyA9IGNhbnZhcyB8fCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSB3aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBjdHguZHJhd0ltYWdlKHRleHR1cmUuaW1hZ2UsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgcmV0dXJuIGNhbnZhcztcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5UZXh0dXJlMkRcbiAqIEBleHRlbmRzIGNsYXkuVGV4dHVyZVxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgLi4uXG4gKiAgICAgdmFyIG1hdCA9IG5ldyBjbGF5Lk1hdGVyaWFsKHtcbiAqICAgICAgICAgc2hhZGVyOiBjbGF5LnNoYWRlci5saWJyYXJ5LmdldCgnY2xheS5waG9uZycsICdkaWZmdXNlTWFwJylcbiAqICAgICB9KTtcbiAqICAgICB2YXIgZGlmZnVzZU1hcCA9IG5ldyBjbGF5LlRleHR1cmUyRCgpO1xuICogICAgIGRpZmZ1c2VNYXAubG9hZCgnYXNzZXRzL3RleHR1cmVzL2RpZmZ1c2UuanBnJyk7XG4gKiAgICAgbWF0LnNldCgnZGlmZnVzZU1hcCcsIGRpZmZ1c2VNYXApO1xuICogICAgIC4uLlxuICogICAgIGRpZmZ1c2VNYXAuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gKiAgICAgICAgIC8vIFdhaXQgZm9yIHRoZSBkaWZmdXNlIHRleHR1cmUgbG9hZGVkXG4gKiAgICAgICAgIGFuaW1hdGlvbi5vbignZnJhbWUnLCBmdW5jdGlvbiAoZnJhbWVUaW1lKSB7XG4gKiAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gKiAgICAgICAgIH0pO1xuICogICAgIH0pO1xuICovXG52YXIgVGV4dHVyZTJEID0gVGV4dHVyZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuVGV4dHVyZTJEIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7P0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1uZXR9XG4gICAgICAgICAqL1xuICAgICAgICAvLyBUT0RPIG1hcmsgZGlydHkgd2hlbiBhc3NpZ25lZC5cbiAgICAgICAgaW1hZ2U6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQaXhlbHMgZGF0YS4gV2lsbCBiZSBpZ25vcmVkIGlmIGltYWdlIGlzIHNldC5cbiAgICAgICAgICogQHR5cGUgez9VaW50OEFycmF5fEZsb2F0MzJBcnJheX1cbiAgICAgICAgICovXG4gICAgICAgIHBpeGVsczogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48T2JqZWN0Pn1cbiAgICAgICAgICogQGV4YW1wbGVcbiAgICAgICAgICogICAgIFt7XG4gICAgICAgICAqICAgICAgICAgaW1hZ2U6IG1pcG1hcDAsXG4gICAgICAgICAqICAgICAgICAgcGl4ZWxzOiBudWxsXG4gICAgICAgICAqICAgICB9LCB7XG4gICAgICAgICAqICAgICAgICAgaW1hZ2U6IG1pcG1hcDEsXG4gICAgICAgICAqICAgICAgICAgcGl4ZWxzOiBudWxsXG4gICAgICAgICAqICAgICB9LCAuLi4uXVxuICAgICAgICAgKi9cbiAgICAgICAgbWlwbWFwczogW10sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGNvbnZlcnQgdGV4dHVyZSB0byBwb3dlci1vZi10d29cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBjb252ZXJ0VG9QT1Q6IGZhbHNlXG4gICAgfTtcbn0sIHtcblxuICAgIHRleHR1cmVUeXBlOiAndGV4dHVyZTJEJyxcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG5cbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsIHRoaXMuX2NhY2hlLmdldCgnd2ViZ2xfdGV4dHVyZScpKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZUNvbW1vbihyZW5kZXJlcik7XG5cbiAgICAgICAgdmFyIGdsRm9ybWF0ID0gdGhpcy5mb3JtYXQ7XG4gICAgICAgIHZhciBnbFR5cGUgPSB0aGlzLnR5cGU7XG5cbiAgICAgICAgLy8gQ29udmVydCB0byBwb3QgaXMgb25seSBhdmFpbGFibGUgd2hlbiB1c2luZyBpbWFnZS9jYW52YXMvdmlkZW8gZWxlbWVudC5cbiAgICAgICAgdmFyIGNvbnZlcnRUb1BPVCA9ICEhKHRoaXMuY29udmVydFRvUE9UXG4gICAgICAgICAgICAmJiAhdGhpcy5taXBtYXBzLmxlbmd0aCAmJiB0aGlzLmltYWdlXG4gICAgICAgICAgICAmJiAodGhpcy53cmFwUyA9PT0gVGV4dHVyZS5SRVBFQVQgfHwgdGhpcy53cmFwVCA9PT0gVGV4dHVyZS5SRVBFQVQpXG4gICAgICAgICAgICAmJiB0aGlzLk5QT1RcbiAgICAgICAgKTtcblxuICAgICAgICBfZ2wudGV4UGFyYW1ldGVyaShfZ2wuVEVYVFVSRV8yRCwgX2dsLlRFWFRVUkVfV1JBUF9TLCBjb252ZXJ0VG9QT1QgPyB0aGlzLndyYXBTIDogdGhpcy5nZXRBdmFpbGFibGVXcmFwUygpKTtcbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX1dSQVBfVCwgY29udmVydFRvUE9UID8gdGhpcy53cmFwVCA6IHRoaXMuZ2V0QXZhaWxhYmxlV3JhcFQoKSk7XG5cbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfMkQsIF9nbC5URVhUVVJFX01BR19GSUxURVIsIGNvbnZlcnRUb1BPVCA/IHRoaXMubWFnRmlsdGVyIDogdGhpcy5nZXRBdmFpbGFibGVNYWdGaWx0ZXIoKSk7XG4gICAgICAgIF9nbC50ZXhQYXJhbWV0ZXJpKF9nbC5URVhUVVJFXzJELCBfZ2wuVEVYVFVSRV9NSU5fRklMVEVSLCBjb252ZXJ0VG9QT1QgPyB0aGlzLm1pbkZpbHRlciA6IHRoaXMuZ2V0QXZhaWxhYmxlTWluRmlsdGVyKCkpO1xuXG4gICAgICAgIHZhciBhbmlzb3Ryb3BpY0V4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtcbiAgICAgICAgaWYgKGFuaXNvdHJvcGljRXh0ICYmIHRoaXMuYW5pc290cm9waWMgPiAxKSB7XG4gICAgICAgICAgICBfZ2wudGV4UGFyYW1ldGVyZihfZ2wuVEVYVFVSRV8yRCwgYW5pc290cm9waWNFeHQuVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsIHRoaXMuYW5pc290cm9waWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gZmxvYXQgdHlwZSBpZiBicm93c2VyIGRvbid0IGhhdmUgaGFsZiBmbG9hdCBleHRlbnNpb25cbiAgICAgICAgaWYgKGdsVHlwZSA9PT0gMzYxOTMpIHtcbiAgICAgICAgICAgIHZhciBoYWxmRmxvYXRFeHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO1xuICAgICAgICAgICAgaWYgKCFoYWxmRmxvYXRFeHQpIHtcbiAgICAgICAgICAgICAgICBnbFR5cGUgPSBnbGVudW0uRkxPQVQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5taXBtYXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5taXBtYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pcG1hcCA9IHRoaXMubWlwbWFwc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0dXJlRGF0YShfZ2wsIG1pcG1hcCwgaSwgd2lkdGgsIGhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHdpZHRoIC89IDI7XG4gICAgICAgICAgICAgICAgaGVpZ2h0IC89IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0dXJlRGF0YShfZ2wsIHRoaXMsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCBnbEZvcm1hdCwgZ2xUeXBlLCBjb252ZXJ0VG9QT1QpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy51c2VNaXBtYXAgJiYgKCF0aGlzLk5QT1QgfHwgY29udmVydFRvUE9UKSkge1xuICAgICAgICAgICAgICAgIF9nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV8yRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsIG51bGwpO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlVGV4dHVyZURhdGE6IGZ1bmN0aW9uIChfZ2wsIGRhdGEsIGxldmVsLCB3aWR0aCwgaGVpZ2h0LCBnbEZvcm1hdCwgZ2xUeXBlLCBjb252ZXJ0VG9QT1QpIHtcbiAgICAgICAgaWYgKGRhdGEuaW1hZ2UpIHtcbiAgICAgICAgICAgIHZhciBpbWdEYXRhID0gZGF0YS5pbWFnZTtcbiAgICAgICAgICAgIGlmIChjb252ZXJ0VG9QT1QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wb3RDYW52YXMgPSBjb252ZXJ0VGV4dHVyZVRvUG93ZXJPZlR3byh0aGlzLCB0aGlzLl9wb3RDYW52YXMpO1xuICAgICAgICAgICAgICAgIGltZ0RhdGEgPSB0aGlzLl9wb3RDYW52YXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBfZ2wudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCwgbGV2ZWwsIGdsRm9ybWF0LCBnbEZvcm1hdCwgZ2xUeXBlLCBpbWdEYXRhKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIENhbiBiZSB1c2VkIGFzIGEgYmxhbmsgdGV4dHVyZSB3aGVuIHdyaXRpbmcgcmVuZGVyIHRvIHRleHR1cmUoUlRUKVxuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgIC8vIFMzVENcbiAgICAgICAgICAgICAgICAoZ2xGb3JtYXQgPD0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfUzNUQ19EWFQ1X0VYVFxuICAgICAgICAgICAgICAgICAgICAmJiBnbEZvcm1hdCA+PSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCX1MzVENfRFhUMV9FWFQpXG4gICAgICAgICAgICAgICAgLy8gRVRDXG4gICAgICAgICAgICAgICAgfHwgZ2xGb3JtYXQgPT09IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JfRVRDMV9XRUJHTFxuICAgICAgICAgICAgICAgIC8vIFBWUlRDXG4gICAgICAgICAgICAgICAgfHwgKGdsRm9ybWF0ID49IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JfUFZSVENfNEJQUFYxX0lNR1xuICAgICAgICAgICAgICAgICAgICAmJiBnbEZvcm1hdCA8PSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9QVlJUQ18yQlBQVjFfSU1HKVxuICAgICAgICAgICAgICAgIC8vIEFUQ1xuICAgICAgICAgICAgICAgIHx8IChnbEZvcm1hdCA9PT0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9BVENfV0VCR0xcbiAgICAgICAgICAgICAgICAgICAgJiYgZ2xGb3JtYXQgPT09IFRleHR1cmUuQ09NUFJFU1NFRF9SR0JBX0FUQ19FWFBMSUNJVF9BTFBIQV9XRUJHTFxuICAgICAgICAgICAgICAgICAgICAmJiBnbEZvcm1hdCA9PT0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQkFfQVRDX0lOVEVSUE9MQVRFRF9BTFBIQV9XRUJHTClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIF9nbC5jb21wcmVzc2VkVGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCwgbGV2ZWwsIGdsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBkYXRhLnBpeGVscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBJcyBhIHJlbmRlciB0YXJnZXQgaWYgcGl4ZWxzIGlzIG51bGxcbiAgICAgICAgICAgICAgICBfZ2wudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV8yRCwgbGV2ZWwsIGdsRm9ybWF0LCB3aWR0aCwgaGVpZ2h0LCAwLCBnbEZvcm1hdCwgZ2xUeXBlLCBkYXRhLnBpeGVscyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5UZXh0dXJlMkQucHJvdG90eXBlXG4gICAgICovXG4gICAgZ2VuZXJhdGVNaXBtYXA6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIGlmICh0aGlzLnVzZU1pcG1hcCAmJiAhdGhpcy5OUE9UKSB7XG4gICAgICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfMkQsIHRoaXMuX2NhY2hlLmdldCgnd2ViZ2xfdGV4dHVyZScpKTtcbiAgICAgICAgICAgIF9nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV8yRCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgaXNQb3dlck9mVHdvOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBpc1Bvd2VyT2ZUd28odGhpcy53aWR0aCkgJiYgaXNQb3dlck9mVHdvKHRoaXMuaGVpZ2h0KTtcbiAgICB9LFxuXG4gICAgaXNSZW5kZXJhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZS53aWR0aCA+IDAgJiYgdGhpcy5pbWFnZS5oZWlnaHQgPiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuICEhKHRoaXMud2lkdGggJiYgdGhpcy5oZWlnaHQpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5nbC5iaW5kVGV4dHVyZShyZW5kZXJlci5nbC5URVhUVVJFXzJELCB0aGlzLmdldFdlYkdMVGV4dHVyZShyZW5kZXJlcikpO1xuICAgIH0sXG5cbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICByZW5kZXJlci5nbC5iaW5kVGV4dHVyZShyZW5kZXJlci5nbC5URVhUVVJFXzJELCBudWxsKTtcbiAgICB9LFxuXG4gICAgbG9hZDogZnVuY3Rpb24gKHNyYywgY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgdmFyIGltYWdlID0gdmVuZG9yLmNyZWF0ZUltYWdlKCk7XG4gICAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICAgICAgaW1hZ2UuY3Jvc3NPcmlnaW4gPSBjcm9zc09yaWdpbjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGltYWdlLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNlbGYuZGlydHkoKTtcbiAgICAgICAgICAgIHNlbGYudHJpZ2dlcignc3VjY2VzcycsIHNlbGYpO1xuICAgICAgICB9O1xuICAgICAgICBpbWFnZS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdlcnJvcicsIHNlbGYpO1xuICAgICAgICB9O1xuXG4gICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgdGhpcy5pbWFnZSA9IGltYWdlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoVGV4dHVyZTJELnByb3RvdHlwZSwgJ3dpZHRoJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2Uud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignVGV4dHVyZSBmcm9tIGltYWdlIGNhblxcJ3Qgc2V0IHdpZHRoJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fd2lkdGggIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fd2lkdGggPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmUyRC5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX2hlaWdodDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RleHR1cmUgZnJvbSBpbWFnZSBjYW5cXCd0IHNldCBoZWlnaHQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9oZWlnaHQgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5faGVpZ2h0ID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZTJEO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1RleHR1cmUyRC5qc1xuLy8gbW9kdWxlIGlkID0gMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var guid = 0;\n\nvar ArrayProto = Array.prototype;\nvar nativeForEach = ArrayProto.forEach;\n\n/**\n * Util functions\n * @namespace clay.core.util\n */\nvar util = {\n\n    /**\n     * Generate GUID\n     * @return {number}\n     * @memberOf clay.core.util\n     */\n    genGUID: function () {\n        return ++guid;\n    },\n    /**\n     * Relative path to absolute path\n     * @param  {string} path\n     * @param  {string} basePath\n     * @return {string}\n     * @memberOf clay.core.util\n     */\n    relative2absolute: function (path, basePath) {\n        if (!basePath || path.match(/^\\//)) {\n            return path;\n        }\n        var pathParts = path.split('/');\n        var basePathParts = basePath.split('/');\n\n        var item = pathParts[0];\n        while(item === '.' || item === '..') {\n            if (item === '..') {\n                basePathParts.pop();\n            }\n            pathParts.shift();\n            item = pathParts[0];\n        }\n        return basePathParts.join('/') + '/' + pathParts.join('/');\n    },\n\n    /**\n     * Extend target with source\n     * @param  {Object} target\n     * @param  {Object} source\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    extend: function (target, source) {\n        if (source) {\n            for (var name in source) {\n                if (source.hasOwnProperty(name)) {\n                    target[name] = source[name];\n                }\n            }\n        }\n        return target;\n    },\n\n    /**\n     * Extend properties to target if not exist.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    defaults: function (target, source) {\n        if (source) {\n            for (var propName in source) {\n                if (target[propName] === undefined) {\n                    target[propName] = source[propName];\n                }\n            }\n        }\n        return target;\n    },\n    /**\n     * Extend properties with a given property list to avoid for..in.. iteration.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @param  {Array.<string>} propList\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    extendWithPropList: function (target, source, propList) {\n        if (source) {\n            for (var i = 0; i < propList.length; i++) {\n                var propName = propList[i];\n                target[propName] = source[propName];\n            }\n        }\n        return target;\n    },\n    /**\n     * Extend properties to target if not exist. With a given property list avoid for..in.. iteration.\n     * @param  {Object} target\n     * @param  {Object} source\n     * @param  {Array.<string>} propList\n     * @return {Object}\n     * @memberOf clay.core.util\n     */\n    defaultsWithPropList: function (target, source, propList) {\n        if (source) {\n            for (var i = 0; i < propList.length; i++) {\n                var propName = propList[i];\n                if (target[propName] == null) {\n                    target[propName] = source[propName];\n                }\n            }\n        }\n        return target;\n    },\n    /**\n     * @param  {Object|Array} obj\n     * @param  {Function} iterator\n     * @param  {Object} [context]\n     * @memberOf clay.core.util\n     */\n    each: function (obj, iterator, context) {\n        if (!(obj && iterator)) {\n            return;\n        }\n        if (obj.forEach && obj.forEach === nativeForEach) {\n            obj.forEach(iterator, context);\n        }\n        else if (obj.length === + obj.length) {\n            for (var i = 0, len = obj.length; i < len; i++) {\n                iterator.call(context, obj[i], i, obj);\n            }\n        }\n        else {\n            for (var key in obj) {\n                if (obj.hasOwnProperty(key)) {\n                    iterator.call(context, obj[key], key, obj);\n                }\n            }\n        }\n    },\n\n    /**\n     * Is object\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isObject: function (obj) {\n        return obj === Object(obj);\n    },\n\n    /**\n     * Is array ?\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isArray: function (obj) {\n        return Array.isArray(obj);\n    },\n\n    /**\n     * Is array like, which have a length property\n     * @param  {}  obj\n     * @return {boolean}\n     * @memberOf clay.core.util\n     */\n    isArrayLike: function (obj) {\n        if (!obj) {\n            return false;\n        }\n        else {\n            return obj.length === + obj.length;\n        }\n    },\n\n    /**\n     * @param  {} obj\n     * @return {}\n     * @memberOf clay.core.util\n     */\n    clone: function (obj) {\n        if (!util.isObject(obj)) {\n            return obj;\n        }\n        else if (util.isArray(obj)) {\n            return obj.slice();\n        }\n        else if (util.isArrayLike(obj)) { // is typed array\n            var ret = new obj.constructor(obj.length);\n            for (var i = 0; i < obj.length; i++) {\n                ret[i] = obj[i];\n            }\n            return ret;\n        }\n        else {\n            return util.extend({}, obj);\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (util);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvdXRpbC5qcz9kZTY2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBndWlkID0gMDtcblxudmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG52YXIgbmF0aXZlRm9yRWFjaCA9IEFycmF5UHJvdG8uZm9yRWFjaDtcblxuLyoqXG4gKiBVdGlsIGZ1bmN0aW9uc1xuICogQG5hbWVzcGFjZSBjbGF5LmNvcmUudXRpbFxuICovXG52YXIgdXRpbCA9IHtcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIEdVSURcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgZ2VuR1VJRDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKytndWlkO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVsYXRpdmUgcGF0aCB0byBhYnNvbHV0ZSBwYXRoXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBiYXNlUGF0aFxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5jb3JlLnV0aWxcbiAgICAgKi9cbiAgICByZWxhdGl2ZTJhYnNvbHV0ZTogZnVuY3Rpb24gKHBhdGgsIGJhc2VQYXRoKSB7XG4gICAgICAgIGlmICghYmFzZVBhdGggfHwgcGF0aC5tYXRjaCgvXlxcLy8pKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aFBhcnRzID0gcGF0aC5zcGxpdCgnLycpO1xuICAgICAgICB2YXIgYmFzZVBhdGhQYXJ0cyA9IGJhc2VQYXRoLnNwbGl0KCcvJyk7XG5cbiAgICAgICAgdmFyIGl0ZW0gPSBwYXRoUGFydHNbMF07XG4gICAgICAgIHdoaWxlKGl0ZW0gPT09ICcuJyB8fCBpdGVtID09PSAnLi4nKSB7XG4gICAgICAgICAgICBpZiAoaXRlbSA9PT0gJy4uJykge1xuICAgICAgICAgICAgICAgIGJhc2VQYXRoUGFydHMucG9wKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXRoUGFydHMuc2hpZnQoKTtcbiAgICAgICAgICAgIGl0ZW0gPSBwYXRoUGFydHNbMF07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJhc2VQYXRoUGFydHMuam9pbignLycpICsgJy8nICsgcGF0aFBhcnRzLmpvaW4oJy8nKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIHRhcmdldCB3aXRoIHNvdXJjZVxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VyY2VcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgZXh0ZW5kOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9IHNvdXJjZVtuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRXh0ZW5kIHByb3BlcnRpZXMgdG8gdGFyZ2V0IGlmIG5vdCBleGlzdC5cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHRhcmdldFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gc291cmNlXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGRlZmF1bHRzOiBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRhcmdldFtwcm9wTmFtZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcE5hbWVdID0gc291cmNlW3Byb3BOYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEV4dGVuZCBwcm9wZXJ0aWVzIHdpdGggYSBnaXZlbiBwcm9wZXJ0eSBsaXN0IHRvIGF2b2lkIGZvci4uaW4uLiBpdGVyYXRpb24uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSB0YXJnZXRcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHNvdXJjZVxuICAgICAqIEBwYXJhbSAge0FycmF5LjxzdHJpbmc+fSBwcm9wTGlzdFxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5jb3JlLnV0aWxcbiAgICAgKi9cbiAgICBleHRlbmRXaXRoUHJvcExpc3Q6IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgcHJvcExpc3QpIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BMaXN0W2ldO1xuICAgICAgICAgICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSBzb3VyY2VbcHJvcE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBFeHRlbmQgcHJvcGVydGllcyB0byB0YXJnZXQgaWYgbm90IGV4aXN0LiBXaXRoIGEgZ2l2ZW4gcHJvcGVydHkgbGlzdCBhdm9pZCBmb3IuLmluLi4gaXRlcmF0aW9uLlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gdGFyZ2V0XG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzb3VyY2VcbiAgICAgKiBAcGFyYW0gIHtBcnJheS48c3RyaW5nPn0gcHJvcExpc3RcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgZGVmYXVsdHNXaXRoUHJvcExpc3Q6IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSwgcHJvcExpc3QpIHtcbiAgICAgICAgaWYgKHNvdXJjZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBwcm9wTmFtZSA9IHByb3BMaXN0W2ldO1xuICAgICAgICAgICAgICAgIGlmICh0YXJnZXRbcHJvcE5hbWVdID09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0W3Byb3BOYW1lXSA9IHNvdXJjZVtwcm9wTmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R8QXJyYXl9IG9ialxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBpdGVyYXRvclxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW2NvbnRleHRdXG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgZWFjaDogZnVuY3Rpb24gKG9iaiwgaXRlcmF0b3IsIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCEob2JqICYmIGl0ZXJhdG9yKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYmouZm9yRWFjaCAmJiBvYmouZm9yRWFjaCA9PT0gbmF0aXZlRm9yRWFjaCkge1xuICAgICAgICAgICAgb2JqLmZvckVhY2goaXRlcmF0b3IsIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG9iai5sZW5ndGggPT09ICsgb2JqLmxlbmd0aCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGl0ZXJhdG9yLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgICAgICBpdGVyYXRvci5jYWxsKGNvbnRleHQsIG9ialtrZXldLCBrZXksIG9iaik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElzIG9iamVjdFxuICAgICAqIEBwYXJhbSAge30gIG9ialxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgaXNPYmplY3Q6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIG9iaiA9PT0gT2JqZWN0KG9iaik7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElzIGFycmF5ID9cbiAgICAgKiBAcGFyYW0gIHt9ICBvYmpcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmNvcmUudXRpbFxuICAgICAqL1xuICAgIGlzQXJyYXk6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSXMgYXJyYXkgbGlrZSwgd2hpY2ggaGF2ZSBhIGxlbmd0aCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSAge30gIG9ialxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgaXNBcnJheUxpa2U6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCFvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBvYmoubGVuZ3RoID09PSArIG9iai5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7fSBvYmpcbiAgICAgKiBAcmV0dXJuIHt9XG4gICAgICogQG1lbWJlck9mIGNsYXkuY29yZS51dGlsXG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgaWYgKCF1dGlsLmlzT2JqZWN0KG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodXRpbC5pc0FycmF5KG9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouc2xpY2UoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1dGlsLmlzQXJyYXlMaWtlKG9iaikpIHsgLy8gaXMgdHlwZWQgYXJyYXlcbiAgICAgICAgICAgIHZhciByZXQgPSBuZXcgb2JqLmNvbnN0cnVjdG9yKG9iai5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmoubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXRbaV0gPSBvYmpbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHV0aWwuZXh0ZW5kKHt9LCBvYmopO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdXRpbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb3JlL3V0aWwuanNcbi8vIG1vZHVsZSBpZCA9IDExXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_color__ = __webpack_require__(49);\n\n\n\nvar parseColor = __WEBPACK_IMPORTED_MODULE_2__core_color__[\"a\" /* default */].parseToFloat;\n\nvar programKeyCache = {};\n\nfunction getDefineCode(defines) {\n    var defineKeys = Object.keys(defines);\n    defineKeys.sort();\n    var defineStr = [];\n    // Custom Defines\n    for (var i = 0; i < defineKeys.length; i++) {\n        var key = defineKeys[i];\n        var value = defines[key];\n        if (value === null) {\n            defineStr.push(key);\n        }\n        else{\n            defineStr.push(key + ' ' + value.toString());\n        }\n    }\n    return defineStr.join('\\n');\n}\n\nfunction getProgramKey(vertexDefines, fragmentDefines, enabledTextures) {\n    enabledTextures.sort();\n    var defineStr = [];\n    for (var i = 0; i < enabledTextures.length; i++) {\n        var symbol = enabledTextures[i];\n        defineStr.push(symbol);\n    }\n    var key = getDefineCode(vertexDefines) + '\\n'\n        + getDefineCode(fragmentDefines) + '\\n'\n        + defineStr.join('\\n');\n\n    if (programKeyCache[key]) {\n        return programKeyCache[key];\n    }\n\n    var id = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].genGUID();\n    programKeyCache[key] = id;\n    return id;\n}\n\n/**\n * Material defines the appearance of mesh surface, like `color`, `roughness`, `metalness`, etc.\n * It contains a {@link clay.Shader} and corresponding uniforms.\n *\n * Here is a basic example to create a standard material\n```js\nvar material = new clay.Material({\n    shader: new clay.Shader(\n        clay.Shader.source('clay.vertex'),\n        clay.Shader.source('clay.fragment')\n    )\n});\n```\n * @constructor clay.Material\n * @extends clay.core.Base\n */\nvar Material = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Material# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * @type {Object}\n         */\n        // uniforms: null,\n\n        /**\n         * @type {clay.Shader}\n         */\n        // shader: null,\n\n        /**\n         * @type {boolean}\n         */\n        depthTest: true,\n\n        /**\n         * @type {boolean}\n         */\n        depthMask: true,\n\n        /**\n         * @type {boolean}\n         */\n        transparent: false,\n        /**\n         * Blend func is a callback function when the material\n         * have custom blending\n         * The gl context will be the only argument passed in tho the\n         * blend function\n         * Detail of blend function in WebGL:\n         * http://www.khronos.org/registry/gles/specs/2.0/es_full_spec_2.0.25.pdf\n         *\n         * Example :\n         * function(_gl) {\n         *  _gl.blendEquation(_gl.FUNC_ADD);\n         *  _gl.blendFunc(_gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA);\n         * }\n         */\n        blend: null,\n\n        /**\n         * If update texture status automatically.\n         */\n        autoUpdateTextureStatus: true,\n\n        uniforms: {},\n        vertexDefines: {},\n        fragmentDefines: {},\n        _textureStatus: {},\n\n        // shadowTransparentMap : null\n\n        // PENDING enable the uniform that only used in shader.\n        _enabledUniforms: null,\n    };\n}, function () {\n    if (!this.name) {\n        this.name = 'MATERIAL_' + this.__uid__;\n    }\n\n    if (this.shader) {\n        // Keep status, mainly preset uniforms, vertexDefines and fragmentDefines\n        this.attachShader(this.shader, true);\n    }\n},\n/** @lends clay.Material.prototype */\n{\n    precision: 'highp',\n\n    /**\n     * Set material uniform\n     * @example\n     *  mat.setUniform('color', [1, 1, 1, 1]);\n     * @param {string} symbol\n     * @param {number|array|clay.Texture|ArrayBufferView} value\n     */\n    setUniform: function (symbol, value) {\n        if (value === undefined) {\n            console.warn('Uniform value \"' + symbol + '\" is undefined');\n        }\n        var uniform = this.uniforms[symbol];\n        if (uniform) {\n\n            if (typeof value === 'string') {\n                // Try to parse as a color. Invalid color string will return null.\n                value = parseColor(value) || value;\n            }\n\n            uniform.value = value;\n\n            if (this.autoUpdateTextureStatus && uniform.type === 't') {\n                if (value) {\n                    this.enableTexture(symbol);\n                }\n                else {\n                    this.disableTexture(symbol);\n                }\n            }\n        }\n    },\n\n    /**\n     * @param {Object} obj\n     */\n    setUniforms: function(obj) {\n        for (var key in obj) {\n            var val = obj[key];\n            this.setUniform(key, val);\n        }\n    },\n\n    /**\n     * @param  {string}  symbol\n     * @return {boolean}\n     */\n    isUniformEnabled: function (symbol) {\n        return this._enabledUniforms.indexOf(symbol) >= 0;\n    },\n\n    getEnabledUniforms: function () {\n        return this._enabledUniforms;\n    },\n    getTextureUniforms: function () {\n        return this._textureUniforms;\n    },\n\n    /**\n     * Alias of setUniform and setUniforms\n     * @param {object|string} symbol\n     * @param {number|array|clay.Texture|ArrayBufferView} [value]\n     */\n    set: function (symbol, value) {\n        if (typeof(symbol) === 'object') {\n            for (var key in symbol) {\n                var val = symbol[key];\n                this.setUniform(key, val);\n            }\n        }\n        else {\n            this.setUniform(symbol, value);\n        }\n    },\n    /**\n     * Get uniform value\n     * @param  {string} symbol\n     * @return {number|array|clay.Texture|ArrayBufferView}\n     */\n    get: function (symbol) {\n        var uniform = this.uniforms[symbol];\n        if (uniform) {\n            return uniform.value;\n        }\n    },\n    /**\n     * Attach a shader instance\n     * @param  {clay.Shader} shader\n     * @param  {boolean} keepStatus If try to keep uniform and texture\n     */\n    attachShader: function(shader, keepStatus) {\n        var originalUniforms = this.uniforms;\n\n        // Ignore if uniform can use in shader.\n        this.uniforms = shader.createUniforms();\n        this.shader = shader;\n\n        var uniforms = this.uniforms;\n        this._enabledUniforms = Object.keys(uniforms);\n        // Make sure uniforms are set in same order to avoid texture slot wrong\n        this._enabledUniforms.sort();\n        this._textureUniforms = this._enabledUniforms.filter(function (uniformName) {\n            var type = this.uniforms[uniformName].type;\n            return type === 't' || type === 'tv';\n        }, this);\n\n        var originalVertexDefines = this.vertexDefines;\n        var originalFragmentDefines = this.fragmentDefines;\n\n        this.vertexDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(shader.vertexDefines);\n        this.fragmentDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(shader.fragmentDefines);\n\n        if (keepStatus) {\n            for (var symbol in originalUniforms) {\n                if (uniforms[symbol]) {\n                    uniforms[symbol].value = originalUniforms[symbol].value;\n                }\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(this.vertexDefines, originalVertexDefines);\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(this.fragmentDefines, originalFragmentDefines);\n        }\n\n        var textureStatus = {};\n        for (var key in shader.textures) {\n            textureStatus[key] = {\n                shaderType: shader.textures[key].shaderType,\n                type: shader.textures[key].type,\n                enabled: (keepStatus && this._textureStatus[key]) ? this._textureStatus[key].enabled : false\n            };\n        }\n\n        this._textureStatus = textureStatus;\n\n        this._programKey = '';\n    },\n\n    /**\n     * Clone a new material and keep uniforms, shader will not be cloned\n     * @return {clay.Material}\n     */\n    clone: function () {\n        var material = new this.constructor({\n            name: this.name,\n            shader: this.shader\n        });\n        for (var symbol in this.uniforms) {\n            material.uniforms[symbol].value = this.uniforms[symbol].value;\n        }\n        material.depthTest = this.depthTest;\n        material.depthMask = this.depthMask;\n        material.transparent = this.transparent;\n        material.blend = this.blend;\n\n        material.vertexDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(this.vertexDefines);\n        material.fragmentDefines = __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].clone(this.fragmentDefines);\n        material.enableTexture(this.getEnabledTextures());\n        material.precision = this.precision;\n\n        return material;\n    },\n\n    /**\n     * Add a #define macro in shader code\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     * @param  {number} [val]\n     */\n    define: function (shaderType, symbol, val) {\n        var vertexDefines = this.vertexDefines;\n        var fragmentDefines = this.fragmentDefines;\n        if (shaderType !== 'vertex' && shaderType !== 'fragment' && shaderType !== 'both'\n            && arguments.length < 3\n        ) {\n            // shaderType default to be 'both'\n            val = symbol;\n            symbol = shaderType;\n            shaderType = 'both';\n        }\n        val = val != null ? val : null;\n        if (shaderType === 'vertex' || shaderType === 'both') {\n            if (vertexDefines[symbol] !== val) {\n                vertexDefines[symbol] = val;\n                // Mark as dirty\n                this._programKey = '';\n            }\n        }\n        if (shaderType === 'fragment' || shaderType === 'both') {\n            if (fragmentDefines[symbol] !== val) {\n                fragmentDefines[symbol] = val;\n                if (shaderType !== 'both') {\n                    this._programKey = '';\n                }\n            }\n        }\n    },\n\n    /**\n     * Remove a #define macro in shader code\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    undefine: function (shaderType, symbol) {\n        if (shaderType !== 'vertex' && shaderType !== 'fragment' && shaderType !== 'both'\n            && arguments.length < 2\n        ) {\n            // shaderType default to be 'both'\n            symbol = shaderType;\n            shaderType = 'both';\n        }\n        if (shaderType === 'vertex' || shaderType === 'both') {\n            if (this.isDefined('vertex', symbol)) {\n                delete this.vertexDefines[symbol];\n                // Mark as dirty\n                this._programKey = '';\n            }\n        }\n        if (shaderType === 'fragment' || shaderType === 'both') {\n            if (this.isDefined('fragment', symbol)) {\n                delete this.fragmentDefines[symbol];\n                if (shaderType !== 'both') {\n                    this._programKey = '';\n                }\n            }\n        }\n    },\n\n    /**\n     * If macro is defined in shader.\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    isDefined: function (shaderType, symbol) {\n        // PENDING hasOwnProperty ?\n        switch (shaderType) {\n            case 'vertex':\n                return this.vertexDefines[symbol] !== undefined;\n            case 'fragment':\n                return this.fragmentDefines[symbol] !== undefined;\n        }\n    },\n    /**\n     * Get macro value defined in shader.\n     * @param  {string} shaderType Can be vertex, fragment or both\n     * @param  {string} symbol\n     */\n    getDefine: function (shaderType, symbol) {\n        switch(shaderType) {\n            case 'vertex':\n                return this.vertexDefines[symbol];\n            case 'fragment':\n                return this.fragmentDefines[symbol];\n        }\n    },\n    /**\n     * Enable a texture, actually it will add a #define macro in the shader code\n     * For example, if texture symbol is diffuseMap, it will add a line `#define DIFFUSEMAP_ENABLED` in the shader code\n     * @param  {string} symbol\n     */\n    enableTexture: function (symbol) {\n        if (Array.isArray(symbol)) {\n            for (var i = 0; i < symbol.length; i++) {\n                this.enableTexture(symbol[i]);\n            }\n            return;\n        }\n\n        var status = this._textureStatus[symbol];\n        if (status) {\n            var isEnabled = status.enabled;\n            if (!isEnabled) {\n                status.enabled = true;\n                this._programKey = '';\n            }\n        }\n    },\n    /**\n     * Enable all textures used in the shader\n     */\n    enableTexturesAll: function () {\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            textureStatus[symbol].enabled = true;\n        }\n\n        this._programKey = '';\n    },\n    /**\n     * Disable a texture, it remove a #define macro in the shader\n     * @param  {string} symbol\n     */\n    disableTexture: function (symbol) {\n        if (Array.isArray(symbol)) {\n            for (var i = 0; i < symbol.length; i++) {\n                this.disableTexture(symbol[i]);\n            }\n            return;\n        }\n\n        var status = this._textureStatus[symbol];\n        if (status) {\n            var isDisabled = ! status.enabled;\n            if (!isDisabled) {\n                status.enabled = false;\n                this._programKey = '';\n            }\n        }\n    },\n    /**\n     * Disable all textures used in the shader\n     */\n    disableTexturesAll: function () {\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            textureStatus[symbol].enabled = false;\n        }\n\n        this._programKey = '';\n    },\n    /**\n     * If texture of given type is enabled.\n     * @param  {string}  symbol\n     * @return {boolean}\n     */\n    isTextureEnabled: function (symbol) {\n        var textureStatus = this._textureStatus;\n        return !!textureStatus[symbol]\n            && textureStatus[symbol].enabled;\n    },\n\n    /**\n     * Get all enabled textures\n     * @return {string[]}\n     */\n    getEnabledTextures: function () {\n        var enabledTextures = [];\n        var textureStatus = this._textureStatus;\n        for (var symbol in textureStatus) {\n            if (textureStatus[symbol].enabled) {\n                enabledTextures.push(symbol);\n            }\n        }\n        return enabledTextures;\n    },\n\n    /**\n     * Mark defines are updated.\n     */\n    dirtyDefines: function () {\n        this._programKey = '';\n    },\n\n    getProgramKey: function () {\n        if (!this._programKey) {\n            this._programKey = getProgramKey(\n                this.vertexDefines, this.fragmentDefines, this.getEnabledTextures()\n            );\n        }\n        return this._programKey;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Material);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL01hdGVyaWFsLmpzPzE5YzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IGNvbG9yVXRpbCBmcm9tICcuL2NvcmUvY29sb3InO1xudmFyIHBhcnNlQ29sb3IgPSBjb2xvclV0aWwucGFyc2VUb0Zsb2F0O1xuXG52YXIgcHJvZ3JhbUtleUNhY2hlID0ge307XG5cbmZ1bmN0aW9uIGdldERlZmluZUNvZGUoZGVmaW5lcykge1xuICAgIHZhciBkZWZpbmVLZXlzID0gT2JqZWN0LmtleXMoZGVmaW5lcyk7XG4gICAgZGVmaW5lS2V5cy5zb3J0KCk7XG4gICAgdmFyIGRlZmluZVN0ciA9IFtdO1xuICAgIC8vIEN1c3RvbSBEZWZpbmVzXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWZpbmVLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBrZXkgPSBkZWZpbmVLZXlzW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBkZWZpbmVzW2tleV07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgZGVmaW5lU3RyLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgZGVmaW5lU3RyLnB1c2goa2V5ICsgJyAnICsgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlZmluZVN0ci5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvZ3JhbUtleSh2ZXJ0ZXhEZWZpbmVzLCBmcmFnbWVudERlZmluZXMsIGVuYWJsZWRUZXh0dXJlcykge1xuICAgIGVuYWJsZWRUZXh0dXJlcy5zb3J0KCk7XG4gICAgdmFyIGRlZmluZVN0ciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5hYmxlZFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBzeW1ib2wgPSBlbmFibGVkVGV4dHVyZXNbaV07XG4gICAgICAgIGRlZmluZVN0ci5wdXNoKHN5bWJvbCk7XG4gICAgfVxuICAgIHZhciBrZXkgPSBnZXREZWZpbmVDb2RlKHZlcnRleERlZmluZXMpICsgJ1xcbidcbiAgICAgICAgKyBnZXREZWZpbmVDb2RlKGZyYWdtZW50RGVmaW5lcykgKyAnXFxuJ1xuICAgICAgICArIGRlZmluZVN0ci5qb2luKCdcXG4nKTtcblxuICAgIGlmIChwcm9ncmFtS2V5Q2FjaGVba2V5XSkge1xuICAgICAgICByZXR1cm4gcHJvZ3JhbUtleUNhY2hlW2tleV07XG4gICAgfVxuXG4gICAgdmFyIGlkID0gdXRpbC5nZW5HVUlEKCk7XG4gICAgcHJvZ3JhbUtleUNhY2hlW2tleV0gPSBpZDtcbiAgICByZXR1cm4gaWQ7XG59XG5cbi8qKlxuICogTWF0ZXJpYWwgZGVmaW5lcyB0aGUgYXBwZWFyYW5jZSBvZiBtZXNoIHN1cmZhY2UsIGxpa2UgYGNvbG9yYCwgYHJvdWdobmVzc2AsIGBtZXRhbG5lc3NgLCBldGMuXG4gKiBJdCBjb250YWlucyBhIHtAbGluayBjbGF5LlNoYWRlcn0gYW5kIGNvcnJlc3BvbmRpbmcgdW5pZm9ybXMuXG4gKlxuICogSGVyZSBpcyBhIGJhc2ljIGV4YW1wbGUgdG8gY3JlYXRlIGEgc3RhbmRhcmQgbWF0ZXJpYWxcbmBgYGpzXG52YXIgbWF0ZXJpYWwgPSBuZXcgY2xheS5NYXRlcmlhbCh7XG4gICAgc2hhZGVyOiBuZXcgY2xheS5TaGFkZXIoXG4gICAgICAgIGNsYXkuU2hhZGVyLnNvdXJjZSgnY2xheS52ZXJ0ZXgnKSxcbiAgICAgICAgY2xheS5TaGFkZXIuc291cmNlKCdjbGF5LmZyYWdtZW50JylcbiAgICApXG59KTtcbmBgYFxuICogQGNvbnN0cnVjdG9yIGNsYXkuTWF0ZXJpYWxcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBNYXRlcmlhbCA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5Lk1hdGVyaWFsIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgbmFtZTogJycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICAvLyB1bmlmb3JtczogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuU2hhZGVyfVxuICAgICAgICAgKi9cbiAgICAgICAgLy8gc2hhZGVyOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGRlcHRoVGVzdDogdHJ1ZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBkZXB0aE1hc2s6IHRydWUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdHJhbnNwYXJlbnQ6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogQmxlbmQgZnVuYyBpcyBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gdGhlIG1hdGVyaWFsXG4gICAgICAgICAqIGhhdmUgY3VzdG9tIGJsZW5kaW5nXG4gICAgICAgICAqIFRoZSBnbCBjb250ZXh0IHdpbGwgYmUgdGhlIG9ubHkgYXJndW1lbnQgcGFzc2VkIGluIHRobyB0aGVcbiAgICAgICAgICogYmxlbmQgZnVuY3Rpb25cbiAgICAgICAgICogRGV0YWlsIG9mIGJsZW5kIGZ1bmN0aW9uIGluIFdlYkdMOlxuICAgICAgICAgKiBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L2dsZXMvc3BlY3MvMi4wL2VzX2Z1bGxfc3BlY18yLjAuMjUucGRmXG4gICAgICAgICAqXG4gICAgICAgICAqIEV4YW1wbGUgOlxuICAgICAgICAgKiBmdW5jdGlvbihfZ2wpIHtcbiAgICAgICAgICogIF9nbC5ibGVuZEVxdWF0aW9uKF9nbC5GVU5DX0FERCk7XG4gICAgICAgICAqICBfZ2wuYmxlbmRGdW5jKF9nbC5TUkNfQUxQSEEsIF9nbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcbiAgICAgICAgICogfVxuICAgICAgICAgKi9cbiAgICAgICAgYmxlbmQ6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHVwZGF0ZSB0ZXh0dXJlIHN0YXR1cyBhdXRvbWF0aWNhbGx5LlxuICAgICAgICAgKi9cbiAgICAgICAgYXV0b1VwZGF0ZVRleHR1cmVTdGF0dXM6IHRydWUsXG5cbiAgICAgICAgdW5pZm9ybXM6IHt9LFxuICAgICAgICB2ZXJ0ZXhEZWZpbmVzOiB7fSxcbiAgICAgICAgZnJhZ21lbnREZWZpbmVzOiB7fSxcbiAgICAgICAgX3RleHR1cmVTdGF0dXM6IHt9LFxuXG4gICAgICAgIC8vIHNoYWRvd1RyYW5zcGFyZW50TWFwIDogbnVsbFxuXG4gICAgICAgIC8vIFBFTkRJTkcgZW5hYmxlIHRoZSB1bmlmb3JtIHRoYXQgb25seSB1c2VkIGluIHNoYWRlci5cbiAgICAgICAgX2VuYWJsZWRVbmlmb3JtczogbnVsbCxcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5uYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9ICdNQVRFUklBTF8nICsgdGhpcy5fX3VpZF9fO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnNoYWRlcikge1xuICAgICAgICAvLyBLZWVwIHN0YXR1cywgbWFpbmx5IHByZXNldCB1bmlmb3JtcywgdmVydGV4RGVmaW5lcyBhbmQgZnJhZ21lbnREZWZpbmVzXG4gICAgICAgIHRoaXMuYXR0YWNoU2hhZGVyKHRoaXMuc2hhZGVyLCB0cnVlKTtcbiAgICB9XG59LFxuLyoqIEBsZW5kcyBjbGF5Lk1hdGVyaWFsLnByb3RvdHlwZSAqL1xue1xuICAgIHByZWNpc2lvbjogJ2hpZ2hwJyxcblxuICAgIC8qKlxuICAgICAqIFNldCBtYXRlcmlhbCB1bmlmb3JtXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgbWF0LnNldFVuaWZvcm0oJ2NvbG9yJywgWzEsIDEsIDEsIDFdKTtcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3ltYm9sXG4gICAgICogQHBhcmFtIHtudW1iZXJ8YXJyYXl8Y2xheS5UZXh0dXJlfEFycmF5QnVmZmVyVmlld30gdmFsdWVcbiAgICAgKi9cbiAgICBzZXRVbmlmb3JtOiBmdW5jdGlvbiAoc3ltYm9sLCB2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmlmb3JtIHZhbHVlIFwiJyArIHN5bWJvbCArICdcIiBpcyB1bmRlZmluZWQnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdW5pZm9ybSA9IHRoaXMudW5pZm9ybXNbc3ltYm9sXTtcbiAgICAgICAgaWYgKHVuaWZvcm0pIHtcblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gcGFyc2UgYXMgYSBjb2xvci4gSW52YWxpZCBjb2xvciBzdHJpbmcgd2lsbCByZXR1cm4gbnVsbC5cbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHBhcnNlQ29sb3IodmFsdWUpIHx8IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1bmlmb3JtLnZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmF1dG9VcGRhdGVUZXh0dXJlU3RhdHVzICYmIHVuaWZvcm0udHlwZSA9PT0gJ3QnKSB7XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlVGV4dHVyZShzeW1ib2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlVGV4dHVyZShzeW1ib2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICovXG4gICAgc2V0VW5pZm9ybXM6IGZ1bmN0aW9uKG9iaikge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gb2JqW2tleV07XG4gICAgICAgICAgICB0aGlzLnNldFVuaWZvcm0oa2V5LCB2YWwpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHN5bWJvbFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNVbmlmb3JtRW5hYmxlZDogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZW5hYmxlZFVuaWZvcm1zLmluZGV4T2Yoc3ltYm9sKSA+PSAwO1xuICAgIH0sXG5cbiAgICBnZXRFbmFibGVkVW5pZm9ybXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VuYWJsZWRVbmlmb3JtcztcbiAgICB9LFxuICAgIGdldFRleHR1cmVVbmlmb3JtczogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZVVuaWZvcm1zO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBzZXRVbmlmb3JtIGFuZCBzZXRVbmlmb3Jtc1xuICAgICAqIEBwYXJhbSB7b2JqZWN0fHN0cmluZ30gc3ltYm9sXG4gICAgICogQHBhcmFtIHtudW1iZXJ8YXJyYXl8Y2xheS5UZXh0dXJlfEFycmF5QnVmZmVyVmlld30gW3ZhbHVlXVxuICAgICAqL1xuICAgIHNldDogZnVuY3Rpb24gKHN5bWJvbCwgdmFsdWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZihzeW1ib2wpID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHN5bWJvbCkge1xuICAgICAgICAgICAgICAgIHZhciB2YWwgPSBzeW1ib2xba2V5XTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFVuaWZvcm0oa2V5LCB2YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKHN5bWJvbCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgdW5pZm9ybSB2YWx1ZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICogQHJldHVybiB7bnVtYmVyfGFycmF5fGNsYXkuVGV4dHVyZXxBcnJheUJ1ZmZlclZpZXd9XG4gICAgICovXG4gICAgZ2V0OiBmdW5jdGlvbiAoc3ltYm9sKSB7XG4gICAgICAgIHZhciB1bmlmb3JtID0gdGhpcy51bmlmb3Jtc1tzeW1ib2xdO1xuICAgICAgICBpZiAodW5pZm9ybSkge1xuICAgICAgICAgICAgcmV0dXJuIHVuaWZvcm0udmFsdWU7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEF0dGFjaCBhIHNoYWRlciBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSAge2NsYXkuU2hhZGVyfSBzaGFkZXJcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBrZWVwU3RhdHVzIElmIHRyeSB0byBrZWVwIHVuaWZvcm0gYW5kIHRleHR1cmVcbiAgICAgKi9cbiAgICBhdHRhY2hTaGFkZXI6IGZ1bmN0aW9uKHNoYWRlciwga2VlcFN0YXR1cykge1xuICAgICAgICB2YXIgb3JpZ2luYWxVbmlmb3JtcyA9IHRoaXMudW5pZm9ybXM7XG5cbiAgICAgICAgLy8gSWdub3JlIGlmIHVuaWZvcm0gY2FuIHVzZSBpbiBzaGFkZXIuXG4gICAgICAgIHRoaXMudW5pZm9ybXMgPSBzaGFkZXIuY3JlYXRlVW5pZm9ybXMoKTtcbiAgICAgICAgdGhpcy5zaGFkZXIgPSBzaGFkZXI7XG5cbiAgICAgICAgdmFyIHVuaWZvcm1zID0gdGhpcy51bmlmb3JtcztcbiAgICAgICAgdGhpcy5fZW5hYmxlZFVuaWZvcm1zID0gT2JqZWN0LmtleXModW5pZm9ybXMpO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdW5pZm9ybXMgYXJlIHNldCBpbiBzYW1lIG9yZGVyIHRvIGF2b2lkIHRleHR1cmUgc2xvdCB3cm9uZ1xuICAgICAgICB0aGlzLl9lbmFibGVkVW5pZm9ybXMuc29ydCgpO1xuICAgICAgICB0aGlzLl90ZXh0dXJlVW5pZm9ybXMgPSB0aGlzLl9lbmFibGVkVW5pZm9ybXMuZmlsdGVyKGZ1bmN0aW9uICh1bmlmb3JtTmFtZSkge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSB0aGlzLnVuaWZvcm1zW3VuaWZvcm1OYW1lXS50eXBlO1xuICAgICAgICAgICAgcmV0dXJuIHR5cGUgPT09ICd0JyB8fCB0eXBlID09PSAndHYnO1xuICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICB2YXIgb3JpZ2luYWxWZXJ0ZXhEZWZpbmVzID0gdGhpcy52ZXJ0ZXhEZWZpbmVzO1xuICAgICAgICB2YXIgb3JpZ2luYWxGcmFnbWVudERlZmluZXMgPSB0aGlzLmZyYWdtZW50RGVmaW5lcztcblxuICAgICAgICB0aGlzLnZlcnRleERlZmluZXMgPSB1dGlsLmNsb25lKHNoYWRlci52ZXJ0ZXhEZWZpbmVzKTtcbiAgICAgICAgdGhpcy5mcmFnbWVudERlZmluZXMgPSB1dGlsLmNsb25lKHNoYWRlci5mcmFnbWVudERlZmluZXMpO1xuXG4gICAgICAgIGlmIChrZWVwU3RhdHVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gb3JpZ2luYWxVbmlmb3Jtcykge1xuICAgICAgICAgICAgICAgIGlmICh1bmlmb3Jtc1tzeW1ib2xdKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1zW3N5bWJvbF0udmFsdWUgPSBvcmlnaW5hbFVuaWZvcm1zW3N5bWJvbF0udmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB1dGlsLmRlZmF1bHRzKHRoaXMudmVydGV4RGVmaW5lcywgb3JpZ2luYWxWZXJ0ZXhEZWZpbmVzKTtcbiAgICAgICAgICAgIHV0aWwuZGVmYXVsdHModGhpcy5mcmFnbWVudERlZmluZXMsIG9yaWdpbmFsRnJhZ21lbnREZWZpbmVzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZXh0dXJlU3RhdHVzID0ge307XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzaGFkZXIudGV4dHVyZXMpIHtcbiAgICAgICAgICAgIHRleHR1cmVTdGF0dXNba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBzaGFkZXJUeXBlOiBzaGFkZXIudGV4dHVyZXNba2V5XS5zaGFkZXJUeXBlLFxuICAgICAgICAgICAgICAgIHR5cGU6IHNoYWRlci50ZXh0dXJlc1trZXldLnR5cGUsXG4gICAgICAgICAgICAgICAgZW5hYmxlZDogKGtlZXBTdGF0dXMgJiYgdGhpcy5fdGV4dHVyZVN0YXR1c1trZXldKSA/IHRoaXMuX3RleHR1cmVTdGF0dXNba2V5XS5lbmFibGVkIDogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90ZXh0dXJlU3RhdHVzID0gdGV4dHVyZVN0YXR1cztcblxuICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbmV3IG1hdGVyaWFsIGFuZCBrZWVwIHVuaWZvcm1zLCBzaGFkZXIgd2lsbCBub3QgYmUgY2xvbmVkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRlcmlhbH1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXG4gICAgICAgICAgICBzaGFkZXI6IHRoaXMuc2hhZGVyXG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdGhpcy51bmlmb3Jtcykge1xuICAgICAgICAgICAgbWF0ZXJpYWwudW5pZm9ybXNbc3ltYm9sXS52YWx1ZSA9IHRoaXMudW5pZm9ybXNbc3ltYm9sXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPSB0aGlzLmRlcHRoVGVzdDtcbiAgICAgICAgbWF0ZXJpYWwuZGVwdGhNYXNrID0gdGhpcy5kZXB0aE1hc2s7XG4gICAgICAgIG1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdGhpcy50cmFuc3BhcmVudDtcbiAgICAgICAgbWF0ZXJpYWwuYmxlbmQgPSB0aGlzLmJsZW5kO1xuXG4gICAgICAgIG1hdGVyaWFsLnZlcnRleERlZmluZXMgPSB1dGlsLmNsb25lKHRoaXMudmVydGV4RGVmaW5lcyk7XG4gICAgICAgIG1hdGVyaWFsLmZyYWdtZW50RGVmaW5lcyA9IHV0aWwuY2xvbmUodGhpcy5mcmFnbWVudERlZmluZXMpO1xuICAgICAgICBtYXRlcmlhbC5lbmFibGVUZXh0dXJlKHRoaXMuZ2V0RW5hYmxlZFRleHR1cmVzKCkpO1xuICAgICAgICBtYXRlcmlhbC5wcmVjaXNpb24gPSB0aGlzLnByZWNpc2lvbjtcblxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFkZCBhICNkZWZpbmUgbWFjcm8gaW4gc2hhZGVyIGNvZGVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNoYWRlclR5cGUgQ2FuIGJlIHZlcnRleCwgZnJhZ21lbnQgb3IgYm90aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbdmFsXVxuICAgICAqL1xuICAgIGRlZmluZTogZnVuY3Rpb24gKHNoYWRlclR5cGUsIHN5bWJvbCwgdmFsKSB7XG4gICAgICAgIHZhciB2ZXJ0ZXhEZWZpbmVzID0gdGhpcy52ZXJ0ZXhEZWZpbmVzO1xuICAgICAgICB2YXIgZnJhZ21lbnREZWZpbmVzID0gdGhpcy5mcmFnbWVudERlZmluZXM7XG4gICAgICAgIGlmIChzaGFkZXJUeXBlICE9PSAndmVydGV4JyAmJiBzaGFkZXJUeXBlICE9PSAnZnJhZ21lbnQnICYmIHNoYWRlclR5cGUgIT09ICdib3RoJ1xuICAgICAgICAgICAgJiYgYXJndW1lbnRzLmxlbmd0aCA8IDNcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBzaGFkZXJUeXBlIGRlZmF1bHQgdG8gYmUgJ2JvdGgnXG4gICAgICAgICAgICB2YWwgPSBzeW1ib2w7XG4gICAgICAgICAgICBzeW1ib2wgPSBzaGFkZXJUeXBlO1xuICAgICAgICAgICAgc2hhZGVyVHlwZSA9ICdib3RoJztcbiAgICAgICAgfVxuICAgICAgICB2YWwgPSB2YWwgIT0gbnVsbCA/IHZhbCA6IG51bGw7XG4gICAgICAgIGlmIChzaGFkZXJUeXBlID09PSAndmVydGV4JyB8fCBzaGFkZXJUeXBlID09PSAnYm90aCcpIHtcbiAgICAgICAgICAgIGlmICh2ZXJ0ZXhEZWZpbmVzW3N5bWJvbF0gIT09IHZhbCkge1xuICAgICAgICAgICAgICAgIHZlcnRleERlZmluZXNbc3ltYm9sXSA9IHZhbDtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIGFzIGRpcnR5XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChzaGFkZXJUeXBlID09PSAnZnJhZ21lbnQnIHx8IHNoYWRlclR5cGUgPT09ICdib3RoJykge1xuICAgICAgICAgICAgaWYgKGZyYWdtZW50RGVmaW5lc1tzeW1ib2xdICE9PSB2YWwpIHtcbiAgICAgICAgICAgICAgICBmcmFnbWVudERlZmluZXNbc3ltYm9sXSA9IHZhbDtcbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgI2RlZmluZSBtYWNybyBpbiBzaGFkZXIgY29kZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc2hhZGVyVHlwZSBDYW4gYmUgdmVydGV4LCBmcmFnbWVudCBvciBib3RoXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzeW1ib2xcbiAgICAgKi9cbiAgICB1bmRlZmluZTogZnVuY3Rpb24gKHNoYWRlclR5cGUsIHN5bWJvbCkge1xuICAgICAgICBpZiAoc2hhZGVyVHlwZSAhPT0gJ3ZlcnRleCcgJiYgc2hhZGVyVHlwZSAhPT0gJ2ZyYWdtZW50JyAmJiBzaGFkZXJUeXBlICE9PSAnYm90aCdcbiAgICAgICAgICAgICYmIGFyZ3VtZW50cy5sZW5ndGggPCAyXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gc2hhZGVyVHlwZSBkZWZhdWx0IHRvIGJlICdib3RoJ1xuICAgICAgICAgICAgc3ltYm9sID0gc2hhZGVyVHlwZTtcbiAgICAgICAgICAgIHNoYWRlclR5cGUgPSAnYm90aCc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYWRlclR5cGUgPT09ICd2ZXJ0ZXgnIHx8IHNoYWRlclR5cGUgPT09ICdib3RoJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNEZWZpbmVkKCd2ZXJ0ZXgnLCBzeW1ib2wpKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudmVydGV4RGVmaW5lc1tzeW1ib2xdO1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgYXMgZGlydHlcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoYWRlclR5cGUgPT09ICdmcmFnbWVudCcgfHwgc2hhZGVyVHlwZSA9PT0gJ2JvdGgnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc0RlZmluZWQoJ2ZyYWdtZW50Jywgc3ltYm9sKSkge1xuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmZyYWdtZW50RGVmaW5lc1tzeW1ib2xdO1xuICAgICAgICAgICAgICAgIGlmIChzaGFkZXJUeXBlICE9PSAnYm90aCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiBtYWNybyBpcyBkZWZpbmVkIGluIHNoYWRlci5cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHNoYWRlclR5cGUgQ2FuIGJlIHZlcnRleCwgZnJhZ21lbnQgb3IgYm90aFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICovXG4gICAgaXNEZWZpbmVkOiBmdW5jdGlvbiAoc2hhZGVyVHlwZSwgc3ltYm9sKSB7XG4gICAgICAgIC8vIFBFTkRJTkcgaGFzT3duUHJvcGVydHkgP1xuICAgICAgICBzd2l0Y2ggKHNoYWRlclR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3ZlcnRleCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4RGVmaW5lc1tzeW1ib2xdICE9PSB1bmRlZmluZWQ7XG4gICAgICAgICAgICBjYXNlICdmcmFnbWVudCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZnJhZ21lbnREZWZpbmVzW3N5bWJvbF0gIT09IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IG1hY3JvIHZhbHVlIGRlZmluZWQgaW4gc2hhZGVyLlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc2hhZGVyVHlwZSBDYW4gYmUgdmVydGV4LCBmcmFnbWVudCBvciBib3RoXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzeW1ib2xcbiAgICAgKi9cbiAgICBnZXREZWZpbmU6IGZ1bmN0aW9uIChzaGFkZXJUeXBlLCBzeW1ib2wpIHtcbiAgICAgICAgc3dpdGNoKHNoYWRlclR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3ZlcnRleCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmVydGV4RGVmaW5lc1tzeW1ib2xdO1xuICAgICAgICAgICAgY2FzZSAnZnJhZ21lbnQnOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmZyYWdtZW50RGVmaW5lc1tzeW1ib2xdO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBFbmFibGUgYSB0ZXh0dXJlLCBhY3R1YWxseSBpdCB3aWxsIGFkZCBhICNkZWZpbmUgbWFjcm8gaW4gdGhlIHNoYWRlciBjb2RlXG4gICAgICogRm9yIGV4YW1wbGUsIGlmIHRleHR1cmUgc3ltYm9sIGlzIGRpZmZ1c2VNYXAsIGl0IHdpbGwgYWRkIGEgbGluZSBgI2RlZmluZSBESUZGVVNFTUFQX0VOQUJMRURgIGluIHRoZSBzaGFkZXIgY29kZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gc3ltYm9sXG4gICAgICovXG4gICAgZW5hYmxlVGV4dHVyZTogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShzeW1ib2wpKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN5bWJvbC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlVGV4dHVyZShzeW1ib2xbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YXR1cyA9IHRoaXMuX3RleHR1cmVTdGF0dXNbc3ltYm9sXTtcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgdmFyIGlzRW5hYmxlZCA9IHN0YXR1cy5lbmFibGVkO1xuICAgICAgICAgICAgaWYgKCFpc0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBzdGF0dXMuZW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBFbmFibGUgYWxsIHRleHR1cmVzIHVzZWQgaW4gdGhlIHNoYWRlclxuICAgICAqL1xuICAgIGVuYWJsZVRleHR1cmVzQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlU3RhdHVzID0gdGhpcy5fdGV4dHVyZVN0YXR1cztcbiAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIHRleHR1cmVTdGF0dXMpIHtcbiAgICAgICAgICAgIHRleHR1cmVTdGF0dXNbc3ltYm9sXS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERpc2FibGUgYSB0ZXh0dXJlLCBpdCByZW1vdmUgYSAjZGVmaW5lIG1hY3JvIGluIHRoZSBzaGFkZXJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqL1xuICAgIGRpc2FibGVUZXh0dXJlOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHN5bWJvbCkpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3ltYm9sLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlVGV4dHVyZShzeW1ib2xbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN0YXR1cyA9IHRoaXMuX3RleHR1cmVTdGF0dXNbc3ltYm9sXTtcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgdmFyIGlzRGlzYWJsZWQgPSAhIHN0YXR1cy5lbmFibGVkO1xuICAgICAgICAgICAgaWYgKCFpc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgc3RhdHVzLmVuYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wcm9ncmFtS2V5ID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERpc2FibGUgYWxsIHRleHR1cmVzIHVzZWQgaW4gdGhlIHNoYWRlclxuICAgICAqL1xuICAgIGRpc2FibGVUZXh0dXJlc0FsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdGV4dHVyZVN0YXR1cyA9IHRoaXMuX3RleHR1cmVTdGF0dXM7XG4gICAgICAgIGZvciAodmFyIHN5bWJvbCBpbiB0ZXh0dXJlU3RhdHVzKSB7XG4gICAgICAgICAgICB0ZXh0dXJlU3RhdHVzW3N5bWJvbF0uZW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fcHJvZ3JhbUtleSA9ICcnO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogSWYgdGV4dHVyZSBvZiBnaXZlbiB0eXBlIGlzIGVuYWJsZWQuXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSAgc3ltYm9sXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1RleHR1cmVFbmFibGVkOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG4gICAgICAgIHZhciB0ZXh0dXJlU3RhdHVzID0gdGhpcy5fdGV4dHVyZVN0YXR1cztcbiAgICAgICAgcmV0dXJuICEhdGV4dHVyZVN0YXR1c1tzeW1ib2xdXG4gICAgICAgICAgICAmJiB0ZXh0dXJlU3RhdHVzW3N5bWJvbF0uZW5hYmxlZDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFsbCBlbmFibGVkIHRleHR1cmVzXG4gICAgICogQHJldHVybiB7c3RyaW5nW119XG4gICAgICovXG4gICAgZ2V0RW5hYmxlZFRleHR1cmVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbmFibGVkVGV4dHVyZXMgPSBbXTtcbiAgICAgICAgdmFyIHRleHR1cmVTdGF0dXMgPSB0aGlzLl90ZXh0dXJlU3RhdHVzO1xuICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdGV4dHVyZVN0YXR1cykge1xuICAgICAgICAgICAgaWYgKHRleHR1cmVTdGF0dXNbc3ltYm9sXS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZFRleHR1cmVzLnB1c2goc3ltYm9sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZW5hYmxlZFRleHR1cmVzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNYXJrIGRlZmluZXMgYXJlIHVwZGF0ZWQuXG4gICAgICovXG4gICAgZGlydHlEZWZpbmVzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSAnJztcbiAgICB9LFxuXG4gICAgZ2V0UHJvZ3JhbUtleTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3Byb2dyYW1LZXkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2dyYW1LZXkgPSBnZXRQcm9ncmFtS2V5KFxuICAgICAgICAgICAgICAgIHRoaXMudmVydGV4RGVmaW5lcywgdGhpcy5mcmFnbWVudERlZmluZXMsIHRoaXMuZ2V0RW5hYmxlZFRleHR1cmVzKClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb2dyYW1LZXk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IE1hdGVyaWFsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL01hdGVyaWFsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__GeometryBase__ = __webpack_require__(79);\n\n\n\n\n\n\nvar vec3Create = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create;\nvar vec3Add = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add;\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set;\n\nvar Attribute = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].Attribute;\n\n/**\n * Geometry in ClayGL contains vertex attributes of mesh. These vertex attributes will be finally provided to the {@link clay.Shader}.\n * Different {@link clay.Shader} needs different attributes. Here is a list of attributes used in the builtin shaders.\n *\n * + position: `clay.basic`, `clay.lambert`, `clay.standard`\n * + texcoord0: `clay.basic`, `clay.lambert`, `clay.standard`\n * + color: `clay.basic`, `clay.lambert`, `clay.standard`\n * + weight: `clay.basic`, `clay.lambert`, `clay.standard`\n * + joint: `clay.basic`, `clay.lambert`, `clay.standard`\n * + normal: `clay.lambert`, `clay.standard`\n * + tangent: `clay.standard`\n *\n * #### Create a procedural geometry\n *\n * ClayGL provides a couple of builtin procedural geometries. Inlcuding:\n *\n *  + {@link clay.geometry.Cube}\n *  + {@link clay.geometry.Sphere}\n *  + {@link clay.geometry.Plane}\n *  + {@link clay.geometry.Cylinder}\n *  + {@link clay.geometry.Cone}\n *  + {@link clay.geometry.ParametricSurface}\n *\n * It's simple to create a basic geometry with these classes.\n *\n```js\nvar sphere = new clay.geometry.Sphere({\n    radius: 2\n});\n```\n *\n * #### Create the geometry data by yourself\n *\n * Usually the vertex attributes data are created by the {@link clay.loader.GLTF} or procedural geometries like {@link clay.geometry.Sphere}.\n * Besides these, you can create the data manually. Here is a simple example to create a triangle.\n```js\nvar TRIANGLE_POSITIONS = [\n    [-0.5, -0.5, 0],\n    [0.5, -0.5, 0],\n    [0, 0.5, 0]\n];\nvar geometry = new clay.StaticGeometryBase();\n// Add triangle vertices to position attribute.\ngeometry.attributes.position.fromArray(TRIANGLE_POSITIONS);\n```\n * Then you can use the utility methods like `generateVertexNormals`, `generateTangents` to create the remaining necessary attributes.\n *\n *\n * #### Use with custom shaders\n *\n * If you wan't to write custom shaders. Don't forget to add SEMANTICS to these attributes. For example\n *\n ```glsl\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n```\n * These `POSITION`, `TEXCOORD_0`, `NORMAL` are SEMANTICS which will map the attributes in shader to the attributes in the GeometryBase\n *\n * Available attributes SEMANTICS includes `POSITION`, `TEXCOORD_0`, `TEXCOORD_1` `NORMAL`, `TANGENT`, `COLOR`, `WEIGHT`, `JOINT`.\n *\n *\n * @constructor clay.Geometry\n * @extends clay.GeometryBase\n */\nvar Geometry = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Geometry# */ {\n        /**\n         * Attributes of geometry. Including:\n         *  + `position`\n         *  + `texcoord0`\n         *  + `texcoord1`\n         *  + `normal`\n         *  + `tangent`\n         *  + `color`\n         *  + `weight`\n         *  + `joint`\n         *  + `barycentric`\n         *\n         * @type {Object.<string, clay.Geometry.Attribute>}\n         */\n        attributes: {\n            position: new Attribute('position', 'float', 3, 'POSITION'),\n            texcoord0: new Attribute('texcoord0', 'float', 2, 'TEXCOORD_0'),\n            texcoord1: new Attribute('texcoord1', 'float', 2, 'TEXCOORD_1'),\n            normal: new Attribute('normal', 'float', 3, 'NORMAL'),\n            tangent: new Attribute('tangent', 'float', 4, 'TANGENT'),\n            color: new Attribute('color', 'float', 4, 'COLOR'),\n            // Skinning attributes\n            // Each vertex can be bind to 4 bones, because the\n            // sum of weights is 1, so the weights is stored in vec3 and the last\n            // can be calculated by 1-w.x-w.y-w.z\n            weight: new Attribute('weight', 'float', 3, 'WEIGHT'),\n            joint: new Attribute('joint', 'float', 4, 'JOINT'),\n            // For wireframe display\n            // http://codeflow.org/entries/2012/aug/02/easy-wireframe-display-with-barycentric-coordinates/\n            barycentric: new Attribute('barycentric', 'float', 3, null),\n        },\n        /**\n         * Calculated bounding box of geometry.\n         * @type {clay.BoundingBox}\n         */\n        boundingBox: null\n    };\n},\n/** @lends clay.Geometry.prototype */\n{\n\n    mainAttribute: 'position',\n\n    /**\n     * Update boundingBox of Geometry\n     */\n    updateBoundingBox: function () {\n        var bbox = this.boundingBox;\n        if (!bbox) {\n            bbox = this.boundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        }\n        var posArr = this.attributes.position.value;\n        if (posArr && posArr.length) {\n            var min = bbox.min;\n            var max = bbox.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(minArr, posArr[0], posArr[1], posArr[2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(maxArr, posArr[0], posArr[1], posArr[2]);\n            for (var i = 3; i < posArr.length;) {\n                var x = posArr[i++];\n                var y = posArr[i++];\n                var z = posArr[i++];\n                if (x < minArr[0]) { minArr[0] = x; }\n                if (y < minArr[1]) { minArr[1] = y; }\n                if (z < minArr[2]) { minArr[2] = z; }\n\n                if (x > maxArr[0]) { maxArr[0] = x; }\n                if (y > maxArr[1]) { maxArr[1] = y; }\n                if (z > maxArr[2]) { maxArr[2] = z; }\n            }\n            min._dirty = true;\n            max._dirty = true;\n        }\n    },\n\n    /**\n     * Generate normals per vertex.\n     */\n    generateVertexNormals: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        var indices = this.indices;\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n\n        if (!normals || normals.length !== positions.length) {\n            normals = attributes.normal.value = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(positions.length);\n        }\n        else {\n            // Reset\n            for (var i = 0; i < normals.length; i++) {\n                normals[i] = 0;\n            }\n        }\n\n        var p1 = vec3Create();\n        var p2 = vec3Create();\n        var p3 = vec3Create();\n\n        var v21 = vec3Create();\n        var v32 = vec3Create();\n\n        var n = vec3Create();\n\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var f = 0; f < len;) {\n            if (indices) {\n                i1 = indices[f++];\n                i2 = indices[f++];\n                i3 = indices[f++];\n            }\n            else {\n                i1 = f++;\n                i2 = f++;\n                i3 = f++;\n            }\n\n            vec3Set(p1, positions[i1*3], positions[i1*3+1], positions[i1*3+2]);\n            vec3Set(p2, positions[i2*3], positions[i2*3+1], positions[i2*3+2]);\n            vec3Set(p3, positions[i3*3], positions[i3*3+1], positions[i3*3+2]);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v21, p1, p2);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v32, p2, p3);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(n, v21, v32);\n            // Already be weighted by the triangle area\n            for (var i = 0; i < 3; i++) {\n                normals[i1*3+i] = normals[i1*3+i] + n[i];\n                normals[i2*3+i] = normals[i2*3+i] + n[i];\n                normals[i3*3+i] = normals[i3*3+i] + n[i];\n            }\n        }\n\n        for (var i = 0; i < normals.length;) {\n            vec3Set(n, normals[i], normals[i+1], normals[i+2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(n, n);\n            normals[i++] = n[0];\n            normals[i++] = n[1];\n            normals[i++] = n[2];\n        }\n        this.dirty();\n    },\n\n    /**\n     * Generate normals per face.\n     */\n    generateFaceNormals: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        if (!this.isUniqueVertex()) {\n            this.generateUniqueVertex();\n        }\n\n        var indices = this.indices;\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n\n        var p1 = vec3Create();\n        var p2 = vec3Create();\n        var p3 = vec3Create();\n\n        var v21 = vec3Create();\n        var v32 = vec3Create();\n        var n = vec3Create();\n\n        if (!normals) {\n            normals = attributes.normal.value = new Float32Array(positions.length);\n        }\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var f = 0; f < len;) {\n            if (indices) {\n                i1 = indices[f++];\n                i2 = indices[f++];\n                i3 = indices[f++];\n            }\n            else {\n                i1 = f++;\n                i2 = f++;\n                i3 = f++;\n            }\n\n            vec3Set(p1, positions[i1*3], positions[i1*3+1], positions[i1*3+2]);\n            vec3Set(p2, positions[i2*3], positions[i2*3+1], positions[i2*3+2]);\n            vec3Set(p3, positions[i3*3], positions[i3*3+1], positions[i3*3+2]);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v21, p1, p2);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v32, p2, p3);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(n, v21, v32);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(n, n);\n\n            for (var i = 0; i < 3; i++) {\n                normals[i1*3 + i] = n[i];\n                normals[i2*3 + i] = n[i];\n                normals[i3*3 + i] = n[i];\n            }\n        }\n        this.dirty();\n    },\n\n    /**\n     * Generate tangents attributes.\n     */\n    generateTangents: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        var nVertex = this.vertexCount;\n        var attributes = this.attributes;\n        if (!attributes.tangent.value) {\n            attributes.tangent.value = new Float32Array(nVertex * 4);\n        }\n        var texcoords = attributes.texcoord0.value;\n        var positions = attributes.position.value;\n        var tangents = attributes.tangent.value;\n        var normals = attributes.normal.value;\n\n        if (!texcoords) {\n            console.warn('Geometry without texcoords can\\'t generate tangents.');\n            return;\n        }\n\n        var tan1 = [];\n        var tan2 = [];\n        for (var i = 0; i < nVertex; i++) {\n            tan1[i] = [0.0, 0.0, 0.0];\n            tan2[i] = [0.0, 0.0, 0.0];\n        }\n\n        var sdir = [0.0, 0.0, 0.0];\n        var tdir = [0.0, 0.0, 0.0];\n        var indices = this.indices;\n\n        var len = indices ? indices.length : this.vertexCount;\n        var i1, i2, i3;\n        for (var i = 0; i < len;) {\n            if (indices) {\n                i1 = indices[i++];\n                i2 = indices[i++];\n                i3 = indices[i++];\n            }\n            else {\n                i1 = i++;\n                i2 = i++;\n                i3 = i++;\n            }\n\n            var st1s = texcoords[i1 * 2],\n                st2s = texcoords[i2 * 2],\n                st3s = texcoords[i3 * 2],\n                st1t = texcoords[i1 * 2 + 1],\n                st2t = texcoords[i2 * 2 + 1],\n                st3t = texcoords[i3 * 2 + 1],\n\n                p1x = positions[i1 * 3],\n                p2x = positions[i2 * 3],\n                p3x = positions[i3 * 3],\n                p1y = positions[i1 * 3 + 1],\n                p2y = positions[i2 * 3 + 1],\n                p3y = positions[i3 * 3 + 1],\n                p1z = positions[i1 * 3 + 2],\n                p2z = positions[i2 * 3 + 2],\n                p3z = positions[i3 * 3 + 2];\n\n            var x1 = p2x - p1x,\n                x2 = p3x - p1x,\n                y1 = p2y - p1y,\n                y2 = p3y - p1y,\n                z1 = p2z - p1z,\n                z2 = p3z - p1z;\n\n            var s1 = st2s - st1s,\n                s2 = st3s - st1s,\n                t1 = st2t - st1t,\n                t2 = st3t - st1t;\n\n            var r = 1.0 / (s1 * t2 - t1 * s2);\n            sdir[0] = (t2 * x1 - t1 * x2) * r;\n            sdir[1] = (t2 * y1 - t1 * y2) * r;\n            sdir[2] = (t2 * z1 - t1 * z2) * r;\n\n            tdir[0] = (s1 * x2 - s2 * x1) * r;\n            tdir[1] = (s1 * y2 - s2 * y1) * r;\n            tdir[2] = (s1 * z2 - s2 * z1) * r;\n\n            vec3Add(tan1[i1], tan1[i1], sdir);\n            vec3Add(tan1[i2], tan1[i2], sdir);\n            vec3Add(tan1[i3], tan1[i3], sdir);\n            vec3Add(tan2[i1], tan2[i1], tdir);\n            vec3Add(tan2[i2], tan2[i2], tdir);\n            vec3Add(tan2[i3], tan2[i3], tdir);\n        }\n        var tmp = vec3Create();\n        var nCrossT = vec3Create();\n        var n = vec3Create();\n        for (var i = 0; i < nVertex; i++) {\n            n[0] = normals[i * 3];\n            n[1] = normals[i * 3 + 1];\n            n[2] = normals[i * 3 + 2];\n            var t = tan1[i];\n\n            // Gram-Schmidt orthogonalize\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scale(tmp, n, __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(n, t));\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(tmp, t, tmp);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].normalize(tmp, tmp);\n            // Calculate handedness.\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(nCrossT, n, t);\n            tangents[i * 4] = tmp[0];\n            tangents[i * 4 + 1] = tmp[1];\n            tangents[i * 4 + 2] = tmp[2];\n            // PENDING can config ?\n            tangents[i * 4 + 3] = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(nCrossT, tan2[i]) < 0.0 ? -1.0 : 1.0;\n        }\n        this.dirty();\n    },\n\n    /**\n     * If vertices are not shared by different indices.\n     */\n    isUniqueVertex: function () {\n        if (this.isUseIndices()) {\n            return this.vertexCount === this.indices.length;\n        }\n        else {\n            return true;\n        }\n    },\n    /**\n     * Create a unique vertex for each index.\n     */\n    generateUniqueVertex: function () {\n        if (!this.vertexCount || !this.indices) {\n            return;\n        }\n\n        if (this.indices.length > 0xffff) {\n            this.indices = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Uint32Array(this.indices);\n        }\n\n        var attributes = this.attributes;\n        var indices = this.indices;\n\n        var attributeNameList = this.getEnabledAttributes();\n\n        var oldAttrValues = {};\n        for (var a = 0; a < attributeNameList.length; a++) {\n            var name = attributeNameList[a];\n            oldAttrValues[name] = attributes[name].value;\n            attributes[name].init(this.indices.length);\n        }\n\n        var cursor = 0;\n        for (var i = 0; i < indices.length; i++) {\n            var ii = indices[i];\n            for (var a = 0; a < attributeNameList.length; a++) {\n                var name = attributeNameList[a];\n                var array = attributes[name].value;\n                var size = attributes[name].size;\n\n                for (var k = 0; k < size; k++) {\n                    array[cursor * size + k] = oldAttrValues[name][ii * size + k];\n                }\n            }\n            indices[i] = cursor;\n            cursor++;\n        }\n\n        this.dirty();\n    },\n\n    /**\n     * Generate barycentric coordinates for wireframe draw.\n     */\n    generateBarycentric: function () {\n        if (!this.vertexCount) {\n            return;\n        }\n\n        if (!this.isUniqueVertex()) {\n            this.generateUniqueVertex();\n        }\n\n        var attributes = this.attributes;\n        var array = attributes.barycentric.value;\n        var indices = this.indices;\n        // Already existed;\n        if (array && array.length === indices.length * 3) {\n            return;\n        }\n        array = attributes.barycentric.value = new Float32Array(indices.length * 3);\n\n        for (var i = 0; i < (indices ? indices.length : this.vertexCount / 3);) {\n            for (var j = 0; j < 3; j++) {\n                var ii = indices ? indices[i++] : (i * 3 + j);\n                array[ii * 3 + j] = 1;\n            }\n        }\n        this.dirty();\n    },\n\n    /**\n     * Apply transform to geometry attributes.\n     * @param {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n\n        var attributes = this.attributes;\n        var positions = attributes.position.value;\n        var normals = attributes.normal.value;\n        var tangents = attributes.tangent.value;\n\n        matrix = matrix.array;\n        // Normal Matrix\n        var inverseTransposeMatrix = __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].create();\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].invert(inverseTransposeMatrix, matrix);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTransposeMatrix, inverseTransposeMatrix);\n\n        var vec3TransformMat4 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].transformMat4;\n        var vec3ForEach = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].forEach;\n        vec3ForEach(positions, 3, 0, null, vec3TransformMat4, matrix);\n        if (normals) {\n            vec3ForEach(normals, 3, 0, null, vec3TransformMat4, inverseTransposeMatrix);\n        }\n        if (tangents) {\n            vec3ForEach(tangents, 4, 0, null, vec3TransformMat4, inverseTransposeMatrix);\n        }\n\n        if (this.boundingBox) {\n            this.updateBoundingBox();\n        }\n    },\n    /**\n     * Dispose geometry data in GL context.\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n        var chunks = cache.get('chunks');\n        if (chunks) {\n            for (var c = 0; c < chunks.length; c++) {\n                var chunk = chunks[c];\n\n                for (var k = 0; k < chunk.attributeBuffers.length; k++) {\n                    var attribs = chunk.attributeBuffers[k];\n                    renderer.gl.deleteBuffer(attribs.buffer);\n                }\n\n                if (chunk.indicesBuffer) {\n                    renderer.gl.deleteBuffer(chunk.indicesBuffer.buffer);\n                }\n            }\n        }\n        if (this.__vaoCache) {\n            var vaoExt = renderer.getGLExtension('OES_vertex_array_object');\n            for (var id in this.__vaoCache) {\n                var vao = this.__vaoCache[id].vao;\n                if (vao) {\n                    vaoExt.deleteVertexArrayOES(vao);\n                }\n            }\n        }\n        this.__vaoCache = {};\n        cache.deleteContext(renderer.__uid__);\n    }\n\n});\n\nGeometry.STATIC_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].STATIC_DRAW;\nGeometry.DYNAMIC_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].DYNAMIC_DRAW;\nGeometry.STREAM_DRAW = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].STREAM_DRAW;\n\nGeometry.AttributeBuffer = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].AttributeBuffer;\nGeometry.IndicesBuffer = __WEBPACK_IMPORTED_MODULE_4__GeometryBase__[\"a\" /* default */].IndicesBuffer;\n\nGeometry.Attribute = Attribute;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Geometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0dlb21ldHJ5LmpzP2MxZWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZlbmRvciBmcm9tICcuL2NvcmUvdmVuZG9yJztcbmltcG9ydCB2ZWMzIGZyb20gJy4vZ2xtYXRyaXgvdmVjMyc7XG5pbXBvcnQgbWF0NCBmcm9tICcuL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgR2VvbWV0cnlCYXNlIGZyb20gJy4vR2VvbWV0cnlCYXNlJztcblxudmFyIHZlYzNDcmVhdGUgPSB2ZWMzLmNyZWF0ZTtcbnZhciB2ZWMzQWRkID0gdmVjMy5hZGQ7XG52YXIgdmVjM1NldCA9IHZlYzMuc2V0O1xuXG52YXIgQXR0cmlidXRlID0gR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZTtcblxuLyoqXG4gKiBHZW9tZXRyeSBpbiBDbGF5R0wgY29udGFpbnMgdmVydGV4IGF0dHJpYnV0ZXMgb2YgbWVzaC4gVGhlc2UgdmVydGV4IGF0dHJpYnV0ZXMgd2lsbCBiZSBmaW5hbGx5IHByb3ZpZGVkIHRvIHRoZSB7QGxpbmsgY2xheS5TaGFkZXJ9LlxuICogRGlmZmVyZW50IHtAbGluayBjbGF5LlNoYWRlcn0gbmVlZHMgZGlmZmVyZW50IGF0dHJpYnV0ZXMuIEhlcmUgaXMgYSBsaXN0IG9mIGF0dHJpYnV0ZXMgdXNlZCBpbiB0aGUgYnVpbHRpbiBzaGFkZXJzLlxuICpcbiAqICsgcG9zaXRpb246IGBjbGF5LmJhc2ljYCwgYGNsYXkubGFtYmVydGAsIGBjbGF5LnN0YW5kYXJkYFxuICogKyB0ZXhjb29yZDA6IGBjbGF5LmJhc2ljYCwgYGNsYXkubGFtYmVydGAsIGBjbGF5LnN0YW5kYXJkYFxuICogKyBjb2xvcjogYGNsYXkuYmFzaWNgLCBgY2xheS5sYW1iZXJ0YCwgYGNsYXkuc3RhbmRhcmRgXG4gKiArIHdlaWdodDogYGNsYXkuYmFzaWNgLCBgY2xheS5sYW1iZXJ0YCwgYGNsYXkuc3RhbmRhcmRgXG4gKiArIGpvaW50OiBgY2xheS5iYXNpY2AsIGBjbGF5LmxhbWJlcnRgLCBgY2xheS5zdGFuZGFyZGBcbiAqICsgbm9ybWFsOiBgY2xheS5sYW1iZXJ0YCwgYGNsYXkuc3RhbmRhcmRgXG4gKiArIHRhbmdlbnQ6IGBjbGF5LnN0YW5kYXJkYFxuICpcbiAqICMjIyMgQ3JlYXRlIGEgcHJvY2VkdXJhbCBnZW9tZXRyeVxuICpcbiAqIENsYXlHTCBwcm92aWRlcyBhIGNvdXBsZSBvZiBidWlsdGluIHByb2NlZHVyYWwgZ2VvbWV0cmllcy4gSW5sY3VkaW5nOlxuICpcbiAqICArIHtAbGluayBjbGF5Lmdlb21ldHJ5LkN1YmV9XG4gKiAgKyB7QGxpbmsgY2xheS5nZW9tZXRyeS5TcGhlcmV9XG4gKiAgKyB7QGxpbmsgY2xheS5nZW9tZXRyeS5QbGFuZX1cbiAqICArIHtAbGluayBjbGF5Lmdlb21ldHJ5LkN5bGluZGVyfVxuICogICsge0BsaW5rIGNsYXkuZ2VvbWV0cnkuQ29uZX1cbiAqICArIHtAbGluayBjbGF5Lmdlb21ldHJ5LlBhcmFtZXRyaWNTdXJmYWNlfVxuICpcbiAqIEl0J3Mgc2ltcGxlIHRvIGNyZWF0ZSBhIGJhc2ljIGdlb21ldHJ5IHdpdGggdGhlc2UgY2xhc3Nlcy5cbiAqXG5gYGBqc1xudmFyIHNwaGVyZSA9IG5ldyBjbGF5Lmdlb21ldHJ5LlNwaGVyZSh7XG4gICAgcmFkaXVzOiAyXG59KTtcbmBgYFxuICpcbiAqICMjIyMgQ3JlYXRlIHRoZSBnZW9tZXRyeSBkYXRhIGJ5IHlvdXJzZWxmXG4gKlxuICogVXN1YWxseSB0aGUgdmVydGV4IGF0dHJpYnV0ZXMgZGF0YSBhcmUgY3JlYXRlZCBieSB0aGUge0BsaW5rIGNsYXkubG9hZGVyLkdMVEZ9IG9yIHByb2NlZHVyYWwgZ2VvbWV0cmllcyBsaWtlIHtAbGluayBjbGF5Lmdlb21ldHJ5LlNwaGVyZX0uXG4gKiBCZXNpZGVzIHRoZXNlLCB5b3UgY2FuIGNyZWF0ZSB0aGUgZGF0YSBtYW51YWxseS4gSGVyZSBpcyBhIHNpbXBsZSBleGFtcGxlIHRvIGNyZWF0ZSBhIHRyaWFuZ2xlLlxuYGBganNcbnZhciBUUklBTkdMRV9QT1NJVElPTlMgPSBbXG4gICAgWy0wLjUsIC0wLjUsIDBdLFxuICAgIFswLjUsIC0wLjUsIDBdLFxuICAgIFswLCAwLjUsIDBdXG5dO1xudmFyIGdlb21ldHJ5ID0gbmV3IGNsYXkuU3RhdGljR2VvbWV0cnlCYXNlKCk7XG4vLyBBZGQgdHJpYW5nbGUgdmVydGljZXMgdG8gcG9zaXRpb24gYXR0cmlidXRlLlxuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi5mcm9tQXJyYXkoVFJJQU5HTEVfUE9TSVRJT05TKTtcbmBgYFxuICogVGhlbiB5b3UgY2FuIHVzZSB0aGUgdXRpbGl0eSBtZXRob2RzIGxpa2UgYGdlbmVyYXRlVmVydGV4Tm9ybWFsc2AsIGBnZW5lcmF0ZVRhbmdlbnRzYCB0byBjcmVhdGUgdGhlIHJlbWFpbmluZyBuZWNlc3NhcnkgYXR0cmlidXRlcy5cbiAqXG4gKlxuICogIyMjIyBVc2Ugd2l0aCBjdXN0b20gc2hhZGVyc1xuICpcbiAqIElmIHlvdSB3YW4ndCB0byB3cml0ZSBjdXN0b20gc2hhZGVycy4gRG9uJ3QgZm9yZ2V0IHRvIGFkZCBTRU1BTlRJQ1MgdG8gdGhlc2UgYXR0cmlidXRlcy4gRm9yIGV4YW1wbGVcbiAqXG4gYGBgZ2xzbFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xudW5pZm9ybSBtYXQ0IHdvcmxkSW52ZXJzZVRyYW5zcG9zZSA6IFdPUkxESU5WRVJTRVRSQU5TUE9TRTtcbnVuaWZvcm0gbWF0NCB3b3JsZCA6IFdPUkxEO1xuXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQgOiBURVhDT09SRF8wO1xuYXR0cmlidXRlIHZlYzMgbm9ybWFsIDogTk9STUFMO1xuYGBgXG4gKiBUaGVzZSBgUE9TSVRJT05gLCBgVEVYQ09PUkRfMGAsIGBOT1JNQUxgIGFyZSBTRU1BTlRJQ1Mgd2hpY2ggd2lsbCBtYXAgdGhlIGF0dHJpYnV0ZXMgaW4gc2hhZGVyIHRvIHRoZSBhdHRyaWJ1dGVzIGluIHRoZSBHZW9tZXRyeUJhc2VcbiAqXG4gKiBBdmFpbGFibGUgYXR0cmlidXRlcyBTRU1BTlRJQ1MgaW5jbHVkZXMgYFBPU0lUSU9OYCwgYFRFWENPT1JEXzBgLCBgVEVYQ09PUkRfMWAgYE5PUk1BTGAsIGBUQU5HRU5UYCwgYENPTE9SYCwgYFdFSUdIVGAsIGBKT0lOVGAuXG4gKlxuICpcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lkdlb21ldHJ5XG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5QmFzZVxuICovXG52YXIgR2VvbWV0cnkgPSBHZW9tZXRyeUJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5Lkdlb21ldHJ5IyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRyaWJ1dGVzIG9mIGdlb21ldHJ5LiBJbmNsdWRpbmc6XG4gICAgICAgICAqICArIGBwb3NpdGlvbmBcbiAgICAgICAgICogICsgYHRleGNvb3JkMGBcbiAgICAgICAgICogICsgYHRleGNvb3JkMWBcbiAgICAgICAgICogICsgYG5vcm1hbGBcbiAgICAgICAgICogICsgYHRhbmdlbnRgXG4gICAgICAgICAqICArIGBjb2xvcmBcbiAgICAgICAgICogICsgYHdlaWdodGBcbiAgICAgICAgICogICsgYGpvaW50YFxuICAgICAgICAgKiAgKyBgYmFyeWNlbnRyaWNgXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3QuPHN0cmluZywgY2xheS5HZW9tZXRyeS5BdHRyaWJ1dGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgYXR0cmlidXRlczoge1xuICAgICAgICAgICAgcG9zaXRpb246IG5ldyBBdHRyaWJ1dGUoJ3Bvc2l0aW9uJywgJ2Zsb2F0JywgMywgJ1BPU0lUSU9OJyksXG4gICAgICAgICAgICB0ZXhjb29yZDA6IG5ldyBBdHRyaWJ1dGUoJ3RleGNvb3JkMCcsICdmbG9hdCcsIDIsICdURVhDT09SRF8wJyksXG4gICAgICAgICAgICB0ZXhjb29yZDE6IG5ldyBBdHRyaWJ1dGUoJ3RleGNvb3JkMScsICdmbG9hdCcsIDIsICdURVhDT09SRF8xJyksXG4gICAgICAgICAgICBub3JtYWw6IG5ldyBBdHRyaWJ1dGUoJ25vcm1hbCcsICdmbG9hdCcsIDMsICdOT1JNQUwnKSxcbiAgICAgICAgICAgIHRhbmdlbnQ6IG5ldyBBdHRyaWJ1dGUoJ3RhbmdlbnQnLCAnZmxvYXQnLCA0LCAnVEFOR0VOVCcpLFxuICAgICAgICAgICAgY29sb3I6IG5ldyBBdHRyaWJ1dGUoJ2NvbG9yJywgJ2Zsb2F0JywgNCwgJ0NPTE9SJyksXG4gICAgICAgICAgICAvLyBTa2lubmluZyBhdHRyaWJ1dGVzXG4gICAgICAgICAgICAvLyBFYWNoIHZlcnRleCBjYW4gYmUgYmluZCB0byA0IGJvbmVzLCBiZWNhdXNlIHRoZVxuICAgICAgICAgICAgLy8gc3VtIG9mIHdlaWdodHMgaXMgMSwgc28gdGhlIHdlaWdodHMgaXMgc3RvcmVkIGluIHZlYzMgYW5kIHRoZSBsYXN0XG4gICAgICAgICAgICAvLyBjYW4gYmUgY2FsY3VsYXRlZCBieSAxLXcueC13Lnktdy56XG4gICAgICAgICAgICB3ZWlnaHQ6IG5ldyBBdHRyaWJ1dGUoJ3dlaWdodCcsICdmbG9hdCcsIDMsICdXRUlHSFQnKSxcbiAgICAgICAgICAgIGpvaW50OiBuZXcgQXR0cmlidXRlKCdqb2ludCcsICdmbG9hdCcsIDQsICdKT0lOVCcpLFxuICAgICAgICAgICAgLy8gRm9yIHdpcmVmcmFtZSBkaXNwbGF5XG4gICAgICAgICAgICAvLyBodHRwOi8vY29kZWZsb3cub3JnL2VudHJpZXMvMjAxMi9hdWcvMDIvZWFzeS13aXJlZnJhbWUtZGlzcGxheS13aXRoLWJhcnljZW50cmljLWNvb3JkaW5hdGVzL1xuICAgICAgICAgICAgYmFyeWNlbnRyaWM6IG5ldyBBdHRyaWJ1dGUoJ2JhcnljZW50cmljJywgJ2Zsb2F0JywgMywgbnVsbCksXG4gICAgICAgIH0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYWxjdWxhdGVkIGJvdW5kaW5nIGJveCBvZiBnZW9tZXRyeS5cbiAgICAgICAgICogQHR5cGUge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICAgICAqL1xuICAgICAgICBib3VuZGluZ0JveDogbnVsbFxuICAgIH07XG59LFxuLyoqIEBsZW5kcyBjbGF5Lkdlb21ldHJ5LnByb3RvdHlwZSAqL1xue1xuXG4gICAgbWFpbkF0dHJpYnV0ZTogJ3Bvc2l0aW9uJyxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBib3VuZGluZ0JveCBvZiBHZW9tZXRyeVxuICAgICAqL1xuICAgIHVwZGF0ZUJvdW5kaW5nQm94OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBiYm94ID0gdGhpcy5ib3VuZGluZ0JveDtcbiAgICAgICAgaWYgKCFiYm94KSB7XG4gICAgICAgICAgICBiYm94ID0gdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwb3NBcnIgPSB0aGlzLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIGlmIChwb3NBcnIgJiYgcG9zQXJyLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIG1pbiA9IGJib3gubWluO1xuICAgICAgICAgICAgdmFyIG1heCA9IGJib3gubWF4O1xuICAgICAgICAgICAgdmFyIG1pbkFyciA9IG1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXhBcnIgPSBtYXguYXJyYXk7XG4gICAgICAgICAgICB2ZWMzLnNldChtaW5BcnIsIHBvc0FyclswXSwgcG9zQXJyWzFdLCBwb3NBcnJbMl0pO1xuICAgICAgICAgICAgdmVjMy5zZXQobWF4QXJyLCBwb3NBcnJbMF0sIHBvc0FyclsxXSwgcG9zQXJyWzJdKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAzOyBpIDwgcG9zQXJyLmxlbmd0aDspIHtcbiAgICAgICAgICAgICAgICB2YXIgeCA9IHBvc0FycltpKytdO1xuICAgICAgICAgICAgICAgIHZhciB5ID0gcG9zQXJyW2krK107XG4gICAgICAgICAgICAgICAgdmFyIHogPSBwb3NBcnJbaSsrXTtcbiAgICAgICAgICAgICAgICBpZiAoeCA8IG1pbkFyclswXSkgeyBtaW5BcnJbMF0gPSB4OyB9XG4gICAgICAgICAgICAgICAgaWYgKHkgPCBtaW5BcnJbMV0pIHsgbWluQXJyWzFdID0geTsgfVxuICAgICAgICAgICAgICAgIGlmICh6IDwgbWluQXJyWzJdKSB7IG1pbkFyclsyXSA9IHo7IH1cblxuICAgICAgICAgICAgICAgIGlmICh4ID4gbWF4QXJyWzBdKSB7IG1heEFyclswXSA9IHg7IH1cbiAgICAgICAgICAgICAgICBpZiAoeSA+IG1heEFyclsxXSkgeyBtYXhBcnJbMV0gPSB5OyB9XG4gICAgICAgICAgICAgICAgaWYgKHogPiBtYXhBcnJbMl0pIHsgbWF4QXJyWzJdID0gejsgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbWluLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICBtYXguX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBub3JtYWxzIHBlciB2ZXJ0ZXguXG4gICAgICovXG4gICAgZ2VuZXJhdGVWZXJ0ZXhOb3JtYWxzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZTtcbiAgICAgICAgdmFyIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZTtcblxuICAgICAgICBpZiAoIW5vcm1hbHMgfHwgbm9ybWFscy5sZW5ndGggIT09IHBvc2l0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICAgIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZSA9IG5ldyB2ZW5kb3IuRmxvYXQzMkFycmF5KHBvc2l0aW9ucy5sZW5ndGgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gUmVzZXRcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9ybWFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaV0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHAxID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgcDIgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBwMyA9IHZlYzNDcmVhdGUoKTtcblxuICAgICAgICB2YXIgdjIxID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICB2YXIgdjMyID0gdmVjM0NyZWF0ZSgpO1xuXG4gICAgICAgIHZhciBuID0gdmVjM0NyZWF0ZSgpO1xuXG4gICAgICAgIHZhciBsZW4gPSBpbmRpY2VzID8gaW5kaWNlcy5sZW5ndGggOiB0aGlzLnZlcnRleENvdW50O1xuICAgICAgICB2YXIgaTEsIGkyLCBpMztcbiAgICAgICAgZm9yICh2YXIgZiA9IDA7IGYgPCBsZW47KSB7XG4gICAgICAgICAgICBpZiAoaW5kaWNlcykge1xuICAgICAgICAgICAgICAgIGkxID0gaW5kaWNlc1tmKytdO1xuICAgICAgICAgICAgICAgIGkyID0gaW5kaWNlc1tmKytdO1xuICAgICAgICAgICAgICAgIGkzID0gaW5kaWNlc1tmKytdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaTEgPSBmKys7XG4gICAgICAgICAgICAgICAgaTIgPSBmKys7XG4gICAgICAgICAgICAgICAgaTMgPSBmKys7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZlYzNTZXQocDEsIHBvc2l0aW9uc1tpMSozXSwgcG9zaXRpb25zW2kxKjMrMV0sIHBvc2l0aW9uc1tpMSozKzJdKTtcbiAgICAgICAgICAgIHZlYzNTZXQocDIsIHBvc2l0aW9uc1tpMiozXSwgcG9zaXRpb25zW2kyKjMrMV0sIHBvc2l0aW9uc1tpMiozKzJdKTtcbiAgICAgICAgICAgIHZlYzNTZXQocDMsIHBvc2l0aW9uc1tpMyozXSwgcG9zaXRpb25zW2kzKjMrMV0sIHBvc2l0aW9uc1tpMyozKzJdKTtcblxuICAgICAgICAgICAgdmVjMy5zdWIodjIxLCBwMSwgcDIpO1xuICAgICAgICAgICAgdmVjMy5zdWIodjMyLCBwMiwgcDMpO1xuICAgICAgICAgICAgdmVjMy5jcm9zcyhuLCB2MjEsIHYzMik7XG4gICAgICAgICAgICAvLyBBbHJlYWR5IGJlIHdlaWdodGVkIGJ5IHRoZSB0cmlhbmdsZSBhcmVhXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaTEqMytpXSA9IG5vcm1hbHNbaTEqMytpXSArIG5baV07XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tpMiozK2ldID0gbm9ybWFsc1tpMiozK2ldICsgbltpXTtcbiAgICAgICAgICAgICAgICBub3JtYWxzW2kzKjMraV0gPSBub3JtYWxzW2kzKjMraV0gKyBuW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub3JtYWxzLmxlbmd0aDspIHtcbiAgICAgICAgICAgIHZlYzNTZXQobiwgbm9ybWFsc1tpXSwgbm9ybWFsc1tpKzFdLCBub3JtYWxzW2krMl0pO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUobiwgbik7XG4gICAgICAgICAgICBub3JtYWxzW2krK10gPSBuWzBdO1xuICAgICAgICAgICAgbm9ybWFsc1tpKytdID0gblsxXTtcbiAgICAgICAgICAgIG5vcm1hbHNbaSsrXSA9IG5bMl07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBub3JtYWxzIHBlciBmYWNlLlxuICAgICAqL1xuICAgIGdlbmVyYXRlRmFjZU5vcm1hbHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZlcnRleENvdW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuaXNVbmlxdWVWZXJ0ZXgoKSkge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZVVuaXF1ZVZlcnRleCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZTtcbiAgICAgICAgdmFyIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZTtcblxuICAgICAgICB2YXIgcDEgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBwMiA9IHZlYzNDcmVhdGUoKTtcbiAgICAgICAgdmFyIHAzID0gdmVjM0NyZWF0ZSgpO1xuXG4gICAgICAgIHZhciB2MjEgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciB2MzIgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBuID0gdmVjM0NyZWF0ZSgpO1xuXG4gICAgICAgIGlmICghbm9ybWFscykge1xuICAgICAgICAgICAgbm9ybWFscyA9IGF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbnMubGVuZ3RoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbGVuID0gaW5kaWNlcyA/IGluZGljZXMubGVuZ3RoIDogdGhpcy52ZXJ0ZXhDb3VudDtcbiAgICAgICAgdmFyIGkxLCBpMiwgaTM7XG4gICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgbGVuOykge1xuICAgICAgICAgICAgaWYgKGluZGljZXMpIHtcbiAgICAgICAgICAgICAgICBpMSA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgICAgICBpMiA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgICAgICBpMyA9IGluZGljZXNbZisrXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGkxID0gZisrO1xuICAgICAgICAgICAgICAgIGkyID0gZisrO1xuICAgICAgICAgICAgICAgIGkzID0gZisrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZWMzU2V0KHAxLCBwb3NpdGlvbnNbaTEqM10sIHBvc2l0aW9uc1tpMSozKzFdLCBwb3NpdGlvbnNbaTEqMysyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHAyLCBwb3NpdGlvbnNbaTIqM10sIHBvc2l0aW9uc1tpMiozKzFdLCBwb3NpdGlvbnNbaTIqMysyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHAzLCBwb3NpdGlvbnNbaTMqM10sIHBvc2l0aW9uc1tpMyozKzFdLCBwb3NpdGlvbnNbaTMqMysyXSk7XG5cbiAgICAgICAgICAgIHZlYzMuc3ViKHYyMSwgcDEsIHAyKTtcbiAgICAgICAgICAgIHZlYzMuc3ViKHYzMiwgcDIsIHAzKTtcbiAgICAgICAgICAgIHZlYzMuY3Jvc3MobiwgdjIxLCB2MzIpO1xuXG4gICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZShuLCBuKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub3JtYWxzW2kxKjMgKyBpXSA9IG5baV07XG4gICAgICAgICAgICAgICAgbm9ybWFsc1tpMiozICsgaV0gPSBuW2ldO1xuICAgICAgICAgICAgICAgIG5vcm1hbHNbaTMqMyArIGldID0gbltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpcnR5KCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlIHRhbmdlbnRzIGF0dHJpYnV0ZXMuXG4gICAgICovXG4gICAgZ2VuZXJhdGVUYW5nZW50czogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudmVydGV4Q291bnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuVmVydGV4ID0gdGhpcy52ZXJ0ZXhDb3VudDtcbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICAgIGlmICghYXR0cmlidXRlcy50YW5nZW50LnZhbHVlKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzLnRhbmdlbnQudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KG5WZXJ0ZXggKiA0KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdGV4Y29vcmRzID0gYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWU7XG4gICAgICAgIHZhciBwb3NpdGlvbnMgPSBhdHRyaWJ1dGVzLnBvc2l0aW9uLnZhbHVlO1xuICAgICAgICB2YXIgdGFuZ2VudHMgPSBhdHRyaWJ1dGVzLnRhbmdlbnQudmFsdWU7XG4gICAgICAgIHZhciBub3JtYWxzID0gYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG5cbiAgICAgICAgaWYgKCF0ZXhjb29yZHMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignR2VvbWV0cnkgd2l0aG91dCB0ZXhjb29yZHMgY2FuXFwndCBnZW5lcmF0ZSB0YW5nZW50cy4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0YW4xID0gW107XG4gICAgICAgIHZhciB0YW4yID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgblZlcnRleDsgaSsrKSB7XG4gICAgICAgICAgICB0YW4xW2ldID0gWzAuMCwgMC4wLCAwLjBdO1xuICAgICAgICAgICAgdGFuMltpXSA9IFswLjAsIDAuMCwgMC4wXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZGlyID0gWzAuMCwgMC4wLCAwLjBdO1xuICAgICAgICB2YXIgdGRpciA9IFswLjAsIDAuMCwgMC4wXTtcbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG5cbiAgICAgICAgdmFyIGxlbiA9IGluZGljZXMgPyBpbmRpY2VzLmxlbmd0aCA6IHRoaXMudmVydGV4Q291bnQ7XG4gICAgICAgIHZhciBpMSwgaTIsIGkzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgICAgIGlmIChpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgaTEgPSBpbmRpY2VzW2krK107XG4gICAgICAgICAgICAgICAgaTIgPSBpbmRpY2VzW2krK107XG4gICAgICAgICAgICAgICAgaTMgPSBpbmRpY2VzW2krK107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpMSA9IGkrKztcbiAgICAgICAgICAgICAgICBpMiA9IGkrKztcbiAgICAgICAgICAgICAgICBpMyA9IGkrKztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHN0MXMgPSB0ZXhjb29yZHNbaTEgKiAyXSxcbiAgICAgICAgICAgICAgICBzdDJzID0gdGV4Y29vcmRzW2kyICogMl0sXG4gICAgICAgICAgICAgICAgc3QzcyA9IHRleGNvb3Jkc1tpMyAqIDJdLFxuICAgICAgICAgICAgICAgIHN0MXQgPSB0ZXhjb29yZHNbaTEgKiAyICsgMV0sXG4gICAgICAgICAgICAgICAgc3QydCA9IHRleGNvb3Jkc1tpMiAqIDIgKyAxXSxcbiAgICAgICAgICAgICAgICBzdDN0ID0gdGV4Y29vcmRzW2kzICogMiArIDFdLFxuXG4gICAgICAgICAgICAgICAgcDF4ID0gcG9zaXRpb25zW2kxICogM10sXG4gICAgICAgICAgICAgICAgcDJ4ID0gcG9zaXRpb25zW2kyICogM10sXG4gICAgICAgICAgICAgICAgcDN4ID0gcG9zaXRpb25zW2kzICogM10sXG4gICAgICAgICAgICAgICAgcDF5ID0gcG9zaXRpb25zW2kxICogMyArIDFdLFxuICAgICAgICAgICAgICAgIHAyeSA9IHBvc2l0aW9uc1tpMiAqIDMgKyAxXSxcbiAgICAgICAgICAgICAgICBwM3kgPSBwb3NpdGlvbnNbaTMgKiAzICsgMV0sXG4gICAgICAgICAgICAgICAgcDF6ID0gcG9zaXRpb25zW2kxICogMyArIDJdLFxuICAgICAgICAgICAgICAgIHAyeiA9IHBvc2l0aW9uc1tpMiAqIDMgKyAyXSxcbiAgICAgICAgICAgICAgICBwM3ogPSBwb3NpdGlvbnNbaTMgKiAzICsgMl07XG5cbiAgICAgICAgICAgIHZhciB4MSA9IHAyeCAtIHAxeCxcbiAgICAgICAgICAgICAgICB4MiA9IHAzeCAtIHAxeCxcbiAgICAgICAgICAgICAgICB5MSA9IHAyeSAtIHAxeSxcbiAgICAgICAgICAgICAgICB5MiA9IHAzeSAtIHAxeSxcbiAgICAgICAgICAgICAgICB6MSA9IHAyeiAtIHAxeixcbiAgICAgICAgICAgICAgICB6MiA9IHAzeiAtIHAxejtcblxuICAgICAgICAgICAgdmFyIHMxID0gc3QycyAtIHN0MXMsXG4gICAgICAgICAgICAgICAgczIgPSBzdDNzIC0gc3QxcyxcbiAgICAgICAgICAgICAgICB0MSA9IHN0MnQgLSBzdDF0LFxuICAgICAgICAgICAgICAgIHQyID0gc3QzdCAtIHN0MXQ7XG5cbiAgICAgICAgICAgIHZhciByID0gMS4wIC8gKHMxICogdDIgLSB0MSAqIHMyKTtcbiAgICAgICAgICAgIHNkaXJbMF0gPSAodDIgKiB4MSAtIHQxICogeDIpICogcjtcbiAgICAgICAgICAgIHNkaXJbMV0gPSAodDIgKiB5MSAtIHQxICogeTIpICogcjtcbiAgICAgICAgICAgIHNkaXJbMl0gPSAodDIgKiB6MSAtIHQxICogejIpICogcjtcblxuICAgICAgICAgICAgdGRpclswXSA9IChzMSAqIHgyIC0gczIgKiB4MSkgKiByO1xuICAgICAgICAgICAgdGRpclsxXSA9IChzMSAqIHkyIC0gczIgKiB5MSkgKiByO1xuICAgICAgICAgICAgdGRpclsyXSA9IChzMSAqIHoyIC0gczIgKiB6MSkgKiByO1xuXG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjFbaTFdLCB0YW4xW2kxXSwgc2Rpcik7XG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjFbaTJdLCB0YW4xW2kyXSwgc2Rpcik7XG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjFbaTNdLCB0YW4xW2kzXSwgc2Rpcik7XG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjJbaTFdLCB0YW4yW2kxXSwgdGRpcik7XG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjJbaTJdLCB0YW4yW2kyXSwgdGRpcik7XG4gICAgICAgICAgICB2ZWMzQWRkKHRhbjJbaTNdLCB0YW4yW2kzXSwgdGRpcik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRtcCA9IHZlYzNDcmVhdGUoKTtcbiAgICAgICAgdmFyIG5Dcm9zc1QgPSB2ZWMzQ3JlYXRlKCk7XG4gICAgICAgIHZhciBuID0gdmVjM0NyZWF0ZSgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5WZXJ0ZXg7IGkrKykge1xuICAgICAgICAgICAgblswXSA9IG5vcm1hbHNbaSAqIDNdO1xuICAgICAgICAgICAgblsxXSA9IG5vcm1hbHNbaSAqIDMgKyAxXTtcbiAgICAgICAgICAgIG5bMl0gPSBub3JtYWxzW2kgKiAzICsgMl07XG4gICAgICAgICAgICB2YXIgdCA9IHRhbjFbaV07XG5cbiAgICAgICAgICAgIC8vIEdyYW0tU2NobWlkdCBvcnRob2dvbmFsaXplXG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHRtcCwgbiwgdmVjMy5kb3QobiwgdCkpO1xuICAgICAgICAgICAgdmVjMy5zdWIodG1wLCB0LCB0bXApO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUodG1wLCB0bXApO1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGhhbmRlZG5lc3MuXG4gICAgICAgICAgICB2ZWMzLmNyb3NzKG5Dcm9zc1QsIG4sIHQpO1xuICAgICAgICAgICAgdGFuZ2VudHNbaSAqIDRdID0gdG1wWzBdO1xuICAgICAgICAgICAgdGFuZ2VudHNbaSAqIDQgKyAxXSA9IHRtcFsxXTtcbiAgICAgICAgICAgIHRhbmdlbnRzW2kgKiA0ICsgMl0gPSB0bXBbMl07XG4gICAgICAgICAgICAvLyBQRU5ESU5HIGNhbiBjb25maWcgP1xuICAgICAgICAgICAgdGFuZ2VudHNbaSAqIDQgKyAzXSA9IHZlYzMuZG90KG5Dcm9zc1QsIHRhbjJbaV0pIDwgMC4wID8gLTEuMCA6IDEuMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpcnR5KCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHZlcnRpY2VzIGFyZSBub3Qgc2hhcmVkIGJ5IGRpZmZlcmVudCBpbmRpY2VzLlxuICAgICAqL1xuICAgIGlzVW5pcXVlVmVydGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVXNlSW5kaWNlcygpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52ZXJ0ZXhDb3VudCA9PT0gdGhpcy5pbmRpY2VzLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYSB1bmlxdWUgdmVydGV4IGZvciBlYWNoIGluZGV4LlxuICAgICAqL1xuICAgIGdlbmVyYXRlVW5pcXVlVmVydGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy52ZXJ0ZXhDb3VudCB8fCAhdGhpcy5pbmRpY2VzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pbmRpY2VzLmxlbmd0aCA+IDB4ZmZmZikge1xuICAgICAgICAgICAgdGhpcy5pbmRpY2VzID0gbmV3IHZlbmRvci5VaW50MzJBcnJheSh0aGlzLmluZGljZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuXG4gICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lTGlzdCA9IHRoaXMuZ2V0RW5hYmxlZEF0dHJpYnV0ZXMoKTtcblxuICAgICAgICB2YXIgb2xkQXR0clZhbHVlcyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGF0dHJpYnV0ZU5hbWVMaXN0Lmxlbmd0aDsgYSsrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZU5hbWVMaXN0W2FdO1xuICAgICAgICAgICAgb2xkQXR0clZhbHVlc1tuYW1lXSA9IGF0dHJpYnV0ZXNbbmFtZV0udmFsdWU7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzW25hbWVdLmluaXQodGhpcy5pbmRpY2VzLmxlbmd0aCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3Vyc29yID0gMDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaWkgPSBpbmRpY2VzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhdHRyaWJ1dGVOYW1lTGlzdC5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlTmFtZUxpc3RbYV07XG4gICAgICAgICAgICAgICAgdmFyIGFycmF5ID0gYXR0cmlidXRlc1tuYW1lXS52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGF0dHJpYnV0ZXNbbmFtZV0uc2l6ZTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2l6ZTsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGFycmF5W2N1cnNvciAqIHNpemUgKyBrXSA9IG9sZEF0dHJWYWx1ZXNbbmFtZV1baWkgKiBzaXplICsga107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5kaWNlc1tpXSA9IGN1cnNvcjtcbiAgICAgICAgICAgIGN1cnNvcisrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kaXJ0eSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBiYXJ5Y2VudHJpYyBjb29yZGluYXRlcyBmb3Igd2lyZWZyYW1lIGRyYXcuXG4gICAgICovXG4gICAgZ2VuZXJhdGVCYXJ5Y2VudHJpYzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudmVydGV4Q291bnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pc1VuaXF1ZVZlcnRleCgpKSB7XG4gICAgICAgICAgICB0aGlzLmdlbmVyYXRlVW5pcXVlVmVydGV4KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIGFycmF5ID0gYXR0cmlidXRlcy5iYXJ5Y2VudHJpYy52YWx1ZTtcbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgIC8vIEFscmVhZHkgZXhpc3RlZDtcbiAgICAgICAgaWYgKGFycmF5ICYmIGFycmF5Lmxlbmd0aCA9PT0gaW5kaWNlcy5sZW5ndGggKiAzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgYXJyYXkgPSBhdHRyaWJ1dGVzLmJhcnljZW50cmljLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShpbmRpY2VzLmxlbmd0aCAqIDMpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgKGluZGljZXMgPyBpbmRpY2VzLmxlbmd0aCA6IHRoaXMudmVydGV4Q291bnQgLyAzKTspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlpID0gaW5kaWNlcyA/IGluZGljZXNbaSsrXSA6IChpICogMyArIGopO1xuICAgICAgICAgICAgICAgIGFycmF5W2lpICogMyArIGpdID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpcnR5KCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IHRyYW5zZm9ybSB0byBnZW9tZXRyeSBhdHRyaWJ1dGVzLlxuICAgICAqIEBwYXJhbSB7Y2xheS5NYXRyaXg0fSBtYXRyaXhcbiAgICAgKi9cbiAgICBhcHBseVRyYW5zZm9ybTogZnVuY3Rpb24gKG1hdHJpeCkge1xuXG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZTtcbiAgICAgICAgdmFyIG5vcm1hbHMgPSBhdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZTtcbiAgICAgICAgdmFyIHRhbmdlbnRzID0gYXR0cmlidXRlcy50YW5nZW50LnZhbHVlO1xuXG4gICAgICAgIG1hdHJpeCA9IG1hdHJpeC5hcnJheTtcbiAgICAgICAgLy8gTm9ybWFsIE1hdHJpeFxuICAgICAgICB2YXIgaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgIG1hdDQuaW52ZXJ0KGludmVyc2VUcmFuc3Bvc2VNYXRyaXgsIG1hdHJpeCk7XG4gICAgICAgIG1hdDQudHJhbnNwb3NlKGludmVyc2VUcmFuc3Bvc2VNYXRyaXgsIGludmVyc2VUcmFuc3Bvc2VNYXRyaXgpO1xuXG4gICAgICAgIHZhciB2ZWMzVHJhbnNmb3JtTWF0NCA9IHZlYzMudHJhbnNmb3JtTWF0NDtcbiAgICAgICAgdmFyIHZlYzNGb3JFYWNoID0gdmVjMy5mb3JFYWNoO1xuICAgICAgICB2ZWMzRm9yRWFjaChwb3NpdGlvbnMsIDMsIDAsIG51bGwsIHZlYzNUcmFuc2Zvcm1NYXQ0LCBtYXRyaXgpO1xuICAgICAgICBpZiAobm9ybWFscykge1xuICAgICAgICAgICAgdmVjM0ZvckVhY2gobm9ybWFscywgMywgMCwgbnVsbCwgdmVjM1RyYW5zZm9ybU1hdDQsIGludmVyc2VUcmFuc3Bvc2VNYXRyaXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0YW5nZW50cykge1xuICAgICAgICAgICAgdmVjM0ZvckVhY2godGFuZ2VudHMsIDQsIDAsIG51bGwsIHZlYzNUcmFuc2Zvcm1NYXQ0LCBpbnZlcnNlVHJhbnNwb3NlTWF0cml4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUJvdW5kaW5nQm94KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgZ2VvbWV0cnkgZGF0YSBpbiBHTCBjb250ZXh0LlxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgIHZhciBjaHVua3MgPSBjYWNoZS5nZXQoJ2NodW5rcycpO1xuICAgICAgICBpZiAoY2h1bmtzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBjID0gMDsgYyA8IGNodW5rcy5sZW5ndGg7IGMrKykge1xuICAgICAgICAgICAgICAgIHZhciBjaHVuayA9IGNodW5rc1tjXTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2h1bmsuYXR0cmlidXRlQnVmZmVycy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlicyA9IGNodW5rLmF0dHJpYnV0ZUJ1ZmZlcnNba107XG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLmdsLmRlbGV0ZUJ1ZmZlcihhdHRyaWJzLmJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNodW5rLmluZGljZXNCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2wuZGVsZXRlQnVmZmVyKGNodW5rLmluZGljZXNCdWZmZXIuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX192YW9DYWNoZSkge1xuICAgICAgICAgICAgdmFyIHZhb0V4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xuICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5fX3Zhb0NhY2hlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbyA9IHRoaXMuX192YW9DYWNoZVtpZF0udmFvO1xuICAgICAgICAgICAgICAgIGlmICh2YW8pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFvRXh0LmRlbGV0ZVZlcnRleEFycmF5T0VTKHZhbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX192YW9DYWNoZSA9IHt9O1xuICAgICAgICBjYWNoZS5kZWxldGVDb250ZXh0KHJlbmRlcmVyLl9fdWlkX18pO1xuICAgIH1cblxufSk7XG5cbkdlb21ldHJ5LlNUQVRJQ19EUkFXID0gR2VvbWV0cnlCYXNlLlNUQVRJQ19EUkFXO1xuR2VvbWV0cnkuRFlOQU1JQ19EUkFXID0gR2VvbWV0cnlCYXNlLkRZTkFNSUNfRFJBVztcbkdlb21ldHJ5LlNUUkVBTV9EUkFXID0gR2VvbWV0cnlCYXNlLlNUUkVBTV9EUkFXO1xuXG5HZW9tZXRyeS5BdHRyaWJ1dGVCdWZmZXIgPSBHZW9tZXRyeUJhc2UuQXR0cmlidXRlQnVmZmVyO1xuR2VvbWV0cnkuSW5kaWNlc0J1ZmZlciA9IEdlb21ldHJ5QmFzZS5JbmRpY2VzQnVmZmVyO1xuXG5HZW9tZXRyeS5BdHRyaWJ1dGUgPSBBdHRyaWJ1dGU7XG5cbmV4cG9ydCBkZWZhdWx0IEdlb21ldHJ5O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0dlb21ldHJ5LmpzXG4vLyBtb2R1bGUgaWQgPSAxM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Vector3__ = __webpack_require__(3);\n\n\n\n\n\n\n/**\n * @constructor\n * @alias clay.Matrix4\n */\nvar Matrix4 = function() {\n\n    this._axisX = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n    this._axisY = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n    this._axisZ = new __WEBPACK_IMPORTED_MODULE_4__Vector3__[\"a\" /* default */]();\n\n    /**\n     * Storage of Matrix4\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix4#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix4#\n     */\n    this._dirty = true;\n};\n\nMatrix4.prototype = {\n\n    constructor: Matrix4,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix4}\n     */\n    adjoint: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Matrix4\n     * @return {clay.Matrix4}\n     */\n    clone: function() {\n        return (new Matrix4()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    copy: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].copy(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set upper 3x3 part from quaternion\n     * @param  {clay.Quaternion} q\n     * @return {clay.Matrix4}\n     */\n    fromQuat: function(q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromQuat(this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from a quaternion rotation and a vector translation\n     * @param  {clay.Quaternion} q\n     * @param  {clay.Vector3} v\n     * @return {clay.Matrix4}\n     */\n    fromRotationTranslation: function(q, v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(this.array, q.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from Matrix2d, it is used when converting a 2d shape to 3d space.\n     * In 3d space it is equivalent to ranslate on xy plane and rotate about z axis\n     * @param  {clay.Matrix2d} m2d\n     * @return {clay.Matrix4}\n     */\n    fromMat2d: function(m2d) {\n        Matrix4.fromMat2d(this, m2d);\n        return this;\n    },\n\n    /**\n     * Set from frustum bounds\n     * @param  {number} left\n     * @param  {number} right\n     * @param  {number} bottom\n     * @param  {number} top\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    frustum: function (left, right, bottom, top, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].frustum(this.array, left, right, bottom, top, near, far);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix4}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix4}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set as a matrix with the given eye position, focal point, and up axis\n     * @param  {clay.Vector3} eye\n     * @param  {clay.Vector3} center\n     * @param  {clay.Vector3} up\n     * @return {clay.Matrix4}\n     */\n    lookAt: function(eye, center, up) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].lookAt(this.array, eye.array, center.array, up.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix4} a\n     * @return {clay.Matrix4}\n     */\n    mulLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix4} b\n     * @return {clay.Matrix4}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    multiplyLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set as a orthographic projection matrix\n     * @param  {number} left\n     * @param  {number} right\n     * @param  {number} bottom\n     * @param  {number} top\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    ortho: function(left, right, bottom, top, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].ortho(this.array, left, right, bottom, top, near, far);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Set as a perspective projection matrix\n     * @param  {number} fovy\n     * @param  {number} aspect\n     * @param  {number} near\n     * @param  {number} far\n     * @return {clay.Matrix4}\n     */\n    perspective: function(fovy, aspect, near, far) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].perspective(this.array, fovy, aspect, near, far);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by rad about axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param  {number}   rad\n     * @param  {clay.Vector3} axis\n     * @return {clay.Matrix4}\n     */\n    rotate: function(rad, axis) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotate(this.array, this.array, rad, axis.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about X axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateX: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateX(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Y axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateY: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateY(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Z axis.\n     * Equal to right-multiply a rotaion matrix\n     * @param {number} rad\n     * @return {clay.Matrix4}\n     */\n    rotateZ: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateZ(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * Equal to right-multiply a scale matrix\n     * @param  {clay.Vector3}  s\n     * @return {clay.Matrix4}\n     */\n    scale: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v.\n     * Equal to right-multiply a translate matrix\n     * @param  {clay.Vector3}  v\n     * @return {clay.Matrix4}\n     */\n    translate: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Decompose a matrix to SRT\n     * @param {clay.Vector3} [scale]\n     * @param {clay.Quaternion} rotation\n     * @param {clay.Vector} position\n     * @see http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.matrix.decompose.aspx\n     */\n    decomposeMatrix: (function() {\n\n        var x = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var y = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var z = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        var m3 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__[\"a\" /* default */].create();\n\n        return function(scale, rotation, position) {\n\n            var el = this.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(x, el[0], el[1], el[2]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(y, el[4], el[5], el[6]);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].set(z, el[8], el[9], el[10]);\n\n            var sx = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(x);\n            var sy = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(y);\n            var sz = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].length(z);\n\n            // if determine is negative, we need to invert one scale\n            var det = this.determinant();\n            if (det < 0) {\n                sx = -sx;\n            }\n\n            if (scale) {\n                scale.set(sx, sy, sz);\n            }\n\n            position.set(el[12], el[13], el[14]);\n\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_mat3__[\"a\" /* default */].fromMat4(m3, el);\n            // Not like mat4, mat3 in glmatrix seems to be row-based\n            // Seems fixed in gl-matrix 2.2.2\n            // https://github.com/toji/gl-matrix/issues/114\n            // mat3.transpose(m3, m3);\n\n            m3[0] /= sx;\n            m3[1] /= sx;\n            m3[2] /= sx;\n\n            m3[3] /= sy;\n            m3[4] /= sy;\n            m3[5] /= sy;\n\n            m3[6] /= sz;\n            m3[7] /= sz;\n            m3[8] /= sz;\n\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__[\"a\" /* default */].fromMat3(rotation.array, m3);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_quat__[\"a\" /* default */].normalize(rotation.array, rotation.array);\n\n            rotation._dirty = true;\n            position._dirty = true;\n        };\n    })(),\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n\nif (defineProperty) {\n    var proto = Matrix4.prototype;\n    /**\n     * Z Axis of local transform\n     * @name z\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            var el = this.array;\n            this._axisZ.set(el[8], el[9], el[10]);\n            return this._axisZ;\n        },\n        set: function (v) {\n            // TODO Here has a problem\n            // If only set an item of vector will not work\n            var el = this.array;\n            v = v.array;\n            el[8] = v[0];\n            el[9] = v[1];\n            el[10] = v[2];\n\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * Y Axis of local transform\n     * @name y\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            var el = this.array;\n            this._axisY.set(el[4], el[5], el[6]);\n            return this._axisY;\n        },\n        set: function (v) {\n            var el = this.array;\n            v = v.array;\n            el[4] = v[0];\n            el[5] = v[1];\n            el[6] = v[2];\n\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * X Axis of local transform\n     * @name x\n     * @type {clay.Vector3}\n     * @memberOf clay.Matrix4\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            var el = this.array;\n            this._axisX.set(el[0], el[1], el[2]);\n            return this._axisX;\n        },\n        set: function (v) {\n            var el = this.array;\n            v = v.array;\n            el[0] = v[0];\n            el[1] = v[1];\n            el[2] = v[2];\n\n            this._dirty = true;\n        }\n    })\n}\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.adjoint = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} a\n * @return {number}\n */\nMatrix4.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @return {clay.Matrix4}\n */\nMatrix4.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {number}  left\n * @param  {number}  right\n * @param  {number}  bottom\n * @param  {number}  top\n * @param  {number}  near\n * @param  {number}  far\n * @return {clay.Matrix4}\n */\nMatrix4.ortho = function(out, left, right, bottom, top, near, far) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].ortho(out.array, left, right, bottom, top, near, far);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {number}  fovy\n * @param  {number}  aspect\n * @param  {number}  near\n * @param  {number}  far\n * @return {clay.Matrix4}\n */\nMatrix4.perspective = function(out, fovy, aspect, near, far) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].perspective(out.array, fovy, aspect, near, far);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Vector3} eye\n * @param  {clay.Vector3} center\n * @param  {clay.Vector3} up\n * @return {clay.Matrix4}\n */\nMatrix4.lookAt = function(out, eye, center, up) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].lookAt(out.array, eye.array, center.array, up.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Matrix4} b\n * @return {clay.Matrix4}\n */\nMatrix4.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Matrix4} b\n * @return {clay.Matrix4}\n */\nMatrix4.multiply = Matrix4.mul;\n\n/**\n * @param  {clay.Matrix4}    out\n * @param  {clay.Quaternion} q\n * @return {clay.Matrix4}\n */\nMatrix4.fromQuat = function(out, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromQuat(out.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4}    out\n * @param  {clay.Quaternion} q\n * @param  {clay.Vector3}    v\n * @return {clay.Matrix4}\n */\nMatrix4.fromRotationTranslation = function(out, q, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(out.array, q.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} m4\n * @param  {clay.Matrix2d} m2d\n * @return {clay.Matrix4}\n */\nMatrix4.fromMat2d = function(m4, m2d) {\n    m4._dirty = true;\n    var m2d = m2d.array;\n    var m4 = m4.array;\n\n    m4[0] = m2d[0];\n    m4[4] = m2d[2];\n    m4[12] = m2d[4];\n\n    m4[1] = m2d[1];\n    m4[5] = m2d[3];\n    m4[13] = m2d[5];\n\n    return m4;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @param  {clay.Vector3} axis\n * @return {clay.Matrix4}\n */\nMatrix4.rotate = function(out, a, rad, axis) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotate(out.array, a.array, rad, axis.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateX = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateX(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateY = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateY(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {number}  rad\n * @return {clay.Matrix4}\n */\nMatrix4.rotateZ = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].rotateZ(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Vector3} v\n * @return {clay.Matrix4}\n */\nMatrix4.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix4}\n */\nMatrix4.transpose = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix4} out\n * @param  {clay.Matrix4} a\n * @param  {clay.Vector3} v\n * @return {clay.Matrix4}\n */\nMatrix4.translate = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat4__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvTWF0cml4NC5qcz9mZDc3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYXQ0IGZyb20gJy4uL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5pbXBvcnQgcXVhdCBmcm9tICcuLi9nbG1hdHJpeC9xdWF0JztcbmltcG9ydCBtYXQzIGZyb20gJy4uL2dsbWF0cml4L21hdDMnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9WZWN0b3IzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5Lk1hdHJpeDRcbiAqL1xudmFyIE1hdHJpeDQgPSBmdW5jdGlvbigpIHtcblxuICAgIHRoaXMuX2F4aXNYID0gbmV3IFZlY3RvcjMoKTtcbiAgICB0aGlzLl9heGlzWSA9IG5ldyBWZWN0b3IzKCk7XG4gICAgdGhpcy5fYXhpc1ogPSBuZXcgVmVjdG9yMygpO1xuXG4gICAgLyoqXG4gICAgICogU3RvcmFnZSBvZiBNYXRyaXg0XG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDQjXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IG1hdDQuY3JlYXRlKCk7XG5cbiAgICAvKipcbiAgICAgKiBAbmFtZSBfZGlydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXg0I1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cbk1hdHJpeDQucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IE1hdHJpeDQsXG5cbiAgICAvKipcbiAgICAgKiBTZXQgY29tcG9uZW50cyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtICB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBhcnJcbiAgICAgKi9cbiAgICBzZXRBcnJheTogZnVuY3Rpb24gKGFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlbaV0gPSBhcnJbaV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgYWRqdWdhdGUgb2Ygc2VsZiwgaW4tcGxhY2VcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgYWRqb2ludDogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDQuYWRqb2ludCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgTWF0cml4NFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAobmV3IE1hdHJpeDQoKSkuY29weSh0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24oYSkge1xuICAgICAgICBtYXQ0LmNvcHkodGhpcy5hcnJheSwgYS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBtYXRyaXggZGV0ZXJtaW5hbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGV0ZXJtaW5hbnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbWF0NC5kZXRlcm1pbmFudCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHVwcGVyIDN4MyBwYXJ0IGZyb20gcXVhdGVybmlvblxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gcVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBmcm9tUXVhdDogZnVuY3Rpb24ocSkge1xuICAgICAgICBtYXQ0LmZyb21RdWF0KHRoaXMuYXJyYXksIHEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZnJvbSBhIHF1YXRlcm5pb24gcm90YXRpb24gYW5kIGEgdmVjdG9yIHRyYW5zbGF0aW9uXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSB2XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGZyb21Sb3RhdGlvblRyYW5zbGF0aW9uOiBmdW5jdGlvbihxLCB2KSB7XG4gICAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24odGhpcy5hcnJheSwgcS5hcnJheSwgdi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBmcm9tIE1hdHJpeDJkLCBpdCBpcyB1c2VkIHdoZW4gY29udmVydGluZyBhIDJkIHNoYXBlIHRvIDNkIHNwYWNlLlxuICAgICAqIEluIDNkIHNwYWNlIGl0IGlzIGVxdWl2YWxlbnQgdG8gcmFuc2xhdGUgb24geHkgcGxhbmUgYW5kIHJvdGF0ZSBhYm91dCB6IGF4aXNcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBtMmRcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgZnJvbU1hdDJkOiBmdW5jdGlvbihtMmQpIHtcbiAgICAgICAgTWF0cml4NC5mcm9tTWF0MmQodGhpcywgbTJkKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBmcm9tIGZydXN0dW0gYm91bmRzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBsZWZ0XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSByaWdodFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gYm90dG9tXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB0b3BcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IG5lYXJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGZhclxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBmcnVzdHVtOiBmdW5jdGlvbiAobGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgICAgICAgbWF0NC5mcnVzdHVtKHRoaXMuYXJyYXksIGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGEgaWRlbnRpdHkgbWF0cml4XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGlkZW50aXR5OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0NC5pZGVudGl0eSh0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW52ZXJ0IHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgaW52ZXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0NC5pbnZlcnQodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBhcyBhIG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpc1xuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gZXllXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBjZW50ZXJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHVwXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGxvb2tBdDogZnVuY3Rpb24oZXllLCBjZW50ZXIsIHVwKSB7XG4gICAgICAgIG1hdDQubG9va0F0KHRoaXMuYXJyYXksIGV5ZS5hcnJheSwgY2VudGVyLmFycmF5LCB1cC5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdXRpcGx5XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIG11bDogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQ0Lm11bCh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIG11bHRpcGx5TGVmdFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBtdWxMZWZ0OiBmdW5jdGlvbihhKSB7XG4gICAgICAgIG1hdDQubXVsKHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIG11bHRpcGx5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDQubXVsdGlwbHkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11bHRpcGx5IGEgYW5kIHNlbGYsIGEgaXMgb24gdGhlIGxlZnRcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgbXVsdGlwbHlMZWZ0OiBmdW5jdGlvbihhKSB7XG4gICAgICAgIG1hdDQubXVsdGlwbHkodGhpcy5hcnJheSwgYS5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBhcyBhIG9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gbGVmdFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gcmlnaHRcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGJvdHRvbVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdG9wXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBuZWFyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBmYXJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgb3J0aG86IGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBib3R0b20sIHRvcCwgbmVhciwgZmFyKSB7XG4gICAgICAgIG1hdDQub3J0aG8odGhpcy5hcnJheSwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0IGFzIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGZvdnlcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGFzcGVjdFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gbmVhclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZmFyXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHBlcnNwZWN0aXZlOiBmdW5jdGlvbihmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICAgICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMuYXJyYXksIGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgcmFkIGFib3V0IGF4aXMuXG4gICAgICogRXF1YWwgdG8gcmlnaHQtbXVsdGlwbHkgYSByb3RhaW9uIG1hdHJpeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gICByYWRcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGF4aXNcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgcm90YXRlOiBmdW5jdGlvbihyYWQsIGF4aXMpIHtcbiAgICAgICAgbWF0NC5yb3RhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkLCBheGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW4gYWJvdXQgWCBheGlzLlxuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgcm90YWlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHJvdGF0ZVg6IGZ1bmN0aW9uKHJhZCkge1xuICAgICAgICBtYXQ0LnJvdGF0ZVgodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW4gYWJvdXQgWSBheGlzLlxuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgcm90YWlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHJvdGF0ZVk6IGZ1bmN0aW9uKHJhZCkge1xuICAgICAgICBtYXQ0LnJvdGF0ZVkodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW4gYWJvdXQgWiBheGlzLlxuICAgICAqIEVxdWFsIHRvIHJpZ2h0LW11bHRpcGx5IGEgcm90YWlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHJvdGF0ZVo6IGZ1bmN0aW9uKHJhZCkge1xuICAgICAgICBtYXQ0LnJvdGF0ZVoodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgc2VsZiBieSBzXG4gICAgICogRXF1YWwgdG8gcmlnaHQtbXVsdGlwbHkgYSBzY2FsZSBtYXRyaXhcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICBzXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIHNjYWxlOiBmdW5jdGlvbih2KSB7XG4gICAgICAgIG1hdDQuc2NhbGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgdi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zbGF0ZSBzZWxmIGJ5IHYuXG4gICAgICogRXF1YWwgdG8gcmlnaHQtbXVsdGlwbHkgYSB0cmFuc2xhdGUgbWF0cml4XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgdlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICB0cmFuc2xhdGU6IGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgbWF0NC50cmFuc2xhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgdi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9zZSBzZWxmLCBpbi1wbGFjZS5cbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgdHJhbnNwb3NlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0NC50cmFuc3Bvc2UodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlY29tcG9zZSBhIG1hdHJpeCB0byBTUlRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW3NjYWxlXVxuICAgICAqIEBwYXJhbSB7Y2xheS5RdWF0ZXJuaW9ufSByb3RhdGlvblxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3J9IHBvc2l0aW9uXG4gICAgICogQHNlZSBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbWljcm9zb2Z0LnhuYS5mcmFtZXdvcmsubWF0cml4LmRlY29tcG9zZS5hc3B4XG4gICAgICovXG4gICAgZGVjb21wb3NlTWF0cml4OiAoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIHggPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgeSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHZhciB6ID0gdmVjMy5jcmVhdGUoKTtcblxuICAgICAgICB2YXIgbTMgPSBtYXQzLmNyZWF0ZSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzY2FsZSwgcm90YXRpb24sIHBvc2l0aW9uKSB7XG5cbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuYXJyYXk7XG4gICAgICAgICAgICB2ZWMzLnNldCh4LCBlbFswXSwgZWxbMV0sIGVsWzJdKTtcbiAgICAgICAgICAgIHZlYzMuc2V0KHksIGVsWzRdLCBlbFs1XSwgZWxbNl0pO1xuICAgICAgICAgICAgdmVjMy5zZXQoeiwgZWxbOF0sIGVsWzldLCBlbFsxMF0pO1xuXG4gICAgICAgICAgICB2YXIgc3ggPSB2ZWMzLmxlbmd0aCh4KTtcbiAgICAgICAgICAgIHZhciBzeSA9IHZlYzMubGVuZ3RoKHkpO1xuICAgICAgICAgICAgdmFyIHN6ID0gdmVjMy5sZW5ndGgoeik7XG5cbiAgICAgICAgICAgIC8vIGlmIGRldGVybWluZSBpcyBuZWdhdGl2ZSwgd2UgbmVlZCB0byBpbnZlcnQgb25lIHNjYWxlXG4gICAgICAgICAgICB2YXIgZGV0ID0gdGhpcy5kZXRlcm1pbmFudCgpO1xuICAgICAgICAgICAgaWYgKGRldCA8IDApIHtcbiAgICAgICAgICAgICAgICBzeCA9IC1zeDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNjYWxlKSB7XG4gICAgICAgICAgICAgICAgc2NhbGUuc2V0KHN4LCBzeSwgc3opO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb3NpdGlvbi5zZXQoZWxbMTJdLCBlbFsxM10sIGVsWzE0XSk7XG5cbiAgICAgICAgICAgIG1hdDMuZnJvbU1hdDQobTMsIGVsKTtcbiAgICAgICAgICAgIC8vIE5vdCBsaWtlIG1hdDQsIG1hdDMgaW4gZ2xtYXRyaXggc2VlbXMgdG8gYmUgcm93LWJhc2VkXG4gICAgICAgICAgICAvLyBTZWVtcyBmaXhlZCBpbiBnbC1tYXRyaXggMi4yLjJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90b2ppL2dsLW1hdHJpeC9pc3N1ZXMvMTE0XG4gICAgICAgICAgICAvLyBtYXQzLnRyYW5zcG9zZShtMywgbTMpO1xuXG4gICAgICAgICAgICBtM1swXSAvPSBzeDtcbiAgICAgICAgICAgIG0zWzFdIC89IHN4O1xuICAgICAgICAgICAgbTNbMl0gLz0gc3g7XG5cbiAgICAgICAgICAgIG0zWzNdIC89IHN5O1xuICAgICAgICAgICAgbTNbNF0gLz0gc3k7XG4gICAgICAgICAgICBtM1s1XSAvPSBzeTtcblxuICAgICAgICAgICAgbTNbNl0gLz0gc3o7XG4gICAgICAgICAgICBtM1s3XSAvPSBzejtcbiAgICAgICAgICAgIG0zWzhdIC89IHN6O1xuXG4gICAgICAgICAgICBxdWF0LmZyb21NYXQzKHJvdGF0aW9uLmFycmF5LCBtMyk7XG4gICAgICAgICAgICBxdWF0Lm5vcm1hbGl6ZShyb3RhdGlvbi5hcnJheSwgcm90YXRpb24uYXJyYXkpO1xuXG4gICAgICAgICAgICByb3RhdGlvbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgcG9zaXRpb24uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG5cbmlmIChkZWZpbmVQcm9wZXJ0eSkge1xuICAgIHZhciBwcm90byA9IE1hdHJpeDQucHJvdG90eXBlO1xuICAgIC8qKlxuICAgICAqIFogQXhpcyBvZiBsb2NhbCB0cmFuc2Zvcm1cbiAgICAgKiBAbmFtZSB6XG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXg0XG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgZGVmaW5lUHJvcGVydHkocHJvdG8sICd6Jywge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBlbCA9IHRoaXMuYXJyYXk7XG4gICAgICAgICAgICB0aGlzLl9heGlzWi5zZXQoZWxbOF0sIGVsWzldLCBlbFsxMF0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F4aXNaO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAvLyBUT0RPIEhlcmUgaGFzIGEgcHJvYmxlbVxuICAgICAgICAgICAgLy8gSWYgb25seSBzZXQgYW4gaXRlbSBvZiB2ZWN0b3Igd2lsbCBub3Qgd29ya1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hcnJheTtcbiAgICAgICAgICAgIHYgPSB2LmFycmF5O1xuICAgICAgICAgICAgZWxbOF0gPSB2WzBdO1xuICAgICAgICAgICAgZWxbOV0gPSB2WzFdO1xuICAgICAgICAgICAgZWxbMTBdID0gdlsyXTtcblxuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBZIEF4aXMgb2YgbG9jYWwgdHJhbnNmb3JtXG4gICAgICogQG5hbWUgeVxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4NFxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIGRlZmluZVByb3BlcnR5KHByb3RvLCAneScsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmFycmF5O1xuICAgICAgICAgICAgdGhpcy5fYXhpc1kuc2V0KGVsWzRdLCBlbFs1XSwgZWxbNl0pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2F4aXNZO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICB2YXIgZWwgPSB0aGlzLmFycmF5O1xuICAgICAgICAgICAgdiA9IHYuYXJyYXk7XG4gICAgICAgICAgICBlbFs0XSA9IHZbMF07XG4gICAgICAgICAgICBlbFs1XSA9IHZbMV07XG4gICAgICAgICAgICBlbFs2XSA9IHZbMl07XG5cbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogWCBBeGlzIG9mIGxvY2FsIHRyYW5zZm9ybVxuICAgICAqIEBuYW1lIHhcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3gnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hcnJheTtcbiAgICAgICAgICAgIHRoaXMuX2F4aXNYLnNldChlbFswXSwgZWxbMV0sIGVsWzJdKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9heGlzWDtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5hcnJheTtcbiAgICAgICAgICAgIHYgPSB2LmFycmF5O1xuICAgICAgICAgICAgZWxbMF0gPSB2WzBdO1xuICAgICAgICAgICAgZWxbMV0gPSB2WzFdO1xuICAgICAgICAgICAgZWxbMl0gPSB2WzJdO1xuXG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KVxufVxuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5hZGpvaW50ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0NC5hZGpvaW50KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBtYXQ0LmNvcHkob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTWF0cml4NC5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gbWF0NC5kZXRlcm1pbmFudChhLmFycmF5KTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG1hdDQuaWRlbnRpdHkob3V0LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgbGVmdFxuICogQHBhcmFtICB7bnVtYmVyfSAgcmlnaHRcbiAqIEBwYXJhbSAge251bWJlcn0gIGJvdHRvbVxuICogQHBhcmFtICB7bnVtYmVyfSAgdG9wXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBuZWFyXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBmYXJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5vcnRobyA9IGZ1bmN0aW9uKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgICBtYXQ0Lm9ydGhvKG91dC5hcnJheSwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBmb3Z5XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBhc3BlY3RcbiAqIEBwYXJhbSAge251bWJlcn0gIG5lYXJcbiAqIEBwYXJhbSAge251bWJlcn0gIGZhclxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnBlcnNwZWN0aXZlID0gZnVuY3Rpb24ob3V0LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcikge1xuICAgIG1hdDQucGVyc3BlY3RpdmUob3V0LmFycmF5LCBmb3Z5LCBhc3BlY3QsIG5lYXIsIGZhcik7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gZXllXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGNlbnRlclxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSB1cFxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0Lmxvb2tBdCA9IGZ1bmN0aW9uKG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gICAgbWF0NC5sb29rQXQob3V0LmFycmF5LCBleWUuYXJyYXksIGNlbnRlci5hcnJheSwgdXAuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5pbnZlcnQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBtYXQ0LmludmVydChvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYlxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0Lm11bCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG1hdDQubXVsKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5tdWx0aXBseSA9IE1hdHJpeDQubXVsO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gICAgb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IHFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5mcm9tUXVhdCA9IGZ1bmN0aW9uKG91dCwgcSkge1xuICAgIG1hdDQuZnJvbVF1YXQob3V0LmFycmF5LCBxLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9ICAgIG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICAgIHZcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5mcm9tUm90YXRpb25UcmFuc2xhdGlvbiA9IGZ1bmN0aW9uKG91dCwgcSwgdikge1xuICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24ob3V0LmFycmF5LCBxLmFycmF5LCB2LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG00XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBtMmRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5mcm9tTWF0MmQgPSBmdW5jdGlvbihtNCwgbTJkKSB7XG4gICAgbTQuX2RpcnR5ID0gdHJ1ZTtcbiAgICB2YXIgbTJkID0gbTJkLmFycmF5O1xuICAgIHZhciBtNCA9IG00LmFycmF5O1xuXG4gICAgbTRbMF0gPSBtMmRbMF07XG4gICAgbTRbNF0gPSBtMmRbMl07XG4gICAgbTRbMTJdID0gbTJkWzRdO1xuXG4gICAgbTRbMV0gPSBtMmRbMV07XG4gICAgbTRbNV0gPSBtMmRbM107XG4gICAgbTRbMTNdID0gbTJkWzVdO1xuXG4gICAgcmV0dXJuIG00O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICByYWRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gYXhpc1xuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnJvdGF0ZSA9IGZ1bmN0aW9uKG91dCwgYSwgcmFkLCBheGlzKSB7XG4gICAgbWF0NC5yb3RhdGUob3V0LmFycmF5LCBhLmFycmF5LCByYWQsIGF4aXMuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEBwYXJhbSAge251bWJlcn0gIHJhZFxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnJvdGF0ZVggPSBmdW5jdGlvbihvdXQsIGEsIHJhZCkge1xuICAgIG1hdDQucm90YXRlWChvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9XG4gKi9cbk1hdHJpeDQucm90YXRlWSA9IGZ1bmN0aW9uKG91dCwgYSwgcmFkKSB7XG4gICAgbWF0NC5yb3RhdGVZKG91dC5hcnJheSwgYS5hcnJheSwgcmFkKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICByYWRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC5yb3RhdGVaID0gZnVuY3Rpb24ob3V0LCBhLCByYWQpIHtcbiAgICBtYXQ0LnJvdGF0ZVoob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgbWF0NC5zY2FsZShvdXQuYXJyYXksIGEuYXJyYXksIHYuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4NH1cbiAqL1xuTWF0cml4NC50cmFuc3Bvc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBtYXQ0LnRyYW5zcG9zZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICovXG5NYXRyaXg0LnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIG1hdDQudHJhbnNsYXRlKG91dC5hcnJheSwgYS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1hdHJpeDQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXg0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 4x4 Matrix\n * @name mat4\n */\n\nvar mat4 = {};\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](16);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {mat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nmat4.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nmat4.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a03 = a[3],\n            a12 = a[6], a13 = a[7],\n            a23 = a[11];\n\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    } else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.invert = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the source matrix\n * @returns {mat4} out\n */\nmat4.adjoint = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    out[0]  =  (a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22));\n    out[1]  = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n    out[2]  =  (a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12));\n    out[3]  = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n    out[4]  = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n    out[5]  =  (a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22));\n    out[6]  = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n    out[7]  =  (a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12));\n    out[8]  =  (a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21));\n    out[9]  = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n    out[10] =  (a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11));\n    out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n    out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n    out[13] =  (a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21));\n    out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n    out[15] =  (a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11));\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat4\n *\n * @param {mat4} a the source matrix\n * @returns {Number} determinant of a\n */\nmat4.determinant = function (a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32;\n\n    // Calculate the determinant\n    return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n};\n\n/**\n * Multiplies two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiply = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[1] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[2] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[3] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6]; b3 = b[7];\n    out[4] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[5] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[6] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[7] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10]; b3 = b[11];\n    out[8] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[9] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[10] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[11] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14]; b3 = b[15];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + b3*a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + b3*a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + b3*a32;\n    out[15] = b0*a03 + b1*a13 + b2*a23 + b3*a33;\n    return out;\n};\n\n/**\n * Multiplies two affine mat4's\n * Add by https://github.com/pissang\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the first operand\n * @param {mat4} b the second operand\n * @returns {mat4} out\n */\nmat4.multiplyAffine = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[4], a11 = a[5], a12 = a[6],\n        a20 = a[8], a21 = a[9], a22 = a[10],\n        a30 = a[12], a31 = a[13], a32 = a[14];\n\n    // Cache only the current line of the second matrix\n    var b0  = b[0], b1 = b[1], b2 = b[2];\n    out[0] = b0*a00 + b1*a10 + b2*a20;\n    out[1] = b0*a01 + b1*a11 + b2*a21;\n    out[2] = b0*a02 + b1*a12 + b2*a22;\n    // out[3] = 0;\n\n    b0 = b[4]; b1 = b[5]; b2 = b[6];\n    out[4] = b0*a00 + b1*a10 + b2*a20;\n    out[5] = b0*a01 + b1*a11 + b2*a21;\n    out[6] = b0*a02 + b1*a12 + b2*a22;\n    // out[7] = 0;\n\n    b0 = b[8]; b1 = b[9]; b2 = b[10];\n    out[8] = b0*a00 + b1*a10 + b2*a20;\n    out[9] = b0*a01 + b1*a11 + b2*a21;\n    out[10] = b0*a02 + b1*a12 + b2*a22;\n    // out[11] = 0;\n\n    b0 = b[12]; b1 = b[13]; b2 = b[14];\n    out[12] = b0*a00 + b1*a10 + b2*a20 + a30;\n    out[13] = b0*a01 + b1*a11 + b2*a21 + a31;\n    out[14] = b0*a02 + b1*a12 + b2*a22 + a32;\n    // out[15] = 1;\n    return out;\n};\n\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nmat4.mul = mat4.multiply;\n\n/**\n * Alias for {@link mat4.multiplyAffine}\n * @function\n */\nmat4.mulAffine = mat4.multiplyAffine;\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to translate\n * @param {vec3} v vector to translate by\n * @returns {mat4} out\n */\nmat4.translate = function (out, a, v) {\n    var x = v[0], y = v[1], z = v[2],\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23;\n\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    } else {\n        a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n        a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n        a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n        out[0] = a00; out[1] = a01; out[2] = a02; out[3] = a03;\n        out[4] = a10; out[5] = a11; out[6] = a12; out[7] = a13;\n        out[8] = a20; out[9] = a21; out[10] = a22; out[11] = a23;\n\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n\n    return out;\n};\n\n/**\n * Scales the mat4 by the dimensions in the given vec3\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to scale\n * @param {vec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nmat4.scale = function(out, a, v) {\n    var x = v[0], y = v[1], z = v[2];\n\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n};\n\n/**\n * Rotates a mat4 by the given angle\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {vec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nmat4.rotate = function (out, a, rad, axis) {\n    var x = axis[0], y = axis[1], z = axis[2],\n        len = Math.sqrt(x * x + y * y + z * z),\n        s, c, t,\n        a00, a01, a02, a03,\n        a10, a11, a12, a13,\n        a20, a21, a22, a23,\n        b00, b01, b02,\n        b10, b11, b12,\n        b20, b21, b22;\n\n    if (Math.abs(len) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */]) { return null; }\n\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n\n    a00 = a[0]; a01 = a[1]; a02 = a[2]; a03 = a[3];\n    a10 = a[4]; a11 = a[5]; a12 = a[6]; a13 = a[7];\n    a20 = a[8]; a21 = a[9]; a22 = a[10]; a23 = a[11];\n\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c; b01 = y * x * t + z * s; b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s; b11 = y * y * t + c; b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s; b21 = y * z * t - x * s; b22 = z * z * t + c;\n\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateX = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[0]  = a[0];\n        out[1]  = a[1];\n        out[2]  = a[2];\n        out[3]  = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateY = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a20 = a[8],\n        a21 = a[9],\n        a22 = a[10],\n        a23 = a[11];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged rows\n        out[4]  = a[4];\n        out[5]  = a[5];\n        out[6]  = a[6];\n        out[7]  = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n};\n\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {mat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nmat4.rotateZ = function (out, a, rad) {\n    var s = Math.sin(rad),\n        c = Math.cos(rad),\n        a00 = a[0],\n        a01 = a[1],\n        a02 = a[2],\n        a03 = a[3],\n        a10 = a[4],\n        a11 = a[5],\n        a12 = a[6],\n        a13 = a[7];\n\n    if (a !== out) { // If the source and destination differ, copy the unchanged last row\n        out[8]  = a[8];\n        out[9]  = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n};\n\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     var quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {vec3} v Translation vector\n * @returns {mat4} out\n */\nmat4.fromRotationTranslation = function (out, q, v) {\n    // Quaternion math\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        xy = x * y2,\n        xz = x * z2,\n        yy = y * y2,\n        yz = y * z2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n\n    return out;\n};\n\nmat4.fromQuat = function (out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.frustum = function (out, left, right, bottom, top, near, far) {\n    var rl = 1 / (right - left),\n        tb = 1 / (top - bottom),\n        nf = 1 / (near - far);\n    out[0] = (near * 2) * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = (near * 2) * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (far * near * 2) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a perspective projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.perspective = function (out, fovy, aspect, near, far) {\n    var f = 1.0 / Math.tan(fovy / 2),\n        nf = 1 / (near - far);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = (2 * far * near) * nf;\n    out[15] = 0;\n    return out;\n};\n\n/**\n * Generates a orthogonal projection matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nmat4.ortho = function (out, left, right, bottom, top, near, far) {\n    var lr = 1 / (left - right),\n        bt = 1 / (bottom - top),\n        nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n};\n\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {vec3} eye Position of the viewer\n * @param {vec3} center Point the viewer is looking at\n * @param {vec3} up vec3 pointing up\n * @returns {mat4} out\n */\nmat4.lookAt = function (out, eye, center, up) {\n    var x0, x1, x2, y0, y1, y2, z0, z1, z2, len,\n        eyex = eye[0],\n        eyey = eye[1],\n        eyez = eye[2],\n        upx = up[0],\n        upy = up[1],\n        upz = up[2],\n        centerx = center[0],\n        centery = center[1],\n        centerz = center[2];\n\n    if (Math.abs(eyex - centerx) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */] &&\n        Math.abs(eyey - centery) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */] &&\n        Math.abs(eyez - centerz) < __WEBPACK_IMPORTED_MODULE_0__common__[\"b\" /* GLMAT_EPSILON */]) {\n        return mat4.identity(out);\n    }\n\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    } else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    } else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {mat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat4.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2) + Math.pow(a[9], 2) + Math.pow(a[10], 2) + Math.pow(a[11], 2) + Math.pow(a[12], 2) + Math.pow(a[13], 2) + Math.pow(a[14], 2) + Math.pow(a[15], 2) ))\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L21hdDQuanM/M2IxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQge0dMTUFUX0VQU0lMT04sIEdMTUFUX0FSUkFZX1RZUEUgfSBmcm9tICcuL2NvbW1vbic7XG5cbi8qKlxuICogQGNsYXNzIDR4NCBNYXRyaXhcbiAqIEBuYW1lIG1hdDRcbiAqL1xuXG52YXIgbWF0NCA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0NFxuICpcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cbm1hdDQuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDE2KTtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gMTtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMF0gPSAxO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAwO1xuICAgIG91dFsxNV0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0NCBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQ0fSBhIG5ldyA0eDQgbWF0cml4XG4gKi9cbm1hdDQuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDE2KTtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICBvdXRbNl0gPSBhWzZdO1xuICAgIG91dFs3XSA9IGFbN107XG4gICAgb3V0WzhdID0gYVs4XTtcbiAgICBvdXRbOV0gPSBhWzldO1xuICAgIG91dFsxMF0gPSBhWzEwXTtcbiAgICBvdXRbMTFdID0gYVsxMV07XG4gICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgIG91dFsxM10gPSBhWzEzXTtcbiAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENvcHkgdGhlIHZhbHVlcyBmcm9tIG9uZSBtYXQ0IHRvIGFub3RoZXJcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQuY29weSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIG91dFs2XSA9IGFbNl07XG4gICAgb3V0WzddID0gYVs3XTtcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIG91dFs5XSA9IGFbOV07XG4gICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICBvdXRbMTJdID0gYVsxMl07XG4gICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0IGEgbWF0NCB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAxO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAwO1xuICAgIG91dFs5XSA9IDA7XG4gICAgb3V0WzEwXSA9IDE7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9IDA7XG4gICAgb3V0WzE1XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNwb3NlIHRoZSB2YWx1ZXMgb2YgYSBtYXQ0XG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LnRyYW5zcG9zZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIC8vIElmIHdlIGFyZSB0cmFuc3Bvc2luZyBvdXJzZWx2ZXMgd2UgY2FuIHNraXAgYSBmZXcgc3RlcHMgYnV0IGhhdmUgdG8gY2FjaGUgc29tZSB2YWx1ZXNcbiAgICBpZiAob3V0ID09PSBhKSB7XG4gICAgICAgIHZhciBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLCBhMDMgPSBhWzNdLFxuICAgICAgICAgICAgYTEyID0gYVs2XSwgYTEzID0gYVs3XSxcbiAgICAgICAgICAgIGEyMyA9IGFbMTFdO1xuXG4gICAgICAgIG91dFsxXSA9IGFbNF07XG4gICAgICAgIG91dFsyXSA9IGFbOF07XG4gICAgICAgIG91dFszXSA9IGFbMTJdO1xuICAgICAgICBvdXRbNF0gPSBhMDE7XG4gICAgICAgIG91dFs2XSA9IGFbOV07XG4gICAgICAgIG91dFs3XSA9IGFbMTNdO1xuICAgICAgICBvdXRbOF0gPSBhMDI7XG4gICAgICAgIG91dFs5XSA9IGExMjtcbiAgICAgICAgb3V0WzExXSA9IGFbMTRdO1xuICAgICAgICBvdXRbMTJdID0gYTAzO1xuICAgICAgICBvdXRbMTNdID0gYTEzO1xuICAgICAgICBvdXRbMTRdID0gYTIzO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIG91dFswXSA9IGFbMF07XG4gICAgICAgIG91dFsxXSA9IGFbNF07XG4gICAgICAgIG91dFsyXSA9IGFbOF07XG4gICAgICAgIG91dFszXSA9IGFbMTJdO1xuICAgICAgICBvdXRbNF0gPSBhWzFdO1xuICAgICAgICBvdXRbNV0gPSBhWzVdO1xuICAgICAgICBvdXRbNl0gPSBhWzldO1xuICAgICAgICBvdXRbN10gPSBhWzEzXTtcbiAgICAgICAgb3V0WzhdID0gYVsyXTtcbiAgICAgICAgb3V0WzldID0gYVs2XTtcbiAgICAgICAgb3V0WzEwXSA9IGFbMTBdO1xuICAgICAgICBvdXRbMTFdID0gYVsxNF07XG4gICAgICAgIG91dFsxMl0gPSBhWzNdO1xuICAgICAgICBvdXRbMTNdID0gYVs3XTtcbiAgICAgICAgb3V0WzE0XSA9IGFbMTFdO1xuICAgICAgICBvdXRbMTVdID0gYVsxNV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogSW52ZXJ0cyBhIG1hdDRcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV0sXG5cbiAgICAgICAgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwLFxuICAgICAgICBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTAsXG4gICAgICAgIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMCxcbiAgICAgICAgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExLFxuICAgICAgICBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTEsXG4gICAgICAgIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMixcbiAgICAgICAgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwLFxuICAgICAgICBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzAsXG4gICAgICAgIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMCxcbiAgICAgICAgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxLFxuICAgICAgICBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzEsXG4gICAgICAgIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMixcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG4gICAgICAgIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICAgIGlmICghZGV0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkZXQgPSAxLjAgLyBkZXQ7XG5cbiAgICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgICBvdXRbMV0gPSAoYTAyICogYjEwIC0gYTAxICogYjExIC0gYTAzICogYjA5KSAqIGRldDtcbiAgICBvdXRbMl0gPSAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldDtcbiAgICBvdXRbM10gPSAoYTIyICogYjA0IC0gYTIxICogYjA1IC0gYTIzICogYjAzKSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgICBvdXRbNV0gPSAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldDtcbiAgICBvdXRbNl0gPSAoYTMyICogYjAyIC0gYTMwICogYjA1IC0gYTMzICogYjAxKSAqIGRldDtcbiAgICBvdXRbN10gPSAoYTIwICogYjA1IC0gYTIyICogYjAyICsgYTIzICogYjAxKSAqIGRldDtcbiAgICBvdXRbOF0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcbiAgICBvdXRbOV0gPSAoYTAxICogYjA4IC0gYTAwICogYjEwIC0gYTAzICogYjA2KSAqIGRldDtcbiAgICBvdXRbMTBdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG4gICAgb3V0WzExXSA9IChhMjEgKiBiMDIgLSBhMjAgKiBiMDQgLSBhMjMgKiBiMDApICogZGV0O1xuICAgIG91dFsxMl0gPSAoYTExICogYjA3IC0gYTEwICogYjA5IC0gYTEyICogYjA2KSAqIGRldDtcbiAgICBvdXRbMTNdID0gKGEwMCAqIGIwOSAtIGEwMSAqIGIwNyArIGEwMiAqIGIwNikgKiBkZXQ7XG4gICAgb3V0WzE0XSA9IChhMzEgKiBiMDEgLSBhMzAgKiBiMDMgLSBhMzIgKiBiMDApICogZGV0O1xuICAgIG91dFsxNV0gPSAoYTIwICogYjAzIC0gYTIxICogYjAxICsgYTIyICogYjAwKSAqIGRldDtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5hZGpvaW50ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV07XG5cbiAgICBvdXRbMF0gID0gIChhMTEgKiAoYTIyICogYTMzIC0gYTIzICogYTMyKSAtIGEyMSAqIChhMTIgKiBhMzMgLSBhMTMgKiBhMzIpICsgYTMxICogKGExMiAqIGEyMyAtIGExMyAqIGEyMikpO1xuICAgIG91dFsxXSAgPSAtKGEwMSAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIxICogKGEwMiAqIGEzMyAtIGEwMyAqIGEzMikgKyBhMzEgKiAoYTAyICogYTIzIC0gYTAzICogYTIyKSk7XG4gICAgb3V0WzJdICA9ICAoYTAxICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgLSBhMTEgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMSAqIChhMDIgKiBhMTMgLSBhMDMgKiBhMTIpKTtcbiAgICBvdXRbM10gID0gLShhMDEgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSAtIGExMSAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpICsgYTIxICogKGEwMiAqIGExMyAtIGEwMyAqIGExMikpO1xuICAgIG91dFs0XSAgPSAtKGExMCAqIChhMjIgKiBhMzMgLSBhMjMgKiBhMzIpIC0gYTIwICogKGExMiAqIGEzMyAtIGExMyAqIGEzMikgKyBhMzAgKiAoYTEyICogYTIzIC0gYTEzICogYTIyKSk7XG4gICAgb3V0WzVdICA9ICAoYTAwICogKGEyMiAqIGEzMyAtIGEyMyAqIGEzMikgLSBhMjAgKiAoYTAyICogYTMzIC0gYTAzICogYTMyKSArIGEzMCAqIChhMDIgKiBhMjMgLSBhMDMgKiBhMjIpKTtcbiAgICBvdXRbNl0gID0gLShhMDAgKiAoYTEyICogYTMzIC0gYTEzICogYTMyKSAtIGExMCAqIChhMDIgKiBhMzMgLSBhMDMgKiBhMzIpICsgYTMwICogKGEwMiAqIGExMyAtIGEwMyAqIGExMikpO1xuICAgIG91dFs3XSAgPSAgKGEwMCAqIChhMTIgKiBhMjMgLSBhMTMgKiBhMjIpIC0gYTEwICogKGEwMiAqIGEyMyAtIGEwMyAqIGEyMikgKyBhMjAgKiAoYTAyICogYTEzIC0gYTAzICogYTEyKSk7XG4gICAgb3V0WzhdICA9ICAoYTEwICogKGEyMSAqIGEzMyAtIGEyMyAqIGEzMSkgLSBhMjAgKiAoYTExICogYTMzIC0gYTEzICogYTMxKSArIGEzMCAqIChhMTEgKiBhMjMgLSBhMTMgKiBhMjEpKTtcbiAgICBvdXRbOV0gID0gLShhMDAgKiAoYTIxICogYTMzIC0gYTIzICogYTMxKSAtIGEyMCAqIChhMDEgKiBhMzMgLSBhMDMgKiBhMzEpICsgYTMwICogKGEwMSAqIGEyMyAtIGEwMyAqIGEyMSkpO1xuICAgIG91dFsxMF0gPSAgKGEwMCAqIChhMTEgKiBhMzMgLSBhMTMgKiBhMzEpIC0gYTEwICogKGEwMSAqIGEzMyAtIGEwMyAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTEzIC0gYTAzICogYTExKSk7XG4gICAgb3V0WzExXSA9IC0oYTAwICogKGExMSAqIGEyMyAtIGExMyAqIGEyMSkgLSBhMTAgKiAoYTAxICogYTIzIC0gYTAzICogYTIxKSArIGEyMCAqIChhMDEgKiBhMTMgLSBhMDMgKiBhMTEpKTtcbiAgICBvdXRbMTJdID0gLShhMTAgKiAoYTIxICogYTMyIC0gYTIyICogYTMxKSAtIGEyMCAqIChhMTEgKiBhMzIgLSBhMTIgKiBhMzEpICsgYTMwICogKGExMSAqIGEyMiAtIGExMiAqIGEyMSkpO1xuICAgIG91dFsxM10gPSAgKGEwMCAqIChhMjEgKiBhMzIgLSBhMjIgKiBhMzEpIC0gYTIwICogKGEwMSAqIGEzMiAtIGEwMiAqIGEzMSkgKyBhMzAgKiAoYTAxICogYTIyIC0gYTAyICogYTIxKSk7XG4gICAgb3V0WzE0XSA9IC0oYTAwICogKGExMSAqIGEzMiAtIGExMiAqIGEzMSkgLSBhMTAgKiAoYTAxICogYTMyIC0gYTAyICogYTMxKSArIGEzMCAqIChhMDEgKiBhMTIgLSBhMDIgKiBhMTEpKTtcbiAgICBvdXRbMTVdID0gIChhMDAgKiAoYTExICogYTIyIC0gYTEyICogYTIxKSAtIGExMCAqIChhMDEgKiBhMjIgLSBhMDIgKiBhMjEpICsgYTIwICogKGEwMSAqIGExMiAtIGEwMiAqIGExMSkpO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge051bWJlcn0gZGV0ZXJtaW5hbnQgb2YgYVxuICovXG5tYXQ0LmRldGVybWluYW50ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSwgYTAzID0gYVszXSxcbiAgICAgICAgYTEwID0gYVs0XSwgYTExID0gYVs1XSwgYTEyID0gYVs2XSwgYTEzID0gYVs3XSxcbiAgICAgICAgYTIwID0gYVs4XSwgYTIxID0gYVs5XSwgYTIyID0gYVsxMF0sIGEyMyA9IGFbMTFdLFxuICAgICAgICBhMzAgPSBhWzEyXSwgYTMxID0gYVsxM10sIGEzMiA9IGFbMTRdLCBhMzMgPSBhWzE1XSxcblxuICAgICAgICBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTAsXG4gICAgICAgIGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMCxcbiAgICAgICAgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwLFxuICAgICAgICBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTEsXG4gICAgICAgIGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMSxcbiAgICAgICAgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyLFxuICAgICAgICBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzAsXG4gICAgICAgIGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMCxcbiAgICAgICAgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwLFxuICAgICAgICBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzEsXG4gICAgICAgIGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMSxcbiAgICAgICAgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBkZXRlcm1pbmFudFxuICAgIHJldHVybiBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7XG59O1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDQnc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7bWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5tdWx0aXBseSA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSwgYTAzID0gYVszXSxcbiAgICAgICAgYTEwID0gYVs0XSwgYTExID0gYVs1XSwgYTEyID0gYVs2XSwgYTEzID0gYVs3XSxcbiAgICAgICAgYTIwID0gYVs4XSwgYTIxID0gYVs5XSwgYTIyID0gYVsxMF0sIGEyMyA9IGFbMTFdLFxuICAgICAgICBhMzAgPSBhWzEyXSwgYTMxID0gYVsxM10sIGEzMiA9IGFbMTRdLCBhMzMgPSBhWzE1XTtcblxuICAgIC8vIENhY2hlIG9ubHkgdGhlIGN1cnJlbnQgbGluZSBvZiB0aGUgc2Vjb25kIG1hdHJpeFxuICAgIHZhciBiMCAgPSBiWzBdLCBiMSA9IGJbMV0sIGIyID0gYlsyXSwgYjMgPSBiWzNdO1xuICAgIG91dFswXSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMCArIGIzKmEzMDtcbiAgICBvdXRbMV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjEgKyBiMyphMzE7XG4gICAgb3V0WzJdID0gYjAqYTAyICsgYjEqYTEyICsgYjIqYTIyICsgYjMqYTMyO1xuICAgIG91dFszXSA9IGIwKmEwMyArIGIxKmExMyArIGIyKmEyMyArIGIzKmEzMztcblxuICAgIGIwID0gYls0XTsgYjEgPSBiWzVdOyBiMiA9IGJbNl07IGIzID0gYls3XTtcbiAgICBvdXRbNF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgb3V0WzVdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIG91dFs2XSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMiArIGIzKmEzMjtcbiAgICBvdXRbN10gPSBiMCphMDMgKyBiMSphMTMgKyBiMiphMjMgKyBiMyphMzM7XG5cbiAgICBiMCA9IGJbOF07IGIxID0gYls5XTsgYjIgPSBiWzEwXTsgYjMgPSBiWzExXTtcbiAgICBvdXRbOF0gPSBiMCphMDAgKyBiMSphMTAgKyBiMiphMjAgKyBiMyphMzA7XG4gICAgb3V0WzldID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIG91dFsxMF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgb3V0WzExXSA9IGIwKmEwMyArIGIxKmExMyArIGIyKmEyMyArIGIzKmEzMztcblxuICAgIGIwID0gYlsxMl07IGIxID0gYlsxM107IGIyID0gYlsxNF07IGIzID0gYlsxNV07XG4gICAgb3V0WzEyXSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMCArIGIzKmEzMDtcbiAgICBvdXRbMTNdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYjMqYTMxO1xuICAgIG91dFsxNF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBiMyphMzI7XG4gICAgb3V0WzE1XSA9IGIwKmEwMyArIGIxKmExMyArIGIyKmEyMyArIGIzKmEzMztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byBhZmZpbmUgbWF0NCdzXG4gKiBBZGQgYnkgaHR0cHM6Ly9naXRodWIuY29tL3Bpc3NhbmdcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7bWF0NH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5tdWx0aXBseUFmZmluZSA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSxcbiAgICAgICAgYTEwID0gYVs0XSwgYTExID0gYVs1XSwgYTEyID0gYVs2XSxcbiAgICAgICAgYTIwID0gYVs4XSwgYTIxID0gYVs5XSwgYTIyID0gYVsxMF0sXG4gICAgICAgIGEzMCA9IGFbMTJdLCBhMzEgPSBhWzEzXSwgYTMyID0gYVsxNF07XG5cbiAgICAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXhcbiAgICB2YXIgYjAgID0gYlswXSwgYjEgPSBiWzFdLCBiMiA9IGJbMl07XG4gICAgb3V0WzBdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwO1xuICAgIG91dFsxXSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMTtcbiAgICBvdXRbMl0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjI7XG4gICAgLy8gb3V0WzNdID0gMDtcblxuICAgIGIwID0gYls0XTsgYjEgPSBiWzVdOyBiMiA9IGJbNl07XG4gICAgb3V0WzRdID0gYjAqYTAwICsgYjEqYTEwICsgYjIqYTIwO1xuICAgIG91dFs1XSA9IGIwKmEwMSArIGIxKmExMSArIGIyKmEyMTtcbiAgICBvdXRbNl0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjI7XG4gICAgLy8gb3V0WzddID0gMDtcblxuICAgIGIwID0gYls4XTsgYjEgPSBiWzldOyBiMiA9IGJbMTBdO1xuICAgIG91dFs4XSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMDtcbiAgICBvdXRbOV0gPSBiMCphMDEgKyBiMSphMTEgKyBiMiphMjE7XG4gICAgb3V0WzEwXSA9IGIwKmEwMiArIGIxKmExMiArIGIyKmEyMjtcbiAgICAvLyBvdXRbMTFdID0gMDtcblxuICAgIGIwID0gYlsxMl07IGIxID0gYlsxM107IGIyID0gYlsxNF07XG4gICAgb3V0WzEyXSA9IGIwKmEwMCArIGIxKmExMCArIGIyKmEyMCArIGEzMDtcbiAgICBvdXRbMTNdID0gYjAqYTAxICsgYjEqYTExICsgYjIqYTIxICsgYTMxO1xuICAgIG91dFsxNF0gPSBiMCphMDIgKyBiMSphMTIgKyBiMiphMjIgKyBhMzI7XG4gICAgLy8gb3V0WzE1XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQ0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbm1hdDQubXVsID0gbWF0NC5tdWx0aXBseTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDQubXVsdGlwbHlBZmZpbmV9XG4gKiBAZnVuY3Rpb25cbiAqL1xubWF0NC5tdWxBZmZpbmUgPSBtYXQ0Lm11bHRpcGx5QWZmaW5lO1xuLyoqXG4gKiBUcmFuc2xhdGUgYSBtYXQ0IGJ5IHRoZSBnaXZlbiB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge3ZlYzN9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LnRyYW5zbGF0ZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHYpIHtcbiAgICB2YXIgeCA9IHZbMF0sIHkgPSB2WzFdLCB6ID0gdlsyXSxcbiAgICAgICAgYTAwLCBhMDEsIGEwMiwgYTAzLFxuICAgICAgICBhMTAsIGExMSwgYTEyLCBhMTMsXG4gICAgICAgIGEyMCwgYTIxLCBhMjIsIGEyMztcblxuICAgIGlmIChhID09PSBvdXQpIHtcbiAgICAgICAgb3V0WzEyXSA9IGFbMF0gKiB4ICsgYVs0XSAqIHkgKyBhWzhdICogeiArIGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhWzJdICogeCArIGFbNl0gKiB5ICsgYVsxMF0gKiB6ICsgYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzNdICogeCArIGFbN10gKiB5ICsgYVsxMV0gKiB6ICsgYVsxNV07XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYTAwID0gYVswXTsgYTAxID0gYVsxXTsgYTAyID0gYVsyXTsgYTAzID0gYVszXTtcbiAgICAgICAgYTEwID0gYVs0XTsgYTExID0gYVs1XTsgYTEyID0gYVs2XTsgYTEzID0gYVs3XTtcbiAgICAgICAgYTIwID0gYVs4XTsgYTIxID0gYVs5XTsgYTIyID0gYVsxMF07IGEyMyA9IGFbMTFdO1xuXG4gICAgICAgIG91dFswXSA9IGEwMDsgb3V0WzFdID0gYTAxOyBvdXRbMl0gPSBhMDI7IG91dFszXSA9IGEwMztcbiAgICAgICAgb3V0WzRdID0gYTEwOyBvdXRbNV0gPSBhMTE7IG91dFs2XSA9IGExMjsgb3V0WzddID0gYTEzO1xuICAgICAgICBvdXRbOF0gPSBhMjA7IG91dFs5XSA9IGEyMTsgb3V0WzEwXSA9IGEyMjsgb3V0WzExXSA9IGEyMztcblxuICAgICAgICBvdXRbMTJdID0gYTAwICogeCArIGExMCAqIHkgKyBhMjAgKiB6ICsgYVsxMl07XG4gICAgICAgIG91dFsxM10gPSBhMDEgKiB4ICsgYTExICogeSArIGEyMSAqIHogKyBhWzEzXTtcbiAgICAgICAgb3V0WzE0XSA9IGEwMiAqIHggKyBhMTIgKiB5ICsgYTIyICogeiArIGFbMTRdO1xuICAgICAgICBvdXRbMTVdID0gYTAzICogeCArIGExMyAqIHkgKyBhMjMgKiB6ICsgYVsxNV07XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQ0IGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIHNjYWxlXG4gKiBAcGFyYW0ge3ZlYzN9IHYgdGhlIHZlYzMgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICoqL1xubWF0NC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIHZhciB4ID0gdlswXSwgeSA9IHZbMV0sIHogPSB2WzJdO1xuXG4gICAgb3V0WzBdID0gYVswXSAqIHg7XG4gICAgb3V0WzFdID0gYVsxXSAqIHg7XG4gICAgb3V0WzJdID0gYVsyXSAqIHg7XG4gICAgb3V0WzNdID0gYVszXSAqIHg7XG4gICAgb3V0WzRdID0gYVs0XSAqIHk7XG4gICAgb3V0WzVdID0gYVs1XSAqIHk7XG4gICAgb3V0WzZdID0gYVs2XSAqIHk7XG4gICAgb3V0WzddID0gYVs3XSAqIHk7XG4gICAgb3V0WzhdID0gYVs4XSAqIHo7XG4gICAgb3V0WzldID0gYVs5XSAqIHo7XG4gICAgb3V0WzEwXSA9IGFbMTBdICogejtcbiAgICBvdXRbMTFdID0gYVsxMV0gKiB6O1xuICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICBvdXRbMTNdID0gYVsxM107XG4gICAgb3V0WzE0XSA9IGFbMTRdO1xuICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0NCBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHBhcmFtIHt2ZWMzfSBheGlzIHRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmRcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5yb3RhdGUgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQsIGF4aXMpIHtcbiAgICB2YXIgeCA9IGF4aXNbMF0sIHkgPSBheGlzWzFdLCB6ID0gYXhpc1syXSxcbiAgICAgICAgbGVuID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeiksXG4gICAgICAgIHMsIGMsIHQsXG4gICAgICAgIGEwMCwgYTAxLCBhMDIsIGEwMyxcbiAgICAgICAgYTEwLCBhMTEsIGExMiwgYTEzLFxuICAgICAgICBhMjAsIGEyMSwgYTIyLCBhMjMsXG4gICAgICAgIGIwMCwgYjAxLCBiMDIsXG4gICAgICAgIGIxMCwgYjExLCBiMTIsXG4gICAgICAgIGIyMCwgYjIxLCBiMjI7XG5cbiAgICBpZiAoTWF0aC5hYnMobGVuKSA8IEdMTUFUX0VQU0lMT04pIHsgcmV0dXJuIG51bGw7IH1cblxuICAgIGxlbiA9IDEgLyBsZW47XG4gICAgeCAqPSBsZW47XG4gICAgeSAqPSBsZW47XG4gICAgeiAqPSBsZW47XG5cbiAgICBzID0gTWF0aC5zaW4ocmFkKTtcbiAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgICB0ID0gMSAtIGM7XG5cbiAgICBhMDAgPSBhWzBdOyBhMDEgPSBhWzFdOyBhMDIgPSBhWzJdOyBhMDMgPSBhWzNdO1xuICAgIGExMCA9IGFbNF07IGExMSA9IGFbNV07IGExMiA9IGFbNl07IGExMyA9IGFbN107XG4gICAgYTIwID0gYVs4XTsgYTIxID0gYVs5XTsgYTIyID0gYVsxMF07IGEyMyA9IGFbMTFdO1xuXG4gICAgLy8gQ29uc3RydWN0IHRoZSBlbGVtZW50cyBvZiB0aGUgcm90YXRpb24gbWF0cml4XG4gICAgYjAwID0geCAqIHggKiB0ICsgYzsgYjAxID0geSAqIHggKiB0ICsgeiAqIHM7IGIwMiA9IHogKiB4ICogdCAtIHkgKiBzO1xuICAgIGIxMCA9IHggKiB5ICogdCAtIHogKiBzOyBiMTEgPSB5ICogeSAqIHQgKyBjOyBiMTIgPSB6ICogeSAqIHQgKyB4ICogcztcbiAgICBiMjAgPSB4ICogeiAqIHQgKyB5ICogczsgYjIxID0geSAqIHogKiB0IC0geCAqIHM7IGIyMiA9IHogKiB6ICogdCArIGM7XG5cbiAgICAvLyBQZXJmb3JtIHJvdGF0aW9uLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvblxuICAgIG91dFswXSA9IGEwMCAqIGIwMCArIGExMCAqIGIwMSArIGEyMCAqIGIwMjtcbiAgICBvdXRbMV0gPSBhMDEgKiBiMDAgKyBhMTEgKiBiMDEgKyBhMjEgKiBiMDI7XG4gICAgb3V0WzJdID0gYTAyICogYjAwICsgYTEyICogYjAxICsgYTIyICogYjAyO1xuICAgIG91dFszXSA9IGEwMyAqIGIwMCArIGExMyAqIGIwMSArIGEyMyAqIGIwMjtcbiAgICBvdXRbNF0gPSBhMDAgKiBiMTAgKyBhMTAgKiBiMTEgKyBhMjAgKiBiMTI7XG4gICAgb3V0WzVdID0gYTAxICogYjEwICsgYTExICogYjExICsgYTIxICogYjEyO1xuICAgIG91dFs2XSA9IGEwMiAqIGIxMCArIGExMiAqIGIxMSArIGEyMiAqIGIxMjtcbiAgICBvdXRbN10gPSBhMDMgKiBiMTAgKyBhMTMgKiBiMTEgKyBhMjMgKiBiMTI7XG4gICAgb3V0WzhdID0gYTAwICogYjIwICsgYTEwICogYjIxICsgYTIwICogYjIyO1xuICAgIG91dFs5XSA9IGEwMSAqIGIyMCArIGExMSAqIGIyMSArIGEyMSAqIGIyMjtcbiAgICBvdXRbMTBdID0gYTAyICogYjIwICsgYTEyICogYjIxICsgYTIyICogYjIyO1xuICAgIG91dFsxMV0gPSBhMDMgKiBiMjAgKyBhMTMgKiBiMjEgKyBhMjMgKiBiMjI7XG5cbiAgICBpZiAoYSAhPT0gb3V0KSB7IC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIGxhc3Qgcm93XG4gICAgICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICB9XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIG1hdHJpeCBieSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBYIGF4aXNcbiAqXG4gKiBAcGFyYW0ge21hdDR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LnJvdGF0ZVggPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgcyA9IE1hdGguc2luKHJhZCksXG4gICAgICAgIGMgPSBNYXRoLmNvcyhyYWQpLFxuICAgICAgICBhMTAgPSBhWzRdLFxuICAgICAgICBhMTEgPSBhWzVdLFxuICAgICAgICBhMTIgPSBhWzZdLFxuICAgICAgICBhMTMgPSBhWzddLFxuICAgICAgICBhMjAgPSBhWzhdLFxuICAgICAgICBhMjEgPSBhWzldLFxuICAgICAgICBhMjIgPSBhWzEwXSxcbiAgICAgICAgYTIzID0gYVsxMV07XG5cbiAgICBpZiAoYSAhPT0gb3V0KSB7IC8vIElmIHRoZSBzb3VyY2UgYW5kIGRlc3RpbmF0aW9uIGRpZmZlciwgY29weSB0aGUgdW5jaGFuZ2VkIHJvd3NcbiAgICAgICAgb3V0WzBdICA9IGFbMF07XG4gICAgICAgIG91dFsxXSAgPSBhWzFdO1xuICAgICAgICBvdXRbMl0gID0gYVsyXTtcbiAgICAgICAgb3V0WzNdICA9IGFbM107XG4gICAgICAgIG91dFsxMl0gPSBhWzEyXTtcbiAgICAgICAgb3V0WzEzXSA9IGFbMTNdO1xuICAgICAgICBvdXRbMTRdID0gYVsxNF07XG4gICAgICAgIG91dFsxNV0gPSBhWzE1XTtcbiAgICB9XG5cbiAgICAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uXG4gICAgb3V0WzRdID0gYTEwICogYyArIGEyMCAqIHM7XG4gICAgb3V0WzVdID0gYTExICogYyArIGEyMSAqIHM7XG4gICAgb3V0WzZdID0gYTEyICogYyArIGEyMiAqIHM7XG4gICAgb3V0WzddID0gYTEzICogYyArIGEyMyAqIHM7XG4gICAgb3V0WzhdID0gYTIwICogYyAtIGExMCAqIHM7XG4gICAgb3V0WzldID0gYTIxICogYyAtIGExMSAqIHM7XG4gICAgb3V0WzEwXSA9IGEyMiAqIGMgLSBhMTIgKiBzO1xuICAgIG91dFsxMV0gPSBhMjMgKiBjIC0gYTEzICogcztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0cml4IGJ5IHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFkgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDR9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7TnVtYmVyfSByYWQgdGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQucm90YXRlWSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHZhciBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCksXG4gICAgICAgIGEwMCA9IGFbMF0sXG4gICAgICAgIGEwMSA9IGFbMV0sXG4gICAgICAgIGEwMiA9IGFbMl0sXG4gICAgICAgIGEwMyA9IGFbM10sXG4gICAgICAgIGEyMCA9IGFbOF0sXG4gICAgICAgIGEyMSA9IGFbOV0sXG4gICAgICAgIGEyMiA9IGFbMTBdLFxuICAgICAgICBhMjMgPSBhWzExXTtcblxuICAgIGlmIChhICE9PSBvdXQpIHsgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgcm93c1xuICAgICAgICBvdXRbNF0gID0gYVs0XTtcbiAgICAgICAgb3V0WzVdICA9IGFbNV07XG4gICAgICAgIG91dFs2XSAgPSBhWzZdO1xuICAgICAgICBvdXRbN10gID0gYVs3XTtcbiAgICAgICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICAgICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICBvdXRbMF0gPSBhMDAgKiBjIC0gYTIwICogcztcbiAgICBvdXRbMV0gPSBhMDEgKiBjIC0gYTIxICogcztcbiAgICBvdXRbMl0gPSBhMDIgKiBjIC0gYTIyICogcztcbiAgICBvdXRbM10gPSBhMDMgKiBjIC0gYTIzICogcztcbiAgICBvdXRbOF0gPSBhMDAgKiBzICsgYTIwICogYztcbiAgICBvdXRbOV0gPSBhMDEgKiBzICsgYTIxICogYztcbiAgICBvdXRbMTBdID0gYTAyICogcyArIGEyMiAqIGM7XG4gICAgb3V0WzExXSA9IGEwMyAqIHMgKyBhMjMgKiBjO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBtYXRyaXggYnkgdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWiBheGlzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5yb3RhdGVaID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgdmFyIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgICBjID0gTWF0aC5jb3MocmFkKSxcbiAgICAgICAgYTAwID0gYVswXSxcbiAgICAgICAgYTAxID0gYVsxXSxcbiAgICAgICAgYTAyID0gYVsyXSxcbiAgICAgICAgYTAzID0gYVszXSxcbiAgICAgICAgYTEwID0gYVs0XSxcbiAgICAgICAgYTExID0gYVs1XSxcbiAgICAgICAgYTEyID0gYVs2XSxcbiAgICAgICAgYTEzID0gYVs3XTtcblxuICAgIGlmIChhICE9PSBvdXQpIHsgLy8gSWYgdGhlIHNvdXJjZSBhbmQgZGVzdGluYXRpb24gZGlmZmVyLCBjb3B5IHRoZSB1bmNoYW5nZWQgbGFzdCByb3dcbiAgICAgICAgb3V0WzhdICA9IGFbOF07XG4gICAgICAgIG91dFs5XSAgPSBhWzldO1xuICAgICAgICBvdXRbMTBdID0gYVsxMF07XG4gICAgICAgIG91dFsxMV0gPSBhWzExXTtcbiAgICAgICAgb3V0WzEyXSA9IGFbMTJdO1xuICAgICAgICBvdXRbMTNdID0gYVsxM107XG4gICAgICAgIG91dFsxNF0gPSBhWzE0XTtcbiAgICAgICAgb3V0WzE1XSA9IGFbMTVdO1xuICAgIH1cblxuICAgIC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb25cbiAgICBvdXRbMF0gPSBhMDAgKiBjICsgYTEwICogcztcbiAgICBvdXRbMV0gPSBhMDEgKiBjICsgYTExICogcztcbiAgICBvdXRbMl0gPSBhMDIgKiBjICsgYTEyICogcztcbiAgICBvdXRbM10gPSBhMDMgKiBjICsgYTEzICogcztcbiAgICBvdXRbNF0gPSBhMTAgKiBjIC0gYTAwICogcztcbiAgICBvdXRbNV0gPSBhMTEgKiBjIC0gYTAxICogcztcbiAgICBvdXRbNl0gPSBhMTIgKiBjIC0gYTAyICogcztcbiAgICBvdXRbN10gPSBhMTMgKiBjIC0gYTAzICogcztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBxdWF0ZXJuaW9uIHJvdGF0aW9uIGFuZCB2ZWN0b3IgdHJhbnNsYXRpb25cbiAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOlxuICpcbiAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpO1xuICogICAgIG1hdDQudHJhbnNsYXRlKGRlc3QsIHZlYyk7XG4gKiAgICAgdmFyIHF1YXRNYXQgPSBtYXQ0LmNyZWF0ZSgpO1xuICogICAgIHF1YXQ0LnRvTWF0NChxdWF0LCBxdWF0TWF0KTtcbiAqICAgICBtYXQ0Lm11bHRpcGx5KGRlc3QsIHF1YXRNYXQpO1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdDR9IHEgUm90YXRpb24gcXVhdGVybmlvblxuICogQHBhcmFtIHt2ZWMzfSB2IFRyYW5zbGF0aW9uIHZlY3RvclxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uID0gZnVuY3Rpb24gKG91dCwgcSwgdikge1xuICAgIC8vIFF1YXRlcm5pb24gbWF0aFxuICAgIHZhciB4ID0gcVswXSwgeSA9IHFbMV0sIHogPSBxWzJdLCB3ID0gcVszXSxcbiAgICAgICAgeDIgPSB4ICsgeCxcbiAgICAgICAgeTIgPSB5ICsgeSxcbiAgICAgICAgejIgPSB6ICsgeixcblxuICAgICAgICB4eCA9IHggKiB4MixcbiAgICAgICAgeHkgPSB4ICogeTIsXG4gICAgICAgIHh6ID0geCAqIHoyLFxuICAgICAgICB5eSA9IHkgKiB5MixcbiAgICAgICAgeXogPSB5ICogejIsXG4gICAgICAgIHp6ID0geiAqIHoyLFxuICAgICAgICB3eCA9IHcgKiB4MixcbiAgICAgICAgd3kgPSB3ICogeTIsXG4gICAgICAgIHd6ID0gdyAqIHoyO1xuXG4gICAgb3V0WzBdID0gMSAtICh5eSArIHp6KTtcbiAgICBvdXRbMV0gPSB4eSArIHd6O1xuICAgIG91dFsyXSA9IHh6IC0gd3k7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSB4eSAtIHd6O1xuICAgIG91dFs1XSA9IDEgLSAoeHggKyB6eik7XG4gICAgb3V0WzZdID0geXogKyB3eDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IHh6ICsgd3k7XG4gICAgb3V0WzldID0geXogLSB3eDtcbiAgICBvdXRbMTBdID0gMSAtICh4eCArIHl5KTtcbiAgICBvdXRbMTFdID0gMDtcbiAgICBvdXRbMTJdID0gdlswXTtcbiAgICBvdXRbMTNdID0gdlsxXTtcbiAgICBvdXRbMTRdID0gdlsyXTtcbiAgICBvdXRbMTVdID0gMTtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG5tYXQ0LmZyb21RdWF0ID0gZnVuY3Rpb24gKG91dCwgcSkge1xuICAgIHZhciB4ID0gcVswXSwgeSA9IHFbMV0sIHogPSBxWzJdLCB3ID0gcVszXSxcbiAgICAgICAgeDIgPSB4ICsgeCxcbiAgICAgICAgeTIgPSB5ICsgeSxcbiAgICAgICAgejIgPSB6ICsgeixcblxuICAgICAgICB4eCA9IHggKiB4MixcbiAgICAgICAgeXggPSB5ICogeDIsXG4gICAgICAgIHl5ID0geSAqIHkyLFxuICAgICAgICB6eCA9IHogKiB4MixcbiAgICAgICAgenkgPSB6ICogeTIsXG4gICAgICAgIHp6ID0geiAqIHoyLFxuICAgICAgICB3eCA9IHcgKiB4MixcbiAgICAgICAgd3kgPSB3ICogeTIsXG4gICAgICAgIHd6ID0gdyAqIHoyO1xuXG4gICAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gICAgb3V0WzFdID0geXggKyB3ejtcbiAgICBvdXRbMl0gPSB6eCAtIHd5O1xuICAgIG91dFszXSA9IDA7XG5cbiAgICBvdXRbNF0gPSB5eCAtIHd6O1xuICAgIG91dFs1XSA9IDEgLSB4eCAtIHp6O1xuICAgIG91dFs2XSA9IHp5ICsgd3g7XG4gICAgb3V0WzddID0gMDtcblxuICAgIG91dFs4XSA9IHp4ICsgd3k7XG4gICAgb3V0WzldID0genkgLSB3eDtcbiAgICBvdXRbMTBdID0gMSAtIHh4IC0geXk7XG4gICAgb3V0WzExXSA9IDA7XG5cbiAgICBvdXRbMTJdID0gMDtcbiAgICBvdXRbMTNdID0gMDtcbiAgICBvdXRbMTRdID0gMDtcbiAgICBvdXRbMTVdID0gMTtcblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGZydXN0dW0gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7TnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtOdW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7TnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge051bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0LmZydXN0dW0gPSBmdW5jdGlvbiAob3V0LCBsZWZ0LCByaWdodCwgYm90dG9tLCB0b3AsIG5lYXIsIGZhcikge1xuICAgIHZhciBybCA9IDEgLyAocmlnaHQgLSBsZWZ0KSxcbiAgICAgICAgdGIgPSAxIC8gKHRvcCAtIGJvdHRvbSksXG4gICAgICAgIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgICBvdXRbMF0gPSAobmVhciAqIDIpICogcmw7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAobmVhciAqIDIpICogdGI7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IChyaWdodCArIGxlZnQpICogcmw7XG4gICAgb3V0WzldID0gKHRvcCArIGJvdHRvbSkgKiB0YjtcbiAgICBvdXRbMTBdID0gKGZhciArIG5lYXIpICogbmY7XG4gICAgb3V0WzExXSA9IC0xO1xuICAgIG91dFsxMl0gPSAwO1xuICAgIG91dFsxM10gPSAwO1xuICAgIG91dFsxNF0gPSAoZmFyICogbmVhciAqIDIpICogbmY7XG4gICAgb3V0WzE1XSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogR2VuZXJhdGVzIGEgcGVyc3BlY3RpdmUgcHJvamVjdGlvbiBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gYm91bmRzXG4gKlxuICogQHBhcmFtIHttYXQ0fSBvdXQgbWF0NCBmcnVzdHVtIG1hdHJpeCB3aWxsIGJlIHdyaXR0ZW4gaW50b1xuICogQHBhcmFtIHtudW1iZXJ9IGZvdnkgVmVydGljYWwgZmllbGQgb2YgdmlldyBpbiByYWRpYW5zXG4gKiBAcGFyYW0ge251bWJlcn0gYXNwZWN0IEFzcGVjdCByYXRpby4gdHlwaWNhbGx5IHZpZXdwb3J0IHdpZHRoL2hlaWdodFxuICogQHBhcmFtIHtudW1iZXJ9IG5lYXIgTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGZhciBGYXIgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEByZXR1cm5zIHttYXQ0fSBvdXRcbiAqL1xubWF0NC5wZXJzcGVjdGl2ZSA9IGZ1bmN0aW9uIChvdXQsIGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7XG4gICAgdmFyIGYgPSAxLjAgLyBNYXRoLnRhbihmb3Z5IC8gMiksXG4gICAgICAgIG5mID0gMSAvIChuZWFyIC0gZmFyKTtcbiAgICBvdXRbMF0gPSBmIC8gYXNwZWN0O1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDA7XG4gICAgb3V0WzVdID0gZjtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMDtcbiAgICBvdXRbOV0gPSAwO1xuICAgIG91dFsxMF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTFdID0gLTE7XG4gICAgb3V0WzEyXSA9IDA7XG4gICAgb3V0WzEzXSA9IDA7XG4gICAgb3V0WzE0XSA9ICgyICogZmFyICogbmVhcikgKiBuZjtcbiAgICBvdXRbMTVdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBvcnRob2dvbmFsIHByb2plY3Rpb24gbWF0cml4IHdpdGggdGhlIGdpdmVuIGJvdW5kc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0IExlZnQgYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSByaWdodCBSaWdodCBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbSBCb3R0b20gYm91bmQgb2YgdGhlIGZydXN0dW1cbiAqIEBwYXJhbSB7bnVtYmVyfSB0b3AgVG9wIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gbmVhciBOZWFyIGJvdW5kIG9mIHRoZSBmcnVzdHVtXG4gKiBAcGFyYW0ge251bWJlcn0gZmFyIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICogQHJldHVybnMge21hdDR9IG91dFxuICovXG5tYXQ0Lm9ydGhvID0gZnVuY3Rpb24gKG91dCwgbGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHtcbiAgICB2YXIgbHIgPSAxIC8gKGxlZnQgLSByaWdodCksXG4gICAgICAgIGJ0ID0gMSAvIChib3R0b20gLSB0b3ApLFxuICAgICAgICBuZiA9IDEgLyAobmVhciAtIGZhcik7XG4gICAgb3V0WzBdID0gLTIgKiBscjtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs1XSA9IC0yICogYnQ7XG4gICAgb3V0WzZdID0gMDtcbiAgICBvdXRbN10gPSAwO1xuICAgIG91dFs4XSA9IDA7XG4gICAgb3V0WzldID0gMDtcbiAgICBvdXRbMTBdID0gMiAqIG5mO1xuICAgIG91dFsxMV0gPSAwO1xuICAgIG91dFsxMl0gPSAobGVmdCArIHJpZ2h0KSAqIGxyO1xuICAgIG91dFsxM10gPSAodG9wICsgYm90dG9tKSAqIGJ0O1xuICAgIG91dFsxNF0gPSAoZmFyICsgbmVhcikgKiBuZjtcbiAgICBvdXRbMTVdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSBsb29rLWF0IG1hdHJpeCB3aXRoIHRoZSBnaXZlbiBleWUgcG9zaXRpb24sIGZvY2FsIHBvaW50LCBhbmQgdXAgYXhpc1xuICpcbiAqIEBwYXJhbSB7bWF0NH0gb3V0IG1hdDQgZnJ1c3R1bSBtYXRyaXggd2lsbCBiZSB3cml0dGVuIGludG9cbiAqIEBwYXJhbSB7dmVjM30gZXllIFBvc2l0aW9uIG9mIHRoZSB2aWV3ZXJcbiAqIEBwYXJhbSB7dmVjM30gY2VudGVyIFBvaW50IHRoZSB2aWV3ZXIgaXMgbG9va2luZyBhdFxuICogQHBhcmFtIHt2ZWMzfSB1cCB2ZWMzIHBvaW50aW5nIHVwXG4gKiBAcmV0dXJucyB7bWF0NH0gb3V0XG4gKi9cbm1hdDQubG9va0F0ID0gZnVuY3Rpb24gKG91dCwgZXllLCBjZW50ZXIsIHVwKSB7XG4gICAgdmFyIHgwLCB4MSwgeDIsIHkwLCB5MSwgeTIsIHowLCB6MSwgejIsIGxlbixcbiAgICAgICAgZXlleCA9IGV5ZVswXSxcbiAgICAgICAgZXlleSA9IGV5ZVsxXSxcbiAgICAgICAgZXlleiA9IGV5ZVsyXSxcbiAgICAgICAgdXB4ID0gdXBbMF0sXG4gICAgICAgIHVweSA9IHVwWzFdLFxuICAgICAgICB1cHogPSB1cFsyXSxcbiAgICAgICAgY2VudGVyeCA9IGNlbnRlclswXSxcbiAgICAgICAgY2VudGVyeSA9IGNlbnRlclsxXSxcbiAgICAgICAgY2VudGVyeiA9IGNlbnRlclsyXTtcblxuICAgIGlmIChNYXRoLmFicyhleWV4IC0gY2VudGVyeCkgPCBHTE1BVF9FUFNJTE9OICYmXG4gICAgICAgIE1hdGguYWJzKGV5ZXkgLSBjZW50ZXJ5KSA8IEdMTUFUX0VQU0lMT04gJiZcbiAgICAgICAgTWF0aC5hYnMoZXlleiAtIGNlbnRlcnopIDwgR0xNQVRfRVBTSUxPTikge1xuICAgICAgICByZXR1cm4gbWF0NC5pZGVudGl0eShvdXQpO1xuICAgIH1cblxuICAgIHowID0gZXlleCAtIGNlbnRlcng7XG4gICAgejEgPSBleWV5IC0gY2VudGVyeTtcbiAgICB6MiA9IGV5ZXogLSBjZW50ZXJ6O1xuXG4gICAgbGVuID0gMSAvIE1hdGguc3FydCh6MCAqIHowICsgejEgKiB6MSArIHoyICogejIpO1xuICAgIHowICo9IGxlbjtcbiAgICB6MSAqPSBsZW47XG4gICAgejIgKj0gbGVuO1xuXG4gICAgeDAgPSB1cHkgKiB6MiAtIHVweiAqIHoxO1xuICAgIHgxID0gdXB6ICogejAgLSB1cHggKiB6MjtcbiAgICB4MiA9IHVweCAqIHoxIC0gdXB5ICogejA7XG4gICAgbGVuID0gTWF0aC5zcXJ0KHgwICogeDAgKyB4MSAqIHgxICsgeDIgKiB4Mik7XG4gICAgaWYgKCFsZW4pIHtcbiAgICAgICAgeDAgPSAwO1xuICAgICAgICB4MSA9IDA7XG4gICAgICAgIHgyID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZW4gPSAxIC8gbGVuO1xuICAgICAgICB4MCAqPSBsZW47XG4gICAgICAgIHgxICo9IGxlbjtcbiAgICAgICAgeDIgKj0gbGVuO1xuICAgIH1cblxuICAgIHkwID0gejEgKiB4MiAtIHoyICogeDE7XG4gICAgeTEgPSB6MiAqIHgwIC0gejAgKiB4MjtcbiAgICB5MiA9IHowICogeDEgLSB6MSAqIHgwO1xuXG4gICAgbGVuID0gTWF0aC5zcXJ0KHkwICogeTAgKyB5MSAqIHkxICsgeTIgKiB5Mik7XG4gICAgaWYgKCFsZW4pIHtcbiAgICAgICAgeTAgPSAwO1xuICAgICAgICB5MSA9IDA7XG4gICAgICAgIHkyID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgICBsZW4gPSAxIC8gbGVuO1xuICAgICAgICB5MCAqPSBsZW47XG4gICAgICAgIHkxICo9IGxlbjtcbiAgICAgICAgeTIgKj0gbGVuO1xuICAgIH1cblxuICAgIG91dFswXSA9IHgwO1xuICAgIG91dFsxXSA9IHkwO1xuICAgIG91dFsyXSA9IHowO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0geDE7XG4gICAgb3V0WzVdID0geTE7XG4gICAgb3V0WzZdID0gejE7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSB4MjtcbiAgICBvdXRbOV0gPSB5MjtcbiAgICBvdXRbMTBdID0gejI7XG4gICAgb3V0WzExXSA9IDA7XG4gICAgb3V0WzEyXSA9IC0oeDAgKiBleWV4ICsgeDEgKiBleWV5ICsgeDIgKiBleWV6KTtcbiAgICBvdXRbMTNdID0gLSh5MCAqIGV5ZXggKyB5MSAqIGV5ZXkgKyB5MiAqIGV5ZXopO1xuICAgIG91dFsxNF0gPSAtKHowICogZXlleCArIHoxICogZXlleSArIHoyICogZXlleik7XG4gICAgb3V0WzE1XSA9IDE7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0NFxuICpcbiAqIEBwYXJhbSB7bWF0NH0gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xubWF0NC5mcm9iID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4oTWF0aC5zcXJ0KE1hdGgucG93KGFbMF0sIDIpICsgTWF0aC5wb3coYVsxXSwgMikgKyBNYXRoLnBvdyhhWzJdLCAyKSArIE1hdGgucG93KGFbM10sIDIpICsgTWF0aC5wb3coYVs0XSwgMikgKyBNYXRoLnBvdyhhWzVdLCAyKSArIE1hdGgucG93KGFbNl0sIDIpICsgTWF0aC5wb3coYVs3XSwgMikgKyBNYXRoLnBvdyhhWzhdLCAyKSArIE1hdGgucG93KGFbOV0sIDIpICsgTWF0aC5wb3coYVsxMF0sIDIpICsgTWF0aC5wb3coYVsxMV0sIDIpICsgTWF0aC5wb3coYVsxMl0sIDIpICsgTWF0aC5wb3coYVsxM10sIDIpICsgTWF0aC5wb3coYVsxNF0sIDIpICsgTWF0aC5wb3coYVsxNV0sIDIpICkpXG59O1xuXG5leHBvcnQgZGVmYXVsdCBtYXQ0O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQ0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shader_source_header_light__ = __webpack_require__(51);\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__shader_source_header_light__[\"a\" /* default */]);\n\n/**\n * @constructor clay.Light\n * @extends clay.Node\n */\nvar Light = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function(){\n    return /** @lends clay.Light# */ {\n        /**\n         * Light RGB color\n         * @type {number[]}\n         */\n        color: [1, 1, 1],\n\n        /**\n         * Light intensity\n         * @type {number}\n         */\n        intensity: 1.0,\n\n        // Config for shadow map\n        /**\n         * If light cast shadow\n         * @type {boolean}\n         */\n        castShadow: true,\n\n        /**\n         * Shadow map size\n         * @type {number}\n         */\n        shadowResolution: 512,\n\n        /**\n         * Light group, shader with same `lightGroup` will be affected\n         *\n         * Only useful in forward rendering\n         * @type {number}\n         */\n        group: 0\n    };\n},\n/** @lends clay.Light.prototype. */\n{\n    /**\n     * Light type\n     * @type {string}\n     * @memberOf clay.Light#\n     */\n    type: '',\n\n    /**\n     * @return {clay.Light}\n     * @memberOf clay.Light.prototype\n     */\n    clone: function() {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.clone.call(this);\n        light.color = Array.prototype.slice.call(this.color);\n        light.intensity = this.intensity;\n        light.castShadow = this.castShadow;\n        light.shadowResolution = this.shadowResolution;\n\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Light);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0xpZ2h0LmpzPzUxMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9TaGFkZXInO1xuXG5pbXBvcnQgbGlnaHRTaGFkZXIgZnJvbSAnLi9zaGFkZXIvc291cmNlL2hlYWRlci9saWdodCc7XG5TaGFkZXJbJ2ltcG9ydCddKGxpZ2h0U2hhZGVyKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5MaWdodFxuICogQGV4dGVuZHMgY2xheS5Ob2RlXG4gKi9cbnZhciBMaWdodCA9IE5vZGUuZXh0ZW5kKGZ1bmN0aW9uKCl7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5MaWdodCMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogTGlnaHQgUkdCIGNvbG9yXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJbXX1cbiAgICAgICAgICovXG4gICAgICAgIGNvbG9yOiBbMSwgMSwgMV0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpZ2h0IGludGVuc2l0eVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgaW50ZW5zaXR5OiAxLjAsXG5cbiAgICAgICAgLy8gQ29uZmlnIGZvciBzaGFkb3cgbWFwXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBsaWdodCBjYXN0IHNoYWRvd1xuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGNhc3RTaGFkb3c6IHRydWUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNoYWRvdyBtYXAgc2l6ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc2hhZG93UmVzb2x1dGlvbjogNTEyLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBMaWdodCBncm91cCwgc2hhZGVyIHdpdGggc2FtZSBgbGlnaHRHcm91cGAgd2lsbCBiZSBhZmZlY3RlZFxuICAgICAgICAgKlxuICAgICAgICAgKiBPbmx5IHVzZWZ1bCBpbiBmb3J3YXJkIHJlbmRlcmluZ1xuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgZ3JvdXA6IDBcbiAgICB9O1xufSxcbi8qKiBAbGVuZHMgY2xheS5MaWdodC5wcm90b3R5cGUuICovXG57XG4gICAgLyoqXG4gICAgICogTGlnaHQgdHlwZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTGlnaHQjXG4gICAgICovXG4gICAgdHlwZTogJycsXG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtjbGF5LkxpZ2h0fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LkxpZ2h0LnByb3RvdHlwZVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGxpZ2h0ID0gTm9kZS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgbGlnaHQuY29sb3IgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmNvbG9yKTtcbiAgICAgICAgbGlnaHQuaW50ZW5zaXR5ID0gdGhpcy5pbnRlbnNpdHk7XG4gICAgICAgIGxpZ2h0LmNhc3RTaGFkb3cgPSB0aGlzLmNhc3RTaGFkb3c7XG4gICAgICAgIGxpZ2h0LnNoYWRvd1Jlc29sdXRpb24gPSB0aGlzLnNoYWRvd1Jlc29sdXRpb247XG5cbiAgICAgICAgcmV0dXJuIGxpZ2h0O1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9MaWdodC5qc1xuLy8gbW9kdWxlIGlkID0gMTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n\n\n\n/**\n * @constructor clay.Mesh\n * @extends clay.Renderable\n */\nvar Mesh = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].extend(/** @lends clay.Mesh# */ {\n    /**\n     * Used when it is a skinned mesh\n     * @type {clay.Skeleton}\n     */\n    skeleton: null,\n    /**\n     * Joints indices Meshes can share the one skeleton instance and each mesh can use one part of joints. Joints indices indicate the index of joint in the skeleton instance\n     * @type {number[]}\n     */\n    joints: null\n\n}, function () {\n    if (!this.joints) {\n        this.joints = [];\n    }\n}, {\n\n    /**\n     * Offset matrix used for multiple skinned mesh clone sharing one skeleton\n     * @type {clay.Matrix4}\n     */\n    offsetMatrix: null,\n\n    isInstancedMesh: function () { return false; },\n\n    isSkinnedMesh: function () {\n        return !!(this.skeleton && this.joints && this.joints.length > 0);\n    },\n\n    clone: function () {\n        var mesh = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].prototype.clone.call(this);\n        mesh.skeleton = this.skeleton;\n        if (this.joints) {\n            mesh.joints = this.joints.slice();\n        }\n        return mesh;\n    }\n});\n\n// Enums\nMesh.POINTS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].POINTS;\nMesh.LINES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINES;\nMesh.LINE_LOOP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_LOOP;\nMesh.LINE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_STRIP;\nMesh.TRIANGLES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES;\nMesh.TRIANGLE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_STRIP;\nMesh.TRIANGLE_FAN = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_FAN;\n\nMesh.BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK;\nMesh.FRONT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT;\nMesh.FRONT_AND_BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT_AND_BACK;\nMesh.CW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CW;\nMesh.CCW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Mesh);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL01lc2guanM/ZTQ4ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVuZGVyYWJsZSBmcm9tICcuL1JlbmRlcmFibGUnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuL2NvcmUvZ2xlbnVtJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5NZXNoXG4gKiBAZXh0ZW5kcyBjbGF5LlJlbmRlcmFibGVcbiAqL1xudmFyIE1lc2ggPSBSZW5kZXJhYmxlLmV4dGVuZCgvKiogQGxlbmRzIGNsYXkuTWVzaCMgKi8ge1xuICAgIC8qKlxuICAgICAqIFVzZWQgd2hlbiBpdCBpcyBhIHNraW5uZWQgbWVzaFxuICAgICAqIEB0eXBlIHtjbGF5LlNrZWxldG9ufVxuICAgICAqL1xuICAgIHNrZWxldG9uOiBudWxsLFxuICAgIC8qKlxuICAgICAqIEpvaW50cyBpbmRpY2VzIE1lc2hlcyBjYW4gc2hhcmUgdGhlIG9uZSBza2VsZXRvbiBpbnN0YW5jZSBhbmQgZWFjaCBtZXNoIGNhbiB1c2Ugb25lIHBhcnQgb2Ygam9pbnRzLiBKb2ludHMgaW5kaWNlcyBpbmRpY2F0ZSB0aGUgaW5kZXggb2Ygam9pbnQgaW4gdGhlIHNrZWxldG9uIGluc3RhbmNlXG4gICAgICogQHR5cGUge251bWJlcltdfVxuICAgICAqL1xuICAgIGpvaW50czogbnVsbFxuXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmpvaW50cykge1xuICAgICAgICB0aGlzLmpvaW50cyA9IFtdO1xuICAgIH1cbn0sIHtcblxuICAgIC8qKlxuICAgICAqIE9mZnNldCBtYXRyaXggdXNlZCBmb3IgbXVsdGlwbGUgc2tpbm5lZCBtZXNoIGNsb25lIHNoYXJpbmcgb25lIHNrZWxldG9uXG4gICAgICogQHR5cGUge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBvZmZzZXRNYXRyaXg6IG51bGwsXG5cbiAgICBpc0luc3RhbmNlZE1lc2g6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGZhbHNlOyB9LFxuXG4gICAgaXNTa2lubmVkTWVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5za2VsZXRvbiAmJiB0aGlzLmpvaW50cyAmJiB0aGlzLmpvaW50cy5sZW5ndGggPiAwKTtcbiAgICB9LFxuXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG1lc2ggPSBSZW5kZXJhYmxlLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgICBtZXNoLnNrZWxldG9uID0gdGhpcy5za2VsZXRvbjtcbiAgICAgICAgaWYgKHRoaXMuam9pbnRzKSB7XG4gICAgICAgICAgICBtZXNoLmpvaW50cyA9IHRoaXMuam9pbnRzLnNsaWNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lc2g7XG4gICAgfVxufSk7XG5cbi8vIEVudW1zXG5NZXNoLlBPSU5UUyA9IGdsZW51bS5QT0lOVFM7XG5NZXNoLkxJTkVTID0gZ2xlbnVtLkxJTkVTO1xuTWVzaC5MSU5FX0xPT1AgPSBnbGVudW0uTElORV9MT09QO1xuTWVzaC5MSU5FX1NUUklQID0gZ2xlbnVtLkxJTkVfU1RSSVA7XG5NZXNoLlRSSUFOR0xFUyA9IGdsZW51bS5UUklBTkdMRVM7XG5NZXNoLlRSSUFOR0xFX1NUUklQID0gZ2xlbnVtLlRSSUFOR0xFX1NUUklQO1xuTWVzaC5UUklBTkdMRV9GQU4gPSBnbGVudW0uVFJJQU5HTEVfRkFOO1xuXG5NZXNoLkJBQ0sgPSBnbGVudW0uQkFDSztcbk1lc2guRlJPTlQgPSBnbGVudW0uRlJPTlQ7XG5NZXNoLkZST05UX0FORF9CQUNLID0gZ2xlbnVtLkZST05UX0FORF9CQUNLO1xuTWVzaC5DVyA9IGdsZW51bS5DVztcbk1lc2guQ0NXID0gZ2xlbnVtLkNDVztcblxuZXhwb3J0IGRlZmF1bHQgTWVzaDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9NZXNoLmpzXG4vLyBtb2R1bGUgaWQgPSAxN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_Cache__ = __webpack_require__(33);\n\n\n\n\n\n\nvar KEY_FRAMEBUFFER = 'framebuffer';\nvar KEY_RENDERBUFFER = 'renderbuffer';\nvar KEY_RENDERBUFFER_WIDTH = KEY_RENDERBUFFER + '_width';\nvar KEY_RENDERBUFFER_HEIGHT = KEY_RENDERBUFFER + '_height';\nvar KEY_RENDERBUFFER_ATTACHED = KEY_RENDERBUFFER + '_attached';\nvar KEY_DEPTHTEXTURE_ATTACHED = 'depthtexture_attached';\n\nvar GL_FRAMEBUFFER = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].FRAMEBUFFER;\nvar GL_RENDERBUFFER = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].RENDERBUFFER;\nvar GL_DEPTH_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_ATTACHMENT;\nvar GL_COLOR_ATTACHMENT0 = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].COLOR_ATTACHMENT0;\n/**\n * @constructor clay.FrameBuffer\n * @extends clay.core.Base\n */\nvar FrameBuffer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(\n/** @lends clay.FrameBuffer# */\n{\n    /**\n     * If use depth buffer\n     * @type {boolean}\n     */\n    depthBuffer: true,\n\n    /**\n     * @type {Object}\n     */\n    viewport: null,\n\n    _width: 0,\n    _height: 0,\n\n    _textures: null,\n\n    _boundRenderer: null,\n}, function () {\n    // Use cache\n    this._cache = new __WEBPACK_IMPORTED_MODULE_4__core_Cache__[\"a\" /* default */]();\n\n    this._textures = {};\n},\n\n/**@lends clay.FrameBuffer.prototype. */\n{\n    /**\n     * Get attached texture width\n     * {number}\n     */\n    // FIXME Can't use before #bind\n    getTextureWidth: function () {\n        return this._width;\n    },\n\n    /**\n     * Get attached texture height\n     * {number}\n     */\n    getTextureHeight: function () {\n        return this._height;\n    },\n\n    /**\n     * Bind the framebuffer to given renderer before rendering\n     * @param  {clay.Renderer} renderer\n     */\n    bind: function (renderer) {\n\n        if (renderer.__currentFrameBuffer) {\n            // Already bound\n            if (renderer.__currentFrameBuffer === this) {\n                return;\n            }\n\n            console.warn('Renderer already bound with another framebuffer. Unbind it first');\n        }\n        renderer.__currentFrameBuffer = this;\n\n        var _gl = renderer.gl;\n\n        _gl.bindFramebuffer(GL_FRAMEBUFFER, this._getFrameBufferGL(renderer));\n        this._boundRenderer = renderer;\n        var cache = this._cache;\n\n        cache.put('viewport', renderer.viewport);\n\n        var hasTextureAttached = false;\n        var width;\n        var height;\n        for (var attachment in this._textures) {\n            hasTextureAttached = true;\n            var obj = this._textures[attachment];\n            if (obj) {\n                // TODO Do width, height checking, make sure size are same\n                width = obj.texture.width;\n                height = obj.texture.height;\n                // Attach textures\n                this._doAttach(renderer, obj.texture, attachment, obj.target);\n            }\n        }\n\n        this._width = width;\n        this._height = height;\n\n        if (!hasTextureAttached && this.depthBuffer) {\n            console.error('Must attach texture before bind, or renderbuffer may have incorrect width and height.')\n        }\n\n        if (this.viewport) {\n            renderer.setViewport(this.viewport);\n        }\n        else {\n            renderer.setViewport(0, 0, width, height, 1);\n        }\n\n        var attachedTextures = cache.get('attached_textures');\n        if (attachedTextures) {\n            for (var attachment in attachedTextures) {\n                if (!this._textures[attachment]) {\n                    var target = attachedTextures[attachment];\n                    this._doDetach(_gl, attachment, target);\n                }\n            }\n        }\n        if (!cache.get(KEY_DEPTHTEXTURE_ATTACHED) && this.depthBuffer) {\n            // Create a new render buffer\n            if (cache.miss(KEY_RENDERBUFFER)) {\n                cache.put(KEY_RENDERBUFFER, _gl.createRenderbuffer());\n            }\n            var renderbuffer = cache.get(KEY_RENDERBUFFER);\n\n            if (width !== cache.get(KEY_RENDERBUFFER_WIDTH)\n                    || height !== cache.get(KEY_RENDERBUFFER_HEIGHT)) {\n                _gl.bindRenderbuffer(GL_RENDERBUFFER, renderbuffer);\n                _gl.renderbufferStorage(GL_RENDERBUFFER, _gl.DEPTH_COMPONENT16, width, height);\n                cache.put(KEY_RENDERBUFFER_WIDTH, width);\n                cache.put(KEY_RENDERBUFFER_HEIGHT, height);\n                _gl.bindRenderbuffer(GL_RENDERBUFFER, null);\n            }\n            if (!cache.get(KEY_RENDERBUFFER_ATTACHED)) {\n                _gl.framebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, renderbuffer);\n                cache.put(KEY_RENDERBUFFER_ATTACHED, true);\n            }\n        }\n    },\n\n    /**\n     * Unbind the frame buffer after rendering\n     * @param  {clay.Renderer} renderer\n     */\n    unbind: function (renderer) {\n        // Remove status record on renderer\n        renderer.__currentFrameBuffer = null;\n\n        var _gl = renderer.gl;\n\n        _gl.bindFramebuffer(GL_FRAMEBUFFER, null);\n        this._boundRenderer = null;\n\n        this._cache.use(renderer.__uid__);\n        var viewport = this._cache.get('viewport');\n        // Reset viewport;\n        if (viewport) {\n            renderer.setViewport(viewport);\n        }\n\n        this.updateMipmap(renderer);\n    },\n\n    // Because the data of texture is changed over time,\n    // Here update the mipmaps of texture each time after rendered;\n    updateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        for (var attachment in this._textures) {\n            var obj = this._textures[attachment];\n            if (obj) {\n                var texture = obj.texture;\n                // FIXME some texture format can't generate mipmap\n                if (!texture.NPOT && texture.useMipmap\n                    && texture.minFilter === __WEBPACK_IMPORTED_MODULE_1__Texture__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR) {\n                    var target = texture.textureType === 'textureCube' ? __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_CUBE_MAP : __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n                    _gl.bindTexture(target, texture.getWebGLTexture(renderer));\n                    _gl.generateMipmap(target);\n                    _gl.bindTexture(target, null);\n                }\n            }\n        }\n    },\n\n\n    // 0x8CD5, 36053, FRAMEBUFFER_COMPLETE\n    // 0x8CD6, 36054, FRAMEBUFFER_INCOMPLETE_ATTACHMENT\n    // 0x8CD7, 36055, FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT\n    // 0x8CD9, 36057, FRAMEBUFFER_INCOMPLETE_DIMENSIONS\n    // 0x8CDD, 36061, FRAMEBUFFER_UNSUPPORTED\n    checkStatus: function (_gl) {\n        return _gl.checkFramebufferStatus(GL_FRAMEBUFFER);\n    },\n\n    _getFrameBufferGL: function (renderer) {\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n\n        if (cache.miss(KEY_FRAMEBUFFER)) {\n            cache.put(KEY_FRAMEBUFFER, renderer.gl.createFramebuffer());\n        }\n\n        return cache.get(KEY_FRAMEBUFFER);\n    },\n\n    /**\n     * Attach a texture(RTT) to the framebuffer\n     * @param  {clay.Texture} texture\n     * @param  {number} [attachment=gl.COLOR_ATTACHMENT0]\n     * @param  {number} [target=gl.TEXTURE_2D]\n     */\n    attach: function (texture, attachment, target) {\n\n        if (!texture.width) {\n            throw new Error('The texture attached to color buffer is not a valid.');\n        }\n        // TODO width and height check\n\n        // If the depth_texture extension is enabled, developers\n        // Can attach a depth texture to the depth buffer\n        // http://blog.tojicode.com/2012/07/using-webgldepthtexture.html\n        attachment = attachment || GL_COLOR_ATTACHMENT0;\n        target = target || __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n\n        var boundRenderer = this._boundRenderer;\n        var _gl = boundRenderer && boundRenderer.gl;\n        var attachedTextures;\n\n        if (_gl) {\n            var cache = this._cache;\n            cache.use(boundRenderer.__uid__);\n            attachedTextures = cache.get('attached_textures');\n        }\n\n        // Check if texture attached\n        var previous = this._textures[attachment];\n        if (previous && previous.target === target\n            && previous.texture === texture\n            && (attachedTextures && attachedTextures[attachment] != null)\n        ) {\n            return;\n        }\n\n        var canAttach = true;\n        if (boundRenderer) {\n            canAttach = this._doAttach(boundRenderer, texture, attachment, target);\n            // Set viewport again incase attached to different size textures.\n            if (!this.viewport) {\n                boundRenderer.setViewport(0, 0, texture.width, texture.height, 1);\n            }\n        }\n\n        if (canAttach) {\n            this._textures[attachment] = this._textures[attachment] || {};\n            this._textures[attachment].texture = texture;\n            this._textures[attachment].target = target;\n        }\n    },\n\n    _doAttach: function (renderer, texture, attachment, target) {\n        var _gl = renderer.gl;\n        // Make sure texture is always updated\n        // Because texture width or height may be changed and in this we can't be notified\n        // FIXME awkward;\n        var webglTexture = texture.getWebGLTexture(renderer);\n        // Assume cache has been used.\n        var attachedTextures = this._cache.get('attached_textures');\n        if (attachedTextures && attachedTextures[attachment]) {\n            var obj = attachedTextures[attachment];\n            // Check if texture and target not changed\n            if (obj.texture === texture && obj.target === target) {\n                return;\n            }\n        }\n        attachment = +attachment;\n\n        var canAttach = true;\n        if (attachment === GL_DEPTH_ATTACHMENT || attachment === __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT) {\n            var extension = renderer.getGLExtension('WEBGL_depth_texture');\n\n            if (!extension) {\n                console.error('Depth texture is not supported by the browser');\n                // Still trying to use the depth texture extension.\n                // canAttach = false;\n            }\n            if (texture.format !== __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT\n                && texture.format !== __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL\n            ) {\n                console.error('The texture attached to depth buffer is not a valid.');\n                canAttach = false;\n            }\n\n            // Dispose render buffer created previous\n            if (canAttach) {\n                var renderbuffer = this._cache.get(KEY_RENDERBUFFER);\n                if (renderbuffer) {\n                    _gl.framebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, null);\n                    _gl.deleteRenderbuffer(renderbuffer);\n                    this._cache.put(KEY_RENDERBUFFER, false);\n                }\n\n                this._cache.put(KEY_RENDERBUFFER_ATTACHED, false);\n                this._cache.put(KEY_DEPTHTEXTURE_ATTACHED, true);\n            }\n        }\n\n        // Mipmap level can only be 0\n        _gl.framebufferTexture2D(GL_FRAMEBUFFER, attachment, target, webglTexture, 0);\n\n        if (!attachedTextures) {\n            attachedTextures = {};\n            this._cache.put('attached_textures', attachedTextures);\n        }\n        attachedTextures[attachment] = attachedTextures[attachment] || {};\n        attachedTextures[attachment].texture = texture;\n        attachedTextures[attachment].target = target;\n\n        return canAttach;\n    },\n\n    _doDetach: function (_gl, attachment, target) {\n        // Detach a texture from framebuffer\n        // https://github.com/KhronosGroup/WebGL/blob/master/conformance-suites/1.0.0/conformance/framebuffer-test.html#L145\n        _gl.framebufferTexture2D(GL_FRAMEBUFFER, attachment, target, null, 0);\n\n        // Assume cache has been used.\n        var attachedTextures = this._cache.get('attached_textures');\n        if (attachedTextures && attachedTextures[attachment]) {\n            attachedTextures[attachment] = null;\n        }\n\n        if (attachment === GL_DEPTH_ATTACHMENT || attachment === __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT) {\n            this._cache.put(KEY_DEPTHTEXTURE_ATTACHED, false);\n        }\n    },\n\n    /**\n     * Detach a texture\n     * @param  {number} [attachment=gl.COLOR_ATTACHMENT0]\n     * @param  {number} [target=gl.TEXTURE_2D]\n     */\n    detach: function (attachment, target) {\n        // TODO depth extension check ?\n        this._textures[attachment] = null;\n        if (this._boundRenderer) {\n            var cache = this._cache;\n            cache.use(this._boundRenderer.__uid__);\n            this._doDetach(this._boundRenderer.gl, attachment, target);\n        }\n    },\n    /**\n     * Dispose\n     * @param  {WebGLRenderingContext} _gl\n     */\n    dispose: function (renderer) {\n\n        var _gl = renderer.gl;\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var renderBuffer = cache.get(KEY_RENDERBUFFER);\n        if (renderBuffer) {\n            _gl.deleteRenderbuffer(renderBuffer);\n        }\n        var frameBuffer = cache.get(KEY_FRAMEBUFFER);\n        if (frameBuffer) {\n            _gl.deleteFramebuffer(frameBuffer);\n        }\n        cache.deleteContext(renderer.__uid__);\n\n        // Clear cache for reusing\n        this._textures = {};\n\n    }\n});\n\nFrameBuffer.DEPTH_ATTACHMENT = GL_DEPTH_ATTACHMENT;\nFrameBuffer.COLOR_ATTACHMENT0 = GL_COLOR_ATTACHMENT0;\nFrameBuffer.STENCIL_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].STENCIL_ATTACHMENT;\nFrameBuffer.DEPTH_STENCIL_ATTACHMENT = __WEBPACK_IMPORTED_MODULE_3__core_glenum__[\"a\" /* default */].DEPTH_STENCIL_ATTACHMENT;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FrameBuffer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0ZyYW1lQnVmZmVyLmpzPzhmOWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCBUZXh0dXJlQ3ViZSBmcm9tICcuL1RleHR1cmVDdWJlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgQ2FjaGUgZnJvbSAnLi9jb3JlL0NhY2hlJztcblxudmFyIEtFWV9GUkFNRUJVRkZFUiA9ICdmcmFtZWJ1ZmZlcic7XG52YXIgS0VZX1JFTkRFUkJVRkZFUiA9ICdyZW5kZXJidWZmZXInO1xudmFyIEtFWV9SRU5ERVJCVUZGRVJfV0lEVEggPSBLRVlfUkVOREVSQlVGRkVSICsgJ193aWR0aCc7XG52YXIgS0VZX1JFTkRFUkJVRkZFUl9IRUlHSFQgPSBLRVlfUkVOREVSQlVGRkVSICsgJ19oZWlnaHQnO1xudmFyIEtFWV9SRU5ERVJCVUZGRVJfQVRUQUNIRUQgPSBLRVlfUkVOREVSQlVGRkVSICsgJ19hdHRhY2hlZCc7XG52YXIgS0VZX0RFUFRIVEVYVFVSRV9BVFRBQ0hFRCA9ICdkZXB0aHRleHR1cmVfYXR0YWNoZWQnO1xuXG52YXIgR0xfRlJBTUVCVUZGRVIgPSBnbGVudW0uRlJBTUVCVUZGRVI7XG52YXIgR0xfUkVOREVSQlVGRkVSID0gZ2xlbnVtLlJFTkRFUkJVRkZFUjtcbnZhciBHTF9ERVBUSF9BVFRBQ0hNRU5UID0gZ2xlbnVtLkRFUFRIX0FUVEFDSE1FTlQ7XG52YXIgR0xfQ09MT1JfQVRUQUNITUVOVDAgPSBnbGVudW0uQ09MT1JfQVRUQUNITUVOVDA7XG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LkZyYW1lQnVmZmVyXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgRnJhbWVCdWZmZXIgPSBCYXNlLmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5GcmFtZUJ1ZmZlciMgKi9cbntcbiAgICAvKipcbiAgICAgKiBJZiB1c2UgZGVwdGggYnVmZmVyXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZGVwdGhCdWZmZXI6IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHZpZXdwb3J0OiBudWxsLFxuXG4gICAgX3dpZHRoOiAwLFxuICAgIF9oZWlnaHQ6IDAsXG5cbiAgICBfdGV4dHVyZXM6IG51bGwsXG5cbiAgICBfYm91bmRSZW5kZXJlcjogbnVsbCxcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBVc2UgY2FjaGVcbiAgICB0aGlzLl9jYWNoZSA9IG5ldyBDYWNoZSgpO1xuXG4gICAgdGhpcy5fdGV4dHVyZXMgPSB7fTtcbn0sXG5cbi8qKkBsZW5kcyBjbGF5LkZyYW1lQnVmZmVyLnByb3RvdHlwZS4gKi9cbntcbiAgICAvKipcbiAgICAgKiBHZXQgYXR0YWNoZWQgdGV4dHVyZSB3aWR0aFxuICAgICAqIHtudW1iZXJ9XG4gICAgICovXG4gICAgLy8gRklYTUUgQ2FuJ3QgdXNlIGJlZm9yZSAjYmluZFxuICAgIGdldFRleHR1cmVXaWR0aDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhdHRhY2hlZCB0ZXh0dXJlIGhlaWdodFxuICAgICAqIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0VGV4dHVyZUhlaWdodDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBCaW5kIHRoZSBmcmFtZWJ1ZmZlciB0byBnaXZlbiByZW5kZXJlciBiZWZvcmUgcmVuZGVyaW5nXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBiaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICBpZiAocmVuZGVyZXIuX19jdXJyZW50RnJhbWVCdWZmZXIpIHtcbiAgICAgICAgICAgIC8vIEFscmVhZHkgYm91bmRcbiAgICAgICAgICAgIGlmIChyZW5kZXJlci5fX2N1cnJlbnRGcmFtZUJ1ZmZlciA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZW5kZXJlciBhbHJlYWR5IGJvdW5kIHdpdGggYW5vdGhlciBmcmFtZWJ1ZmZlci4gVW5iaW5kIGl0IGZpcnN0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyZXIuX19jdXJyZW50RnJhbWVCdWZmZXIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICBfZ2wuYmluZEZyYW1lYnVmZmVyKEdMX0ZSQU1FQlVGRkVSLCB0aGlzLl9nZXRGcmFtZUJ1ZmZlckdMKHJlbmRlcmVyKSk7XG4gICAgICAgIHRoaXMuX2JvdW5kUmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5fY2FjaGU7XG5cbiAgICAgICAgY2FjaGUucHV0KCd2aWV3cG9ydCcsIHJlbmRlcmVyLnZpZXdwb3J0KTtcblxuICAgICAgICB2YXIgaGFzVGV4dHVyZUF0dGFjaGVkID0gZmFsc2U7XG4gICAgICAgIHZhciB3aWR0aDtcbiAgICAgICAgdmFyIGhlaWdodDtcbiAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiB0aGlzLl90ZXh0dXJlcykge1xuICAgICAgICAgICAgaGFzVGV4dHVyZUF0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBvYmogPSB0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XTtcbiAgICAgICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPIERvIHdpZHRoLCBoZWlnaHQgY2hlY2tpbmcsIG1ha2Ugc3VyZSBzaXplIGFyZSBzYW1lXG4gICAgICAgICAgICAgICAgd2lkdGggPSBvYmoudGV4dHVyZS53aWR0aDtcbiAgICAgICAgICAgICAgICBoZWlnaHQgPSBvYmoudGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgLy8gQXR0YWNoIHRleHR1cmVzXG4gICAgICAgICAgICAgICAgdGhpcy5fZG9BdHRhY2gocmVuZGVyZXIsIG9iai50ZXh0dXJlLCBhdHRhY2htZW50LCBvYmoudGFyZ2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2hlaWdodCA9IGhlaWdodDtcblxuICAgICAgICBpZiAoIWhhc1RleHR1cmVBdHRhY2hlZCAmJiB0aGlzLmRlcHRoQnVmZmVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNdXN0IGF0dGFjaCB0ZXh0dXJlIGJlZm9yZSBiaW5kLCBvciByZW5kZXJidWZmZXIgbWF5IGhhdmUgaW5jb3JyZWN0IHdpZHRoIGFuZCBoZWlnaHQuJylcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCh0aGlzLnZpZXdwb3J0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KDAsIDAsIHdpZHRoLCBoZWlnaHQsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF0dGFjaGVkVGV4dHVyZXMgPSBjYWNoZS5nZXQoJ2F0dGFjaGVkX3RleHR1cmVzJyk7XG4gICAgICAgIGlmIChhdHRhY2hlZFRleHR1cmVzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBhdHRhY2htZW50IGluIGF0dGFjaGVkVGV4dHVyZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9kb0RldGFjaChfZ2wsIGF0dGFjaG1lbnQsIHRhcmdldCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghY2FjaGUuZ2V0KEtFWV9ERVBUSFRFWFRVUkVfQVRUQUNIRUQpICYmIHRoaXMuZGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhIG5ldyByZW5kZXIgYnVmZmVyXG4gICAgICAgICAgICBpZiAoY2FjaGUubWlzcyhLRVlfUkVOREVSQlVGRkVSKSkge1xuICAgICAgICAgICAgICAgIGNhY2hlLnB1dChLRVlfUkVOREVSQlVGRkVSLCBfZ2wuY3JlYXRlUmVuZGVyYnVmZmVyKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlbmRlcmJ1ZmZlciA9IGNhY2hlLmdldChLRVlfUkVOREVSQlVGRkVSKTtcblxuICAgICAgICAgICAgaWYgKHdpZHRoICE9PSBjYWNoZS5nZXQoS0VZX1JFTkRFUkJVRkZFUl9XSURUSClcbiAgICAgICAgICAgICAgICAgICAgfHwgaGVpZ2h0ICE9PSBjYWNoZS5nZXQoS0VZX1JFTkRFUkJVRkZFUl9IRUlHSFQpKSB7XG4gICAgICAgICAgICAgICAgX2dsLmJpbmRSZW5kZXJidWZmZXIoR0xfUkVOREVSQlVGRkVSLCByZW5kZXJidWZmZXIpO1xuICAgICAgICAgICAgICAgIF9nbC5yZW5kZXJidWZmZXJTdG9yYWdlKEdMX1JFTkRFUkJVRkZFUiwgX2dsLkRFUFRIX0NPTVBPTkVOVDE2LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBjYWNoZS5wdXQoS0VZX1JFTkRFUkJVRkZFUl9XSURUSCwgd2lkdGgpO1xuICAgICAgICAgICAgICAgIGNhY2hlLnB1dChLRVlfUkVOREVSQlVGRkVSX0hFSUdIVCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBfZ2wuYmluZFJlbmRlcmJ1ZmZlcihHTF9SRU5ERVJCVUZGRVIsIG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjYWNoZS5nZXQoS0VZX1JFTkRFUkJVRkZFUl9BVFRBQ0hFRCkpIHtcbiAgICAgICAgICAgICAgICBfZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoR0xfRlJBTUVCVUZGRVIsIEdMX0RFUFRIX0FUVEFDSE1FTlQsIEdMX1JFTkRFUkJVRkZFUiwgcmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBjYWNoZS5wdXQoS0VZX1JFTkRFUkJVRkZFUl9BVFRBQ0hFRCwgdHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVW5iaW5kIHRoZSBmcmFtZSBidWZmZXIgYWZ0ZXIgcmVuZGVyaW5nXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICB1bmJpbmQ6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICAvLyBSZW1vdmUgc3RhdHVzIHJlY29yZCBvbiByZW5kZXJlclxuICAgICAgICByZW5kZXJlci5fX2N1cnJlbnRGcmFtZUJ1ZmZlciA9IG51bGw7XG5cbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIF9nbC5iaW5kRnJhbWVidWZmZXIoR0xfRlJBTUVCVUZGRVIsIG51bGwpO1xuICAgICAgICB0aGlzLl9ib3VuZFJlbmRlcmVyID0gbnVsbDtcblxuICAgICAgICB0aGlzLl9jYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHRoaXMuX2NhY2hlLmdldCgndmlld3BvcnQnKTtcbiAgICAgICAgLy8gUmVzZXQgdmlld3BvcnQ7XG4gICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0Vmlld3BvcnQodmlld3BvcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy51cGRhdGVNaXBtYXAocmVuZGVyZXIpO1xuICAgIH0sXG5cbiAgICAvLyBCZWNhdXNlIHRoZSBkYXRhIG9mIHRleHR1cmUgaXMgY2hhbmdlZCBvdmVyIHRpbWUsXG4gICAgLy8gSGVyZSB1cGRhdGUgdGhlIG1pcG1hcHMgb2YgdGV4dHVyZSBlYWNoIHRpbWUgYWZ0ZXIgcmVuZGVyZWQ7XG4gICAgdXBkYXRlTWlwbWFwOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICBmb3IgKHZhciBhdHRhY2htZW50IGluIHRoaXMuX3RleHR1cmVzKSB7XG4gICAgICAgICAgICB2YXIgb2JqID0gdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF07XG4gICAgICAgICAgICBpZiAob2JqKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSBvYmoudGV4dHVyZTtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRSBzb21lIHRleHR1cmUgZm9ybWF0IGNhbid0IGdlbmVyYXRlIG1pcG1hcFxuICAgICAgICAgICAgICAgIGlmICghdGV4dHVyZS5OUE9UICYmIHRleHR1cmUudXNlTWlwbWFwXG4gICAgICAgICAgICAgICAgICAgICYmIHRleHR1cmUubWluRmlsdGVyID09PSBUZXh0dXJlLkxJTkVBUl9NSVBNQVBfTElORUFSKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0ZXh0dXJlLnRleHR1cmVUeXBlID09PSAndGV4dHVyZUN1YmUnID8gZ2xlbnVtLlRFWFRVUkVfQ1VCRV9NQVAgOiBnbGVudW0uVEVYVFVSRV8yRDtcbiAgICAgICAgICAgICAgICAgICAgX2dsLmJpbmRUZXh0dXJlKHRhcmdldCwgdGV4dHVyZS5nZXRXZWJHTFRleHR1cmUocmVuZGVyZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgX2dsLmdlbmVyYXRlTWlwbWFwKHRhcmdldCk7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5iaW5kVGV4dHVyZSh0YXJnZXQsIG51bGwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cblxuICAgIC8vIDB4OENENSwgMzYwNTMsIEZSQU1FQlVGRkVSX0NPTVBMRVRFXG4gICAgLy8gMHg4Q0Q2LCAzNjA1NCwgRlJBTUVCVUZGRVJfSU5DT01QTEVURV9BVFRBQ0hNRU5UXG4gICAgLy8gMHg4Q0Q3LCAzNjA1NSwgRlJBTUVCVUZGRVJfSU5DT01QTEVURV9NSVNTSU5HX0FUVEFDSE1FTlRcbiAgICAvLyAweDhDRDksIDM2MDU3LCBGUkFNRUJVRkZFUl9JTkNPTVBMRVRFX0RJTUVOU0lPTlNcbiAgICAvLyAweDhDREQsIDM2MDYxLCBGUkFNRUJVRkZFUl9VTlNVUFBPUlRFRFxuICAgIGNoZWNrU3RhdHVzOiBmdW5jdGlvbiAoX2dsKSB7XG4gICAgICAgIHJldHVybiBfZ2wuY2hlY2tGcmFtZWJ1ZmZlclN0YXR1cyhHTF9GUkFNRUJVRkZFUik7XG4gICAgfSxcblxuICAgIF9nZXRGcmFtZUJ1ZmZlckdMOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIGNhY2hlID0gdGhpcy5fY2FjaGU7XG4gICAgICAgIGNhY2hlLnVzZShyZW5kZXJlci5fX3VpZF9fKTtcblxuICAgICAgICBpZiAoY2FjaGUubWlzcyhLRVlfRlJBTUVCVUZGRVIpKSB7XG4gICAgICAgICAgICBjYWNoZS5wdXQoS0VZX0ZSQU1FQlVGRkVSLCByZW5kZXJlci5nbC5jcmVhdGVGcmFtZWJ1ZmZlcigpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZS5nZXQoS0VZX0ZSQU1FQlVGRkVSKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQXR0YWNoIGEgdGV4dHVyZShSVFQpIHRvIHRoZSBmcmFtZWJ1ZmZlclxuICAgICAqIEBwYXJhbSAge2NsYXkuVGV4dHVyZX0gdGV4dHVyZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW2F0dGFjaG1lbnQ9Z2wuQ09MT1JfQVRUQUNITUVOVDBdXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbdGFyZ2V0PWdsLlRFWFRVUkVfMkRdXG4gICAgICovXG4gICAgYXR0YWNoOiBmdW5jdGlvbiAodGV4dHVyZSwgYXR0YWNobWVudCwgdGFyZ2V0KSB7XG5cbiAgICAgICAgaWYgKCF0ZXh0dXJlLndpZHRoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0ZXh0dXJlIGF0dGFjaGVkIHRvIGNvbG9yIGJ1ZmZlciBpcyBub3QgYSB2YWxpZC4nKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIHdpZHRoIGFuZCBoZWlnaHQgY2hlY2tcblxuICAgICAgICAvLyBJZiB0aGUgZGVwdGhfdGV4dHVyZSBleHRlbnNpb24gaXMgZW5hYmxlZCwgZGV2ZWxvcGVyc1xuICAgICAgICAvLyBDYW4gYXR0YWNoIGEgZGVwdGggdGV4dHVyZSB0byB0aGUgZGVwdGggYnVmZmVyXG4gICAgICAgIC8vIGh0dHA6Ly9ibG9nLnRvamljb2RlLmNvbS8yMDEyLzA3L3VzaW5nLXdlYmdsZGVwdGh0ZXh0dXJlLmh0bWxcbiAgICAgICAgYXR0YWNobWVudCA9IGF0dGFjaG1lbnQgfHwgR0xfQ09MT1JfQVRUQUNITUVOVDA7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldCB8fCBnbGVudW0uVEVYVFVSRV8yRDtcblxuICAgICAgICB2YXIgYm91bmRSZW5kZXJlciA9IHRoaXMuX2JvdW5kUmVuZGVyZXI7XG4gICAgICAgIHZhciBfZ2wgPSBib3VuZFJlbmRlcmVyICYmIGJvdW5kUmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBhdHRhY2hlZFRleHR1cmVzO1xuXG4gICAgICAgIGlmIChfZ2wpIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICAgICAgY2FjaGUudXNlKGJvdW5kUmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgICAgICBhdHRhY2hlZFRleHR1cmVzID0gY2FjaGUuZ2V0KCdhdHRhY2hlZF90ZXh0dXJlcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGV4dHVyZSBhdHRhY2hlZFxuICAgICAgICB2YXIgcHJldmlvdXMgPSB0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XTtcbiAgICAgICAgaWYgKHByZXZpb3VzICYmIHByZXZpb3VzLnRhcmdldCA9PT0gdGFyZ2V0XG4gICAgICAgICAgICAmJiBwcmV2aW91cy50ZXh0dXJlID09PSB0ZXh0dXJlXG4gICAgICAgICAgICAmJiAoYXR0YWNoZWRUZXh0dXJlcyAmJiBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdICE9IG51bGwpXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNhbkF0dGFjaCA9IHRydWU7XG4gICAgICAgIGlmIChib3VuZFJlbmRlcmVyKSB7XG4gICAgICAgICAgICBjYW5BdHRhY2ggPSB0aGlzLl9kb0F0dGFjaChib3VuZFJlbmRlcmVyLCB0ZXh0dXJlLCBhdHRhY2htZW50LCB0YXJnZXQpO1xuICAgICAgICAgICAgLy8gU2V0IHZpZXdwb3J0IGFnYWluIGluY2FzZSBhdHRhY2hlZCB0byBkaWZmZXJlbnQgc2l6ZSB0ZXh0dXJlcy5cbiAgICAgICAgICAgIGlmICghdGhpcy52aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgIGJvdW5kUmVuZGVyZXIuc2V0Vmlld3BvcnQoMCwgMCwgdGV4dHVyZS53aWR0aCwgdGV4dHVyZS5oZWlnaHQsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNhbkF0dGFjaCkge1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF0gPSB0aGlzLl90ZXh0dXJlc1thdHRhY2htZW50XSB8fCB7fTtcbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICAgICAgdGhpcy5fdGV4dHVyZXNbYXR0YWNobWVudF0udGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9kb0F0dGFjaDogZnVuY3Rpb24gKHJlbmRlcmVyLCB0ZXh0dXJlLCBhdHRhY2htZW50LCB0YXJnZXQpIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGV4dHVyZSBpcyBhbHdheXMgdXBkYXRlZFxuICAgICAgICAvLyBCZWNhdXNlIHRleHR1cmUgd2lkdGggb3IgaGVpZ2h0IG1heSBiZSBjaGFuZ2VkIGFuZCBpbiB0aGlzIHdlIGNhbid0IGJlIG5vdGlmaWVkXG4gICAgICAgIC8vIEZJWE1FIGF3a3dhcmQ7XG4gICAgICAgIHZhciB3ZWJnbFRleHR1cmUgPSB0ZXh0dXJlLmdldFdlYkdMVGV4dHVyZShyZW5kZXJlcik7XG4gICAgICAgIC8vIEFzc3VtZSBjYWNoZSBoYXMgYmVlbiB1c2VkLlxuICAgICAgICB2YXIgYXR0YWNoZWRUZXh0dXJlcyA9IHRoaXMuX2NhY2hlLmdldCgnYXR0YWNoZWRfdGV4dHVyZXMnKTtcbiAgICAgICAgaWYgKGF0dGFjaGVkVGV4dHVyZXMgJiYgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSkge1xuICAgICAgICAgICAgdmFyIG9iaiA9IGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF07XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB0ZXh0dXJlIGFuZCB0YXJnZXQgbm90IGNoYW5nZWRcbiAgICAgICAgICAgIGlmIChvYmoudGV4dHVyZSA9PT0gdGV4dHVyZSAmJiBvYmoudGFyZ2V0ID09PSB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXR0YWNobWVudCA9ICthdHRhY2htZW50O1xuXG4gICAgICAgIHZhciBjYW5BdHRhY2ggPSB0cnVlO1xuICAgICAgICBpZiAoYXR0YWNobWVudCA9PT0gR0xfREVQVEhfQVRUQUNITUVOVCB8fCBhdHRhY2htZW50ID09PSBnbGVudW0uREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UKSB7XG4gICAgICAgICAgICB2YXIgZXh0ZW5zaW9uID0gcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ1dFQkdMX2RlcHRoX3RleHR1cmUnKTtcblxuICAgICAgICAgICAgaWYgKCFleHRlbnNpb24pIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEZXB0aCB0ZXh0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgYnkgdGhlIGJyb3dzZXInKTtcbiAgICAgICAgICAgICAgICAvLyBTdGlsbCB0cnlpbmcgdG8gdXNlIHRoZSBkZXB0aCB0ZXh0dXJlIGV4dGVuc2lvbi5cbiAgICAgICAgICAgICAgICAvLyBjYW5BdHRhY2ggPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0ZXh0dXJlLmZvcm1hdCAhPT0gZ2xlbnVtLkRFUFRIX0NPTVBPTkVOVFxuICAgICAgICAgICAgICAgICYmIHRleHR1cmUuZm9ybWF0ICE9PSBnbGVudW0uREVQVEhfU1RFTkNJTFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIHRleHR1cmUgYXR0YWNoZWQgdG8gZGVwdGggYnVmZmVyIGlzIG5vdCBhIHZhbGlkLicpO1xuICAgICAgICAgICAgICAgIGNhbkF0dGFjaCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBEaXNwb3NlIHJlbmRlciBidWZmZXIgY3JlYXRlZCBwcmV2aW91c1xuICAgICAgICAgICAgaWYgKGNhbkF0dGFjaCkge1xuICAgICAgICAgICAgICAgIHZhciByZW5kZXJidWZmZXIgPSB0aGlzLl9jYWNoZS5nZXQoS0VZX1JFTkRFUkJVRkZFUik7XG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmJ1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICBfZ2wuZnJhbWVidWZmZXJSZW5kZXJidWZmZXIoR0xfRlJBTUVCVUZGRVIsIEdMX0RFUFRIX0FUVEFDSE1FTlQsIEdMX1JFTkRFUkJVRkZFUiwgbnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5kZWxldGVSZW5kZXJidWZmZXIocmVuZGVyYnVmZmVyKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fY2FjaGUucHV0KEtFWV9SRU5ERVJCVUZGRVIsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9jYWNoZS5wdXQoS0VZX1JFTkRFUkJVRkZFUl9BVFRBQ0hFRCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhY2hlLnB1dChLRVlfREVQVEhURVhUVVJFX0FUVEFDSEVELCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1pcG1hcCBsZXZlbCBjYW4gb25seSBiZSAwXG4gICAgICAgIF9nbC5mcmFtZWJ1ZmZlclRleHR1cmUyRChHTF9GUkFNRUJVRkZFUiwgYXR0YWNobWVudCwgdGFyZ2V0LCB3ZWJnbFRleHR1cmUsIDApO1xuXG4gICAgICAgIGlmICghYXR0YWNoZWRUZXh0dXJlcykge1xuICAgICAgICAgICAgYXR0YWNoZWRUZXh0dXJlcyA9IHt9O1xuICAgICAgICAgICAgdGhpcy5fY2FjaGUucHV0KCdhdHRhY2hlZF90ZXh0dXJlcycsIGF0dGFjaGVkVGV4dHVyZXMpO1xuICAgICAgICB9XG4gICAgICAgIGF0dGFjaGVkVGV4dHVyZXNbYXR0YWNobWVudF0gPSBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdIHx8IHt9O1xuICAgICAgICBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdLnRleHR1cmUgPSB0ZXh0dXJlO1xuICAgICAgICBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdLnRhcmdldCA9IHRhcmdldDtcblxuICAgICAgICByZXR1cm4gY2FuQXR0YWNoO1xuICAgIH0sXG5cbiAgICBfZG9EZXRhY2g6IGZ1bmN0aW9uIChfZ2wsIGF0dGFjaG1lbnQsIHRhcmdldCkge1xuICAgICAgICAvLyBEZXRhY2ggYSB0ZXh0dXJlIGZyb20gZnJhbWVidWZmZXJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9XZWJHTC9ibG9iL21hc3Rlci9jb25mb3JtYW5jZS1zdWl0ZXMvMS4wLjAvY29uZm9ybWFuY2UvZnJhbWVidWZmZXItdGVzdC5odG1sI0wxNDVcbiAgICAgICAgX2dsLmZyYW1lYnVmZmVyVGV4dHVyZTJEKEdMX0ZSQU1FQlVGRkVSLCBhdHRhY2htZW50LCB0YXJnZXQsIG51bGwsIDApO1xuXG4gICAgICAgIC8vIEFzc3VtZSBjYWNoZSBoYXMgYmVlbiB1c2VkLlxuICAgICAgICB2YXIgYXR0YWNoZWRUZXh0dXJlcyA9IHRoaXMuX2NhY2hlLmdldCgnYXR0YWNoZWRfdGV4dHVyZXMnKTtcbiAgICAgICAgaWYgKGF0dGFjaGVkVGV4dHVyZXMgJiYgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSkge1xuICAgICAgICAgICAgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoYXR0YWNobWVudCA9PT0gR0xfREVQVEhfQVRUQUNITUVOVCB8fCBhdHRhY2htZW50ID09PSBnbGVudW0uREVQVEhfU1RFTkNJTF9BVFRBQ0hNRU5UKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZS5wdXQoS0VZX0RFUFRIVEVYVFVSRV9BVFRBQ0hFRCwgZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERldGFjaCBhIHRleHR1cmVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFthdHRhY2htZW50PWdsLkNPTE9SX0FUVEFDSE1FTlQwXVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3RhcmdldD1nbC5URVhUVVJFXzJEXVxuICAgICAqL1xuICAgIGRldGFjaDogZnVuY3Rpb24gKGF0dGFjaG1lbnQsIHRhcmdldCkge1xuICAgICAgICAvLyBUT0RPIGRlcHRoIGV4dGVuc2lvbiBjaGVjayA/XG4gICAgICAgIHRoaXMuX3RleHR1cmVzW2F0dGFjaG1lbnRdID0gbnVsbDtcbiAgICAgICAgaWYgKHRoaXMuX2JvdW5kUmVuZGVyZXIpIHtcbiAgICAgICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICAgICAgY2FjaGUudXNlKHRoaXMuX2JvdW5kUmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgICAgICB0aGlzLl9kb0RldGFjaCh0aGlzLl9ib3VuZFJlbmRlcmVyLmdsLCBhdHRhY2htZW50LCB0YXJnZXQpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEaXNwb3NlXG4gICAgICogQHBhcmFtICB7V2ViR0xSZW5kZXJpbmdDb250ZXh0fSBfZ2xcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcblxuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuXG4gICAgICAgIGNhY2hlLnVzZShyZW5kZXJlci5fX3VpZF9fKTtcblxuICAgICAgICB2YXIgcmVuZGVyQnVmZmVyID0gY2FjaGUuZ2V0KEtFWV9SRU5ERVJCVUZGRVIpO1xuICAgICAgICBpZiAocmVuZGVyQnVmZmVyKSB7XG4gICAgICAgICAgICBfZ2wuZGVsZXRlUmVuZGVyYnVmZmVyKHJlbmRlckJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZyYW1lQnVmZmVyID0gY2FjaGUuZ2V0KEtFWV9GUkFNRUJVRkZFUik7XG4gICAgICAgIGlmIChmcmFtZUJ1ZmZlcikge1xuICAgICAgICAgICAgX2dsLmRlbGV0ZUZyYW1lYnVmZmVyKGZyYW1lQnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICBjYWNoZS5kZWxldGVDb250ZXh0KHJlbmRlcmVyLl9fdWlkX18pO1xuXG4gICAgICAgIC8vIENsZWFyIGNhY2hlIGZvciByZXVzaW5nXG4gICAgICAgIHRoaXMuX3RleHR1cmVzID0ge307XG5cbiAgICB9XG59KTtcblxuRnJhbWVCdWZmZXIuREVQVEhfQVRUQUNITUVOVCA9IEdMX0RFUFRIX0FUVEFDSE1FTlQ7XG5GcmFtZUJ1ZmZlci5DT0xPUl9BVFRBQ0hNRU5UMCA9IEdMX0NPTE9SX0FUVEFDSE1FTlQwO1xuRnJhbWVCdWZmZXIuU1RFTkNJTF9BVFRBQ0hNRU5UID0gZ2xlbnVtLlNURU5DSUxfQVRUQUNITUVOVDtcbkZyYW1lQnVmZmVyLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCA9IGdsZW51bS5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQ7XG5cbmV4cG9ydCBkZWZhdWx0IEZyYW1lQnVmZmVyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0ZyYW1lQnVmZmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Quaternion__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n\n\n\n\nvar nameId = 0;\n\n/**\n * @constructor clay.Node\n * @extends clay.core.Base\n */\nvar Node = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.Node# */{\n    /**\n     * Scene node name\n     * @type {string}\n     */\n    name: '',\n\n    /**\n     * Position relative to its parent node. aka translation.\n     * @type {clay.Vector3}\n     */\n    position: null,\n\n    /**\n     * Rotation relative to its parent node. Represented by a quaternion\n     * @type {clay.Quaternion}\n     */\n    rotation: null,\n\n    /**\n     * Scale relative to its parent node\n     * @type {clay.Vector3}\n     */\n    scale: null,\n\n    /**\n     * Affine transform matrix relative to its root scene.\n     * @type {clay.Matrix4}\n     */\n    worldTransform: null,\n\n    /**\n     * Affine transform matrix relative to its parent node.\n     * Composited with position, rotation and scale.\n     * @type {clay.Matrix4}\n     */\n    localTransform: null,\n\n    /**\n     * If the local transform is update from SRT(scale, rotation, translation, which is position here) each frame\n     * @type {boolean}\n     */\n    autoUpdateLocalTransform: true,\n\n    /**\n     * Parent of current scene node\n     * @type {?clay.Node}\n     * @private\n     */\n    _parent: null,\n    /**\n     * The root scene mounted. Null if it is a isolated node\n     * @type {?clay.Scene}\n     * @private\n     */\n    _scene: null,\n    /**\n     * @type {boolean}\n     * @private\n     */\n    _needsUpdateWorldTransform: true,\n    /**\n     * @type {boolean}\n     * @private\n     */\n    _inIterating: false,\n\n    // Depth for transparent list sorting\n    __depth: 0\n\n}, function () {\n\n    if (!this.name) {\n        this.name = (this.type || 'NODE') + '_' + (nameId++);\n    }\n\n    if (!this.position) {\n        this.position = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n    }\n    if (!this.rotation) {\n        this.rotation = new __WEBPACK_IMPORTED_MODULE_2__math_Quaternion__[\"a\" /* default */]();\n    }\n    if (!this.scale) {\n        this.scale = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](1, 1, 1);\n    }\n\n    this.worldTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n    this.localTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n\n    this._children = [];\n\n},\n/**@lends clay.Node.prototype. */\n{\n\n    /**\n     * @type {?clay.Vector3}\n     * @instance\n     */\n    target: null,\n    /**\n     * If node and its chilren invisible\n     * @type {boolean}\n     * @instance\n     */\n    invisible: false,\n\n    /**\n     * If Node is a skinned mesh\n     * @return {boolean}\n     */\n    isSkinnedMesh: function () {\n        return false;\n    },\n    /**\n     * Return true if it is a renderable scene node, like Mesh and ParticleSystem\n     * @return {boolean}\n     */\n    isRenderable: function () {\n        return false;\n    },\n\n    /**\n     * Set the name of the scene node\n     * @param {string} name\n     */\n    setName: function (name) {\n        var scene = this._scene;\n        if (scene) {\n            var nodeRepository = scene._nodeRepository;\n            delete nodeRepository[this.name];\n            nodeRepository[name] = this;\n        }\n        this.name = name;\n    },\n\n    /**\n     * Add a child node\n     * @param {clay.Node} node\n     */\n    add: function (node) {\n        var originalParent = node._parent;\n        if (originalParent === this) {\n            return;\n        }\n        if (originalParent) {\n            originalParent.remove(node);\n        }\n        node._parent = this;\n        this._children.push(node);\n\n        var scene = this._scene;\n        if (scene && scene !== node.scene) {\n            node.traverse(this._addSelfToScene, this);\n        }\n        // Mark children needs update transform\n        // In case child are remove and added again after parent moved\n        node._needsUpdateWorldTransform = true;\n    },\n\n    /**\n     * Remove the given child scene node\n     * @param {clay.Node} node\n     */\n    remove: function (node) {\n        var children = this._children;\n        var idx = children.indexOf(node);\n        if (idx < 0) {\n            return;\n        }\n\n        children.splice(idx, 1);\n        node._parent = null;\n\n        if (this._scene) {\n            node.traverse(this._removeSelfFromScene, this);\n        }\n    },\n\n    /**\n     * Remove all children\n     */\n    removeAll: function () {\n        var children = this._children;\n\n        for (var idx = 0; idx < children.length; idx++) {\n            children[idx]._parent = null;\n\n            if (this._scene) {\n                children[idx].traverse(this._removeSelfFromScene, this);\n            }\n        }\n\n        this._children = [];\n    },\n\n    /**\n     * Get the scene mounted\n     * @return {clay.Scene}\n     */\n    getScene: function () {\n        return this._scene;\n    },\n\n    /**\n     * Get parent node\n     * @return {clay.Scene}\n     */\n    getParent: function () {\n        return this._parent;\n    },\n\n    _removeSelfFromScene: function (descendant) {\n        descendant._scene.removeFromScene(descendant);\n        descendant._scene = null;\n    },\n\n    _addSelfToScene: function (descendant) {\n        this._scene.addToScene(descendant);\n        descendant._scene = this._scene;\n    },\n\n    /**\n     * Return true if it is ancestor of the given scene node\n     * @param {clay.Node} node\n     */\n    isAncestor: function (node) {\n        var parent = node._parent;\n        while(parent) {\n            if (parent === this) {\n                return true;\n            }\n            parent = parent._parent;\n        }\n        return false;\n    },\n\n    /**\n     * Get a new created array of all children nodes\n     * @return {clay.Node[]}\n     */\n    children: function () {\n        return this._children.slice();\n    },\n\n    /**\n     * Get child scene node at given index.\n     * @param {number} idx\n     * @return {clay.Node}\n     */\n    childAt: function (idx) {\n        return this._children[idx];\n    },\n\n    /**\n     * Get first child with the given name\n     * @param {string} name\n     * @return {clay.Node}\n     */\n    getChildByName: function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            if (children[i].name === name) {\n                return children[i];\n            }\n        }\n    },\n\n    /**\n     * Get first descendant have the given name\n     * @param {string} name\n     * @return {clay.Node}\n     */\n    getDescendantByName: function (name) {\n        var children = this._children;\n        for (var i = 0; i < children.length; i++) {\n            var child = children[i];\n            if (child.name === name) {\n                return child;\n            } else {\n                var res = child.getDescendantByName(name);\n                if (res) {\n                    return res;\n                }\n            }\n        }\n    },\n\n    /**\n     * Query descendant node by path\n     * @param {string} path\n     * @return {clay.Node}\n     * @example\n     *  node.queryNode('root/parent/child');\n     */\n    queryNode: function (path) {\n        if (!path) {\n            return;\n        }\n        // TODO Name have slash ?\n        var pathArr = path.split('/');\n        var current = this;\n        for (var i = 0; i < pathArr.length; i++) {\n            var name = pathArr[i];\n            // Skip empty\n            if (!name) {\n                continue;\n            }\n            var found = false;\n            var children = current._children;\n            for (var j = 0; j < children.length; j++) {\n                var child = children[j];\n                if (child.name === name) {\n                    current = child;\n                    found = true;\n                    break;\n                }\n            }\n            // Early return if not found\n            if (!found) {\n                return;\n            }\n        }\n\n        return current;\n    },\n\n    /**\n     * Get query path, relative to rootNode(default is scene)\n     * @param {clay.Node} [rootNode]\n     * @return {string}\n     */\n    getPath: function (rootNode) {\n        if (!this._parent) {\n            return '/';\n        }\n\n        var current = this._parent;\n        var path = this.name;\n        while (current._parent) {\n            path = current.name + '/' + path;\n            if (current._parent == rootNode) {\n                break;\n            }\n            current = current._parent;\n        }\n        if (!current._parent && rootNode) {\n            return null;\n        }\n        return path;\n    },\n\n    /**\n     * Depth first traverse all its descendant scene nodes.\n     *\n     * **WARN** Don't do `add`, `remove` operation in the callback during traverse.\n     * @param {Function} callback\n     * @param {Node} [context]\n     */\n    traverse: function (callback, context) {\n        callback.call(context, this);\n        var _children = this._children;\n        for(var i = 0, len = _children.length; i < len; i++) {\n            _children[i].traverse(callback, context);\n        }\n    },\n\n    /**\n     * Traverse all children nodes.\n     *\n     * **WARN** DON'T do `add`, `remove` operation in the callback during iteration.\n     *\n     * @param {Function} callback\n     * @param {Node} [context]\n     */\n    eachChild: function (callback, context) {\n        var _children = this._children;\n        for(var i = 0, len = _children.length; i < len; i++) {\n            var child = _children[i];\n            callback.call(context, child, i);\n        }\n    },\n\n    /**\n     * Set the local transform and decompose to SRT\n     * @param {clay.Matrix4} matrix\n     */\n    setLocalTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(this.localTransform.array, matrix.array);\n        this.decomposeLocalTransform();\n    },\n\n    /**\n     * Decompose the local transform to SRT\n     */\n    decomposeLocalTransform: function (keepScale) {\n        var scale = !keepScale ? this.scale: null;\n        this.localTransform.decomposeMatrix(scale, this.rotation, this.position);\n    },\n\n    /**\n     * Set the world transform and decompose to SRT\n     * @param {clay.Matrix4} matrix\n     */\n    setWorldTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(this.worldTransform.array, matrix.array);\n        this.decomposeWorldTransform();\n    },\n\n    /**\n     * Decompose the world transform to SRT\n     * @function\n     */\n    decomposeWorldTransform: (function () {\n\n        var tmp = __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].create();\n\n        return function (keepScale) {\n            var localTransform = this.localTransform;\n            var worldTransform = this.worldTransform;\n            // Assume world transform is updated\n            if (this._parent) {\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].invert(tmp, this._parent.worldTransform.array);\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].multiply(localTransform.array, tmp, worldTransform.array);\n            } else {\n                __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(localTransform.array, worldTransform.array);\n            }\n            var scale = !keepScale ? this.scale: null;\n            localTransform.decomposeMatrix(scale, this.rotation, this.position);\n        };\n    })(),\n\n    transformNeedsUpdate: function () {\n        return this.position._dirty\n            || this.rotation._dirty\n            || this.scale._dirty;\n    },\n\n    /**\n     * Update local transform from SRT\n     * Notice that local transform will not be updated if _dirty mark of position, rotation, scale is all false\n     */\n    updateLocalTransform: function () {\n        var position = this.position;\n        var rotation = this.rotation;\n        var scale = this.scale;\n\n        if (this.transformNeedsUpdate()) {\n            var m = this.localTransform.array;\n\n            // Transform order, scale->rotation->position\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].fromRotationTranslation(m, rotation.array, position.array);\n\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].scale(m, m, scale.array);\n\n            rotation._dirty = false;\n            scale._dirty = false;\n            position._dirty = false;\n\n            this._needsUpdateWorldTransform = true;\n        }\n    },\n\n    /**\n     * Update world transform, assume its parent world transform have been updated\n     * @private\n     */\n    _updateWorldTransformTopDown: function () {\n        var localTransform = this.localTransform.array;\n        var worldTransform = this.worldTransform.array;\n        if (this._parent) {\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(\n                worldTransform,\n                this._parent.worldTransform.array,\n                localTransform\n            );\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_mat4__[\"a\" /* default */].copy(worldTransform, localTransform);\n        }\n    },\n\n    /**\n     * Update world transform before whole scene is updated.\n     */\n    updateWorldTransform: function () {\n        // Find the root node which transform needs update;\n        var rootNodeIsDirty = this;\n        while (rootNodeIsDirty && rootNodeIsDirty.getParent()\n            && rootNodeIsDirty.getParent().transformNeedsUpdate()\n        ) {\n            rootNodeIsDirty = rootNodeIsDirty.getParent();\n        }\n        rootNodeIsDirty.update();\n    },\n\n    /**\n     * Update local transform and world transform recursively\n     * @param {boolean} forceUpdateWorld\n     */\n    update: function (forceUpdateWorld) {\n        if (this.autoUpdateLocalTransform) {\n            this.updateLocalTransform();\n        }\n        else {\n            // Transform is manually setted\n            forceUpdateWorld = true;\n        }\n\n        if (forceUpdateWorld || this._needsUpdateWorldTransform) {\n            this._updateWorldTransformTopDown();\n            forceUpdateWorld = true;\n            this._needsUpdateWorldTransform = false;\n        }\n\n        var children = this._children;\n        for(var i = 0, len = children.length; i < len; i++) {\n            children[i].update(forceUpdateWorld);\n        }\n    },\n\n    /**\n     * Get bounding box of node\n     * @param  {Function} [filter]\n     * @param  {clay.BoundingBox} [out]\n     * @return {clay.BoundingBox}\n     */\n    // TODO Skinning\n    getBoundingBox: (function () {\n        function defaultFilter (el) {\n            return !el.invisible && el.geometry;\n        }\n        var tmpBBox = new __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__[\"a\" /* default */]();\n        var tmpMat4 = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        var invWorldTransform = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        return function (filter, out) {\n            out = out || new __WEBPACK_IMPORTED_MODULE_5__math_BoundingBox__[\"a\" /* default */]();\n            filter = filter || defaultFilter;\n\n            if (this._parent) {\n                __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].invert(invWorldTransform, this._parent.worldTransform);\n            }\n            else {\n                __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].identity(invWorldTransform);\n            }\n\n            this.traverse(function (mesh) {\n                if (mesh.geometry && mesh.geometry.boundingBox) {\n                    tmpBBox.copy(mesh.geometry.boundingBox);\n                    __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */].multiply(tmpMat4, invWorldTransform, mesh.worldTransform);\n                    tmpBBox.applyTransform(tmpMat4);\n                    out.union(tmpBBox);\n                }\n            }, this, defaultFilter);\n\n            return out;\n        };\n    })(),\n\n    /**\n     * Get world position, extracted from world transform\n     * @param  {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    getWorldPosition: function (out) {\n        // PENDING\n        if (this.transformNeedsUpdate()) {\n            this.updateWorldTransform();\n        }\n        var m = this.worldTransform.array;\n        if (out) {\n            var arr = out.array;\n            arr[0] = m[12];\n            arr[1] = m[13];\n            arr[2] = m[14];\n            return out;\n        }\n        else {\n            return new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](m[12], m[13], m[14]);\n        }\n    },\n\n    /**\n     * Clone a new node\n     * @return {Node}\n     */\n    clone: function () {\n        var node = new this.constructor();\n\n        var children = this._children;\n\n        node.setName(this.name);\n        node.position.copy(this.position);\n        node.rotation.copy(this.rotation);\n        node.scale.copy(this.scale);\n\n        for (var i = 0; i < children.length; i++) {\n            node.add(children[i].clone());\n        }\n\n        return node;\n    },\n\n    /**\n     * Rotate the node around a axis by angle degrees, axis passes through point\n     * @param {clay.Vector3} point Center point\n     * @param {clay.Vector3} axis  Center axis\n     * @param {number}       angle Rotation angle\n     * @see http://docs.unity3d.com/Documentation/ScriptReference/Transform.RotateAround.html\n     * @function\n     */\n    rotateAround: (function () {\n        var v = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        var RTMatrix = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n\n        // TODO improve performance\n        return function (point, axis, angle) {\n\n            v.copy(this.position).subtract(point);\n\n            var localTransform = this.localTransform;\n            localTransform.identity();\n            // parent node\n            localTransform.translate(point);\n            localTransform.rotate(angle, axis);\n\n            RTMatrix.fromRotationTranslation(this.rotation, v);\n            localTransform.multiply(RTMatrix);\n            localTransform.scale(this.scale);\n\n            this.decomposeLocalTransform();\n            this._needsUpdateWorldTransform = true;\n        };\n    })(),\n\n    /**\n     * @param {clay.Vector3} target\n     * @param {clay.Vector3} [up]\n     * @see http://www.opengl.org/sdk/docs/man2/xhtml/gluLookAt.xml\n     * @function\n     */\n    lookAt: (function () {\n        var m = new __WEBPACK_IMPORTED_MODULE_3__math_Matrix4__[\"a\" /* default */]();\n        return function (target, up) {\n            m.lookAt(this.position, target, up || this.localTransform.y).invert();\n            this.setLocalTransform(m);\n\n            this.target = target;\n        };\n    })()\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Node);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL05vZGUuanM/YTI2NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuL2NvcmUvQmFzZSc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgUXVhdGVybmlvbiBmcm9tICcuL21hdGgvUXVhdGVybmlvbic7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgbWF0NCBmcm9tICcuL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5cbnZhciBuYW1lSWQgPSAwO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5Lk5vZGVcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBOb2RlID0gQmFzZS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5Lk5vZGUjICove1xuICAgIC8qKlxuICAgICAqIFNjZW5lIG5vZGUgbmFtZVxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgbmFtZTogJycsXG5cbiAgICAvKipcbiAgICAgKiBQb3NpdGlvbiByZWxhdGl2ZSB0byBpdHMgcGFyZW50IG5vZGUuIGFrYSB0cmFuc2xhdGlvbi5cbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHBvc2l0aW9uOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogUm90YXRpb24gcmVsYXRpdmUgdG8gaXRzIHBhcmVudCBub2RlLiBSZXByZXNlbnRlZCBieSBhIHF1YXRlcm5pb25cbiAgICAgKiBAdHlwZSB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHJvdGF0aW9uOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgcmVsYXRpdmUgdG8gaXRzIHBhcmVudCBub2RlXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBzY2FsZTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIEFmZmluZSB0cmFuc2Zvcm0gbWF0cml4IHJlbGF0aXZlIHRvIGl0cyByb290IHNjZW5lLlxuICAgICAqIEB0eXBlIHtjbGF5Lk1hdHJpeDR9XG4gICAgICovXG4gICAgd29ybGRUcmFuc2Zvcm06IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBBZmZpbmUgdHJhbnNmb3JtIG1hdHJpeCByZWxhdGl2ZSB0byBpdHMgcGFyZW50IG5vZGUuXG4gICAgICogQ29tcG9zaXRlZCB3aXRoIHBvc2l0aW9uLCByb3RhdGlvbiBhbmQgc2NhbGUuXG4gICAgICogQHR5cGUge2NsYXkuTWF0cml4NH1cbiAgICAgKi9cbiAgICBsb2NhbFRyYW5zZm9ybTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIElmIHRoZSBsb2NhbCB0cmFuc2Zvcm0gaXMgdXBkYXRlIGZyb20gU1JUKHNjYWxlLCByb3RhdGlvbiwgdHJhbnNsYXRpb24sIHdoaWNoIGlzIHBvc2l0aW9uIGhlcmUpIGVhY2ggZnJhbWVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBhdXRvVXBkYXRlTG9jYWxUcmFuc2Zvcm06IHRydWUsXG5cbiAgICAvKipcbiAgICAgKiBQYXJlbnQgb2YgY3VycmVudCBzY2VuZSBub2RlXG4gICAgICogQHR5cGUgez9jbGF5Lk5vZGV9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfcGFyZW50OiBudWxsLFxuICAgIC8qKlxuICAgICAqIFRoZSByb290IHNjZW5lIG1vdW50ZWQuIE51bGwgaWYgaXQgaXMgYSBpc29sYXRlZCBub2RlXG4gICAgICogQHR5cGUgez9jbGF5LlNjZW5lfVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX3NjZW5lOiBudWxsLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX25lZWRzVXBkYXRlV29ybGRUcmFuc2Zvcm06IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfaW5JdGVyYXRpbmc6IGZhbHNlLFxuXG4gICAgLy8gRGVwdGggZm9yIHRyYW5zcGFyZW50IGxpc3Qgc29ydGluZ1xuICAgIF9fZGVwdGg6IDBcblxufSwgZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKCF0aGlzLm5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gKHRoaXMudHlwZSB8fCAnTk9ERScpICsgJ18nICsgKG5hbWVJZCsrKTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgfVxuICAgIGlmICghdGhpcy5yb3RhdGlvbikge1xuICAgICAgICB0aGlzLnJvdGF0aW9uID0gbmV3IFF1YXRlcm5pb24oKTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnNjYWxlKSB7XG4gICAgICAgIHRoaXMuc2NhbGUgPSBuZXcgVmVjdG9yMygxLCAxLCAxKTtcbiAgICB9XG5cbiAgICB0aGlzLndvcmxkVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcbiAgICB0aGlzLmxvY2FsVHJhbnNmb3JtID0gbmV3IE1hdHJpeDQoKTtcblxuICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG5cbn0sXG4vKipAbGVuZHMgY2xheS5Ob2RlLnByb3RvdHlwZS4gKi9cbntcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/Y2xheS5WZWN0b3IzfVxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIHRhcmdldDogbnVsbCxcbiAgICAvKipcbiAgICAgKiBJZiBub2RlIGFuZCBpdHMgY2hpbHJlbiBpbnZpc2libGVcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBpbnZpc2libGU6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogSWYgTm9kZSBpcyBhIHNraW5uZWQgbWVzaFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNTa2lubmVkTWVzaDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBpdCBpcyBhIHJlbmRlcmFibGUgc2NlbmUgbm9kZSwgbGlrZSBNZXNoIGFuZCBQYXJ0aWNsZVN5c3RlbVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNSZW5kZXJhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBuYW1lIG9mIHRoZSBzY2VuZSBub2RlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICBzZXROYW1lOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICAgICAgaWYgKHNjZW5lKSB7XG4gICAgICAgICAgICB2YXIgbm9kZVJlcG9zaXRvcnkgPSBzY2VuZS5fbm9kZVJlcG9zaXRvcnk7XG4gICAgICAgICAgICBkZWxldGUgbm9kZVJlcG9zaXRvcnlbdGhpcy5uYW1lXTtcbiAgICAgICAgICAgIG5vZGVSZXBvc2l0b3J5W25hbWVdID0gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBjaGlsZCBub2RlXG4gICAgICogQHBhcmFtIHtjbGF5Lk5vZGV9IG5vZGVcbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHZhciBvcmlnaW5hbFBhcmVudCA9IG5vZGUuX3BhcmVudDtcbiAgICAgICAgaWYgKG9yaWdpbmFsUGFyZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9yaWdpbmFsUGFyZW50KSB7XG4gICAgICAgICAgICBvcmlnaW5hbFBhcmVudC5yZW1vdmUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZS5fcGFyZW50ID0gdGhpcztcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4ucHVzaChub2RlKTtcblxuICAgICAgICB2YXIgc2NlbmUgPSB0aGlzLl9zY2VuZTtcbiAgICAgICAgaWYgKHNjZW5lICYmIHNjZW5lICE9PSBub2RlLnNjZW5lKSB7XG4gICAgICAgICAgICBub2RlLnRyYXZlcnNlKHRoaXMuX2FkZFNlbGZUb1NjZW5lLCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBNYXJrIGNoaWxkcmVuIG5lZWRzIHVwZGF0ZSB0cmFuc2Zvcm1cbiAgICAgICAgLy8gSW4gY2FzZSBjaGlsZCBhcmUgcmVtb3ZlIGFuZCBhZGRlZCBhZ2FpbiBhZnRlciBwYXJlbnQgbW92ZWRcbiAgICAgICAgbm9kZS5fbmVlZHNVcGRhdGVXb3JsZFRyYW5zZm9ybSA9IHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2hpbGQgc2NlbmUgbm9kZVxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBub2RlXG4gICAgICovXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgdmFyIGlkeCA9IGNoaWxkcmVuLmluZGV4T2Yobm9kZSk7XG4gICAgICAgIGlmIChpZHggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgbm9kZS5fcGFyZW50ID0gbnVsbDtcblxuICAgICAgICBpZiAodGhpcy5fc2NlbmUpIHtcbiAgICAgICAgICAgIG5vZGUudHJhdmVyc2UodGhpcy5fcmVtb3ZlU2VsZkZyb21TY2VuZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBjaGlsZHJlblxuICAgICAqL1xuICAgIHJlbW92ZUFsbDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcblxuICAgICAgICBmb3IgKHZhciBpZHggPSAwOyBpZHggPCBjaGlsZHJlbi5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjaGlsZHJlbltpZHhdLl9wYXJlbnQgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5fc2NlbmUpIHtcbiAgICAgICAgICAgICAgICBjaGlsZHJlbltpZHhdLnRyYXZlcnNlKHRoaXMuX3JlbW92ZVNlbGZGcm9tU2NlbmUsIHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2hpbGRyZW4gPSBbXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoZSBzY2VuZSBtb3VudGVkXG4gICAgICogQHJldHVybiB7Y2xheS5TY2VuZX1cbiAgICAgKi9cbiAgICBnZXRTY2VuZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2NlbmU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBwYXJlbnQgbm9kZVxuICAgICAqIEByZXR1cm4ge2NsYXkuU2NlbmV9XG4gICAgICovXG4gICAgZ2V0UGFyZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wYXJlbnQ7XG4gICAgfSxcblxuICAgIF9yZW1vdmVTZWxmRnJvbVNjZW5lOiBmdW5jdGlvbiAoZGVzY2VuZGFudCkge1xuICAgICAgICBkZXNjZW5kYW50Ll9zY2VuZS5yZW1vdmVGcm9tU2NlbmUoZGVzY2VuZGFudCk7XG4gICAgICAgIGRlc2NlbmRhbnQuX3NjZW5lID0gbnVsbDtcbiAgICB9LFxuXG4gICAgX2FkZFNlbGZUb1NjZW5lOiBmdW5jdGlvbiAoZGVzY2VuZGFudCkge1xuICAgICAgICB0aGlzLl9zY2VuZS5hZGRUb1NjZW5lKGRlc2NlbmRhbnQpO1xuICAgICAgICBkZXNjZW5kYW50Ll9zY2VuZSA9IHRoaXMuX3NjZW5lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm4gdHJ1ZSBpZiBpdCBpcyBhbmNlc3RvciBvZiB0aGUgZ2l2ZW4gc2NlbmUgbm9kZVxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBub2RlXG4gICAgICovXG4gICAgaXNBbmNlc3RvcjogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IG5vZGUuX3BhcmVudDtcbiAgICAgICAgd2hpbGUocGFyZW50KSB7XG4gICAgICAgICAgICBpZiAocGFyZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuX3BhcmVudDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBhIG5ldyBjcmVhdGVkIGFycmF5IG9mIGFsbCBjaGlsZHJlbiBub2Rlc1xuICAgICAqIEByZXR1cm4ge2NsYXkuTm9kZVtdfVxuICAgICAqL1xuICAgIGNoaWxkcmVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGlsZHJlbi5zbGljZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgY2hpbGQgc2NlbmUgbm9kZSBhdCBnaXZlbiBpbmRleC5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWR4XG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIGNoaWxkQXQ6IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoaWxkcmVuW2lkeF07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBmaXJzdCBjaGlsZCB3aXRoIHRoZSBnaXZlbiBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgZ2V0Q2hpbGRCeU5hbWU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2hpbGRyZW5baV0ubmFtZSA9PT0gbmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlyc3QgZGVzY2VuZGFudCBoYXZlIHRoZSBnaXZlbiBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgZ2V0RGVzY2VuZGFudEJ5TmFtZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciByZXMgPSBjaGlsZC5nZXREZXNjZW5kYW50QnlOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUXVlcnkgZGVzY2VuZGFudCBub2RlIGJ5IHBhdGhcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICAgICAqIEByZXR1cm4ge2NsYXkuTm9kZX1cbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICBub2RlLnF1ZXJ5Tm9kZSgncm9vdC9wYXJlbnQvY2hpbGQnKTtcbiAgICAgKi9cbiAgICBxdWVyeU5vZGU6IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIGlmICghcGF0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gTmFtZSBoYXZlIHNsYXNoID9cbiAgICAgICAgdmFyIHBhdGhBcnIgPSBwYXRoLnNwbGl0KCcvJyk7XG4gICAgICAgIHZhciBjdXJyZW50ID0gdGhpcztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbmFtZSA9IHBhdGhBcnJbaV07XG4gICAgICAgICAgICAvLyBTa2lwIGVtcHR5XG4gICAgICAgICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBmb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gY3VycmVudC5fY2hpbGRyZW47XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoaWxkcmVuLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bal07XG4gICAgICAgICAgICAgICAgaWYgKGNoaWxkLm5hbWUgPT09IG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEVhcmx5IHJldHVybiBpZiBub3QgZm91bmRcbiAgICAgICAgICAgIGlmICghZm91bmQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY3VycmVudDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHF1ZXJ5IHBhdGgsIHJlbGF0aXZlIHRvIHJvb3ROb2RlKGRlZmF1bHQgaXMgc2NlbmUpXG4gICAgICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtyb290Tm9kZV1cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgZ2V0UGF0aDogZnVuY3Rpb24gKHJvb3ROb2RlKSB7XG4gICAgICAgIGlmICghdGhpcy5fcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm4gJy8nO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJlbnQgPSB0aGlzLl9wYXJlbnQ7XG4gICAgICAgIHZhciBwYXRoID0gdGhpcy5uYW1lO1xuICAgICAgICB3aGlsZSAoY3VycmVudC5fcGFyZW50KSB7XG4gICAgICAgICAgICBwYXRoID0gY3VycmVudC5uYW1lICsgJy8nICsgcGF0aDtcbiAgICAgICAgICAgIGlmIChjdXJyZW50Ll9wYXJlbnQgPT0gcm9vdE5vZGUpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Ll9wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFjdXJyZW50Ll9wYXJlbnQgJiYgcm9vdE5vZGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXRoO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEZXB0aCBmaXJzdCB0cmF2ZXJzZSBhbGwgaXRzIGRlc2NlbmRhbnQgc2NlbmUgbm9kZXMuXG4gICAgICpcbiAgICAgKiAqKldBUk4qKiBEb24ndCBkbyBgYWRkYCwgYHJlbW92ZWAgb3BlcmF0aW9uIGluIHRoZSBjYWxsYmFjayBkdXJpbmcgdHJhdmVyc2UuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgKiBAcGFyYW0ge05vZGV9IFtjb250ZXh0XVxuICAgICAqL1xuICAgIHRyYXZlcnNlOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCB0aGlzKTtcbiAgICAgICAgdmFyIF9jaGlsZHJlbiA9IHRoaXMuX2NoaWxkcmVuO1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBsZW4gPSBfY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIF9jaGlsZHJlbltpXS50cmF2ZXJzZShjYWxsYmFjaywgY29udGV4dCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhdmVyc2UgYWxsIGNoaWxkcmVuIG5vZGVzLlxuICAgICAqXG4gICAgICogKipXQVJOKiogRE9OJ1QgZG8gYGFkZGAsIGByZW1vdmVgIG9wZXJhdGlvbiBpbiB0aGUgY2FsbGJhY2sgZHVyaW5nIGl0ZXJhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICogQHBhcmFtIHtOb2RlfSBbY29udGV4dF1cbiAgICAgKi9cbiAgICBlYWNoQ2hpbGQ6IGZ1bmN0aW9uIChjYWxsYmFjaywgY29udGV4dCkge1xuICAgICAgICB2YXIgX2NoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG4gICAgICAgIGZvcih2YXIgaSA9IDAsIGxlbiA9IF9jaGlsZHJlbi5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGNoaWxkID0gX2NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgY2FsbGJhY2suY2FsbChjb250ZXh0LCBjaGlsZCwgaSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBsb2NhbCB0cmFuc2Zvcm0gYW5kIGRlY29tcG9zZSB0byBTUlRcbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gbWF0cml4XG4gICAgICovXG4gICAgc2V0TG9jYWxUcmFuc2Zvcm06IGZ1bmN0aW9uIChtYXRyaXgpIHtcbiAgICAgICAgbWF0NC5jb3B5KHRoaXMubG9jYWxUcmFuc2Zvcm0uYXJyYXksIG1hdHJpeC5hcnJheSk7XG4gICAgICAgIHRoaXMuZGVjb21wb3NlTG9jYWxUcmFuc2Zvcm0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVjb21wb3NlIHRoZSBsb2NhbCB0cmFuc2Zvcm0gdG8gU1JUXG4gICAgICovXG4gICAgZGVjb21wb3NlTG9jYWxUcmFuc2Zvcm06IGZ1bmN0aW9uIChrZWVwU2NhbGUpIHtcbiAgICAgICAgdmFyIHNjYWxlID0gIWtlZXBTY2FsZSA/IHRoaXMuc2NhbGU6IG51bGw7XG4gICAgICAgIHRoaXMubG9jYWxUcmFuc2Zvcm0uZGVjb21wb3NlTWF0cml4KHNjYWxlLCB0aGlzLnJvdGF0aW9uLCB0aGlzLnBvc2l0aW9uKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB3b3JsZCB0cmFuc2Zvcm0gYW5kIGRlY29tcG9zZSB0byBTUlRcbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gbWF0cml4XG4gICAgICovXG4gICAgc2V0V29ybGRUcmFuc2Zvcm06IGZ1bmN0aW9uIChtYXRyaXgpIHtcbiAgICAgICAgbWF0NC5jb3B5KHRoaXMud29ybGRUcmFuc2Zvcm0uYXJyYXksIG1hdHJpeC5hcnJheSk7XG4gICAgICAgIHRoaXMuZGVjb21wb3NlV29ybGRUcmFuc2Zvcm0oKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVjb21wb3NlIHRoZSB3b3JsZCB0cmFuc2Zvcm0gdG8gU1JUXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICovXG4gICAgZGVjb21wb3NlV29ybGRUcmFuc2Zvcm06IChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHRtcCA9IG1hdDQuY3JlYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChrZWVwU2NhbGUpIHtcbiAgICAgICAgICAgIHZhciBsb2NhbFRyYW5zZm9ybSA9IHRoaXMubG9jYWxUcmFuc2Zvcm07XG4gICAgICAgICAgICB2YXIgd29ybGRUcmFuc2Zvcm0gPSB0aGlzLndvcmxkVHJhbnNmb3JtO1xuICAgICAgICAgICAgLy8gQXNzdW1lIHdvcmxkIHRyYW5zZm9ybSBpcyB1cGRhdGVkXG4gICAgICAgICAgICBpZiAodGhpcy5fcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgbWF0NC5pbnZlcnQodG1wLCB0aGlzLl9wYXJlbnQud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgICAgIG1hdDQubXVsdGlwbHkobG9jYWxUcmFuc2Zvcm0uYXJyYXksIHRtcCwgd29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXQ0LmNvcHkobG9jYWxUcmFuc2Zvcm0uYXJyYXksIHdvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzY2FsZSA9ICFrZWVwU2NhbGUgPyB0aGlzLnNjYWxlOiBudWxsO1xuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uZGVjb21wb3NlTWF0cml4KHNjYWxlLCB0aGlzLnJvdGF0aW9uLCB0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgdHJhbnNmb3JtTmVlZHNVcGRhdGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uX2RpcnR5XG4gICAgICAgICAgICB8fCB0aGlzLnJvdGF0aW9uLl9kaXJ0eVxuICAgICAgICAgICAgfHwgdGhpcy5zY2FsZS5fZGlydHk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBsb2NhbCB0cmFuc2Zvcm0gZnJvbSBTUlRcbiAgICAgKiBOb3RpY2UgdGhhdCBsb2NhbCB0cmFuc2Zvcm0gd2lsbCBub3QgYmUgdXBkYXRlZCBpZiBfZGlydHkgbWFyayBvZiBwb3NpdGlvbiwgcm90YXRpb24sIHNjYWxlIGlzIGFsbCBmYWxzZVxuICAgICAqL1xuICAgIHVwZGF0ZUxvY2FsVHJhbnNmb3JtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwb3NpdGlvbiA9IHRoaXMucG9zaXRpb247XG4gICAgICAgIHZhciByb3RhdGlvbiA9IHRoaXMucm90YXRpb247XG4gICAgICAgIHZhciBzY2FsZSA9IHRoaXMuc2NhbGU7XG5cbiAgICAgICAgaWYgKHRoaXMudHJhbnNmb3JtTmVlZHNVcGRhdGUoKSkge1xuICAgICAgICAgICAgdmFyIG0gPSB0aGlzLmxvY2FsVHJhbnNmb3JtLmFycmF5O1xuXG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gb3JkZXIsIHNjYWxlLT5yb3RhdGlvbi0+cG9zaXRpb25cbiAgICAgICAgICAgIG1hdDQuZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24obSwgcm90YXRpb24uYXJyYXksIHBvc2l0aW9uLmFycmF5KTtcblxuICAgICAgICAgICAgbWF0NC5zY2FsZShtLCBtLCBzY2FsZS5hcnJheSk7XG5cbiAgICAgICAgICAgIHJvdGF0aW9uLl9kaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgc2NhbGUuX2RpcnR5ID0gZmFsc2U7XG4gICAgICAgICAgICBwb3NpdGlvbi5fZGlydHkgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGVXb3JsZFRyYW5zZm9ybSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHdvcmxkIHRyYW5zZm9ybSwgYXNzdW1lIGl0cyBwYXJlbnQgd29ybGQgdHJhbnNmb3JtIGhhdmUgYmVlbiB1cGRhdGVkXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfdXBkYXRlV29ybGRUcmFuc2Zvcm1Ub3BEb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsb2NhbFRyYW5zZm9ybSA9IHRoaXMubG9jYWxUcmFuc2Zvcm0uYXJyYXk7XG4gICAgICAgIHZhciB3b3JsZFRyYW5zZm9ybSA9IHRoaXMud29ybGRUcmFuc2Zvcm0uYXJyYXk7XG4gICAgICAgIGlmICh0aGlzLl9wYXJlbnQpIHtcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHlBZmZpbmUoXG4gICAgICAgICAgICAgICAgd29ybGRUcmFuc2Zvcm0sXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFyZW50LndvcmxkVHJhbnNmb3JtLmFycmF5LFxuICAgICAgICAgICAgICAgIGxvY2FsVHJhbnNmb3JtXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWF0NC5jb3B5KHdvcmxkVHJhbnNmb3JtLCBsb2NhbFRyYW5zZm9ybSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHdvcmxkIHRyYW5zZm9ybSBiZWZvcmUgd2hvbGUgc2NlbmUgaXMgdXBkYXRlZC5cbiAgICAgKi9cbiAgICB1cGRhdGVXb3JsZFRyYW5zZm9ybTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBGaW5kIHRoZSByb290IG5vZGUgd2hpY2ggdHJhbnNmb3JtIG5lZWRzIHVwZGF0ZTtcbiAgICAgICAgdmFyIHJvb3ROb2RlSXNEaXJ0eSA9IHRoaXM7XG4gICAgICAgIHdoaWxlIChyb290Tm9kZUlzRGlydHkgJiYgcm9vdE5vZGVJc0RpcnR5LmdldFBhcmVudCgpXG4gICAgICAgICAgICAmJiByb290Tm9kZUlzRGlydHkuZ2V0UGFyZW50KCkudHJhbnNmb3JtTmVlZHNVcGRhdGUoKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJvb3ROb2RlSXNEaXJ0eSA9IHJvb3ROb2RlSXNEaXJ0eS5nZXRQYXJlbnQoKTtcbiAgICAgICAgfVxuICAgICAgICByb290Tm9kZUlzRGlydHkudXBkYXRlKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBsb2NhbCB0cmFuc2Zvcm0gYW5kIHdvcmxkIHRyYW5zZm9ybSByZWN1cnNpdmVseVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VVcGRhdGVXb3JsZFxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZvcmNlVXBkYXRlV29ybGQpIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0b1VwZGF0ZUxvY2FsVHJhbnNmb3JtKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUxvY2FsVHJhbnNmb3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBUcmFuc2Zvcm0gaXMgbWFudWFsbHkgc2V0dGVkXG4gICAgICAgICAgICBmb3JjZVVwZGF0ZVdvcmxkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3JjZVVwZGF0ZVdvcmxkIHx8IHRoaXMuX25lZWRzVXBkYXRlV29ybGRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVdvcmxkVHJhbnNmb3JtVG9wRG93bigpO1xuICAgICAgICAgICAgZm9yY2VVcGRhdGVXb3JsZCA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZVdvcmxkVHJhbnNmb3JtID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLl9jaGlsZHJlbjtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgbGVuID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGNoaWxkcmVuW2ldLnVwZGF0ZShmb3JjZVVwZGF0ZVdvcmxkKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgYm91bmRpbmcgYm94IG9mIG5vZGVcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW2ZpbHRlcl1cbiAgICAgKiBAcGFyYW0gIHtjbGF5LkJvdW5kaW5nQm94fSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICovXG4gICAgLy8gVE9ETyBTa2lubmluZ1xuICAgIGdldEJvdW5kaW5nQm94OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBkZWZhdWx0RmlsdGVyIChlbCkge1xuICAgICAgICAgICAgcmV0dXJuICFlbC5pbnZpc2libGUgJiYgZWwuZ2VvbWV0cnk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRtcEJCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIHRtcE1hdDQgPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgaW52V29ybGRUcmFuc2Zvcm0gPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGZpbHRlciwgb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBvdXQgfHwgbmV3IEJvdW5kaW5nQm94KCk7XG4gICAgICAgICAgICBmaWx0ZXIgPSBmaWx0ZXIgfHwgZGVmYXVsdEZpbHRlcjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX3BhcmVudCkge1xuICAgICAgICAgICAgICAgIE1hdHJpeDQuaW52ZXJ0KGludldvcmxkVHJhbnNmb3JtLCB0aGlzLl9wYXJlbnQud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgTWF0cml4NC5pZGVudGl0eShpbnZXb3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudHJhdmVyc2UoZnVuY3Rpb24gKG1lc2gpIHtcbiAgICAgICAgICAgICAgICBpZiAobWVzaC5nZW9tZXRyeSAmJiBtZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICAgICAgICAgIHRtcEJCb3guY29weShtZXNoLmdlb21ldHJ5LmJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgICAgICAgICAgTWF0cml4NC5tdWx0aXBseSh0bXBNYXQ0LCBpbnZXb3JsZFRyYW5zZm9ybSwgbWVzaC53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIHRtcEJCb3guYXBwbHlUcmFuc2Zvcm0odG1wTWF0NCk7XG4gICAgICAgICAgICAgICAgICAgIG91dC51bmlvbih0bXBCQm94KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB0aGlzLCBkZWZhdWx0RmlsdGVyKTtcblxuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLyoqXG4gICAgICogR2V0IHdvcmxkIHBvc2l0aW9uLCBleHRyYWN0ZWQgZnJvbSB3b3JsZCB0cmFuc2Zvcm1cbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IFtvdXRdXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGdldFdvcmxkUG9zaXRpb246IGZ1bmN0aW9uIChvdXQpIHtcbiAgICAgICAgLy8gUEVORElOR1xuICAgICAgICBpZiAodGhpcy50cmFuc2Zvcm1OZWVkc1VwZGF0ZSgpKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG0gPSB0aGlzLndvcmxkVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICBpZiAob3V0KSB7XG4gICAgICAgICAgICB2YXIgYXJyID0gb3V0LmFycmF5O1xuICAgICAgICAgICAgYXJyWzBdID0gbVsxMl07XG4gICAgICAgICAgICBhcnJbMV0gPSBtWzEzXTtcbiAgICAgICAgICAgIGFyclsyXSA9IG1bMTRdO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yMyhtWzEyXSwgbVsxM10sIG1bMTRdKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBub2RlXG4gICAgICogQHJldHVybiB7Tm9kZX1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbm9kZSA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKCk7XG5cbiAgICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fY2hpbGRyZW47XG5cbiAgICAgICAgbm9kZS5zZXROYW1lKHRoaXMubmFtZSk7XG4gICAgICAgIG5vZGUucG9zaXRpb24uY29weSh0aGlzLnBvc2l0aW9uKTtcbiAgICAgICAgbm9kZS5yb3RhdGlvbi5jb3B5KHRoaXMucm90YXRpb24pO1xuICAgICAgICBub2RlLnNjYWxlLmNvcHkodGhpcy5zY2FsZSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbm9kZS5hZGQoY2hpbGRyZW5baV0uY2xvbmUoKSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHRoZSBub2RlIGFyb3VuZCBhIGF4aXMgYnkgYW5nbGUgZGVncmVlcywgYXhpcyBwYXNzZXMgdGhyb3VnaCBwb2ludFxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBwb2ludCBDZW50ZXIgcG9pbnRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gYXhpcyAgQ2VudGVyIGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gICAgICAgYW5nbGUgUm90YXRpb24gYW5nbGVcbiAgICAgKiBAc2VlIGh0dHA6Ly9kb2NzLnVuaXR5M2QuY29tL0RvY3VtZW50YXRpb24vU2NyaXB0UmVmZXJlbmNlL1RyYW5zZm9ybS5Sb3RhdGVBcm91bmQuaHRtbFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqL1xuICAgIHJvdGF0ZUFyb3VuZDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHYgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgUlRNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuXG4gICAgICAgIC8vIFRPRE8gaW1wcm92ZSBwZXJmb3JtYW5jZVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHBvaW50LCBheGlzLCBhbmdsZSkge1xuXG4gICAgICAgICAgICB2LmNvcHkodGhpcy5wb3NpdGlvbikuc3VidHJhY3QocG9pbnQpO1xuXG4gICAgICAgICAgICB2YXIgbG9jYWxUcmFuc2Zvcm0gPSB0aGlzLmxvY2FsVHJhbnNmb3JtO1xuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0uaWRlbnRpdHkoKTtcbiAgICAgICAgICAgIC8vIHBhcmVudCBub2RlXG4gICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS50cmFuc2xhdGUocG9pbnQpO1xuICAgICAgICAgICAgbG9jYWxUcmFuc2Zvcm0ucm90YXRlKGFuZ2xlLCBheGlzKTtcblxuICAgICAgICAgICAgUlRNYXRyaXguZnJvbVJvdGF0aW9uVHJhbnNsYXRpb24odGhpcy5yb3RhdGlvbiwgdik7XG4gICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS5tdWx0aXBseShSVE1hdHJpeCk7XG4gICAgICAgICAgICBsb2NhbFRyYW5zZm9ybS5zY2FsZSh0aGlzLnNjYWxlKTtcblxuICAgICAgICAgICAgdGhpcy5kZWNvbXBvc2VMb2NhbFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGVXb3JsZFRyYW5zZm9ybSA9IHRydWU7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSB0YXJnZXRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW3VwXVxuICAgICAqIEBzZWUgaHR0cDovL3d3dy5vcGVuZ2wub3JnL3Nkay9kb2NzL21hbjIveGh0bWwvZ2x1TG9va0F0LnhtbFxuICAgICAqIEBmdW5jdGlvblxuICAgICAqL1xuICAgIGxvb2tBdDogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG0gPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRhcmdldCwgdXApIHtcbiAgICAgICAgICAgIG0ubG9va0F0KHRoaXMucG9zaXRpb24sIHRhcmdldCwgdXAgfHwgdGhpcy5sb2NhbFRyYW5zZm9ybS55KS5pbnZlcnQoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxUcmFuc2Zvcm0obSk7XG5cbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICB9O1xuICAgIH0pKClcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBOb2RlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL05vZGUuanNcbi8vIG1vZHVsZSBpZCA9IDE5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Camera__ = __webpack_require__(37);\n\n\n/**\n * @constructor clay.camera.Perspective\n * @extends clay.Camera\n */\nvar Perspective = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].extend(/** @lends clay.camera.Perspective# */{\n    /**\n     * Vertical field of view in degrees\n     * @type {number}\n     */\n    fov: 50,\n    /**\n     * Aspect ratio, typically viewport width / height\n     * @type {number}\n     */\n    aspect: 1,\n    /**\n     * Near bound of the frustum\n     * @type {number}\n     */\n    near: 0.1,\n    /**\n     * Far bound of the frustum\n     * @type {number}\n     */\n    far: 2000\n},\n/** @lends clay.camera.Perspective.prototype */\n{\n\n    updateProjectionMatrix: function() {\n        var rad = this.fov / 180 * Math.PI;\n        this.projectionMatrix.perspective(rad, this.aspect, this.near, this.far);\n    },\n    decomposeProjectionMatrix: function () {\n        var m = this.projectionMatrix.array;\n        var rad = Math.atan(1 / m[5]) * 2;\n        this.fov = rad / Math.PI * 180;\n        this.aspect = m[5] / m[0];\n        this.near = m[14] / (m[10] - 1);\n        this.far = m[14] / (m[10] + 1);\n    },\n    /**\n     * @return {clay.camera.Perspective}\n     */\n    clone: function() {\n        var camera = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].prototype.clone.call(this);\n        camera.fov = this.fov;\n        camera.aspect = this.aspect;\n        camera.near = this.near;\n        camera.far = this.far;\n\n        return camera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Perspective);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NhbWVyYS9QZXJzcGVjdGl2ZS5qcz9jNWJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDYW1lcmEgZnJvbSAnLi4vQ2FtZXJhJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jYW1lcmEuUGVyc3BlY3RpdmVcbiAqIEBleHRlbmRzIGNsYXkuQ2FtZXJhXG4gKi9cbnZhciBQZXJzcGVjdGl2ZSA9IENhbWVyYS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5LmNhbWVyYS5QZXJzcGVjdGl2ZSMgKi97XG4gICAgLyoqXG4gICAgICogVmVydGljYWwgZmllbGQgb2YgdmlldyBpbiBkZWdyZWVzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBmb3Y6IDUwLFxuICAgIC8qKlxuICAgICAqIEFzcGVjdCByYXRpbywgdHlwaWNhbGx5IHZpZXdwb3J0IHdpZHRoIC8gaGVpZ2h0XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBhc3BlY3Q6IDEsXG4gICAgLyoqXG4gICAgICogTmVhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgbmVhcjogMC4xLFxuICAgIC8qKlxuICAgICAqIEZhciBib3VuZCBvZiB0aGUgZnJ1c3R1bVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZmFyOiAyMDAwXG59LFxuLyoqIEBsZW5kcyBjbGF5LmNhbWVyYS5QZXJzcGVjdGl2ZS5wcm90b3R5cGUgKi9cbntcblxuICAgIHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmFkID0gdGhpcy5mb3YgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgICB0aGlzLnByb2plY3Rpb25NYXRyaXgucGVyc3BlY3RpdmUocmFkLCB0aGlzLmFzcGVjdCwgdGhpcy5uZWFyLCB0aGlzLmZhcik7XG4gICAgfSxcbiAgICBkZWNvbXBvc2VQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBtID0gdGhpcy5wcm9qZWN0aW9uTWF0cml4LmFycmF5O1xuICAgICAgICB2YXIgcmFkID0gTWF0aC5hdGFuKDEgLyBtWzVdKSAqIDI7XG4gICAgICAgIHRoaXMuZm92ID0gcmFkIC8gTWF0aC5QSSAqIDE4MDtcbiAgICAgICAgdGhpcy5hc3BlY3QgPSBtWzVdIC8gbVswXTtcbiAgICAgICAgdGhpcy5uZWFyID0gbVsxNF0gLyAobVsxMF0gLSAxKTtcbiAgICAgICAgdGhpcy5mYXIgPSBtWzE0XSAvIChtWzEwXSArIDEpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5jYW1lcmEuUGVyc3BlY3RpdmV9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgY2FtZXJhID0gQ2FtZXJhLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgICBjYW1lcmEuZm92ID0gdGhpcy5mb3Y7XG4gICAgICAgIGNhbWVyYS5hc3BlY3QgPSB0aGlzLmFzcGVjdDtcbiAgICAgICAgY2FtZXJhLm5lYXIgPSB0aGlzLm5lYXI7XG4gICAgICAgIGNhbWVyYS5mYXIgPSB0aGlzLmZhcjtcblxuICAgICAgICByZXR1cm4gY2FtZXJhO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBQZXJzcGVjdGl2ZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jYW1lcmEvUGVyc3BlY3RpdmUuanNcbi8vIG1vZHVsZSBpZCA9IDIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__color__ = __webpack_require__(67);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"e\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"g\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_0__color__[\"f\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__lab__ = __webpack_require__(225);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_1__lab__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_1__lab__[\"b\"]; });\n/* unused harmony reexport lch */\n/* unused harmony reexport gray */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__cubehelix__ = __webpack_require__(226);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_2__cubehelix__[\"a\"]; });\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2luZGV4LmpzP2RkNTYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHtkZWZhdWx0IGFzIGNvbG9yLCByZ2IsIGhzbH0gZnJvbSBcIi4vY29sb3JcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBsYWIsIGhjbCwgbGNoLCBncmF5fSBmcm9tIFwiLi9sYWJcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBjdWJlaGVsaXh9IGZyb20gXCIuL2N1YmVoZWxpeFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return GLMAT_EPSILON; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return GLMAT_ARRAY_TYPE; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return GLMAT_RANDOM; });\n\nvar GLMAT_EPSILON = 0.000001;\n\n// Use Array instead of Float32Array. It seems to be much faster and higher precision.\nvar GLMAT_ARRAY_TYPE = Array;\n// if(!GLMAT_ARRAY_TYPE) {\n//     GLMAT_ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n// }\n\nvar GLMAT_RANDOM = Math.random;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L2NvbW1vbi5qcz84YzYyIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IHZhciBHTE1BVF9FUFNJTE9OID0gMC4wMDAwMDE7XG5cbi8vIFVzZSBBcnJheSBpbnN0ZWFkIG9mIEZsb2F0MzJBcnJheS4gSXQgc2VlbXMgdG8gYmUgbXVjaCBmYXN0ZXIgYW5kIGhpZ2hlciBwcmVjaXNpb24uXG5leHBvcnQgdmFyIEdMTUFUX0FSUkFZX1RZUEUgPSBBcnJheTtcbi8vIGlmKCFHTE1BVF9BUlJBWV9UWVBFKSB7XG4vLyAgICAgR0xNQVRfQVJSQVlfVFlQRSA9ICh0eXBlb2YgRmxvYXQzMkFycmF5ICE9PSAndW5kZWZpbmVkJykgPyBGbG9hdDMyQXJyYXkgOiBBcnJheTtcbi8vIH1cblxuZXhwb3J0IHZhciBHTE1BVF9SQU5ET00gPSBNYXRoLnJhbmRvbTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9jb21tb24uanNcbi8vIG1vZHVsZSBpZCA9IDIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///22\n");

/***/ }),
/* 23 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_util__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\nvar isPowerOfTwo = __WEBPACK_IMPORTED_MODULE_3__math_util__[\"a\" /* default */].isPowerOfTwo;\n\nvar targetList = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n/**\n * @constructor clay.TextureCube\n * @extends clay.Texture\n *\n * @example\n *     ...\n *     var mat = new clay.Material({\n *         shader: clay.shader.library.get('clay.phong', 'environmentMap')\n *     });\n *     var envMap = new clay.TextureCube();\n *     envMap.load({\n *         'px': 'assets/textures/sky/px.jpg',\n *         'nx': 'assets/textures/sky/nx.jpg'\n *         'py': 'assets/textures/sky/py.jpg'\n *         'ny': 'assets/textures/sky/ny.jpg'\n *         'pz': 'assets/textures/sky/pz.jpg'\n *         'nz': 'assets/textures/sky/nz.jpg'\n *     });\n *     mat.set('environmentMap', envMap);\n *     ...\n *     envMap.success(function () {\n *         // Wait for the sky texture loaded\n *         animation.on('frame', function (frameTime) {\n *             renderer.render(scene, camera);\n *         });\n *     });\n */\nvar TextureCube = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.TextureCube# */{\n\n        /**\n         * @type {boolean}\n         * @default false\n         */\n        // PENDING cubemap should not flipY in default.\n        // flipY: false,\n\n        /**\n         * @type {Object}\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} px\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} nx\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} py\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} ny\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} pz\n         * @property {?HTMLImageElement|HTMLCanvasElemnet} nz\n         */\n        image: {\n            px: null,\n            nx: null,\n            py: null,\n            ny: null,\n            pz: null,\n            nz: null\n        },\n        /**\n         * Pixels data of each side. Will be ignored if images are set.\n         * @type {Object}\n         * @property {?Uint8Array} px\n         * @property {?Uint8Array} nx\n         * @property {?Uint8Array} py\n         * @property {?Uint8Array} ny\n         * @property {?Uint8Array} pz\n         * @property {?Uint8Array} nz\n         */\n        pixels: {\n            px: null,\n            nx: null,\n            py: null,\n            ny: null,\n            pz: null,\n            nz: null\n        },\n\n        /**\n         * @type {Array.<Object>}\n         */\n        mipmaps: []\n    };\n}, {\n\n    textureType: 'textureCube',\n\n    update: function (renderer) {\n        var _gl = renderer.gl;\n        _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, this._cache.get('webgl_texture'));\n\n        this.updateCommon(renderer);\n\n        var glFormat = this.format;\n        var glType = this.type;\n\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_WRAP_S, this.getAvailableWrapS());\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_WRAP_T, this.getAvailableWrapT());\n\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_MAG_FILTER, this.getAvailableMagFilter());\n        _gl.texParameteri(_gl.TEXTURE_CUBE_MAP, _gl.TEXTURE_MIN_FILTER, this.getAvailableMinFilter());\n\n        var anisotropicExt = renderer.getGLExtension('EXT_texture_filter_anisotropic');\n        if (anisotropicExt && this.anisotropic > 1) {\n            _gl.texParameterf(_gl.TEXTURE_CUBE_MAP, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, this.anisotropic);\n        }\n\n        // Fallback to float type if browser don't have half float extension\n        if (glType === 36193) {\n            var halfFloatExt = renderer.getGLExtension('OES_texture_half_float');\n            if (!halfFloatExt) {\n                glType = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FLOAT;\n            }\n        }\n\n        if (this.mipmaps.length) {\n            var width = this.width;\n            var height = this.height;\n            for (var i = 0; i < this.mipmaps.length; i++) {\n                var mipmap = this.mipmaps[i];\n                this._updateTextureData(_gl, mipmap, i, width, height, glFormat, glType);\n                width /= 2;\n                height /= 2;\n            }\n        }\n        else {\n            this._updateTextureData(_gl, this, 0, this.width, this.height, glFormat, glType);\n\n            if (!this.NPOT && this.useMipmap) {\n                _gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);\n            }\n        }\n\n        _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, null);\n    },\n\n    _updateTextureData: function (_gl, data, level, width, height, glFormat, glType) {\n        for (var i = 0; i < 6; i++) {\n            var target = targetList[i];\n            var img = data.image && data.image[target];\n            if (img) {\n                _gl.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level, glFormat, glFormat, glType, img);\n            }\n            else {\n                _gl.texImage2D(_gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level, glFormat, width, height, 0, glFormat, glType, data.pixels && data.pixels[target]);\n            }\n        }\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     * @memberOf clay.TextureCube.prototype\n     */\n    generateMipmap: function (renderer) {\n        var _gl = renderer.gl;\n        if (this.useMipmap && !this.NPOT) {\n            _gl.bindTexture(_gl.TEXTURE_CUBE_MAP, this._cache.get('webgl_texture'));\n            _gl.generateMipmap(_gl.TEXTURE_CUBE_MAP);\n        }\n    },\n\n    bind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_CUBE_MAP, this.getWebGLTexture(renderer));\n    },\n\n    unbind: function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_CUBE_MAP, null);\n    },\n\n    // Overwrite the isPowerOfTwo method\n    isPowerOfTwo: function () {\n        if (this.image.px) {\n            return isPowerOfTwo(this.image.px.width)\n                && isPowerOfTwo(this.image.px.height);\n        }\n        else {\n            return isPowerOfTwo(this.width)\n                && isPowerOfTwo(this.height);\n        }\n    },\n\n    isRenderable: function () {\n        if (this.image.px) {\n            return isImageRenderable(this.image.px)\n                && isImageRenderable(this.image.nx)\n                && isImageRenderable(this.image.py)\n                && isImageRenderable(this.image.ny)\n                && isImageRenderable(this.image.pz)\n                && isImageRenderable(this.image.nz);\n        }\n        else {\n            return !!(this.width && this.height);\n        }\n    },\n\n    load: function (imageList, crossOrigin) {\n        var loading = 0;\n        var self = this;\n        __WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].each(imageList, function (src, target){\n            var image = __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].createImage();\n            if (crossOrigin) {\n                image.crossOrigin = crossOrigin;\n            }\n            image.onload = function () {\n                loading --;\n                if (loading === 0){\n                    self.dirty();\n                    self.trigger('success', self);\n                }\n            };\n            image.onerror = function () {\n                loading --;\n            };\n\n            loading++;\n            image.src = src;\n            self.image[target] = image;\n        });\n\n        return this;\n    }\n});\n\nObject.defineProperty(TextureCube.prototype, 'width', {\n    get: function () {\n        if (this.image && this.image.px) {\n            return this.image.px.width;\n        }\n        return this._width;\n    },\n    set: function (value) {\n        if (this.image && this.image.px) {\n            console.warn('Texture from image can\\'t set width');\n        }\n        else {\n            if (this._width !== value) {\n                this.dirty();\n            }\n            this._width = value;\n        }\n    }\n});\nObject.defineProperty(TextureCube.prototype, 'height', {\n    get: function () {\n        if (this.image && this.image.px) {\n            return this.image.px.height;\n        }\n        return this._height;\n    },\n    set: function (value) {\n        if (this.image && this.image.px) {\n            console.warn('Texture from image can\\'t set height');\n        }\n        else {\n            if (this._height !== value) {\n                this.dirty();\n            }\n            this._height = value;\n        }\n    }\n});\nfunction isImageRenderable(image) {\n    return image.width > 0 && image.height > 0;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureCube);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1RleHR1cmVDdWJlLmpzP2UwMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgdXRpbCBmcm9tICcuL2NvcmUvdXRpbCc7XG5pbXBvcnQgbWF0aFV0aWwgZnJvbSAnLi9tYXRoL3V0aWwnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuL2NvcmUvdmVuZG9yJztcbnZhciBpc1Bvd2VyT2ZUd28gPSBtYXRoVXRpbC5pc1Bvd2VyT2ZUd287XG5cbnZhciB0YXJnZXRMaXN0ID0gWydweCcsICdueCcsICdweScsICdueScsICdweicsICdueiddO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LlRleHR1cmVDdWJlXG4gKiBAZXh0ZW5kcyBjbGF5LlRleHR1cmVcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIC4uLlxuICogICAgIHZhciBtYXQgPSBuZXcgY2xheS5NYXRlcmlhbCh7XG4gKiAgICAgICAgIHNoYWRlcjogY2xheS5zaGFkZXIubGlicmFyeS5nZXQoJ2NsYXkucGhvbmcnLCAnZW52aXJvbm1lbnRNYXAnKVxuICogICAgIH0pO1xuICogICAgIHZhciBlbnZNYXAgPSBuZXcgY2xheS5UZXh0dXJlQ3ViZSgpO1xuICogICAgIGVudk1hcC5sb2FkKHtcbiAqICAgICAgICAgJ3B4JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvcHguanBnJyxcbiAqICAgICAgICAgJ254JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvbnguanBnJ1xuICogICAgICAgICAncHknOiAnYXNzZXRzL3RleHR1cmVzL3NreS9weS5qcGcnXG4gKiAgICAgICAgICdueSc6ICdhc3NldHMvdGV4dHVyZXMvc2t5L255LmpwZydcbiAqICAgICAgICAgJ3B6JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvcHouanBnJ1xuICogICAgICAgICAnbnonOiAnYXNzZXRzL3RleHR1cmVzL3NreS9uei5qcGcnXG4gKiAgICAgfSk7XG4gKiAgICAgbWF0LnNldCgnZW52aXJvbm1lbnRNYXAnLCBlbnZNYXApO1xuICogICAgIC4uLlxuICogICAgIGVudk1hcC5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAqICAgICAgICAgLy8gV2FpdCBmb3IgdGhlIHNreSB0ZXh0dXJlIGxvYWRlZFxuICogICAgICAgICBhbmltYXRpb24ub24oJ2ZyYW1lJywgZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICogICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKHNjZW5lLCBjYW1lcmEpO1xuICogICAgICAgICB9KTtcbiAqICAgICB9KTtcbiAqL1xudmFyIFRleHR1cmVDdWJlID0gVGV4dHVyZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuVGV4dHVyZUN1YmUjICove1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgICAgICovXG4gICAgICAgIC8vIFBFTkRJTkcgY3ViZW1hcCBzaG91bGQgbm90IGZsaXBZIGluIGRlZmF1bHQuXG4gICAgICAgIC8vIGZsaXBZOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gcHhcbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gbnhcbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gcHlcbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gbnlcbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gcHpcbiAgICAgICAgICogQHByb3BlcnR5IHs/SFRNTEltYWdlRWxlbWVudHxIVE1MQ2FudmFzRWxlbW5ldH0gbnpcbiAgICAgICAgICovXG4gICAgICAgIGltYWdlOiB7XG4gICAgICAgICAgICBweDogbnVsbCxcbiAgICAgICAgICAgIG54OiBudWxsLFxuICAgICAgICAgICAgcHk6IG51bGwsXG4gICAgICAgICAgICBueTogbnVsbCxcbiAgICAgICAgICAgIHB6OiBudWxsLFxuICAgICAgICAgICAgbno6IG51bGxcbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBpeGVscyBkYXRhIG9mIGVhY2ggc2lkZS4gV2lsbCBiZSBpZ25vcmVkIGlmIGltYWdlcyBhcmUgc2V0LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBweFxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBueFxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBweVxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBueVxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBwelxuICAgICAgICAgKiBAcHJvcGVydHkgez9VaW50OEFycmF5fSBuelxuICAgICAgICAgKi9cbiAgICAgICAgcGl4ZWxzOiB7XG4gICAgICAgICAgICBweDogbnVsbCxcbiAgICAgICAgICAgIG54OiBudWxsLFxuICAgICAgICAgICAgcHk6IG51bGwsXG4gICAgICAgICAgICBueTogbnVsbCxcbiAgICAgICAgICAgIHB6OiBudWxsLFxuICAgICAgICAgICAgbno6IG51bGxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5LjxPYmplY3Q+fVxuICAgICAgICAgKi9cbiAgICAgICAgbWlwbWFwczogW11cbiAgICB9O1xufSwge1xuXG4gICAgdGV4dHVyZVR5cGU6ICd0ZXh0dXJlQ3ViZScsXG5cbiAgICB1cGRhdGU6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIF9nbC5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV9DVUJFX01BUCwgdGhpcy5fY2FjaGUuZ2V0KCd3ZWJnbF90ZXh0dXJlJykpO1xuXG4gICAgICAgIHRoaXMudXBkYXRlQ29tbW9uKHJlbmRlcmVyKTtcblxuICAgICAgICB2YXIgZ2xGb3JtYXQgPSB0aGlzLmZvcm1hdDtcbiAgICAgICAgdmFyIGdsVHlwZSA9IHRoaXMudHlwZTtcblxuICAgICAgICBfZ2wudGV4UGFyYW1ldGVyaShfZ2wuVEVYVFVSRV9DVUJFX01BUCwgX2dsLlRFWFRVUkVfV1JBUF9TLCB0aGlzLmdldEF2YWlsYWJsZVdyYXBTKCkpO1xuICAgICAgICBfZ2wudGV4UGFyYW1ldGVyaShfZ2wuVEVYVFVSRV9DVUJFX01BUCwgX2dsLlRFWFRVUkVfV1JBUF9ULCB0aGlzLmdldEF2YWlsYWJsZVdyYXBUKCkpO1xuXG4gICAgICAgIF9nbC50ZXhQYXJhbWV0ZXJpKF9nbC5URVhUVVJFX0NVQkVfTUFQLCBfZ2wuVEVYVFVSRV9NQUdfRklMVEVSLCB0aGlzLmdldEF2YWlsYWJsZU1hZ0ZpbHRlcigpKTtcbiAgICAgICAgX2dsLnRleFBhcmFtZXRlcmkoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIF9nbC5URVhUVVJFX01JTl9GSUxURVIsIHRoaXMuZ2V0QXZhaWxhYmxlTWluRmlsdGVyKCkpO1xuXG4gICAgICAgIHZhciBhbmlzb3Ryb3BpY0V4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdFWFRfdGV4dHVyZV9maWx0ZXJfYW5pc290cm9waWMnKTtcbiAgICAgICAgaWYgKGFuaXNvdHJvcGljRXh0ICYmIHRoaXMuYW5pc290cm9waWMgPiAxKSB7XG4gICAgICAgICAgICBfZ2wudGV4UGFyYW1ldGVyZihfZ2wuVEVYVFVSRV9DVUJFX01BUCwgYW5pc290cm9waWNFeHQuVEVYVFVSRV9NQVhfQU5JU09UUk9QWV9FWFQsIHRoaXMuYW5pc290cm9waWMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRmFsbGJhY2sgdG8gZmxvYXQgdHlwZSBpZiBicm93c2VyIGRvbid0IGhhdmUgaGFsZiBmbG9hdCBleHRlbnNpb25cbiAgICAgICAgaWYgKGdsVHlwZSA9PT0gMzYxOTMpIHtcbiAgICAgICAgICAgIHZhciBoYWxmRmxvYXRFeHQgPSByZW5kZXJlci5nZXRHTEV4dGVuc2lvbignT0VTX3RleHR1cmVfaGFsZl9mbG9hdCcpO1xuICAgICAgICAgICAgaWYgKCFoYWxmRmxvYXRFeHQpIHtcbiAgICAgICAgICAgICAgICBnbFR5cGUgPSBnbGVudW0uRkxPQVQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5taXBtYXBzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5taXBtYXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1pcG1hcCA9IHRoaXMubWlwbWFwc1tpXTtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVUZXh0dXJlRGF0YShfZ2wsIG1pcG1hcCwgaSwgd2lkdGgsIGhlaWdodCwgZ2xGb3JtYXQsIGdsVHlwZSk7XG4gICAgICAgICAgICAgICAgd2lkdGggLz0gMjtcbiAgICAgICAgICAgICAgICBoZWlnaHQgLz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZVRleHR1cmVEYXRhKF9nbCwgdGhpcywgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQsIGdsRm9ybWF0LCBnbFR5cGUpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuTlBPVCAmJiB0aGlzLnVzZU1pcG1hcCkge1xuICAgICAgICAgICAgICAgIF9nbC5nZW5lcmF0ZU1pcG1hcChfZ2wuVEVYVFVSRV9DVUJFX01BUCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBfZ2wuYmluZFRleHR1cmUoX2dsLlRFWFRVUkVfQ1VCRV9NQVAsIG51bGwpO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlVGV4dHVyZURhdGE6IGZ1bmN0aW9uIChfZ2wsIGRhdGEsIGxldmVsLCB3aWR0aCwgaGVpZ2h0LCBnbEZvcm1hdCwgZ2xUeXBlKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0TGlzdFtpXTtcbiAgICAgICAgICAgIHZhciBpbWcgPSBkYXRhLmltYWdlICYmIGRhdGEuaW1hZ2VbdGFyZ2V0XTtcbiAgICAgICAgICAgIGlmIChpbWcpIHtcbiAgICAgICAgICAgICAgICBfZ2wudGV4SW1hZ2UyRChfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaSwgbGV2ZWwsIGdsRm9ybWF0LCBnbEZvcm1hdCwgZ2xUeXBlLCBpbWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2dsLnRleEltYWdlMkQoX2dsLlRFWFRVUkVfQ1VCRV9NQVBfUE9TSVRJVkVfWCArIGksIGxldmVsLCBnbEZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMCwgZ2xGb3JtYXQsIGdsVHlwZSwgZGF0YS5waXhlbHMgJiYgZGF0YS5waXhlbHNbdGFyZ2V0XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAbWVtYmVyT2YgY2xheS5UZXh0dXJlQ3ViZS5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBnZW5lcmF0ZU1pcG1hcDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgaWYgKHRoaXMudXNlTWlwbWFwICYmICF0aGlzLk5QT1QpIHtcbiAgICAgICAgICAgIF9nbC5iaW5kVGV4dHVyZShfZ2wuVEVYVFVSRV9DVUJFX01BUCwgdGhpcy5fY2FjaGUuZ2V0KCd3ZWJnbF90ZXh0dXJlJykpO1xuICAgICAgICAgICAgX2dsLmdlbmVyYXRlTWlwbWFwKF9nbC5URVhUVVJFX0NVQkVfTUFQKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyZXIuZ2wuYmluZFRleHR1cmUocmVuZGVyZXIuZ2wuVEVYVFVSRV9DVUJFX01BUCwgdGhpcy5nZXRXZWJHTFRleHR1cmUocmVuZGVyZXIpKTtcbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyZXIuZ2wuYmluZFRleHR1cmUocmVuZGVyZXIuZ2wuVEVYVFVSRV9DVUJFX01BUCwgbnVsbCk7XG4gICAgfSxcblxuICAgIC8vIE92ZXJ3cml0ZSB0aGUgaXNQb3dlck9mVHdvIG1ldGhvZFxuICAgIGlzUG93ZXJPZlR3bzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZS5weCkge1xuICAgICAgICAgICAgcmV0dXJuIGlzUG93ZXJPZlR3byh0aGlzLmltYWdlLnB4LndpZHRoKVxuICAgICAgICAgICAgICAgICYmIGlzUG93ZXJPZlR3byh0aGlzLmltYWdlLnB4LmhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gaXNQb3dlck9mVHdvKHRoaXMud2lkdGgpXG4gICAgICAgICAgICAgICAgJiYgaXNQb3dlck9mVHdvKHRoaXMuaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpc1JlbmRlcmFibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UucHgpIHtcbiAgICAgICAgICAgIHJldHVybiBpc0ltYWdlUmVuZGVyYWJsZSh0aGlzLmltYWdlLnB4KVxuICAgICAgICAgICAgICAgICYmIGlzSW1hZ2VSZW5kZXJhYmxlKHRoaXMuaW1hZ2UubngpXG4gICAgICAgICAgICAgICAgJiYgaXNJbWFnZVJlbmRlcmFibGUodGhpcy5pbWFnZS5weSlcbiAgICAgICAgICAgICAgICAmJiBpc0ltYWdlUmVuZGVyYWJsZSh0aGlzLmltYWdlLm55KVxuICAgICAgICAgICAgICAgICYmIGlzSW1hZ2VSZW5kZXJhYmxlKHRoaXMuaW1hZ2UucHopXG4gICAgICAgICAgICAgICAgJiYgaXNJbWFnZVJlbmRlcmFibGUodGhpcy5pbWFnZS5ueik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gISEodGhpcy53aWR0aCAmJiB0aGlzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbG9hZDogZnVuY3Rpb24gKGltYWdlTGlzdCwgY3Jvc3NPcmlnaW4pIHtcbiAgICAgICAgdmFyIGxvYWRpbmcgPSAwO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHV0aWwuZWFjaChpbWFnZUxpc3QsIGZ1bmN0aW9uIChzcmMsIHRhcmdldCl7XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSB2ZW5kb3IuY3JlYXRlSW1hZ2UoKTtcbiAgICAgICAgICAgIGlmIChjcm9zc09yaWdpbikge1xuICAgICAgICAgICAgICAgIGltYWdlLmNyb3NzT3JpZ2luID0gY3Jvc3NPcmlnaW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpbWFnZS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbG9hZGluZyAtLTtcbiAgICAgICAgICAgICAgICBpZiAobG9hZGluZyA9PT0gMCl7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGlydHkoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzdWNjZXNzJywgc2VsZik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltYWdlLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbG9hZGluZyAtLTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxvYWRpbmcrKztcbiAgICAgICAgICAgIGltYWdlLnNyYyA9IHNyYztcbiAgICAgICAgICAgIHNlbGYuaW1hZ2VbdGFyZ2V0XSA9IGltYWdlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KTtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KFRleHR1cmVDdWJlLnByb3RvdHlwZSwgJ3dpZHRoJywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLmltYWdlLnB4KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZS5weC53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pbWFnZSAmJiB0aGlzLmltYWdlLnB4KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ1RleHR1cmUgZnJvbSBpbWFnZSBjYW5cXCd0IHNldCB3aWR0aCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuX3dpZHRoICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShUZXh0dXJlQ3ViZS5wcm90b3R5cGUsICdoZWlnaHQnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLmltYWdlICYmIHRoaXMuaW1hZ2UucHgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmltYWdlLnB4LmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1hZ2UgJiYgdGhpcy5pbWFnZS5weCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUZXh0dXJlIGZyb20gaW1hZ2UgY2FuXFwndCBzZXQgaGVpZ2h0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faGVpZ2h0ICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlydHkoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5mdW5jdGlvbiBpc0ltYWdlUmVuZGVyYWJsZShpbWFnZSkge1xuICAgIHJldHVybiBpbWFnZS53aWR0aCA+IDAgJiYgaW1hZ2UuaGVpZ2h0ID4gMDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZUN1YmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvVGV4dHVyZUN1YmUuanNcbi8vIG1vZHVsZSBpZCA9IDIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///23\n");

/***/ }),
/* 24 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shader_source_compositor_vertex_glsl_js__ = __webpack_require__(137);\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_7__shader_source_compositor_vertex_glsl_js__[\"a\" /* default */]);\n\nvar planeGeo = new __WEBPACK_IMPORTED_MODULE_2__geometry_Plane__[\"a\" /* default */]();\nvar mesh = new __WEBPACK_IMPORTED_MODULE_5__Mesh__[\"a\" /* default */]({\n    geometry: planeGeo,\n    frustumCulling: false\n});\nvar camera = new __WEBPACK_IMPORTED_MODULE_1__camera_Orthographic__[\"a\" /* default */]();\n\n/**\n * @constructor clay.compositor.Pass\n * @extends clay.core.Base\n */\nvar Pass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.Pass# */ {\n        /**\n         * Fragment shader string\n         * @type {string}\n         */\n        // PENDING shader or fragment ?\n        fragment: '',\n\n        /**\n         * @type {Object}\n         */\n        outputs: null,\n\n        /**\n         * @type {clay.Material}\n         */\n        material: null,\n\n        /**\n         * @type {Boolean}\n         */\n        blendWithPrevious: false,\n\n        /**\n         * @type {Boolean}\n         */\n        clearColor: false,\n\n        /**\n         * @type {Boolean}\n         */\n        clearDepth: true\n    };\n}, function() {\n\n    var shader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.compositor.vertex'), this.fragment);\n    var material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n        shader: shader\n    });\n    material.enableTexturesAll();\n\n    this.material = material;\n\n},\n/** @lends clay.compositor.Pass.prototype */\n{\n    /**\n     * @param {string} name\n     * @param {} value\n     */\n    setUniform: function(name, value) {\n        this.material.setUniform(name, value);\n    },\n    /**\n     * @param  {string} name\n     * @return {}\n     */\n    getUniform: function(name) {\n        var uniform = this.material.uniforms[name];\n        if (uniform) {\n            return uniform.value;\n        }\n    },\n    /**\n     * @param  {clay.Texture} texture\n     * @param  {number} attachment\n     */\n    attachOutput: function(texture, attachment) {\n        if (!this.outputs) {\n            this.outputs = {};\n        }\n        attachment = attachment || __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].COLOR_ATTACHMENT0;\n        this.outputs[attachment] = texture;\n    },\n    /**\n     * @param  {clay.Texture} texture\n     */\n    detachOutput: function(texture) {\n        for (var attachment in this.outputs) {\n            if (this.outputs[attachment] === texture) {\n                this.outputs[attachment] = null;\n            }\n        }\n    },\n\n    bind: function(renderer, frameBuffer) {\n\n        if (this.outputs) {\n            for (var attachment in this.outputs) {\n                var texture = this.outputs[attachment];\n                if (texture) {\n                    frameBuffer.attach(texture, attachment);\n                }\n            }\n        }\n\n        if (frameBuffer) {\n            frameBuffer.bind(renderer);\n        }\n    },\n\n    unbind: function(renderer, frameBuffer) {\n        frameBuffer.unbind(renderer);\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.FrameBuffer} [frameBuffer]\n     */\n    render: function(renderer, frameBuffer) {\n\n        var _gl = renderer.gl;\n\n        if (frameBuffer) {\n            this.bind(renderer, frameBuffer);\n            // MRT Support in chrome\n            // https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/ext-draw-buffers.html\n            var ext = renderer.getGLExtension('EXT_draw_buffers');\n            if (ext && this.outputs) {\n                var bufs = [];\n                for (var attachment in this.outputs) {\n                    attachment = +attachment;\n                    if (attachment >= _gl.COLOR_ATTACHMENT0 && attachment <= _gl.COLOR_ATTACHMENT0 + 8) {\n                        bufs.push(attachment);\n                    }\n                }\n                ext.drawBuffersEXT(bufs);\n            }\n        }\n\n        this.trigger('beforerender', this, renderer);\n\n        // FIXME Don't clear in each pass in default, let the color overwrite the buffer\n        // FIXME pixels may be discard\n        var clearBit = this.clearDepth ? _gl.DEPTH_BUFFER_BIT : 0;\n        _gl.depthMask(true);\n        if (this.clearColor) {\n            clearBit = clearBit | _gl.COLOR_BUFFER_BIT;\n            _gl.colorMask(true, true, true, true);\n            var cc = this.clearColor;\n            if (Array.isArray(cc)) {\n                _gl.clearColor(cc[0], cc[1], cc[2], cc[3]);\n            }\n        }\n        _gl.clear(clearBit);\n\n        if (this.blendWithPrevious) {\n            // Blend with previous rendered scene in the final output\n            // FIXME Configure blend.\n            // FIXME It will cause screen blink？\n            _gl.enable(_gl.BLEND);\n            this.material.transparent = true;\n        }\n        else {\n            _gl.disable(_gl.BLEND);\n            this.material.transparent = false;\n        }\n\n        this.renderQuad(renderer);\n\n        this.trigger('afterrender', this, renderer);\n\n        if (frameBuffer) {\n            this.unbind(renderer, frameBuffer);\n        }\n    },\n\n    /**\n     * Simply do quad rendering\n     */\n    renderQuad: function (renderer) {\n        mesh.material = this.material;\n        renderer.renderPass([mesh], camera);\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Pass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvUGFzcy5qcz9kOWU5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgT3J0aG9DYW1lcmEgZnJvbSAnLi4vY2FtZXJhL09ydGhvZ3JhcGhpYyc7XG5pbXBvcnQgUGxhbmUgZnJvbSAnLi4vZ2VvbWV0cnkvUGxhbmUnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL01hdGVyaWFsJztcbmltcG9ydCBNZXNoIGZyb20gJy4uL01lc2gnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgdmVydGV4R2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdmVydGV4Lmdsc2wuanMnO1xuXG5TaGFkZXJbJ2ltcG9ydCddKHZlcnRleEdsc2wpO1xuXG52YXIgcGxhbmVHZW8gPSBuZXcgUGxhbmUoKTtcbnZhciBtZXNoID0gbmV3IE1lc2goe1xuICAgIGdlb21ldHJ5OiBwbGFuZUdlbyxcbiAgICBmcnVzdHVtQ3VsbGluZzogZmFsc2Vcbn0pO1xudmFyIGNhbWVyYSA9IG5ldyBPcnRob0NhbWVyYSgpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNvbXBvc2l0b3IuUGFzc1xuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIFBhc3MgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLlBhc3MjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZyYWdtZW50IHNoYWRlciBzdHJpbmdcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBFTkRJTkcgc2hhZGVyIG9yIGZyYWdtZW50ID9cbiAgICAgICAgZnJhZ21lbnQ6ICcnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0czogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuTWF0ZXJpYWx9XG4gICAgICAgICAqL1xuICAgICAgICBtYXRlcmlhbDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBibGVuZFdpdGhQcmV2aW91czogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJDb2xvcjogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgY2xlYXJEZXB0aDogdHJ1ZVxuICAgIH07XG59LCBmdW5jdGlvbigpIHtcblxuICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKFNoYWRlci5zb3VyY2UoJ2NsYXkuY29tcG9zaXRvci52ZXJ0ZXgnKSwgdGhpcy5mcmFnbWVudCk7XG4gICAgdmFyIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgc2hhZGVyOiBzaGFkZXJcbiAgICB9KTtcbiAgICBtYXRlcmlhbC5lbmFibGVUZXh0dXJlc0FsbCgpO1xuXG4gICAgdGhpcy5tYXRlcmlhbCA9IG1hdGVyaWFsO1xuXG59LFxuLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuUGFzcy5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7fSB2YWx1ZVxuICAgICAqL1xuICAgIHNldFVuaWZvcm06IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMubWF0ZXJpYWwuc2V0VW5pZm9ybShuYW1lLCB2YWx1ZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt9XG4gICAgICovXG4gICAgZ2V0VW5pZm9ybTogZnVuY3Rpb24obmFtZSkge1xuICAgICAgICB2YXIgdW5pZm9ybSA9IHRoaXMubWF0ZXJpYWwudW5pZm9ybXNbbmFtZV07XG4gICAgICAgIGlmICh1bmlmb3JtKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5pZm9ybS52YWx1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5UZXh0dXJlfSB0ZXh0dXJlXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBhdHRhY2htZW50XG4gICAgICovXG4gICAgYXR0YWNoT3V0cHV0OiBmdW5jdGlvbih0ZXh0dXJlLCBhdHRhY2htZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dHMgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBhdHRhY2htZW50ID0gYXR0YWNobWVudCB8fCBnbGVudW0uQ09MT1JfQVRUQUNITUVOVDA7XG4gICAgICAgIHRoaXMub3V0cHV0c1thdHRhY2htZW50XSA9IHRleHR1cmU7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlRleHR1cmV9IHRleHR1cmVcbiAgICAgKi9cbiAgICBkZXRhY2hPdXRwdXQ6IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm91dHB1dHNbYXR0YWNobWVudF0gPT09IHRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm91dHB1dHNbYXR0YWNobWVudF0gPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGJpbmQ6IGZ1bmN0aW9uKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcikge1xuXG4gICAgICAgIGlmICh0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGF0dGFjaG1lbnQgaW4gdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLm91dHB1dHNbYXR0YWNobWVudF07XG4gICAgICAgICAgICAgICAgaWYgKHRleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKHRleHR1cmUsIGF0dGFjaG1lbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcmFtZUJ1ZmZlcikge1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgdW5iaW5kOiBmdW5jdGlvbihyZW5kZXJlciwgZnJhbWVCdWZmZXIpIHtcbiAgICAgICAgZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtICB7Y2xheS5GcmFtZUJ1ZmZlcn0gW2ZyYW1lQnVmZmVyXVxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24ocmVuZGVyZXIsIGZyYW1lQnVmZmVyKSB7XG5cbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuXG4gICAgICAgIGlmIChmcmFtZUJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5iaW5kKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcik7XG4gICAgICAgICAgICAvLyBNUlQgU3VwcG9ydCBpbiBjaHJvbWVcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL3Nkay90ZXN0cy9jb25mb3JtYW5jZS9leHRlbnNpb25zL2V4dC1kcmF3LWJ1ZmZlcnMuaHRtbFxuICAgICAgICAgICAgdmFyIGV4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdFWFRfZHJhd19idWZmZXJzJyk7XG4gICAgICAgICAgICBpZiAoZXh0ICYmIHRoaXMub3V0cHV0cykge1xuICAgICAgICAgICAgICAgIHZhciBidWZzID0gW107XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgYXR0YWNobWVudCBpbiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudCA9ICthdHRhY2htZW50O1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0YWNobWVudCA+PSBfZ2wuQ09MT1JfQVRUQUNITUVOVDAgJiYgYXR0YWNobWVudCA8PSBfZ2wuQ09MT1JfQVRUQUNITUVOVDAgKyA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWZzLnB1c2goYXR0YWNobWVudCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0LmRyYXdCdWZmZXJzRVhUKGJ1ZnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVyZW5kZXInLCB0aGlzLCByZW5kZXJlcik7XG5cbiAgICAgICAgLy8gRklYTUUgRG9uJ3QgY2xlYXIgaW4gZWFjaCBwYXNzIGluIGRlZmF1bHQsIGxldCB0aGUgY29sb3Igb3ZlcndyaXRlIHRoZSBidWZmZXJcbiAgICAgICAgLy8gRklYTUUgcGl4ZWxzIG1heSBiZSBkaXNjYXJkXG4gICAgICAgIHZhciBjbGVhckJpdCA9IHRoaXMuY2xlYXJEZXB0aCA/IF9nbC5ERVBUSF9CVUZGRVJfQklUIDogMDtcbiAgICAgICAgX2dsLmRlcHRoTWFzayh0cnVlKTtcbiAgICAgICAgaWYgKHRoaXMuY2xlYXJDb2xvcikge1xuICAgICAgICAgICAgY2xlYXJCaXQgPSBjbGVhckJpdCB8IF9nbC5DT0xPUl9CVUZGRVJfQklUO1xuICAgICAgICAgICAgX2dsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHZhciBjYyA9IHRoaXMuY2xlYXJDb2xvcjtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGNjKSkge1xuICAgICAgICAgICAgICAgIF9nbC5jbGVhckNvbG9yKGNjWzBdLCBjY1sxXSwgY2NbMl0sIGNjWzNdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfZ2wuY2xlYXIoY2xlYXJCaXQpO1xuXG4gICAgICAgIGlmICh0aGlzLmJsZW5kV2l0aFByZXZpb3VzKSB7XG4gICAgICAgICAgICAvLyBCbGVuZCB3aXRoIHByZXZpb3VzIHJlbmRlcmVkIHNjZW5lIGluIHRoZSBmaW5hbCBvdXRwdXRcbiAgICAgICAgICAgIC8vIEZJWE1FIENvbmZpZ3VyZSBibGVuZC5cbiAgICAgICAgICAgIC8vIEZJWE1FIEl0IHdpbGwgY2F1c2Ugc2NyZWVuIGJsaW5r77yfXG4gICAgICAgICAgICBfZ2wuZW5hYmxlKF9nbC5CTEVORCk7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9nbC5kaXNhYmxlKF9nbC5CTEVORCk7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsLnRyYW5zcGFyZW50ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnJlbmRlclF1YWQocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJyZW5kZXInLCB0aGlzLCByZW5kZXJlcik7XG5cbiAgICAgICAgaWYgKGZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLnVuYmluZChyZW5kZXJlciwgZnJhbWVCdWZmZXIpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNpbXBseSBkbyBxdWFkIHJlbmRlcmluZ1xuICAgICAqL1xuICAgIHJlbmRlclF1YWQ6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICBtZXNoLm1hdGVyaWFsID0gdGhpcy5tYXRlcmlhbDtcbiAgICAgICAgcmVuZGVyZXIucmVuZGVyUGFzcyhbbWVzaF0sIGNhbWVyYSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7fVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFBhc3M7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9QYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAyNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///24\n");

/***/ }),
/* 25 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export animation */\n/* unused harmony export async */\n/* unused harmony export camera */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"m\", function() { return compositor; });\n/* unused harmony export core */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"o\", function() { return deferred; });\n/* unused harmony export dep */\n/* unused harmony export geometry */\n/* unused harmony export light */\n/* unused harmony export loader */\n/* unused harmony export math */\n/* unused harmony export particle */\n/* unused harmony export picking */\n/* unused harmony export plugin */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return prePass; });\n/* unused harmony export shader */\n/* unused harmony export util */\n/* unused harmony export vr */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__animation_Animator__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__animation_Blend1DClip__ = __webpack_require__(126);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animation_Blend2DClip__ = __webpack_require__(127);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__animation_Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__animation_easing__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__animation_SamplerTrack__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__animation_Timeline__ = __webpack_require__(128);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__animation_TrackClip__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__application__ = __webpack_require__(130);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__async_Task__ = __webpack_require__(100);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__async_TaskGroup__ = __webpack_require__(142);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Camera__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__compositor_Compositor__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__compositor_CompositorNode__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__compositor_createCompositor__ = __webpack_require__(143);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__compositor_FilterNode__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__compositor_Graph__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__compositor_SceneNode__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__compositor_TextureNode__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__compositor_TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__core_color__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__core_GLInfo__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__core_LinkedList__ = __webpack_require__(77);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__core_mixin_extend__ = __webpack_require__(73);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__core_mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__core_request__ = __webpack_require__(74);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__createCompositor__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__deferred_GBuffer__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__deferred_Renderer__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__dep_glmatrix__ = __webpack_require__(169);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__geometry_Cone__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__geometry_Cylinder__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__geometry_ParametricSurface__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47__GeometryBase__ = __webpack_require__(79);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__InstancedMesh__ = __webpack_require__(171);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_49__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_50__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_51__light_Ambient__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_52__light_AmbientCubemap__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_53__light_AmbientSH__ = __webpack_require__(96);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_54__light_Directional__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_55__light_Point__ = __webpack_require__(89);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_56__light_Sphere__ = __webpack_require__(172);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_57__light_Spot__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_58__light_Tube__ = __webpack_require__(173);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_59__loader_FX__ = __webpack_require__(174);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_60__loader_GLTF__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_61__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_62__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_63__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_64__math_Matrix2__ = __webpack_require__(175);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_65__math_Matrix2d__ = __webpack_require__(176);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_66__math_Matrix3__ = __webpack_require__(177);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_68__math_Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_69__math_Quaternion__ = __webpack_require__(78);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_70__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_71__math_util__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_72__math_Value__ = __webpack_require__(111);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_73__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_74__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_75__math_Vector4__ = __webpack_require__(178);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_76__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_77__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_78__particle_Emitter__ = __webpack_require__(179);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_79__particle_Field__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_80__particle_ForceField__ = __webpack_require__(180);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_81__particle_Particle__ = __webpack_require__(112);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_82__particle_ParticleRenderable__ = __webpack_require__(181);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_83__picking_PixelPicking__ = __webpack_require__(183);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_84__picking_RayPicking__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_85__plugin_FreeControl__ = __webpack_require__(185);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_86__plugin_GamepadControl__ = __webpack_require__(186);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_87__plugin_GestureMgr__ = __webpack_require__(114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_88__plugin_InfinitePlane__ = __webpack_require__(187);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_89__plugin_OrbitControl__ = __webpack_require__(188);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_90__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_91__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_92__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_93__prePass_ShadowMap__ = __webpack_require__(97);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_94__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_95__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_96__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_97__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_98__shader_library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_99__shader_registerBuiltinCompositor__ = __webpack_require__(106);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_100__shader_source_header_light__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_101__Skeleton__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_102__StandardMaterial__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_103__StaticGeometry__ = __webpack_require__(189);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_104__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_105__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_106__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_107__Timeline__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_108__util_cubemap__ = __webpack_require__(93);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_109__util_dds__ = __webpack_require__(94);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_110__util_delaunay__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_111__util_hdr__ = __webpack_require__(95);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_112__util_ktx__ = __webpack_require__(190);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_113__util_mesh__ = __webpack_require__(191);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_114__util_sh__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_115__util_texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_116__util_transferable__ = __webpack_require__(192);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_117__version__ = __webpack_require__(193);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_118__vr_CardboardDistorter__ = __webpack_require__(194);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_119__vr_StereoCamera__ = __webpack_require__(196);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"l\", function() { return __WEBPACK_IMPORTED_MODULE_8__application__[\"a\"]; });\n/* unused harmony reexport Camera */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"n\", function() { return __WEBPACK_IMPORTED_MODULE_35__createCompositor__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_39__FrameBuffer__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_40__Geometry__[\"a\"]; });\n/* unused harmony reexport GeometryBase */\n/* unused harmony reexport InstancedMesh */\n/* unused harmony reexport Joint */\n/* unused harmony reexport Light */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return __WEBPACK_IMPORTED_MODULE_61__Material__[\"a\"]; });\n/* unused harmony reexport BoundingBox */\n/* unused harmony reexport Frustum */\n/* unused harmony reexport Matrix2 */\n/* unused harmony reexport Matrix2d */\n/* unused harmony reexport Matrix3 */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__[\"a\"]; });\n/* unused harmony reexport Plane */\n/* unused harmony reexport Quaternion */\n/* unused harmony reexport Ray */\n/* unused harmony reexport Value */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"j\", function() { return __WEBPACK_IMPORTED_MODULE_73__math_Vector2__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"k\", function() { return __WEBPACK_IMPORTED_MODULE_74__math_Vector3__[\"a\"]; });\n/* unused harmony reexport Vector4 */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return __WEBPACK_IMPORTED_MODULE_76__Mesh__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"f\", function() { return __WEBPACK_IMPORTED_MODULE_77__Node__[\"a\"]; });\n/* unused harmony reexport Renderable */\n/* unused harmony reexport Renderer */\n/* unused harmony reexport Scene */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"g\", function() { return __WEBPACK_IMPORTED_MODULE_97__Shader__[\"a\"]; });\n/* unused harmony reexport Skeleton */\n/* unused harmony reexport StandardMaterial */\n/* unused harmony reexport StaticGeometry */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"h\", function() { return __WEBPACK_IMPORTED_MODULE_104__Texture__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"i\", function() { return __WEBPACK_IMPORTED_MODULE_105__Texture2D__[\"a\"]; });\n/* unused harmony reexport TextureCube */\n/* unused harmony reexport Timeline */\n/* unused harmony reexport version */\n/** @namespace clay */\n/** @namespace clay.math */\n/** @namespace clay.animation */\n/** @namespace clay.async */\n/** @namespace clay.camera */\n/** @namespace clay.compositor */\n/** @namespace clay.core */\n/** @namespace clay.geometry */\n/** @namespace clay.helper */\n/** @namespace clay.light */\n/** @namespace clay.loader */\n/** @namespace clay.particle */\n/** @namespace clay.plugin */\n/** @namespace clay.prePass */\n/** @namespace clay.shader */\n/** @namespace clay.texture */\n/** @namespace clay.util */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar animation = {\n    Animator : __WEBPACK_IMPORTED_MODULE_0__animation_Animator__[\"a\" /* default */],\n    Blend1DClip : __WEBPACK_IMPORTED_MODULE_1__animation_Blend1DClip__[\"a\" /* default */],\n    Blend2DClip : __WEBPACK_IMPORTED_MODULE_2__animation_Blend2DClip__[\"a\" /* default */],\n    Clip : __WEBPACK_IMPORTED_MODULE_3__animation_Clip__[\"a\" /* default */],\n    easing : __WEBPACK_IMPORTED_MODULE_4__animation_easing__[\"a\" /* default */],\n    SamplerTrack : __WEBPACK_IMPORTED_MODULE_5__animation_SamplerTrack__[\"a\" /* default */],\n    Timeline : __WEBPACK_IMPORTED_MODULE_6__animation_Timeline__[\"a\" /* default */],\n    TrackClip : __WEBPACK_IMPORTED_MODULE_7__animation_TrackClip__[\"a\" /* default */]\n};\n\n\n\n\nvar async = {\n    Task : __WEBPACK_IMPORTED_MODULE_9__async_Task__[\"a\" /* default */],\n    TaskGroup : __WEBPACK_IMPORTED_MODULE_10__async_TaskGroup__[\"a\" /* default */]\n};\n\n\n\n\nvar camera = {\n    Orthographic : __WEBPACK_IMPORTED_MODULE_12__camera_Orthographic__[\"a\" /* default */],\n    Perspective : __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]\n};\n\n\n\nvar compositor = {\n    Compositor : __WEBPACK_IMPORTED_MODULE_14__compositor_Compositor__[\"a\" /* default */],\n    CompositorNode : __WEBPACK_IMPORTED_MODULE_15__compositor_CompositorNode__[\"a\" /* default */],\n    createCompositor : __WEBPACK_IMPORTED_MODULE_16__compositor_createCompositor__[\"a\" /* default */],\n    FilterNode : __WEBPACK_IMPORTED_MODULE_17__compositor_FilterNode__[\"a\" /* default */],\n    Graph : __WEBPACK_IMPORTED_MODULE_18__compositor_Graph__[\"a\" /* default */],\n    Pass : __WEBPACK_IMPORTED_MODULE_19__compositor_Pass__[\"a\" /* default */],\n    SceneNode : __WEBPACK_IMPORTED_MODULE_20__compositor_SceneNode__[\"a\" /* default */],\n    TextureNode : __WEBPACK_IMPORTED_MODULE_21__compositor_TextureNode__[\"a\" /* default */],\n    TexturePool : __WEBPACK_IMPORTED_MODULE_22__compositor_TexturePool__[\"a\" /* default */]\n};\n\n\n\nvar core = {\n    Base : __WEBPACK_IMPORTED_MODULE_23__core_Base__[\"a\" /* default */],\n    Cache : __WEBPACK_IMPORTED_MODULE_24__core_Cache__[\"a\" /* default */],\n    color : __WEBPACK_IMPORTED_MODULE_25__core_color__[\"a\" /* default */],\n    glenum : __WEBPACK_IMPORTED_MODULE_26__core_glenum__[\"a\" /* default */],\n    GLInfo : __WEBPACK_IMPORTED_MODULE_27__core_GLInfo__[\"a\" /* default */],\n    LinkedList : __WEBPACK_IMPORTED_MODULE_28__core_LinkedList__[\"a\" /* default */],\n    LRU : __WEBPACK_IMPORTED_MODULE_29__core_LRU__[\"a\" /* default */],\n    mixin : {\n        extend : __WEBPACK_IMPORTED_MODULE_30__core_mixin_extend__[\"a\" /* default */],\n        notifier : __WEBPACK_IMPORTED_MODULE_31__core_mixin_notifier__[\"a\" /* default */]\n    },\n    request : __WEBPACK_IMPORTED_MODULE_32__core_request__[\"a\" /* default */],\n    util : __WEBPACK_IMPORTED_MODULE_33__core_util__[\"a\" /* default */],\n    vendor : __WEBPACK_IMPORTED_MODULE_34__core_vendor__[\"a\" /* default */]\n};\n\n\n\n\nvar deferred = {\n    GBuffer : __WEBPACK_IMPORTED_MODULE_36__deferred_GBuffer__[\"a\" /* default */],\n    Renderer : __WEBPACK_IMPORTED_MODULE_37__deferred_Renderer__[\"a\" /* default */]\n};\n\n\n\nvar dep = {\n    glmatrix : __WEBPACK_IMPORTED_MODULE_38__dep_glmatrix__[\"a\" /* default */]\n};\n\n\n\n\n\nvar geometry = {\n    Cone : __WEBPACK_IMPORTED_MODULE_41__geometry_Cone__[\"a\" /* default */],\n    Cube : __WEBPACK_IMPORTED_MODULE_42__geometry_Cube__[\"a\" /* default */],\n    Cylinder : __WEBPACK_IMPORTED_MODULE_43__geometry_Cylinder__[\"a\" /* default */],\n    ParametricSurface : __WEBPACK_IMPORTED_MODULE_44__geometry_ParametricSurface__[\"a\" /* default */],\n    Plane : __WEBPACK_IMPORTED_MODULE_45__geometry_Plane__[\"a\" /* default */],\n    Sphere : __WEBPACK_IMPORTED_MODULE_46__geometry_Sphere__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\nvar light = {\n    Ambient : __WEBPACK_IMPORTED_MODULE_51__light_Ambient__[\"a\" /* default */],\n    AmbientCubemap : __WEBPACK_IMPORTED_MODULE_52__light_AmbientCubemap__[\"a\" /* default */],\n    AmbientSH : __WEBPACK_IMPORTED_MODULE_53__light_AmbientSH__[\"a\" /* default */],\n    Directional : __WEBPACK_IMPORTED_MODULE_54__light_Directional__[\"a\" /* default */],\n    Point : __WEBPACK_IMPORTED_MODULE_55__light_Point__[\"a\" /* default */],\n    Sphere : __WEBPACK_IMPORTED_MODULE_56__light_Sphere__[\"a\" /* default */],\n    Spot : __WEBPACK_IMPORTED_MODULE_57__light_Spot__[\"a\" /* default */],\n    Tube : __WEBPACK_IMPORTED_MODULE_58__light_Tube__[\"a\" /* default */]\n};\n\n\n\nvar loader = {\n    FX : __WEBPACK_IMPORTED_MODULE_59__loader_FX__[\"a\" /* default */],\n    GLTF : __WEBPACK_IMPORTED_MODULE_60__loader_GLTF__[\"a\" /* default */]\n};\n\n\n\n\nvar math = {\n    BoundingBox : __WEBPACK_IMPORTED_MODULE_62__math_BoundingBox__[\"a\" /* default */],\n    Frustum : __WEBPACK_IMPORTED_MODULE_63__math_Frustum__[\"a\" /* default */],\n    Matrix2 : __WEBPACK_IMPORTED_MODULE_64__math_Matrix2__[\"a\" /* default */],\n    Matrix2d : __WEBPACK_IMPORTED_MODULE_65__math_Matrix2d__[\"a\" /* default */],\n    Matrix3 : __WEBPACK_IMPORTED_MODULE_66__math_Matrix3__[\"a\" /* default */],\n    Matrix4 : __WEBPACK_IMPORTED_MODULE_67__math_Matrix4__[\"a\" /* default */],\n    Plane : __WEBPACK_IMPORTED_MODULE_68__math_Plane__[\"a\" /* default */],\n    Quaternion : __WEBPACK_IMPORTED_MODULE_69__math_Quaternion__[\"a\" /* default */],\n    Ray : __WEBPACK_IMPORTED_MODULE_70__math_Ray__[\"a\" /* default */],\n    util : __WEBPACK_IMPORTED_MODULE_71__math_util__[\"a\" /* default */],\n    Value : __WEBPACK_IMPORTED_MODULE_72__math_Value__[\"a\" /* default */],\n    Vector2 : __WEBPACK_IMPORTED_MODULE_73__math_Vector2__[\"a\" /* default */],\n    Vector3 : __WEBPACK_IMPORTED_MODULE_74__math_Vector3__[\"a\" /* default */],\n    Vector4 : __WEBPACK_IMPORTED_MODULE_75__math_Vector4__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar particle = {\n    Emitter : __WEBPACK_IMPORTED_MODULE_78__particle_Emitter__[\"a\" /* default */],\n    Field : __WEBPACK_IMPORTED_MODULE_79__particle_Field__[\"a\" /* default */],\n    ForceField : __WEBPACK_IMPORTED_MODULE_80__particle_ForceField__[\"a\" /* default */],\n    Particle : __WEBPACK_IMPORTED_MODULE_81__particle_Particle__[\"a\" /* default */],\n    ParticleRenderable : __WEBPACK_IMPORTED_MODULE_82__particle_ParticleRenderable__[\"a\" /* default */]\n};\n\n\n\nvar picking = {\n    PixelPicking : __WEBPACK_IMPORTED_MODULE_83__picking_PixelPicking__[\"a\" /* default */],\n    RayPicking : __WEBPACK_IMPORTED_MODULE_84__picking_RayPicking__[\"a\" /* default */]\n};\n\n\n\nvar plugin = {\n    FreeControl : __WEBPACK_IMPORTED_MODULE_85__plugin_FreeControl__[\"a\" /* default */],\n    GamepadControl : __WEBPACK_IMPORTED_MODULE_86__plugin_GamepadControl__[\"a\" /* default */],\n    GestureMgr : __WEBPACK_IMPORTED_MODULE_87__plugin_GestureMgr__[\"a\" /* default */],\n    InfinitePlane : __WEBPACK_IMPORTED_MODULE_88__plugin_InfinitePlane__[\"a\" /* default */],\n    OrbitControl : __WEBPACK_IMPORTED_MODULE_89__plugin_OrbitControl__[\"a\" /* default */],\n    Skybox : __WEBPACK_IMPORTED_MODULE_90__plugin_Skybox__[\"a\" /* default */],\n    Skydome : __WEBPACK_IMPORTED_MODULE_91__plugin_Skydome__[\"a\" /* default */]\n};\n\n\n\nvar prePass = {\n    EnvironmentMap : __WEBPACK_IMPORTED_MODULE_92__prePass_EnvironmentMap__[\"a\" /* default */],\n    ShadowMap : __WEBPACK_IMPORTED_MODULE_93__prePass_ShadowMap__[\"a\" /* default */]\n};\n\n\n\n\n\n\n\nvar shader = {\n    library : __WEBPACK_IMPORTED_MODULE_98__shader_library__[\"a\" /* default */],\n    registerBuiltinCompositor : __WEBPACK_IMPORTED_MODULE_99__shader_registerBuiltinCompositor__[\"a\" /* default */],\n    source : {\n    header : {\n        light : __WEBPACK_IMPORTED_MODULE_100__shader_source_header_light__[\"a\" /* default */]\n    }\n    }\n};\n\n\n\n\n\n\n\n\n\n\nvar util = {\n    cubemap : __WEBPACK_IMPORTED_MODULE_108__util_cubemap__[\"a\" /* default */],\n    dds : __WEBPACK_IMPORTED_MODULE_109__util_dds__[\"a\" /* default */],\n    delaunay : __WEBPACK_IMPORTED_MODULE_110__util_delaunay__[\"a\" /* default */],\n    hdr : __WEBPACK_IMPORTED_MODULE_111__util_hdr__[\"a\" /* default */],\n    ktx : __WEBPACK_IMPORTED_MODULE_112__util_ktx__[\"a\" /* default */],\n    mesh : __WEBPACK_IMPORTED_MODULE_113__util_mesh__[\"a\" /* default */],\n    sh : __WEBPACK_IMPORTED_MODULE_114__util_sh__[\"a\" /* default */],\n    texture : __WEBPACK_IMPORTED_MODULE_115__util_texture__[\"a\" /* default */],\n    transferable : __WEBPACK_IMPORTED_MODULE_116__util_transferable__[\"a\" /* default */]\n};\n\n\n\n\nvar vr = {\n    CardboardDistorter : __WEBPACK_IMPORTED_MODULE_118__vr_CardboardDistorter__[\"a\" /* default */],\n    StereoCamera : __WEBPACK_IMPORTED_MODULE_119__vr_StereoCamera__[\"a\" /* default */]\n};\n\n;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NsYXlnbC5qcz8xZWVjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKiBAbmFtZXNwYWNlIGNsYXkgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkubWF0aCAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5hbmltYXRpb24gKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuYXN5bmMgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuY2FtZXJhICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LmNvbXBvc2l0b3IgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkuY29yZSAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5nZW9tZXRyeSAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5oZWxwZXIgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkubGlnaHQgKi9cbi8qKiBAbmFtZXNwYWNlIGNsYXkubG9hZGVyICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LnBhcnRpY2xlICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LnBsdWdpbiAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS5wcmVQYXNzICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LnNoYWRlciAqL1xuLyoqIEBuYW1lc3BhY2UgY2xheS50ZXh0dXJlICovXG4vKiogQG5hbWVzcGFjZSBjbGF5LnV0aWwgKi9cblxuaW1wb3J0IEFuaW1hdG9yJDAgZnJvbSAnLi9hbmltYXRpb24vQW5pbWF0b3InO1xuaW1wb3J0IEJsZW5kMURDbGlwJDEgZnJvbSAnLi9hbmltYXRpb24vQmxlbmQxRENsaXAnO1xuaW1wb3J0IEJsZW5kMkRDbGlwJDIgZnJvbSAnLi9hbmltYXRpb24vQmxlbmQyRENsaXAnO1xuaW1wb3J0IENsaXAkMyBmcm9tICcuL2FuaW1hdGlvbi9DbGlwJztcbmltcG9ydCBlYXNpbmckNCBmcm9tICcuL2FuaW1hdGlvbi9lYXNpbmcnO1xuaW1wb3J0IFNhbXBsZXJUcmFjayQ1IGZyb20gJy4vYW5pbWF0aW9uL1NhbXBsZXJUcmFjayc7XG5pbXBvcnQgVGltZWxpbmUkNiBmcm9tICcuL2FuaW1hdGlvbi9UaW1lbGluZSc7XG5pbXBvcnQgVHJhY2tDbGlwJDcgZnJvbSAnLi9hbmltYXRpb24vVHJhY2tDbGlwJztcbmltcG9ydCBhcHBsaWNhdGlvbiQ4IGZyb20gJy4vYXBwbGljYXRpb24nO1xuaW1wb3J0IFRhc2skOSBmcm9tICcuL2FzeW5jL1Rhc2snO1xuaW1wb3J0IFRhc2tHcm91cCQxMCBmcm9tICcuL2FzeW5jL1Rhc2tHcm91cCc7XG5pbXBvcnQgQ2FtZXJhJDExIGZyb20gJy4vQ2FtZXJhJztcbmltcG9ydCBPcnRob2dyYXBoaWMkMTIgZnJvbSAnLi9jYW1lcmEvT3J0aG9ncmFwaGljJztcbmltcG9ydCBQZXJzcGVjdGl2ZSQxMyBmcm9tICcuL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5pbXBvcnQgQ29tcG9zaXRvciQxNCBmcm9tICcuL2NvbXBvc2l0b3IvQ29tcG9zaXRvcic7XG5pbXBvcnQgQ29tcG9zaXRvck5vZGUkMTUgZnJvbSAnLi9jb21wb3NpdG9yL0NvbXBvc2l0b3JOb2RlJztcbmltcG9ydCBjcmVhdGVDb21wb3NpdG9yJDE2IGZyb20gJy4vY29tcG9zaXRvci9jcmVhdGVDb21wb3NpdG9yJztcbmltcG9ydCBGaWx0ZXJOb2RlJDE3IGZyb20gJy4vY29tcG9zaXRvci9GaWx0ZXJOb2RlJztcbmltcG9ydCBHcmFwaCQxOCBmcm9tICcuL2NvbXBvc2l0b3IvR3JhcGgnO1xuaW1wb3J0IFBhc3MkMTkgZnJvbSAnLi9jb21wb3NpdG9yL1Bhc3MnO1xuaW1wb3J0IFNjZW5lTm9kZSQyMCBmcm9tICcuL2NvbXBvc2l0b3IvU2NlbmVOb2RlJztcbmltcG9ydCBUZXh0dXJlTm9kZSQyMSBmcm9tICcuL2NvbXBvc2l0b3IvVGV4dHVyZU5vZGUnO1xuaW1wb3J0IFRleHR1cmVQb29sJDIyIGZyb20gJy4vY29tcG9zaXRvci9UZXh0dXJlUG9vbCc7XG5pbXBvcnQgQmFzZSQyMyBmcm9tICcuL2NvcmUvQmFzZSc7XG5pbXBvcnQgQ2FjaGUkMjQgZnJvbSAnLi9jb3JlL0NhY2hlJztcbmltcG9ydCBjb2xvciQyNSBmcm9tICcuL2NvcmUvY29sb3InO1xuaW1wb3J0IGdsZW51bSQyNiBmcm9tICcuL2NvcmUvZ2xlbnVtJztcbmltcG9ydCBHTEluZm8kMjcgZnJvbSAnLi9jb3JlL0dMSW5mbyc7XG5pbXBvcnQgTGlua2VkTGlzdCQyOCBmcm9tICcuL2NvcmUvTGlua2VkTGlzdCc7XG5pbXBvcnQgTFJVJDI5IGZyb20gJy4vY29yZS9MUlUnO1xuaW1wb3J0IGV4dGVuZCQzMCBmcm9tICcuL2NvcmUvbWl4aW4vZXh0ZW5kJztcbmltcG9ydCBub3RpZmllciQzMSBmcm9tICcuL2NvcmUvbWl4aW4vbm90aWZpZXInO1xuaW1wb3J0IHJlcXVlc3QkMzIgZnJvbSAnLi9jb3JlL3JlcXVlc3QnO1xuaW1wb3J0IHV0aWwkMzMgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IHZlbmRvciQzNCBmcm9tICcuL2NvcmUvdmVuZG9yJztcbmltcG9ydCBjcmVhdGVDb21wb3NpdG9yJDM1IGZyb20gJy4vY3JlYXRlQ29tcG9zaXRvcic7XG5pbXBvcnQgR0J1ZmZlciQzNiBmcm9tICcuL2RlZmVycmVkL0dCdWZmZXInO1xuaW1wb3J0IFJlbmRlcmVyJDM3IGZyb20gJy4vZGVmZXJyZWQvUmVuZGVyZXInO1xuaW1wb3J0IGdsbWF0cml4JDM4IGZyb20gJy4vZGVwL2dsbWF0cml4JztcbmltcG9ydCBGcmFtZUJ1ZmZlciQzOSBmcm9tICcuL0ZyYW1lQnVmZmVyJztcbmltcG9ydCBHZW9tZXRyeSQ0MCBmcm9tICcuL0dlb21ldHJ5JztcbmltcG9ydCBDb25lJDQxIGZyb20gJy4vZ2VvbWV0cnkvQ29uZSc7XG5pbXBvcnQgQ3ViZSQ0MiBmcm9tICcuL2dlb21ldHJ5L0N1YmUnO1xuaW1wb3J0IEN5bGluZGVyJDQzIGZyb20gJy4vZ2VvbWV0cnkvQ3lsaW5kZXInO1xuaW1wb3J0IFBhcmFtZXRyaWNTdXJmYWNlJDQ0IGZyb20gJy4vZ2VvbWV0cnkvUGFyYW1ldHJpY1N1cmZhY2UnO1xuaW1wb3J0IFBsYW5lJDQ1IGZyb20gJy4vZ2VvbWV0cnkvUGxhbmUnO1xuaW1wb3J0IFNwaGVyZSQ0NiBmcm9tICcuL2dlb21ldHJ5L1NwaGVyZSc7XG5pbXBvcnQgR2VvbWV0cnlCYXNlJDQ3IGZyb20gJy4vR2VvbWV0cnlCYXNlJztcbmltcG9ydCBJbnN0YW5jZWRNZXNoJDQ4IGZyb20gJy4vSW5zdGFuY2VkTWVzaCc7XG5pbXBvcnQgSm9pbnQkNDkgZnJvbSAnLi9Kb2ludCc7XG5pbXBvcnQgTGlnaHQkNTAgZnJvbSAnLi9MaWdodCc7XG5pbXBvcnQgQW1iaWVudCQ1MSBmcm9tICcuL2xpZ2h0L0FtYmllbnQnO1xuaW1wb3J0IEFtYmllbnRDdWJlbWFwJDUyIGZyb20gJy4vbGlnaHQvQW1iaWVudEN1YmVtYXAnO1xuaW1wb3J0IEFtYmllbnRTSCQ1MyBmcm9tICcuL2xpZ2h0L0FtYmllbnRTSCc7XG5pbXBvcnQgRGlyZWN0aW9uYWwkNTQgZnJvbSAnLi9saWdodC9EaXJlY3Rpb25hbCc7XG5pbXBvcnQgUG9pbnQkNTUgZnJvbSAnLi9saWdodC9Qb2ludCc7XG5pbXBvcnQgU3BoZXJlJDU2IGZyb20gJy4vbGlnaHQvU3BoZXJlJztcbmltcG9ydCBTcG90JDU3IGZyb20gJy4vbGlnaHQvU3BvdCc7XG5pbXBvcnQgVHViZSQ1OCBmcm9tICcuL2xpZ2h0L1R1YmUnO1xuaW1wb3J0IEZYJDU5IGZyb20gJy4vbG9hZGVyL0ZYJztcbmltcG9ydCBHTFRGJDYwIGZyb20gJy4vbG9hZGVyL0dMVEYnO1xuaW1wb3J0IE1hdGVyaWFsJDYxIGZyb20gJy4vTWF0ZXJpYWwnO1xuaW1wb3J0IEJvdW5kaW5nQm94JDYyIGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgRnJ1c3R1bSQ2MyBmcm9tICcuL21hdGgvRnJ1c3R1bSc7XG5pbXBvcnQgTWF0cml4MiQ2NCBmcm9tICcuL21hdGgvTWF0cml4Mic7XG5pbXBvcnQgTWF0cml4MmQkNjUgZnJvbSAnLi9tYXRoL01hdHJpeDJkJztcbmltcG9ydCBNYXRyaXgzJDY2IGZyb20gJy4vbWF0aC9NYXRyaXgzJztcbmltcG9ydCBNYXRyaXg0JDY3IGZyb20gJy4vbWF0aC9NYXRyaXg0JztcbmltcG9ydCBQbGFuZSQ2OCBmcm9tICcuL21hdGgvUGxhbmUnO1xuaW1wb3J0IFF1YXRlcm5pb24kNjkgZnJvbSAnLi9tYXRoL1F1YXRlcm5pb24nO1xuaW1wb3J0IFJheSQ3MCBmcm9tICcuL21hdGgvUmF5JztcbmltcG9ydCB1dGlsJDcxIGZyb20gJy4vbWF0aC91dGlsJztcbmltcG9ydCBWYWx1ZSQ3MiBmcm9tICcuL21hdGgvVmFsdWUnO1xuaW1wb3J0IFZlY3RvcjIkNzMgZnJvbSAnLi9tYXRoL1ZlY3RvcjInO1xuaW1wb3J0IFZlY3RvcjMkNzQgZnJvbSAnLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IFZlY3RvcjQkNzUgZnJvbSAnLi9tYXRoL1ZlY3RvcjQnO1xuaW1wb3J0IE1lc2gkNzYgZnJvbSAnLi9NZXNoJztcbmltcG9ydCBOb2RlJDc3IGZyb20gJy4vTm9kZSc7XG5pbXBvcnQgRW1pdHRlciQ3OCBmcm9tICcuL3BhcnRpY2xlL0VtaXR0ZXInO1xuaW1wb3J0IEZpZWxkJDc5IGZyb20gJy4vcGFydGljbGUvRmllbGQnO1xuaW1wb3J0IEZvcmNlRmllbGQkODAgZnJvbSAnLi9wYXJ0aWNsZS9Gb3JjZUZpZWxkJztcbmltcG9ydCBQYXJ0aWNsZSQ4MSBmcm9tICcuL3BhcnRpY2xlL1BhcnRpY2xlJztcbmltcG9ydCBQYXJ0aWNsZVJlbmRlcmFibGUkODIgZnJvbSAnLi9wYXJ0aWNsZS9QYXJ0aWNsZVJlbmRlcmFibGUnO1xuaW1wb3J0IFBpeGVsUGlja2luZyQ4MyBmcm9tICcuL3BpY2tpbmcvUGl4ZWxQaWNraW5nJztcbmltcG9ydCBSYXlQaWNraW5nJDg0IGZyb20gJy4vcGlja2luZy9SYXlQaWNraW5nJztcbmltcG9ydCBGcmVlQ29udHJvbCQ4NSBmcm9tICcuL3BsdWdpbi9GcmVlQ29udHJvbCc7XG5pbXBvcnQgR2FtZXBhZENvbnRyb2wkODYgZnJvbSAnLi9wbHVnaW4vR2FtZXBhZENvbnRyb2wnO1xuaW1wb3J0IEdlc3R1cmVNZ3IkODcgZnJvbSAnLi9wbHVnaW4vR2VzdHVyZU1ncic7XG5pbXBvcnQgSW5maW5pdGVQbGFuZSQ4OCBmcm9tICcuL3BsdWdpbi9JbmZpbml0ZVBsYW5lJztcbmltcG9ydCBPcmJpdENvbnRyb2wkODkgZnJvbSAnLi9wbHVnaW4vT3JiaXRDb250cm9sJztcbmltcG9ydCBTa3lib3gkOTAgZnJvbSAnLi9wbHVnaW4vU2t5Ym94JztcbmltcG9ydCBTa3lkb21lJDkxIGZyb20gJy4vcGx1Z2luL1NreWRvbWUnO1xuaW1wb3J0IEVudmlyb25tZW50TWFwJDkyIGZyb20gJy4vcHJlUGFzcy9FbnZpcm9ubWVudE1hcCc7XG5pbXBvcnQgU2hhZG93TWFwJDkzIGZyb20gJy4vcHJlUGFzcy9TaGFkb3dNYXAnO1xuaW1wb3J0IFJlbmRlcmFibGUkOTQgZnJvbSAnLi9SZW5kZXJhYmxlJztcbmltcG9ydCBSZW5kZXJlciQ5NSBmcm9tICcuL1JlbmRlcmVyJztcbmltcG9ydCBTY2VuZSQ5NiBmcm9tICcuL1NjZW5lJztcbmltcG9ydCBTaGFkZXIkOTcgZnJvbSAnLi9TaGFkZXInO1xuaW1wb3J0IGxpYnJhcnkkOTggZnJvbSAnLi9zaGFkZXIvbGlicmFyeSc7XG5pbXBvcnQgcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvciQ5OSBmcm9tICcuL3NoYWRlci9yZWdpc3RlckJ1aWx0aW5Db21wb3NpdG9yJztcbmltcG9ydCBsaWdodCQxMDAgZnJvbSAnLi9zaGFkZXIvc291cmNlL2hlYWRlci9saWdodCc7XG5pbXBvcnQgU2tlbGV0b24kMTAxIGZyb20gJy4vU2tlbGV0b24nO1xuaW1wb3J0IFN0YW5kYXJkTWF0ZXJpYWwkMTAyIGZyb20gJy4vU3RhbmRhcmRNYXRlcmlhbCc7XG5pbXBvcnQgU3RhdGljR2VvbWV0cnkkMTAzIGZyb20gJy4vU3RhdGljR2VvbWV0cnknO1xuaW1wb3J0IFRleHR1cmUkMTA0IGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEJDEwNSBmcm9tICcuL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUkMTA2IGZyb20gJy4vVGV4dHVyZUN1YmUnO1xuaW1wb3J0IFRpbWVsaW5lJDEwNyBmcm9tICcuL1RpbWVsaW5lJztcbmltcG9ydCBjdWJlbWFwJDEwOCBmcm9tICcuL3V0aWwvY3ViZW1hcCc7XG5pbXBvcnQgZGRzJDEwOSBmcm9tICcuL3V0aWwvZGRzJztcbmltcG9ydCBkZWxhdW5heSQxMTAgZnJvbSAnLi91dGlsL2RlbGF1bmF5JztcbmltcG9ydCBoZHIkMTExIGZyb20gJy4vdXRpbC9oZHInO1xuaW1wb3J0IGt0eCQxMTIgZnJvbSAnLi91dGlsL2t0eCc7XG5pbXBvcnQgbWVzaCQxMTMgZnJvbSAnLi91dGlsL21lc2gnO1xuaW1wb3J0IHNoJDExNCBmcm9tICcuL3V0aWwvc2gnO1xuaW1wb3J0IHRleHR1cmUkMTE1IGZyb20gJy4vdXRpbC90ZXh0dXJlJztcbmltcG9ydCB0cmFuc2ZlcmFibGUkMTE2IGZyb20gJy4vdXRpbC90cmFuc2ZlcmFibGUnO1xuaW1wb3J0IHZlcnNpb24kMTE3IGZyb20gJy4vdmVyc2lvbic7XG5pbXBvcnQgQ2FyZGJvYXJkRGlzdG9ydGVyJDExOCBmcm9tICcuL3ZyL0NhcmRib2FyZERpc3RvcnRlcic7XG5pbXBvcnQgU3RlcmVvQ2FtZXJhJDExOSBmcm9tICcuL3ZyL1N0ZXJlb0NhbWVyYSc7XG5cblxudmFyIGFuaW1hdGlvbiA9IHtcbiAgICBBbmltYXRvciA6IEFuaW1hdG9yJDAsXG4gICAgQmxlbmQxRENsaXAgOiBCbGVuZDFEQ2xpcCQxLFxuICAgIEJsZW5kMkRDbGlwIDogQmxlbmQyRENsaXAkMixcbiAgICBDbGlwIDogQ2xpcCQzLFxuICAgIGVhc2luZyA6IGVhc2luZyQ0LFxuICAgIFNhbXBsZXJUcmFjayA6IFNhbXBsZXJUcmFjayQ1LFxuICAgIFRpbWVsaW5lIDogVGltZWxpbmUkNixcbiAgICBUcmFja0NsaXAgOiBUcmFja0NsaXAkN1xufTtcbmV4cG9ydCB7IGFuaW1hdGlvbiB9O1xuXG5leHBvcnQgeyBhcHBsaWNhdGlvbiQ4IGFzIGFwcGxpY2F0aW9uIH07XG5cbnZhciBhc3luYyA9IHtcbiAgICBUYXNrIDogVGFzayQ5LFxuICAgIFRhc2tHcm91cCA6IFRhc2tHcm91cCQxMFxufTtcbmV4cG9ydCB7IGFzeW5jIH07XG5cbmV4cG9ydCB7IENhbWVyYSQxMSBhcyBDYW1lcmEgfTtcblxudmFyIGNhbWVyYSA9IHtcbiAgICBPcnRob2dyYXBoaWMgOiBPcnRob2dyYXBoaWMkMTIsXG4gICAgUGVyc3BlY3RpdmUgOiBQZXJzcGVjdGl2ZSQxM1xufTtcbmV4cG9ydCB7IGNhbWVyYSB9O1xuXG5cbnZhciBjb21wb3NpdG9yID0ge1xuICAgIENvbXBvc2l0b3IgOiBDb21wb3NpdG9yJDE0LFxuICAgIENvbXBvc2l0b3JOb2RlIDogQ29tcG9zaXRvck5vZGUkMTUsXG4gICAgY3JlYXRlQ29tcG9zaXRvciA6IGNyZWF0ZUNvbXBvc2l0b3IkMTYsXG4gICAgRmlsdGVyTm9kZSA6IEZpbHRlck5vZGUkMTcsXG4gICAgR3JhcGggOiBHcmFwaCQxOCxcbiAgICBQYXNzIDogUGFzcyQxOSxcbiAgICBTY2VuZU5vZGUgOiBTY2VuZU5vZGUkMjAsXG4gICAgVGV4dHVyZU5vZGUgOiBUZXh0dXJlTm9kZSQyMSxcbiAgICBUZXh0dXJlUG9vbCA6IFRleHR1cmVQb29sJDIyXG59O1xuZXhwb3J0IHsgY29tcG9zaXRvciB9O1xuXG5cbnZhciBjb3JlID0ge1xuICAgIEJhc2UgOiBCYXNlJDIzLFxuICAgIENhY2hlIDogQ2FjaGUkMjQsXG4gICAgY29sb3IgOiBjb2xvciQyNSxcbiAgICBnbGVudW0gOiBnbGVudW0kMjYsXG4gICAgR0xJbmZvIDogR0xJbmZvJDI3LFxuICAgIExpbmtlZExpc3QgOiBMaW5rZWRMaXN0JDI4LFxuICAgIExSVSA6IExSVSQyOSxcbiAgICBtaXhpbiA6IHtcbiAgICAgICAgZXh0ZW5kIDogZXh0ZW5kJDMwLFxuICAgICAgICBub3RpZmllciA6IG5vdGlmaWVyJDMxXG4gICAgfSxcbiAgICByZXF1ZXN0IDogcmVxdWVzdCQzMixcbiAgICB1dGlsIDogdXRpbCQzMyxcbiAgICB2ZW5kb3IgOiB2ZW5kb3IkMzRcbn07XG5leHBvcnQgeyBjb3JlIH07XG5cbmV4cG9ydCB7IGNyZWF0ZUNvbXBvc2l0b3IkMzUgYXMgY3JlYXRlQ29tcG9zaXRvciB9O1xuXG52YXIgZGVmZXJyZWQgPSB7XG4gICAgR0J1ZmZlciA6IEdCdWZmZXIkMzYsXG4gICAgUmVuZGVyZXIgOiBSZW5kZXJlciQzN1xufTtcbmV4cG9ydCB7IGRlZmVycmVkIH07XG5cblxudmFyIGRlcCA9IHtcbiAgICBnbG1hdHJpeCA6IGdsbWF0cml4JDM4XG59O1xuZXhwb3J0IHsgZGVwIH07XG5cbmV4cG9ydCB7IEZyYW1lQnVmZmVyJDM5IGFzIEZyYW1lQnVmZmVyIH07XG5leHBvcnQgeyBHZW9tZXRyeSQ0MCBhcyBHZW9tZXRyeSB9O1xuXG52YXIgZ2VvbWV0cnkgPSB7XG4gICAgQ29uZSA6IENvbmUkNDEsXG4gICAgQ3ViZSA6IEN1YmUkNDIsXG4gICAgQ3lsaW5kZXIgOiBDeWxpbmRlciQ0MyxcbiAgICBQYXJhbWV0cmljU3VyZmFjZSA6IFBhcmFtZXRyaWNTdXJmYWNlJDQ0LFxuICAgIFBsYW5lIDogUGxhbmUkNDUsXG4gICAgU3BoZXJlIDogU3BoZXJlJDQ2XG59O1xuZXhwb3J0IHsgZ2VvbWV0cnkgfTtcblxuZXhwb3J0IHsgR2VvbWV0cnlCYXNlJDQ3IGFzIEdlb21ldHJ5QmFzZSB9O1xuZXhwb3J0IHsgSW5zdGFuY2VkTWVzaCQ0OCBhcyBJbnN0YW5jZWRNZXNoIH07XG5leHBvcnQgeyBKb2ludCQ0OSBhcyBKb2ludCB9O1xuZXhwb3J0IHsgTGlnaHQkNTAgYXMgTGlnaHQgfTtcblxudmFyIGxpZ2h0ID0ge1xuICAgIEFtYmllbnQgOiBBbWJpZW50JDUxLFxuICAgIEFtYmllbnRDdWJlbWFwIDogQW1iaWVudEN1YmVtYXAkNTIsXG4gICAgQW1iaWVudFNIIDogQW1iaWVudFNIJDUzLFxuICAgIERpcmVjdGlvbmFsIDogRGlyZWN0aW9uYWwkNTQsXG4gICAgUG9pbnQgOiBQb2ludCQ1NSxcbiAgICBTcGhlcmUgOiBTcGhlcmUkNTYsXG4gICAgU3BvdCA6IFNwb3QkNTcsXG4gICAgVHViZSA6IFR1YmUkNThcbn07XG5leHBvcnQgeyBsaWdodCB9O1xuXG5cbnZhciBsb2FkZXIgPSB7XG4gICAgRlggOiBGWCQ1OSxcbiAgICBHTFRGIDogR0xURiQ2MFxufTtcbmV4cG9ydCB7IGxvYWRlciB9O1xuXG5leHBvcnQgeyBNYXRlcmlhbCQ2MSBhcyBNYXRlcmlhbCB9O1xuXG52YXIgbWF0aCA9IHtcbiAgICBCb3VuZGluZ0JveCA6IEJvdW5kaW5nQm94JDYyLFxuICAgIEZydXN0dW0gOiBGcnVzdHVtJDYzLFxuICAgIE1hdHJpeDIgOiBNYXRyaXgyJDY0LFxuICAgIE1hdHJpeDJkIDogTWF0cml4MmQkNjUsXG4gICAgTWF0cml4MyA6IE1hdHJpeDMkNjYsXG4gICAgTWF0cml4NCA6IE1hdHJpeDQkNjcsXG4gICAgUGxhbmUgOiBQbGFuZSQ2OCxcbiAgICBRdWF0ZXJuaW9uIDogUXVhdGVybmlvbiQ2OSxcbiAgICBSYXkgOiBSYXkkNzAsXG4gICAgdXRpbCA6IHV0aWwkNzEsXG4gICAgVmFsdWUgOiBWYWx1ZSQ3MixcbiAgICBWZWN0b3IyIDogVmVjdG9yMiQ3MyxcbiAgICBWZWN0b3IzIDogVmVjdG9yMyQ3NCxcbiAgICBWZWN0b3I0IDogVmVjdG9yNCQ3NVxufTtcbmV4cG9ydCB7IG1hdGggfTtcbmV4cG9ydCB7IEJvdW5kaW5nQm94JDYyIGFzIEJvdW5kaW5nQm94IH07XG5leHBvcnQgeyBGcnVzdHVtJDYzIGFzIEZydXN0dW0gfTtcbmV4cG9ydCB7IE1hdHJpeDIkNjQgYXMgTWF0cml4MiB9O1xuZXhwb3J0IHsgTWF0cml4MmQkNjUgYXMgTWF0cml4MmQgfTtcbmV4cG9ydCB7IE1hdHJpeDMkNjYgYXMgTWF0cml4MyB9O1xuZXhwb3J0IHsgTWF0cml4NCQ2NyBhcyBNYXRyaXg0IH07XG5leHBvcnQgeyBQbGFuZSQ2OCBhcyBQbGFuZSB9O1xuZXhwb3J0IHsgUXVhdGVybmlvbiQ2OSBhcyBRdWF0ZXJuaW9uIH07XG5leHBvcnQgeyBSYXkkNzAgYXMgUmF5IH07XG5leHBvcnQgeyBWYWx1ZSQ3MiBhcyBWYWx1ZSB9O1xuZXhwb3J0IHsgVmVjdG9yMiQ3MyBhcyBWZWN0b3IyIH07XG5leHBvcnQgeyBWZWN0b3IzJDc0IGFzIFZlY3RvcjMgfTtcbmV4cG9ydCB7IFZlY3RvcjQkNzUgYXMgVmVjdG9yNCB9O1xuXG5leHBvcnQgeyBNZXNoJDc2IGFzIE1lc2ggfTtcbmV4cG9ydCB7IE5vZGUkNzcgYXMgTm9kZSB9O1xuXG52YXIgcGFydGljbGUgPSB7XG4gICAgRW1pdHRlciA6IEVtaXR0ZXIkNzgsXG4gICAgRmllbGQgOiBGaWVsZCQ3OSxcbiAgICBGb3JjZUZpZWxkIDogRm9yY2VGaWVsZCQ4MCxcbiAgICBQYXJ0aWNsZSA6IFBhcnRpY2xlJDgxLFxuICAgIFBhcnRpY2xlUmVuZGVyYWJsZSA6IFBhcnRpY2xlUmVuZGVyYWJsZSQ4MlxufTtcbmV4cG9ydCB7IHBhcnRpY2xlIH07XG5cblxudmFyIHBpY2tpbmcgPSB7XG4gICAgUGl4ZWxQaWNraW5nIDogUGl4ZWxQaWNraW5nJDgzLFxuICAgIFJheVBpY2tpbmcgOiBSYXlQaWNraW5nJDg0XG59O1xuZXhwb3J0IHsgcGlja2luZyB9O1xuXG5cbnZhciBwbHVnaW4gPSB7XG4gICAgRnJlZUNvbnRyb2wgOiBGcmVlQ29udHJvbCQ4NSxcbiAgICBHYW1lcGFkQ29udHJvbCA6IEdhbWVwYWRDb250cm9sJDg2LFxuICAgIEdlc3R1cmVNZ3IgOiBHZXN0dXJlTWdyJDg3LFxuICAgIEluZmluaXRlUGxhbmUgOiBJbmZpbml0ZVBsYW5lJDg4LFxuICAgIE9yYml0Q29udHJvbCA6IE9yYml0Q29udHJvbCQ4OSxcbiAgICBTa3lib3ggOiBTa3lib3gkOTAsXG4gICAgU2t5ZG9tZSA6IFNreWRvbWUkOTFcbn07XG5leHBvcnQgeyBwbHVnaW4gfTtcblxuXG52YXIgcHJlUGFzcyA9IHtcbiAgICBFbnZpcm9ubWVudE1hcCA6IEVudmlyb25tZW50TWFwJDkyLFxuICAgIFNoYWRvd01hcCA6IFNoYWRvd01hcCQ5M1xufTtcbmV4cG9ydCB7IHByZVBhc3MgfTtcblxuZXhwb3J0IHsgUmVuZGVyYWJsZSQ5NCBhcyBSZW5kZXJhYmxlIH07XG5leHBvcnQgeyBSZW5kZXJlciQ5NSBhcyBSZW5kZXJlciB9O1xuZXhwb3J0IHsgU2NlbmUkOTYgYXMgU2NlbmUgfTtcbmV4cG9ydCB7IFNoYWRlciQ5NyBhcyBTaGFkZXIgfTtcblxudmFyIHNoYWRlciA9IHtcbiAgICBsaWJyYXJ5IDogbGlicmFyeSQ5OCxcbiAgICByZWdpc3RlckJ1aWx0aW5Db21wb3NpdG9yIDogcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvciQ5OSxcbiAgICBzb3VyY2UgOiB7XG4gICAgaGVhZGVyIDoge1xuICAgICAgICBsaWdodCA6IGxpZ2h0JDEwMFxuICAgIH1cbiAgICB9XG59O1xuZXhwb3J0IHsgc2hhZGVyIH07XG5cbmV4cG9ydCB7IFNrZWxldG9uJDEwMSBhcyBTa2VsZXRvbiB9O1xuZXhwb3J0IHsgU3RhbmRhcmRNYXRlcmlhbCQxMDIgYXMgU3RhbmRhcmRNYXRlcmlhbCB9O1xuZXhwb3J0IHsgU3RhdGljR2VvbWV0cnkkMTAzIGFzIFN0YXRpY0dlb21ldHJ5IH07XG5leHBvcnQgeyBUZXh0dXJlJDEwNCBhcyBUZXh0dXJlIH07XG5leHBvcnQgeyBUZXh0dXJlMkQkMTA1IGFzIFRleHR1cmUyRCB9O1xuZXhwb3J0IHsgVGV4dHVyZUN1YmUkMTA2IGFzIFRleHR1cmVDdWJlIH07XG5leHBvcnQgeyBUaW1lbGluZSQxMDcgYXMgVGltZWxpbmUgfTtcblxudmFyIHV0aWwgPSB7XG4gICAgY3ViZW1hcCA6IGN1YmVtYXAkMTA4LFxuICAgIGRkcyA6IGRkcyQxMDksXG4gICAgZGVsYXVuYXkgOiBkZWxhdW5heSQxMTAsXG4gICAgaGRyIDogaGRyJDExMSxcbiAgICBrdHggOiBrdHgkMTEyLFxuICAgIG1lc2ggOiBtZXNoJDExMyxcbiAgICBzaCA6IHNoJDExNCxcbiAgICB0ZXh0dXJlIDogdGV4dHVyZSQxMTUsXG4gICAgdHJhbnNmZXJhYmxlIDogdHJhbnNmZXJhYmxlJDExNlxufTtcbmV4cG9ydCB7IHV0aWwgfTtcblxuZXhwb3J0IHsgdmVyc2lvbiQxMTcgYXMgdmVyc2lvbiB9O1xuXG52YXIgdnIgPSB7XG4gICAgQ2FyZGJvYXJkRGlzdG9ydGVyIDogQ2FyZGJvYXJkRGlzdG9ydGVyJDExOCxcbiAgICBTdGVyZW9DYW1lcmEgOiBTdGVyZW9DYW1lcmEkMTE5XG59O1xuZXhwb3J0IHsgdnIgfTtcbjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jbGF5Z2wuanNcbi8vIG1vZHVsZSBpZCA9IDI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25\n");

/***/ }),
/* 26 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__ = __webpack_require__(45);\n\n\n/**\n * @constructor\n * @alias clay.Vector2\n * @param {number} x\n * @param {number} y\n */\nvar Vector2 = function(x, y) {\n\n    x = x || 0;\n    y = y || 0;\n\n    /**\n     * Storage of Vector2, read and write of x, y will change the values in array\n     * All methods also operate on the array instead of x, y components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector2#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].fromValues(x, y);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector2#\n     */\n    this._dirty = true;\n};\n\nVector2.prototype = {\n\n    constructor: Vector2,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    add: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x and y components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @return {clay.Vector2}\n     */\n    set: function(x, y) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x and y components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector2}\n     */\n    setArray: function(arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector2\n     * @return {clay.Vector2}\n     */\n    clone: function() {\n        return new Vector2(this.x, this.y);\n    },\n\n    /**\n     * Copy x, y from b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Cross product of self and b, written to a Vector3 out\n     * @param  {clay.Vector3} out\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    cross: function(out, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].cross(out.array, this.array, b.array);\n        out._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    dist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    distance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    div: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    divide: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    dot: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].length(this.array);\n    },\n\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector2} a\n     * @param  {clay.Vector2} b\n     * @param  {number}  t\n     * @return {clay.Vector2}\n     */\n    lerp: function(a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    min: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    max: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector2}\n     */\n    negate: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector2}\n     */\n    normalize: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector2}\n     */\n    random: function(scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector2}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector2} b\n     * @param  {number}  scale\n     * @return {clay.Vector2}\n     */\n    scaleAndAdd: function(b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    sqrDist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector2} b\n     * @return {number}\n     */\n    squaredDistance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    sub: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector2} b\n     * @return {clay.Vector2}\n     */\n    subtract: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix2 m\n     * @param  {clay.Matrix2} m\n     * @return {clay.Vector2}\n     */\n    transformMat2: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix2d m\n     * @param  {clay.Matrix2d} m\n     * @return {clay.Vector2}\n     */\n    transformMat2d: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2d(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix3 m\n     * @param  {clay.Matrix3} m\n     * @return {clay.Vector2}\n     */\n    transformMat3: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat3(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector2}\n     */\n    transformMat4: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n// Getter and Setter\nif (Object.defineProperty) {\n\n    var proto = Vector2.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector2\n     * @instance\n     */\n    Object.defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector2\n     * @instance\n     */\n    Object.defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {number}  x\n * @param  {number}  y\n * @return {clay.Vector2}\n */\nVector2.set = function(out, x, y) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].set(out.array, x, y);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector3} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.cross = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].cross(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].distance(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.distance = Vector2.dist;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.divide = Vector2.div;\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].length(b.array);\n};\n\n// Vector2.length = Vector2.len;\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @param  {number}  t\n * @return {clay.Vector2}\n */\nVector2.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.multiply = Vector2.mul;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @return {clay.Vector2}\n */\nVector2.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @return {clay.Vector2}\n */\nVector2.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @param  {number}  scale\n * @return {clay.Vector2}\n */\nVector2.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {number}\n */\nVector2.squaredDistance = Vector2.sqrDist;\n\n/**\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector2} a\n * @return {number}\n */\nVector2.squaredLength = Vector2.sqrLen;\n\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Vector2} b\n * @return {clay.Vector2}\n */\nVector2.subtract = Vector2.sub;\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Matrix2} m\n * @return {clay.Vector2}\n */\nVector2.transformMat2 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2}  out\n * @param  {clay.Vector2}  a\n * @param  {clay.Matrix2d} m\n * @return {clay.Vector2}\n */\nVector2.transformMat2d = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat2d(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {Matrix3} m\n * @return {clay.Vector2}\n */\nVector2.transformMat3 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat3(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {clay.Vector2} out\n * @param  {clay.Vector2} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector2}\n */\nVector2.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec2__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvVmVjdG9yMi5qcz84NjFmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2ZWMyIGZyb20gJy4uL2dsbWF0cml4L3ZlYzInO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuVmVjdG9yMlxuICogQHBhcmFtIHtudW1iZXJ9IHhcbiAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gKi9cbnZhciBWZWN0b3IyID0gZnVuY3Rpb24oeCwgeSkge1xuXG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogU3RvcmFnZSBvZiBWZWN0b3IyLCByZWFkIGFuZCB3cml0ZSBvZiB4LCB5IHdpbGwgY2hhbmdlIHRoZSB2YWx1ZXMgaW4gYXJyYXlcbiAgICAgKiBBbGwgbWV0aG9kcyBhbHNvIG9wZXJhdGUgb24gdGhlIGFycmF5IGluc3RlYWQgb2YgeCwgeSBjb21wb25lbnRzXG4gICAgICogQG5hbWUgYXJyYXlcbiAgICAgKiBAdHlwZSB7RmxvYXQzMkFycmF5fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjIjXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IHZlYzIuZnJvbVZhbHVlcyh4LCB5KTtcblxuICAgIC8qKlxuICAgICAqIERpcnR5IGZsYWcgaXMgdXNlZCBieSB0aGUgTm9kZSB0byBkZXRlcm1pbmVcbiAgICAgKiBpZiB0aGUgbWF0cml4IGlzIHVwZGF0ZWQgdG8gbGF0ZXN0XG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yMiNcbiAgICAgKi9cbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG59O1xuXG5WZWN0b3IyLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBWZWN0b3IyLFxuXG4gICAgLyoqXG4gICAgICogQWRkIGIgdG8gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBhZGQ6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5hZGQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB4IGFuZCB5IGNvbXBvbmVudHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IHg7XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSB5O1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCBhbmQgeSBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzZXRBcnJheTogZnVuY3Rpb24oYXJyKSB7XG4gICAgICAgIHRoaXMuYXJyYXlbMF0gPSBhcnJbMF07XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSBhcnJbMV07XG5cbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgVmVjdG9yMlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgVmVjdG9yMih0aGlzLngsIHRoaXMueSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgeCwgeSBmcm9tIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENyb3NzIHByb2R1Y3Qgb2Ygc2VsZiBhbmQgYiwgd3JpdHRlbiB0byBhIFZlY3RvcjMgb3V0XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgY3Jvc3M6IGZ1bmN0aW9uKG91dCwgYikge1xuICAgICAgICB2ZWMyLmNyb3NzKG91dC5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIGRpc3RhbmNlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzIuZGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzdGFuY2UgYmV0d2VlbiBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRpc3RhbmNlOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLmRpc3RhbmNlKHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgZGl2aWRlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIGRpdjogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWMyLmRpdih0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGl2aWRlIHNlbGYgYnkgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBkaXZpZGU6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5kaXZpZGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERvdCBwcm9kdWN0IG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZG90OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLmRvdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2YgbGVuZ3RoXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLmxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuZ3RoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzIubGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBMaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIGEgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB0XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIGxlcnA6IGZ1bmN0aW9uKGEsIGIsIHQpIHtcbiAgICAgICAgdmVjMi5sZXJwKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNaW5pbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgbWluOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIubWluKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgbWF4OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIubWF4KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgbXVsOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgbXVsdGlwbHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTmVnYXRlIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgbmVnYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmVjMi5uZWdhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZSBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZlYzIubm9ybWFsaXplKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSByYW5kb20geCwgeSBjb21wb25lbnRzIHdpdGggYSBnaXZlbiBzY2FsZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgcmFuZG9tOiBmdW5jdGlvbihzY2FsZSkge1xuICAgICAgICB2ZWMyLnJhbmRvbSh0aGlzLmFycmF5LCBzY2FsZSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24ocykge1xuICAgICAgICB2ZWMyLnNjYWxlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHMpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBiIGFuZCBhZGQgdG8gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxlXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHNjYWxlQW5kQWRkOiBmdW5jdGlvbihiLCBzKSB7XG4gICAgICAgIHZlYzIuc2NhbGVBbmRBZGQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSwgcyk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzcXVhcmVkRGlzdGFuY2VcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyRGlzdDogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdmVjMi5zcXJEaXN0KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXVhcmVkRGlzdGFuY2U6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzIuc3F1YXJlZERpc3RhbmNlKHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3F1YXJlZExlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXJMZW46IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVjMi5zcXJMZW4odGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNxdWFyZWQgbGVuZ3RoIG9mIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3F1YXJlZExlbmd0aDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB2ZWMyLnNxdWFyZWRMZW5ndGgodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBzdWJ0cmFjdFxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzdWI6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjMi5zdWIodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN1YnRyYWN0IGIgZnJvbSBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHN1YnRyYWN0OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzIuc3VidHJhY3QodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBzZWxmIHdpdGggYSBNYXRyaXgyIG1cbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IG1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gICAgICovXG4gICAgdHJhbnNmb3JtTWF0MjogZnVuY3Rpb24obSkge1xuICAgICAgICB2ZWMyLnRyYW5zZm9ybU1hdDIodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgbS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zZm9ybSBzZWxmIHdpdGggYSBNYXRyaXgyZCBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gbVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICB0cmFuc2Zvcm1NYXQyZDogZnVuY3Rpb24obSkge1xuICAgICAgICB2ZWMyLnRyYW5zZm9ybU1hdDJkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4MyBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHRyYW5zZm9ybU1hdDM6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmVjMi50cmFuc2Zvcm1NYXQzKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4NCBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICAgICAqL1xuICAgIHRyYW5zZm9ybU1hdDQ6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmVjMi50cmFuc2Zvcm1NYXQ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnWycgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMuYXJyYXksICcsJykgKyAnXSc7XG4gICAgfSxcblxuICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpO1xuICAgIH1cbn07XG5cbi8vIEdldHRlciBhbmQgU2V0dGVyXG5pZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7XG5cbiAgICB2YXIgcHJvdG8gPSBWZWN0b3IyLnByb3RvdHlwZTtcbiAgICAvKipcbiAgICAgKiBAbmFtZSB4XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3IyXG4gICAgICogQGluc3RhbmNlXG4gICAgICovXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvLCAneCcsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcnJheVswXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuYXJyYXlbMF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgeVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICogQG1lbWJlck9mIGNsYXkuVmVjdG9yMlxuICAgICAqIEBpbnN0YW5jZVxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgJ3knLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzFdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gU3VwcGx5IG1ldGhvZHMgdGhhdCBhcmUgbm90IGluIHBsYWNlXG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIuYWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5hZGQob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnNldCA9IGZ1bmN0aW9uKG91dCwgeCwgeSkge1xuICAgIHZlYzIuc2V0KG91dC5hcnJheSwgeCwgeSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLmNvcHkgPSBmdW5jdGlvbihvdXQsIGIpIHtcbiAgICB2ZWMyLmNvcHkob3V0LmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5jcm9zcyA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzIuY3Jvc3Mob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5kaXN0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWMyLmRpc3RhbmNlKGEuYXJyYXksIGIuYXJyYXkpO1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IyLmRpc3RhbmNlID0gVmVjdG9yMi5kaXN0O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5kaXYgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMyLmRpdmlkZShvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLmRpdmlkZSA9IFZlY3RvcjIuZGl2O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IyLmRvdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjMi5kb3QoYS5hcnJheSwgYi5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IyLmxlbiA9IGZ1bmN0aW9uKGIpIHtcbiAgICByZXR1cm4gdmVjMi5sZW5ndGgoYi5hcnJheSk7XG59O1xuXG4vLyBWZWN0b3IyLmxlbmd0aCA9IFZlY3RvcjIubGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLmxlcnAgPSBmdW5jdGlvbihvdXQsIGEsIGIsIHQpIHtcbiAgICB2ZWMyLmxlcnAob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIubWluID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5taW4ob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5tYXggPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMyLm1heChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5tdWwgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWMyLm11bHRpcGx5KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIubXVsdGlwbHkgPSBWZWN0b3IyLm11bDtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLm5lZ2F0ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZlYzIubmVnYXRlKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5ub3JtYWxpemUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2ZWMyLm5vcm1hbGl6ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGVcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi5yYW5kb20gPSBmdW5jdGlvbihvdXQsIHNjYWxlKSB7XG4gICAgdmVjMi5yYW5kb20ob3V0LmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxlXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIHNjYWxlKSB7XG4gICAgdmVjMi5zY2FsZShvdXQuYXJyYXksIGEuYXJyYXksIHNjYWxlKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnNjYWxlQW5kQWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBzY2FsZSkge1xuICAgIHZlYzIuc2NhbGVBbmRBZGQob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjIuc3FyRGlzdCA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICByZXR1cm4gdmVjMi5zcXJEaXN0KGEuYXJyYXksIGIuYXJyYXkpO1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5WZWN0b3IyLnNxdWFyZWREaXN0YW5jZSA9IFZlY3RvcjIuc3FyRGlzdDtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5zcXJMZW4gPSBmdW5jdGlvbihhKSB7XG4gICAgcmV0dXJuIHZlYzIuc3FyTGVuKGEuYXJyYXkpO1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yMi5zcXVhcmVkTGVuZ3RoID0gVmVjdG9yMi5zcXJMZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIuc3ViID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjMi5zdWJ0cmFjdChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnN1YnRyYWN0ID0gVmVjdG9yMi5zdWI7XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnRyYW5zZm9ybU1hdDIgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWMyLnRyYW5zZm9ybU1hdDIob3V0LmFycmF5LCBhLmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBtXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjJ9XG4gKi9cblZlY3RvcjIudHJhbnNmb3JtTWF0MmQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWMyLnRyYW5zZm9ybU1hdDJkKG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge01hdHJpeDN9IG1cbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAqL1xuVmVjdG9yMi50cmFuc2Zvcm1NYXQzID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmVjMi50cmFuc2Zvcm1NYXQzKG91dC5hcnJheSwgYS5hcnJheSwgbS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3IyfVxuICovXG5WZWN0b3IyLnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWMyLnRyYW5zZm9ybU1hdDQob3V0LmFycmF5LCBhLmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVmVjdG9yMjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL1ZlY3RvcjIuanNcbi8vIG1vZHVsZSBpZCA9IDI2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///26\n");

/***/ }),
/* 27 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mat3__ = __webpack_require__(32);\n\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n\n\n\n\n/**\n * @class Quaternion\n * @name quat\n */\n\nvar quat = {};\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\nquat.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {vec3} a the initial vector\n * @param {vec3} b the destination vector\n * @returns {quat} out\n */\nquat.rotationTo = (function() {\n    var tmpvec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].create();\n    var xUnitVec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].fromValues(1,0,0);\n    var yUnitVec3 = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].fromValues(0,1,0);\n\n    return function(out, a, b) {\n        var dot = __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].dot(a, b);\n        if (dot < -0.999999) {\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, xUnitVec3, a);\n            if (__WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].length(tmpvec3) < 0.000001)\n                __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, yUnitVec3, a);\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].normalize(tmpvec3, tmpvec3);\n            quat.setAxisAngle(out, tmpvec3, Math.PI);\n            return out;\n        } else if (dot > 0.999999) {\n            out[0] = 0;\n            out[1] = 0;\n            out[2] = 0;\n            out[3] = 1;\n            return out;\n        } else {\n            __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */].cross(tmpvec3, a, b);\n            out[0] = tmpvec3[0];\n            out[1] = tmpvec3[1];\n            out[2] = tmpvec3[2];\n            out[3] = 1 + dot;\n            return quat.normalize(out, out);\n        }\n    };\n})();\n\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {vec3} view  the vector representing the viewing direction\n * @param {vec3} right the vector representing the local \"right\" direction\n * @param {vec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\nquat.setAxes = (function() {\n    var matr = __WEBPACK_IMPORTED_MODULE_3__mat3__[\"a\" /* default */].create();\n\n    return function(out, view, right, up) {\n        matr[0] = right[0];\n        matr[3] = right[1];\n        matr[6] = right[2];\n\n        matr[1] = up[0];\n        matr[4] = up[1];\n        matr[7] = up[2];\n\n        matr[2] = -view[0];\n        matr[5] = -view[1];\n        matr[8] = -view[2];\n\n        return quat.normalize(out, quat.fromMat3(out, matr));\n    };\n})();\n\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {quat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\nquat.clone = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].clone;\n\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\nquat.fromValues = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].fromValues;\n\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the source quaternion\n * @returns {quat} out\n * @function\n */\nquat.copy = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].copy;\n\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\nquat.set = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].set;\n\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\nquat.identity = function(out) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {vec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\nquat.setAxisAngle = function(out, axis, rad) {\n    rad = rad * 0.5;\n    var s = Math.sin(rad);\n    out[0] = s * axis[0];\n    out[1] = s * axis[1];\n    out[2] = s * axis[2];\n    out[3] = Math.cos(rad);\n    return out;\n};\n\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n * @function\n */\nquat.add = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].add;\n\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {quat} out\n */\nquat.multiply = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n    out[0] = ax * bw + aw * bx + ay * bz - az * by;\n    out[1] = ay * bw + aw * by + az * bx - ax * bz;\n    out[2] = az * bw + aw * bz + ax * by - ay * bx;\n    out[3] = aw * bw - ax * bx - ay * by - az * bz;\n    return out;\n};\n\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\nquat.mul = quat.multiply;\n\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {quat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\nquat.scale = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].scale;\n\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateX = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw + aw * bx;\n    out[1] = ay * bw + az * bx;\n    out[2] = az * bw - ay * bx;\n    out[3] = aw * bw - ax * bx;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateY = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        by = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw - az * by;\n    out[1] = ay * bw + aw * by;\n    out[2] = az * bw + ax * by;\n    out[3] = aw * bw - ay * by;\n    return out;\n};\n\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {quat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\nquat.rotateZ = function (out, a, rad) {\n    rad *= 0.5;\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bz = Math.sin(rad), bw = Math.cos(rad);\n\n    out[0] = ax * bw + ay * bz;\n    out[1] = ay * bw - ax * bz;\n    out[2] = az * bw + aw * bz;\n    out[3] = aw * bw - az * bz;\n    return out;\n};\n\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate W component of\n * @returns {quat} out\n */\nquat.calculateW = function (out, a) {\n    var x = a[0], y = a[1], z = a[2];\n\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n    return out;\n};\n\n/**\n * Calculates the dot product of two quat's\n *\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\nquat.dot = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].dot;\n\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n * @function\n */\nquat.lerp = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].lerp;\n\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a the first operand\n * @param {quat} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {quat} out\n */\nquat.slerp = function (out, a, b, t) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n\n    var ax = a[0], ay = a[1], az = a[2], aw = a[3],\n        bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n    var        omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if ( cosom < 0.0 ) {\n        cosom = -cosom;\n        bx = - bx;\n        by = - by;\n        bz = - bz;\n        bw = - bw;\n    }\n    // calculate coefficients\n    if ( (1.0 - cosom) > 0.000001 ) {\n        // standard case (slerp)\n        omega  = Math.acos(cosom);\n        sinom  = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    } else {\n        // \"from\" and \"to\" quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n};\n\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate inverse of\n * @returns {quat} out\n */\nquat.invert = function(out, a) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        dot = a0*a0 + a1*a1 + a2*a2 + a3*a3,\n        invDot = dot ? 1.0/dot : 0;\n\n    // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n    out[0] = -a0*invDot;\n    out[1] = -a1*invDot;\n    out[2] = -a2*invDot;\n    out[3] = a3*invDot;\n    return out;\n};\n\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quat to calculate conjugate of\n * @returns {quat} out\n */\nquat.conjugate = function (out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Calculates the length of a quat\n *\n * @param {quat} a vector to calculate length of\n * @returns {Number} length of a\n * @function\n */\nquat.length = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].length;\n\n/**\n * Alias for {@link quat.length}\n * @function\n */\nquat.len = quat.length;\n\n/**\n * Calculates the squared length of a quat\n *\n * @param {quat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\nquat.squaredLength = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].squaredLength;\n\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\nquat.sqrLen = quat.squaredLength;\n\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {quat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\nquat.normalize = __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */].normalize;\n\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {mat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\nquat.fromMat3 = function(out, m) {\n    // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n    // article \"Quaternion Calculus and Fast Animation\".\n    var fTrace = m[0] + m[4] + m[8];\n    var fRoot;\n\n    if ( fTrace > 0.0 ) {\n        // |w| > 1/2, may as well choose w > 1/2\n        fRoot = Math.sqrt(fTrace + 1.0);  // 2w\n        out[3] = 0.5 * fRoot;\n        fRoot = 0.5/fRoot;  // 1/(4w)\n        out[0] = (m[5]-m[7])*fRoot;\n        out[1] = (m[6]-m[2])*fRoot;\n        out[2] = (m[1]-m[3])*fRoot;\n    } else {\n        // |w| <= 1/2\n        var i = 0;\n        if ( m[4] > m[0] )\n          i = 1;\n        if ( m[8] > m[i*3+i] )\n          i = 2;\n        var j = (i+1)%3;\n        var k = (i+2)%3;\n\n        fRoot = Math.sqrt(m[i*3+i]-m[j*3+j]-m[k*3+k] + 1.0);\n        out[i] = 0.5 * fRoot;\n        fRoot = 0.5 / fRoot;\n        out[3] = (m[j*3+k] - m[k*3+j]) * fRoot;\n        out[j] = (m[j*3+i] + m[i*3+j]) * fRoot;\n        out[k] = (m[k*3+i] + m[i*3+k]) * fRoot;\n    }\n\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (quat);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L3F1YXQuanM/MzM3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLyogQ29weXJpZ2h0IChjKSAyMDEzLCBCcmFuZG9uIEpvbmVzLCBDb2xpbiBNYWNLZW56aWUgSVYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG5hcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbkFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG5XQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUlxuQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4oSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG5MT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbkFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4oSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuICovXG5cbmltcG9ydCB7IEdMTUFUX0FSUkFZX1RZUEUgfSBmcm9tICcuL2NvbW1vbic7XG5pbXBvcnQgdmVjMyBmcm9tICcuL3ZlYzMnO1xuaW1wb3J0IHZlYzQgZnJvbSAnLi92ZWM0JztcbmltcG9ydCBtYXQzIGZyb20gJy4vbWF0Myc7XG5cblxuLyoqXG4gKiBAY2xhc3MgUXVhdGVybmlvblxuICogQG5hbWUgcXVhdFxuICovXG5cbnZhciBxdWF0ID0ge307XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBpZGVudGl0eSBxdWF0XG4gKlxuICogQHJldHVybnMge3F1YXR9IGEgbmV3IHF1YXRlcm5pb25cbiAqL1xucXVhdC5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoNCk7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXRzIGEgcXVhdGVybmlvbiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gb25lXG4gKiB2ZWN0b3IgdG8gYW5vdGhlci5cbiAqXG4gKiBCb3RoIHZlY3RvcnMgYXJlIGFzc3VtZWQgdG8gYmUgdW5pdCBsZW5ndGguXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uLlxuICogQHBhcmFtIHt2ZWMzfSBhIHRoZSBpbml0aWFsIHZlY3RvclxuICogQHBhcmFtIHt2ZWMzfSBiIHRoZSBkZXN0aW5hdGlvbiB2ZWN0b3JcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5yb3RhdGlvblRvID0gKGZ1bmN0aW9uKCkge1xuICAgIHZhciB0bXB2ZWMzID0gdmVjMy5jcmVhdGUoKTtcbiAgICB2YXIgeFVuaXRWZWMzID0gdmVjMy5mcm9tVmFsdWVzKDEsMCwwKTtcbiAgICB2YXIgeVVuaXRWZWMzID0gdmVjMy5mcm9tVmFsdWVzKDAsMSwwKTtcblxuICAgIHJldHVybiBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICAgICAgdmFyIGRvdCA9IHZlYzMuZG90KGEsIGIpO1xuICAgICAgICBpZiAoZG90IDwgLTAuOTk5OTk5KSB7XG4gICAgICAgICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIHhVbml0VmVjMywgYSk7XG4gICAgICAgICAgICBpZiAodmVjMy5sZW5ndGgodG1wdmVjMykgPCAwLjAwMDAwMSlcbiAgICAgICAgICAgICAgICB2ZWMzLmNyb3NzKHRtcHZlYzMsIHlVbml0VmVjMywgYSk7XG4gICAgICAgICAgICB2ZWMzLm5vcm1hbGl6ZSh0bXB2ZWMzLCB0bXB2ZWMzKTtcbiAgICAgICAgICAgIHF1YXQuc2V0QXhpc0FuZ2xlKG91dCwgdG1wdmVjMywgTWF0aC5QSSk7XG4gICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICB9IGVsc2UgaWYgKGRvdCA+IDAuOTk5OTk5KSB7XG4gICAgICAgICAgICBvdXRbMF0gPSAwO1xuICAgICAgICAgICAgb3V0WzFdID0gMDtcbiAgICAgICAgICAgIG91dFsyXSA9IDA7XG4gICAgICAgICAgICBvdXRbM10gPSAxO1xuICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZlYzMuY3Jvc3ModG1wdmVjMywgYSwgYik7XG4gICAgICAgICAgICBvdXRbMF0gPSB0bXB2ZWMzWzBdO1xuICAgICAgICAgICAgb3V0WzFdID0gdG1wdmVjM1sxXTtcbiAgICAgICAgICAgIG91dFsyXSA9IHRtcHZlYzNbMl07XG4gICAgICAgICAgICBvdXRbM10gPSAxICsgZG90O1xuICAgICAgICAgICAgcmV0dXJuIHF1YXQubm9ybWFsaXplKG91dCwgb3V0KTtcbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuXG4vKipcbiAqIFNldHMgdGhlIHNwZWNpZmllZCBxdWF0ZXJuaW9uIHdpdGggdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuXG4gKiBheGVzLiBFYWNoIGF4aXMgaXMgYSB2ZWMzIGFuZCBpcyBleHBlY3RlZCB0byBiZSB1bml0IGxlbmd0aCBhbmRcbiAqIHBlcnBlbmRpY3VsYXIgdG8gYWxsIG90aGVyIHNwZWNpZmllZCBheGVzLlxuICpcbiAqIEBwYXJhbSB7dmVjM30gdmlldyAgdGhlIHZlY3RvciByZXByZXNlbnRpbmcgdGhlIHZpZXdpbmcgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge3ZlYzN9IHJpZ2h0IHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInJpZ2h0XCIgZGlyZWN0aW9uXG4gKiBAcGFyYW0ge3ZlYzN9IHVwICAgIHRoZSB2ZWN0b3IgcmVwcmVzZW50aW5nIHRoZSBsb2NhbCBcInVwXCIgZGlyZWN0aW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQuc2V0QXhlcyA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgbWF0ciA9IG1hdDMuY3JlYXRlKCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24ob3V0LCB2aWV3LCByaWdodCwgdXApIHtcbiAgICAgICAgbWF0clswXSA9IHJpZ2h0WzBdO1xuICAgICAgICBtYXRyWzNdID0gcmlnaHRbMV07XG4gICAgICAgIG1hdHJbNl0gPSByaWdodFsyXTtcblxuICAgICAgICBtYXRyWzFdID0gdXBbMF07XG4gICAgICAgIG1hdHJbNF0gPSB1cFsxXTtcbiAgICAgICAgbWF0cls3XSA9IHVwWzJdO1xuXG4gICAgICAgIG1hdHJbMl0gPSAtdmlld1swXTtcbiAgICAgICAgbWF0cls1XSA9IC12aWV3WzFdO1xuICAgICAgICBtYXRyWzhdID0gLXZpZXdbMl07XG5cbiAgICAgICAgcmV0dXJuIHF1YXQubm9ybWFsaXplKG91dCwgcXVhdC5mcm9tTWF0MyhvdXQsIG1hdHIpKTtcbiAgICB9O1xufSkoKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHF1YXQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBxdWF0ZXJuaW9uXG4gKlxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXRlcm5pb24gdG8gY2xvbmVcbiAqIEByZXR1cm5zIHtxdWF0fSBhIG5ldyBxdWF0ZXJuaW9uXG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5jbG9uZSA9IHZlYzQuY2xvbmU7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBxdWF0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7cXVhdH0gYSBuZXcgcXVhdGVybmlvblxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuZnJvbVZhbHVlcyA9IHZlYzQuZnJvbVZhbHVlcztcblxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgcXVhdCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3F1YXR9IGEgdGhlIHNvdXJjZSBxdWF0ZXJuaW9uXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5jb3B5ID0gdmVjNC5jb3B5O1xuXG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHF1YXQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtOdW1iZXJ9IHggWCBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFkgY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geiBaIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHcgVyBjb21wb25lbnRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LnNldCA9IHZlYzQuc2V0O1xuXG4vKipcbiAqIFNldCBhIHF1YXQgdG8gdGhlIGlkZW50aXR5IHF1YXRlcm5pb25cbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG91dFswXSA9IDA7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0cyBhIHF1YXQgZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYW5kIHJvdGF0aW9uIGF4aXMsXG4gKiB0aGVuIHJldHVybnMgaXQuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3ZlYzN9IGF4aXMgdGhlIGF4aXMgYXJvdW5kIHdoaWNoIHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgaW4gcmFkaWFuc1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICoqL1xucXVhdC5zZXRBeGlzQW5nbGUgPSBmdW5jdGlvbihvdXQsIGF4aXMsIHJhZCkge1xuICAgIHJhZCA9IHJhZCAqIDAuNTtcbiAgICB2YXIgcyA9IE1hdGguc2luKHJhZCk7XG4gICAgb3V0WzBdID0gcyAqIGF4aXNbMF07XG4gICAgb3V0WzFdID0gcyAqIGF4aXNbMV07XG4gICAgb3V0WzJdID0gcyAqIGF4aXNbMl07XG4gICAgb3V0WzNdID0gTWF0aC5jb3MocmFkKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBZGRzIHR3byBxdWF0J3NcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtxdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3F1YXR9IG91dFxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQuYWRkID0gdmVjNC5hZGQ7XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge3F1YXR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7cXVhdH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5tdWx0aXBseSA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZhciBheCA9IGFbMF0sIGF5ID0gYVsxXSwgYXogPSBhWzJdLCBhdyA9IGFbM10sXG4gICAgICAgIGJ4ID0gYlswXSwgYnkgPSBiWzFdLCBieiA9IGJbMl0sIGJ3ID0gYlszXTtcblxuICAgIG91dFswXSA9IGF4ICogYncgKyBhdyAqIGJ4ICsgYXkgKiBieiAtIGF6ICogYnk7XG4gICAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBiejtcbiAgICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4O1xuICAgIG91dFszXSA9IGF3ICogYncgLSBheCAqIGJ4IC0gYXkgKiBieSAtIGF6ICogYno7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0Lm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQubXVsID0gcXVhdC5tdWx0aXBseTtcblxuLyoqXG4gKiBTY2FsZXMgYSBxdWF0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3F1YXR9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LnNjYWxlID0gdmVjNC5zY2FsZTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgcXVhdGVybmlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHF1YXQgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IHJhZCBhbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQucm90YXRlWCA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHJhZCAqPSAwLjU7XG5cbiAgICB2YXIgYXggPSBhWzBdLCBheSA9IGFbMV0sIGF6ID0gYVsyXSwgYXcgPSBhWzNdLFxuICAgICAgICBieCA9IE1hdGguc2luKHJhZCksIGJ3ID0gTWF0aC5jb3MocmFkKTtcblxuICAgIG91dFswXSA9IGF4ICogYncgKyBhdyAqIGJ4O1xuICAgIG91dFsxXSA9IGF5ICogYncgKyBheiAqIGJ4O1xuICAgIG91dFsyXSA9IGF6ICogYncgLSBheSAqIGJ4O1xuICAgIG91dFszXSA9IGF3ICogYncgLSBheCAqIGJ4O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJvdGF0ZXMgYSBxdWF0ZXJuaW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWSBheGlzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgcXVhdCByZWNlaXZpbmcgb3BlcmF0aW9uIHJlc3VsdFxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXQgdG8gcm90YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gcmFkIGFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGVcbiAqIEByZXR1cm5zIHtxdWF0fSBvdXRcbiAqL1xucXVhdC5yb3RhdGVZID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgcmFkICo9IDAuNTtcblxuICAgIHZhciBheCA9IGFbMF0sIGF5ID0gYVsxXSwgYXogPSBhWzJdLCBhdyA9IGFbM10sXG4gICAgICAgIGJ5ID0gTWF0aC5zaW4ocmFkKSwgYncgPSBNYXRoLmNvcyhyYWQpO1xuXG4gICAgb3V0WzBdID0gYXggKiBidyAtIGF6ICogYnk7XG4gICAgb3V0WzFdID0gYXkgKiBidyArIGF3ICogYnk7XG4gICAgb3V0WzJdID0gYXogKiBidyArIGF4ICogYnk7XG4gICAgb3V0WzNdID0gYXcgKiBidyAtIGF5ICogYnk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIHF1YXRlcm5pb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBaIGF4aXNcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCBxdWF0IHJlY2VpdmluZyBvcGVyYXRpb24gcmVzdWx0XG4gKiBAcGFyYW0ge3F1YXR9IGEgcXVhdCB0byByb3RhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSByYWQgYW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZVxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LnJvdGF0ZVogPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICByYWQgKj0gMC41O1xuXG4gICAgdmFyIGF4ID0gYVswXSwgYXkgPSBhWzFdLCBheiA9IGFbMl0sIGF3ID0gYVszXSxcbiAgICAgICAgYnogPSBNYXRoLnNpbihyYWQpLCBidyA9IE1hdGguY29zKHJhZCk7XG5cbiAgICBvdXRbMF0gPSBheCAqIGJ3ICsgYXkgKiBiejtcbiAgICBvdXRbMV0gPSBheSAqIGJ3IC0gYXggKiBiejtcbiAgICBvdXRbMl0gPSBheiAqIGJ3ICsgYXcgKiBiejtcbiAgICBvdXRbM10gPSBhdyAqIGJ3IC0gYXogKiBiejtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBXIGNvbXBvbmVudCBvZiBhIHF1YXQgZnJvbSB0aGUgWCwgWSwgYW5kIFogY29tcG9uZW50cy5cbiAqIEFzc3VtZXMgdGhhdCBxdWF0ZXJuaW9uIGlzIDEgdW5pdCBpbiBsZW5ndGguXG4gKiBBbnkgZXhpc3RpbmcgVyBjb21wb25lbnQgd2lsbCBiZSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIFcgY29tcG9uZW50IG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQuY2FsY3VsYXRlVyA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICB2YXIgeCA9IGFbMF0sIHkgPSBhWzFdLCB6ID0gYVsyXTtcblxuICAgIG91dFswXSA9IHg7XG4gICAgb3V0WzFdID0geTtcbiAgICBvdXRbMl0gPSB6O1xuICAgIG91dFszXSA9IE1hdGguc3FydChNYXRoLmFicygxLjAgLSB4ICogeCAtIHkgKiB5IC0geiAqIHopKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gcXVhdCdzXG4gKlxuICogQHBhcmFtIHtxdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3F1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5kb3QgPSB2ZWM0LmRvdDtcblxuLyoqXG4gKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXQnc1xuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3F1YXR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcGFyYW0ge051bWJlcn0gdCBpbnRlcnBvbGF0aW9uIGFtb3VudCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5sZXJwID0gdmVjNC5sZXJwO1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHtxdWF0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LnNsZXJwID0gZnVuY3Rpb24gKG91dCwgYSwgYiwgdCkge1xuICAgIC8vIGJlbmNobWFya3M6XG4gICAgLy8gICAgaHR0cDovL2pzcGVyZi5jb20vcXVhdGVybmlvbi1zbGVycC1pbXBsZW1lbnRhdGlvbnNcblxuICAgIHZhciBheCA9IGFbMF0sIGF5ID0gYVsxXSwgYXogPSBhWzJdLCBhdyA9IGFbM10sXG4gICAgICAgIGJ4ID0gYlswXSwgYnkgPSBiWzFdLCBieiA9IGJbMl0sIGJ3ID0gYlszXTtcblxuICAgIHZhciAgICAgICAgb21lZ2EsIGNvc29tLCBzaW5vbSwgc2NhbGUwLCBzY2FsZTE7XG5cbiAgICAvLyBjYWxjIGNvc2luZVxuICAgIGNvc29tID0gYXggKiBieCArIGF5ICogYnkgKyBheiAqIGJ6ICsgYXcgKiBidztcbiAgICAvLyBhZGp1c3Qgc2lnbnMgKGlmIG5lY2Vzc2FyeSlcbiAgICBpZiAoIGNvc29tIDwgMC4wICkge1xuICAgICAgICBjb3NvbSA9IC1jb3NvbTtcbiAgICAgICAgYnggPSAtIGJ4O1xuICAgICAgICBieSA9IC0gYnk7XG4gICAgICAgIGJ6ID0gLSBiejtcbiAgICAgICAgYncgPSAtIGJ3O1xuICAgIH1cbiAgICAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG4gICAgaWYgKCAoMS4wIC0gY29zb20pID4gMC4wMDAwMDEgKSB7XG4gICAgICAgIC8vIHN0YW5kYXJkIGNhc2UgKHNsZXJwKVxuICAgICAgICBvbWVnYSAgPSBNYXRoLmFjb3MoY29zb20pO1xuICAgICAgICBzaW5vbSAgPSBNYXRoLnNpbihvbWVnYSk7XG4gICAgICAgIHNjYWxlMCA9IE1hdGguc2luKCgxLjAgLSB0KSAqIG9tZWdhKSAvIHNpbm9tO1xuICAgICAgICBzY2FsZTEgPSBNYXRoLnNpbih0ICogb21lZ2EpIC8gc2lub207XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gXCJmcm9tXCIgYW5kIFwidG9cIiBxdWF0ZXJuaW9ucyBhcmUgdmVyeSBjbG9zZVxuICAgICAgICAvLyAgLi4uIHNvIHdlIGNhbiBkbyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uXG4gICAgICAgIHNjYWxlMCA9IDEuMCAtIHQ7XG4gICAgICAgIHNjYWxlMSA9IHQ7XG4gICAgfVxuICAgIC8vIGNhbGN1bGF0ZSBmaW5hbCB2YWx1ZXNcbiAgICBvdXRbMF0gPSBzY2FsZTAgKiBheCArIHNjYWxlMSAqIGJ4O1xuICAgIG91dFsxXSA9IHNjYWxlMCAqIGF5ICsgc2NhbGUxICogYnk7XG4gICAgb3V0WzJdID0gc2NhbGUwICogYXogKyBzY2FsZTEgKiBiejtcbiAgICBvdXRbM10gPSBzY2FsZTAgKiBhdyArIHNjYWxlMSAqIGJ3O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgaW52ZXJzZSBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IG91dCB0aGUgcmVjZWl2aW5nIHF1YXRlcm5pb25cbiAqIEBwYXJhbSB7cXVhdH0gYSBxdWF0IHRvIGNhbGN1bGF0ZSBpbnZlcnNlIG9mXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKi9cbnF1YXQuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGEwID0gYVswXSwgYTEgPSBhWzFdLCBhMiA9IGFbMl0sIGEzID0gYVszXSxcbiAgICAgICAgZG90ID0gYTAqYTAgKyBhMSphMSArIGEyKmEyICsgYTMqYTMsXG4gICAgICAgIGludkRvdCA9IGRvdCA/IDEuMC9kb3QgOiAwO1xuXG4gICAgLy8gVE9ETzogV291bGQgYmUgZmFzdGVyIHRvIHJldHVybiBbMCwwLDAsMF0gaW1tZWRpYXRlbHkgaWYgZG90ID09IDBcblxuICAgIG91dFswXSA9IC1hMCppbnZEb3Q7XG4gICAgb3V0WzFdID0gLWExKmludkRvdDtcbiAgICBvdXRbMl0gPSAtYTIqaW52RG90O1xuICAgIG91dFszXSA9IGEzKmludkRvdDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2YgYSBxdWF0XG4gKiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLCB0aGlzIGZ1bmN0aW9uIGlzIGZhc3RlciB0aGFuIHF1YXQuaW52ZXJzZSBhbmQgcHJvZHVjZXMgdGhlIHNhbWUgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXQgdG8gY2FsY3VsYXRlIGNvbmp1Z2F0ZSBvZlxuICogQHJldHVybnMge3F1YXR9IG91dFxuICovXG5xdWF0LmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSAtYVswXTtcbiAgICBvdXRbMV0gPSAtYVsxXTtcbiAgICBvdXRbMl0gPSAtYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiBhIHF1YXRcbiAqXG4gKiBAcGFyYW0ge3F1YXR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGxlbmd0aCBvZiBhXG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5sZW5ndGggPSB2ZWM0Lmxlbmd0aDtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHF1YXQubGVuZ3RofVxuICogQGZ1bmN0aW9uXG4gKi9cbnF1YXQubGVuID0gcXVhdC5sZW5ndGg7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgYSBxdWF0XG4gKlxuICogQHBhcmFtIHtxdWF0fSBhIHZlY3RvciB0byBjYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2ZcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IHNxdWFyZWQgbGVuZ3RoIG9mIGFcbiAqIEBmdW5jdGlvblxuICovXG5xdWF0LnNxdWFyZWRMZW5ndGggPSB2ZWM0LnNxdWFyZWRMZW5ndGg7XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBxdWF0LnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5zcXJMZW4gPSBxdWF0LnNxdWFyZWRMZW5ndGg7XG5cbi8qKlxuICogTm9ybWFsaXplIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7cXVhdH0gb3V0IHRoZSByZWNlaXZpbmcgcXVhdGVybmlvblxuICogQHBhcmFtIHtxdWF0fSBhIHF1YXRlcm5pb24gdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5ub3JtYWxpemUgPSB2ZWM0Lm5vcm1hbGl6ZTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgcXVhdGVybmlvbiBmcm9tIHRoZSBnaXZlbiAzeDMgcm90YXRpb24gbWF0cml4LlxuICpcbiAqIE5PVEU6IFRoZSByZXN1bHRhbnQgcXVhdGVybmlvbiBpcyBub3Qgbm9ybWFsaXplZCwgc28geW91IHNob3VsZCBiZSBzdXJlXG4gKiB0byByZW5vcm1hbGl6ZSB0aGUgcXVhdGVybmlvbiB5b3Vyc2VsZiB3aGVyZSBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtxdWF0fSBvdXQgdGhlIHJlY2VpdmluZyBxdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge21hdDN9IG0gcm90YXRpb24gbWF0cml4XG4gKiBAcmV0dXJucyB7cXVhdH0gb3V0XG4gKiBAZnVuY3Rpb25cbiAqL1xucXVhdC5mcm9tTWF0MyA9IGZ1bmN0aW9uKG91dCwgbSkge1xuICAgIC8vIEFsZ29yaXRobSBpbiBLZW4gU2hvZW1ha2UncyBhcnRpY2xlIGluIDE5ODcgU0lHR1JBUEggY291cnNlIG5vdGVzXG4gICAgLy8gYXJ0aWNsZSBcIlF1YXRlcm5pb24gQ2FsY3VsdXMgYW5kIEZhc3QgQW5pbWF0aW9uXCIuXG4gICAgdmFyIGZUcmFjZSA9IG1bMF0gKyBtWzRdICsgbVs4XTtcbiAgICB2YXIgZlJvb3Q7XG5cbiAgICBpZiAoIGZUcmFjZSA+IDAuMCApIHtcbiAgICAgICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMlxuICAgICAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxLjApOyAgLy8gMndcbiAgICAgICAgb3V0WzNdID0gMC41ICogZlJvb3Q7XG4gICAgICAgIGZSb290ID0gMC41L2ZSb290OyAgLy8gMS8oNHcpXG4gICAgICAgIG91dFswXSA9IChtWzVdLW1bN10pKmZSb290O1xuICAgICAgICBvdXRbMV0gPSAobVs2XS1tWzJdKSpmUm9vdDtcbiAgICAgICAgb3V0WzJdID0gKG1bMV0tbVszXSkqZlJvb3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gfHd8IDw9IDEvMlxuICAgICAgICB2YXIgaSA9IDA7XG4gICAgICAgIGlmICggbVs0XSA+IG1bMF0gKVxuICAgICAgICAgIGkgPSAxO1xuICAgICAgICBpZiAoIG1bOF0gPiBtW2kqMytpXSApXG4gICAgICAgICAgaSA9IDI7XG4gICAgICAgIHZhciBqID0gKGkrMSklMztcbiAgICAgICAgdmFyIGsgPSAoaSsyKSUzO1xuXG4gICAgICAgIGZSb290ID0gTWF0aC5zcXJ0KG1baSozK2ldLW1baiozK2pdLW1bayozK2tdICsgMS4wKTtcbiAgICAgICAgb3V0W2ldID0gMC41ICogZlJvb3Q7XG4gICAgICAgIGZSb290ID0gMC41IC8gZlJvb3Q7XG4gICAgICAgIG91dFszXSA9IChtW2oqMytrXSAtIG1bayozK2pdKSAqIGZSb290O1xuICAgICAgICBvdXRbal0gPSAobVtqKjMraV0gKyBtW2kqMytqXSkgKiBmUm9vdDtcbiAgICAgICAgb3V0W2tdID0gKG1bayozK2ldICsgbVtpKjMra10pICogZlJvb3Q7XG4gICAgfVxuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHF1YXQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L3F1YXQuanNcbi8vIG1vZHVsZSBpZCA9IDI3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///27\n");

/***/ }),
/* 28 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Camera__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__ = __webpack_require__(14);\n\n\n\n\n\n\n\n\n\nvar IDENTITY = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\nvar WORLDVIEW = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\n\nvar programKeyCache = {};\n\nfunction getProgramKey(lightNumbers) {\n    var defineStr = [];\n    var lightTypes = Object.keys(lightNumbers);\n    lightTypes.sort();\n    for (var i = 0; i < lightTypes.length; i++) {\n        var lightType = lightTypes[i];\n        defineStr.push(lightType + ' ' + lightNumbers[lightType]);\n    }\n    var key = defineStr.join('\\n');\n\n    if (programKeyCache[key]) {\n        return programKeyCache[key];\n    }\n\n    var id = __WEBPACK_IMPORTED_MODULE_4__core_util__[\"a\" /* default */].genGUID();\n    programKeyCache[key] = id;\n    return id;\n}\n\nfunction RenderList() {\n\n    this.opaque = [];\n    this.transparent = [];\n\n    this._opaqueCount = 0;\n    this._transparentCount = 0;\n}\n\nRenderList.prototype.startCount = function () {\n    this._opaqueCount = 0;\n    this._transparentCount = 0;\n};\n\nRenderList.prototype.add = function (object, isTransparent) {\n    if (isTransparent) {\n        this.transparent[this._transparentCount++] = object;\n    }\n    else {\n        this.opaque[this._opaqueCount++] = object;\n    }\n};\n\nRenderList.prototype.endCount = function () {\n    this.transparent.length = this._transparentCount;\n    this.opaque.length = this._opaqueCount;\n};\n\n/**\n * @typedef {Object} clay.Scene.RenderList\n * @property {Array.<clay.Renderable>} opaque\n * @property {Array.<clay.Renderable>} transparent\n */\n\n/**\n * @constructor clay.Scene\n * @extends clay.Node\n */\nvar Scene = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Scene# */ {\n        /**\n         * Global material of scene\n         * @type {clay.Material}\n         */\n        material: null,\n\n        lights: [],\n\n        /**\n         * Scene bounding box in view space.\n         * Used when camera needs to adujst the near and far plane automatically\n         * so that the view frustum contains the visible objects as tightly as possible.\n         * Notice:\n         *  It is updated after rendering (in the step of frustum culling passingly). So may be not so accurate, but saves a lot of calculation\n         *\n         * @type {clay.BoundingBox}\n         */\n        viewBoundingBoxLastFrame: new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */](),\n\n        // Uniforms for shadow map.\n        shadowUniforms: {},\n\n        _cameraList: [],\n\n        // Properties to save the light information in the scene\n        // Will be set in the render function\n        _lightUniforms: {},\n\n        _previousLightNumber: {},\n\n        _lightNumber: {\n            // groupId: {\n                // POINT_LIGHT: 0,\n                // DIRECTIONAL_LIGHT: 0,\n                // SPOT_LIGHT: 0,\n                // AMBIENT_LIGHT: 0,\n                // AMBIENT_SH_LIGHT: 0\n            // }\n        },\n\n        _lightProgramKeys: {},\n\n        _nodeRepository: {},\n\n        _renderLists: new __WEBPACK_IMPORTED_MODULE_6__core_LRU__[\"a\" /* default */](20)\n\n    };\n}, function () {\n    this._scene = this;\n},\n/** @lends clay.Scene.prototype. */\n{\n\n    // Add node to scene\n    addToScene: function (node) {\n        if (node instanceof __WEBPACK_IMPORTED_MODULE_2__Camera__[\"a\" /* default */]) {\n            if (this._cameraList.length > 0) {\n                console.warn('Found multiple camera in one scene. Use the fist one.');\n            }\n            this._cameraList.push(node);\n        }\n        else if (node instanceof __WEBPACK_IMPORTED_MODULE_1__Light__[\"a\" /* default */]) {\n            this.lights.push(node);\n        }\n        if (node.name) {\n            this._nodeRepository[node.name] = node;\n        }\n    },\n\n    // Remove node from scene\n    removeFromScene: function (node) {\n        var idx;\n        if (node instanceof __WEBPACK_IMPORTED_MODULE_2__Camera__[\"a\" /* default */]) {\n            idx = this._cameraList.indexOf(node);\n            if (idx >= 0) {\n                this._cameraList.splice(idx, 1);\n            }\n        }\n        else if (node instanceof __WEBPACK_IMPORTED_MODULE_1__Light__[\"a\" /* default */]) {\n            idx = this.lights.indexOf(node);\n            if (idx >= 0) {\n                this.lights.splice(idx, 1);\n            }\n        }\n        if (node.name) {\n            delete this._nodeRepository[node.name];\n        }\n    },\n\n    /**\n     * Get node by name\n     * @param  {string} name\n     * @return {Node}\n     * @DEPRECATED\n     */\n    getNode: function (name) {\n        return this._nodeRepository[name];\n    },\n\n    /**\n     * Set main camera of the scene.\n     * @param {claygl.Camera} camera\n     */\n    setMainCamera: function (camera) {\n        var idx = this._cameraList.indexOf(camera);\n        if (idx >= 0) {\n            this._cameraList.splice(idx, 1);\n        }\n        this._cameraList.unshift(camera);\n    },\n    /**\n     * Get main camera of the scene.\n     */\n    getMainCamera: function () {\n        return this._cameraList[0];\n    },\n\n    getLights: function () {\n        return this.lights;\n    },\n\n    updateLights: function () {\n        var lights = this.lights;\n        this._previousLightNumber = this._lightNumber;\n\n        var lightNumber = {};\n        for (var i = 0; i < lights.length; i++) {\n            var light = lights[i];\n            if (light.invisible) {\n                continue;\n            }\n            var group = light.group;\n            if (!lightNumber[group]) {\n                lightNumber[group] = {};\n            }\n            // User can use any type of light\n            lightNumber[group][light.type] = lightNumber[group][light.type] || 0;\n            lightNumber[group][light.type]++;\n        }\n        this._lightNumber = lightNumber;\n\n        for (var groupId in lightNumber) {\n            this._lightProgramKeys[groupId] = getProgramKey(lightNumber[groupId]);\n        }\n\n        this._updateLightUniforms();\n    },\n\n    /**\n     * Clone a node and it's children, including mesh, camera, light, etc.\n     * Unlike using `Node#clone`. It will clone skeleton and remap the joints. Material will also be cloned.\n     *\n     * @param {clay.Node} node\n     * @return {clay.Node}\n     */\n    cloneNode: function (node) {\n        var newNode = node.clone();\n        var clonedNodesMap = {};\n        function buildNodesMap(sNode, tNode) {\n            clonedNodesMap[sNode.__uid__] = tNode;\n\n            for (var i = 0; i < sNode._children.length; i++) {\n                var sChild = sNode._children[i];\n                var tChild = tNode._children[i];\n                buildNodesMap(sChild, tChild);\n            }\n        }\n        buildNodesMap(node, newNode);\n\n        newNode.traverse(function (newChild) {\n            if (newChild.skeleton) {\n                newChild.skeleton = newChild.skeleton.clone(clonedNodesMap);\n            }\n            if (newChild.material) {\n                newChild.material = newChild.material.clone();\n            }\n        });\n\n        return newNode;\n    },\n\n    /**\n     * Traverse the scene and add the renderable object to the render list.\n     * It needs camera for the frustum culling.\n     *\n     * @param {clay.Camera} camera\n     * @param {boolean} updateSceneBoundingBox\n     * @return {clay.Scene.RenderList}\n     */\n    updateRenderList: function (camera, updateSceneBoundingBox) {\n        var id = camera.__uid__;\n        var renderList = this._renderLists.get(id);\n        if (!renderList) {\n            renderList = new RenderList();\n            this._renderLists.put(id, renderList);\n        }\n        renderList.startCount();\n\n        if (updateSceneBoundingBox) {\n            this.viewBoundingBoxLastFrame.min.set(Infinity, Infinity, Infinity);\n            this.viewBoundingBoxLastFrame.max.set(-Infinity, -Infinity, -Infinity);\n        }\n\n        var sceneMaterialTransparent = this.material && this.material.transparent || false;\n        this._doUpdateRenderList(this, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox);\n\n        renderList.endCount();\n\n        return renderList;\n    },\n\n    /**\n     * Get render list. Used after {@link clay.Scene#updateRenderList}\n     * @param {clay.Camera} camera\n     * @return {clay.Scene.RenderList}\n     */\n    getRenderList: function (camera) {\n        return this._renderLists.get(camera.__uid__);\n    },\n\n    _doUpdateRenderList: function (parent, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox) {\n        if (parent.invisible) {\n            return;\n        }\n        // TODO Optimize\n        for (var i = 0; i < parent._children.length; i++) {\n            var child = parent._children[i];\n\n            if (child.isRenderable()) {\n                // Frustum culling\n                var worldM = child.isSkinnedMesh() ? IDENTITY : child.worldTransform.array;\n                var geometry = child.geometry;\n\n                __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(WORLDVIEW, camera.viewMatrix.array, worldM);\n                if (updateSceneBoundingBox && !geometry.boundingBox || !this.isFrustumCulled(child, camera, WORLDVIEW)) {\n                    renderList.add(child, child.material.transparent || sceneMaterialTransparent);\n                }\n            }\n            if (child._children.length > 0) {\n                this._doUpdateRenderList(child, camera, sceneMaterialTransparent, renderList, updateSceneBoundingBox);\n            }\n        }\n    },\n\n    /**\n     * If an scene object is culled by camera frustum\n     *\n     * Object can be a renderable or a light\n     *\n     * @param {clay.Node} object\n     * @param {clay.Camera} camera\n     * @param {Array.<number>} worldViewMat represented with array\n     * @param {Array.<number>} projectionMat represented with array\n     */\n    isFrustumCulled: (function () {\n        // Frustum culling\n        // http://www.cse.chalmers.se/~uffe/vfc_bbox.pdf\n        var cullingBoundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var cullingMatrix = new __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */]();\n        return function(object, camera, worldViewMat) {\n            // Bounding box can be a property of object(like light) or renderable.geometry\n            // PENDING\n            var geoBBox = object.boundingBox;\n            if (!geoBBox) {\n                if (object.skeleton && object.skeleton.boundingBox) {\n                    geoBBox = object.skeleton.boundingBox;\n                }\n                else {\n                    geoBBox = object.geometry.boundingBox;\n                }\n            }\n\n            if (!geoBBox) {\n                return false;\n            }\n\n            cullingMatrix.array = worldViewMat;\n            cullingBoundingBox.transformFrom(geoBBox, cullingMatrix);\n\n            // Passingly update the scene bounding box\n            // FIXME exclude very large mesh like ground plane or terrain ?\n            // FIXME Only rendererable which cast shadow ?\n\n            // FIXME boundingBox becomes much larger after transformd.\n            if (object.castShadow) {\n                this.viewBoundingBoxLastFrame.union(cullingBoundingBox);\n            }\n            // Ignore frustum culling if object is skinned mesh.\n            if (object.frustumCulling)  {\n                if (!cullingBoundingBox.intersectBoundingBox(camera.frustum.boundingBox)) {\n                    return true;\n                }\n\n                cullingMatrix.array = camera.projectionMatrix.array;\n                if (\n                    cullingBoundingBox.max.array[2] > 0 &&\n                    cullingBoundingBox.min.array[2] < 0\n                ) {\n                    // Clip in the near plane\n                    cullingBoundingBox.max.array[2] = -1e-20;\n                }\n\n                cullingBoundingBox.applyProjection(cullingMatrix);\n\n                var min = cullingBoundingBox.min.array;\n                var max = cullingBoundingBox.max.array;\n\n                if (\n                    max[0] < -1 || min[0] > 1\n                    || max[1] < -1 || min[1] > 1\n                    || max[2] < -1 || min[2] > 1\n                ) {\n                    return true;\n                }\n            }\n\n            return false;\n        };\n    })(),\n\n    _updateLightUniforms: function () {\n        var lights = this.lights;\n        // Put the light cast shadow before the light not cast shadow\n        lights.sort(lightSortFunc);\n\n        var lightUniforms = this._lightUniforms;\n        for (var group in lightUniforms) {\n            for (var symbol in lightUniforms[group]) {\n                lightUniforms[group][symbol].value.length = 0;\n            }\n        }\n        for (var i = 0; i < lights.length; i++) {\n\n            var light = lights[i];\n\n            if (light.invisible) {\n                continue;\n            }\n\n            var group = light.group;\n\n            for (var symbol in light.uniformTemplates) {\n                var uniformTpl = light.uniformTemplates[symbol];\n                var value = uniformTpl.value(light);\n                if (value == null) {\n                    continue;\n                }\n                if (!lightUniforms[group]) {\n                    lightUniforms[group] = {};\n                }\n                if (!lightUniforms[group][symbol]) {\n                    lightUniforms[group][symbol] = {\n                        type: '',\n                        value: []\n                    };\n                }\n                var lu = lightUniforms[group][symbol];\n                lu.type = uniformTpl.type + 'v';\n                switch (uniformTpl.type) {\n                    case '1i':\n                    case '1f':\n                    case 't':\n                        lu.value.push(value);\n                        break;\n                    case '2f':\n                    case '3f':\n                    case '4f':\n                        for (var j = 0; j < value.length; j++) {\n                            lu.value.push(value[j]);\n                        }\n                        break;\n                    default:\n                        console.error('Unkown light uniform type ' + uniformTpl.type);\n                }\n            }\n        }\n    },\n\n    getLightGroups: function () {\n        var lightGroups = [];\n        for (var groupId in this._lightNumber) {\n            lightGroups.push(groupId);\n        }\n        return lightGroups;\n    },\n\n    getNumberChangedLightGroups: function () {\n        var lightGroups = [];\n        for (var groupId in this._lightNumber) {\n            if (this.isLightNumberChanged(groupId)) {\n                lightGroups.push(groupId);\n            }\n        }\n        return lightGroups;\n    },\n\n    // Determine if light group is different with since last frame\n    // Used to determine whether to update shader and scene's uniforms in Renderer.render\n    isLightNumberChanged: function (lightGroup) {\n        var prevLightNumber = this._previousLightNumber;\n        var currentLightNumber = this._lightNumber;\n        // PENDING Performance\n        for (var type in currentLightNumber[lightGroup]) {\n            if (!prevLightNumber[lightGroup]) {\n                return true;\n            }\n            if (currentLightNumber[lightGroup][type] !== prevLightNumber[lightGroup][type]) {\n                return true;\n            }\n        }\n        for (var type in prevLightNumber[lightGroup]) {\n            if (!currentLightNumber[lightGroup]) {\n                return true;\n            }\n            if (currentLightNumber[lightGroup][type] !== prevLightNumber[lightGroup][type]) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    getLightsNumbers: function (lightGroup) {\n        return this._lightNumber[lightGroup];\n    },\n\n    getProgramKey: function (lightGroup) {\n        return this._lightProgramKeys[lightGroup];\n    },\n\n    setLightUniforms: (function () {\n        function setUniforms(uniforms, program, renderer) {\n            for (var symbol in uniforms) {\n                var lu = uniforms[symbol];\n                if (lu.type === 'tv') {\n                    if (!program.hasUniform(symbol)) {\n                        continue;\n                    }\n                    var texSlots = [];\n                    for (var i = 0; i < lu.value.length; i++) {\n                        var texture = lu.value[i];\n                        var slot = program.takeCurrentTextureSlot(renderer, texture);\n                        texSlots.push(slot);\n                    }\n                    program.setUniform(renderer.gl, '1iv', symbol, texSlots);\n                }\n                else {\n                    program.setUniform(renderer.gl, lu.type, symbol, lu.value);\n                }\n            }\n        }\n\n        return function (program, lightGroup, renderer) {\n            setUniforms(this._lightUniforms[lightGroup], program, renderer);\n            // Set shadows\n            setUniforms(this.shadowUniforms, program, renderer);\n        };\n    })(),\n\n    /**\n     * Dispose self, clear all the scene objects\n     * But resources of gl like texuture, shader will not be disposed.\n     * Mostly you should use disposeScene method in Renderer to do dispose.\n     */\n    dispose: function () {\n        this.material = null;\n        this._opaqueList = [];\n        this._transparentList = [];\n\n        this.lights = [];\n\n        this._lightUniforms = {};\n\n        this._lightNumber = {};\n        this._nodeRepository = {};\n    }\n});\n\nfunction lightSortFunc(a, b) {\n    if (b.castShadow && !a.castShadow) {\n        return true;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Scene);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1NjZW5lLmpzPzc5YTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCBMaWdodCBmcm9tICcuL0xpZ2h0JztcbmltcG9ydCBDYW1lcmEgZnJvbSAnLi9DYW1lcmEnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgdXRpbCBmcm9tICcuL2NvcmUvdXRpbCc7XG5pbXBvcnQgbWF0NCBmcm9tICcuL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IExSVUNhY2hlIGZyb20gJy4vY29yZS9MUlUnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi9tYXRoL01hdHJpeDQnO1xuXG52YXIgSURFTlRJVFkgPSBtYXQ0LmNyZWF0ZSgpO1xudmFyIFdPUkxEVklFVyA9IG1hdDQuY3JlYXRlKCk7XG5cbnZhciBwcm9ncmFtS2V5Q2FjaGUgPSB7fTtcblxuZnVuY3Rpb24gZ2V0UHJvZ3JhbUtleShsaWdodE51bWJlcnMpIHtcbiAgICB2YXIgZGVmaW5lU3RyID0gW107XG4gICAgdmFyIGxpZ2h0VHlwZXMgPSBPYmplY3Qua2V5cyhsaWdodE51bWJlcnMpO1xuICAgIGxpZ2h0VHlwZXMuc29ydCgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlnaHRUeXBlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbGlnaHRUeXBlID0gbGlnaHRUeXBlc1tpXTtcbiAgICAgICAgZGVmaW5lU3RyLnB1c2gobGlnaHRUeXBlICsgJyAnICsgbGlnaHROdW1iZXJzW2xpZ2h0VHlwZV0pO1xuICAgIH1cbiAgICB2YXIga2V5ID0gZGVmaW5lU3RyLmpvaW4oJ1xcbicpO1xuXG4gICAgaWYgKHByb2dyYW1LZXlDYWNoZVtrZXldKSB7XG4gICAgICAgIHJldHVybiBwcm9ncmFtS2V5Q2FjaGVba2V5XTtcbiAgICB9XG5cbiAgICB2YXIgaWQgPSB1dGlsLmdlbkdVSUQoKTtcbiAgICBwcm9ncmFtS2V5Q2FjaGVba2V5XSA9IGlkO1xuICAgIHJldHVybiBpZDtcbn1cblxuZnVuY3Rpb24gUmVuZGVyTGlzdCgpIHtcblxuICAgIHRoaXMub3BhcXVlID0gW107XG4gICAgdGhpcy50cmFuc3BhcmVudCA9IFtdO1xuXG4gICAgdGhpcy5fb3BhcXVlQ291bnQgPSAwO1xuICAgIHRoaXMuX3RyYW5zcGFyZW50Q291bnQgPSAwO1xufVxuXG5SZW5kZXJMaXN0LnByb3RvdHlwZS5zdGFydENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX29wYXF1ZUNvdW50ID0gMDtcbiAgICB0aGlzLl90cmFuc3BhcmVudENvdW50ID0gMDtcbn07XG5cblJlbmRlckxpc3QucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChvYmplY3QsIGlzVHJhbnNwYXJlbnQpIHtcbiAgICBpZiAoaXNUcmFuc3BhcmVudCkge1xuICAgICAgICB0aGlzLnRyYW5zcGFyZW50W3RoaXMuX3RyYW5zcGFyZW50Q291bnQrK10gPSBvYmplY3Q7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLm9wYXF1ZVt0aGlzLl9vcGFxdWVDb3VudCsrXSA9IG9iamVjdDtcbiAgICB9XG59O1xuXG5SZW5kZXJMaXN0LnByb3RvdHlwZS5lbmRDb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnRyYW5zcGFyZW50Lmxlbmd0aCA9IHRoaXMuX3RyYW5zcGFyZW50Q291bnQ7XG4gICAgdGhpcy5vcGFxdWUubGVuZ3RoID0gdGhpcy5fb3BhcXVlQ291bnQ7XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGNsYXkuU2NlbmUuUmVuZGVyTGlzdFxuICogQHByb3BlcnR5IHtBcnJheS48Y2xheS5SZW5kZXJhYmxlPn0gb3BhcXVlXG4gKiBAcHJvcGVydHkge0FycmF5LjxjbGF5LlJlbmRlcmFibGU+fSB0cmFuc3BhcmVudFxuICovXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuU2NlbmVcbiAqIEBleHRlbmRzIGNsYXkuTm9kZVxuICovXG52YXIgU2NlbmUgPSBOb2RlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5TY2VuZSMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogR2xvYmFsIG1hdGVyaWFsIG9mIHNjZW5lXG4gICAgICAgICAqIEB0eXBlIHtjbGF5Lk1hdGVyaWFsfVxuICAgICAgICAgKi9cbiAgICAgICAgbWF0ZXJpYWw6IG51bGwsXG5cbiAgICAgICAgbGlnaHRzOiBbXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2NlbmUgYm91bmRpbmcgYm94IGluIHZpZXcgc3BhY2UuXG4gICAgICAgICAqIFVzZWQgd2hlbiBjYW1lcmEgbmVlZHMgdG8gYWR1anN0IHRoZSBuZWFyIGFuZCBmYXIgcGxhbmUgYXV0b21hdGljYWxseVxuICAgICAgICAgKiBzbyB0aGF0IHRoZSB2aWV3IGZydXN0dW0gY29udGFpbnMgdGhlIHZpc2libGUgb2JqZWN0cyBhcyB0aWdodGx5IGFzIHBvc3NpYmxlLlxuICAgICAgICAgKiBOb3RpY2U6XG4gICAgICAgICAqICBJdCBpcyB1cGRhdGVkIGFmdGVyIHJlbmRlcmluZyAoaW4gdGhlIHN0ZXAgb2YgZnJ1c3R1bSBjdWxsaW5nIHBhc3NpbmdseSkuIFNvIG1heSBiZSBub3Qgc28gYWNjdXJhdGUsIGJ1dCBzYXZlcyBhIGxvdCBvZiBjYWxjdWxhdGlvblxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5Cb3VuZGluZ0JveH1cbiAgICAgICAgICovXG4gICAgICAgIHZpZXdCb3VuZGluZ0JveExhc3RGcmFtZTogbmV3IEJvdW5kaW5nQm94KCksXG5cbiAgICAgICAgLy8gVW5pZm9ybXMgZm9yIHNoYWRvdyBtYXAuXG4gICAgICAgIHNoYWRvd1VuaWZvcm1zOiB7fSxcblxuICAgICAgICBfY2FtZXJhTGlzdDogW10sXG5cbiAgICAgICAgLy8gUHJvcGVydGllcyB0byBzYXZlIHRoZSBsaWdodCBpbmZvcm1hdGlvbiBpbiB0aGUgc2NlbmVcbiAgICAgICAgLy8gV2lsbCBiZSBzZXQgaW4gdGhlIHJlbmRlciBmdW5jdGlvblxuICAgICAgICBfbGlnaHRVbmlmb3Jtczoge30sXG5cbiAgICAgICAgX3ByZXZpb3VzTGlnaHROdW1iZXI6IHt9LFxuXG4gICAgICAgIF9saWdodE51bWJlcjoge1xuICAgICAgICAgICAgLy8gZ3JvdXBJZDoge1xuICAgICAgICAgICAgICAgIC8vIFBPSU5UX0xJR0hUOiAwLFxuICAgICAgICAgICAgICAgIC8vIERJUkVDVElPTkFMX0xJR0hUOiAwLFxuICAgICAgICAgICAgICAgIC8vIFNQT1RfTElHSFQ6IDAsXG4gICAgICAgICAgICAgICAgLy8gQU1CSUVOVF9MSUdIVDogMCxcbiAgICAgICAgICAgICAgICAvLyBBTUJJRU5UX1NIX0xJR0hUOiAwXG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgX2xpZ2h0UHJvZ3JhbUtleXM6IHt9LFxuXG4gICAgICAgIF9ub2RlUmVwb3NpdG9yeToge30sXG5cbiAgICAgICAgX3JlbmRlckxpc3RzOiBuZXcgTFJVQ2FjaGUoMjApXG5cbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX3NjZW5lID0gdGhpcztcbn0sXG4vKiogQGxlbmRzIGNsYXkuU2NlbmUucHJvdG90eXBlLiAqL1xue1xuXG4gICAgLy8gQWRkIG5vZGUgdG8gc2NlbmVcbiAgICBhZGRUb1NjZW5lOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIENhbWVyYSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRm91bmQgbXVsdGlwbGUgY2FtZXJhIGluIG9uZSBzY2VuZS4gVXNlIHRoZSBmaXN0IG9uZS4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYUxpc3QucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlIGluc3RhbmNlb2YgTGlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMubGlnaHRzLnB1c2gobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUubmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fbm9kZVJlcG9zaXRvcnlbbm9kZS5uYW1lXSA9IG5vZGU7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIG5vZGUgZnJvbSBzY2VuZVxuICAgIHJlbW92ZUZyb21TY2VuZTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgdmFyIGlkeDtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBDYW1lcmEpIHtcbiAgICAgICAgICAgIGlkeCA9IHRoaXMuX2NhbWVyYUxpc3QuaW5kZXhPZihub2RlKTtcbiAgICAgICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2NhbWVyYUxpc3Quc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobm9kZSBpbnN0YW5jZW9mIExpZ2h0KSB7XG4gICAgICAgICAgICBpZHggPSB0aGlzLmxpZ2h0cy5pbmRleE9mKG5vZGUpO1xuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5saWdodHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUubmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuX25vZGVSZXBvc2l0b3J5W25vZGUubmFtZV07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IG5vZGUgYnkgbmFtZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm4ge05vZGV9XG4gICAgICogQERFUFJFQ0FURURcbiAgICAgKi9cbiAgICBnZXROb2RlOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbm9kZVJlcG9zaXRvcnlbbmFtZV07XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBtYWluIGNhbWVyYSBvZiB0aGUgc2NlbmUuXG4gICAgICogQHBhcmFtIHtjbGF5Z2wuQ2FtZXJhfSBjYW1lcmFcbiAgICAgKi9cbiAgICBzZXRNYWluQ2FtZXJhOiBmdW5jdGlvbiAoY2FtZXJhKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9jYW1lcmFMaXN0LmluZGV4T2YoY2FtZXJhKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmFMaXN0LnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NhbWVyYUxpc3QudW5zaGlmdChjYW1lcmEpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IG1haW4gY2FtZXJhIG9mIHRoZSBzY2VuZS5cbiAgICAgKi9cbiAgICBnZXRNYWluQ2FtZXJhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYW1lcmFMaXN0WzBdO1xuICAgIH0sXG5cbiAgICBnZXRMaWdodHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlnaHRzO1xuICAgIH0sXG5cbiAgICB1cGRhdGVMaWdodHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0cyA9IHRoaXMubGlnaHRzO1xuICAgICAgICB0aGlzLl9wcmV2aW91c0xpZ2h0TnVtYmVyID0gdGhpcy5fbGlnaHROdW1iZXI7XG5cbiAgICAgICAgdmFyIGxpZ2h0TnVtYmVyID0ge307XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGlnaHQgPSBsaWdodHNbaV07XG4gICAgICAgICAgICBpZiAobGlnaHQuaW52aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBsaWdodC5ncm91cDtcbiAgICAgICAgICAgIGlmICghbGlnaHROdW1iZXJbZ3JvdXBdKSB7XG4gICAgICAgICAgICAgICAgbGlnaHROdW1iZXJbZ3JvdXBdID0ge307XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVc2VyIGNhbiB1c2UgYW55IHR5cGUgb2YgbGlnaHRcbiAgICAgICAgICAgIGxpZ2h0TnVtYmVyW2dyb3VwXVtsaWdodC50eXBlXSA9IGxpZ2h0TnVtYmVyW2dyb3VwXVtsaWdodC50eXBlXSB8fCAwO1xuICAgICAgICAgICAgbGlnaHROdW1iZXJbZ3JvdXBdW2xpZ2h0LnR5cGVdKys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fbGlnaHROdW1iZXIgPSBsaWdodE51bWJlcjtcblxuICAgICAgICBmb3IgKHZhciBncm91cElkIGluIGxpZ2h0TnVtYmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9saWdodFByb2dyYW1LZXlzW2dyb3VwSWRdID0gZ2V0UHJvZ3JhbUtleShsaWdodE51bWJlcltncm91cElkXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl91cGRhdGVMaWdodFVuaWZvcm1zKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENsb25lIGEgbm9kZSBhbmQgaXQncyBjaGlsZHJlbiwgaW5jbHVkaW5nIG1lc2gsIGNhbWVyYSwgbGlnaHQsIGV0Yy5cbiAgICAgKiBVbmxpa2UgdXNpbmcgYE5vZGUjY2xvbmVgLiBJdCB3aWxsIGNsb25lIHNrZWxldG9uIGFuZCByZW1hcCB0aGUgam9pbnRzLiBNYXRlcmlhbCB3aWxsIGFsc28gYmUgY2xvbmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtjbGF5Lk5vZGV9IG5vZGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgY2xvbmVOb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICB2YXIgbmV3Tm9kZSA9IG5vZGUuY2xvbmUoKTtcbiAgICAgICAgdmFyIGNsb25lZE5vZGVzTWFwID0ge307XG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkTm9kZXNNYXAoc05vZGUsIHROb2RlKSB7XG4gICAgICAgICAgICBjbG9uZWROb2Rlc01hcFtzTm9kZS5fX3VpZF9fXSA9IHROb2RlO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNOb2RlLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBzQ2hpbGQgPSBzTm9kZS5fY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgdmFyIHRDaGlsZCA9IHROb2RlLl9jaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICBidWlsZE5vZGVzTWFwKHNDaGlsZCwgdENoaWxkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBidWlsZE5vZGVzTWFwKG5vZGUsIG5ld05vZGUpO1xuXG4gICAgICAgIG5ld05vZGUudHJhdmVyc2UoZnVuY3Rpb24gKG5ld0NoaWxkKSB7XG4gICAgICAgICAgICBpZiAobmV3Q2hpbGQuc2tlbGV0b24pIHtcbiAgICAgICAgICAgICAgICBuZXdDaGlsZC5za2VsZXRvbiA9IG5ld0NoaWxkLnNrZWxldG9uLmNsb25lKGNsb25lZE5vZGVzTWFwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdDaGlsZC5tYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIG5ld0NoaWxkLm1hdGVyaWFsID0gbmV3Q2hpbGQubWF0ZXJpYWwuY2xvbmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG5ld05vZGU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYXZlcnNlIHRoZSBzY2VuZSBhbmQgYWRkIHRoZSByZW5kZXJhYmxlIG9iamVjdCB0byB0aGUgcmVuZGVyIGxpc3QuXG4gICAgICogSXQgbmVlZHMgY2FtZXJhIGZvciB0aGUgZnJ1c3R1bSBjdWxsaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtjbGF5LkNhbWVyYX0gY2FtZXJhXG4gICAgICogQHBhcmFtIHtib29sZWFufSB1cGRhdGVTY2VuZUJvdW5kaW5nQm94XG4gICAgICogQHJldHVybiB7Y2xheS5TY2VuZS5SZW5kZXJMaXN0fVxuICAgICAqL1xuICAgIHVwZGF0ZVJlbmRlckxpc3Q6IGZ1bmN0aW9uIChjYW1lcmEsIHVwZGF0ZVNjZW5lQm91bmRpbmdCb3gpIHtcbiAgICAgICAgdmFyIGlkID0gY2FtZXJhLl9fdWlkX187XG4gICAgICAgIHZhciByZW5kZXJMaXN0ID0gdGhpcy5fcmVuZGVyTGlzdHMuZ2V0KGlkKTtcbiAgICAgICAgaWYgKCFyZW5kZXJMaXN0KSB7XG4gICAgICAgICAgICByZW5kZXJMaXN0ID0gbmV3IFJlbmRlckxpc3QoKTtcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlckxpc3RzLnB1dChpZCwgcmVuZGVyTGlzdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyTGlzdC5zdGFydENvdW50KCk7XG5cbiAgICAgICAgaWYgKHVwZGF0ZVNjZW5lQm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIHRoaXMudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lLm1pbi5zZXQoSW5maW5pdHksIEluZmluaXR5LCBJbmZpbml0eSk7XG4gICAgICAgICAgICB0aGlzLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZS5tYXguc2V0KC1JbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNjZW5lTWF0ZXJpYWxUcmFuc3BhcmVudCA9IHRoaXMubWF0ZXJpYWwgJiYgdGhpcy5tYXRlcmlhbC50cmFuc3BhcmVudCB8fCBmYWxzZTtcbiAgICAgICAgdGhpcy5fZG9VcGRhdGVSZW5kZXJMaXN0KHRoaXMsIGNhbWVyYSwgc2NlbmVNYXRlcmlhbFRyYW5zcGFyZW50LCByZW5kZXJMaXN0LCB1cGRhdGVTY2VuZUJvdW5kaW5nQm94KTtcblxuICAgICAgICByZW5kZXJMaXN0LmVuZENvdW50KCk7XG5cbiAgICAgICAgcmV0dXJuIHJlbmRlckxpc3Q7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCByZW5kZXIgbGlzdC4gVXNlZCBhZnRlciB7QGxpbmsgY2xheS5TY2VuZSN1cGRhdGVSZW5kZXJMaXN0fVxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqIEByZXR1cm4ge2NsYXkuU2NlbmUuUmVuZGVyTGlzdH1cbiAgICAgKi9cbiAgICBnZXRSZW5kZXJMaXN0OiBmdW5jdGlvbiAoY2FtZXJhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZW5kZXJMaXN0cy5nZXQoY2FtZXJhLl9fdWlkX18pO1xuICAgIH0sXG5cbiAgICBfZG9VcGRhdGVSZW5kZXJMaXN0OiBmdW5jdGlvbiAocGFyZW50LCBjYW1lcmEsIHNjZW5lTWF0ZXJpYWxUcmFuc3BhcmVudCwgcmVuZGVyTGlzdCwgdXBkYXRlU2NlbmVCb3VuZGluZ0JveCkge1xuICAgICAgICBpZiAocGFyZW50LmludmlzaWJsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE8gT3B0aW1pemVcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnQuX2NoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2hpbGQgPSBwYXJlbnQuX2NoaWxkcmVuW2ldO1xuXG4gICAgICAgICAgICBpZiAoY2hpbGQuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICAvLyBGcnVzdHVtIGN1bGxpbmdcbiAgICAgICAgICAgICAgICB2YXIgd29ybGRNID0gY2hpbGQuaXNTa2lubmVkTWVzaCgpID8gSURFTlRJVFkgOiBjaGlsZC53b3JsZFRyYW5zZm9ybS5hcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgZ2VvbWV0cnkgPSBjaGlsZC5nZW9tZXRyeTtcblxuICAgICAgICAgICAgICAgIG1hdDQubXVsdGlwbHlBZmZpbmUoV09STERWSUVXLCBjYW1lcmEudmlld01hdHJpeC5hcnJheSwgd29ybGRNKTtcbiAgICAgICAgICAgICAgICBpZiAodXBkYXRlU2NlbmVCb3VuZGluZ0JveCAmJiAhZ2VvbWV0cnkuYm91bmRpbmdCb3ggfHwgIXRoaXMuaXNGcnVzdHVtQ3VsbGVkKGNoaWxkLCBjYW1lcmEsIFdPUkxEVklFVykpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyTGlzdC5hZGQoY2hpbGQsIGNoaWxkLm1hdGVyaWFsLnRyYW5zcGFyZW50IHx8IHNjZW5lTWF0ZXJpYWxUcmFuc3BhcmVudCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNoaWxkLl9jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZG9VcGRhdGVSZW5kZXJMaXN0KGNoaWxkLCBjYW1lcmEsIHNjZW5lTWF0ZXJpYWxUcmFuc3BhcmVudCwgcmVuZGVyTGlzdCwgdXBkYXRlU2NlbmVCb3VuZGluZ0JveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgYW4gc2NlbmUgb2JqZWN0IGlzIGN1bGxlZCBieSBjYW1lcmEgZnJ1c3R1bVxuICAgICAqXG4gICAgICogT2JqZWN0IGNhbiBiZSBhIHJlbmRlcmFibGUgb3IgYSBsaWdodFxuICAgICAqXG4gICAgICogQHBhcmFtIHtjbGF5Lk5vZGV9IG9iamVjdFxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHdvcmxkVmlld01hdCByZXByZXNlbnRlZCB3aXRoIGFycmF5XG4gICAgICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gcHJvamVjdGlvbk1hdCByZXByZXNlbnRlZCB3aXRoIGFycmF5XG4gICAgICovXG4gICAgaXNGcnVzdHVtQ3VsbGVkOiAoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBGcnVzdHVtIGN1bGxpbmdcbiAgICAgICAgLy8gaHR0cDovL3d3dy5jc2UuY2hhbG1lcnMuc2UvfnVmZmUvdmZjX2Jib3gucGRmXG4gICAgICAgIHZhciBjdWxsaW5nQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIGN1bGxpbmdNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0LCBjYW1lcmEsIHdvcmxkVmlld01hdCkge1xuICAgICAgICAgICAgLy8gQm91bmRpbmcgYm94IGNhbiBiZSBhIHByb3BlcnR5IG9mIG9iamVjdChsaWtlIGxpZ2h0KSBvciByZW5kZXJhYmxlLmdlb21ldHJ5XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICB2YXIgZ2VvQkJveCA9IG9iamVjdC5ib3VuZGluZ0JveDtcbiAgICAgICAgICAgIGlmICghZ2VvQkJveCkge1xuICAgICAgICAgICAgICAgIGlmIChvYmplY3Quc2tlbGV0b24gJiYgb2JqZWN0LnNrZWxldG9uLmJvdW5kaW5nQm94KSB7XG4gICAgICAgICAgICAgICAgICAgIGdlb0JCb3ggPSBvYmplY3Quc2tlbGV0b24uYm91bmRpbmdCb3g7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBnZW9CQm94ID0gb2JqZWN0Lmdlb21ldHJ5LmJvdW5kaW5nQm94O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFnZW9CQm94KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjdWxsaW5nTWF0cml4LmFycmF5ID0gd29ybGRWaWV3TWF0O1xuICAgICAgICAgICAgY3VsbGluZ0JvdW5kaW5nQm94LnRyYW5zZm9ybUZyb20oZ2VvQkJveCwgY3VsbGluZ01hdHJpeCk7XG5cbiAgICAgICAgICAgIC8vIFBhc3NpbmdseSB1cGRhdGUgdGhlIHNjZW5lIGJvdW5kaW5nIGJveFxuICAgICAgICAgICAgLy8gRklYTUUgZXhjbHVkZSB2ZXJ5IGxhcmdlIG1lc2ggbGlrZSBncm91bmQgcGxhbmUgb3IgdGVycmFpbiA/XG4gICAgICAgICAgICAvLyBGSVhNRSBPbmx5IHJlbmRlcmVyYWJsZSB3aGljaCBjYXN0IHNoYWRvdyA/XG5cbiAgICAgICAgICAgIC8vIEZJWE1FIGJvdW5kaW5nQm94IGJlY29tZXMgbXVjaCBsYXJnZXIgYWZ0ZXIgdHJhbnNmb3JtZC5cbiAgICAgICAgICAgIGlmIChvYmplY3QuY2FzdFNoYWRvdykge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lLnVuaW9uKGN1bGxpbmdCb3VuZGluZ0JveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBJZ25vcmUgZnJ1c3R1bSBjdWxsaW5nIGlmIG9iamVjdCBpcyBza2lubmVkIG1lc2guXG4gICAgICAgICAgICBpZiAob2JqZWN0LmZydXN0dW1DdWxsaW5nKSAge1xuICAgICAgICAgICAgICAgIGlmICghY3VsbGluZ0JvdW5kaW5nQm94LmludGVyc2VjdEJvdW5kaW5nQm94KGNhbWVyYS5mcnVzdHVtLmJvdW5kaW5nQm94KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBjdWxsaW5nTWF0cml4LmFycmF5ID0gY2FtZXJhLnByb2plY3Rpb25NYXRyaXguYXJyYXk7XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBjdWxsaW5nQm91bmRpbmdCb3gubWF4LmFycmF5WzJdID4gMCAmJlxuICAgICAgICAgICAgICAgICAgICBjdWxsaW5nQm91bmRpbmdCb3gubWluLmFycmF5WzJdIDwgMFxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICAvLyBDbGlwIGluIHRoZSBuZWFyIHBsYW5lXG4gICAgICAgICAgICAgICAgICAgIGN1bGxpbmdCb3VuZGluZ0JveC5tYXguYXJyYXlbMl0gPSAtMWUtMjA7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY3VsbGluZ0JvdW5kaW5nQm94LmFwcGx5UHJvamVjdGlvbihjdWxsaW5nTWF0cml4KTtcblxuICAgICAgICAgICAgICAgIHZhciBtaW4gPSBjdWxsaW5nQm91bmRpbmdCb3gubWluLmFycmF5O1xuICAgICAgICAgICAgICAgIHZhciBtYXggPSBjdWxsaW5nQm91bmRpbmdCb3gubWF4LmFycmF5O1xuXG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgICBtYXhbMF0gPCAtMSB8fCBtaW5bMF0gPiAxXG4gICAgICAgICAgICAgICAgICAgIHx8IG1heFsxXSA8IC0xIHx8IG1pblsxXSA+IDFcbiAgICAgICAgICAgICAgICAgICAgfHwgbWF4WzJdIDwgLTEgfHwgbWluWzJdID4gMVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgX3VwZGF0ZUxpZ2h0VW5pZm9ybXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0cyA9IHRoaXMubGlnaHRzO1xuICAgICAgICAvLyBQdXQgdGhlIGxpZ2h0IGNhc3Qgc2hhZG93IGJlZm9yZSB0aGUgbGlnaHQgbm90IGNhc3Qgc2hhZG93XG4gICAgICAgIGxpZ2h0cy5zb3J0KGxpZ2h0U29ydEZ1bmMpO1xuXG4gICAgICAgIHZhciBsaWdodFVuaWZvcm1zID0gdGhpcy5fbGlnaHRVbmlmb3JtcztcbiAgICAgICAgZm9yICh2YXIgZ3JvdXAgaW4gbGlnaHRVbmlmb3Jtcykge1xuICAgICAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIGxpZ2h0VW5pZm9ybXNbZ3JvdXBdKSB7XG4gICAgICAgICAgICAgICAgbGlnaHRVbmlmb3Jtc1tncm91cF1bc3ltYm9sXS52YWx1ZS5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlnaHRzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgICAgICAgIHZhciBsaWdodCA9IGxpZ2h0c1tpXTtcblxuICAgICAgICAgICAgaWYgKGxpZ2h0LmludmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZ3JvdXAgPSBsaWdodC5ncm91cDtcblxuICAgICAgICAgICAgZm9yICh2YXIgc3ltYm9sIGluIGxpZ2h0LnVuaWZvcm1UZW1wbGF0ZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybVRwbCA9IGxpZ2h0LnVuaWZvcm1UZW1wbGF0ZXNbc3ltYm9sXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB1bmlmb3JtVHBsLnZhbHVlKGxpZ2h0KTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFsaWdodFVuaWZvcm1zW2dyb3VwXSkge1xuICAgICAgICAgICAgICAgICAgICBsaWdodFVuaWZvcm1zW2dyb3VwXSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWxpZ2h0VW5pZm9ybXNbZ3JvdXBdW3N5bWJvbF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbGlnaHRVbmlmb3Jtc1tncm91cF1bc3ltYm9sXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFtdXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBsdSA9IGxpZ2h0VW5pZm9ybXNbZ3JvdXBdW3N5bWJvbF07XG4gICAgICAgICAgICAgICAgbHUudHlwZSA9IHVuaWZvcm1UcGwudHlwZSArICd2JztcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHVuaWZvcm1UcGwudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICcxaSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzFmJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAndCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBsdS52YWx1ZS5wdXNoKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICcyZic6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJzNmJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnNGYnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2YWx1ZS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGx1LnZhbHVlLnB1c2godmFsdWVbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmtvd24gbGlnaHQgdW5pZm9ybSB0eXBlICcgKyB1bmlmb3JtVHBsLnR5cGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBnZXRMaWdodEdyb3VwczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGlnaHRHcm91cHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZ3JvdXBJZCBpbiB0aGlzLl9saWdodE51bWJlcikge1xuICAgICAgICAgICAgbGlnaHRHcm91cHMucHVzaChncm91cElkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGlnaHRHcm91cHM7XG4gICAgfSxcblxuICAgIGdldE51bWJlckNoYW5nZWRMaWdodEdyb3VwczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbGlnaHRHcm91cHMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgZ3JvdXBJZCBpbiB0aGlzLl9saWdodE51bWJlcikge1xuICAgICAgICAgICAgaWYgKHRoaXMuaXNMaWdodE51bWJlckNoYW5nZWQoZ3JvdXBJZCkpIHtcbiAgICAgICAgICAgICAgICBsaWdodEdyb3Vwcy5wdXNoKGdyb3VwSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaWdodEdyb3VwcztcbiAgICB9LFxuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIGxpZ2h0IGdyb3VwIGlzIGRpZmZlcmVudCB3aXRoIHNpbmNlIGxhc3QgZnJhbWVcbiAgICAvLyBVc2VkIHRvIGRldGVybWluZSB3aGV0aGVyIHRvIHVwZGF0ZSBzaGFkZXIgYW5kIHNjZW5lJ3MgdW5pZm9ybXMgaW4gUmVuZGVyZXIucmVuZGVyXG4gICAgaXNMaWdodE51bWJlckNoYW5nZWQ6IGZ1bmN0aW9uIChsaWdodEdyb3VwKSB7XG4gICAgICAgIHZhciBwcmV2TGlnaHROdW1iZXIgPSB0aGlzLl9wcmV2aW91c0xpZ2h0TnVtYmVyO1xuICAgICAgICB2YXIgY3VycmVudExpZ2h0TnVtYmVyID0gdGhpcy5fbGlnaHROdW1iZXI7XG4gICAgICAgIC8vIFBFTkRJTkcgUGVyZm9ybWFuY2VcbiAgICAgICAgZm9yICh2YXIgdHlwZSBpbiBjdXJyZW50TGlnaHROdW1iZXJbbGlnaHRHcm91cF0pIHtcbiAgICAgICAgICAgIGlmICghcHJldkxpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudExpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdW3R5cGVdICE9PSBwcmV2TGlnaHROdW1iZXJbbGlnaHRHcm91cF1bdHlwZV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKHZhciB0eXBlIGluIHByZXZMaWdodE51bWJlcltsaWdodEdyb3VwXSkge1xuICAgICAgICAgICAgaWYgKCFjdXJyZW50TGlnaHROdW1iZXJbbGlnaHRHcm91cF0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdXJyZW50TGlnaHROdW1iZXJbbGlnaHRHcm91cF1bdHlwZV0gIT09IHByZXZMaWdodE51bWJlcltsaWdodEdyb3VwXVt0eXBlXSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgZ2V0TGlnaHRzTnVtYmVyczogZnVuY3Rpb24gKGxpZ2h0R3JvdXApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpZ2h0TnVtYmVyW2xpZ2h0R3JvdXBdO1xuICAgIH0sXG5cbiAgICBnZXRQcm9ncmFtS2V5OiBmdW5jdGlvbiAobGlnaHRHcm91cCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlnaHRQcm9ncmFtS2V5c1tsaWdodEdyb3VwXTtcbiAgICB9LFxuXG4gICAgc2V0TGlnaHRVbmlmb3JtczogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnVuY3Rpb24gc2V0VW5pZm9ybXModW5pZm9ybXMsIHByb2dyYW0sIHJlbmRlcmVyKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBzeW1ib2wgaW4gdW5pZm9ybXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgbHUgPSB1bmlmb3Jtc1tzeW1ib2xdO1xuICAgICAgICAgICAgICAgIGlmIChsdS50eXBlID09PSAndHYnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvZ3JhbS5oYXNVbmlmb3JtKHN5bWJvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB0ZXhTbG90cyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGx1LnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IGx1LnZhbHVlW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNsb3QgPSBwcm9ncmFtLnRha2VDdXJyZW50VGV4dHVyZVNsb3QocmVuZGVyZXIsIHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4U2xvdHMucHVzaChzbG90KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0ocmVuZGVyZXIuZ2wsICcxaXYnLCBzeW1ib2wsIHRleFNsb3RzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybShyZW5kZXJlci5nbCwgbHUudHlwZSwgc3ltYm9sLCBsdS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwcm9ncmFtLCBsaWdodEdyb3VwLCByZW5kZXJlcikge1xuICAgICAgICAgICAgc2V0VW5pZm9ybXModGhpcy5fbGlnaHRVbmlmb3Jtc1tsaWdodEdyb3VwXSwgcHJvZ3JhbSwgcmVuZGVyZXIpO1xuICAgICAgICAgICAgLy8gU2V0IHNoYWRvd3NcbiAgICAgICAgICAgIHNldFVuaWZvcm1zKHRoaXMuc2hhZG93VW5pZm9ybXMsIHByb2dyYW0sIHJlbmRlcmVyKTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBzZWxmLCBjbGVhciBhbGwgdGhlIHNjZW5lIG9iamVjdHNcbiAgICAgKiBCdXQgcmVzb3VyY2VzIG9mIGdsIGxpa2UgdGV4dXR1cmUsIHNoYWRlciB3aWxsIG5vdCBiZSBkaXNwb3NlZC5cbiAgICAgKiBNb3N0bHkgeW91IHNob3VsZCB1c2UgZGlzcG9zZVNjZW5lIG1ldGhvZCBpbiBSZW5kZXJlciB0byBkbyBkaXNwb3NlLlxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5tYXRlcmlhbCA9IG51bGw7XG4gICAgICAgIHRoaXMuX29wYXF1ZUxpc3QgPSBbXTtcbiAgICAgICAgdGhpcy5fdHJhbnNwYXJlbnRMaXN0ID0gW107XG5cbiAgICAgICAgdGhpcy5saWdodHMgPSBbXTtcblxuICAgICAgICB0aGlzLl9saWdodFVuaWZvcm1zID0ge307XG5cbiAgICAgICAgdGhpcy5fbGlnaHROdW1iZXIgPSB7fTtcbiAgICAgICAgdGhpcy5fbm9kZVJlcG9zaXRvcnkgPSB7fTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gbGlnaHRTb3J0RnVuYyhhLCBiKSB7XG4gICAgaWYgKGIuY2FzdFNoYWRvdyAmJiAhYS5jYXN0U2hhZG93KSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2NlbmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvU2NlbmUuanNcbi8vIG1vZHVsZSBpZCA9IDI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///28\n");

/***/ }),
/* 29 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"c\"] = hue;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = gamma;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = nogamma;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__constant__ = __webpack_require__(118);\n\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nfunction hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n}\n\nfunction gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n  };\n}\n\nfunction nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : Object(__WEBPACK_IMPORTED_MODULE_0__constant__[\"a\" /* default */])(isNaN(a) ? b : a);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbG9yLmpzP2I2MDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbnN0YW50IGZyb20gXCIuL2NvbnN0YW50XCI7XG5cbmZ1bmN0aW9uIGxpbmVhcihhLCBkKSB7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyB0ICogZDtcbiAgfTtcbn1cblxuZnVuY3Rpb24gZXhwb25lbnRpYWwoYSwgYiwgeSkge1xuICByZXR1cm4gYSA9IE1hdGgucG93KGEsIHkpLCBiID0gTWF0aC5wb3coYiwgeSkgLSBhLCB5ID0gMSAvIHksIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coYSArIHQgKiBiLCB5KTtcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGh1ZShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQgPiAxODAgfHwgZCA8IC0xODAgPyBkIC0gMzYwICogTWF0aC5yb3VuZChkIC8gMzYwKSA6IGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnYW1tYSh5KSB7XG4gIHJldHVybiAoeSA9ICt5KSA9PT0gMSA/IG5vZ2FtbWEgOiBmdW5jdGlvbihhLCBiKSB7XG4gICAgcmV0dXJuIGIgLSBhID8gZXhwb25lbnRpYWwoYSwgYiwgeSkgOiBjb25zdGFudChpc05hTihhKSA/IGIgOiBhKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbm9nYW1tYShhLCBiKSB7XG4gIHZhciBkID0gYiAtIGE7XG4gIHJldHVybiBkID8gbGluZWFyKGEsIGQpIDogY29uc3RhbnQoaXNOYU4oYSkgPyBiIDogYSk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29\n");

/***/ }),
/* 30 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__easing__ = __webpack_require__(44);\n\n\nfunction noop () {}\n/**\n * @constructor\n * @alias clay.animation.Clip\n * @param {Object} [opts]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRate]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n */\nvar Clip = function (opts) {\n\n    opts = opts || {};\n\n    /**\n     * @type {string}\n     */\n    this.name = opts.name || '';\n\n    /**\n     * @type {Object}\n     */\n    this.target = opts.target;\n\n    /**\n     * @type {number}\n     */\n    this.life = opts.life || 1000;\n\n    /**\n     * @type {number}\n     */\n    this.delay = opts.delay || 0;\n\n    /**\n     * @type {number}\n     */\n    this.gap = opts.gap || 0;\n\n    /**\n     * @type {number}\n     */\n    this.playbackRate = opts.playbackRate || 1;\n\n\n    this._initialized = false;\n\n    this._elapsedTime = 0;\n\n    this._loop = opts.loop == null ? false : opts.loop;\n    this.setLoop(this._loop);\n\n    if (opts.easing != null) {\n        this.setEasing(opts.easing);\n    }\n\n    /**\n     * @type {Function}\n     */\n    this.onframe = opts.onframe || noop;\n\n    /**\n     * @type {Function}\n     */\n    this.onfinish = opts.onfinish || noop;\n\n    /**\n     * @type {Function}\n     */\n    this.onrestart = opts.onrestart || noop;\n\n    this._paused = false;\n};\n\nClip.prototype = {\n\n    gap: 0,\n\n    life: 0,\n\n    delay: 0,\n\n    /**\n     * @param {number|boolean} loop\n     */\n    setLoop: function (loop) {\n        this._loop = loop;\n        if (loop) {\n            if (typeof loop === 'number') {\n                this._loopRemained = loop;\n            }\n            else {\n                this._loopRemained = Infinity;\n            }\n        }\n    },\n\n    /**\n     * @param {string|Function} easing\n     */\n    setEasing: function (easing) {\n        if (typeof(easing) === 'string') {\n            easing = __WEBPACK_IMPORTED_MODULE_0__easing__[\"a\" /* default */][easing];\n        }\n        this.easing = easing;\n    },\n\n    /**\n     * @param  {number} time\n     * @return {string}\n     */\n    step: function (time, deltaTime, silent) {\n        if (!this._initialized) {\n            this._startTime = time + this.delay;\n            this._initialized = true;\n        }\n        if (this._currentTime != null) {\n            deltaTime = time - this._currentTime;\n        }\n        this._currentTime = time;\n\n        if (this._paused) {\n            return 'paused';\n        }\n\n        if (time < this._startTime) {\n            return;\n        }\n\n        // PENDIGN Sync ?\n        this._elapse(time, deltaTime);\n\n        var percent = Math.min(this._elapsedTime / this.life, 1);\n\n        if (percent < 0) {\n            return;\n        }\n\n        var schedule;\n        if (this.easing) {\n            schedule = this.easing(percent);\n        }\n        else {\n            schedule = percent;\n        }\n\n        if (!silent) {\n            this.fire('frame', schedule);\n        }\n\n        if (percent === 1) {\n            if (this._loop && this._loopRemained > 0) {\n                this._restartInLoop(time);\n                this._loopRemained--;\n                return 'restart';\n            }\n            else {\n                // Mark this clip to be deleted\n                // In the animation.update\n                this._needsRemove = true;\n\n                return 'finish';\n            }\n        }\n        else {\n            return null;\n        }\n    },\n\n    /**\n     * @param  {number} time\n     * @return {string}\n     */\n    setTime: function (time) {\n        return this.step(time + this._startTime);\n    },\n\n    restart: function (time) {\n        // If user leave the page for a while, when he gets back\n        // All clips may be expired and all start from the beginning value(position)\n        // It is clearly wrong, so we use remainder to add a offset\n\n        var remainder = 0;\n        // Remainder ignored if restart is invoked manually\n        if (time) {\n            this._elapse(time);\n            remainder = this._elapsedTime % this.life;\n        }\n        time = time || Date.now();\n\n        this._startTime = time - remainder + this.delay;\n        this._elapsedTime = 0;\n\n        this._needsRemove = false;\n        this._paused = false;\n    },\n\n    getElapsedTime: function () {\n        return this._elapsedTime;\n    },\n\n    _restartInLoop: function (time) {\n        this._startTime = time + this.gap;\n        this._elapsedTime = 0;\n    },\n\n    _elapse: function (time, deltaTime) {\n        this._elapsedTime += deltaTime * this.playbackRate;\n    },\n\n    fire: function (eventType, arg) {\n        var eventName = 'on' + eventType;\n        if (this[eventName]) {\n            this[eventName](this.target, arg);\n        }\n    },\n\n    clone: function () {\n        var clip = new this.constructor();\n        clip.name = this.name;\n        clip._loop = this._loop;\n        clip._loopRemained = this._loopRemained;\n\n        clip.life = this.life;\n        clip.gap = this.gap;\n        clip.delay = this.delay;\n\n        return clip;\n    },\n    /**\n     * Pause the clip.\n     */\n    pause: function () {\n        this._paused = true;\n    },\n\n    /**\n     * Resume the clip.\n     */\n    resume: function () {\n        this._paused = false;\n    }\n};\nClip.prototype.constructor = Clip;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Clip);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9DbGlwLmpzPzYzNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEVhc2luZyBmcm9tICcuL2Vhc2luZyc7XG5cbmZ1bmN0aW9uIG5vb3AgKCkge31cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hbmltYXRpb24uQ2xpcFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnRhcmdldF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5saWZlXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlbGF5XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmdhcF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5wbGF5YmFja1JhdGVdXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbb3B0cy5sb29wXSBJZiBsb29wIGlzIGEgbnVtYmVyLCBpdCBpbmRpY2F0ZSB0aGUgbG9vcCBjb3VudCBvZiBhbmltYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSBbb3B0cy5lYXNpbmddXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbmZyYW1lXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25maW5pc2hdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbnJlc3RhcnRdXG4gKi9cbnZhciBDbGlwID0gZnVuY3Rpb24gKG9wdHMpIHtcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLm5hbWUgPSBvcHRzLm5hbWUgfHwgJyc7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0ID0gb3B0cy50YXJnZXQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMubGlmZSA9IG9wdHMubGlmZSB8fCAxMDAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmRlbGF5ID0gb3B0cy5kZWxheSB8fCAwO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmdhcCA9IG9wdHMuZ2FwIHx8IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMucGxheWJhY2tSYXRlID0gb3B0cy5wbGF5YmFja1JhdGUgfHwgMTtcblxuXG4gICAgdGhpcy5faW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIHRoaXMuX2VsYXBzZWRUaW1lID0gMDtcblxuICAgIHRoaXMuX2xvb3AgPSBvcHRzLmxvb3AgPT0gbnVsbCA/IGZhbHNlIDogb3B0cy5sb29wO1xuICAgIHRoaXMuc2V0TG9vcCh0aGlzLl9sb29wKTtcblxuICAgIGlmIChvcHRzLmVhc2luZyAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2V0RWFzaW5nKG9wdHMuZWFzaW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5vbmZyYW1lID0gb3B0cy5vbmZyYW1lIHx8IG5vb3A7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgdGhpcy5vbmZpbmlzaCA9IG9wdHMub25maW5pc2ggfHwgbm9vcDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtGdW5jdGlvbn1cbiAgICAgKi9cbiAgICB0aGlzLm9ucmVzdGFydCA9IG9wdHMub25yZXN0YXJ0IHx8IG5vb3A7XG5cbiAgICB0aGlzLl9wYXVzZWQgPSBmYWxzZTtcbn07XG5cbkNsaXAucHJvdG90eXBlID0ge1xuXG4gICAgZ2FwOiAwLFxuXG4gICAgbGlmZTogMCxcblxuICAgIGRlbGF5OiAwLFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtudW1iZXJ8Ym9vbGVhbn0gbG9vcFxuICAgICAqL1xuICAgIHNldExvb3A6IGZ1bmN0aW9uIChsb29wKSB7XG4gICAgICAgIHRoaXMuX2xvb3AgPSBsb29wO1xuICAgICAgICBpZiAobG9vcCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBsb29wID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xvb3BSZW1haW5lZCA9IGxvb3A7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb29wUmVtYWluZWQgPSBJbmZpbml0eTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gZWFzaW5nXG4gICAgICovXG4gICAgc2V0RWFzaW5nOiBmdW5jdGlvbiAoZWFzaW5nKSB7XG4gICAgICAgIGlmICh0eXBlb2YoZWFzaW5nKSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGVhc2luZyA9IEVhc2luZ1tlYXNpbmddO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWFzaW5nID0gZWFzaW5nO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAgICovXG4gICAgc3RlcDogZnVuY3Rpb24gKHRpbWUsIGRlbHRhVGltZSwgc2lsZW50KSB7XG4gICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0VGltZSA9IHRpbWUgKyB0aGlzLmRlbGF5O1xuICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50VGltZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBkZWx0YVRpbWUgPSB0aW1lIC0gdGhpcy5fY3VycmVudFRpbWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY3VycmVudFRpbWUgPSB0aW1lO1xuXG4gICAgICAgIGlmICh0aGlzLl9wYXVzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAncGF1c2VkJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aW1lIDwgdGhpcy5fc3RhcnRUaW1lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQRU5ESUdOIFN5bmMgP1xuICAgICAgICB0aGlzLl9lbGFwc2UodGltZSwgZGVsdGFUaW1lKTtcblxuICAgICAgICB2YXIgcGVyY2VudCA9IE1hdGgubWluKHRoaXMuX2VsYXBzZWRUaW1lIC8gdGhpcy5saWZlLCAxKTtcblxuICAgICAgICBpZiAocGVyY2VudCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzY2hlZHVsZTtcbiAgICAgICAgaWYgKHRoaXMuZWFzaW5nKSB7XG4gICAgICAgICAgICBzY2hlZHVsZSA9IHRoaXMuZWFzaW5nKHBlcmNlbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc2NoZWR1bGUgPSBwZXJjZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzaWxlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuZmlyZSgnZnJhbWUnLCBzY2hlZHVsZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocGVyY2VudCA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xvb3AgJiYgdGhpcy5fbG9vcFJlbWFpbmVkID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jlc3RhcnRJbkxvb3AodGltZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbG9vcFJlbWFpbmVkLS07XG4gICAgICAgICAgICAgICAgcmV0dXJuICdyZXN0YXJ0JztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1hcmsgdGhpcyBjbGlwIHRvIGJlIGRlbGV0ZWRcbiAgICAgICAgICAgICAgICAvLyBJbiB0aGUgYW5pbWF0aW9uLnVwZGF0ZVxuICAgICAgICAgICAgICAgIHRoaXMuX25lZWRzUmVtb3ZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHJldHVybiAnZmluaXNoJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gdGltZVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBzZXRUaW1lOiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwKHRpbWUgKyB0aGlzLl9zdGFydFRpbWUpO1xuICAgIH0sXG5cbiAgICByZXN0YXJ0OiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICAvLyBJZiB1c2VyIGxlYXZlIHRoZSBwYWdlIGZvciBhIHdoaWxlLCB3aGVuIGhlIGdldHMgYmFja1xuICAgICAgICAvLyBBbGwgY2xpcHMgbWF5IGJlIGV4cGlyZWQgYW5kIGFsbCBzdGFydCBmcm9tIHRoZSBiZWdpbm5pbmcgdmFsdWUocG9zaXRpb24pXG4gICAgICAgIC8vIEl0IGlzIGNsZWFybHkgd3JvbmcsIHNvIHdlIHVzZSByZW1haW5kZXIgdG8gYWRkIGEgb2Zmc2V0XG5cbiAgICAgICAgdmFyIHJlbWFpbmRlciA9IDA7XG4gICAgICAgIC8vIFJlbWFpbmRlciBpZ25vcmVkIGlmIHJlc3RhcnQgaXMgaW52b2tlZCBtYW51YWxseVxuICAgICAgICBpZiAodGltZSkge1xuICAgICAgICAgICAgdGhpcy5fZWxhcHNlKHRpbWUpO1xuICAgICAgICAgICAgcmVtYWluZGVyID0gdGhpcy5fZWxhcHNlZFRpbWUgJSB0aGlzLmxpZmU7XG4gICAgICAgIH1cbiAgICAgICAgdGltZSA9IHRpbWUgfHwgRGF0ZS5ub3coKTtcblxuICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSB0aW1lIC0gcmVtYWluZGVyICsgdGhpcy5kZWxheTtcbiAgICAgICAgdGhpcy5fZWxhcHNlZFRpbWUgPSAwO1xuXG4gICAgICAgIHRoaXMuX25lZWRzUmVtb3ZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBnZXRFbGFwc2VkVGltZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWxhcHNlZFRpbWU7XG4gICAgfSxcblxuICAgIF9yZXN0YXJ0SW5Mb29wOiBmdW5jdGlvbiAodGltZSkge1xuICAgICAgICB0aGlzLl9zdGFydFRpbWUgPSB0aW1lICsgdGhpcy5nYXA7XG4gICAgICAgIHRoaXMuX2VsYXBzZWRUaW1lID0gMDtcbiAgICB9LFxuXG4gICAgX2VsYXBzZTogZnVuY3Rpb24gKHRpbWUsIGRlbHRhVGltZSkge1xuICAgICAgICB0aGlzLl9lbGFwc2VkVGltZSArPSBkZWx0YVRpbWUgKiB0aGlzLnBsYXliYWNrUmF0ZTtcbiAgICB9LFxuXG4gICAgZmlyZTogZnVuY3Rpb24gKGV2ZW50VHlwZSwgYXJnKSB7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSAnb24nICsgZXZlbnRUeXBlO1xuICAgICAgICBpZiAodGhpc1tldmVudE5hbWVdKSB7XG4gICAgICAgICAgICB0aGlzW2V2ZW50TmFtZV0odGhpcy50YXJnZXQsIGFyZyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNsaXAgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcigpO1xuICAgICAgICBjbGlwLm5hbWUgPSB0aGlzLm5hbWU7XG4gICAgICAgIGNsaXAuX2xvb3AgPSB0aGlzLl9sb29wO1xuICAgICAgICBjbGlwLl9sb29wUmVtYWluZWQgPSB0aGlzLl9sb29wUmVtYWluZWQ7XG5cbiAgICAgICAgY2xpcC5saWZlID0gdGhpcy5saWZlO1xuICAgICAgICBjbGlwLmdhcCA9IHRoaXMuZ2FwO1xuICAgICAgICBjbGlwLmRlbGF5ID0gdGhpcy5kZWxheTtcblxuICAgICAgICByZXR1cm4gY2xpcDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFBhdXNlIHRoZSBjbGlwLlxuICAgICAqL1xuICAgIHBhdXNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3BhdXNlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc3VtZSB0aGUgY2xpcC5cbiAgICAgKi9cbiAgICByZXN1bWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG4gICAgfVxufTtcbkNsaXAucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gQ2xpcDtcblxuZXhwb3J0IGRlZmF1bHQgQ2xpcDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vQ2xpcC5qc1xuLy8gbW9kdWxlIGlkID0gMzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///30\n");

/***/ }),
/* 31 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export vec4 */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 4 Dimensional Vector\n * @name vec4\n */\n\nvar vec4 = {};\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nvec4.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {vec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nvec4.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nvec4.fromValues = function(x, y, z, w) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the source vector\n * @returns {vec4} out\n */\nvec4.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nvec4.set = function(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n};\n\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nvec4.sub = vec4.subtract;\n\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nvec4.mul = vec4.multiply;\n\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n};\n\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nvec4.div = vec4.divide;\n\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {vec4} out\n */\nvec4.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n};\n\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nvec4.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n};\n\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nvec4.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    out[3] = a[3] + (b[3] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} distance between a and b\n */\nvec4.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return Math.sqrt(x*x + y*y + z*z + w*w);\n};\n\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nvec4.dist = vec4.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec4.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2],\n        w = b[3] - a[3];\n    return x*x + y*y + z*z + w*w;\n};\n\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nvec4.sqrDist = vec4.squaredDistance;\n\n/**\n * Calculates the length of a vec4\n *\n * @param {vec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec4.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return Math.sqrt(x*x + y*y + z*z + w*w);\n};\n\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nvec4.len = vec4.length;\n\n/**\n * Calculates the squared length of a vec4\n *\n * @param {vec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec4.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    return x*x + y*y + z*z + w*w;\n};\n\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nvec4.sqrLen = vec4.squaredLength;\n\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to negate\n * @returns {vec4} out\n */\nvec4.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to invert\n * @returns {vec4} out\n */\nvec4.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n};\n\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a vector to normalize\n * @returns {vec4} out\n */\nvec4.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2],\n        w = a[3];\n    var len = x*x + y*y + z*z + w*w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n        out[3] = a[3] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec4.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n};\n\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the first operand\n * @param {vec4} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec4} out\n */\nvec4.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2],\n        aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\nvec4.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    //TODO: This is a pretty awful way of doing this. Find something better.\n    out[0] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[1] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[2] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    out[3] = Object(__WEBPACK_IMPORTED_MODULE_0__common__[\"c\" /* GLMAT_RANDOM */])();\n    vec4.normalize(out, out);\n    vec4.scale(out, out, scale);\n    return out;\n};\n\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec4} out\n */\nvec4.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2], w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n};\n\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {vec4} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec4} out\n */\nvec4.transformQuat = function(out, a, q) {\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec4.forEach = (function() {\n    var vec = vec4.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 4;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2]; vec[3] = a[i+3];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2]; a[i+3] = vec[3];\n        }\n\n        return a;\n    };\n})();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec4);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L3ZlYzQuanM/YTg3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9SQU5ET00sIEdMTUFUX0FSUkFZX1RZUEUgfSBmcm9tICcuL2NvbW1vbic7XG5cbi8qKlxuICogQGNsYXNzIDQgRGltZW5zaW9uYWwgVmVjdG9yXG4gKiBAbmFtZSB2ZWM0XG4gKi9cblxuZXhwb3J0IHZhciB2ZWM0ID0ge307XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjNFxuICpcbiAqIEByZXR1cm5zIHt2ZWM0fSBhIG5ldyA0RCB2ZWN0b3JcbiAqL1xudmVjNC5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoNCk7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMDtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZlYzQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIGNsb25lXG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cbnZlYzQuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDQpO1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2ZWM0IGluaXRpYWxpemVkIHdpdGggdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSB4IFggY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0geSBZIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHogWiBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB3IFcgY29tcG9uZW50XG4gKiBAcmV0dXJucyB7dmVjNH0gYSBuZXcgNEQgdmVjdG9yXG4gKi9cbnZlYzQuZnJvbVZhbHVlcyA9IGZ1bmN0aW9uKHgsIHksIHosIHcpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoNCk7XG4gICAgb3V0WzBdID0geDtcbiAgICBvdXRbMV0gPSB5O1xuICAgIG91dFsyXSA9IHo7XG4gICAgb3V0WzNdID0gdztcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgdmVjNCB0byBhbm90aGVyXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgc291cmNlIHZlY3RvclxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzQgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEBwYXJhbSB7TnVtYmVyfSB6IFogY29tcG9uZW50XG4gKiBAcGFyYW0ge051bWJlcn0gdyBXIGNvbXBvbmVudFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnNldCA9IGZ1bmN0aW9uKG91dCwgeCwgeSwgeiwgdykge1xuICAgIG91dFswXSA9IHg7XG4gICAgb3V0WzFdID0geTtcbiAgICBvdXRbMl0gPSB6O1xuICAgIG91dFszXSA9IHc7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWRkcyB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LmFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICAgIG91dFsyXSA9IGFbMl0gKyBiWzJdO1xuICAgIG91dFszXSA9IGFbM10gKyBiWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnN1YnRyYWN0ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgb3V0WzJdID0gYVsyXSAtIGJbMl07XG4gICAgb3V0WzNdID0gYVszXSAtIGJbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQuc3ViID0gdmVjNC5zdWJ0cmFjdDtcblxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byB2ZWM0J3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQubXVsdGlwbHkgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgICBvdXRbMl0gPSBhWzJdICogYlsyXTtcbiAgICBvdXRbM10gPSBhWzNdICogYlszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjNC5tdWwgPSB2ZWM0Lm11bHRpcGx5O1xuXG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5kaXZpZGUgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgICBvdXRbMl0gPSBhWzJdIC8gYlsyXTtcbiAgICBvdXRbM10gPSBhWzNdIC8gYlszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQuZGl2ID0gdmVjNC5kaXZpZGU7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0Lm1pbiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIG91dFsyXSA9IE1hdGgubWluKGFbMl0sIGJbMl0pO1xuICAgIG91dFszXSA9IE1hdGgubWluKGFbM10sIGJbM10pO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzQnc1xuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5tYXggPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgICBvdXRbMl0gPSBNYXRoLm1heChhWzJdLCBiWzJdKTtcbiAgICBvdXRbM10gPSBNYXRoLm1heChhWzNdLCBiWzNdKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTY2FsZXMgYSB2ZWM0IGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHt2ZWM0fSBvdXRcbiAqL1xudmVjNC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKiBiO1xuICAgIG91dFsxXSA9IGFbMV0gKiBiO1xuICAgIG91dFsyXSA9IGFbMl0gKiBiO1xuICAgIG91dFszXSA9IGFbM10gKiBiO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFkZHMgdHdvIHZlYzQncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjNH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnNjYWxlQW5kQWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBzY2FsZSkge1xuICAgIG91dFswXSA9IGFbMF0gKyAoYlswXSAqIHNjYWxlKTtcbiAgICBvdXRbMV0gPSBhWzFdICsgKGJbMV0gKiBzY2FsZSk7XG4gICAgb3V0WzJdID0gYVsyXSArIChiWzJdICogc2NhbGUpO1xuICAgIG91dFszXSA9IGFbM10gKyAoYlszXSAqIHNjYWxlKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIGJcbiAqL1xudmVjNC5kaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgICB5ID0gYlsxXSAtIGFbMV0sXG4gICAgICAgIHogPSBiWzJdIC0gYVsyXSxcbiAgICAgICAgdyA9IGJbM10gLSBhWzNdO1xuICAgIHJldHVybiBNYXRoLnNxcnQoeCp4ICsgeSp5ICsgeip6ICsgdyp3KTtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWM0LmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQuZGlzdCA9IHZlYzQuZGlzdGFuY2U7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG52ZWM0LnNxdWFyZWREaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgICB5ID0gYlsxXSAtIGFbMV0sXG4gICAgICAgIHogPSBiWzJdIC0gYVsyXSxcbiAgICAgICAgdyA9IGJbM10gLSBhWzNdO1xuICAgIHJldHVybiB4KnggKyB5KnkgKyB6KnogKyB3Knc7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5zcXVhcmVkRGlzdGFuY2V9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjNC5zcXJEaXN0ID0gdmVjNC5zcXVhcmVkRGlzdGFuY2U7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gYSB2ZWN0b3IgdG8gY2FsY3VsYXRlIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gbGVuZ3RoIG9mIGFcbiAqL1xudmVjNC5sZW5ndGggPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdLFxuICAgICAgICB3ID0gYVszXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSArIHoqeiArIHcqdyk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjNC5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjNC5sZW4gPSB2ZWM0Lmxlbmd0aDtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzRcbiAqXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG52ZWM0LnNxdWFyZWRMZW5ndGggPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV0sXG4gICAgICAgIHogPSBhWzJdLFxuICAgICAgICB3ID0gYVszXTtcbiAgICByZXR1cm4geCp4ICsgeSp5ICsgeip6ICsgdyp3O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzQuc3F1YXJlZExlbmd0aH1cbiAqIEBmdW5jdGlvblxuICovXG52ZWM0LnNxckxlbiA9IHZlYzQuc3F1YXJlZExlbmd0aDtcblxuLyoqXG4gKiBOZWdhdGVzIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjNFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdmVjdG9yIHRvIG5lZ2F0ZVxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0Lm5lZ2F0ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IC1hWzBdO1xuICAgIG91dFsxXSA9IC1hWzFdO1xuICAgIG91dFsyXSA9IC1hWzJdO1xuICAgIG91dFszXSA9IC1hWzNdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIGNvbXBvbmVudHMgb2YgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB2ZWN0b3IgdG8gaW52ZXJ0XG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQuaW52ZXJzZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICBvdXRbMF0gPSAxLjAgLyBhWzBdO1xuICBvdXRbMV0gPSAxLjAgLyBhWzFdO1xuICBvdXRbMl0gPSAxLjAgLyBhWzJdO1xuICBvdXRbM10gPSAxLjAgLyBhWzNdO1xuICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSB2ZWM0XG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB2ZWN0b3IgdG8gbm9ybWFsaXplXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQubm9ybWFsaXplID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXSxcbiAgICAgICAgeiA9IGFbMl0sXG4gICAgICAgIHcgPSBhWzNdO1xuICAgIHZhciBsZW4gPSB4KnggKyB5KnkgKyB6KnogKyB3Knc7XG4gICAgaWYgKGxlbiA+IDApIHtcbiAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pO1xuICAgICAgICBvdXRbMF0gPSBhWzBdICogbGVuO1xuICAgICAgICBvdXRbMV0gPSBhWzFdICogbGVuO1xuICAgICAgICBvdXRbMl0gPSBhWzJdICogbGVuO1xuICAgICAgICBvdXRbM10gPSBhWzNdICogbGVuO1xuICAgIH1cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzR9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkb3QgcHJvZHVjdCBvZiBhIGFuZCBiXG4gKi9cbnZlYzQuZG90ID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYVswXSAqIGJbMF0gKyBhWzFdICogYlsxXSArIGFbMl0gKiBiWzJdICsgYVszXSAqIGJbM107XG59O1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjNCdzXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWM0fSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LmxlcnAgPSBmdW5jdGlvbiAob3V0LCBhLCBiLCB0KSB7XG4gICAgdmFyIGF4ID0gYVswXSxcbiAgICAgICAgYXkgPSBhWzFdLFxuICAgICAgICBheiA9IGFbMl0sXG4gICAgICAgIGF3ID0gYVszXTtcbiAgICBvdXRbMF0gPSBheCArIHQgKiAoYlswXSAtIGF4KTtcbiAgICBvdXRbMV0gPSBheSArIHQgKiAoYlsxXSAtIGF5KTtcbiAgICBvdXRbMl0gPSBheiArIHQgKiAoYlsyXSAtIGF6KTtcbiAgICBvdXRbM10gPSBhdyArIHQgKiAoYlszXSAtIGF3KTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBHZW5lcmF0ZXMgYSByYW5kb20gdmVjdG9yIHdpdGggdGhlIGdpdmVuIHNjYWxlXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc2NhbGVdIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnJhbmRvbSA9IGZ1bmN0aW9uIChvdXQsIHNjYWxlKSB7XG4gICAgc2NhbGUgPSBzY2FsZSB8fCAxLjA7XG5cbiAgICAvL1RPRE86IFRoaXMgaXMgYSBwcmV0dHkgYXdmdWwgd2F5IG9mIGRvaW5nIHRoaXMuIEZpbmQgc29tZXRoaW5nIGJldHRlci5cbiAgICBvdXRbMF0gPSBHTE1BVF9SQU5ET00oKTtcbiAgICBvdXRbMV0gPSBHTE1BVF9SQU5ET00oKTtcbiAgICBvdXRbMl0gPSBHTE1BVF9SQU5ET00oKTtcbiAgICBvdXRbM10gPSBHTE1BVF9SQU5ET00oKTtcbiAgICB2ZWM0Lm5vcm1hbGl6ZShvdXQsIG91dCk7XG4gICAgdmVjNC5zY2FsZShvdXQsIG91dCwgc2NhbGUpO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zZm9ybXMgdGhlIHZlYzQgd2l0aCBhIG1hdDQuXG4gKlxuICogQHBhcmFtIHt2ZWM0fSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjNH0gYSB0aGUgdmVjdG9yIHRvIHRyYW5zZm9ybVxuICogQHBhcmFtIHttYXQ0fSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzR9IG91dFxuICovXG52ZWM0LnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2YXIgeCA9IGFbMF0sIHkgPSBhWzFdLCB6ID0gYVsyXSwgdyA9IGFbM107XG4gICAgb3V0WzBdID0gbVswXSAqIHggKyBtWzRdICogeSArIG1bOF0gKiB6ICsgbVsxMl0gKiB3O1xuICAgIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzldICogeiArIG1bMTNdICogdztcbiAgICBvdXRbMl0gPSBtWzJdICogeCArIG1bNl0gKiB5ICsgbVsxMF0gKiB6ICsgbVsxNF0gKiB3O1xuICAgIG91dFszXSA9IG1bM10gKiB4ICsgbVs3XSAqIHkgKyBtWzExXSAqIHogKyBtWzE1XSAqIHc7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjNCB3aXRoIGEgcXVhdFxuICpcbiAqIEBwYXJhbSB7dmVjNH0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzR9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7cXVhdH0gcSBxdWF0ZXJuaW9uIHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjNH0gb3V0XG4gKi9cbnZlYzQudHJhbnNmb3JtUXVhdCA9IGZ1bmN0aW9uKG91dCwgYSwgcSkge1xuICAgIHZhciB4ID0gYVswXSwgeSA9IGFbMV0sIHogPSBhWzJdLFxuICAgICAgICBxeCA9IHFbMF0sIHF5ID0gcVsxXSwgcXogPSBxWzJdLCBxdyA9IHFbM10sXG5cbiAgICAgICAgLy8gY2FsY3VsYXRlIHF1YXQgKiB2ZWNcbiAgICAgICAgaXggPSBxdyAqIHggKyBxeSAqIHogLSBxeiAqIHksXG4gICAgICAgIGl5ID0gcXcgKiB5ICsgcXogKiB4IC0gcXggKiB6LFxuICAgICAgICBpeiA9IHF3ICogeiArIHF4ICogeSAtIHF5ICogeCxcbiAgICAgICAgaXcgPSAtcXggKiB4IC0gcXkgKiB5IC0gcXogKiB6O1xuXG4gICAgLy8gY2FsY3VsYXRlIHJlc3VsdCAqIGludmVyc2UgcXVhdFxuICAgIG91dFswXSA9IGl4ICogcXcgKyBpdyAqIC1xeCArIGl5ICogLXF6IC0gaXogKiAtcXk7XG4gICAgb3V0WzFdID0gaXkgKiBxdyArIGl3ICogLXF5ICsgaXogKiAtcXggLSBpeCAqIC1xejtcbiAgICBvdXRbMl0gPSBpeiAqIHF3ICsgaXcgKiAtcXogKyBpeCAqIC1xeSAtIGl5ICogLXF4O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFBlcmZvcm0gc29tZSBvcGVyYXRpb24gb3ZlciBhbiBhcnJheSBvZiB2ZWM0cy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhIHRoZSBhcnJheSBvZiB2ZWN0b3JzIHRvIGl0ZXJhdGUgb3ZlclxuICogQHBhcmFtIHtOdW1iZXJ9IHN0cmlkZSBOdW1iZXIgb2YgZWxlbWVudHMgYmV0d2VlbiB0aGUgc3RhcnQgb2YgZWFjaCB2ZWM0LiBJZiAwIGFzc3VtZXMgdGlnaHRseSBwYWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgTnVtYmVyIG9mIGVsZW1lbnRzIHRvIHNraXAgYXQgdGhlIGJlZ2lubmluZyBvZiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudCBOdW1iZXIgb2YgdmVjNHMgdG8gaXRlcmF0ZSBvdmVyLiBJZiAwIGl0ZXJhdGVzIG92ZXIgZW50aXJlIGFycmF5XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBGdW5jdGlvbiB0byBjYWxsIGZvciBlYWNoIHZlY3RvciBpbiB0aGUgYXJyYXlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnXSBhZGRpdGlvbmFsIGFyZ3VtZW50IHRvIHBhc3MgdG8gZm5cbiAqIEByZXR1cm5zIHtBcnJheX0gYVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzQuZm9yRWFjaCA9IChmdW5jdGlvbigpIHtcbiAgICB2YXIgdmVjID0gdmVjNC5jcmVhdGUoKTtcblxuICAgIHJldHVybiBmdW5jdGlvbihhLCBzdHJpZGUsIG9mZnNldCwgY291bnQsIGZuLCBhcmcpIHtcbiAgICAgICAgdmFyIGksIGw7XG4gICAgICAgIGlmKCFzdHJpZGUpIHtcbiAgICAgICAgICAgIHN0cmlkZSA9IDQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZighb2Zmc2V0KSB7XG4gICAgICAgICAgICBvZmZzZXQgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoY291bnQpIHtcbiAgICAgICAgICAgIGwgPSBNYXRoLm1pbigoY291bnQgKiBzdHJpZGUpICsgb2Zmc2V0LCBhLmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsID0gYS5sZW5ndGg7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IoaSA9IG9mZnNldDsgaSA8IGw7IGkgKz0gc3RyaWRlKSB7XG4gICAgICAgICAgICB2ZWNbMF0gPSBhW2ldOyB2ZWNbMV0gPSBhW2krMV07IHZlY1syXSA9IGFbaSsyXTsgdmVjWzNdID0gYVtpKzNdO1xuICAgICAgICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICAgICAgICBhW2ldID0gdmVjWzBdOyBhW2krMV0gPSB2ZWNbMV07IGFbaSsyXSA9IHZlY1syXTsgYVtpKzNdID0gdmVjWzNdO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfTtcbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IHZlYzQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L3ZlYzQuanNcbi8vIG1vZHVsZSBpZCA9IDMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///31\n");

/***/ }),
/* 32 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 3x3 Matrix\n * @name mat3\n */\n\nvar mat3 = {};\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](9);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {mat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\nmat3.fromMat4 = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[4];\n    out[4] = a[5];\n    out[5] = a[6];\n    out[6] = a[8];\n    out[7] = a[9];\n    out[8] = a[10];\n    return out;\n};\n\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {mat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\nmat3.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](9);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\nmat3.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 1;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a01 = a[1], a02 = a[2], a12 = a[5];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a01;\n        out[5] = a[7];\n        out[6] = a02;\n        out[7] = a12;\n    } else {\n        out[0] = a[0];\n        out[1] = a[3];\n        out[2] = a[6];\n        out[3] = a[1];\n        out[4] = a[4];\n        out[5] = a[7];\n        out[6] = a[2];\n        out[7] = a[5];\n        out[8] = a[8];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.invert = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        b01 = a22 * a11 - a12 * a21,\n        b11 = -a22 * a10 + a12 * a20,\n        b21 = a21 * a10 - a11 * a20,\n\n        // Calculate the determinant\n        det = a00 * b01 + a01 * b11 + a02 * b21;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = b01 * det;\n    out[1] = (-a22 * a01 + a02 * a21) * det;\n    out[2] = (a12 * a01 - a02 * a11) * det;\n    out[3] = b11 * det;\n    out[4] = (a22 * a00 - a02 * a20) * det;\n    out[5] = (-a12 * a00 + a02 * a10) * det;\n    out[6] = b21 * det;\n    out[7] = (-a21 * a00 + a01 * a20) * det;\n    out[8] = (a11 * a00 - a01 * a10) * det;\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the source matrix\n * @returns {mat3} out\n */\nmat3.adjoint = function(out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8];\n\n    out[0] = (a11 * a22 - a12 * a21);\n    out[1] = (a02 * a21 - a01 * a22);\n    out[2] = (a01 * a12 - a02 * a11);\n    out[3] = (a12 * a20 - a10 * a22);\n    out[4] = (a00 * a22 - a02 * a20);\n    out[5] = (a02 * a10 - a00 * a12);\n    out[6] = (a10 * a21 - a11 * a20);\n    out[7] = (a01 * a20 - a00 * a21);\n    out[8] = (a00 * a11 - a01 * a10);\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat3\n *\n * @param {mat3} a the source matrix\n * @returns {Number} determinant of a\n */\nmat3.determinant = function (a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8];\n\n    return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n};\n\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the first operand\n * @param {mat3} b the second operand\n * @returns {mat3} out\n */\nmat3.multiply = function (out, a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        b00 = b[0], b01 = b[1], b02 = b[2],\n        b10 = b[3], b11 = b[4], b12 = b[5],\n        b20 = b[6], b21 = b[7], b22 = b[8];\n\n    out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n\n    out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n\n    out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return out;\n};\n\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\nmat3.mul = mat3.multiply;\n\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to translate\n * @param {vec2} v vector to translate by\n * @returns {mat3} out\n */\nmat3.translate = function(out, a, v) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n        x = v[0], y = v[1];\n\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n\n    out[3] = a10;\n    out[4] = a11;\n    out[5] = a12;\n\n    out[6] = x * a00 + y * a10 + a20;\n    out[7] = x * a01 + y * a11 + a21;\n    out[8] = x * a02 + y * a12 + a22;\n    return out;\n};\n\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\nmat3.rotate = function (out, a, rad) {\n    var a00 = a[0], a01 = a[1], a02 = a[2],\n        a10 = a[3], a11 = a[4], a12 = a[5],\n        a20 = a[6], a21 = a[7], a22 = a[8],\n\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n\n    out[0] = c * a00 + s * a10;\n    out[1] = c * a01 + s * a11;\n    out[2] = c * a02 + s * a12;\n\n    out[3] = c * a10 - s * a00;\n    out[4] = c * a11 - s * a01;\n    out[5] = c * a12 - s * a02;\n\n    out[6] = a20;\n    out[7] = a21;\n    out[8] = a22;\n    return out;\n};\n\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {mat3} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\nmat3.scale = function(out, a, v) {\n    var x = v[0], y = v[1];\n\n    out[0] = x * a[0];\n    out[1] = x * a[1];\n    out[2] = x * a[2];\n\n    out[3] = y * a[3];\n    out[4] = y * a[4];\n    out[5] = y * a[5];\n\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    return out;\n};\n\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {mat2d} a the matrix to copy\n * @returns {mat3} out\n **/\nmat3.fromMat2d = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = 0;\n\n    out[3] = a[2];\n    out[4] = a[3];\n    out[5] = 0;\n\n    out[6] = a[4];\n    out[7] = a[5];\n    out[8] = 1;\n    return out;\n};\n\n/**\n* Calculates a 3x3 matrix from the given quaternion\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {quat} q Quaternion to create matrix from\n*\n* @returns {mat3} out\n*/\nmat3.fromQuat = function (out, q) {\n    var x = q[0], y = q[1], z = q[2], w = q[3],\n        x2 = x + x,\n        y2 = y + y,\n        z2 = z + z,\n\n        xx = x * x2,\n        yx = y * x2,\n        yy = y * y2,\n        zx = z * x2,\n        zy = z * y2,\n        zz = z * z2,\n        wx = w * x2,\n        wy = w * y2,\n        wz = w * z2;\n\n    out[0] = 1 - yy - zz;\n    out[3] = yx - wz;\n    out[6] = zx + wy;\n\n    out[1] = yx + wz;\n    out[4] = 1 - xx - zz;\n    out[7] = zy - wx;\n\n    out[2] = zx - wy;\n    out[5] = zy + wx;\n    out[8] = 1 - xx - yy;\n\n    return out;\n};\n\n/**\n* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n*\n* @param {mat3} out mat3 receiving operation result\n* @param {mat4} a Mat4 to derive the normal matrix from\n*\n* @returns {mat3} out\n*/\nmat3.normalFromMat4 = function (out, a) {\n    var a00 = a[0], a01 = a[1], a02 = a[2], a03 = a[3],\n        a10 = a[4], a11 = a[5], a12 = a[6], a13 = a[7],\n        a20 = a[8], a21 = a[9], a22 = a[10], a23 = a[11],\n        a30 = a[12], a31 = a[13], a32 = a[14], a33 = a[15],\n\n        b00 = a00 * a11 - a01 * a10,\n        b01 = a00 * a12 - a02 * a10,\n        b02 = a00 * a13 - a03 * a10,\n        b03 = a01 * a12 - a02 * a11,\n        b04 = a01 * a13 - a03 * a11,\n        b05 = a02 * a13 - a03 * a12,\n        b06 = a20 * a31 - a21 * a30,\n        b07 = a20 * a32 - a22 * a30,\n        b08 = a20 * a33 - a23 * a30,\n        b09 = a21 * a32 - a22 * a31,\n        b10 = a21 * a33 - a23 * a31,\n        b11 = a22 * a33 - a23 * a32,\n\n        // Calculate the determinant\n        det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n\n    out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n\n    out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {mat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat3.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2)))\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat3);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L21hdDMuanM/M2JiYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyAzeDMgTWF0cml4XG4gKiBAbmFtZSBtYXQzXG4gKi9cblxudmFyIG1hdDMgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDNcbiAqXG4gKiBAcmV0dXJucyB7bWF0M30gYSBuZXcgM3gzIG1hdHJpeFxuICovXG5tYXQzLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg5KTtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAwO1xuICAgIG91dFs0XSA9IDE7XG4gICAgb3V0WzVdID0gMDtcbiAgICBvdXRbNl0gPSAwO1xuICAgIG91dFs3XSA9IDA7XG4gICAgb3V0WzhdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3BpZXMgdGhlIHVwcGVyLWxlZnQgM3gzIHZhbHVlcyBpbnRvIHRoZSBnaXZlbiBtYXQzLlxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgM3gzIG1hdHJpeFxuICogQHBhcmFtIHttYXQ0fSBhICAgdGhlIHNvdXJjZSA0eDQgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0M30gb3V0XG4gKi9cbm1hdDMuZnJvbU1hdDQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzRdO1xuICAgIG91dFs0XSA9IGFbNV07XG4gICAgb3V0WzVdID0gYVs2XTtcbiAgICBvdXRbNl0gPSBhWzhdO1xuICAgIG91dFs3XSA9IGFbOV07XG4gICAgb3V0WzhdID0gYVsxMF07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBtYXQzIGluaXRpYWxpemVkIHdpdGggdmFsdWVzIGZyb20gYW4gZXhpc3RpbmcgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQzfSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDN9IGEgbmV3IDN4MyBtYXRyaXhcbiAqL1xubWF0My5jbG9uZSA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoOSk7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFs4XSA9IGFbOF07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDMgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICBvdXRbNF0gPSBhWzRdO1xuICAgIG91dFs1XSA9IGFbNV07XG4gICAgb3V0WzZdID0gYVs2XTtcbiAgICBvdXRbN10gPSBhWzddO1xuICAgIG91dFs4XSA9IGFbOF07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2V0IGEgbWF0MyB0byB0aGUgaWRlbnRpdHkgbWF0cml4XG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDA7XG4gICAgb3V0WzRdID0gMTtcbiAgICBvdXRbNV0gPSAwO1xuICAgIG91dFs2XSA9IDA7XG4gICAgb3V0WzddID0gMDtcbiAgICBvdXRbOF0gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFRyYW5zcG9zZSB0aGUgdmFsdWVzIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My50cmFuc3Bvc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzXG4gICAgaWYgKG91dCA9PT0gYSkge1xuICAgICAgICB2YXIgYTAxID0gYVsxXSwgYTAyID0gYVsyXSwgYTEyID0gYVs1XTtcbiAgICAgICAgb3V0WzFdID0gYVszXTtcbiAgICAgICAgb3V0WzJdID0gYVs2XTtcbiAgICAgICAgb3V0WzNdID0gYTAxO1xuICAgICAgICBvdXRbNV0gPSBhWzddO1xuICAgICAgICBvdXRbNl0gPSBhMDI7XG4gICAgICAgIG91dFs3XSA9IGExMjtcbiAgICB9IGVsc2Uge1xuICAgICAgICBvdXRbMF0gPSBhWzBdO1xuICAgICAgICBvdXRbMV0gPSBhWzNdO1xuICAgICAgICBvdXRbMl0gPSBhWzZdO1xuICAgICAgICBvdXRbM10gPSBhWzFdO1xuICAgICAgICBvdXRbNF0gPSBhWzRdO1xuICAgICAgICBvdXRbNV0gPSBhWzddO1xuICAgICAgICBvdXRbNl0gPSBhWzJdO1xuICAgICAgICBvdXRbN10gPSBhWzVdO1xuICAgICAgICBvdXRbOF0gPSBhWzhdO1xuICAgIH1cblxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEludmVydHMgYSBtYXQzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5tYXQzLmludmVydCA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLFxuICAgICAgICBhMTAgPSBhWzNdLCBhMTEgPSBhWzRdLCBhMTIgPSBhWzVdLFxuICAgICAgICBhMjAgPSBhWzZdLCBhMjEgPSBhWzddLCBhMjIgPSBhWzhdLFxuXG4gICAgICAgIGIwMSA9IGEyMiAqIGExMSAtIGExMiAqIGEyMSxcbiAgICAgICAgYjExID0gLWEyMiAqIGExMCArIGExMiAqIGEyMCxcbiAgICAgICAgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwLFxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcbiAgICAgICAgZGV0ID0gYTAwICogYjAxICsgYTAxICogYjExICsgYTAyICogYjIxO1xuXG4gICAgaWYgKCFkZXQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGRldCA9IDEuMCAvIGRldDtcblxuICAgIG91dFswXSA9IGIwMSAqIGRldDtcbiAgICBvdXRbMV0gPSAoLWEyMiAqIGEwMSArIGEwMiAqIGEyMSkgKiBkZXQ7XG4gICAgb3V0WzJdID0gKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQ7XG4gICAgb3V0WzNdID0gYjExICogZGV0O1xuICAgIG91dFs0XSA9IChhMjIgKiBhMDAgLSBhMDIgKiBhMjApICogZGV0O1xuICAgIG91dFs1XSA9ICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldDtcbiAgICBvdXRbNl0gPSBiMjEgKiBkZXQ7XG4gICAgb3V0WzddID0gKC1hMjEgKiBhMDAgKyBhMDEgKiBhMjApICogZGV0O1xuICAgIG91dFs4XSA9IChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGFkanVnYXRlIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5hZGpvaW50ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMCA9IGFbM10sIGExMSA9IGFbNF0sIGExMiA9IGFbNV0sXG4gICAgICAgIGEyMCA9IGFbNl0sIGEyMSA9IGFbN10sIGEyMiA9IGFbOF07XG5cbiAgICBvdXRbMF0gPSAoYTExICogYTIyIC0gYTEyICogYTIxKTtcbiAgICBvdXRbMV0gPSAoYTAyICogYTIxIC0gYTAxICogYTIyKTtcbiAgICBvdXRbMl0gPSAoYTAxICogYTEyIC0gYTAyICogYTExKTtcbiAgICBvdXRbM10gPSAoYTEyICogYTIwIC0gYTEwICogYTIyKTtcbiAgICBvdXRbNF0gPSAoYTAwICogYTIyIC0gYTAyICogYTIwKTtcbiAgICBvdXRbNV0gPSAoYTAyICogYTEwIC0gYTAwICogYTEyKTtcbiAgICBvdXRbNl0gPSAoYTEwICogYTIxIC0gYTExICogYTIwKTtcbiAgICBvdXRbN10gPSAoYTAxICogYTIwIC0gYTAwICogYTIxKTtcbiAgICBvdXRbOF0gPSAoYTAwICogYTExIC0gYTAxICogYTEwKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDNcbiAqXG4gKiBAcGFyYW0ge21hdDN9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xubWF0My5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sXG4gICAgICAgIGExMCA9IGFbM10sIGExMSA9IGFbNF0sIGExMiA9IGFbNV0sXG4gICAgICAgIGEyMCA9IGFbNl0sIGEyMSA9IGFbN10sIGEyMiA9IGFbOF07XG5cbiAgICByZXR1cm4gYTAwICogKGEyMiAqIGExMSAtIGExMiAqIGEyMSkgKyBhMDEgKiAoLWEyMiAqIGExMCArIGExMiAqIGEyMCkgKyBhMDIgKiAoYTIxICogYTEwIC0gYTExICogYTIwKTtcbn07XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0MydzXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHttYXQzfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5tYXQzLm11bHRpcGx5ID0gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLFxuICAgICAgICBhMTAgPSBhWzNdLCBhMTEgPSBhWzRdLCBhMTIgPSBhWzVdLFxuICAgICAgICBhMjAgPSBhWzZdLCBhMjEgPSBhWzddLCBhMjIgPSBhWzhdLFxuXG4gICAgICAgIGIwMCA9IGJbMF0sIGIwMSA9IGJbMV0sIGIwMiA9IGJbMl0sXG4gICAgICAgIGIxMCA9IGJbM10sIGIxMSA9IGJbNF0sIGIxMiA9IGJbNV0sXG4gICAgICAgIGIyMCA9IGJbNl0sIGIyMSA9IGJbN10sIGIyMiA9IGJbOF07XG5cbiAgICBvdXRbMF0gPSBiMDAgKiBhMDAgKyBiMDEgKiBhMTAgKyBiMDIgKiBhMjA7XG4gICAgb3V0WzFdID0gYjAwICogYTAxICsgYjAxICogYTExICsgYjAyICogYTIxO1xuICAgIG91dFsyXSA9IGIwMCAqIGEwMiArIGIwMSAqIGExMiArIGIwMiAqIGEyMjtcblxuICAgIG91dFszXSA9IGIxMCAqIGEwMCArIGIxMSAqIGExMCArIGIxMiAqIGEyMDtcbiAgICBvdXRbNF0gPSBiMTAgKiBhMDEgKyBiMTEgKiBhMTEgKyBiMTIgKiBhMjE7XG4gICAgb3V0WzVdID0gYjEwICogYTAyICsgYjExICogYTEyICsgYjEyICogYTIyO1xuXG4gICAgb3V0WzZdID0gYjIwICogYTAwICsgYjIxICogYTEwICsgYjIyICogYTIwO1xuICAgIG91dFs3XSA9IGIyMCAqIGEwMSArIGIyMSAqIGExMSArIGIyMiAqIGEyMTtcbiAgICBvdXRbOF0gPSBiMjAgKiBhMDIgKyBiMjEgKiBhMTIgKyBiMjIgKiBhMjI7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQzLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbm1hdDMubXVsID0gbWF0My5tdWx0aXBseTtcblxuLyoqXG4gKiBUcmFuc2xhdGUgYSBtYXQzIGJ5IHRoZSBnaXZlbiB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge21hdDN9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQzfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge3ZlYzJ9IHYgdmVjdG9yIHRvIHRyYW5zbGF0ZSBieVxuICogQHJldHVybnMge21hdDN9IG91dFxuICovXG5tYXQzLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIHZhciBhMDAgPSBhWzBdLCBhMDEgPSBhWzFdLCBhMDIgPSBhWzJdLFxuICAgICAgICBhMTAgPSBhWzNdLCBhMTEgPSBhWzRdLCBhMTIgPSBhWzVdLFxuICAgICAgICBhMjAgPSBhWzZdLCBhMjEgPSBhWzddLCBhMjIgPSBhWzhdLFxuICAgICAgICB4ID0gdlswXSwgeSA9IHZbMV07XG5cbiAgICBvdXRbMF0gPSBhMDA7XG4gICAgb3V0WzFdID0gYTAxO1xuICAgIG91dFsyXSA9IGEwMjtcblxuICAgIG91dFszXSA9IGExMDtcbiAgICBvdXRbNF0gPSBhMTE7XG4gICAgb3V0WzVdID0gYTEyO1xuXG4gICAgb3V0WzZdID0geCAqIGEwMCArIHkgKiBhMTAgKyBhMjA7XG4gICAgb3V0WzddID0geCAqIGEwMSArIHkgKiBhMTEgKyBhMjE7XG4gICAgb3V0WzhdID0geCAqIGEwMiArIHkgKiBhMTIgKyBhMjI7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUm90YXRlcyBhIG1hdDMgYnkgdGhlIGdpdmVuIGFuZ2xlXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqL1xubWF0My5yb3RhdGUgPSBmdW5jdGlvbiAob3V0LCBhLCByYWQpIHtcbiAgICB2YXIgYTAwID0gYVswXSwgYTAxID0gYVsxXSwgYTAyID0gYVsyXSxcbiAgICAgICAgYTEwID0gYVszXSwgYTExID0gYVs0XSwgYTEyID0gYVs1XSxcbiAgICAgICAgYTIwID0gYVs2XSwgYTIxID0gYVs3XSwgYTIyID0gYVs4XSxcblxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG5cbiAgICBvdXRbMF0gPSBjICogYTAwICsgcyAqIGExMDtcbiAgICBvdXRbMV0gPSBjICogYTAxICsgcyAqIGExMTtcbiAgICBvdXRbMl0gPSBjICogYTAyICsgcyAqIGExMjtcblxuICAgIG91dFszXSA9IGMgKiBhMTAgLSBzICogYTAwO1xuICAgIG91dFs0XSA9IGMgKiBhMTEgLSBzICogYTAxO1xuICAgIG91dFs1XSA9IGMgKiBhMTIgLSBzICogYTAyO1xuXG4gICAgb3V0WzZdID0gYTIwO1xuICAgIG91dFs3XSA9IGEyMTtcbiAgICBvdXRbOF0gPSBhMjI7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogU2NhbGVzIHRoZSBtYXQzIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQzfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHt2ZWMyfSB2IHRoZSB2ZWMyIHRvIHNjYWxlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQzfSBvdXRcbiAqKi9cbm1hdDMuc2NhbGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICB2YXIgeCA9IHZbMF0sIHkgPSB2WzFdO1xuXG4gICAgb3V0WzBdID0geCAqIGFbMF07XG4gICAgb3V0WzFdID0geCAqIGFbMV07XG4gICAgb3V0WzJdID0geCAqIGFbMl07XG5cbiAgICBvdXRbM10gPSB5ICogYVszXTtcbiAgICBvdXRbNF0gPSB5ICogYVs0XTtcbiAgICBvdXRbNV0gPSB5ICogYVs1XTtcblxuICAgIG91dFs2XSA9IGFbNl07XG4gICAgb3V0WzddID0gYVs3XTtcbiAgICBvdXRbOF0gPSBhWzhdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENvcGllcyB0aGUgdmFsdWVzIGZyb20gYSBtYXQyZCBpbnRvIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJkfSBhIHRoZSBtYXRyaXggdG8gY29weVxuICogQHJldHVybnMge21hdDN9IG91dFxuICoqL1xubWF0My5mcm9tTWF0MmQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gMDtcblxuICAgIG91dFszXSA9IGFbMl07XG4gICAgb3V0WzRdID0gYVszXTtcbiAgICBvdXRbNV0gPSAwO1xuXG4gICAgb3V0WzZdID0gYVs0XTtcbiAgICBvdXRbN10gPSBhWzVdO1xuICAgIG91dFs4XSA9IDE7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuKiBDYWxjdWxhdGVzIGEgM3gzIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4qXG4qIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiogQHBhcmFtIHtxdWF0fSBxIFF1YXRlcm5pb24gdG8gY3JlYXRlIG1hdHJpeCBmcm9tXG4qXG4qIEByZXR1cm5zIHttYXQzfSBvdXRcbiovXG5tYXQzLmZyb21RdWF0ID0gZnVuY3Rpb24gKG91dCwgcSkge1xuICAgIHZhciB4ID0gcVswXSwgeSA9IHFbMV0sIHogPSBxWzJdLCB3ID0gcVszXSxcbiAgICAgICAgeDIgPSB4ICsgeCxcbiAgICAgICAgeTIgPSB5ICsgeSxcbiAgICAgICAgejIgPSB6ICsgeixcblxuICAgICAgICB4eCA9IHggKiB4MixcbiAgICAgICAgeXggPSB5ICogeDIsXG4gICAgICAgIHl5ID0geSAqIHkyLFxuICAgICAgICB6eCA9IHogKiB4MixcbiAgICAgICAgenkgPSB6ICogeTIsXG4gICAgICAgIHp6ID0geiAqIHoyLFxuICAgICAgICB3eCA9IHcgKiB4MixcbiAgICAgICAgd3kgPSB3ICogeTIsXG4gICAgICAgIHd6ID0gdyAqIHoyO1xuXG4gICAgb3V0WzBdID0gMSAtIHl5IC0geno7XG4gICAgb3V0WzNdID0geXggLSB3ejtcbiAgICBvdXRbNl0gPSB6eCArIHd5O1xuXG4gICAgb3V0WzFdID0geXggKyB3ejtcbiAgICBvdXRbNF0gPSAxIC0geHggLSB6ejtcbiAgICBvdXRbN10gPSB6eSAtIHd4O1xuXG4gICAgb3V0WzJdID0genggLSB3eTtcbiAgICBvdXRbNV0gPSB6eSArIHd4O1xuICAgIG91dFs4XSA9IDEgLSB4eCAtIHl5O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuKiBDYWxjdWxhdGVzIGEgM3gzIG5vcm1hbCBtYXRyaXggKHRyYW5zcG9zZSBpbnZlcnNlKSBmcm9tIHRoZSA0eDQgbWF0cml4XG4qXG4qIEBwYXJhbSB7bWF0M30gb3V0IG1hdDMgcmVjZWl2aW5nIG9wZXJhdGlvbiByZXN1bHRcbiogQHBhcmFtIHttYXQ0fSBhIE1hdDQgdG8gZGVyaXZlIHRoZSBub3JtYWwgbWF0cml4IGZyb21cbipcbiogQHJldHVybnMge21hdDN9IG91dFxuKi9cbm1hdDMubm9ybWFsRnJvbU1hdDQgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgdmFyIGEwMCA9IGFbMF0sIGEwMSA9IGFbMV0sIGEwMiA9IGFbMl0sIGEwMyA9IGFbM10sXG4gICAgICAgIGExMCA9IGFbNF0sIGExMSA9IGFbNV0sIGExMiA9IGFbNl0sIGExMyA9IGFbN10sXG4gICAgICAgIGEyMCA9IGFbOF0sIGEyMSA9IGFbOV0sIGEyMiA9IGFbMTBdLCBhMjMgPSBhWzExXSxcbiAgICAgICAgYTMwID0gYVsxMl0sIGEzMSA9IGFbMTNdLCBhMzIgPSBhWzE0XSwgYTMzID0gYVsxNV0sXG5cbiAgICAgICAgYjAwID0gYTAwICogYTExIC0gYTAxICogYTEwLFxuICAgICAgICBiMDEgPSBhMDAgKiBhMTIgLSBhMDIgKiBhMTAsXG4gICAgICAgIGIwMiA9IGEwMCAqIGExMyAtIGEwMyAqIGExMCxcbiAgICAgICAgYjAzID0gYTAxICogYTEyIC0gYTAyICogYTExLFxuICAgICAgICBiMDQgPSBhMDEgKiBhMTMgLSBhMDMgKiBhMTEsXG4gICAgICAgIGIwNSA9IGEwMiAqIGExMyAtIGEwMyAqIGExMixcbiAgICAgICAgYjA2ID0gYTIwICogYTMxIC0gYTIxICogYTMwLFxuICAgICAgICBiMDcgPSBhMjAgKiBhMzIgLSBhMjIgKiBhMzAsXG4gICAgICAgIGIwOCA9IGEyMCAqIGEzMyAtIGEyMyAqIGEzMCxcbiAgICAgICAgYjA5ID0gYTIxICogYTMyIC0gYTIyICogYTMxLFxuICAgICAgICBiMTAgPSBhMjEgKiBhMzMgLSBhMjMgKiBhMzEsXG4gICAgICAgIGIxMSA9IGEyMiAqIGEzMyAtIGEyMyAqIGEzMixcblxuICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50XG4gICAgICAgIGRldCA9IGIwMCAqIGIxMSAtIGIwMSAqIGIxMCArIGIwMiAqIGIwOSArIGIwMyAqIGIwOCAtIGIwNCAqIGIwNyArIGIwNSAqIGIwNjtcblxuICAgIGlmICghZGV0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkZXQgPSAxLjAgLyBkZXQ7XG5cbiAgICBvdXRbMF0gPSAoYTExICogYjExIC0gYTEyICogYjEwICsgYTEzICogYjA5KSAqIGRldDtcbiAgICBvdXRbMV0gPSAoYTEyICogYjA4IC0gYTEwICogYjExIC0gYTEzICogYjA3KSAqIGRldDtcbiAgICBvdXRbMl0gPSAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldDtcblxuICAgIG91dFszXSA9IChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0O1xuICAgIG91dFs0XSA9IChhMDAgKiBiMTEgLSBhMDIgKiBiMDggKyBhMDMgKiBiMDcpICogZGV0O1xuICAgIG91dFs1XSA9IChhMDEgKiBiMDggLSBhMDAgKiBiMTAgLSBhMDMgKiBiMDYpICogZGV0O1xuXG4gICAgb3V0WzZdID0gKGEzMSAqIGIwNSAtIGEzMiAqIGIwNCArIGEzMyAqIGIwMykgKiBkZXQ7XG4gICAgb3V0WzddID0gKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQ7XG4gICAgb3V0WzhdID0gKGEzMCAqIGIwNCAtIGEzMSAqIGIwMiArIGEzMyAqIGIwMCkgKiBkZXQ7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0M1xuICpcbiAqIEBwYXJhbSB7bWF0M30gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xubWF0My5mcm9iID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4oTWF0aC5zcXJ0KE1hdGgucG93KGFbMF0sIDIpICsgTWF0aC5wb3coYVsxXSwgMikgKyBNYXRoLnBvdyhhWzJdLCAyKSArIE1hdGgucG93KGFbM10sIDIpICsgTWF0aC5wb3coYVs0XSwgMikgKyBNYXRoLnBvdyhhWzVdLCAyKSArIE1hdGgucG93KGFbNl0sIDIpICsgTWF0aC5wb3coYVs3XSwgMikgKyBNYXRoLnBvdyhhWzhdLCAyKSkpXG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IG1hdDM7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L21hdDMuanNcbi8vIG1vZHVsZSBpZCA9IDMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///32\n");

/***/ }),
/* 33 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var DIRTY_PREFIX = '__dt__';\n\nvar Cache = function () {\n\n    this._contextId = 0;\n\n    this._caches = [];\n\n    this._context = {};\n};\n\nCache.prototype = {\n\n    use: function (contextId, documentSchema) {\n        var caches = this._caches;\n        if (!caches[contextId]) {\n            caches[contextId] = {};\n\n            if (documentSchema) {\n                caches[contextId] = documentSchema();\n            }\n        }\n        this._contextId = contextId;\n\n        this._context = caches[contextId];\n    },\n\n    put: function (key, value) {\n        this._context[key] = value;\n    },\n\n    get: function (key) {\n        return this._context[key];\n    },\n\n    dirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, true);\n    },\n\n    dirtyAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = true;\n            }\n        }\n    },\n\n    fresh: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        this.put(key, false);\n    },\n\n    freshAll: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var caches = this._caches;\n        for (var i = 0; i < caches.length; i++) {\n            if (caches[i]) {\n                caches[i][key] = false;\n            }\n        }\n    },\n\n    isDirty: function (field) {\n        field = field || '';\n        var key = DIRTY_PREFIX + field;\n        var context = this._context;\n        return  !context.hasOwnProperty(key)\n            || context[key] === true;\n    },\n\n    deleteContext: function (contextId) {\n        delete this._caches[contextId];\n        this._context = {};\n    },\n\n    delete: function (key) {\n        delete this._context[key];\n    },\n\n    clearAll: function () {\n        this._caches = {};\n    },\n\n    getContext: function () {\n        return this._context;\n    },\n\n    eachContext : function (cb, context) {\n        var keys = Object.keys(this._caches);\n        keys.forEach(function (key) {\n            cb && cb.call(context, key);\n        });\n    },\n\n    miss: function (key) {\n        return ! this._context.hasOwnProperty(key);\n    }\n};\n\nCache.prototype.constructor = Cache;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cache);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvQ2FjaGUuanM/YzU4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgRElSVFlfUFJFRklYID0gJ19fZHRfXyc7XG5cbnZhciBDYWNoZSA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHRoaXMuX2NvbnRleHRJZCA9IDA7XG5cbiAgICB0aGlzLl9jYWNoZXMgPSBbXTtcblxuICAgIHRoaXMuX2NvbnRleHQgPSB7fTtcbn07XG5cbkNhY2hlLnByb3RvdHlwZSA9IHtcblxuICAgIHVzZTogZnVuY3Rpb24gKGNvbnRleHRJZCwgZG9jdW1lbnRTY2hlbWEpIHtcbiAgICAgICAgdmFyIGNhY2hlcyA9IHRoaXMuX2NhY2hlcztcbiAgICAgICAgaWYgKCFjYWNoZXNbY29udGV4dElkXSkge1xuICAgICAgICAgICAgY2FjaGVzW2NvbnRleHRJZF0gPSB7fTtcblxuICAgICAgICAgICAgaWYgKGRvY3VtZW50U2NoZW1hKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVzW2NvbnRleHRJZF0gPSBkb2N1bWVudFNjaGVtYSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRleHRJZCA9IGNvbnRleHRJZDtcblxuICAgICAgICB0aGlzLl9jb250ZXh0ID0gY2FjaGVzW2NvbnRleHRJZF07XG4gICAgfSxcblxuICAgIHB1dDogZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY29udGV4dFtrZXldID0gdmFsdWU7XG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29udGV4dFtrZXldO1xuICAgIH0sXG5cbiAgICBkaXJ0eTogZnVuY3Rpb24gKGZpZWxkKSB7XG4gICAgICAgIGZpZWxkID0gZmllbGQgfHwgJyc7XG4gICAgICAgIHZhciBrZXkgPSBESVJUWV9QUkVGSVggKyBmaWVsZDtcbiAgICAgICAgdGhpcy5wdXQoa2V5LCB0cnVlKTtcbiAgICB9LFxuXG4gICAgZGlydHlBbGw6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICBmaWVsZCA9IGZpZWxkIHx8ICcnO1xuICAgICAgICB2YXIga2V5ID0gRElSVFlfUFJFRklYICsgZmllbGQ7XG4gICAgICAgIHZhciBjYWNoZXMgPSB0aGlzLl9jYWNoZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVzW2ldW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZyZXNoOiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgZmllbGQgPSBmaWVsZCB8fCAnJztcbiAgICAgICAgdmFyIGtleSA9IERJUlRZX1BSRUZJWCArIGZpZWxkO1xuICAgICAgICB0aGlzLnB1dChrZXksIGZhbHNlKTtcbiAgICB9LFxuXG4gICAgZnJlc2hBbGw6IGZ1bmN0aW9uIChmaWVsZCkge1xuICAgICAgICBmaWVsZCA9IGZpZWxkIHx8ICcnO1xuICAgICAgICB2YXIga2V5ID0gRElSVFlfUFJFRklYICsgZmllbGQ7XG4gICAgICAgIHZhciBjYWNoZXMgPSB0aGlzLl9jYWNoZXM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2FjaGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FjaGVzW2ldKSB7XG4gICAgICAgICAgICAgICAgY2FjaGVzW2ldW2tleV0gPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBpc0RpcnR5OiBmdW5jdGlvbiAoZmllbGQpIHtcbiAgICAgICAgZmllbGQgPSBmaWVsZCB8fCAnJztcbiAgICAgICAgdmFyIGtleSA9IERJUlRZX1BSRUZJWCArIGZpZWxkO1xuICAgICAgICB2YXIgY29udGV4dCA9IHRoaXMuX2NvbnRleHQ7XG4gICAgICAgIHJldHVybiAgIWNvbnRleHQuaGFzT3duUHJvcGVydHkoa2V5KVxuICAgICAgICAgICAgfHwgY29udGV4dFtrZXldID09PSB0cnVlO1xuICAgIH0sXG5cbiAgICBkZWxldGVDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dElkKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9jYWNoZXNbY29udGV4dElkXTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IHt9O1xuICAgIH0sXG5cbiAgICBkZWxldGU6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX2NvbnRleHRba2V5XTtcbiAgICB9LFxuXG4gICAgY2xlYXJBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVzID0ge307XG4gICAgfSxcblxuICAgIGdldENvbnRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnRleHQ7XG4gICAgfSxcblxuICAgIGVhY2hDb250ZXh0IDogZnVuY3Rpb24gKGNiLCBjb250ZXh0KSB7XG4gICAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5fY2FjaGVzKTtcbiAgICAgICAga2V5cy5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIGNiICYmIGNiLmNhbGwoY29udGV4dCwga2V5KTtcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIG1pc3M6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgcmV0dXJuICEgdGhpcy5fY29udGV4dC5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgIH1cbn07XG5cbkNhY2hlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENhY2hlO1xuXG5leHBvcnQgZGVmYXVsdCBDYWNoZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb3JlL0NhY2hlLmpzXG4vLyBtb2R1bGUgaWQgPSAzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///33\n");

/***/ }),
/* 34 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Camera__ = __webpack_require__(37);\n\n/**\n * @constructor clay.camera.Orthographic\n * @extends clay.Camera\n */\nvar Orthographic = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].extend(\n/** @lends clay.camera.Orthographic# */\n{\n    /**\n     * @type {number}\n     */\n    left: -1,\n    /**\n     * @type {number}\n     */\n    right: 1,\n    /**\n     * @type {number}\n     */\n    near: -1,\n    /**\n     * @type {number}\n     */\n    far: 1,\n    /**\n     * @type {number}\n     */\n    top: 1,\n    /**\n     * @type {number}\n     */\n    bottom: -1\n},\n/** @lends clay.camera.Orthographic.prototype */\n{\n\n    updateProjectionMatrix: function() {\n        this.projectionMatrix.ortho(this.left, this.right, this.bottom, this.top, this.near, this.far);\n    },\n\n    decomposeProjectionMatrix: function () {\n        var m = this.projectionMatrix.array;\n        this.left = (-1 - m[12]) / m[0];\n        this.right = (1 - m[12]) / m[0];\n        this.top = (1 - m[13]) / m[5];\n        this.bottom = (-1 - m[13]) / m[5];\n        this.near = -(-1 - m[14]) / m[10];\n        this.far = -(1 - m[14]) / m[10];\n    },\n    /**\n     * @return {clay.camera.Orthographic}\n     */\n    clone: function() {\n        var camera = __WEBPACK_IMPORTED_MODULE_0__Camera__[\"a\" /* default */].prototype.clone.call(this);\n        camera.left = this.left;\n        camera.right = this.right;\n        camera.near = this.near;\n        camera.far = this.far;\n        camera.top = this.top;\n        camera.bottom = this.bottom;\n\n        return camera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Orthographic);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NhbWVyYS9PcnRob2dyYXBoaWMuanM/YTY3YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2FtZXJhIGZyb20gJy4uL0NhbWVyYSc7XG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNhbWVyYS5PcnRob2dyYXBoaWNcbiAqIEBleHRlbmRzIGNsYXkuQ2FtZXJhXG4gKi9cbnZhciBPcnRob2dyYXBoaWMgPSBDYW1lcmEuZXh0ZW5kKFxuLyoqIEBsZW5kcyBjbGF5LmNhbWVyYS5PcnRob2dyYXBoaWMjICovXG57XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBsZWZ0OiAtMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHJpZ2h0OiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgbmVhcjogLTEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBmYXI6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0b3A6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBib3R0b206IC0xXG59LFxuLyoqIEBsZW5kcyBjbGF5LmNhbWVyYS5PcnRob2dyYXBoaWMucHJvdG90eXBlICovXG57XG5cbiAgICB1cGRhdGVQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9uTWF0cml4Lm9ydGhvKHRoaXMubGVmdCwgdGhpcy5yaWdodCwgdGhpcy5ib3R0b20sIHRoaXMudG9wLCB0aGlzLm5lYXIsIHRoaXMuZmFyKTtcbiAgICB9LFxuXG4gICAgZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbSA9IHRoaXMucHJvamVjdGlvbk1hdHJpeC5hcnJheTtcbiAgICAgICAgdGhpcy5sZWZ0ID0gKC0xIC0gbVsxMl0pIC8gbVswXTtcbiAgICAgICAgdGhpcy5yaWdodCA9ICgxIC0gbVsxMl0pIC8gbVswXTtcbiAgICAgICAgdGhpcy50b3AgPSAoMSAtIG1bMTNdKSAvIG1bNV07XG4gICAgICAgIHRoaXMuYm90dG9tID0gKC0xIC0gbVsxM10pIC8gbVs1XTtcbiAgICAgICAgdGhpcy5uZWFyID0gLSgtMSAtIG1bMTRdKSAvIG1bMTBdO1xuICAgICAgICB0aGlzLmZhciA9IC0oMSAtIG1bMTRdKSAvIG1bMTBdO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5jYW1lcmEuT3J0aG9ncmFwaGljfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGNhbWVyYSA9IENhbWVyYS5wcm90b3R5cGUuY2xvbmUuY2FsbCh0aGlzKTtcbiAgICAgICAgY2FtZXJhLmxlZnQgPSB0aGlzLmxlZnQ7XG4gICAgICAgIGNhbWVyYS5yaWdodCA9IHRoaXMucmlnaHQ7XG4gICAgICAgIGNhbWVyYS5uZWFyID0gdGhpcy5uZWFyO1xuICAgICAgICBjYW1lcmEuZmFyID0gdGhpcy5mYXI7XG4gICAgICAgIGNhbWVyYS50b3AgPSB0aGlzLnRvcDtcbiAgICAgICAgY2FtZXJhLmJvdHRvbSA9IHRoaXMuYm90dG9tO1xuXG4gICAgICAgIHJldHVybiBjYW1lcmE7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IE9ydGhvZ3JhcGhpYztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jYW1lcmEvT3J0aG9ncmFwaGljLmpzXG4vLyBtb2R1bGUgaWQgPSAzNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///34\n");

/***/ }),
/* 35 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n\n// PENDING\n// Use topological sort ?\n\n/**\n * Node of graph based post processing.\n *\n * @constructor clay.compositor.CompositorNode\n * @extends clay.core.Base\n *\n */\nvar CompositorNode = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.CompositorNode# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * Input links, will be updated by the graph\n         * @example:\n         *     inputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        inputLinks: {},\n\n        /**\n         * Output links, will be updated by the graph\n         * @example:\n         *     outputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        outputLinks: {},\n\n        // Save the output texture of previous frame\n        // Will be used when there exist a circular reference\n        _prevOutputTextures: {},\n        _outputTextures: {},\n\n        // Example: { name: 2 }\n        _outputReferences: {},\n\n        _rendering: false,\n        // If rendered in this frame\n        _rendered: false,\n\n        _compositor: null\n    };\n},\n/** @lends clay.compositor.CompositorNode.prototype */\n{\n\n    // TODO Remove parameter function callback\n    updateParameter: function (outputName, renderer) {\n        var outputInfo = this.outputs[outputName];\n        var parameters = outputInfo.parameters;\n        var parametersCopy = outputInfo._parametersCopy;\n        if (!parametersCopy) {\n            parametersCopy = outputInfo._parametersCopy = {};\n        }\n        if (parameters) {\n            for (var key in parameters) {\n                if (key !== 'width' && key !== 'height') {\n                    parametersCopy[key] = parameters[key];\n                }\n            }\n        }\n        var width, height;\n        if (parameters.width instanceof Function) {\n            width = parameters.width.call(this, renderer);\n        }\n        else {\n            width = parameters.width;\n        }\n        if (parameters.height instanceof Function) {\n            height = parameters.height.call(this, renderer);\n        }\n        else {\n            height = parameters.height;\n        }\n        if (\n            parametersCopy.width !== width\n            || parametersCopy.height !== height\n        ) {\n            if (this._outputTextures[outputName]) {\n                this._outputTextures[outputName].dispose(renderer.gl);\n            }\n        }\n        parametersCopy.width = width;\n        parametersCopy.height = height;\n\n        return parametersCopy;\n    },\n\n    /**\n     * Set parameter\n     * @param {string} name\n     * @param {} value\n     */\n    setParameter: function (name, value) {},\n    /**\n     * Get parameter value\n     * @param  {string} name\n     * @return {}\n     */\n    getParameter: function (name) {},\n    /**\n     * Set parameters\n     * @param {Object} obj\n     */\n    setParameters: function (obj) {\n        for (var name in obj) {\n            this.setParameter(name, obj[name]);\n        }\n    },\n\n    render: function () {},\n\n    getOutput: function (renderer /*optional*/, name) {\n        if (name == null) {\n            // Return the output texture without rendering\n            name = renderer;\n            return this._outputTextures[name];\n        }\n        var outputInfo = this.outputs[name];\n        if (!outputInfo) {\n            return ;\n        }\n\n        // Already been rendered in this frame\n        if (this._rendered) {\n            // Force return texture in last frame\n            if (outputInfo.outputLastFrame) {\n                return this._prevOutputTextures[name];\n            }\n            else {\n                return this._outputTextures[name];\n            }\n        }\n        else if (\n            // TODO\n            this._rendering   // Solve Circular Reference\n        ) {\n            if (!this._prevOutputTextures[name]) {\n                // Create a blank texture at first pass\n                this._prevOutputTextures[name] = this._compositor.allocateTexture(outputInfo.parameters || {});\n            }\n            return this._prevOutputTextures[name];\n        }\n\n        this.render(renderer);\n\n        return this._outputTextures[name];\n    },\n\n    removeReference: function (outputName) {\n        this._outputReferences[outputName]--;\n        if (this._outputReferences[outputName] === 0) {\n            var outputInfo = this.outputs[outputName];\n            if (outputInfo.keepLastFrame) {\n                if (this._prevOutputTextures[outputName]) {\n                    this._compositor.releaseTexture(this._prevOutputTextures[outputName]);\n                }\n                this._prevOutputTextures[outputName] = this._outputTextures[outputName];\n            }\n            else {\n                // Output of this node have alreay been used by all other nodes\n                // Put the texture back to the pool.\n                this._compositor.releaseTexture(this._outputTextures[outputName]);\n            }\n        }\n    },\n\n    link: function (inputPinName, fromNode, fromPinName) {\n\n        // The relationship from output pin to input pin is one-on-multiple\n        this.inputLinks[inputPinName] = {\n            node: fromNode,\n            pin: fromPinName\n        };\n        if (!fromNode.outputLinks[fromPinName]) {\n            fromNode.outputLinks[fromPinName] = [];\n        }\n        fromNode.outputLinks[fromPinName].push({\n            node: this,\n            pin: inputPinName\n        });\n\n        // Enabled the pin texture in shader\n        this.pass.material.enableTexture(inputPinName);\n    },\n\n    clear: function () {\n        this.inputLinks = {};\n        this.outputLinks = {};\n    },\n\n    updateReference: function (outputName) {\n        if (!this._rendering) {\n            this._rendering = true;\n            for (var inputName in this.inputLinks) {\n                var link = this.inputLinks[inputName];\n                link.node.updateReference(link.pin);\n            }\n            this._rendering = false;\n        }\n        if (outputName) {\n            this._outputReferences[outputName] ++;\n        }\n    },\n\n    beforeFrame: function () {\n        this._rendered = false;\n\n        for (var name in this.outputLinks) {\n            this._outputReferences[name] = 0;\n        }\n    },\n\n    afterFrame: function () {\n        // Put back all the textures to pool\n        for (var name in this.outputLinks) {\n            if (this._outputReferences[name] > 0) {\n                var outputInfo = this.outputs[name];\n                if (outputInfo.keepLastFrame) {\n                    if (this._prevOutputTextures[name]) {\n                        this._compositor.releaseTexture(this._prevOutputTextures[name]);\n                    }\n                    this._prevOutputTextures[name] = this._outputTextures[name];\n                }\n                else {\n                    this._compositor.releaseTexture(this._outputTextures[name]);\n                }\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CompositorNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvQ29tcG9zaXRvck5vZGUuanM/NmMwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuXG4vLyBQRU5ESU5HXG4vLyBVc2UgdG9wb2xvZ2ljYWwgc29ydCA/XG5cbi8qKlxuICogTm9kZSBvZiBncmFwaCBiYXNlZCBwb3N0IHByb2Nlc3NpbmcuXG4gKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZVxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqXG4gKi9cbnZhciBDb21wb3NpdG9yTm9kZSA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGUjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBuYW1lOiAnJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5wdXQgbGlua3MsIHdpbGwgYmUgdXBkYXRlZCBieSB0aGUgZ3JhcGhcbiAgICAgICAgICogQGV4YW1wbGU6XG4gICAgICAgICAqICAgICBpbnB1dE5hbWU6IHtcbiAgICAgICAgICogICAgICAgICBub2RlOiBzb21lTm9kZSxcbiAgICAgICAgICogICAgICAgICBwaW46ICd4eHh4J1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRMaW5rczoge30sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE91dHB1dCBsaW5rcywgd2lsbCBiZSB1cGRhdGVkIGJ5IHRoZSBncmFwaFxuICAgICAgICAgKiBAZXhhbXBsZTpcbiAgICAgICAgICogICAgIG91dHB1dE5hbWU6IHtcbiAgICAgICAgICogICAgICAgICBub2RlOiBzb21lTm9kZSxcbiAgICAgICAgICogICAgICAgICBwaW46ICd4eHh4J1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0TGlua3M6IHt9LFxuXG4gICAgICAgIC8vIFNhdmUgdGhlIG91dHB1dCB0ZXh0dXJlIG9mIHByZXZpb3VzIGZyYW1lXG4gICAgICAgIC8vIFdpbGwgYmUgdXNlZCB3aGVuIHRoZXJlIGV4aXN0IGEgY2lyY3VsYXIgcmVmZXJlbmNlXG4gICAgICAgIF9wcmV2T3V0cHV0VGV4dHVyZXM6IHt9LFxuICAgICAgICBfb3V0cHV0VGV4dHVyZXM6IHt9LFxuXG4gICAgICAgIC8vIEV4YW1wbGU6IHsgbmFtZTogMiB9XG4gICAgICAgIF9vdXRwdXRSZWZlcmVuY2VzOiB7fSxcblxuICAgICAgICBfcmVuZGVyaW5nOiBmYWxzZSxcbiAgICAgICAgLy8gSWYgcmVuZGVyZWQgaW4gdGhpcyBmcmFtZVxuICAgICAgICBfcmVuZGVyZWQ6IGZhbHNlLFxuXG4gICAgICAgIF9jb21wb3NpdG9yOiBudWxsXG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZS5wcm90b3R5cGUgKi9cbntcblxuICAgIC8vIFRPRE8gUmVtb3ZlIHBhcmFtZXRlciBmdW5jdGlvbiBjYWxsYmFja1xuICAgIHVwZGF0ZVBhcmFtZXRlcjogZnVuY3Rpb24gKG91dHB1dE5hbWUsIHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBvdXRwdXRJbmZvID0gdGhpcy5vdXRwdXRzW291dHB1dE5hbWVdO1xuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IG91dHB1dEluZm8ucGFyYW1ldGVycztcbiAgICAgICAgdmFyIHBhcmFtZXRlcnNDb3B5ID0gb3V0cHV0SW5mby5fcGFyYW1ldGVyc0NvcHk7XG4gICAgICAgIGlmICghcGFyYW1ldGVyc0NvcHkpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlcnNDb3B5ID0gb3V0cHV0SW5mby5fcGFyYW1ldGVyc0NvcHkgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnd2lkdGgnICYmIGtleSAhPT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyc0NvcHlba2V5XSA9IHBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoLCBoZWlnaHQ7XG4gICAgICAgIGlmIChwYXJhbWV0ZXJzLndpZHRoIGluc3RhbmNlb2YgRnVuY3Rpb24pIHtcbiAgICAgICAgICAgIHdpZHRoID0gcGFyYW1ldGVycy53aWR0aC5jYWxsKHRoaXMsIHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHdpZHRoID0gcGFyYW1ldGVycy53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycy5oZWlnaHQgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgICAgICAgICAgaGVpZ2h0ID0gcGFyYW1ldGVycy5oZWlnaHQuY2FsbCh0aGlzLCByZW5kZXJlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBoZWlnaHQgPSBwYXJhbWV0ZXJzLmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBwYXJhbWV0ZXJzQ29weS53aWR0aCAhPT0gd2lkdGhcbiAgICAgICAgICAgIHx8IHBhcmFtZXRlcnNDb3B5LmhlaWdodCAhPT0gaGVpZ2h0XG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fb3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV0uZGlzcG9zZShyZW5kZXJlci5nbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcGFyYW1ldGVyc0NvcHkud2lkdGggPSB3aWR0aDtcbiAgICAgICAgcGFyYW1ldGVyc0NvcHkuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJzQ29weTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHBhcmFtZXRlclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtIHt9IHZhbHVlXG4gICAgICovXG4gICAgc2V0UGFyYW1ldGVyOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHt9LFxuICAgIC8qKlxuICAgICAqIEdldCBwYXJhbWV0ZXIgdmFsdWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt9XG4gICAgICovXG4gICAgZ2V0UGFyYW1ldGVyOiBmdW5jdGlvbiAobmFtZSkge30sXG4gICAgLyoqXG4gICAgICogU2V0IHBhcmFtZXRlcnNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gICAgICovXG4gICAgc2V0UGFyYW1ldGVyczogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iaikge1xuICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXIobmFtZSwgb2JqW25hbWVdKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHt9LFxuXG4gICAgZ2V0T3V0cHV0OiBmdW5jdGlvbiAocmVuZGVyZXIgLypvcHRpb25hbCovLCBuYW1lKSB7XG4gICAgICAgIGlmIChuYW1lID09IG51bGwpIHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgb3V0cHV0IHRleHR1cmUgd2l0aG91dCByZW5kZXJpbmdcbiAgICAgICAgICAgIG5hbWUgPSByZW5kZXJlcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vdXRwdXRUZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tuYW1lXTtcbiAgICAgICAgaWYgKCFvdXRwdXRJbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWxyZWFkeSBiZWVuIHJlbmRlcmVkIGluIHRoaXMgZnJhbWVcbiAgICAgICAgaWYgKHRoaXMuX3JlbmRlcmVkKSB7XG4gICAgICAgICAgICAvLyBGb3JjZSByZXR1cm4gdGV4dHVyZSBpbiBsYXN0IGZyYW1lXG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5vdXRwdXRMYXN0RnJhbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX291dHB1dFRleHR1cmVzW25hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFxuICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgdGhpcy5fcmVuZGVyaW5nICAgLy8gU29sdmUgQ2lyY3VsYXIgUmVmZXJlbmNlXG4gICAgICAgICkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBibGFuayB0ZXh0dXJlIGF0IGZpcnN0IHBhc3NcbiAgICAgICAgICAgICAgICB0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbbmFtZV0gPSB0aGlzLl9jb21wb3NpdG9yLmFsbG9jYXRlVGV4dHVyZShvdXRwdXRJbmZvLnBhcmFtZXRlcnMgfHwge30pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVuZGVyKHJlbmRlcmVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5fb3V0cHV0VGV4dHVyZXNbbmFtZV07XG4gICAgfSxcblxuICAgIHJlbW92ZVJlZmVyZW5jZTogZnVuY3Rpb24gKG91dHB1dE5hbWUpIHtcbiAgICAgICAgdGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tvdXRwdXROYW1lXS0tO1xuICAgICAgICBpZiAodGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tvdXRwdXROYW1lXSA9PT0gMCkge1xuICAgICAgICAgICAgdmFyIG91dHB1dEluZm8gPSB0aGlzLm91dHB1dHNbb3V0cHV0TmFtZV07XG4gICAgICAgICAgICBpZiAob3V0cHV0SW5mby5rZWVwTGFzdEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlbGVhc2VUZXh0dXJlKHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuX3ByZXZPdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSA9IHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gT3V0cHV0IG9mIHRoaXMgbm9kZSBoYXZlIGFscmVheSBiZWVuIHVzZWQgYnkgYWxsIG90aGVyIG5vZGVzXG4gICAgICAgICAgICAgICAgLy8gUHV0IHRoZSB0ZXh0dXJlIGJhY2sgdG8gdGhlIHBvb2wuXG4gICAgICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5yZWxlYXNlVGV4dHVyZSh0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgbGluazogZnVuY3Rpb24gKGlucHV0UGluTmFtZSwgZnJvbU5vZGUsIGZyb21QaW5OYW1lKSB7XG5cbiAgICAgICAgLy8gVGhlIHJlbGF0aW9uc2hpcCBmcm9tIG91dHB1dCBwaW4gdG8gaW5wdXQgcGluIGlzIG9uZS1vbi1tdWx0aXBsZVxuICAgICAgICB0aGlzLmlucHV0TGlua3NbaW5wdXRQaW5OYW1lXSA9IHtcbiAgICAgICAgICAgIG5vZGU6IGZyb21Ob2RlLFxuICAgICAgICAgICAgcGluOiBmcm9tUGluTmFtZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIWZyb21Ob2RlLm91dHB1dExpbmtzW2Zyb21QaW5OYW1lXSkge1xuICAgICAgICAgICAgZnJvbU5vZGUub3V0cHV0TGlua3NbZnJvbVBpbk5hbWVdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgZnJvbU5vZGUub3V0cHV0TGlua3NbZnJvbVBpbk5hbWVdLnB1c2goe1xuICAgICAgICAgICAgbm9kZTogdGhpcyxcbiAgICAgICAgICAgIHBpbjogaW5wdXRQaW5OYW1lXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEVuYWJsZWQgdGhlIHBpbiB0ZXh0dXJlIGluIHNoYWRlclxuICAgICAgICB0aGlzLnBhc3MubWF0ZXJpYWwuZW5hYmxlVGV4dHVyZShpbnB1dFBpbk5hbWUpO1xuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLmlucHV0TGlua3MgPSB7fTtcbiAgICAgICAgdGhpcy5vdXRwdXRMaW5rcyA9IHt9O1xuICAgIH0sXG5cbiAgICB1cGRhdGVSZWZlcmVuY2U6IGZ1bmN0aW9uIChvdXRwdXROYW1lKSB7XG4gICAgICAgIGlmICghdGhpcy5fcmVuZGVyaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJpbmcgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHRoaXMuaW5wdXRMaW5rcykge1xuICAgICAgICAgICAgICAgIHZhciBsaW5rID0gdGhpcy5pbnB1dExpbmtzW2lucHV0TmFtZV07XG4gICAgICAgICAgICAgICAgbGluay5ub2RlLnVwZGF0ZVJlZmVyZW5jZShsaW5rLnBpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9yZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3V0cHV0TmFtZSkge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tvdXRwdXROYW1lXSArKztcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiZWZvcmVGcmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZCA9IGZhbHNlO1xuXG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5vdXRwdXRMaW5rcykge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tuYW1lXSA9IDA7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYWZ0ZXJGcmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBQdXQgYmFjayBhbGwgdGhlIHRleHR1cmVzIHRvIHBvb2xcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLm91dHB1dExpbmtzKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fb3V0cHV0UmVmZXJlbmNlc1tuYW1lXSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tuYW1lXTtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0SW5mby5rZWVwTGFzdEZyYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IucmVsZWFzZVRleHR1cmUodGhpcy5fcHJldk91dHB1dFRleHR1cmVzW25hbWVdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmV2T3V0cHV0VGV4dHVyZXNbbmFtZV0gPSB0aGlzLl9vdXRwdXRUZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IucmVsZWFzZVRleHR1cmUodGhpcy5fb3V0cHV0VGV4dHVyZXNbbmFtZV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDb21wb3NpdG9yTm9kZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL0NvbXBvc2l0b3JOb2RlLmpzXG4vLyBtb2R1bGUgaWQgPSAzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///35\n");

/***/ }),
/* 36 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__LinkedList__ = __webpack_require__(77);\n\n\n/**\n * LRU Cache\n * @constructor\n * @alias clay.core.LRU\n */\nvar LRU = function (maxSize) {\n\n    this._list = new __WEBPACK_IMPORTED_MODULE_0__LinkedList__[\"a\" /* default */]();\n\n    this._map = {};\n\n    this._maxSize = maxSize || 10;\n};\n\n/**\n * Set cache max size\n * @param {number} size\n */\nLRU.prototype.setMaxSize = function (size) {\n    this._maxSize = size;\n};\n\n/**\n * @param  {string} key\n * @param  {} value\n */\nLRU.prototype.put = function (key, value) {\n    if (!this._map.hasOwnProperty(key)) {\n        var len = this._list.length();\n        if (len >= this._maxSize && len > 0) {\n            // Remove the least recently used\n            var leastUsedEntry = this._list.head;\n            this._list.remove(leastUsedEntry);\n            delete this._map[leastUsedEntry.key];\n        }\n\n        var entry = this._list.insert(value);\n        entry.key = key;\n        this._map[key] = entry;\n    }\n};\n\n/**\n * @param  {string} key\n * @return {}\n */\nLRU.prototype.get = function (key) {\n    var entry = this._map[key];\n    if (this._map.hasOwnProperty(key)) {\n        // Put the latest used entry in the tail\n        if (entry !== this._list.tail) {\n            this._list.remove(entry);\n            this._list.insertEntry(entry);\n        }\n\n        return entry.value;\n    }\n};\n\n/**\n * @param {string} key\n */\nLRU.prototype.remove = function (key) {\n    var entry = this._map[key];\n    if (typeof(entry) !== 'undefined') {\n        delete this._map[key];\n        this._list.remove(entry);\n    }\n};\n\n/**\n * Clear the cache\n */\nLRU.prototype.clear = function () {\n    this._list.clear();\n    this._map = {};\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LRU);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvTFJVLmpzPzk1M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpbmtlZExpc3QgZnJvbSAnLi9MaW5rZWRMaXN0JztcblxuLyoqXG4gKiBMUlUgQ2FjaGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuY29yZS5MUlVcbiAqL1xudmFyIExSVSA9IGZ1bmN0aW9uIChtYXhTaXplKSB7XG5cbiAgICB0aGlzLl9saXN0ID0gbmV3IExpbmtlZExpc3QoKTtcblxuICAgIHRoaXMuX21hcCA9IHt9O1xuXG4gICAgdGhpcy5fbWF4U2l6ZSA9IG1heFNpemUgfHwgMTA7XG59O1xuXG4vKipcbiAqIFNldCBjYWNoZSBtYXggc2l6ZVxuICogQHBhcmFtIHtudW1iZXJ9IHNpemVcbiAqL1xuTFJVLnByb3RvdHlwZS5zZXRNYXhTaXplID0gZnVuY3Rpb24gKHNpemUpIHtcbiAgICB0aGlzLl9tYXhTaXplID0gc2l6ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7c3RyaW5nfSBrZXlcbiAqIEBwYXJhbSAge30gdmFsdWVcbiAqL1xuTFJVLnByb3RvdHlwZS5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgIGlmICghdGhpcy5fbWFwLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2xpc3QubGVuZ3RoKCk7XG4gICAgICAgIGlmIChsZW4gPj0gdGhpcy5fbWF4U2l6ZSAmJiBsZW4gPiAwKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWRcbiAgICAgICAgICAgIHZhciBsZWFzdFVzZWRFbnRyeSA9IHRoaXMuX2xpc3QuaGVhZDtcbiAgICAgICAgICAgIHRoaXMuX2xpc3QucmVtb3ZlKGxlYXN0VXNlZEVudHJ5KTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLl9tYXBbbGVhc3RVc2VkRW50cnkua2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBlbnRyeSA9IHRoaXMuX2xpc3QuaW5zZXJ0KHZhbHVlKTtcbiAgICAgICAgZW50cnkua2V5ID0ga2V5O1xuICAgICAgICB0aGlzLl9tYXBba2V5XSA9IGVudHJ5O1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtICB7c3RyaW5nfSBrZXlcbiAqIEByZXR1cm4ge31cbiAqL1xuTFJVLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGVudHJ5ID0gdGhpcy5fbWFwW2tleV07XG4gICAgaWYgKHRoaXMuX21hcC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIC8vIFB1dCB0aGUgbGF0ZXN0IHVzZWQgZW50cnkgaW4gdGhlIHRhaWxcbiAgICAgICAgaWYgKGVudHJ5ICE9PSB0aGlzLl9saXN0LnRhaWwpIHtcbiAgICAgICAgICAgIHRoaXMuX2xpc3QucmVtb3ZlKGVudHJ5KTtcbiAgICAgICAgICAgIHRoaXMuX2xpc3QuaW5zZXJ0RW50cnkoZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICovXG5MUlUucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLl9tYXBba2V5XTtcbiAgICBpZiAodHlwZW9mKGVudHJ5KSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuX21hcFtrZXldO1xuICAgICAgICB0aGlzLl9saXN0LnJlbW92ZShlbnRyeSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGVhciB0aGUgY2FjaGVcbiAqL1xuTFJVLnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9saXN0LmNsZWFyKCk7XG4gICAgdGhpcy5fbWFwID0ge307XG59O1xuXG5leHBvcnQgZGVmYXVsdCBMUlU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS9MUlUuanNcbi8vIG1vZHVsZSBpZCA9IDM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///36\n");

/***/ }),
/* 37 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n/**\n * @constructor clay.Camera\n * @extends clay.Node\n */\nvar Camera = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Camera# */ {\n        /**\n         * Camera projection matrix\n         * @type {clay.Matrix4}\n         */\n        projectionMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * Inverse of camera projection matrix\n         * @type {clay.Matrix4}\n         */\n        invProjectionMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * View matrix, equal to inverse of camera's world matrix\n         * @type {clay.Matrix4}\n         */\n        viewMatrix: new __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */](),\n\n        /**\n         * Camera frustum in view space\n         * @type {clay.Frustum}\n         */\n        frustum: new __WEBPACK_IMPORTED_MODULE_2__math_Frustum__[\"a\" /* default */]()\n    };\n}, function () {\n    this.update(true);\n},\n/** @lends clay.Camera.prototype */\n{\n\n    update: function (force) {\n        __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.update.call(this, force);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.viewMatrix, this.worldTransform);\n\n        this.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.invProjectionMatrix, this.projectionMatrix);\n\n        this.frustum.setFromProjection(this.projectionMatrix);\n    },\n\n    /**\n     * Set camera view matrix\n     */\n    setViewMatrix: function (viewMatrix) {\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].copy(this.viewMatrix, viewMatrix);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.worldTransform, viewMatrix);\n        this.decomposeWorldTransform();\n    },\n\n    /**\n     * Decompose camera projection matrix\n     */\n    decomposeProjectionMatrix: function () {},\n\n    /**\n     * Set camera projection matrix\n     * @param {clay.Matrix4} projectionMatrix\n     */\n    setProjectionMatrix: function (projectionMatrix) {\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].copy(this.projectionMatrix, projectionMatrix);\n        __WEBPACK_IMPORTED_MODULE_1__math_Matrix4__[\"a\" /* default */].invert(this.invProjectionMatrix, projectionMatrix);\n        this.decomposeProjectionMatrix();\n    },\n    /**\n     * Update projection matrix, called after update\n     */\n    updateProjectionMatrix: function () {},\n\n    /**\n     * Cast a picking ray from camera near plane to far plane\n     * @function\n     * @param {clay.Vector2} ndc\n     * @param {clay.Ray} [out]\n     * @return {clay.Ray}\n     */\n    castRay: (function () {\n        var v4 = __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].create();\n        return function (ndc, out) {\n            var ray = out !== undefined ? out : new __WEBPACK_IMPORTED_MODULE_3__math_Ray__[\"a\" /* default */]();\n            var x = ndc.array[0];\n            var y = ndc.array[1];\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].set(v4, x, y, -1, 1);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.invProjectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].scale(ray.origin.array, v4, 1 / v4[3]);\n\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].set(v4, x, y, 1, 1);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.invProjectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec4__[\"a\" /* default */].transformMat4(v4, v4, this.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].scale(v4, v4, 1 / v4[3]);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].sub(ray.direction.array, v4, ray.origin.array);\n\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_vec3__[\"a\" /* default */].normalize(ray.direction.array, ray.direction.array);\n            ray.direction._dirty = true;\n            ray.origin._dirty = true;\n\n            return ray;\n        };\n    })(),\n\n    /**\n     * @function\n     * @name clone\n     * @return {clay.Camera}\n     * @memberOf clay.Camera.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Camera);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0NhbWVyYS5qcz9mY2RkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgRnJ1c3R1bSBmcm9tICcuL21hdGgvRnJ1c3R1bSc7XG5pbXBvcnQgUmF5IGZyb20gJy4vbWF0aC9SYXknO1xuXG5pbXBvcnQgdmVjNCBmcm9tICcuL2dsbWF0cml4L3ZlYzQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi9nbG1hdHJpeC92ZWMzJztcblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LkNhbWVyYVxuICogQGV4dGVuZHMgY2xheS5Ob2RlXG4gKi9cbnZhciBDYW1lcmEgPSBOb2RlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5DYW1lcmEjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbWVyYSBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5NYXRyaXg0fVxuICAgICAgICAgKi9cbiAgICAgICAgcHJvamVjdGlvbk1hdHJpeDogbmV3IE1hdHJpeDQoKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW52ZXJzZSBvZiBjYW1lcmEgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgICAgICogQHR5cGUge2NsYXkuTWF0cml4NH1cbiAgICAgICAgICovXG4gICAgICAgIGludlByb2plY3Rpb25NYXRyaXg6IG5ldyBNYXRyaXg0KCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFZpZXcgbWF0cml4LCBlcXVhbCB0byBpbnZlcnNlIG9mIGNhbWVyYSdzIHdvcmxkIG1hdHJpeFxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5NYXRyaXg0fVxuICAgICAgICAgKi9cbiAgICAgICAgdmlld01hdHJpeDogbmV3IE1hdHJpeDQoKSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FtZXJhIGZydXN0dW0gaW4gdmlldyBzcGFjZVxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5GcnVzdHVtfVxuICAgICAgICAgKi9cbiAgICAgICAgZnJ1c3R1bTogbmV3IEZydXN0dW0oKVxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy51cGRhdGUodHJ1ZSk7XG59LFxuLyoqIEBsZW5kcyBjbGF5LkNhbWVyYS5wcm90b3R5cGUgKi9cbntcblxuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZvcmNlKSB7XG4gICAgICAgIE5vZGUucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMsIGZvcmNlKTtcbiAgICAgICAgTWF0cml4NC5pbnZlcnQodGhpcy52aWV3TWF0cml4LCB0aGlzLndvcmxkVHJhbnNmb3JtKTtcblxuICAgICAgICB0aGlzLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgTWF0cml4NC5pbnZlcnQodGhpcy5pbnZQcm9qZWN0aW9uTWF0cml4LCB0aGlzLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIHRoaXMuZnJ1c3R1bS5zZXRGcm9tUHJvamVjdGlvbih0aGlzLnByb2plY3Rpb25NYXRyaXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgY2FtZXJhIHZpZXcgbWF0cml4XG4gICAgICovXG4gICAgc2V0Vmlld01hdHJpeDogZnVuY3Rpb24gKHZpZXdNYXRyaXgpIHtcbiAgICAgICAgTWF0cml4NC5jb3B5KHRoaXMudmlld01hdHJpeCwgdmlld01hdHJpeCk7XG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KHRoaXMud29ybGRUcmFuc2Zvcm0sIHZpZXdNYXRyaXgpO1xuICAgICAgICB0aGlzLmRlY29tcG9zZVdvcmxkVHJhbnNmb3JtKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlY29tcG9zZSBjYW1lcmEgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgKi9cbiAgICBkZWNvbXBvc2VQcm9qZWN0aW9uTWF0cml4OiBmdW5jdGlvbiAoKSB7fSxcblxuICAgIC8qKlxuICAgICAqIFNldCBjYW1lcmEgcHJvamVjdGlvbiBtYXRyaXhcbiAgICAgKiBAcGFyYW0ge2NsYXkuTWF0cml4NH0gcHJvamVjdGlvbk1hdHJpeFxuICAgICAqL1xuICAgIHNldFByb2plY3Rpb25NYXRyaXg6IGZ1bmN0aW9uIChwcm9qZWN0aW9uTWF0cml4KSB7XG4gICAgICAgIE1hdHJpeDQuY29weSh0aGlzLnByb2plY3Rpb25NYXRyaXgsIHByb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICBNYXRyaXg0LmludmVydCh0aGlzLmludlByb2plY3Rpb25NYXRyaXgsIHByb2plY3Rpb25NYXRyaXgpO1xuICAgICAgICB0aGlzLmRlY29tcG9zZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBwcm9qZWN0aW9uIG1hdHJpeCwgY2FsbGVkIGFmdGVyIHVwZGF0ZVxuICAgICAqL1xuICAgIHVwZGF0ZVByb2plY3Rpb25NYXRyaXg6IGZ1bmN0aW9uICgpIHt9LFxuXG4gICAgLyoqXG4gICAgICogQ2FzdCBhIHBpY2tpbmcgcmF5IGZyb20gY2FtZXJhIG5lYXIgcGxhbmUgdG8gZmFyIHBsYW5lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjJ9IG5kY1xuICAgICAqIEBwYXJhbSB7Y2xheS5SYXl9IFtvdXRdXG4gICAgICogQHJldHVybiB7Y2xheS5SYXl9XG4gICAgICovXG4gICAgY2FzdFJheTogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHY0ID0gdmVjNC5jcmVhdGUoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChuZGMsIG91dCkge1xuICAgICAgICAgICAgdmFyIHJheSA9IG91dCAhPT0gdW5kZWZpbmVkID8gb3V0IDogbmV3IFJheSgpO1xuICAgICAgICAgICAgdmFyIHggPSBuZGMuYXJyYXlbMF07XG4gICAgICAgICAgICB2YXIgeSA9IG5kYy5hcnJheVsxXTtcbiAgICAgICAgICAgIHZlYzQuc2V0KHY0LCB4LCB5LCAtMSwgMSk7XG4gICAgICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQodjQsIHY0LCB0aGlzLmludlByb2plY3Rpb25NYXRyaXguYXJyYXkpO1xuICAgICAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KHY0LCB2NCwgdGhpcy53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHJheS5vcmlnaW4uYXJyYXksIHY0LCAxIC8gdjRbM10pO1xuXG4gICAgICAgICAgICB2ZWM0LnNldCh2NCwgeCwgeSwgMSwgMSk7XG4gICAgICAgICAgICB2ZWM0LnRyYW5zZm9ybU1hdDQodjQsIHY0LCB0aGlzLmludlByb2plY3Rpb25NYXRyaXguYXJyYXkpO1xuICAgICAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KHY0LCB2NCwgdGhpcy53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHY0LCB2NCwgMSAvIHY0WzNdKTtcbiAgICAgICAgICAgIHZlYzMuc3ViKHJheS5kaXJlY3Rpb24uYXJyYXksIHY0LCByYXkub3JpZ2luLmFycmF5KTtcblxuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUocmF5LmRpcmVjdGlvbi5hcnJheSwgcmF5LmRpcmVjdGlvbi5hcnJheSk7XG4gICAgICAgICAgICByYXkuZGlyZWN0aW9uLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICByYXkub3JpZ2luLl9kaXJ0eSA9IHRydWU7XG5cbiAgICAgICAgICAgIHJldHVybiByYXk7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIGNsb25lXG4gICAgICogQHJldHVybiB7Y2xheS5DYW1lcmF9XG4gICAgICogQG1lbWJlck9mIGNsYXkuQ2FtZXJhLnByb3RvdHlwZVxuICAgICAqL1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENhbWVyYTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9DYW1lcmEuanNcbi8vIG1vZHVsZSBpZCA9IDM3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///37\n");

/***/ }),
/* 38 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\nvar EPSILON = 1e-5;\n\n/**\n * @constructor\n * @alias clay.Ray\n * @param {clay.Vector3} [origin]\n * @param {clay.Vector3} [direction]\n */\nvar Ray = function (origin, direction) {\n    /**\n     * @type {clay.Vector3}\n     */\n    this.origin = origin || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n    /**\n     * @type {clay.Vector3}\n     */\n    this.direction = direction || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n};\n\nRay.prototype = {\n\n    constructor: Ray,\n\n    // http://www.siggraph.org/education/materials/HyperGraph/raytrace/rayplane_intersection.htm\n    /**\n     * Calculate intersection point between ray and a give plane\n     * @param  {clay.Plane} plane\n     * @param  {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    intersectPlane: function (plane, out) {\n        var pn = plane.normal.array;\n        var d = plane.distance;\n        var ro = this.origin.array;\n        var rd = this.direction.array;\n\n        var divider = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(pn, rd);\n        // ray is parallel to the plane\n        if (divider === 0) {\n            return null;\n        }\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        var t = (__WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(pn, ro) - d) / divider;\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, ro, rd, -t);\n        out._dirty = true;\n        return out;\n    },\n\n    /**\n     * Mirror the ray against plane\n     * @param  {clay.Plane} plane\n     */\n    mirrorAgainstPlane: function (plane) {\n        // Distance to plane\n        var d = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(plane.normal.array, this.direction.array);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.direction.array, this.direction.array, plane.normal.array, -d * 2);\n        this.direction._dirty = true;\n    },\n\n    distanceToPoint: (function () {\n        var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        return function (point) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v, point, this.origin.array);\n            // Distance from projection point to origin\n            var b = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(v, this.direction.array);\n            if (b < 0) {\n                return __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].distance(this.origin.array, point);\n            }\n            // Squared distance from center to origin\n            var c2 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lenSquared(v);\n            // Squared distance from center to projection point\n            return Math.sqrt(c2 - b * b);\n        };\n    })(),\n\n    /**\n     * Calculate intersection point between ray and sphere\n     * @param  {clay.Vector3} center\n     * @param  {number} radius\n     * @param  {clay.Vector3} out\n     * @return {clay.Vector3}\n     */\n    intersectSphere: (function () {\n        var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        return function (center, radius, out) {\n            var origin = this.origin.array;\n            var direction = this.direction.array;\n            center = center.array;\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(v, center, origin);\n            // Distance from projection point to origin\n            var b = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(v, direction);\n            // Squared distance from center to origin\n            var c2 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].squaredLength(v);\n            // Squared distance from center to projection point\n            var d2 = c2 - b * b;\n\n            var r2 = radius * radius;\n            // No intersection\n            if (d2 > r2) {\n                return;\n            }\n\n            var a = Math.sqrt(r2 - d2);\n            // First intersect point\n            var t0 = b - a;\n            // Second intersect point\n            var t1 = b + a;\n\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            if (t0 < 0) {\n                if (t1 < 0) {\n                    return null;\n                }\n                else {\n                    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, direction, t1);\n                    return out;\n                }\n            }\n            else {\n                __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, direction, t0);\n                return out;\n            }\n        };\n    })(),\n\n    // http://www.scratchapixel.com/lessons/3d-basic-lessons/lesson-7-intersecting-simple-shapes/ray-box-intersection/\n    /**\n     * Calculate intersection point between ray and bounding box\n     * @param {clay.BoundingBox} bbox\n     * @param {clay.Vector3}\n     * @return {clay.Vector3}\n     */\n    intersectBoundingBox: function (bbox, out) {\n        var dir = this.direction.array;\n        var origin = this.origin.array;\n        var min = bbox.min.array;\n        var max = bbox.max.array;\n\n        var invdirx = 1 / dir[0];\n        var invdiry = 1 / dir[1];\n        var invdirz = 1 / dir[2];\n\n        var tmin, tmax, tymin, tymax, tzmin, tzmax;\n        if (invdirx >= 0) {\n            tmin = (min[0] - origin[0]) * invdirx;\n            tmax = (max[0] - origin[0]) * invdirx;\n        }\n        else {\n            tmax = (min[0] - origin[0]) * invdirx;\n            tmin = (max[0] - origin[0]) * invdirx;\n        }\n        if (invdiry >= 0) {\n            tymin = (min[1] - origin[1]) * invdiry;\n            tymax = (max[1] - origin[1]) * invdiry;\n        }\n        else {\n            tymax = (min[1] - origin[1]) * invdiry;\n            tymin = (max[1] - origin[1]) * invdiry;\n        }\n\n        if ((tmin > tymax) || (tymin > tmax)) {\n            return null;\n        }\n\n        if (tymin > tmin || tmin !== tmin) {\n            tmin = tymin;\n        }\n        if (tymax < tmax || tmax !== tmax) {\n            tmax = tymax;\n        }\n\n        if (invdirz >= 0) {\n            tzmin = (min[2] - origin[2]) * invdirz;\n            tzmax = (max[2] - origin[2]) * invdirz;\n        }\n        else {\n            tzmax = (min[2] - origin[2]) * invdirz;\n            tzmin = (max[2] - origin[2]) * invdirz;\n        }\n\n        if ((tmin > tzmax) || (tzmin > tmax)) {\n            return null;\n        }\n\n        if (tzmin > tmin || tmin !== tmin) {\n            tmin = tzmin;\n        }\n        if (tzmax < tmax || tmax !== tmax) {\n            tmax = tzmax;\n        }\n        if (tmax < 0) {\n            return null;\n        }\n\n        var t = tmin >= 0 ? tmin : tmax;\n\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, dir, t);\n        return out;\n    },\n\n    // http://en.wikipedia.org/wiki/M%C3%B6ller%E2%80%93Trumbore_intersection_algorithm\n    /**\n     * Calculate intersection point between ray and three triangle vertices\n     * @param {clay.Vector3} a\n     * @param {clay.Vector3} b\n     * @param {clay.Vector3} c\n     * @param {boolean}           singleSided, CW triangle will be ignored\n     * @param {clay.Vector3} [out]\n     * @param {clay.Vector3} [barycenteric] barycentric coords\n     * @return {clay.Vector3}\n     */\n    intersectTriangle: (function () {\n\n        var eBA = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var eCA = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var AO = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n        var vCross = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function (a, b, c, singleSided, out, barycenteric) {\n            var dir = this.direction.array;\n            var origin = this.origin.array;\n            a = a.array;\n            b = b.array;\n            c = c.array;\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(eBA, b, a);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(eCA, c, a);\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eCA, dir);\n\n            var det = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(eBA, vCross);\n\n            if (singleSided) {\n                if (det > -EPSILON) {\n                    return null;\n                }\n            }\n            else {\n                if (det > -EPSILON && det < EPSILON) {\n                    return null;\n                }\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(AO, origin, a);\n            var u = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(vCross, AO) / det;\n            if (u < 0 || u > 1) {\n                return null;\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eBA, AO);\n            var v = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(dir, vCross) / det;\n\n            if (v < 0 || v > 1 || (u + v > 1)) {\n                return null;\n            }\n\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].cross(vCross, eBA, eCA);\n            var t = -__WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].dot(AO, vCross) / det;\n\n            if (t < 0) {\n                return null;\n            }\n\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            if (barycenteric) {\n                __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].set(barycenteric, (1 - u - v), u, v);\n            }\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, origin, dir, t);\n\n            return out;\n        };\n    })(),\n\n    /**\n     * Apply an affine transform matrix to the ray\n     * @return {clay.Matrix4} matrix\n     */\n    applyTransform: function (matrix) {\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].add(this.direction, this.direction, this.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].transformMat4(this.origin, this.origin, matrix);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].transformMat4(this.direction, this.direction, matrix);\n\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].sub(this.direction, this.direction, this.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].normalize(this.direction, this.direction);\n    },\n\n    /**\n     * Copy values from another ray\n     * @param {clay.Ray} ray\n     */\n    copy: function (ray) {\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].copy(this.origin, ray.origin);\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].copy(this.direction, ray.direction);\n    },\n\n    /**\n     * Clone a new ray\n     * @return {clay.Ray}\n     */\n    clone: function () {\n        var ray = new Ray();\n        ray.copy(this);\n        return ray;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Ray);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvUmF5LmpzP2IyMzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9WZWN0b3IzJztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG52YXIgRVBTSUxPTiA9IDFlLTU7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5SYXlcbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBbb3JpZ2luXVxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IFtkaXJlY3Rpb25dXG4gKi9cbnZhciBSYXkgPSBmdW5jdGlvbiAob3JpZ2luLCBkaXJlY3Rpb24pIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMub3JpZ2luID0gb3JpZ2luIHx8IG5ldyBWZWN0b3IzKCk7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbiB8fCBuZXcgVmVjdG9yMygpO1xufTtcblxuUmF5LnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBSYXksXG5cbiAgICAvLyBodHRwOi8vd3d3LnNpZ2dyYXBoLm9yZy9lZHVjYXRpb24vbWF0ZXJpYWxzL0h5cGVyR3JhcGgvcmF5dHJhY2UvcmF5cGxhbmVfaW50ZXJzZWN0aW9uLmh0bVxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gcG9pbnQgYmV0d2VlbiByYXkgYW5kIGEgZ2l2ZSBwbGFuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuUGxhbmV9IHBsYW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RQbGFuZTogZnVuY3Rpb24gKHBsYW5lLCBvdXQpIHtcbiAgICAgICAgdmFyIHBuID0gcGxhbmUubm9ybWFsLmFycmF5O1xuICAgICAgICB2YXIgZCA9IHBsYW5lLmRpc3RhbmNlO1xuICAgICAgICB2YXIgcm8gPSB0aGlzLm9yaWdpbi5hcnJheTtcbiAgICAgICAgdmFyIHJkID0gdGhpcy5kaXJlY3Rpb24uYXJyYXk7XG5cbiAgICAgICAgdmFyIGRpdmlkZXIgPSB2ZWMzLmRvdChwbiwgcmQpO1xuICAgICAgICAvLyByYXkgaXMgcGFyYWxsZWwgdG8gdGhlIHBsYW5lXG4gICAgICAgIGlmIChkaXZpZGVyID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgdCA9ICh2ZWMzLmRvdChwbiwgcm8pIC0gZCkgLyBkaXZpZGVyO1xuICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgcm8sIHJkLCAtdCk7XG4gICAgICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNaXJyb3IgdGhlIHJheSBhZ2FpbnN0IHBsYW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5QbGFuZX0gcGxhbmVcbiAgICAgKi9cbiAgICBtaXJyb3JBZ2FpbnN0UGxhbmU6IGZ1bmN0aW9uIChwbGFuZSkge1xuICAgICAgICAvLyBEaXN0YW5jZSB0byBwbGFuZVxuICAgICAgICB2YXIgZCA9IHZlYzMuZG90KHBsYW5lLm5vcm1hbC5hcnJheSwgdGhpcy5kaXJlY3Rpb24uYXJyYXkpO1xuICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKHRoaXMuZGlyZWN0aW9uLmFycmF5LCB0aGlzLmRpcmVjdGlvbi5hcnJheSwgcGxhbmUubm9ybWFsLmFycmF5LCAtZCAqIDIpO1xuICAgICAgICB0aGlzLmRpcmVjdGlvbi5fZGlydHkgPSB0cnVlO1xuICAgIH0sXG5cbiAgICBkaXN0YW5jZVRvUG9pbnQ6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2ID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChwb2ludCkge1xuICAgICAgICAgICAgdmVjMy5zdWIodiwgcG9pbnQsIHRoaXMub3JpZ2luLmFycmF5KTtcbiAgICAgICAgICAgIC8vIERpc3RhbmNlIGZyb20gcHJvamVjdGlvbiBwb2ludCB0byBvcmlnaW5cbiAgICAgICAgICAgIHZhciBiID0gdmVjMy5kb3QodiwgdGhpcy5kaXJlY3Rpb24uYXJyYXkpO1xuICAgICAgICAgICAgaWYgKGIgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZlYzMuZGlzdGFuY2UodGhpcy5vcmlnaW4uYXJyYXksIHBvaW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFNxdWFyZWQgZGlzdGFuY2UgZnJvbSBjZW50ZXIgdG8gb3JpZ2luXG4gICAgICAgICAgICB2YXIgYzIgPSB2ZWMzLmxlblNxdWFyZWQodik7XG4gICAgICAgICAgICAvLyBTcXVhcmVkIGRpc3RhbmNlIGZyb20gY2VudGVyIHRvIHByb2plY3Rpb24gcG9pbnRcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoYzIgLSBiICogYik7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSBpbnRlcnNlY3Rpb24gcG9pbnQgYmV0d2VlbiByYXkgYW5kIHNwaGVyZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gY2VudGVyXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSByYWRpdXNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IG91dFxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RTcGhlcmU6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB2ID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChjZW50ZXIsIHJhZGl1cywgb3V0KSB7XG4gICAgICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5vcmlnaW4uYXJyYXk7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gdGhpcy5kaXJlY3Rpb24uYXJyYXk7XG4gICAgICAgICAgICBjZW50ZXIgPSBjZW50ZXIuYXJyYXk7XG4gICAgICAgICAgICB2ZWMzLnN1Yih2LCBjZW50ZXIsIG9yaWdpbik7XG4gICAgICAgICAgICAvLyBEaXN0YW5jZSBmcm9tIHByb2plY3Rpb24gcG9pbnQgdG8gb3JpZ2luXG4gICAgICAgICAgICB2YXIgYiA9IHZlYzMuZG90KHYsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAvLyBTcXVhcmVkIGRpc3RhbmNlIGZyb20gY2VudGVyIHRvIG9yaWdpblxuICAgICAgICAgICAgdmFyIGMyID0gdmVjMy5zcXVhcmVkTGVuZ3RoKHYpO1xuICAgICAgICAgICAgLy8gU3F1YXJlZCBkaXN0YW5jZSBmcm9tIGNlbnRlciB0byBwcm9qZWN0aW9uIHBvaW50XG4gICAgICAgICAgICB2YXIgZDIgPSBjMiAtIGIgKiBiO1xuXG4gICAgICAgICAgICB2YXIgcjIgPSByYWRpdXMgKiByYWRpdXM7XG4gICAgICAgICAgICAvLyBObyBpbnRlcnNlY3Rpb25cbiAgICAgICAgICAgIGlmIChkMiA+IHIyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgYSA9IE1hdGguc3FydChyMiAtIGQyKTtcbiAgICAgICAgICAgIC8vIEZpcnN0IGludGVyc2VjdCBwb2ludFxuICAgICAgICAgICAgdmFyIHQwID0gYiAtIGE7XG4gICAgICAgICAgICAvLyBTZWNvbmQgaW50ZXJzZWN0IHBvaW50XG4gICAgICAgICAgICB2YXIgdDEgPSBiICsgYTtcblxuICAgICAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgICAgICBvdXQgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHQwIDwgMCkge1xuICAgICAgICAgICAgICAgIGlmICh0MSA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgb3JpZ2luLCBkaXJlY3Rpb24sIHQxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgb3JpZ2luLCBkaXJlY3Rpb24sIHQwKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvLyBodHRwOi8vd3d3LnNjcmF0Y2hhcGl4ZWwuY29tL2xlc3NvbnMvM2QtYmFzaWMtbGVzc29ucy9sZXNzb24tNy1pbnRlcnNlY3Rpbmctc2ltcGxlLXNoYXBlcy9yYXktYm94LWludGVyc2VjdGlvbi9cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gcmF5IGFuZCBib3VuZGluZyBib3hcbiAgICAgKiBAcGFyYW0ge2NsYXkuQm91bmRpbmdCb3h9IGJib3hcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM31cbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgaW50ZXJzZWN0Qm91bmRpbmdCb3g6IGZ1bmN0aW9uIChiYm94LCBvdXQpIHtcbiAgICAgICAgdmFyIGRpciA9IHRoaXMuZGlyZWN0aW9uLmFycmF5O1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5vcmlnaW4uYXJyYXk7XG4gICAgICAgIHZhciBtaW4gPSBiYm94Lm1pbi5hcnJheTtcbiAgICAgICAgdmFyIG1heCA9IGJib3gubWF4LmFycmF5O1xuXG4gICAgICAgIHZhciBpbnZkaXJ4ID0gMSAvIGRpclswXTtcbiAgICAgICAgdmFyIGludmRpcnkgPSAxIC8gZGlyWzFdO1xuICAgICAgICB2YXIgaW52ZGlyeiA9IDEgLyBkaXJbMl07XG5cbiAgICAgICAgdmFyIHRtaW4sIHRtYXgsIHR5bWluLCB0eW1heCwgdHptaW4sIHR6bWF4O1xuICAgICAgICBpZiAoaW52ZGlyeCA+PSAwKSB7XG4gICAgICAgICAgICB0bWluID0gKG1pblswXSAtIG9yaWdpblswXSkgKiBpbnZkaXJ4O1xuICAgICAgICAgICAgdG1heCA9IChtYXhbMF0gLSBvcmlnaW5bMF0pICogaW52ZGlyeDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRtYXggPSAobWluWzBdIC0gb3JpZ2luWzBdKSAqIGludmRpcng7XG4gICAgICAgICAgICB0bWluID0gKG1heFswXSAtIG9yaWdpblswXSkgKiBpbnZkaXJ4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnZkaXJ5ID49IDApIHtcbiAgICAgICAgICAgIHR5bWluID0gKG1pblsxXSAtIG9yaWdpblsxXSkgKiBpbnZkaXJ5O1xuICAgICAgICAgICAgdHltYXggPSAobWF4WzFdIC0gb3JpZ2luWzFdKSAqIGludmRpcnk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0eW1heCA9IChtaW5bMV0gLSBvcmlnaW5bMV0pICogaW52ZGlyeTtcbiAgICAgICAgICAgIHR5bWluID0gKG1heFsxXSAtIG9yaWdpblsxXSkgKiBpbnZkaXJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCh0bWluID4gdHltYXgpIHx8ICh0eW1pbiA+IHRtYXgpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eW1pbiA+IHRtaW4gfHwgdG1pbiAhPT0gdG1pbikge1xuICAgICAgICAgICAgdG1pbiA9IHR5bWluO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eW1heCA8IHRtYXggfHwgdG1heCAhPT0gdG1heCkge1xuICAgICAgICAgICAgdG1heCA9IHR5bWF4O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGludmRpcnogPj0gMCkge1xuICAgICAgICAgICAgdHptaW4gPSAobWluWzJdIC0gb3JpZ2luWzJdKSAqIGludmRpcno7XG4gICAgICAgICAgICB0em1heCA9IChtYXhbMl0gLSBvcmlnaW5bMl0pICogaW52ZGlyejtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHR6bWF4ID0gKG1pblsyXSAtIG9yaWdpblsyXSkgKiBpbnZkaXJ6O1xuICAgICAgICAgICAgdHptaW4gPSAobWF4WzJdIC0gb3JpZ2luWzJdKSAqIGludmRpcno7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoKHRtaW4gPiB0em1heCkgfHwgKHR6bWluID4gdG1heCkpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR6bWluID4gdG1pbiB8fCB0bWluICE9PSB0bWluKSB7XG4gICAgICAgICAgICB0bWluID0gdHptaW47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR6bWF4IDwgdG1heCB8fCB0bWF4ICE9PSB0bWF4KSB7XG4gICAgICAgICAgICB0bWF4ID0gdHptYXg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRtYXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ID0gdG1pbiA+PSAwID8gdG1pbiA6IHRtYXg7XG5cbiAgICAgICAgaWYgKCFvdXQpIHtcbiAgICAgICAgICAgIG91dCA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChvdXQuYXJyYXksIG9yaWdpbiwgZGlyLCB0KTtcbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9LFxuXG4gICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9NJUMzJUI2bGxlciVFMiU4MCU5M1RydW1ib3JlX2ludGVyc2VjdGlvbl9hbGdvcml0aG1cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gcmF5IGFuZCB0aHJlZSB0cmlhbmdsZSB2ZXJ0aWNlc1xuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBhXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gY1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gICAgICAgICAgIHNpbmdsZVNpZGVkLCBDVyB0cmlhbmdsZSB3aWxsIGJlIGlnbm9yZWRcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW291dF1cbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gW2JhcnljZW50ZXJpY10gYmFyeWNlbnRyaWMgY29vcmRzXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIGludGVyc2VjdFRyaWFuZ2xlOiAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBlQkEgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgICAgICB2YXIgZUNBID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIEFPID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHZDcm9zcyA9IHZlYzMuY3JlYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiLCBjLCBzaW5nbGVTaWRlZCwgb3V0LCBiYXJ5Y2VudGVyaWMpIHtcbiAgICAgICAgICAgIHZhciBkaXIgPSB0aGlzLmRpcmVjdGlvbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBvcmlnaW4gPSB0aGlzLm9yaWdpbi5hcnJheTtcbiAgICAgICAgICAgIGEgPSBhLmFycmF5O1xuICAgICAgICAgICAgYiA9IGIuYXJyYXk7XG4gICAgICAgICAgICBjID0gYy5hcnJheTtcblxuICAgICAgICAgICAgdmVjMy5zdWIoZUJBLCBiLCBhKTtcbiAgICAgICAgICAgIHZlYzMuc3ViKGVDQSwgYywgYSk7XG5cbiAgICAgICAgICAgIHZlYzMuY3Jvc3ModkNyb3NzLCBlQ0EsIGRpcik7XG5cbiAgICAgICAgICAgIHZhciBkZXQgPSB2ZWMzLmRvdChlQkEsIHZDcm9zcyk7XG5cbiAgICAgICAgICAgIGlmIChzaW5nbGVTaWRlZCkge1xuICAgICAgICAgICAgICAgIGlmIChkZXQgPiAtRVBTSUxPTikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoZGV0ID4gLUVQU0lMT04gJiYgZGV0IDwgRVBTSUxPTikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZlYzMuc3ViKEFPLCBvcmlnaW4sIGEpO1xuICAgICAgICAgICAgdmFyIHUgPSB2ZWMzLmRvdCh2Q3Jvc3MsIEFPKSAvIGRldDtcbiAgICAgICAgICAgIGlmICh1IDwgMCB8fCB1ID4gMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2ZWMzLmNyb3NzKHZDcm9zcywgZUJBLCBBTyk7XG4gICAgICAgICAgICB2YXIgdiA9IHZlYzMuZG90KGRpciwgdkNyb3NzKSAvIGRldDtcblxuICAgICAgICAgICAgaWYgKHYgPCAwIHx8IHYgPiAxIHx8ICh1ICsgdiA+IDEpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZlYzMuY3Jvc3ModkNyb3NzLCBlQkEsIGVDQSk7XG4gICAgICAgICAgICB2YXIgdCA9IC12ZWMzLmRvdChBTywgdkNyb3NzKSAvIGRldDtcblxuICAgICAgICAgICAgaWYgKHQgPCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChiYXJ5Y2VudGVyaWMpIHtcbiAgICAgICAgICAgICAgICBWZWN0b3IzLnNldChiYXJ5Y2VudGVyaWMsICgxIC0gdSAtIHYpLCB1LCB2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQob3V0LmFycmF5LCBvcmlnaW4sIGRpciwgdCk7XG5cbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGFuIGFmZmluZSB0cmFuc2Zvcm0gbWF0cml4IHRvIHRoZSByYXlcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDR9IG1hdHJpeFxuICAgICAqL1xuICAgIGFwcGx5VHJhbnNmb3JtOiBmdW5jdGlvbiAobWF0cml4KSB7XG4gICAgICAgIFZlY3RvcjMuYWRkKHRoaXMuZGlyZWN0aW9uLCB0aGlzLmRpcmVjdGlvbiwgdGhpcy5vcmlnaW4pO1xuICAgICAgICBWZWN0b3IzLnRyYW5zZm9ybU1hdDQodGhpcy5vcmlnaW4sIHRoaXMub3JpZ2luLCBtYXRyaXgpO1xuICAgICAgICBWZWN0b3IzLnRyYW5zZm9ybU1hdDQodGhpcy5kaXJlY3Rpb24sIHRoaXMuZGlyZWN0aW9uLCBtYXRyaXgpO1xuXG4gICAgICAgIFZlY3RvcjMuc3ViKHRoaXMuZGlyZWN0aW9uLCB0aGlzLmRpcmVjdGlvbiwgdGhpcy5vcmlnaW4pO1xuICAgICAgICBWZWN0b3IzLm5vcm1hbGl6ZSh0aGlzLmRpcmVjdGlvbiwgdGhpcy5kaXJlY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IHZhbHVlcyBmcm9tIGFub3RoZXIgcmF5XG4gICAgICogQHBhcmFtIHtjbGF5LlJheX0gcmF5XG4gICAgICovXG4gICAgY29weTogZnVuY3Rpb24gKHJheSkge1xuICAgICAgICBWZWN0b3IzLmNvcHkodGhpcy5vcmlnaW4sIHJheS5vcmlnaW4pO1xuICAgICAgICBWZWN0b3IzLmNvcHkodGhpcy5kaXJlY3Rpb24sIHJheS5kaXJlY3Rpb24pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyByYXlcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlJheX1cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmF5ID0gbmV3IFJheSgpO1xuICAgICAgICByYXkuY29weSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHJheTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBSYXk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9SYXkuanNcbi8vIG1vZHVsZSBpZCA9IDM4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///38\n");

/***/ }),
/* 39 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n/**\n * @constructor clay.geometry.Plane\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.widthSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Plane = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.Plane# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 1,\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Plane.prototype */\n{\n    /**\n     * Build plane geometry\n     */\n    build: function() {\n        var heightSegments = this.heightSegments;\n        var widthSegments = this.widthSegments;\n        var attributes = this.attributes;\n        var positions = [];\n        var texcoords = [];\n        var normals = [];\n        var faces = [];\n\n        for (var y = 0; y <= heightSegments; y++) {\n            var t = y / heightSegments;\n            for (var x = 0; x <= widthSegments; x++) {\n                var s = x / widthSegments;\n\n                positions.push([2 * s - 1, 2 * t - 1, 0]);\n                if (texcoords) {\n                    texcoords.push([s, t]);\n                }\n                if (normals) {\n                    normals.push([0, 0, 1]);\n                }\n                if (x < widthSegments && y < heightSegments) {\n                    var i = x + y * (widthSegments + 1);\n                    faces.push([i, i + 1, i + widthSegments + 1]);\n                    faces.push([i + widthSegments + 1, i + 1, i + widthSegments + 2]);\n                }\n            }\n        }\n\n        attributes.position.fromArray(positions);\n        attributes.texcoord0.fromArray(texcoords);\n        attributes.normal.fromArray(normals);\n\n        this.initIndicesFromArray(faces);\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.min.set(-1, -1, 0);\n        this.boundingBox.max.set(1, 1, 0);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Plane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L1BsYW5lLmpzPzE5YmIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5nZW9tZXRyeS5QbGFuZVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC53aWR0aFNlZ21lbnRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuaGVpZ2h0U2VnbWVudHNdXG4gKi9cbnZhciBQbGFuZSA9IEdlb21ldHJ5LmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5QbGFuZSMgKi9cbntcbiAgICBkeW5hbWljOiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHdpZHRoU2VnbWVudHM6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBoZWlnaHRTZWdtZW50czogMVxufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5idWlsZCgpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5QbGFuZS5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBCdWlsZCBwbGFuZSBnZW9tZXRyeVxuICAgICAqL1xuICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGhlaWdodFNlZ21lbnRzID0gdGhpcy5oZWlnaHRTZWdtZW50cztcbiAgICAgICAgdmFyIHdpZHRoU2VnbWVudHMgPSB0aGlzLndpZHRoU2VnbWVudHM7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuICAgICAgICB2YXIgcG9zaXRpb25zID0gW107XG4gICAgICAgIHZhciB0ZXhjb29yZHMgPSBbXTtcbiAgICAgICAgdmFyIG5vcm1hbHMgPSBbXTtcbiAgICAgICAgdmFyIGZhY2VzID0gW107XG5cbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPD0gaGVpZ2h0U2VnbWVudHM7IHkrKykge1xuICAgICAgICAgICAgdmFyIHQgPSB5IC8gaGVpZ2h0U2VnbWVudHM7XG4gICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8PSB3aWR0aFNlZ21lbnRzOyB4KyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcyA9IHggLyB3aWR0aFNlZ21lbnRzO1xuXG4gICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2goWzIgKiBzIC0gMSwgMiAqIHQgLSAxLCAwXSk7XG4gICAgICAgICAgICAgICAgaWYgKHRleGNvb3Jkcykge1xuICAgICAgICAgICAgICAgICAgICB0ZXhjb29yZHMucHVzaChbcywgdF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9ybWFscykge1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxzLnB1c2goWzAsIDAsIDFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHggPCB3aWR0aFNlZ21lbnRzICYmIHkgPCBoZWlnaHRTZWdtZW50cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IHggKyB5ICogKHdpZHRoU2VnbWVudHMgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgZmFjZXMucHVzaChbaSwgaSArIDEsIGkgKyB3aWR0aFNlZ21lbnRzICsgMV0pO1xuICAgICAgICAgICAgICAgICAgICBmYWNlcy5wdXNoKFtpICsgd2lkdGhTZWdtZW50cyArIDEsIGkgKyAxLCBpICsgd2lkdGhTZWdtZW50cyArIDJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBhdHRyaWJ1dGVzLnBvc2l0aW9uLmZyb21BcnJheShwb3NpdGlvbnMpO1xuICAgICAgICBhdHRyaWJ1dGVzLnRleGNvb3JkMC5mcm9tQXJyYXkodGV4Y29vcmRzKTtcbiAgICAgICAgYXR0cmlidXRlcy5ub3JtYWwuZnJvbUFycmF5KG5vcm1hbHMpO1xuXG4gICAgICAgIHRoaXMuaW5pdEluZGljZXNGcm9tQXJyYXkoZmFjZXMpO1xuXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5taW4uc2V0KC0xLCAtMSwgMCk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWF4LnNldCgxLCAxLCAwKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUGxhbmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ2VvbWV0cnkvUGxhbmUuanNcbi8vIG1vZHVsZSBpZCA9IDM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///39\n");

/***/ }),
/* 40 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n\n\n\n/**\n * @constructor\n * @alias clay.Renderable\n * @extends clay.Node\n */\nvar Renderable = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(/** @lends clay.Renderable# */ {\n    /**\n     * @type {clay.Material}\n     */\n    material: null,\n\n    /**\n     * @type {clay.Geometry}\n     */\n    geometry: null,\n\n    /**\n     * @type {number}\n     */\n    mode: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES,\n\n    _renderInfo: null\n},\n/** @lends clay.Renderable.prototype */\n{\n\n    __program: null,\n\n    /**\n     * Group of received light.\n     */\n    lightGroup: 0,\n    /**\n     * Render order, Nodes with smaller value renders before nodes with larger values.\n     * @type {Number}\n     */\n    renderOrder: 0,\n\n    /**\n     * Used when mode is LINES, LINE_STRIP or LINE_LOOP\n     * @type {number}\n     */\n    // lineWidth: 1,\n\n    /**\n     * If enable culling\n     * @type {boolean}\n     */\n    culling: true,\n    /**\n     * Specify which side of polygon will be culled.\n     * Possible values:\n     *  + {@link clay.Renderable.BACK}\n     *  + {@link clay.Renderable.FRONT}\n     *  + {@link clay.Renderable.FRONT_AND_BACK}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/cullFace\n     * @type {number}\n     */\n    cullFace: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK,\n    /**\n     * Specify which side is front face.\n     * Possible values:\n     *  + {@link clay.Renderable.CW}\n     *  + {@link clay.Renderable.CCW}\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/frontFace\n     * @type {number}\n     */\n    frontFace: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW,\n\n    /**\n     * If enable software frustum culling\n     * @type {boolean}\n     */\n    frustumCulling: true,\n    /**\n     * @type {boolean}\n     */\n    receiveShadow: true,\n    /**\n     * @type {boolean}\n     */\n    castShadow: true,\n    /**\n     * @type {boolean}\n     */\n    ignorePicking: false,\n    /**\n     * @type {boolean}\n     */\n    ignorePreZ: false,\n\n    /**\n     * @type {boolean}\n     */\n    ignoreGBuffer: false,\n\n    /**\n     * @return {boolean}\n     */\n    isRenderable: function() {\n        // TODO Shader ?\n        return this.geometry && this.material && this.material.shader && !this.invisible\n            && this.geometry.vertexCount > 0;\n    },\n\n    /**\n     * Before render hook\n     * @type {Function}\n     */\n    beforeRender: function (_gl) {},\n\n    /**\n     * Before render hook\n     * @type {Function}\n     */\n    afterRender: function (_gl, renderStat) {},\n\n    getBoundingBox: function (filter, out) {\n        out = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.getBoundingBox.call(this, filter, out);\n        if (this.geometry && this.geometry.boundingBox) {\n            out.union(this.geometry.boundingBox);\n        }\n\n        return out;\n    },\n\n    /**\n     * Clone a new renderable\n     * @function\n     * @return {clay.Renderable}\n     */\n    clone: (function() {\n        var properties = [\n            'castShadow', 'receiveShadow',\n            'mode', 'culling', 'cullFace', 'frontFace',\n            'frustumCulling',\n            'renderOrder', 'lineWidth',\n            'ignorePicking', 'ignorePreZ', 'ignoreGBuffer'\n        ];\n        return function() {\n            var renderable = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].prototype.clone.call(this);\n\n            renderable.geometry = this.geometry;\n            renderable.material = this.material;\n\n            for (var i = 0; i < properties.length; i++) {\n                var name = properties[i];\n                // Try not to overwrite the prototype property\n                if (renderable[name] !== this[name]) {\n                    renderable[name] = this[name];\n                }\n            }\n\n            return renderable;\n        };\n    })()\n});\n\n/**\n * @type {number}\n */\nRenderable.POINTS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].POINTS;\n/**\n * @type {number}\n */\nRenderable.LINES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINES;\n/**\n * @type {number}\n */\nRenderable.LINE_LOOP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_LOOP;\n/**\n * @type {number}\n */\nRenderable.LINE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINE_STRIP;\n/**\n * @type {number}\n */\nRenderable.TRIANGLES = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLES;\n/**\n * @type {number}\n */\nRenderable.TRIANGLE_STRIP = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_STRIP;\n/**\n * @type {number}\n */\nRenderable.TRIANGLE_FAN = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].TRIANGLE_FAN;\n/**\n * @type {number}\n */\nRenderable.BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].BACK;\n/**\n * @type {number}\n */\nRenderable.FRONT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT;\n/**\n * @type {number}\n */\nRenderable.FRONT_AND_BACK = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].FRONT_AND_BACK;\n/**\n * @type {number}\n */\nRenderable.CW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CW;\n/**\n * @type {number}\n */\nRenderable.CCW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CCW;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Renderable);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1JlbmRlcmFibGUuanM/MTY5NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuL2NvcmUvZ2xlbnVtJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LlJlbmRlcmFibGVcbiAqIEBleHRlbmRzIGNsYXkuTm9kZVxuICovXG52YXIgUmVuZGVyYWJsZSA9IE5vZGUuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5SZW5kZXJhYmxlIyAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuTWF0ZXJpYWx9XG4gICAgICovXG4gICAgbWF0ZXJpYWw6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5HZW9tZXRyeX1cbiAgICAgKi9cbiAgICBnZW9tZXRyeTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgbW9kZTogZ2xlbnVtLlRSSUFOR0xFUyxcblxuICAgIF9yZW5kZXJJbmZvOiBudWxsXG59LFxuLyoqIEBsZW5kcyBjbGF5LlJlbmRlcmFibGUucHJvdG90eXBlICovXG57XG5cbiAgICBfX3Byb2dyYW06IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBHcm91cCBvZiByZWNlaXZlZCBsaWdodC5cbiAgICAgKi9cbiAgICBsaWdodEdyb3VwOiAwLFxuICAgIC8qKlxuICAgICAqIFJlbmRlciBvcmRlciwgTm9kZXMgd2l0aCBzbWFsbGVyIHZhbHVlIHJlbmRlcnMgYmVmb3JlIG5vZGVzIHdpdGggbGFyZ2VyIHZhbHVlcy5cbiAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAqL1xuICAgIHJlbmRlck9yZGVyOiAwLFxuXG4gICAgLyoqXG4gICAgICogVXNlZCB3aGVuIG1vZGUgaXMgTElORVMsIExJTkVfU1RSSVAgb3IgTElORV9MT09QXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICAvLyBsaW5lV2lkdGg6IDEsXG5cbiAgICAvKipcbiAgICAgKiBJZiBlbmFibGUgY3VsbGluZ1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGN1bGxpbmc6IHRydWUsXG4gICAgLyoqXG4gICAgICogU3BlY2lmeSB3aGljaCBzaWRlIG9mIHBvbHlnb24gd2lsbCBiZSBjdWxsZWQuXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIHtAbGluayBjbGF5LlJlbmRlcmFibGUuQkFDS31cbiAgICAgKiAgKyB7QGxpbmsgY2xheS5SZW5kZXJhYmxlLkZST05UfVxuICAgICAqICArIHtAbGluayBjbGF5LlJlbmRlcmFibGUuRlJPTlRfQU5EX0JBQ0t9XG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR0xSZW5kZXJpbmdDb250ZXh0L2N1bGxGYWNlXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBjdWxsRmFjZTogZ2xlbnVtLkJBQ0ssXG4gICAgLyoqXG4gICAgICogU3BlY2lmeSB3aGljaCBzaWRlIGlzIGZyb250IGZhY2UuXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIHtAbGluayBjbGF5LlJlbmRlcmFibGUuQ1d9XG4gICAgICogICsge0BsaW5rIGNsYXkuUmVuZGVyYWJsZS5DQ1d9XG4gICAgICogQHNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViR0xSZW5kZXJpbmdDb250ZXh0L2Zyb250RmFjZVxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZnJvbnRGYWNlOiBnbGVudW0uQ0NXLFxuXG4gICAgLyoqXG4gICAgICogSWYgZW5hYmxlIHNvZnR3YXJlIGZydXN0dW0gY3VsbGluZ1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGZydXN0dW1DdWxsaW5nOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHJlY2VpdmVTaGFkb3c6IHRydWUsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FzdFNoYWRvdzogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpZ25vcmVQaWNraW5nOiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpZ25vcmVQcmVaOiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGlnbm9yZUdCdWZmZXI6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpc1JlbmRlcmFibGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUT0RPIFNoYWRlciA/XG4gICAgICAgIHJldHVybiB0aGlzLmdlb21ldHJ5ICYmIHRoaXMubWF0ZXJpYWwgJiYgdGhpcy5tYXRlcmlhbC5zaGFkZXIgJiYgIXRoaXMuaW52aXNpYmxlXG4gICAgICAgICAgICAmJiB0aGlzLmdlb21ldHJ5LnZlcnRleENvdW50ID4gMDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQmVmb3JlIHJlbmRlciBob29rXG4gICAgICogQHR5cGUge0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIGJlZm9yZVJlbmRlcjogZnVuY3Rpb24gKF9nbCkge30sXG5cbiAgICAvKipcbiAgICAgKiBCZWZvcmUgcmVuZGVyIGhvb2tcbiAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICovXG4gICAgYWZ0ZXJSZW5kZXI6IGZ1bmN0aW9uIChfZ2wsIHJlbmRlclN0YXQpIHt9LFxuXG4gICAgZ2V0Qm91bmRpbmdCb3g6IGZ1bmN0aW9uIChmaWx0ZXIsIG91dCkge1xuICAgICAgICBvdXQgPSBOb2RlLnByb3RvdHlwZS5nZXRCb3VuZGluZ0JveC5jYWxsKHRoaXMsIGZpbHRlciwgb3V0KTtcbiAgICAgICAgaWYgKHRoaXMuZ2VvbWV0cnkgJiYgdGhpcy5nZW9tZXRyeS5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgb3V0LnVuaW9uKHRoaXMuZ2VvbWV0cnkuYm91bmRpbmdCb3gpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgcmVuZGVyYWJsZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEByZXR1cm4ge2NsYXkuUmVuZGVyYWJsZX1cbiAgICAgKi9cbiAgICBjbG9uZTogKGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcHJvcGVydGllcyA9IFtcbiAgICAgICAgICAgICdjYXN0U2hhZG93JywgJ3JlY2VpdmVTaGFkb3cnLFxuICAgICAgICAgICAgJ21vZGUnLCAnY3VsbGluZycsICdjdWxsRmFjZScsICdmcm9udEZhY2UnLFxuICAgICAgICAgICAgJ2ZydXN0dW1DdWxsaW5nJyxcbiAgICAgICAgICAgICdyZW5kZXJPcmRlcicsICdsaW5lV2lkdGgnLFxuICAgICAgICAgICAgJ2lnbm9yZVBpY2tpbmcnLCAnaWdub3JlUHJlWicsICdpZ25vcmVHQnVmZmVyJ1xuICAgICAgICBdO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyYWJsZSA9IE5vZGUucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7XG5cbiAgICAgICAgICAgIHJlbmRlcmFibGUuZ2VvbWV0cnkgPSB0aGlzLmdlb21ldHJ5O1xuICAgICAgICAgICAgcmVuZGVyYWJsZS5tYXRlcmlhbCA9IHRoaXMubWF0ZXJpYWw7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lID0gcHJvcGVydGllc1tpXTtcbiAgICAgICAgICAgICAgICAvLyBUcnkgbm90IHRvIG92ZXJ3cml0ZSB0aGUgcHJvdG90eXBlIHByb3BlcnR5XG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmFibGVbbmFtZV0gIT09IHRoaXNbbmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyYWJsZVtuYW1lXSA9IHRoaXNbbmFtZV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZTtcbiAgICAgICAgfTtcbiAgICB9KSgpXG59KTtcblxuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJhYmxlLlBPSU5UUyA9IGdsZW51bS5QT0lOVFM7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuTElORVMgPSBnbGVudW0uTElORVM7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuTElORV9MT09QID0gZ2xlbnVtLkxJTkVfTE9PUDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5MSU5FX1NUUklQID0gZ2xlbnVtLkxJTkVfU1RSSVA7XG4vKipcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmFibGUuVFJJQU5HTEVTID0gZ2xlbnVtLlRSSUFOR0xFUztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5UUklBTkdMRV9TVFJJUCA9IGdsZW51bS5UUklBTkdMRV9TVFJJUDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5UUklBTkdMRV9GQU4gPSBnbGVudW0uVFJJQU5HTEVfRkFOO1xuLyoqXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJhYmxlLkJBQ0sgPSBnbGVudW0uQkFDSztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5GUk9OVCA9IGdsZW51bS5GUk9OVDtcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5GUk9OVF9BTkRfQkFDSyA9IGdsZW51bS5GUk9OVF9BTkRfQkFDSztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5DVyA9IGdsZW51bS5DVztcbi8qKlxuICogQHR5cGUge251bWJlcn1cbiAqL1xuUmVuZGVyYWJsZS5DQ1cgPSBnbGVudW0uQ0NXO1xuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJhYmxlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1JlbmRlcmFibGUuanNcbi8vIG1vZHVsZSBpZCA9IDQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///40\n");

/***/ }),
/* 41 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__shader_source_skybox_glsl_js__ = __webpack_require__(87);\n// TODO Should not derived from mesh?\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_7__shader_source_skybox_glsl_js__[\"a\" /* default */]);\n/**\n * @constructor clay.plugin.Skybox\n *\n * @example\n *     var skyTex = new clay.TextureCube();\n *     skyTex.load({\n *         'px': 'assets/textures/sky/px.jpg',\n *         'nx': 'assets/textures/sky/nx.jpg'\n *         'py': 'assets/textures/sky/py.jpg'\n *         'ny': 'assets/textures/sky/ny.jpg'\n *         'pz': 'assets/textures/sky/pz.jpg'\n *         'nz': 'assets/textures/sky/nz.jpg'\n *     });\n *     var skybox = new clay.plugin.Skybox({\n *         scene: scene\n *     });\n *     skybox.material.set('environmentMap', skyTex);\n */\nvar Skybox = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend(function () {\n\n    var skyboxShader = new __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */]({\n        vertex: __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].source('clay.skybox.vertex'),\n        fragment: __WEBPACK_IMPORTED_MODULE_2__Shader__[\"a\" /* default */].source('clay.skybox.fragment')\n    });\n    var material = new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n        shader: skyboxShader,\n        depthMask: false\n    });\n\n    return {\n        /**\n         * @type {clay.Scene}\n         * @memberOf clay.plugin.Skybox.prototype\n         */\n        scene: null,\n\n        geometry: new __WEBPACK_IMPORTED_MODULE_1__geometry_Cube__[\"a\" /* default */](),\n\n        material: material,\n\n        environmentMap: null,\n\n        culling: false,\n\n        _dummyCamera: new __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]()\n    };\n}, function () {\n    var scene = this.scene;\n    if (scene) {\n        this.attachScene(scene);\n    }\n    if (this.environmentMap) {\n        this.setEnvironmentMap(this.environmentMap);\n    }\n}, /** @lends clay.plugin.Skybox# */ {\n    /**\n     * Attach the skybox to the scene\n     * @param  {clay.Scene} scene\n     */\n    attachScene: function (scene) {\n        if (this.scene) {\n            this.detachScene();\n        }\n        scene.skybox = this;\n\n        this.scene = scene;\n        scene.on('beforerender', this._beforeRenderScene, this);\n    },\n    /**\n     * Detach from scene\n     */\n    detachScene: function () {\n        if (this.scene) {\n            this.scene.off('beforerender', this._beforeRenderScene);\n            this.scene.skybox = null;\n        }\n        this.scene = null;\n    },\n\n    /**\n     * Dispose skybox\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this.detachScene();\n        this.geometry.dispose(renderer);\n    },\n    /**\n     * Set environment map\n     * @param {clay.TextureCube} envMap\n     */\n    setEnvironmentMap: function (envMap) {\n        if (envMap.textureType === 'texture2D') {\n            this.material.define('EQUIRECTANGULAR');\n            // LINEAR filter can remove the artifacts in pole\n            envMap.minFilter = __WEBPACK_IMPORTED_MODULE_4__Texture__[\"a\" /* default */].LINEAR;\n        }\n        else {\n            this.material.undefine('EQUIRECTANGULAR');\n        }\n        this.material.set('environmentMap', envMap);\n    },\n    /**\n     * Get environment map\n     * @return {clay.TextureCube}\n     */\n    getEnvironmentMap: function () {\n        return this.material.get('environmentMap');\n    },\n\n    _beforeRenderScene: function(renderer, scene, camera) {\n        this.renderSkybox(renderer, camera);\n    },\n\n    renderSkybox: function (renderer, camera) {\n        var dummyCamera = this._dummyCamera;\n        dummyCamera.aspect = renderer.getViewportAspect();\n        dummyCamera.fov = camera.fov || 50;\n        dummyCamera.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_6__math_Matrix4__[\"a\" /* default */].invert(dummyCamera.invProjectionMatrix, dummyCamera.projectionMatrix);\n        dummyCamera.worldTransform.copy(camera.worldTransform);\n        dummyCamera.viewMatrix.copy(camera.viewMatrix);\n\n        this.position.copy(camera.getWorldPosition());\n        this.update();\n\n        // Don't remember to disable blend\n        renderer.gl.disable(renderer.gl.BLEND);\n        if (this.material.get('lod') > 0) {\n            this.material.define('fragment', 'LOD');\n        }\n        else {\n            this.material.undefine('fragment', 'LOD');\n        }\n        renderer.renderPass([this], dummyCamera);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Skybox);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9Ta3lib3guanM/OTg5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPIFNob3VsZCBub3QgZGVyaXZlZCBmcm9tIG1lc2g/XG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBDdWJlR2VvbWV0cnkgZnJvbSAnLi4vZ2VvbWV0cnkvQ3ViZSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi4vTWF0ZXJpYWwnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgUGVyc3BlY3RpdmVDYW1lcmEgZnJvbSAnLi4vY2FtZXJhL1BlcnNwZWN0aXZlJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5cbmltcG9ydCBza3lib3hFc3NsIGZyb20gJy4uL3NoYWRlci9zb3VyY2Uvc2t5Ym94Lmdsc2wuanMnO1xuU2hhZGVyLmltcG9ydChza3lib3hFc3NsKTtcbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGx1Z2luLlNreWJveFxuICpcbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIHNreVRleCA9IG5ldyBjbGF5LlRleHR1cmVDdWJlKCk7XG4gKiAgICAgc2t5VGV4LmxvYWQoe1xuICogICAgICAgICAncHgnOiAnYXNzZXRzL3RleHR1cmVzL3NreS9weC5qcGcnLFxuICogICAgICAgICAnbngnOiAnYXNzZXRzL3RleHR1cmVzL3NreS9ueC5qcGcnXG4gKiAgICAgICAgICdweSc6ICdhc3NldHMvdGV4dHVyZXMvc2t5L3B5LmpwZydcbiAqICAgICAgICAgJ255JzogJ2Fzc2V0cy90ZXh0dXJlcy9za3kvbnkuanBnJ1xuICogICAgICAgICAncHonOiAnYXNzZXRzL3RleHR1cmVzL3NreS9wei5qcGcnXG4gKiAgICAgICAgICdueic6ICdhc3NldHMvdGV4dHVyZXMvc2t5L256LmpwZydcbiAqICAgICB9KTtcbiAqICAgICB2YXIgc2t5Ym94ID0gbmV3IGNsYXkucGx1Z2luLlNreWJveCh7XG4gKiAgICAgICAgIHNjZW5lOiBzY2VuZVxuICogICAgIH0pO1xuICogICAgIHNreWJveC5tYXRlcmlhbC5zZXQoJ2Vudmlyb25tZW50TWFwJywgc2t5VGV4KTtcbiAqL1xudmFyIFNreWJveCA9IE1lc2guZXh0ZW5kKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBza3lib3hTaGFkZXIgPSBuZXcgU2hhZGVyKHtcbiAgICAgICAgdmVydGV4OiBTaGFkZXIuc291cmNlKCdjbGF5LnNreWJveC52ZXJ0ZXgnKSxcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuc2t5Ym94LmZyYWdtZW50JylcbiAgICB9KTtcbiAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICBzaGFkZXI6IHNreWJveFNoYWRlcixcbiAgICAgICAgZGVwdGhNYXNrOiBmYWxzZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlNjZW5lfVxuICAgICAgICAgKiBAbWVtYmVyT2YgY2xheS5wbHVnaW4uU2t5Ym94LnByb3RvdHlwZVxuICAgICAgICAgKi9cbiAgICAgICAgc2NlbmU6IG51bGwsXG5cbiAgICAgICAgZ2VvbWV0cnk6IG5ldyBDdWJlR2VvbWV0cnkoKSxcblxuICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXG5cbiAgICAgICAgZW52aXJvbm1lbnRNYXA6IG51bGwsXG5cbiAgICAgICAgY3VsbGluZzogZmFsc2UsXG5cbiAgICAgICAgX2R1bW15Q2FtZXJhOiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKVxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHNjZW5lID0gdGhpcy5zY2VuZTtcbiAgICBpZiAoc2NlbmUpIHtcbiAgICAgICAgdGhpcy5hdHRhY2hTY2VuZShzY2VuZSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVudmlyb25tZW50TWFwKSB7XG4gICAgICAgIHRoaXMuc2V0RW52aXJvbm1lbnRNYXAodGhpcy5lbnZpcm9ubWVudE1hcCk7XG4gICAgfVxufSwgLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5Ta3lib3gjICovIHtcbiAgICAvKipcbiAgICAgKiBBdHRhY2ggdGhlIHNreWJveCB0byB0aGUgc2NlbmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlNjZW5lfSBzY2VuZVxuICAgICAqL1xuICAgIGF0dGFjaFNjZW5lOiBmdW5jdGlvbiAoc2NlbmUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoU2NlbmUoKTtcbiAgICAgICAgfVxuICAgICAgICBzY2VuZS5za3lib3ggPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcbiAgICAgICAgc2NlbmUub24oJ2JlZm9yZXJlbmRlcicsIHRoaXMuX2JlZm9yZVJlbmRlclNjZW5lLCB0aGlzKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIERldGFjaCBmcm9tIHNjZW5lXG4gICAgICovXG4gICAgZGV0YWNoU2NlbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NlbmUpIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUub2ZmKCdiZWZvcmVyZW5kZXInLCB0aGlzLl9iZWZvcmVSZW5kZXJTY2VuZSk7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnNreWJveCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zY2VuZSA9IG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2Ugc2t5Ym94XG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5kZXRhY2hTY2VuZSgpO1xuICAgICAgICB0aGlzLmdlb21ldHJ5LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0IGVudmlyb25tZW50IG1hcFxuICAgICAqIEBwYXJhbSB7Y2xheS5UZXh0dXJlQ3ViZX0gZW52TWFwXG4gICAgICovXG4gICAgc2V0RW52aXJvbm1lbnRNYXA6IGZ1bmN0aW9uIChlbnZNYXApIHtcbiAgICAgICAgaWYgKGVudk1hcC50ZXh0dXJlVHlwZSA9PT0gJ3RleHR1cmUyRCcpIHtcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwuZGVmaW5lKCdFUVVJUkVDVEFOR1VMQVInKTtcbiAgICAgICAgICAgIC8vIExJTkVBUiBmaWx0ZXIgY2FuIHJlbW92ZSB0aGUgYXJ0aWZhY3RzIGluIHBvbGVcbiAgICAgICAgICAgIGVudk1hcC5taW5GaWx0ZXIgPSBUZXh0dXJlLkxJTkVBUjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5kZWZpbmUoJ0VRVUlSRUNUQU5HVUxBUicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0ZXJpYWwuc2V0KCdlbnZpcm9ubWVudE1hcCcsIGVudk1hcCk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgZW52aXJvbm1lbnQgbWFwXG4gICAgICogQHJldHVybiB7Y2xheS5UZXh0dXJlQ3ViZX1cbiAgICAgKi9cbiAgICBnZXRFbnZpcm9ubWVudE1hcDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXRlcmlhbC5nZXQoJ2Vudmlyb25tZW50TWFwJyk7XG4gICAgfSxcblxuICAgIF9iZWZvcmVSZW5kZXJTY2VuZTogZnVuY3Rpb24ocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJTa3lib3gocmVuZGVyZXIsIGNhbWVyYSk7XG4gICAgfSxcblxuICAgIHJlbmRlclNreWJveDogZnVuY3Rpb24gKHJlbmRlcmVyLCBjYW1lcmEpIHtcbiAgICAgICAgdmFyIGR1bW15Q2FtZXJhID0gdGhpcy5fZHVtbXlDYW1lcmE7XG4gICAgICAgIGR1bW15Q2FtZXJhLmFzcGVjdCA9IHJlbmRlcmVyLmdldFZpZXdwb3J0QXNwZWN0KCk7XG4gICAgICAgIGR1bW15Q2FtZXJhLmZvdiA9IGNhbWVyYS5mb3YgfHwgNTA7XG4gICAgICAgIGR1bW15Q2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgTWF0cml4NC5pbnZlcnQoZHVtbXlDYW1lcmEuaW52UHJvamVjdGlvbk1hdHJpeCwgZHVtbXlDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgIGR1bW15Q2FtZXJhLndvcmxkVHJhbnNmb3JtLmNvcHkoY2FtZXJhLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgZHVtbXlDYW1lcmEudmlld01hdHJpeC5jb3B5KGNhbWVyYS52aWV3TWF0cml4KTtcblxuICAgICAgICB0aGlzLnBvc2l0aW9uLmNvcHkoY2FtZXJhLmdldFdvcmxkUG9zaXRpb24oKSk7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG5cbiAgICAgICAgLy8gRG9uJ3QgcmVtZW1iZXIgdG8gZGlzYWJsZSBibGVuZFxuICAgICAgICByZW5kZXJlci5nbC5kaXNhYmxlKHJlbmRlcmVyLmdsLkJMRU5EKTtcbiAgICAgICAgaWYgKHRoaXMubWF0ZXJpYWwuZ2V0KCdsb2QnKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdMT0QnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ0xPRCcpO1xuICAgICAgICB9XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoW3RoaXNdLCBkdW1teUNhbWVyYSk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNreWJveDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vU2t5Ym94LmpzXG4vLyBtb2R1bGUgaWQgPSA0MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///41\n");

/***/ }),
/* 42 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n/**\n * Pass rendering scene to a environment cube map\n *\n * @constructor clay.prePass.EnvironmentMap\n * @extends clay.core.Base\n * @example\n *     // Example of car reflection\n *     var envMap = new clay.TextureCube({\n *         width: 256,\n *         height: 256\n *     });\n *     var envPass = new clay.prePass.EnvironmentMap({\n *         position: car.position,\n *         texture: envMap\n *     });\n *     var carBody = car.getChildByName('body');\n *     carBody.material.enableTexture('environmentMap');\n *     carBody.material.set('environmentMap', envMap);\n *     ...\n *     animation.on('frame', function(frameTime) {\n *         envPass.render(renderer, scene);\n *         renderer.render(scene, camera);\n *     });\n */\nvar EnvironmentMapPass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    var ret = /** @lends clay.prePass.EnvironmentMap# */ {\n        /**\n         * Camera position\n         * @type {clay.Vector3}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        position: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](),\n        /**\n         * Camera far plane\n         * @type {number}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        far: 1000,\n        /**\n         * Camera near plane\n         * @type {number}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        near: 0.1,\n        /**\n         * Environment cube map\n         * @type {clay.TextureCube}\n         * @memberOf clay.prePass.EnvironmentMap#\n         */\n        texture: null,\n\n        /**\n         * Used if you wan't have shadow in environment map\n         * @type {clay.prePass.ShadowMap}\n         */\n        shadowMapPass: null,\n    };\n    var cameras = ret._cameras = {\n        px: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        nx: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        py: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        ny: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        pz: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 }),\n        nz: new __WEBPACK_IMPORTED_MODULE_2__camera_Perspective__[\"a\" /* default */]({ fov: 90 })\n    };\n    cameras.px.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_X, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.nx.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_X, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.py.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Y, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n    cameras.ny.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n    cameras.pz.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].POSITIVE_Z, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n    cameras.nz.lookAt(__WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Z, __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n\n    // FIXME In windows, use one framebuffer only renders one side of cubemap\n    ret._frameBuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]();\n\n    return ret;\n},  /** @lends clay.prePass.EnvironmentMap# */ {\n    /**\n     * @param  {string} target\n     * @return  {clay.Camera}\n     */\n    getCamera: function (target) {\n        return this._cameras[target];\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Scene} scene\n     * @param  {boolean} [notUpdateScene=false]\n     */\n    render: function(renderer, scene, notUpdateScene) {\n        var _gl = renderer.gl;\n        if (!notUpdateScene) {\n            scene.update();\n        }\n        // Tweak fov\n        // http://the-witness.net/news/2012/02/seamless-cube-map-filtering/\n        var n = this.texture.width;\n        var fov = 2 * Math.atan(n / (n - 0.5)) / Math.PI * 180;\n\n        for (var i = 0; i < 6; i++) {\n            var target = targets[i];\n            var camera = this._cameras[target];\n            __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */].copy(camera.position, this.position);\n\n            camera.far = this.far;\n            camera.near = this.near;\n            camera.fov = fov;\n\n            if (this.shadowMapPass) {\n                camera.update();\n\n                // update boundingBoxLastFrame\n                var bbox = scene.getBoundingBox();\n                bbox.applyTransform(camera.viewMatrix);\n                scene.viewBoundingBoxLastFrame.copy(bbox);\n\n                this.shadowMapPass.render(renderer, scene, camera, true);\n            }\n            this._frameBuffer.attach(\n                this.texture, _gl.COLOR_ATTACHMENT0,\n                _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i\n            );\n            this._frameBuffer.bind(renderer);\n            renderer.render(scene, camera, true);\n            this._frameBuffer.unbind(renderer);\n        }\n    },\n    /**\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EnvironmentMapPass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3ByZVBhc3MvRW52aXJvbm1lbnRNYXAuanM/Nzk1OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBQZXJzcGVjdGl2ZUNhbWVyYSBmcm9tICcuLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcblxudmFyIHRhcmdldHMgPSBbJ3B4JywgJ254JywgJ3B5JywgJ255JywgJ3B6JywgJ256J107XG5cbi8qKlxuICogUGFzcyByZW5kZXJpbmcgc2NlbmUgdG8gYSBlbnZpcm9ubWVudCBjdWJlIG1hcFxuICpcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXBcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKiBAZXhhbXBsZVxuICogICAgIC8vIEV4YW1wbGUgb2YgY2FyIHJlZmxlY3Rpb25cbiAqICAgICB2YXIgZW52TWFwID0gbmV3IGNsYXkuVGV4dHVyZUN1YmUoe1xuICogICAgICAgICB3aWR0aDogMjU2LFxuICogICAgICAgICBoZWlnaHQ6IDI1NlxuICogICAgIH0pO1xuICogICAgIHZhciBlbnZQYXNzID0gbmV3IGNsYXkucHJlUGFzcy5FbnZpcm9ubWVudE1hcCh7XG4gKiAgICAgICAgIHBvc2l0aW9uOiBjYXIucG9zaXRpb24sXG4gKiAgICAgICAgIHRleHR1cmU6IGVudk1hcFxuICogICAgIH0pO1xuICogICAgIHZhciBjYXJCb2R5ID0gY2FyLmdldENoaWxkQnlOYW1lKCdib2R5Jyk7XG4gKiAgICAgY2FyQm9keS5tYXRlcmlhbC5lbmFibGVUZXh0dXJlKCdlbnZpcm9ubWVudE1hcCcpO1xuICogICAgIGNhckJvZHkubWF0ZXJpYWwuc2V0KCdlbnZpcm9ubWVudE1hcCcsIGVudk1hcCk7XG4gKiAgICAgLi4uXG4gKiAgICAgYW5pbWF0aW9uLm9uKCdmcmFtZScsIGZ1bmN0aW9uKGZyYW1lVGltZSkge1xuICogICAgICAgICBlbnZQYXNzLnJlbmRlcihyZW5kZXJlciwgc2NlbmUpO1xuICogICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gKiAgICAgfSk7XG4gKi9cbnZhciBFbnZpcm9ubWVudE1hcFBhc3MgPSBCYXNlLmV4dGVuZChmdW5jdGlvbigpIHtcbiAgICB2YXIgcmV0ID0gLyoqIEBsZW5kcyBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXAjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbWVyYSBwb3NpdGlvblxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwI1xuICAgICAgICAgKi9cbiAgICAgICAgcG9zaXRpb246IG5ldyBWZWN0b3IzKCksXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW1lcmEgZmFyIHBsYW5lXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBtZW1iZXJPZiBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXAjXG4gICAgICAgICAqL1xuICAgICAgICBmYXI6IDEwMDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDYW1lcmEgbmVhciBwbGFuZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLkVudmlyb25tZW50TWFwI1xuICAgICAgICAgKi9cbiAgICAgICAgbmVhcjogMC4xLFxuICAgICAgICAvKipcbiAgICAgICAgICogRW52aXJvbm1lbnQgY3ViZSBtYXBcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZUN1YmV9XG4gICAgICAgICAqIEBtZW1iZXJPZiBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXAjXG4gICAgICAgICAqL1xuICAgICAgICB0ZXh0dXJlOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVc2VkIGlmIHlvdSB3YW4ndCBoYXZlIHNoYWRvdyBpbiBlbnZpcm9ubWVudCBtYXBcbiAgICAgICAgICogQHR5cGUge2NsYXkucHJlUGFzcy5TaGFkb3dNYXB9XG4gICAgICAgICAqL1xuICAgICAgICBzaGFkb3dNYXBQYXNzOiBudWxsLFxuICAgIH07XG4gICAgdmFyIGNhbWVyYXMgPSByZXQuX2NhbWVyYXMgPSB7XG4gICAgICAgIHB4OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoeyBmb3Y6IDkwIH0pLFxuICAgICAgICBueDogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKHsgZm92OiA5MCB9KSxcbiAgICAgICAgcHk6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSh7IGZvdjogOTAgfSksXG4gICAgICAgIG55OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoeyBmb3Y6IDkwIH0pLFxuICAgICAgICBwejogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKHsgZm92OiA5MCB9KSxcbiAgICAgICAgbno6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSh7IGZvdjogOTAgfSlcbiAgICB9O1xuICAgIGNhbWVyYXMucHgubG9va0F0KFZlY3RvcjMuUE9TSVRJVkVfWCwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICBjYW1lcmFzLm54Lmxvb2tBdChWZWN0b3IzLk5FR0FUSVZFX1gsIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgY2FtZXJhcy5weS5sb29rQXQoVmVjdG9yMy5QT1NJVElWRV9ZLCBWZWN0b3IzLlBPU0lUSVZFX1opO1xuICAgIGNhbWVyYXMubnkubG9va0F0KFZlY3RvcjMuTkVHQVRJVkVfWSwgVmVjdG9yMy5ORUdBVElWRV9aKTtcbiAgICBjYW1lcmFzLnB6Lmxvb2tBdChWZWN0b3IzLlBPU0lUSVZFX1osIFZlY3RvcjMuTkVHQVRJVkVfWSk7XG4gICAgY2FtZXJhcy5uei5sb29rQXQoVmVjdG9yMy5ORUdBVElWRV9aLCBWZWN0b3IzLk5FR0FUSVZFX1kpO1xuXG4gICAgLy8gRklYTUUgSW4gd2luZG93cywgdXNlIG9uZSBmcmFtZWJ1ZmZlciBvbmx5IHJlbmRlcnMgb25lIHNpZGUgb2YgY3ViZW1hcFxuICAgIHJldC5fZnJhbWVCdWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcblxuICAgIHJldHVybiByZXQ7XG59LCAgLyoqIEBsZW5kcyBjbGF5LnByZVBhc3MuRW52aXJvbm1lbnRNYXAjICovIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHRhcmdldFxuICAgICAqIEByZXR1cm4gIHtjbGF5LkNhbWVyYX1cbiAgICAgKi9cbiAgICBnZXRDYW1lcmE6IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NhbWVyYXNbdGFyZ2V0XTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtICB7Y2xheS5TY2VuZX0gc2NlbmVcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbbm90VXBkYXRlU2NlbmU9ZmFsc2VdXG4gICAgICovXG4gICAgcmVuZGVyOiBmdW5jdGlvbihyZW5kZXJlciwgc2NlbmUsIG5vdFVwZGF0ZVNjZW5lKSB7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgaWYgKCFub3RVcGRhdGVTY2VuZSkge1xuICAgICAgICAgICAgc2NlbmUudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVHdlYWsgZm92XG4gICAgICAgIC8vIGh0dHA6Ly90aGUtd2l0bmVzcy5uZXQvbmV3cy8yMDEyLzAyL3NlYW1sZXNzLWN1YmUtbWFwLWZpbHRlcmluZy9cbiAgICAgICAgdmFyIG4gPSB0aGlzLnRleHR1cmUud2lkdGg7XG4gICAgICAgIHZhciBmb3YgPSAyICogTWF0aC5hdGFuKG4gLyAobiAtIDAuNSkpIC8gTWF0aC5QSSAqIDE4MDtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRhcmdldHNbaV07XG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy5fY2FtZXJhc1t0YXJnZXRdO1xuICAgICAgICAgICAgVmVjdG9yMy5jb3B5KGNhbWVyYS5wb3NpdGlvbiwgdGhpcy5wb3NpdGlvbik7XG5cbiAgICAgICAgICAgIGNhbWVyYS5mYXIgPSB0aGlzLmZhcjtcbiAgICAgICAgICAgIGNhbWVyYS5uZWFyID0gdGhpcy5uZWFyO1xuICAgICAgICAgICAgY2FtZXJhLmZvdiA9IGZvdjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hhZG93TWFwUGFzcykge1xuICAgICAgICAgICAgICAgIGNhbWVyYS51cGRhdGUoKTtcblxuICAgICAgICAgICAgICAgIC8vIHVwZGF0ZSBib3VuZGluZ0JveExhc3RGcmFtZVxuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gc2NlbmUuZ2V0Qm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgICAgICBiYm94LmFwcGx5VHJhbnNmb3JtKGNhbWVyYS52aWV3TWF0cml4KTtcbiAgICAgICAgICAgICAgICBzY2VuZS52aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWUuY29weShiYm94KTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93TWFwUGFzcy5yZW5kZXIocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKFxuICAgICAgICAgICAgICAgIHRoaXMudGV4dHVyZSwgX2dsLkNPTE9SX0FUVEFDSE1FTlQwLFxuICAgICAgICAgICAgICAgIF9nbC5URVhUVVJFX0NVQkVfTUFQX1BPU0lUSVZFX1ggKyBpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBFbnZpcm9ubWVudE1hcFBhc3M7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcHJlUGFzcy9FbnZpcm9ubWVudE1hcC5qc1xuLy8gbW9kdWxlIGlkID0gNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///42\n");

/***/ }),
/* 43 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return a + b * t;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL251bWJlci5qcz81Mjk1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIGEgKyBiICogdDtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9udW1iZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///43\n");

/***/ }),
/* 44 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// 缓动函数来自 https://github.com/sole/tween.js/blob/master/src/Tween.js\n\n/**\n * @namespace clay.animation.easing\n */\nvar easing = {\n    /**\n     * @alias clay.animation.easing.linear\n     * @param {number} k\n     * @return {number}\n     */\n    linear: function(k) {\n        return k;\n    },\n    /**\n     * @alias clay.animation.easing.quadraticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticIn: function(k) {\n        return k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quadraticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticOut: function(k) {\n        return k * (2 - k);\n    },\n    /**\n     * @alias clay.animation.easing.quadraticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quadraticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k;\n        }\n        return - 0.5 * (--k * (k - 2) - 1);\n    },\n    /**\n     * @alias clay.animation.easing.cubicIn\n     * @param {number} k\n     * @return {number}\n     */\n    cubicIn: function(k) {\n        return k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.cubicOut\n     * @param {number} k\n     * @return {number}\n     */\n    cubicOut: function(k) {\n        return --k * k * k + 1;\n    },\n    /**\n     * @alias clay.animation.easing.cubicInOut\n     * @param {number} k\n     * @return {number}\n     */\n    cubicInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k + 2);\n    },\n    /**\n     * @alias clay.animation.easing.quarticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quarticIn: function(k) {\n        return k * k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quarticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quarticOut: function(k) {\n        return 1 - (--k * k * k * k);\n    },\n    /**\n     * @alias clay.animation.easing.quarticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quarticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k;\n        }\n        return - 0.5 * ((k -= 2) * k * k * k - 2);\n    },\n    /**\n     * @alias clay.animation.easing.quinticIn\n     * @param {number} k\n     * @return {number}\n     */\n    quinticIn: function(k) {\n        return k * k * k * k * k;\n    },\n    /**\n     * @alias clay.animation.easing.quinticOut\n     * @param {number} k\n     * @return {number}\n     */\n    quinticOut: function(k) {\n        return --k * k * k * k * k + 1;\n    },\n    /**\n     * @alias clay.animation.easing.quinticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    quinticInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return 0.5 * k * k * k * k * k;\n        }\n        return 0.5 * ((k -= 2) * k * k * k * k + 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalIn\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalIn: function(k) {\n        return 1 - Math.cos(k * Math.PI / 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalOut\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalOut: function(k) {\n        return Math.sin(k * Math.PI / 2);\n    },\n    /**\n     * @alias clay.animation.easing.sinusoidalInOut\n     * @param {number} k\n     * @return {number}\n     */\n    sinusoidalInOut: function(k) {\n        return 0.5 * (1 - Math.cos(Math.PI * k));\n    },\n    /**\n     * @alias clay.animation.easing.exponentialIn\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialIn: function(k) {\n        return k === 0 ? 0 : Math.pow(1024, k - 1);\n    },\n    /**\n     * @alias clay.animation.easing.exponentialOut\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialOut: function(k) {\n        return k === 1 ? 1 : 1 - Math.pow(2, - 10 * k);\n    },\n    /**\n     * @alias clay.animation.easing.exponentialInOut\n     * @param {number} k\n     * @return {number}\n     */\n    exponentialInOut: function(k) {\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if ((k *= 2) < 1) {\n            return 0.5 * Math.pow(1024, k - 1);\n        }\n        return 0.5 * (- Math.pow(2, - 10 * (k - 1)) + 2);\n    },\n    /**\n     * @alias clay.animation.easing.circularIn\n     * @param {number} k\n     * @return {number}\n     */\n    circularIn: function(k) {\n        return 1 - Math.sqrt(1 - k * k);\n    },\n    /**\n     * @alias clay.animation.easing.circularOut\n     * @param {number} k\n     * @return {number}\n     */\n    circularOut: function(k) {\n        return Math.sqrt(1 - (--k * k));\n    },\n    /**\n     * @alias clay.animation.easing.circularInOut\n     * @param {number} k\n     * @return {number}\n     */\n    circularInOut: function(k) {\n        if ((k *= 2) < 1) {\n            return - 0.5 * (Math.sqrt(1 - k * k) - 1);\n        }\n        return 0.5 * (Math.sqrt(1 - (k -= 2) * k) + 1);\n    },\n    /**\n     * @alias clay.animation.easing.elasticIn\n     * @param {number} k\n     * @return {number}\n     */\n    elasticIn: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return - (a * Math.pow(2, 10 * (k -= 1)) *\n                    Math.sin((k - s) * (2 * Math.PI) / p));\n    },\n    /**\n     * @alias clay.animation.easing.elasticOut\n     * @param {number} k\n     * @return {number}\n     */\n    elasticOut: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }\n        else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        return (a * Math.pow(2, - 10 * k) *\n                Math.sin((k - s) * (2 * Math.PI) / p) + 1);\n    },\n    /**\n     * @alias clay.animation.easing.elasticInOut\n     * @param {number} k\n     * @return {number}\n     */\n    elasticInOut: function(k) {\n        var s, a = 0.1, p = 0.4;\n        if (k === 0) {\n            return 0;\n        }\n        if (k === 1) {\n            return 1;\n        }\n        if (!a || a < 1) {\n            a = 1; s = p / 4;\n        }\n        else{\n            s = p * Math.asin(1 / a) / (2 * Math.PI);\n        }\n        if ((k *= 2) < 1) {\n            return - 0.5 * (a * Math.pow(2, 10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p));\n        }\n        return a * Math.pow(2, -10 * (k -= 1))\n                * Math.sin((k - s) * (2 * Math.PI) / p) * 0.5 + 1;\n\n    },\n    /**\n     * @alias clay.animation.easing.backIn\n     * @param {number} k\n     * @return {number}\n     */\n    backIn: function(k) {\n        var s = 1.70158;\n        return k * k * ((s + 1) * k - s);\n    },\n    /**\n     * @alias clay.animation.easing.backOut\n     * @param {number} k\n     * @return {number}\n     */\n    backOut: function(k) {\n        var s = 1.70158;\n        return --k * k * ((s + 1) * k + s) + 1;\n    },\n    /**\n     * @alias clay.animation.easing.backInOut\n     * @param {number} k\n     * @return {number}\n     */\n    backInOut: function(k) {\n        var s = 1.70158 * 1.525;\n        if ((k *= 2) < 1) {\n            return 0.5 * (k * k * ((s + 1) * k - s));\n        }\n        return 0.5 * ((k -= 2) * k * ((s + 1) * k + s) + 2);\n    },\n    /**\n     * @alias clay.animation.easing.bounceIn\n     * @param {number} k\n     * @return {number}\n     */\n    bounceIn: function(k) {\n        return 1 - easing.bounceOut(1 - k);\n    },\n    /**\n     * @alias clay.animation.easing.bounceOut\n     * @param {number} k\n     * @return {number}\n     */\n    bounceOut: function(k) {\n        if (k < (1 / 2.75)) {\n            return 7.5625 * k * k;\n        }\n        else if (k < (2 / 2.75)) {\n            return 7.5625 * (k -= (1.5 / 2.75)) * k + 0.75;\n        } else if (k < (2.5 / 2.75)) {\n            return 7.5625 * (k -= (2.25 / 2.75)) * k + 0.9375;\n        } else {\n            return 7.5625 * (k -= (2.625 / 2.75)) * k + 0.984375;\n        }\n    },\n    /**\n     * @alias clay.animation.easing.bounceInOut\n     * @param {number} k\n     * @return {number}\n     */\n    bounceInOut: function(k) {\n        if (k < 0.5) {\n            return easing.bounceIn(k * 2) * 0.5;\n        }\n        return easing.bounceOut(k * 2 - 1) * 0.5 + 0.5;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (easing);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9lYXNpbmcuanM/OGY2OCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyDnvJPliqjlh73mlbDmnaXoh6ogaHR0cHM6Ly9naXRodWIuY29tL3NvbGUvdHdlZW4uanMvYmxvYi9tYXN0ZXIvc3JjL1R3ZWVuLmpzXG5cbi8qKlxuICogQG5hbWVzcGFjZSBjbGF5LmFuaW1hdGlvbi5lYXNpbmdcbiAqL1xudmFyIGVhc2luZyA9IHtcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmxpbmVhclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxpbmVhcjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gaztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcucXVhZHJhdGljSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBxdWFkcmF0aWNJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayAqIGs7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1YWRyYXRpY091dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1YWRyYXRpY091dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayAqICgyIC0gayk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1YWRyYXRpY0luT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVhZHJhdGljSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIGsgKiBrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtIDAuNSAqICgtLWsgKiAoayAtIDIpIC0gMSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmN1YmljSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBjdWJpY0luOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiBrICogayAqIGs7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmN1YmljT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgY3ViaWNPdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIC0tayAqIGsgKiBrICsgMTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuY3ViaWNJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGN1YmljSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIGsgKiBrICogaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMC41ICogKChrIC09IDIpICogayAqIGsgKyAyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcucXVhcnRpY0luXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVhcnRpY0luOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiBrICogayAqIGsgKiBrO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWFydGljT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVhcnRpY091dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gMSAtICgtLWsgKiBrICogayAqIGspO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5xdWFydGljSW5PdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBxdWFydGljSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIGsgKiBrICogayAqIGs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIC0gMC41ICogKChrIC09IDIpICogayAqIGsgKiBrIC0gMik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1aW50aWNJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHF1aW50aWNJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayAqIGsgKiBrICogayAqIGs7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLnF1aW50aWNPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBxdWludGljT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiAtLWsgKiBrICogayAqIGsgKiBrICsgMTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcucXVpbnRpY0luT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgcXVpbnRpY0luT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBrICogayAqIGsgKiBrICogaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMC41ICogKChrIC09IDIpICogayAqIGsgKiBrICogayArIDIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5zaW51c29pZGFsSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzaW51c29pZGFsSW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSBNYXRoLmNvcyhrICogTWF0aC5QSSAvIDIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5zaW51c29pZGFsT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2ludXNvaWRhbE91dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gTWF0aC5zaW4oayAqIE1hdGguUEkgLyAyKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuc2ludXNvaWRhbEluT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2ludXNvaWRhbEluT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiAwLjUgKiAoMSAtIE1hdGguY29zKE1hdGguUEkgKiBrKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmV4cG9uZW50aWFsSW5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBleHBvbmVudGlhbEluOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiBrID09PSAwID8gMCA6IE1hdGgucG93KDEwMjQsIGsgLSAxKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuZXhwb25lbnRpYWxPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBleHBvbmVudGlhbE91dDogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gayA9PT0gMSA/IDEgOiAxIC0gTWF0aC5wb3coMiwgLSAxMCAqIGspO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5leHBvbmVudGlhbEluT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZXhwb25lbnRpYWxJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICBpZiAoayA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGsgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAwLjUgKiBNYXRoLnBvdygxMDI0LCBrIC0gMSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDAuNSAqICgtIE1hdGgucG93KDIsIC0gMTAgKiAoayAtIDEpKSArIDIpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5jaXJjdWxhckluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgY2lyY3VsYXJJbjogZnVuY3Rpb24oaykge1xuICAgICAgICByZXR1cm4gMSAtIE1hdGguc3FydCgxIC0gayAqIGspO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLmVhc2luZy5jaXJjdWxhck91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNpcmN1bGFyT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHJldHVybiBNYXRoLnNxcnQoMSAtICgtLWsgKiBrKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmNpcmN1bGFySW5PdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBjaXJjdWxhckluT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmICgoayAqPSAyKSA8IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAtIDAuNSAqIChNYXRoLnNxcnQoMSAtIGsgKiBrKSAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwLjUgKiAoTWF0aC5zcXJ0KDEgLSAoayAtPSAyKSAqIGspICsgMSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmVsYXN0aWNJblxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGVsYXN0aWNJbjogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcywgYSA9IDAuMSwgcCA9IDAuNDtcbiAgICAgICAgaWYgKGsgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGlmIChrID09PSAxKSB7XG4gICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWEgfHwgYSA8IDEpIHtcbiAgICAgICAgICAgIGEgPSAxOyBzID0gcCAvIDQ7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgcyA9IHAgKiBNYXRoLmFzaW4oMSAvIGEpIC8gKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gLSAoYSAqIE1hdGgucG93KDIsIDEwICogKGsgLT0gMSkpICpcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5zaW4oKGsgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmVsYXN0aWNPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBlbGFzdGljT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHZhciBzLCBhID0gMC4xLCBwID0gMC40O1xuICAgICAgICBpZiAoayA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGsgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYSB8fCBhIDwgMSkge1xuICAgICAgICAgICAgYSA9IDE7IHMgPSBwIC8gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgcyA9IHAgKiBNYXRoLmFzaW4oMSAvIGEpIC8gKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKGEgKiBNYXRoLnBvdygyLCAtIDEwICogaykgKlxuICAgICAgICAgICAgICAgIE1hdGguc2luKChrIC0gcykgKiAoMiAqIE1hdGguUEkpIC8gcCkgKyAxKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuZWxhc3RpY0luT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZWxhc3RpY0luT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHZhciBzLCBhID0gMC4xLCBwID0gMC40O1xuICAgICAgICBpZiAoayA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGsgPT09IDEpIHtcbiAgICAgICAgICAgIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIGlmICghYSB8fCBhIDwgMSkge1xuICAgICAgICAgICAgYSA9IDE7IHMgPSBwIC8gNDtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgcyA9IHAgKiBNYXRoLmFzaW4oMSAvIGEpIC8gKDIgKiBNYXRoLlBJKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGsgKj0gMikgPCAxKSB7XG4gICAgICAgICAgICByZXR1cm4gLSAwLjUgKiAoYSAqIE1hdGgucG93KDIsIDEwICogKGsgLT0gMSkpXG4gICAgICAgICAgICAgICAgKiBNYXRoLnNpbigoayAtIHMpICogKDIgKiBNYXRoLlBJKSAvIHApKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYSAqIE1hdGgucG93KDIsIC0xMCAqIChrIC09IDEpKVxuICAgICAgICAgICAgICAgICogTWF0aC5zaW4oKGsgLSBzKSAqICgyICogTWF0aC5QSSkgLyBwKSAqIDAuNSArIDE7XG5cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuYmFja0luXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgYmFja0luOiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIGsgKiBrICogKChzICsgMSkgKiBrIC0gcyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJhY2tPdXRcbiAgICAgKiBAcGFyYW0ge251bWJlcn0ga1xuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBiYWNrT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIHZhciBzID0gMS43MDE1ODtcbiAgICAgICAgcmV0dXJuIC0tayAqIGsgKiAoKHMgKyAxKSAqIGsgKyBzKSArIDE7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJhY2tJbk91dFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBrXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJhY2tJbk91dDogZnVuY3Rpb24oaykge1xuICAgICAgICB2YXIgcyA9IDEuNzAxNTggKiAxLjUyNTtcbiAgICAgICAgaWYgKChrICo9IDIpIDwgMSkge1xuICAgICAgICAgICAgcmV0dXJuIDAuNSAqIChrICogayAqICgocyArIDEpICogayAtIHMpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMC41ICogKChrIC09IDIpICogayAqICgocyArIDEpICogayArIHMpICsgMik7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJvdW5jZUluXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgYm91bmNlSW46IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgcmV0dXJuIDEgLSBlYXNpbmcuYm91bmNlT3V0KDEgLSBrKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5lYXNpbmcuYm91bmNlT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgYm91bmNlT3V0OiBmdW5jdGlvbihrKSB7XG4gICAgICAgIGlmIChrIDwgKDEgLyAyLjc1KSkge1xuICAgICAgICAgICAgcmV0dXJuIDcuNTYyNSAqIGsgKiBrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGsgPCAoMiAvIDIuNzUpKSB7XG4gICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gKDEuNSAvIDIuNzUpKSAqIGsgKyAwLjc1O1xuICAgICAgICB9IGVsc2UgaWYgKGsgPCAoMi41IC8gMi43NSkpIHtcbiAgICAgICAgICAgIHJldHVybiA3LjU2MjUgKiAoayAtPSAoMi4yNSAvIDIuNzUpKSAqIGsgKyAwLjkzNzU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gNy41NjI1ICogKGsgLT0gKDIuNjI1IC8gMi43NSkpICogayArIDAuOTg0Mzc1O1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAYWxpYXMgY2xheS5hbmltYXRpb24uZWFzaW5nLmJvdW5jZUluT3V0XG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGtcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgYm91bmNlSW5PdXQ6IGZ1bmN0aW9uKGspIHtcbiAgICAgICAgaWYgKGsgPCAwLjUpIHtcbiAgICAgICAgICAgIHJldHVybiBlYXNpbmcuYm91bmNlSW4oayAqIDIpICogMC41O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlYXNpbmcuYm91bmNlT3V0KGsgKiAyIC0gMSkgKiAwLjUgKyAwLjU7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZWFzaW5nO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9lYXNpbmcuanNcbi8vIG1vZHVsZSBpZCA9IDQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///44\n");

/***/ }),
/* 45 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2 Dimensional Vector\n * @name vec2\n */\n\nvar vec2 = {};\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\nvec2.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = 0;\n    out[1] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {vec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\nvec2.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\nvec2.fromValues = function(x, y) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the source vector\n * @returns {vec2} out\n */\nvec2.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n};\n\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\nvec2.set = function(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n};\n\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nvec2.sub = vec2.subtract;\n\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nvec2.mul = vec2.multiply;\n\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n};\n\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nvec2.div = vec2.divide;\n\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec2} out\n */\nvec2.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n};\n\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\nvec2.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n};\n\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\nvec2.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} distance between a and b\n */\nvec2.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nvec2.dist = vec2.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec2.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nvec2.sqrDist = vec2.squaredDistance;\n\n/**\n * Calculates the length of a vec2\n *\n * @param {vec2} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec2.length = function (a) {\n    var x = a[0],\n        y = a[1];\n    return Math.sqrt(x*x + y*y);\n};\n\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nvec2.len = vec2.length;\n\n/**\n * Calculates the squared length of a vec2\n *\n * @param {vec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec2.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1];\n    return x*x + y*y;\n};\n\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nvec2.sqrLen = vec2.squaredLength;\n\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to negate\n * @returns {vec2} out\n */\nvec2.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n};\n\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to invert\n * @returns {vec2} out\n */\nvec2.inverse = function(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n};\n\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a vector to normalize\n * @returns {vec2} out\n */\nvec2.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1];\n    var len = x*x + y*y;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec2.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n};\n\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @returns {vec3} out\n */\nvec2.cross = function(out, a, b) {\n    var z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the first operand\n * @param {vec2} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec2} out\n */\nvec2.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\nvec2.random = function (out, scale) {\n    scale = scale || 1.0;\n    var r = GLMAT_RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat2d} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat2d = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat3} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat3 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n};\n\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {vec2} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec2} out\n */\nvec2.transformMat4 = function(out, a, m) {\n    var x = a[0],\n        y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n};\n\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec2.forEach = (function() {\n    var vec = vec2.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 2;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n\n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1];\n        }\n\n        return a;\n    };\n})();\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (vec2);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L3ZlYzIuanM/YWUxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyAyIERpbWVuc2lvbmFsIFZlY3RvclxuICogQG5hbWUgdmVjMlxuICovXG5cbnZhciB2ZWMyID0ge307XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldywgZW1wdHkgdmVjMlxuICpcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xudmVjMi5jcmVhdGUgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoMik7XG4gICAgb3V0WzBdID0gMDtcbiAgICBvdXRbMV0gPSAwO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMiBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIHZlY3RvclxuICpcbiAqIEBwYXJhbSB7dmVjMn0gYSB2ZWN0b3IgdG8gY2xvbmVcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xudmVjMi5jbG9uZSA9IGZ1bmN0aW9uKGEpIHtcbiAgICB2YXIgb3V0ID0gbmV3IEdMTUFUX0FSUkFZX1RZUEUoMik7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgdmVjMiBpbml0aWFsaXplZCB3aXRoIHRoZSBnaXZlbiB2YWx1ZXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMyfSBhIG5ldyAyRCB2ZWN0b3JcbiAqL1xudmVjMi5mcm9tVmFsdWVzID0gZnVuY3Rpb24oeCwgeSkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSgyKTtcbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIHZlYzIgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIHNvdXJjZSB2ZWN0b3JcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzIgdG8gdGhlIGdpdmVuIHZhbHVlc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge051bWJlcn0geCBYIGNvbXBvbmVudFxuICogQHBhcmFtIHtOdW1iZXJ9IHkgWSBjb21wb25lbnRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5zZXQgPSBmdW5jdGlvbihvdXQsIHgsIHkpIHtcbiAgICBvdXRbMF0gPSB4O1xuICAgIG91dFsxXSA9IHk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWRkcyB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLmFkZCA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKyBiWzBdO1xuICAgIG91dFsxXSA9IGFbMV0gKyBiWzFdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFN1YnRyYWN0cyB2ZWN0b3IgYiBmcm9tIHZlY3RvciBhXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLnN1YnRyYWN0ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgb3V0WzBdID0gYVswXSAtIGJbMF07XG4gICAgb3V0WzFdID0gYVsxXSAtIGJbMV07XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLnN1YnRyYWN0fVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIuc3ViID0gdmVjMi5zdWJ0cmFjdDtcblxuLyoqXG4gKiBNdWx0aXBsaWVzIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIubXVsdGlwbHkgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdICogYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdICogYlsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIubXVsdGlwbHl9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMi5tdWwgPSB2ZWMyLm11bHRpcGx5O1xuXG4vKipcbiAqIERpdmlkZXMgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5kaXZpZGUgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBhWzBdIC8gYlswXTtcbiAgICBvdXRbMV0gPSBhWzFdIC8gYlsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIHZlYzIuZGl2aWRlfVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIuZGl2ID0gdmVjMi5kaXZpZGU7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgbWluaW11bSBvZiB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLm1pbiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IE1hdGgubWluKGFbMF0sIGJbMF0pO1xuICAgIG91dFsxXSA9IE1hdGgubWluKGFbMV0sIGJbMV0pO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIG1heGltdW0gb2YgdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5tYXggPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBvdXRbMF0gPSBNYXRoLm1heChhWzBdLCBiWzBdKTtcbiAgICBvdXRbMV0gPSBNYXRoLm1heChhWzFdLCBiWzFdKTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTY2FsZXMgYSB2ZWMyIGJ5IGEgc2NhbGFyIG51bWJlclxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIHZlY3RvciB0byBzY2FsZVxuICogQHBhcmFtIHtOdW1iZXJ9IGIgYW1vdW50IHRvIHNjYWxlIHRoZSB2ZWN0b3IgYnlcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIG91dFswXSA9IGFbMF0gKiBiO1xuICAgIG91dFsxXSA9IGFbMV0gKiBiO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEFkZHMgdHdvIHZlYzIncyBhZnRlciBzY2FsaW5nIHRoZSBzZWNvbmQgb3BlcmFuZCBieSBhIHNjYWxhciB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEBwYXJhbSB7TnVtYmVyfSBzY2FsZSB0aGUgYW1vdW50IHRvIHNjYWxlIGIgYnkgYmVmb3JlIGFkZGluZ1xuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLnNjYWxlQW5kQWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBzY2FsZSkge1xuICAgIG91dFswXSA9IGFbMF0gKyAoYlswXSAqIHNjYWxlKTtcbiAgICBvdXRbMV0gPSBhWzFdICsgKGJbMV0gKiBzY2FsZSk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgZXVjbGlkaWFuIGRpc3RhbmNlIGJldHdlZW4gdHdvIHZlYzInc1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHJldHVybnMge051bWJlcn0gZGlzdGFuY2UgYmV0d2VlbiBhIGFuZCBiXG4gKi9cbnZlYzIuZGlzdGFuY2UgPSBmdW5jdGlvbihhLCBiKSB7XG4gICAgdmFyIHggPSBiWzBdIC0gYVswXSxcbiAgICAgICAgeSA9IGJbMV0gLSBhWzFdO1xuICAgIHJldHVybiBNYXRoLnNxcnQoeCp4ICsgeSp5KTtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLmRpc3RhbmNlfVxuICogQGZ1bmN0aW9uXG4gKi9cbnZlYzIuZGlzdCA9IHZlYzIuZGlzdGFuY2U7XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBldWNsaWRpYW4gZGlzdGFuY2UgYmV0d2VlbiB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBzcXVhcmVkIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYlxuICovXG52ZWMyLnNxdWFyZWREaXN0YW5jZSA9IGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgeCA9IGJbMF0gLSBhWzBdLFxuICAgICAgICB5ID0gYlsxXSAtIGFbMV07XG4gICAgcmV0dXJuIHgqeCArIHkqeTtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLnNxdWFyZWREaXN0YW5jZX1cbiAqIEBmdW5jdGlvblxuICovXG52ZWMyLnNxckRpc3QgPSB2ZWMyLnNxdWFyZWREaXN0YW5jZTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBsZW5ndGggb2YgYSB2ZWMyXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBhIHZlY3RvciB0byBjYWxjdWxhdGUgbGVuZ3RoIG9mXG4gKiBAcmV0dXJucyB7TnVtYmVyfSBsZW5ndGggb2YgYVxuICovXG52ZWMyLmxlbmd0aCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXTtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KHgqeCArIHkqeSk7XG59O1xuXG4vKipcbiAqIEFsaWFzIGZvciB7QGxpbmsgdmVjMi5sZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMi5sZW4gPSB2ZWMyLmxlbmd0aDtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdmVjdG9yIHRvIGNhbGN1bGF0ZSBzcXVhcmVkIGxlbmd0aCBvZlxuICogQHJldHVybnMge051bWJlcn0gc3F1YXJlZCBsZW5ndGggb2YgYVxuICovXG52ZWMyLnNxdWFyZWRMZW5ndGggPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgcmV0dXJuIHgqeCArIHkqeTtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayB2ZWMyLnNxdWFyZWRMZW5ndGh9XG4gKiBAZnVuY3Rpb25cbiAqL1xudmVjMi5zcXJMZW4gPSB2ZWMyLnNxdWFyZWRMZW5ndGg7XG5cbi8qKlxuICogTmVnYXRlcyB0aGUgY29tcG9uZW50cyBvZiBhIHZlYzJcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHZlY3RvciB0byBuZWdhdGVcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSAtYVswXTtcbiAgICBvdXRbMV0gPSAtYVsxXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBjb21wb25lbnRzIG9mIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdmVjdG9yIHRvIGludmVydFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLmludmVyc2UgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgb3V0WzBdID0gMS4wIC8gYVswXTtcbiAgb3V0WzFdID0gMS4wIC8gYVsxXTtcbiAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogTm9ybWFsaXplIGEgdmVjMlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdmVjdG9yIHRvIG5vcm1hbGl6ZVxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgdmFyIGxlbiA9IHgqeCArIHkqeTtcbiAgICBpZiAobGVuID4gMCkge1xuICAgICAgICAvL1RPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlP1xuICAgICAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7XG4gICAgICAgIG91dFswXSA9IGFbMF0gKiBsZW47XG4gICAgICAgIG91dFsxXSA9IGFbMV0gKiBsZW47XG4gICAgfVxuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHR3byB2ZWMyJ3NcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7dmVjMn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRvdCBwcm9kdWN0IG9mIGEgYW5kIGJcbiAqL1xudmVjMi5kb3QgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgIHJldHVybiBhWzBdICogYlswXSArIGFbMV0gKiBiWzFdO1xufTtcblxuLyoqXG4gKiBDb21wdXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gdmVjMidzXG4gKiBOb3RlIHRoYXQgdGhlIGNyb3NzIHByb2R1Y3QgbXVzdCBieSBkZWZpbml0aW9uIHByb2R1Y2UgYSAzRCB2ZWN0b3JcbiAqXG4gKiBAcGFyYW0ge3ZlYzN9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSBmaXJzdCBvcGVyYW5kXG4gKiBAcGFyYW0ge3ZlYzJ9IGIgdGhlIHNlY29uZCBvcGVyYW5kXG4gKiBAcmV0dXJucyB7dmVjM30gb3V0XG4gKi9cbnZlYzIuY3Jvc3MgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2YXIgeiA9IGFbMF0gKiBiWzFdIC0gYVsxXSAqIGJbMF07XG4gICAgb3V0WzBdID0gb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSB6O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0d28gdmVjMidzXG4gKlxuICogQHBhcmFtIHt2ZWMyfSBvdXQgdGhlIHJlY2VpdmluZyB2ZWN0b3JcbiAqIEBwYXJhbSB7dmVjMn0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHt2ZWMyfSBiIHRoZSBzZWNvbmQgb3BlcmFuZFxuICogQHBhcmFtIHtOdW1iZXJ9IHQgaW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0c1xuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLmxlcnAgPSBmdW5jdGlvbiAob3V0LCBhLCBiLCB0KSB7XG4gICAgdmFyIGF4ID0gYVswXSxcbiAgICAgICAgYXkgPSBhWzFdO1xuICAgIG91dFswXSA9IGF4ICsgdCAqIChiWzBdIC0gYXgpO1xuICAgIG91dFsxXSA9IGF5ICsgdCAqIChiWzFdIC0gYXkpO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGVcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHtOdW1iZXJ9IFtzY2FsZV0gTGVuZ3RoIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yLiBJZiBvbW1pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIucmFuZG9tID0gZnVuY3Rpb24gKG91dCwgc2NhbGUpIHtcbiAgICBzY2FsZSA9IHNjYWxlIHx8IDEuMDtcbiAgICB2YXIgciA9IEdMTUFUX1JBTkRPTSgpICogMi4wICogTWF0aC5QSTtcbiAgICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHNjYWxlO1xuICAgIG91dFsxXSA9IE1hdGguc2luKHIpICogc2NhbGU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMiB3aXRoIGEgbWF0MlxuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7bWF0Mn0gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi50cmFuc2Zvcm1NYXQyID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXTtcbiAgICBvdXRbMF0gPSBtWzBdICogeCArIG1bMl0gKiB5O1xuICAgIG91dFsxXSA9IG1bMV0gKiB4ICsgbVszXSAqIHk7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNmb3JtcyB0aGUgdmVjMiB3aXRoIGEgbWF0MmRcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDJkfSBtIG1hdHJpeCB0byB0cmFuc2Zvcm0gd2l0aFxuICogQHJldHVybnMge3ZlYzJ9IG91dFxuICovXG52ZWMyLnRyYW5zZm9ybU1hdDJkID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXTtcbiAgICBvdXRbMF0gPSBtWzBdICogeCArIG1bMl0gKiB5ICsgbVs0XTtcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bM10gKiB5ICsgbVs1XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQzXG4gKiAzcmQgdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcxJ1xuICpcbiAqIEBwYXJhbSB7dmVjMn0gb3V0IHRoZSByZWNlaXZpbmcgdmVjdG9yXG4gKiBAcGFyYW0ge3ZlYzJ9IGEgdGhlIHZlY3RvciB0byB0cmFuc2Zvcm1cbiAqIEBwYXJhbSB7bWF0M30gbSBtYXRyaXggdG8gdHJhbnNmb3JtIHdpdGhcbiAqIEByZXR1cm5zIHt2ZWMyfSBvdXRcbiAqL1xudmVjMi50cmFuc2Zvcm1NYXQzID0gZnVuY3Rpb24ob3V0LCBhLCBtKSB7XG4gICAgdmFyIHggPSBhWzBdLFxuICAgICAgICB5ID0gYVsxXTtcbiAgICBvdXRbMF0gPSBtWzBdICogeCArIG1bM10gKiB5ICsgbVs2XTtcbiAgICBvdXRbMV0gPSBtWzFdICogeCArIG1bNF0gKiB5ICsgbVs3XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSB2ZWMyIHdpdGggYSBtYXQ0XG4gKiAzcmQgdmVjdG9yIGNvbXBvbmVudCBpcyBpbXBsaWNpdGx5ICcwJ1xuICogNHRoIHZlY3RvciBjb21wb25lbnQgaXMgaW1wbGljaXRseSAnMSdcbiAqXG4gKiBAcGFyYW0ge3ZlYzJ9IG91dCB0aGUgcmVjZWl2aW5nIHZlY3RvclxuICogQHBhcmFtIHt2ZWMyfSBhIHRoZSB2ZWN0b3IgdG8gdHJhbnNmb3JtXG4gKiBAcGFyYW0ge21hdDR9IG0gbWF0cml4IHRvIHRyYW5zZm9ybSB3aXRoXG4gKiBAcmV0dXJucyB7dmVjMn0gb3V0XG4gKi9cbnZlYzIudHJhbnNmb3JtTWF0NCA9IGZ1bmN0aW9uKG91dCwgYSwgbSkge1xuICAgIHZhciB4ID0gYVswXSxcbiAgICAgICAgeSA9IGFbMV07XG4gICAgb3V0WzBdID0gbVswXSAqIHggKyBtWzRdICogeSArIG1bMTJdO1xuICAgIG91dFsxXSA9IG1bMV0gKiB4ICsgbVs1XSAqIHkgKyBtWzEzXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBQZXJmb3JtIHNvbWUgb3BlcmF0aW9uIG92ZXIgYW4gYXJyYXkgb2YgdmVjMnMuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gYSB0aGUgYXJyYXkgb2YgdmVjdG9ycyB0byBpdGVyYXRlIG92ZXJcbiAqIEBwYXJhbSB7TnVtYmVyfSBzdHJpZGUgTnVtYmVyIG9mIGVsZW1lbnRzIGJldHdlZW4gdGhlIHN0YXJ0IG9mIGVhY2ggdmVjMi4gSWYgMCBhc3N1bWVzIHRpZ2h0bHkgcGFja2VkXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IE51bWJlciBvZiBlbGVtZW50cyB0byBza2lwIGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIGFycmF5XG4gKiBAcGFyYW0ge051bWJlcn0gY291bnQgTnVtYmVyIG9mIHZlYzJzIHRvIGl0ZXJhdGUgb3Zlci4gSWYgMCBpdGVyYXRlcyBvdmVyIGVudGlyZSBhcnJheVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gRnVuY3Rpb24gdG8gY2FsbCBmb3IgZWFjaCB2ZWN0b3IgaW4gdGhlIGFycmF5XG4gKiBAcGFyYW0ge09iamVjdH0gW2FyZ10gYWRkaXRpb25hbCBhcmd1bWVudCB0byBwYXNzIHRvIGZuXG4gKiBAcmV0dXJucyB7QXJyYXl9IGFcbiAqIEBmdW5jdGlvblxuICovXG52ZWMyLmZvckVhY2ggPSAoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZlYyA9IHZlYzIuY3JlYXRlKCk7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oYSwgc3RyaWRlLCBvZmZzZXQsIGNvdW50LCBmbiwgYXJnKSB7XG4gICAgICAgIHZhciBpLCBsO1xuICAgICAgICBpZighc3RyaWRlKSB7XG4gICAgICAgICAgICBzdHJpZGUgPSAyO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoIW9mZnNldCkge1xuICAgICAgICAgICAgb2Zmc2V0ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGNvdW50KSB7XG4gICAgICAgICAgICBsID0gTWF0aC5taW4oKGNvdW50ICogc3RyaWRlKSArIG9mZnNldCwgYS5sZW5ndGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbCA9IGEubGVuZ3RoO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yKGkgPSBvZmZzZXQ7IGkgPCBsOyBpICs9IHN0cmlkZSkge1xuICAgICAgICAgICAgdmVjWzBdID0gYVtpXTsgdmVjWzFdID0gYVtpKzFdO1xuICAgICAgICAgICAgZm4odmVjLCB2ZWMsIGFyZyk7XG4gICAgICAgICAgICBhW2ldID0gdmVjWzBdOyBhW2krMV0gPSB2ZWNbMV07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYTtcbiAgICB9O1xufSkoKTtcblxuZXhwb3J0IGRlZmF1bHQgdmVjMjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ2xtYXRyaXgvdmVjMi5qc1xuLy8gbW9kdWxlIGlkID0gNDVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///45\n");

/***/ }),
/* 46 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animation_Animator__ = __webpack_require__(70);\n\n\n\n\n\n/**\n * Animation is global timeline that schedule all clips. each frame animation will set the time of clips to current and update the states of clips\n * @constructor clay.Timeline\n * @extends clay.core.Base\n *\n * @example\n * var animation = new clay.Timeline();\n * var node = new clay.Node();\n * animation.animate(node.position)\n *     .when(1000, {\n *         x: 500,\n *         y: 500\n *     })\n *     .when(2000, {\n *         x: 100,\n *         y: 100\n *     })\n *     .when(3000, {\n *         z: 10\n *     })\n *     .start('spline');\n */\nvar Timeline = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Timeline# */{\n        /**\n         * stage is an object with render method, each frame if there exists any animating clips, stage.render will be called\n         * @type {Object}\n         */\n        stage: null,\n\n        _clips: [],\n\n        _running: false,\n\n        _time: 0,\n\n        _paused: false,\n\n        _pausedTime: 0\n    };\n},\n/** @lends clay.Timeline.prototype */\n{\n\n    /**\n     * Add animator\n     * @param {clay.animate.Animator} animator\n     */\n    addAnimator: function (animator) {\n        animator.animation = this;\n        var clips = animator.getClips();\n        for (var i = 0; i < clips.length; i++) {\n            this.addClip(clips[i]);\n        }\n    },\n\n    /**\n     * @param {clay.animation.Clip} clip\n     */\n    addClip: function (clip) {\n        if (this._clips.indexOf(clip) < 0) {\n            this._clips.push(clip);\n        }\n    },\n\n    /**\n     * @param  {clay.animation.Clip} clip\n     */\n    removeClip: function (clip) {\n        var idx = this._clips.indexOf(clip);\n        if (idx >= 0) {\n            this._clips.splice(idx, 1);\n        }\n    },\n\n    /**\n     * Remove animator\n     * @param {clay.animate.Animator} animator\n     */\n    removeAnimator: function (animator) {\n        var clips = animator.getClips();\n        for (var i = 0; i < clips.length; i++) {\n            this.removeClip(clips[i]);\n        }\n        animator.animation = null;\n    },\n\n    _update: function () {\n\n        var time = Date.now() - this._pausedTime;\n        var delta = time - this._time;\n        var clips = this._clips;\n        var len = clips.length;\n\n        var deferredEvents = [];\n        var deferredClips = [];\n        for (var i = 0; i < len; i++) {\n            var clip = clips[i];\n            var e = clip.step(time, delta, false);\n            // Throw out the events need to be called after\n            // stage.render, like finish\n            if (e) {\n                deferredEvents.push(e);\n                deferredClips.push(clip);\n            }\n        }\n\n        // Remove the finished clip\n        for (var i = 0; i < len;) {\n            if (clips[i]._needsRemove) {\n                clips[i] = clips[len-1];\n                clips.pop();\n                len--;\n            } else {\n                i++;\n            }\n        }\n\n        len = deferredEvents.length;\n        for (var i = 0; i < len; i++) {\n            deferredClips[i].fire(deferredEvents[i]);\n        }\n\n        this._time = time;\n\n        this.trigger('frame', delta);\n\n        if (this.stage && this.stage.render) {\n            this.stage.render();\n        }\n    },\n    /**\n     * Start running animation\n     */\n    start: function () {\n        var self = this;\n\n        this._running = true;\n        this._time = Date.now();\n\n        this._pausedTime = 0;\n\n        var requestAnimationFrame = __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].requestAnimationFrame;\n\n        function step() {\n            if (self._running) {\n\n                requestAnimationFrame(step);\n\n                if (!self._paused) {\n                    self._update();\n                }\n            }\n        }\n\n        requestAnimationFrame(step);\n\n    },\n    /**\n     * Stop running animation\n     */\n    stop: function () {\n        this._running = false;\n    },\n\n    /**\n     * Pause\n     */\n    pause: function () {\n        if (!this._paused) {\n            this._pauseStart = Date.now();\n            this._paused = true;\n        }\n    },\n\n    /**\n     * Resume\n     */\n    resume: function () {\n        if (this._paused) {\n            this._pausedTime += Date.now() - this._pauseStart;\n            this._paused = false;\n        }\n    },\n\n    /**\n     * Remove all clips\n     */\n    removeClipsAll: function () {\n        this._clips = [];\n    },\n    /**\n     * Create an animator\n     * @param  {Object} target\n     * @param  {Object} [options]\n     * @param  {boolean} [options.loop]\n     * @param  {Function} [options.getter]\n     * @param  {Function} [options.setter]\n     * @param  {Function} [options.interpolater]\n     * @return {clay.animation.Animator}\n     */\n    animate: function (target, options) {\n        options = options || {};\n        var animator = new __WEBPACK_IMPORTED_MODULE_2__animation_Animator__[\"a\" /* default */](\n            target,\n            options.loop,\n            options.getter,\n            options.setter,\n            options.interpolater\n        );\n        animator.animation = this;\n        return animator;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Timeline);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1RpbWVsaW5lLmpzPzg3Y2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuL2NvcmUvdmVuZG9yJztcbmltcG9ydCBBbmltYXRvciBmcm9tICcuL2FuaW1hdGlvbi9BbmltYXRvcic7XG5cblxuLyoqXG4gKiBBbmltYXRpb24gaXMgZ2xvYmFsIHRpbWVsaW5lIHRoYXQgc2NoZWR1bGUgYWxsIGNsaXBzLiBlYWNoIGZyYW1lIGFuaW1hdGlvbiB3aWxsIHNldCB0aGUgdGltZSBvZiBjbGlwcyB0byBjdXJyZW50IGFuZCB1cGRhdGUgdGhlIHN0YXRlcyBvZiBjbGlwc1xuICogQGNvbnN0cnVjdG9yIGNsYXkuVGltZWxpbmVcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBhbmltYXRpb24gPSBuZXcgY2xheS5UaW1lbGluZSgpO1xuICogdmFyIG5vZGUgPSBuZXcgY2xheS5Ob2RlKCk7XG4gKiBhbmltYXRpb24uYW5pbWF0ZShub2RlLnBvc2l0aW9uKVxuICogICAgIC53aGVuKDEwMDAsIHtcbiAqICAgICAgICAgeDogNTAwLFxuICogICAgICAgICB5OiA1MDBcbiAqICAgICB9KVxuICogICAgIC53aGVuKDIwMDAsIHtcbiAqICAgICAgICAgeDogMTAwLFxuICogICAgICAgICB5OiAxMDBcbiAqICAgICB9KVxuICogICAgIC53aGVuKDMwMDAsIHtcbiAqICAgICAgICAgejogMTBcbiAqICAgICB9KVxuICogICAgIC5zdGFydCgnc3BsaW5lJyk7XG4gKi9cbnZhciBUaW1lbGluZSA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LlRpbWVsaW5lIyAqL3tcbiAgICAgICAgLyoqXG4gICAgICAgICAqIHN0YWdlIGlzIGFuIG9iamVjdCB3aXRoIHJlbmRlciBtZXRob2QsIGVhY2ggZnJhbWUgaWYgdGhlcmUgZXhpc3RzIGFueSBhbmltYXRpbmcgY2xpcHMsIHN0YWdlLnJlbmRlciB3aWxsIGJlIGNhbGxlZFxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgc3RhZ2U6IG51bGwsXG5cbiAgICAgICAgX2NsaXBzOiBbXSxcblxuICAgICAgICBfcnVubmluZzogZmFsc2UsXG5cbiAgICAgICAgX3RpbWU6IDAsXG5cbiAgICAgICAgX3BhdXNlZDogZmFsc2UsXG5cbiAgICAgICAgX3BhdXNlZFRpbWU6IDBcbiAgICB9O1xufSxcbi8qKiBAbGVuZHMgY2xheS5UaW1lbGluZS5wcm90b3R5cGUgKi9cbntcblxuICAgIC8qKlxuICAgICAqIEFkZCBhbmltYXRvclxuICAgICAqIEBwYXJhbSB7Y2xheS5hbmltYXRlLkFuaW1hdG9yfSBhbmltYXRvclxuICAgICAqL1xuICAgIGFkZEFuaW1hdG9yOiBmdW5jdGlvbiAoYW5pbWF0b3IpIHtcbiAgICAgICAgYW5pbWF0b3IuYW5pbWF0aW9uID0gdGhpcztcbiAgICAgICAgdmFyIGNsaXBzID0gYW5pbWF0b3IuZ2V0Q2xpcHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hZGRDbGlwKGNsaXBzW2ldKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLkNsaXB9IGNsaXBcbiAgICAgKi9cbiAgICBhZGRDbGlwOiBmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICBpZiAodGhpcy5fY2xpcHMuaW5kZXhPZihjbGlwKSA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2NsaXBzLnB1c2goY2xpcCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uQ2xpcH0gY2xpcFxuICAgICAqL1xuICAgIHJlbW92ZUNsaXA6IGZ1bmN0aW9uIChjbGlwKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9jbGlwcy5pbmRleE9mKGNsaXApO1xuICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMuX2NsaXBzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhbmltYXRvclxuICAgICAqIEBwYXJhbSB7Y2xheS5hbmltYXRlLkFuaW1hdG9yfSBhbmltYXRvclxuICAgICAqL1xuICAgIHJlbW92ZUFuaW1hdG9yOiBmdW5jdGlvbiAoYW5pbWF0b3IpIHtcbiAgICAgICAgdmFyIGNsaXBzID0gYW5pbWF0b3IuZ2V0Q2xpcHMoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjbGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDbGlwKGNsaXBzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICBhbmltYXRvci5hbmltYXRpb24gPSBudWxsO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpIC0gdGhpcy5fcGF1c2VkVGltZTtcbiAgICAgICAgdmFyIGRlbHRhID0gdGltZSAtIHRoaXMuX3RpbWU7XG4gICAgICAgIHZhciBjbGlwcyA9IHRoaXMuX2NsaXBzO1xuICAgICAgICB2YXIgbGVuID0gY2xpcHMubGVuZ3RoO1xuXG4gICAgICAgIHZhciBkZWZlcnJlZEV2ZW50cyA9IFtdO1xuICAgICAgICB2YXIgZGVmZXJyZWRDbGlwcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgY2xpcCA9IGNsaXBzW2ldO1xuICAgICAgICAgICAgdmFyIGUgPSBjbGlwLnN0ZXAodGltZSwgZGVsdGEsIGZhbHNlKTtcbiAgICAgICAgICAgIC8vIFRocm93IG91dCB0aGUgZXZlbnRzIG5lZWQgdG8gYmUgY2FsbGVkIGFmdGVyXG4gICAgICAgICAgICAvLyBzdGFnZS5yZW5kZXIsIGxpa2UgZmluaXNoXG4gICAgICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkRXZlbnRzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgZGVmZXJyZWRDbGlwcy5wdXNoKGNsaXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaW5pc2hlZCBjbGlwXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOykge1xuICAgICAgICAgICAgaWYgKGNsaXBzW2ldLl9uZWVkc1JlbW92ZSkge1xuICAgICAgICAgICAgICAgIGNsaXBzW2ldID0gY2xpcHNbbGVuLTFdO1xuICAgICAgICAgICAgICAgIGNsaXBzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBsZW4gPSBkZWZlcnJlZEV2ZW50cy5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGRlZmVycmVkQ2xpcHNbaV0uZmlyZShkZWZlcnJlZEV2ZW50c1tpXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90aW1lID0gdGltZTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2ZyYW1lJywgZGVsdGEpO1xuXG4gICAgICAgIGlmICh0aGlzLnN0YWdlICYmIHRoaXMuc3RhZ2UucmVuZGVyKSB7XG4gICAgICAgICAgICB0aGlzLnN0YWdlLnJlbmRlcigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTdGFydCBydW5uaW5nIGFuaW1hdGlvblxuICAgICAqL1xuICAgIHN0YXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB0aGlzLl9ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgdGhpcy5fcGF1c2VkVGltZSA9IDA7XG5cbiAgICAgICAgdmFyIHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHZlbmRvci5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cbiAgICAgICAgZnVuY3Rpb24gc3RlcCgpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9ydW5uaW5nKSB7XG5cbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG5cbiAgICAgICAgICAgICAgICBpZiAoIXNlbGYuX3BhdXNlZCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl91cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XG5cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFN0b3AgcnVubmluZyBhbmltYXRpb25cbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3J1bm5pbmcgPSBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGF1c2VcbiAgICAgKi9cbiAgICBwYXVzZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuX3BhdXNlZCkge1xuICAgICAgICAgICAgdGhpcy5fcGF1c2VTdGFydCA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLl9wYXVzZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc3VtZVxuICAgICAqL1xuICAgIHJlc3VtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fcGF1c2VkKSB7XG4gICAgICAgICAgICB0aGlzLl9wYXVzZWRUaW1lICs9IERhdGUubm93KCkgLSB0aGlzLl9wYXVzZVN0YXJ0O1xuICAgICAgICAgICAgdGhpcy5fcGF1c2VkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBjbGlwc1xuICAgICAqL1xuICAgIHJlbW92ZUNsaXBzQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NsaXBzID0gW107XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDcmVhdGUgYW4gYW5pbWF0b3JcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHRhcmdldFxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW29wdGlvbnMubG9vcF1cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW29wdGlvbnMuZ2V0dGVyXVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBbb3B0aW9ucy5zZXR0ZXJdXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvcHRpb25zLmludGVycG9sYXRlcl1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKi9cbiAgICBhbmltYXRlOiBmdW5jdGlvbiAodGFyZ2V0LCBvcHRpb25zKSB7XG4gICAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgICB2YXIgYW5pbWF0b3IgPSBuZXcgQW5pbWF0b3IoXG4gICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICBvcHRpb25zLmxvb3AsXG4gICAgICAgICAgICBvcHRpb25zLmdldHRlcixcbiAgICAgICAgICAgIG9wdGlvbnMuc2V0dGVyLFxuICAgICAgICAgICAgb3B0aW9ucy5pbnRlcnBvbGF0ZXJcbiAgICAgICAgKTtcbiAgICAgICAgYW5pbWF0b3IuYW5pbWF0aW9uID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGFuaW1hdG9yO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBUaW1lbGluZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9UaW1lbGluZS5qc1xuLy8gbW9kdWxlIGlkID0gNDZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///46\n");

/***/ }),
/* 47 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function Handler(action, context) {\n    this.action = action;\n    this.context = context;\n}\n/**\n * @mixin\n * @alias clay.core.mixin.notifier\n */\nvar notifier = {\n    /**\n     * Trigger event\n     * @param  {string} name\n     */\n    trigger: function(name) {\n        if (!this.hasOwnProperty('__handlers__')) {\n            return;\n        }\n        if (!this.__handlers__.hasOwnProperty(name)) {\n            return;\n        }\n\n        var hdls = this.__handlers__[name];\n        var l = hdls.length, i = -1, args = arguments;\n        // Optimize advise from backbone\n        switch (args.length) {\n            case 1:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context);\n                }\n                return;\n            case 2:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1]);\n                }\n                return;\n            case 3:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2]);\n                }\n                return;\n            case 4:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3]);\n                }\n                return;\n            case 5:\n                while (++i < l) {\n                    hdls[i].action.call(hdls[i].context, args[1], args[2], args[3], args[4]);\n                }\n                return;\n            default:\n                while (++i < l) {\n                    hdls[i].action.apply(hdls[i].context, Array.prototype.slice.call(args, 1));\n                }\n                return;\n        }\n    },\n    /**\n     * Register event handler\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    on: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var handlers = this.__handlers__ || (this.__handlers__={});\n        if (!handlers[name]) {\n            handlers[name] = [];\n        }\n        else {\n            if (this.has(name, action)) {\n                return;\n            }\n        }\n        var handler = new Handler(action, context || this);\n        handlers[name].push(handler);\n\n        return this;\n    },\n\n    /**\n     * Register event, event will only be triggered once and then removed\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    once: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        var self = this;\n        function wrapper() {\n            self.off(name, wrapper);\n            action.apply(this, arguments);\n        }\n        return this.on(name, wrapper, context);\n    },\n\n    /**\n     * Alias of once('before' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    before: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'before' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of once('after' + name)\n     * @param  {string} name\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    after: function(name, action, context) {\n        if (!name || !action) {\n            return;\n        }\n        name = 'after' + name;\n        return this.on(name, action, context);\n    },\n\n    /**\n     * Alias of on('success')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    success: function(action, context) {\n        return this.once('success', action, context);\n    },\n\n    /**\n     * Alias of on('error')\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    error: function(action, context) {\n        return this.once('error', action, context);\n    },\n\n    /**\n     * Remove event listener\n     * @param  {Function} action\n     * @param  {Object} [context]\n     * @chainable\n     */\n    off: function(name, action) {\n\n        var handlers = this.__handlers__ || (this.__handlers__={});\n\n        if (!action) {\n            handlers[name] = [];\n            return;\n        }\n        if (handlers[name]) {\n            var hdls = handlers[name];\n            var retains = [];\n            for (var i = 0; i < hdls.length; i++) {\n                if (action && hdls[i].action !== action) {\n                    retains.push(hdls[i]);\n                }\n            }\n            handlers[name] = retains;\n        }\n\n        return this;\n    },\n\n    /**\n     * If registered the event handler\n     * @param  {string}  name\n     * @param  {Function}  action\n     * @return {boolean}\n     */\n    has: function(name, action) {\n        var handlers = this.__handlers__;\n\n        if (! handlers ||\n            ! handlers[name]) {\n            return false;\n        }\n        var hdls = handlers[name];\n        for (var i = 0; i < hdls.length; i++) {\n            if (hdls[i].action === action) {\n                return true;\n            }\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (notifier);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvbWl4aW4vbm90aWZpZXIuanM/MTkyYiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBIYW5kbGVyKGFjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuYWN0aW9uID0gYWN0aW9uO1xuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG59XG4vKipcbiAqIEBtaXhpblxuICogQGFsaWFzIGNsYXkuY29yZS5taXhpbi5ub3RpZmllclxuICovXG52YXIgbm90aWZpZXIgPSB7XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBldmVudFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZVxuICAgICAqL1xuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KCdfX2hhbmRsZXJzX18nKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fX2hhbmRsZXJzX18uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoZGxzID0gdGhpcy5fX2hhbmRsZXJzX19bbmFtZV07XG4gICAgICAgIHZhciBsID0gaGRscy5sZW5ndGgsIGkgPSAtMSwgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgLy8gT3B0aW1pemUgYWR2aXNlIGZyb20gYmFja2JvbmVcbiAgICAgICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkbHNbaV0uYWN0aW9uLmNhbGwoaGRsc1tpXS5jb250ZXh0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkbHNbaV0uYWN0aW9uLmNhbGwoaGRsc1tpXS5jb250ZXh0LCBhcmdzWzFdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkbHNbaV0uYWN0aW9uLmNhbGwoaGRsc1tpXS5jb250ZXh0LCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkbHNbaV0uYWN0aW9uLmNhbGwoaGRsc1tpXS5jb250ZXh0LCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIHdoaWxlICgrK2kgPCBsKSB7XG4gICAgICAgICAgICAgICAgICAgIGhkbHNbaV0uYWN0aW9uLmNhbGwoaGRsc1tpXS5jb250ZXh0LCBhcmdzWzFdLCBhcmdzWzJdLCBhcmdzWzNdLCBhcmdzWzRdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytpIDwgbCkge1xuICAgICAgICAgICAgICAgICAgICBoZGxzW2ldLmFjdGlvbi5hcHBseShoZGxzW2ldLmNvbnRleHQsIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3MsIDEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBldmVudCBoYW5kbGVyXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBuYW1lXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGFjdGlvblxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW2NvbnRleHRdXG4gICAgICogQGNoYWluYWJsZVxuICAgICAqL1xuICAgIG9uOiBmdW5jdGlvbihuYW1lLCBhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCFuYW1lIHx8ICFhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLl9faGFuZGxlcnNfXyB8fCAodGhpcy5fX2hhbmRsZXJzX189e30pO1xuICAgICAgICBpZiAoIWhhbmRsZXJzW25hbWVdKSB7XG4gICAgICAgICAgICBoYW5kbGVyc1tuYW1lXSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKHRoaXMuaGFzKG5hbWUsIGFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhhbmRsZXIgPSBuZXcgSGFuZGxlcihhY3Rpb24sIGNvbnRleHQgfHwgdGhpcyk7XG4gICAgICAgIGhhbmRsZXJzW25hbWVdLnB1c2goaGFuZGxlcik7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGV2ZW50LCBldmVudCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIG9uY2UgYW5kIHRoZW4gcmVtb3ZlZFxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBvbmNlOiBmdW5jdGlvbihuYW1lLCBhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCFuYW1lIHx8ICFhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGZ1bmN0aW9uIHdyYXBwZXIoKSB7XG4gICAgICAgICAgICBzZWxmLm9mZihuYW1lLCB3cmFwcGVyKTtcbiAgICAgICAgICAgIGFjdGlvbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIHdyYXBwZXIsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBvbmNlKCdiZWZvcmUnICsgbmFtZSlcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gYWN0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbY29udGV4dF1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgYmVmb3JlOiBmdW5jdGlvbihuYW1lLCBhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgICAgaWYgKCFuYW1lIHx8ICFhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuYW1lID0gJ2JlZm9yZScgKyBuYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5vbihuYW1lLCBhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBvbmNlKCdhZnRlcicgKyBuYW1lKVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBhZnRlcjogZnVuY3Rpb24obmFtZSwgYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgICAgIGlmICghbmFtZSB8fCAhYWN0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbmFtZSA9ICdhZnRlcicgKyBuYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5vbihuYW1lLCBhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBvbignc3VjY2VzcycpXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGFjdGlvblxuICAgICAqIEBwYXJhbSAge09iamVjdH0gW2NvbnRleHRdXG4gICAgICogQGNoYWluYWJsZVxuICAgICAqL1xuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGFjdGlvbiwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbmNlKCdzdWNjZXNzJywgYWN0aW9uLCBjb250ZXh0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgb2Ygb24oJ2Vycm9yJylcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gYWN0aW9uXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBbY29udGV4dF1cbiAgICAgKiBAY2hhaW5hYmxlXG4gICAgICovXG4gICAgZXJyb3I6IGZ1bmN0aW9uKGFjdGlvbiwgY29udGV4dCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbmNlKCdlcnJvcicsIGFjdGlvbiwgY29udGV4dCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBldmVudCBsaXN0ZW5lclxuICAgICAqIEBwYXJhbSAge0Z1bmN0aW9ufSBhY3Rpb25cbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IFtjb250ZXh0XVxuICAgICAqIEBjaGFpbmFibGVcbiAgICAgKi9cbiAgICBvZmY6IGZ1bmN0aW9uKG5hbWUsIGFjdGlvbikge1xuXG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuX19oYW5kbGVyc19fIHx8ICh0aGlzLl9faGFuZGxlcnNfXz17fSk7XG5cbiAgICAgICAgaWYgKCFhY3Rpb24pIHtcbiAgICAgICAgICAgIGhhbmRsZXJzW25hbWVdID0gW107XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGhhbmRsZXJzW25hbWVdKSB7XG4gICAgICAgICAgICB2YXIgaGRscyA9IGhhbmRsZXJzW25hbWVdO1xuICAgICAgICAgICAgdmFyIHJldGFpbnMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGRscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChhY3Rpb24gJiYgaGRsc1tpXS5hY3Rpb24gIT09IGFjdGlvbikge1xuICAgICAgICAgICAgICAgICAgICByZXRhaW5zLnB1c2goaGRsc1tpXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGFuZGxlcnNbbmFtZV0gPSByZXRhaW5zO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHJlZ2lzdGVyZWQgdGhlIGV2ZW50IGhhbmRsZXJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICBuYW1lXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259ICBhY3Rpb25cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgICAqL1xuICAgIGhhczogZnVuY3Rpb24obmFtZSwgYWN0aW9uKSB7XG4gICAgICAgIHZhciBoYW5kbGVycyA9IHRoaXMuX19oYW5kbGVyc19fO1xuXG4gICAgICAgIGlmICghIGhhbmRsZXJzIHx8XG4gICAgICAgICAgICAhIGhhbmRsZXJzW25hbWVdKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhkbHMgPSBoYW5kbGVyc1tuYW1lXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoaGRsc1tpXS5hY3Rpb24gPT09IGFjdGlvbikge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgbm90aWZpZXI7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvbWl4aW4vbm90aWZpZXIuanNcbi8vIG1vZHVsZSBpZCA9IDQ3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///47\n");

/***/ }),
/* 48 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_GLInfo__ = __webpack_require__(76);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__gpu_ProgramManager__ = __webpack_require__(131);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__shader_source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__ = __webpack_require__(5);\n// TODO Resources like shader, texture, geometry reference management\n// Trace and find out which shader, texture, geometry can be destroyed\n\n\n\n\n\n\n\n\n\n// Light header\n\n\n\n__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_8__shader_source_prez_glsl_js__[\"a\" /* default */]);\n\n\n\n\nvar mat4Create = __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].create;\n\nvar errorShader = {};\n\nfunction defaultGetMaterial(renderable) {\n    return renderable.material;\n}\nfunction defaultGetUniform(renderable, material, symbol) {\n    return material.uniforms[symbol].value;\n}\nfunction defaultIsMaterialChanged(renderabled, prevRenderable, material, prevMaterial) {\n    return material !== prevMaterial;\n}\nfunction defaultIfRender(renderable) {\n    return true;\n}\n\nfunction noop() {}\n\nvar attributeBufferTypeMap = {\n    float: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].FLOAT,\n    byte: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].BYTE,\n    ubyte: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    short: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].SHORT,\n    ushort: __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].UNSIGNED_SHORT\n};\n\nfunction VertexArrayObject(availableAttributes, availableAttributeSymbols, indicesBuffer) {\n    this.availableAttributes = availableAttributes;\n    this.availableAttributeSymbols = availableAttributeSymbols;\n    this.indicesBuffer = indicesBuffer;\n\n    this.vao = null;\n}\n\nfunction PlaceHolderTexture(renderer) {\n    var blankCanvas;\n    var webglTexture;\n    this.bind = function (renderer) {\n        if (!blankCanvas) {\n            // TODO Environment not support createCanvas.\n            blankCanvas = __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].createCanvas();\n            blankCanvas.width = blankCanvas.height = 1;\n            blankCanvas.getContext('2d');\n        }\n\n        var gl = renderer.gl;\n        var firstBind = !webglTexture;\n        if (firstBind) {\n            webglTexture = gl.createTexture();\n        }\n        gl.bindTexture(gl.TEXTURE_2D, webglTexture);\n        if (firstBind) {\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, blankCanvas);\n        }\n    };\n    this.unbind = function (renderer) {\n        renderer.gl.bindTexture(renderer.gl.TEXTURE_2D, null);\n    };\n    this.isRenderable = function () {\n        return true;\n    };\n}\n\n/**\n * @constructor clay.Renderer\n * @extends clay.core.Base\n */\nvar Renderer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Renderer# */ {\n\n        /**\n         * @type {HTMLCanvasElement}\n         * @readonly\n         */\n        canvas: null,\n\n        /**\n         * Canvas width, set by resize method\n         * @type {number}\n         * @private\n         */\n        _width: 100,\n\n        /**\n         * Canvas width, set by resize method\n         * @type {number}\n         * @private\n         */\n        _height: 100,\n\n        /**\n         * Device pixel ratio, set by setDevicePixelRatio method\n         * Specially for high defination display\n         * @see http://www.khronos.org/webgl/wiki/HandlingHighDPI\n         * @type {number}\n         * @private\n         */\n        devicePixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1.0,\n\n        /**\n         * Clear color\n         * @type {number[]}\n         */\n        clearColor: [0.0, 0.0, 0.0, 0.0],\n\n        /**\n         * Default:\n         *     _gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT | _gl.STENCIL_BUFFER_BIT\n         * @type {number}\n         */\n        clearBit: 17664,\n\n        // Settings when getting context\n        // http://www.khronos.org/registry/webgl/specs/latest/#2.4\n\n        /**\n         * If enable log depth buffer\n         * @type {boolean}\n         */\n        logDepthBuffer: false,\n        /**\n         * If enable alpha, default true\n         * @type {boolean}\n         */\n        alpha: true,\n        /**\n         * If enable depth buffer, default true\n         * @type {boolean}\n         */\n        depth: true,\n        /**\n         * If enable stencil buffer, default false\n         * @type {boolean}\n         */\n        stencil: false,\n        /**\n         * If enable antialias, default true\n         * @type {boolean}\n         */\n        antialias: true,\n        /**\n         * If enable premultiplied alpha, default true\n         * @type {boolean}\n         */\n        premultipliedAlpha: true,\n        /**\n         * If preserve drawing buffer, default false\n         * @type {boolean}\n         */\n        preserveDrawingBuffer: false,\n        /**\n         * If throw context error, usually turned on in debug mode\n         * @type {boolean}\n         */\n        throwError: true,\n        /**\n         * WebGL Context created from given canvas\n         * @type {WebGLRenderingContext}\n         */\n        gl: null,\n        /**\n         * Renderer viewport, read-only, can be set by setViewport method\n         * @type {Object}\n         */\n        viewport: {},\n\n        /**\n         * Max joint number\n         * @type {number}\n         */\n        maxJointNumber: 20,\n\n        // Set by FrameBuffer#bind\n        __currentFrameBuffer: null,\n\n        _viewportStack: [],\n        _clearStack: [],\n\n        _sceneRendering: null\n    };\n}, function () {\n\n    if (!this.canvas) {\n        this.canvas = __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].createCanvas();\n    }\n    var canvas = this.canvas;\n    try {\n        var opts = {\n            alpha: this.alpha,\n            depth: this.depth,\n            stencil: this.stencil,\n            antialias: this.antialias,\n            premultipliedAlpha: this.premultipliedAlpha,\n            preserveDrawingBuffer: this.preserveDrawingBuffer\n        };\n\n        this.gl = canvas.getContext('webgl', opts)\n            || canvas.getContext('experimental-webgl', opts);\n\n        if (!this.gl) {\n            throw new Error();\n        }\n\n        this._glinfo = new __WEBPACK_IMPORTED_MODULE_1__core_GLInfo__[\"a\" /* default */](this.gl);\n\n        if (this.gl.targetRenderer) {\n            console.error('Already created a renderer');\n        }\n        this.gl.targetRenderer = this;\n\n        this.resize();\n    }\n    catch (e) {\n        throw 'Error creating WebGL Context ' + e;\n    }\n\n    // Init managers\n    this._programMgr = new __WEBPACK_IMPORTED_MODULE_6__gpu_ProgramManager__[\"a\" /* default */](this);\n\n    this._placeholderTexture = new PlaceHolderTexture(this);\n},\n/** @lends clay.Renderer.prototype. **/\n{\n    /**\n     * Resize the canvas\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function(width, height) {\n        var canvas = this.canvas;\n        // http://www.khronos.org/webgl/wiki/HandlingHighDPI\n        // set the display size of the canvas.\n        var dpr = this.devicePixelRatio;\n        if (width != null) {\n            if (canvas.style) {\n                canvas.style.width = width + 'px';\n                canvas.style.height = height + 'px';\n            }\n            // set the size of the drawingBuffer\n            canvas.width = width * dpr;\n            canvas.height = height * dpr;\n\n            this._width = width;\n            this._height = height;\n        }\n        else {\n            this._width = canvas.width / dpr;\n            this._height = canvas.height / dpr;\n        }\n\n        this.setViewport(0, 0, this._width, this._height);\n    },\n\n    /**\n     * Get renderer width\n     * @return {number}\n     */\n    getWidth: function () {\n        return this._width;\n    },\n\n    /**\n     * Get renderer height\n     * @return {number}\n     */\n    getHeight: function () {\n        return this._height;\n    },\n\n    /**\n     * Get viewport aspect,\n     * @return {number}\n     */\n    getViewportAspect: function () {\n        var viewport = this.viewport;\n        return viewport.width / viewport.height;\n    },\n\n    /**\n     * Set devicePixelRatio\n     * @param {number} devicePixelRatio\n     */\n    setDevicePixelRatio: function(devicePixelRatio) {\n        this.devicePixelRatio = devicePixelRatio;\n        this.resize(this._width, this._height);\n    },\n\n    /**\n     * Get devicePixelRatio\n     * @param {number} devicePixelRatio\n     */\n    getDevicePixelRatio: function () {\n        return this.devicePixelRatio;\n    },\n\n    /**\n     * Get WebGL extension\n     * @param {string} name\n     * @return {object}\n     */\n    getGLExtension: function (name) {\n        return this._glinfo.getExtension(name);\n    },\n\n    /**\n     * Get WebGL parameter\n     * @param {string} name\n     * @return {*}\n     */\n    getGLParameter: function (name) {\n        return this._glinfo.getParameter(name);\n    },\n\n    /**\n     * Set rendering viewport\n     * @param {number|Object} x\n     * @param {number} [y]\n     * @param {number} [width]\n     * @param {number} [height]\n     * @param {number} [devicePixelRatio]\n     *        Defaultly use the renderere devicePixelRatio\n     *        It needs to be 1 when setViewport is called by frameBuffer\n     *\n     * @example\n     *  setViewport(0,0,width,height,1)\n     *  setViewport({\n     *      x: 0,\n     *      y: 0,\n     *      width: width,\n     *      height: height,\n     *      devicePixelRatio: 1\n     *  })\n     */\n    setViewport: function (x, y, width, height, dpr) {\n\n        if (typeof x === 'object') {\n            var obj = x;\n\n            x = obj.x;\n            y = obj.y;\n            width = obj.width;\n            height = obj.height;\n            dpr = obj.devicePixelRatio;\n        }\n        dpr = dpr || this.devicePixelRatio;\n\n        this.gl.viewport(\n            x * dpr, y * dpr, width * dpr, height * dpr\n        );\n        // Use a fresh new object, not write property.\n        this.viewport = {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            devicePixelRatio: dpr\n        };\n    },\n\n    /**\n     * Push current viewport into a stack\n     */\n    saveViewport: function () {\n        this._viewportStack.push(this.viewport);\n    },\n\n    /**\n     * Pop viewport from stack, restore in the renderer\n     */\n    restoreViewport: function () {\n        if (this._viewportStack.length > 0) {\n            this.setViewport(this._viewportStack.pop());\n        }\n    },\n\n    /**\n     * Push current clear into a stack\n     */\n    saveClear: function () {\n        this._clearStack.push({\n            clearBit: this.clearBit,\n            clearColor: this.clearColor\n        });\n    },\n\n    /**\n     * Pop clear from stack, restore in the renderer\n     */\n    restoreClear: function () {\n        if (this._clearStack.length > 0) {\n            var opt = this._clearStack.pop();\n            this.clearColor = opt.clearColor;\n            this.clearBit = opt.clearBit;\n        }\n    },\n\n    bindSceneRendering: function (scene) {\n        this._sceneRendering = scene;\n    },\n\n    /**\n     * Render the scene in camera to the screen or binded offline framebuffer\n     * @param  {clay.Scene}       scene\n     * @param  {clay.Camera}      camera\n     * @param  {boolean}     [notUpdateScene] If not call the scene.update methods in the rendering, default true\n     * @param  {boolean}     [preZ]           If use preZ optimization, default false\n     * @return {IRenderInfo}\n     */\n    render: function(scene, camera, notUpdateScene, preZ) {\n        var _gl = this.gl;\n\n        var clearColor = this.clearColor;\n\n        if (this.clearBit) {\n\n            // Must set depth and color mask true before clear\n            _gl.colorMask(true, true, true, true);\n            _gl.depthMask(true);\n            var viewport = this.viewport;\n            var needsScissor = false;\n            var viewportDpr = viewport.devicePixelRatio;\n            if (viewport.width !== this._width || viewport.height !== this._height\n                || (viewportDpr && viewportDpr !== this.devicePixelRatio)\n                || viewport.x || viewport.y\n            ) {\n                needsScissor = true;\n                // http://stackoverflow.com/questions/11544608/how-to-clear-a-rectangle-area-in-webgl\n                // Only clear the viewport\n                _gl.enable(_gl.SCISSOR_TEST);\n                _gl.scissor(viewport.x * viewportDpr, viewport.y * viewportDpr, viewport.width * viewportDpr, viewport.height * viewportDpr);\n            }\n            _gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n            _gl.clear(this.clearBit);\n            if (needsScissor) {\n                _gl.disable(_gl.SCISSOR_TEST);\n            }\n        }\n\n        // If the scene have been updated in the prepass like shadow map\n        // There is no need to update it again\n        if (!notUpdateScene) {\n            scene.update(false);\n        }\n        scene.updateLights();\n\n        camera = camera || scene.getMainCamera();\n        if (!camera) {\n            console.error('Can\\'t find camera in the scene.');\n            return;\n        }\n        camera.update();\n        var renderList = scene.updateRenderList(camera, true);\n\n        this._sceneRendering = scene;\n\n        var opaqueList = renderList.opaque;\n        var transparentList = renderList.transparent;\n        var sceneMaterial = scene.material;\n\n        scene.trigger('beforerender', this, scene, camera, renderList);\n\n        // Render pre z\n        if (preZ) {\n            this.renderPreZ(opaqueList, scene, camera);\n            _gl.depthFunc(_gl.LEQUAL);\n        }\n        else {\n            _gl.depthFunc(_gl.LESS);\n        }\n\n        // Update the depth of transparent list.\n        var worldViewMat = mat4Create();\n        var posViewSpace = __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__[\"a\" /* default */].create();\n        for (var i = 0; i < transparentList.length; i++) {\n            var renderable = transparentList[i];\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(worldViewMat, camera.viewMatrix.array, renderable.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_10__glmatrix_vec3__[\"a\" /* default */].transformMat4(posViewSpace, renderable.position.array, worldViewMat);\n            renderable.__depth = posViewSpace[2];\n        }\n\n        // Render opaque list\n        this.renderPass(opaqueList, camera, {\n            getMaterial: function (renderable) {\n                return sceneMaterial || renderable.material;\n            },\n            sortCompare: this.opaqueSortCompare\n        });\n\n        this.renderPass(transparentList, camera, {\n            getMaterial: function (renderable) {\n                return sceneMaterial || renderable.material;\n            },\n            sortCompare: this.transparentSortCompare\n        });\n\n        scene.trigger('afterrender', this, scene, camera, renderList);\n\n        // Cleanup\n        this._sceneRendering = null;\n    },\n\n    getProgram: function (renderable, renderMaterial, scene) {\n        renderMaterial = renderMaterial || renderable.material;\n        return this._programMgr.getProgram(renderable, renderMaterial, scene, this);\n    },\n\n    validateProgram: function (program) {\n        if (program.__error) {\n            var errorMsg = program.__error;\n            if (errorShader[program.__uid__]) {\n                return;\n            }\n            errorShader[program.__uid__] = true;\n\n            if (this.throwError) {\n                throw new Error(errorMsg);\n            }\n            else {\n                this.trigger('error', errorMsg);\n            }\n\n        }\n    },\n\n    updatePrograms: function (list, scene, passConfig) {\n        var getMaterial = (passConfig && passConfig.getMaterial) || defaultGetMaterial;\n        scene = scene || null;\n        for (var i = 0; i < list.length; i++) {\n            var renderable = list[i];\n            var renderMaterial = getMaterial.call(this, renderable);\n            if (i > 0) {\n                var prevRenderable = list[i - 1];\n                var prevJointsLen = prevRenderable.joints ? prevRenderable.joints.length : 0;\n                var jointsLen = renderable.joints ? renderable.joints.length : 0;\n                // Keep program not change if joints, material, lightGroup are same of two renderables.\n                if (jointsLen === prevJointsLen\n                    && renderable.material === prevRenderable.material\n                    && renderable.lightGroup === prevRenderable.lightGroup\n                ) {\n                    renderable.__program = prevRenderable.__program;\n                    continue;\n                }\n            }\n\n            var program = this._programMgr.getProgram(renderable, renderMaterial, scene, this);\n\n            this.validateProgram(program);\n\n            renderable.__program = program;\n        }\n    },\n\n    /**\n     * Render a single renderable list in camera in sequence\n     * @param {clay.Renderable[]} list List of all renderables.\n     * @param {clay.Camera} [camera] Camera provide view matrix and porjection matrix. It can be null.\n     * @param {Object} [passConfig]\n     * @param {Function} [passConfig.getMaterial] Get renderable material.\n     * @param {Function} [passConfig.getUniform] Get material uniform value.\n     * @param {Function} [passConfig.isMaterialChanged] If material changed.\n     * @param {Function} [passConfig.beforeRender] Before render each renderable.\n     * @param {Function} [passConfig.afterRender] After render each renderable\n     * @param {Function} [passConfig.ifRender] If render the renderable.\n     * @param {Function} [passConfig.sortCompare] Sort compare function.\n     * @return {IRenderInfo}\n     */\n    renderPass: function(list, camera, passConfig) {\n        this.trigger('beforerenderpass', this, list, camera, passConfig);\n\n        passConfig = passConfig || {};\n        passConfig.getMaterial = passConfig.getMaterial || defaultGetMaterial;\n        passConfig.getUniform = passConfig.getUniform || defaultGetUniform;\n        // PENDING Better solution?\n        passConfig.isMaterialChanged = passConfig.isMaterialChanged || defaultIsMaterialChanged;\n        passConfig.beforeRender = passConfig.beforeRender || noop;\n        passConfig.afterRender = passConfig.afterRender || noop;\n\n        var ifRenderObject = passConfig.ifRender || defaultIfRender;\n\n        this.updatePrograms(list, this._sceneRendering, passConfig);\n        if (passConfig.sortCompare) {\n            list.sort(passConfig.sortCompare);\n        }\n\n        // Some common builtin uniforms\n        var viewport = this.viewport;\n        var vDpr = viewport.devicePixelRatio;\n        var viewportUniform = [\n            viewport.x * vDpr, viewport.y * vDpr,\n            viewport.width * vDpr, viewport.height * vDpr\n        ];\n        var windowDpr = this.devicePixelRatio;\n        var windowSizeUniform = this.__currentFrameBuffer\n            ? [this.__currentFrameBuffer.getTextureWidth(), this.__currentFrameBuffer.getTextureHeight()]\n            : [this._width * windowDpr, this._height * windowDpr];\n        // DEPRECATED\n        var viewportSizeUniform = [\n            viewportUniform[2], viewportUniform[3]\n        ];\n        var time = Date.now();\n\n        // Calculate view and projection matrix\n        if (camera) {\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.VIEW, camera.viewMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.PROJECTION, camera.projectionMatrix.array);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.VIEWINVERSE, camera.worldTransform.array);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.VIEW);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.PROJECTION);\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].identity(matrices.VIEWINVERSE);\n        }\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiply(matrices.VIEWPROJECTION, matrices.PROJECTION, matrices.VIEW);\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.PROJECTIONINVERSE, matrices.PROJECTION);\n        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.VIEWPROJECTIONINVERSE, matrices.VIEWPROJECTION);\n\n        var _gl = this.gl;\n        var scene = this._sceneRendering;\n\n        var prevMaterial;\n        var prevProgram;\n        var prevRenderable;\n\n        // Status\n        var depthTest, depthMask;\n        var culling, cullFace, frontFace;\n        var transparent;\n        var drawID;\n        var currentVAO;\n        var materialTakesTextureSlot;\n\n        // var vaoExt = this.getGLExtension('OES_vertex_array_object');\n        // not use vaoExt, some platforms may mess it up.\n        var vaoExt = null;\n\n        for (var i = 0; i < list.length; i++) {\n            var renderable = list[i];\n            var isSceneNode = renderable.worldTransform != null;\n            var worldM;\n\n            if (!ifRenderObject(renderable)) {\n                continue;\n            }\n\n            // Skinned mesh will transformed to joint space. Ignore the mesh transform\n            if (isSceneNode) {\n                worldM = (renderable.isSkinnedMesh && renderable.isSkinnedMesh())\n                    // TODO\n                    ? (renderable.offsetMatrix ? renderable.offsetMatrix.array :matrices.IDENTITY)\n                    : renderable.worldTransform.array;\n            }\n            var geometry = renderable.geometry;\n            var material = passConfig.getMaterial.call(this, renderable);\n\n            var program = renderable.__program;\n            var shader = material.shader;\n\n            var currentDrawID = geometry.__uid__ + '-' + program.__uid__;\n            var drawIDChanged = currentDrawID !== drawID;\n            drawID = currentDrawID;\n            if (drawIDChanged && vaoExt) {\n                // TODO Seems need to be bound to null immediately (or before bind another program?) if vao is changed\n                vaoExt.bindVertexArrayOES(null);\n            }\n            if (isSceneNode) {\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].copy(matrices.WORLD, worldM);\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiply(matrices.WORLDVIEWPROJECTION, matrices.VIEWPROJECTION, worldM);\n                __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].multiplyAffine(matrices.WORLDVIEW, matrices.VIEW, worldM);\n                if (shader.matrixSemantics.WORLDINVERSE ||\n                    shader.matrixSemantics.WORLDINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDINVERSE, worldM);\n                }\n                if (shader.matrixSemantics.WORLDVIEWINVERSE ||\n                    shader.matrixSemantics.WORLDVIEWINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDVIEWINVERSE, matrices.WORLDVIEW);\n                }\n                if (shader.matrixSemantics.WORLDVIEWPROJECTIONINVERSE ||\n                    shader.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE) {\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].invert(matrices.WORLDVIEWPROJECTIONINVERSE, matrices.WORLDVIEWPROJECTION);\n                }\n            }\n\n            // Before render hook\n            renderable.beforeRender && renderable.beforeRender(this);\n            passConfig.beforeRender.call(this, renderable, material, prevMaterial);\n\n            var programChanged = program !== prevProgram;\n            if (programChanged) {\n                // Set lights number\n                program.bind(this);\n                // Set some common uniforms\n                program.setUniformOfSemantic(_gl, 'VIEWPORT', viewportUniform);\n                program.setUniformOfSemantic(_gl, 'WINDOW_SIZE', windowSizeUniform);\n                if (camera) {\n                    program.setUniformOfSemantic(_gl, 'NEAR', camera.near);\n                    program.setUniformOfSemantic(_gl, 'FAR', camera.far);\n\n                    if (this.logDepthBuffer) {\n                        // TODO Semantic?\n                        program.setUniformOfSemantic(_gl, 'LOG_DEPTH_BUFFER_FC', 2.0 / (Math.log(camera.far + 1.0 ) / Math.LN2));\n                    }\n                }\n                program.setUniformOfSemantic(_gl, 'DEVICEPIXELRATIO', vDpr);\n                program.setUniformOfSemantic(_gl, 'TIME', time);\n                // DEPRECATED\n                program.setUniformOfSemantic(_gl, 'VIEWPORT_SIZE', viewportSizeUniform);\n\n                // Set lights uniforms\n                // TODO needs optimized\n                if (scene) {\n                    scene.setLightUniforms(program, renderable.lightGroup, this);\n                }\n            }\n            else {\n                program = prevProgram;\n            }\n\n            // Program changes also needs reset the materials.\n            if (programChanged || passConfig.isMaterialChanged(\n                renderable, prevRenderable, material, prevMaterial\n            )) {\n                if (material.depthTest !== depthTest) {\n                    material.depthTest ? _gl.enable(_gl.DEPTH_TEST) : _gl.disable(_gl.DEPTH_TEST);\n                    depthTest = material.depthTest;\n                }\n                if (material.depthMask !== depthMask) {\n                    _gl.depthMask(material.depthMask);\n                    depthMask = material.depthMask;\n                }\n                if (material.transparent !== transparent) {\n                    material.transparent ? _gl.enable(_gl.BLEND) : _gl.disable(_gl.BLEND);\n                    transparent = material.transparent;\n                }\n                // TODO cache blending\n                if (material.transparent) {\n                    if (material.blend) {\n                        material.blend(_gl);\n                    }\n                    else {\n                        // Default blend function\n                        _gl.blendEquationSeparate(_gl.FUNC_ADD, _gl.FUNC_ADD);\n                        _gl.blendFuncSeparate(_gl.SRC_ALPHA, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA);\n                    }\n                }\n\n                materialTakesTextureSlot = this._bindMaterial(\n                    renderable, material, program,\n                    prevRenderable || null, prevMaterial || null, prevProgram || null,\n                    passConfig.getUniform\n                );\n                prevMaterial = material;\n            }\n\n            var matrixSemanticKeys = shader.matrixSemanticKeys;\n\n            if (isSceneNode) {\n                for (var k = 0; k < matrixSemanticKeys.length; k++) {\n                    var semantic = matrixSemanticKeys[k];\n                    var semanticInfo = shader.matrixSemantics[semantic];\n                    var matrix = matrices[semantic];\n                    if (semanticInfo.isTranspose) {\n                        var matrixNoTranspose = matrices[semanticInfo.semanticNoTranspose];\n                        __WEBPACK_IMPORTED_MODULE_9__glmatrix_mat4__[\"a\" /* default */].transpose(matrix, matrixNoTranspose);\n                    }\n                    program.setUniform(_gl, semanticInfo.type, semanticInfo.symbol, matrix);\n                }\n            }\n\n            if (renderable.cullFace !== cullFace) {\n                cullFace = renderable.cullFace;\n                _gl.cullFace(cullFace);\n            }\n            if (renderable.frontFace !== frontFace) {\n                frontFace = renderable.frontFace;\n                _gl.frontFace(frontFace);\n            }\n            if (renderable.culling !== culling) {\n                culling = renderable.culling;\n                culling ? _gl.enable(_gl.CULL_FACE) : _gl.disable(_gl.CULL_FACE);\n            }\n            // TODO Not update skeleton in each renderable.\n            this._updateSkeleton(renderable, program, materialTakesTextureSlot);\n            if (drawIDChanged) {\n                currentVAO = this._bindVAO(vaoExt, shader, geometry, program);\n            }\n            this._renderObject(renderable, currentVAO, program);\n\n            // After render hook\n            passConfig.afterRender(this, renderable);\n            renderable.afterRender && renderable.afterRender(this);\n\n            prevProgram = program;\n            prevRenderable = renderable;\n        }\n\n        // TODO Seems need to be bound to null immediately if vao is changed?\n        if (vaoExt) {\n            vaoExt.bindVertexArrayOES(null);\n        }\n\n        this.trigger('afterrenderpass', this, list, camera, passConfig);\n    },\n\n    getMaxJointNumber: function () {\n        return this.maxJointNumber;\n    },\n\n    _updateSkeleton: function (object, program, slot) {\n        var _gl = this.gl;\n        var skeleton = object.skeleton;\n        // Set pose matrices of skinned mesh\n        if (skeleton) {\n            // TODO Update before culling.\n            skeleton.update();\n            if (object.joints.length > this.getMaxJointNumber()) {\n                var skinMatricesTexture = skeleton.getSubSkinMatricesTexture(object.__uid__, object.joints);\n                program.useTextureSlot(this, skinMatricesTexture, slot);\n                program.setUniform(_gl, '1i', 'skinMatricesTexture', slot);\n                program.setUniform(_gl, '1f', 'skinMatricesTextureSize', skinMatricesTexture.width);\n            }\n            else {\n                var skinMatricesArray = skeleton.getSubSkinMatrices(object.__uid__, object.joints);\n                program.setUniformOfSemantic(_gl, 'SKIN_MATRIX', skinMatricesArray);\n            }\n        }\n    },\n\n    _renderObject: function (renderable, vao, program) {\n        var _gl = this.gl;\n        var geometry = renderable.geometry;\n\n        var glDrawMode = renderable.mode;\n        if (glDrawMode == null) {\n            glDrawMode = 0x0004;\n        }\n\n        var ext = null;\n        var isInstanced = renderable.isInstancedMesh && renderable.isInstancedMesh();\n        if (isInstanced) {\n            ext = this.getGLExtension('ANGLE_instanced_arrays');\n            if (!ext) {\n                console.warn('Device not support ANGLE_instanced_arrays extension');\n                return;\n            }\n        }\n\n        var instancedAttrLocations;\n        if (isInstanced) {\n            instancedAttrLocations = this._bindInstancedAttributes(renderable, program, ext);\n        }\n\n        if (vao.indicesBuffer) {\n            var uintExt = this.getGLExtension('OES_element_index_uint');\n            var useUintExt = uintExt && (geometry.indices instanceof Uint32Array);\n            var indicesType = useUintExt ? _gl.UNSIGNED_INT : _gl.UNSIGNED_SHORT;\n\n            if (isInstanced) {\n                ext.drawElementsInstancedANGLE(\n                    glDrawMode, vao.indicesBuffer.count, indicesType, 0, renderable.getInstanceCount()\n                );\n            }\n            else {\n                _gl.drawElements(glDrawMode, vao.indicesBuffer.count, indicesType, 0);\n            }\n        }\n        else {\n            if (isInstanced) {\n                ext.drawArraysInstancedANGLE(glDrawMode, 0, geometry.vertexCount, renderable.getInstanceCount());\n            }\n            else {\n                // FIXME Use vertex number in buffer\n                // vertexCount may get the wrong value when geometry forget to mark dirty after update\n                _gl.drawArrays(glDrawMode, 0, geometry.vertexCount);\n            }\n        }\n\n        if (isInstanced) {\n            for (var i = 0; i < instancedAttrLocations.length; i++) {\n                if (!instancedAttrLocations[i].enabled) {\n                    _gl.disableVertexAttribArray(instancedAttrLocations[i].location);\n                }\n                ext.vertexAttribDivisorANGLE(instancedAttrLocations[i].location, 0);\n            }\n        }\n    },\n\n    _bindInstancedAttributes: function (renderable, program, ext) {\n        var _gl = this.gl;\n        var instancedBuffers = renderable.getInstancedAttributesBuffers(this);\n        var locations = [];\n\n        for (var i = 0; i < instancedBuffers.length; i++) {\n            var bufferObj = instancedBuffers[i];\n            var location = program.getAttribLocation(_gl, bufferObj.symbol);\n            if (location < 0) {\n                continue;\n            }\n\n            var glType = attributeBufferTypeMap[bufferObj.type] || _gl.FLOAT;;\n            var isEnabled = program.isAttribEnabled(this, location);\n            if (!program.isAttribEnabled(this, location)) {\n                _gl.enableVertexAttribArray(location);\n            }\n            locations.push({\n                location: location,\n                enabled: isEnabled\n            });\n            _gl.bindBuffer(_gl.ARRAY_BUFFER, bufferObj.buffer);\n            _gl.vertexAttribPointer(location, bufferObj.size, glType, false, 0, 0);\n            ext.vertexAttribDivisorANGLE(location, bufferObj.divisor);\n        }\n\n        return locations;\n    },\n\n    _bindMaterial: function (renderable, material, program, prevRenderable, prevMaterial, prevProgram, getUniformValue) {\n        var _gl = this.gl;\n        // PENDING Same texture in different material take different slot?\n\n        // May use shader of other material if shader code are same\n        var sameProgram = prevProgram === program;\n\n        var currentTextureSlot = program.currentTextureSlot();\n        var enabledUniforms = material.getEnabledUniforms();\n        var textureUniforms = material.getTextureUniforms();\n        var placeholderTexture = this._placeholderTexture;\n\n        for (var u = 0; u < textureUniforms.length; u++) {\n            var symbol = textureUniforms[u];\n            var uniformValue = getUniformValue(renderable, material, symbol);\n            var uniformType = material.uniforms[symbol].type;\n            // Not use `instanceof` to determine if a value is texture in Material#bind.\n            // Use type instead, in some case texture may be in different namespaces.\n            // TODO Duck type validate.\n            if (uniformType === 't' && uniformValue) {\n                // Reset slot\n                uniformValue.__slot = -1;\n            }\n            else if (uniformType === 'tv') {\n                for (var i = 0; i < uniformValue.length; i++) {\n                    if (uniformValue[i]) {\n                        uniformValue[i].__slot = -1;\n                    }\n                }\n            }\n        }\n\n        placeholderTexture.__slot = -1;\n\n        // Set uniforms\n        for (var u = 0; u < enabledUniforms.length; u++) {\n            var symbol = enabledUniforms[u];\n            var uniform = material.uniforms[symbol];\n            var uniformValue = getUniformValue(renderable, material, symbol);\n            var uniformType = uniform.type;\n            var isTexture = uniformType === 't';\n\n            if (isTexture) {\n                if (!uniformValue || !uniformValue.isRenderable()) {\n                    uniformValue = placeholderTexture;\n                }\n            }\n            // PENDING\n            // When binding two materials with the same shader\n            // Many uniforms will be be set twice even if they have the same value\n            // So add a evaluation to see if the uniform is really needed to be set\n            if (prevMaterial && sameProgram) {\n                var prevUniformValue = getUniformValue(prevRenderable, prevMaterial, symbol);\n                if (isTexture) {\n                    if (!prevUniformValue || !prevUniformValue.isRenderable()) {\n                        prevUniformValue = placeholderTexture;\n                    }\n                }\n\n                if (prevUniformValue === uniformValue) {\n                    if (isTexture) {\n                        // Still take the slot to make sure same texture in different materials have same slot.\n                        program.takeCurrentTextureSlot(this, null);\n                    }\n                    else if (uniformType === 'tv' && uniformValue) {\n                        for (var i = 0; i < uniformValue.length; i++) {\n                            program.takeCurrentTextureSlot(this, null);\n                        }\n                    }\n                    continue;\n                }\n            }\n\n            if (uniformValue == null) {\n                continue;\n            }\n            else if (isTexture) {\n                if (uniformValue.__slot < 0) {\n                    var slot = program.currentTextureSlot();\n                    var res = program.setUniform(_gl, '1i', symbol, slot);\n                    if (res) { // Texture uniform is enabled\n                        program.takeCurrentTextureSlot(this, uniformValue);\n                        uniformValue.__slot = slot;\n                    }\n                }\n                // Multiple uniform use same texture..\n                else {\n                    program.setUniform(_gl, '1i', symbol, uniformValue.__slot);\n                }\n            }\n            else if (Array.isArray(uniformValue)) {\n                if (uniformValue.length === 0) {\n                    continue;\n                }\n                // Texture Array\n                if (uniformType === 'tv') {\n                    if (!program.hasUniform(symbol)) {\n                        continue;\n                    }\n\n                    var arr = [];\n                    for (var i = 0; i < uniformValue.length; i++) {\n                        var texture = uniformValue[i];\n\n                        if (texture.__slot < 0) {\n                            var slot = program.currentTextureSlot();\n                            arr.push(slot);\n                            program.takeCurrentTextureSlot(this, texture);\n                            texture.__slot = slot;\n                        }\n                        else {\n                            arr.push(texture.__slot);\n                        }\n                    }\n\n                    program.setUniform(_gl, '1iv', symbol, arr);\n                }\n                else {\n                    program.setUniform(_gl, uniform.type, symbol, uniformValue);\n                }\n            }\n            else{\n                program.setUniform(_gl, uniform.type, symbol, uniformValue);\n            }\n        }\n        var newSlot = program.currentTextureSlot();\n        // Texture slot maybe used out of material.\n        program.resetTextureSlot(currentTextureSlot);\n        return newSlot;\n    },\n\n    _bindVAO: function (vaoExt, shader, geometry, program) {\n        var isStatic = !geometry.dynamic;\n        var _gl = this.gl;\n\n        var vaoId = this.__uid__ + '-' + program.__uid__;\n        var vao = geometry.__vaoCache[vaoId];\n        if (!vao) {\n            var chunks = geometry.getBufferChunks(this);\n            if (!chunks || !chunks.length) {  // Empty mesh\n                return;\n            }\n            var chunk = chunks[0];\n            var attributeBuffers = chunk.attributeBuffers;\n            var indicesBuffer = chunk.indicesBuffer;\n\n            var availableAttributes = [];\n            var availableAttributeSymbols = [];\n            for (var a = 0; a < attributeBuffers.length; a++) {\n                var attributeBufferInfo = attributeBuffers[a];\n                var name = attributeBufferInfo.name;\n                var semantic = attributeBufferInfo.semantic;\n                var symbol;\n                if (semantic) {\n                    var semanticInfo = shader.attributeSemantics[semantic];\n                    symbol = semanticInfo && semanticInfo.symbol;\n                }\n                else {\n                    symbol = name;\n                }\n                if (symbol && program.attributes[symbol]) {\n                    availableAttributes.push(attributeBufferInfo);\n                    availableAttributeSymbols.push(symbol);\n                }\n            }\n\n            vao = new VertexArrayObject(\n                availableAttributes,\n                availableAttributeSymbols,\n                indicesBuffer\n            );\n\n            if (isStatic) {\n                geometry.__vaoCache[vaoId] = vao;\n            }\n        }\n\n        var needsBindAttributes = true;\n\n        // Create vertex object array cost a lot\n        // So we don't use it on the dynamic object\n        if (vaoExt && isStatic) {\n            // Use vertex array object\n            // http://blog.tojicode.com/2012/10/oesvertexarrayobject-extension.html\n            if (vao.vao == null) {\n                vao.vao = vaoExt.createVertexArrayOES();\n            }\n            else {\n                needsBindAttributes = false;\n            }\n            vaoExt.bindVertexArrayOES(vao.vao);\n        }\n\n        var availableAttributes = vao.availableAttributes;\n        var indicesBuffer = vao.indicesBuffer;\n\n        if (needsBindAttributes) {\n            var locationList = program.enableAttributes(this, vao.availableAttributeSymbols, (vaoExt && isStatic && vao));\n            // Setting attributes;\n            for (var a = 0; a < availableAttributes.length; a++) {\n                var location = locationList[a];\n                if (location === -1) {\n                    continue;\n                }\n                var attributeBufferInfo = availableAttributes[a];\n                var buffer = attributeBufferInfo.buffer;\n                var size = attributeBufferInfo.size;\n                var glType = attributeBufferTypeMap[attributeBufferInfo.type] || _gl.FLOAT;\n\n                _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                _gl.vertexAttribPointer(location, size, glType, false, 0, 0);\n            }\n\n            if (geometry.isUseIndices()) {\n                _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, indicesBuffer.buffer);\n            }\n        }\n\n        return vao;\n    },\n\n    renderPreZ: function (list, scene, camera) {\n        var _gl = this.gl;\n        var preZPassMaterial = this._prezMaterial || new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.prez.fragment'))\n        });\n        this._prezMaterial = preZPassMaterial;\n        if (this.logDepthBuffer) {\n            this._prezMaterial.setUniform('logDepthBufFC', 2.0 / (Math.log(camera.far + 1.0 ) / Math.LN2));\n        }\n\n        _gl.colorMask(false, false, false, false);\n        _gl.depthMask(true);\n\n        // Status\n        this.renderPass(list, camera, {\n            ifRender: function (renderable) {\n                return !renderable.ignorePreZ;\n            },\n            isMaterialChanged: function (renderable, prevRenderable) {\n                var matA = renderable.material;\n                var matB = prevRenderable.material;\n                return matA.get('diffuseMap') !== matB.get('diffuseMap')\n                    || (matA.get('alphaCutoff') || 0) !== (matB.get('alphaCutoff') || 0);\n            },\n            getUniform: function (renderable, depthMaterial, symbol) {\n                if (symbol === 'alphaMap') {\n                    return renderable.material.get('diffuseMap');\n                }\n                else if (symbol === 'alphaCutoff') {\n                    if (renderable.material.isDefined('fragment', 'ALPHA_TEST')\n                        && renderable.material.get('diffuseMap')\n                    ) {\n                        var alphaCutoff = renderable.material.get('alphaCutoff');\n                        return alphaCutoff || 0;\n                    }\n                    return 0;\n                }\n                else if (symbol === 'uvRepeat') {\n                    return renderable.material.get('uvRepeat');\n                }\n                else if (symbol === 'uvOffset') {\n                    return renderable.material.get('uvOffset');\n                }\n                else {\n                    return depthMaterial.get(symbol);\n                }\n            },\n            getMaterial: function () {\n                return preZPassMaterial;\n            },\n            sort: this.opaqueSortCompare\n        });\n\n        _gl.colorMask(true, true, true, true);\n        _gl.depthMask(true);\n    },\n\n    /**\n     * Dispose given scene, including all geometris, textures and shaders in the scene\n     * @param {clay.Scene} scene\n     */\n    disposeScene: function(scene) {\n        this.disposeNode(scene, true, true);\n        scene.dispose();\n    },\n\n    /**\n     * Dispose given node, including all geometries, textures and shaders attached on it or its descendant\n     * @param {clay.Node} node\n     * @param {boolean} [disposeGeometry=false] If dispose the geometries used in the descendant mesh\n     * @param {boolean} [disposeTexture=false] If dispose the textures used in the descendant mesh\n     */\n    disposeNode: function(root, disposeGeometry, disposeTexture) {\n        // Dettached from parent\n        if (root.getParent()) {\n            root.getParent().remove(root);\n        }\n        var disposedMap = {};\n        root.traverse(function(node) {\n            var material = node.material;\n            if (node.geometry && disposeGeometry) {\n                node.geometry.dispose(this);\n            }\n            if (disposeTexture && material && !disposedMap[material.__uid__]) {\n                var textureUniforms = material.getTextureUniforms();\n                for (var u = 0; u < textureUniforms.length; u++) {\n                    var uniformName = textureUniforms[u];\n                    var val = material.uniforms[uniformName].value;\n                    var uniformType = material.uniforms[uniformName].type;\n                    if (!val) {\n                        continue;\n                    }\n                    if (uniformType === 't') {\n                        val.dispose && val.dispose(this);\n                    }\n                    else if (uniformType === 'tv') {\n                        for (var k = 0; k < val.length; k++) {\n                            if (val[k]) {\n                                val[k].dispose && val[k].dispose(this);\n                            }\n                        }\n                    }\n                }\n                disposedMap[material.__uid__] = true;\n            }\n            // Particle system and AmbientCubemap light need to dispose\n            if (node.dispose) {\n                node.dispose(this);\n            }\n        }, this);\n    },\n\n    /**\n     * Dispose given geometry\n     * @param {clay.Geometry} geometry\n     */\n    disposeGeometry: function(geometry) {\n        geometry.dispose(this);\n    },\n\n    /**\n     * Dispose given texture\n     * @param {clay.Texture} texture\n     */\n    disposeTexture: function(texture) {\n        texture.dispose(this);\n    },\n\n    /**\n     * Dispose given frame buffer\n     * @param {clay.FrameBuffer} frameBuffer\n     */\n    disposeFrameBuffer: function(frameBuffer) {\n        frameBuffer.dispose(this);\n    },\n\n    /**\n     * Dispose renderer\n     */\n    dispose: function () {},\n\n    /**\n     * Convert screen coords to normalized device coordinates(NDC)\n     * Screen coords can get from mouse event, it is positioned relative to canvas element\n     * NDC can be used in ray casting with Camera.prototype.castRay methods\n     *\n     * @param  {number}       x\n     * @param  {number}       y\n     * @param  {clay.Vector2} [out]\n     * @return {clay.Vector2}\n     */\n    screenToNDC: function(x, y, out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_5__math_Vector2__[\"a\" /* default */]();\n        }\n        // Invert y;\n        y = this._height - y;\n\n        var viewport = this.viewport;\n        var arr = out.array;\n        arr[0] = (x - viewport.x) / viewport.width;\n        arr[0] = arr[0] * 2 - 1;\n        arr[1] = (y - viewport.y) / viewport.height;\n        arr[1] = arr[1] * 2 - 1;\n\n        return out;\n    }\n});\n\n/**\n * Opaque renderables compare function\n * @param  {clay.Renderable} x\n * @param  {clay.Renderable} y\n * @return {boolean}\n * @static\n */\nRenderer.opaqueSortCompare = Renderer.prototype.opaqueSortCompare = function(x, y) {\n    // Priority renderOrder -> program -> material -> geometry\n    if (x.renderOrder === y.renderOrder) {\n        if (x.__program === y.__program) {\n            if (x.material === y.material) {\n                return x.geometry.__uid__ - y.geometry.__uid__;\n            }\n            return x.material.__uid__ - y.material.__uid__;\n        }\n        if (x.__program && y.__program) {\n            return x.__program.__uid__ - y.__program.__uid__;\n        }\n        return 0;\n    }\n    return x.renderOrder - y.renderOrder;\n};\n\n/**\n * Transparent renderables compare function\n * @param  {clay.Renderable} a\n * @param  {clay.Renderable} b\n * @return {boolean}\n * @static\n */\nRenderer.transparentSortCompare = Renderer.prototype.transparentSortCompare = function(x, y) {\n    // Priority renderOrder -> depth -> program -> material -> geometry\n\n    if (x.renderOrder === y.renderOrder) {\n        if (x.__depth === y.__depth) {\n            if (x.__program === y.__program) {\n                if (x.material === y.material) {\n                    return x.geometry.__uid__ - y.geometry.__uid__;\n                }\n                return x.material.__uid__ - y.material.__uid__;\n            }\n            if (x.__program  && y.__program) {\n                return x.__program.__uid__ - y.__program.__uid__;\n            }\n            return 0;\n        }\n        // Depth is negative\n        // So farther object has smaller depth value\n        return x.__depth - y.__depth;\n    }\n    return x.renderOrder - y.renderOrder;\n};\n\n// Temporary variables\nvar matrices = {\n    IDENTITY: mat4Create(),\n\n    WORLD: mat4Create(),\n    VIEW: mat4Create(),\n    PROJECTION: mat4Create(),\n    WORLDVIEW: mat4Create(),\n    VIEWPROJECTION: mat4Create(),\n    WORLDVIEWPROJECTION: mat4Create(),\n\n    WORLDINVERSE: mat4Create(),\n    VIEWINVERSE: mat4Create(),\n    PROJECTIONINVERSE: mat4Create(),\n    WORLDVIEWINVERSE: mat4Create(),\n    VIEWPROJECTIONINVERSE: mat4Create(),\n    WORLDVIEWPROJECTIONINVERSE: mat4Create(),\n\n    WORLDTRANSPOSE: mat4Create(),\n    VIEWTRANSPOSE: mat4Create(),\n    PROJECTIONTRANSPOSE: mat4Create(),\n    WORLDVIEWTRANSPOSE: mat4Create(),\n    VIEWPROJECTIONTRANSPOSE: mat4Create(),\n    WORLDVIEWPROJECTIONTRANSPOSE: mat4Create(),\n    WORLDINVERSETRANSPOSE: mat4Create(),\n    VIEWINVERSETRANSPOSE: mat4Create(),\n    PROJECTIONINVERSETRANSPOSE: mat4Create(),\n    WORLDVIEWINVERSETRANSPOSE: mat4Create(),\n    VIEWPROJECTIONINVERSETRANSPOSE: mat4Create(),\n    WORLDVIEWPROJECTIONINVERSETRANSPOSE: mat4Create()\n};\n\n/**\n * @name clay.Renderer.COLOR_BUFFER_BIT\n * @type {number}\n */\nRenderer.COLOR_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].COLOR_BUFFER_BIT;\n/**\n * @name clay.Renderer.DEPTH_BUFFER_BIT\n * @type {number}\n */\nRenderer.DEPTH_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].DEPTH_BUFFER_BIT;\n/**\n * @name clay.Renderer.STENCIL_BUFFER_BIT\n * @type {number}\n */\nRenderer.STENCIL_BUFFER_BIT = __WEBPACK_IMPORTED_MODULE_2__core_glenum__[\"a\" /* default */].STENCIL_BUFFER_BIT;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Renderer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1JlbmRlcmVyLmpzPzE4ODgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVE9ETyBSZXNvdXJjZXMgbGlrZSBzaGFkZXIsIHRleHR1cmUsIGdlb21ldHJ5IHJlZmVyZW5jZSBtYW5hZ2VtZW50XG4vLyBUcmFjZSBhbmQgZmluZCBvdXQgd2hpY2ggc2hhZGVyLCB0ZXh0dXJlLCBnZW9tZXRyeSBjYW4gYmUgZGVzdHJveWVkXG5pbXBvcnQgQmFzZSBmcm9tICcuL2NvcmUvQmFzZSc7XG5pbXBvcnQgR0xJbmZvIGZyb20gJy4vY29yZS9HTEluZm8nO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuL2NvcmUvZ2xlbnVtJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5cbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuL01hdGVyaWFsJztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4vbWF0aC9WZWN0b3IyJztcbmltcG9ydCBQcm9ncmFtTWFuYWdlciBmcm9tICcuL2dwdS9Qcm9ncmFtTWFuYWdlcic7XG5cbi8vIExpZ2h0IGhlYWRlclxuaW1wb3J0IFNoYWRlciBmcm9tICcuL1NoYWRlcic7XG5cbmltcG9ydCBwcmV6RXNzbCBmcm9tICcuL3NoYWRlci9zb3VyY2UvcHJlei5nbHNsLmpzJztcblNoYWRlclsnaW1wb3J0J10ocHJlekVzc2wpO1xuXG5pbXBvcnQgbWF0NCBmcm9tICcuL2dsbWF0cml4L21hdDQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi9nbG1hdHJpeC92ZWMzJztcblxudmFyIG1hdDRDcmVhdGUgPSBtYXQ0LmNyZWF0ZTtcblxudmFyIGVycm9yU2hhZGVyID0ge307XG5cbmZ1bmN0aW9uIGRlZmF1bHRHZXRNYXRlcmlhbChyZW5kZXJhYmxlKSB7XG4gICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWw7XG59XG5mdW5jdGlvbiBkZWZhdWx0R2V0VW5pZm9ybShyZW5kZXJhYmxlLCBtYXRlcmlhbCwgc3ltYm9sKSB7XG4gICAgcmV0dXJuIG1hdGVyaWFsLnVuaWZvcm1zW3N5bWJvbF0udmFsdWU7XG59XG5mdW5jdGlvbiBkZWZhdWx0SXNNYXRlcmlhbENoYW5nZWQocmVuZGVyYWJsZWQsIHByZXZSZW5kZXJhYmxlLCBtYXRlcmlhbCwgcHJldk1hdGVyaWFsKSB7XG4gICAgcmV0dXJuIG1hdGVyaWFsICE9PSBwcmV2TWF0ZXJpYWw7XG59XG5mdW5jdGlvbiBkZWZhdWx0SWZSZW5kZXIocmVuZGVyYWJsZSkge1xuICAgIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBub29wKCkge31cblxudmFyIGF0dHJpYnV0ZUJ1ZmZlclR5cGVNYXAgPSB7XG4gICAgZmxvYXQ6IGdsZW51bS5GTE9BVCxcbiAgICBieXRlOiBnbGVudW0uQllURSxcbiAgICB1Ynl0ZTogZ2xlbnVtLlVOU0lHTkVEX0JZVEUsXG4gICAgc2hvcnQ6IGdsZW51bS5TSE9SVCxcbiAgICB1c2hvcnQ6IGdsZW51bS5VTlNJR05FRF9TSE9SVFxufTtcblxuZnVuY3Rpb24gVmVydGV4QXJyYXlPYmplY3QoYXZhaWxhYmxlQXR0cmlidXRlcywgYXZhaWxhYmxlQXR0cmlidXRlU3ltYm9scywgaW5kaWNlc0J1ZmZlcikge1xuICAgIHRoaXMuYXZhaWxhYmxlQXR0cmlidXRlcyA9IGF2YWlsYWJsZUF0dHJpYnV0ZXM7XG4gICAgdGhpcy5hdmFpbGFibGVBdHRyaWJ1dGVTeW1ib2xzID0gYXZhaWxhYmxlQXR0cmlidXRlU3ltYm9scztcbiAgICB0aGlzLmluZGljZXNCdWZmZXIgPSBpbmRpY2VzQnVmZmVyO1xuXG4gICAgdGhpcy52YW8gPSBudWxsO1xufVxuXG5mdW5jdGlvbiBQbGFjZUhvbGRlclRleHR1cmUocmVuZGVyZXIpIHtcbiAgICB2YXIgYmxhbmtDYW52YXM7XG4gICAgdmFyIHdlYmdsVGV4dHVyZTtcbiAgICB0aGlzLmJpbmQgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgaWYgKCFibGFua0NhbnZhcykge1xuICAgICAgICAgICAgLy8gVE9ETyBFbnZpcm9ubWVudCBub3Qgc3VwcG9ydCBjcmVhdGVDYW52YXMuXG4gICAgICAgICAgICBibGFua0NhbnZhcyA9IHZlbmRvci5jcmVhdGVDYW52YXMoKTtcbiAgICAgICAgICAgIGJsYW5rQ2FudmFzLndpZHRoID0gYmxhbmtDYW52YXMuaGVpZ2h0ID0gMTtcbiAgICAgICAgICAgIGJsYW5rQ2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgdmFyIGZpcnN0QmluZCA9ICF3ZWJnbFRleHR1cmU7XG4gICAgICAgIGlmIChmaXJzdEJpbmQpIHtcbiAgICAgICAgICAgIHdlYmdsVGV4dHVyZSA9IGdsLmNyZWF0ZVRleHR1cmUoKTtcbiAgICAgICAgfVxuICAgICAgICBnbC5iaW5kVGV4dHVyZShnbC5URVhUVVJFXzJELCB3ZWJnbFRleHR1cmUpO1xuICAgICAgICBpZiAoZmlyc3RCaW5kKSB7XG4gICAgICAgICAgICBnbC50ZXhJbWFnZTJEKGdsLlRFWFRVUkVfMkQsIDAsIGdsLlJHQkEsIGdsLlJHQkEsIGdsLlVOU0lHTkVEX0JZVEUsIGJsYW5rQ2FudmFzKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy51bmJpbmQgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgcmVuZGVyZXIuZ2wuYmluZFRleHR1cmUocmVuZGVyZXIuZ2wuVEVYVFVSRV8yRCwgbnVsbCk7XG4gICAgfTtcbiAgICB0aGlzLmlzUmVuZGVyYWJsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5SZW5kZXJlclxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIFJlbmRlcmVyID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuUmVuZGVyZXIjICovIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAgICAgKiBAcmVhZG9ubHlcbiAgICAgICAgICovXG4gICAgICAgIGNhbnZhczogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FudmFzIHdpZHRoLCBzZXQgYnkgcmVzaXplIG1ldGhvZFxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAcHJpdmF0ZVxuICAgICAgICAgKi9cbiAgICAgICAgX3dpZHRoOiAxMDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhbnZhcyB3aWR0aCwgc2V0IGJ5IHJlc2l6ZSBtZXRob2RcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIF9oZWlnaHQ6IDEwMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGV2aWNlIHBpeGVsIHJhdGlvLCBzZXQgYnkgc2V0RGV2aWNlUGl4ZWxSYXRpbyBtZXRob2RcbiAgICAgICAgICogU3BlY2lhbGx5IGZvciBoaWdoIGRlZmluYXRpb24gZGlzcGxheVxuICAgICAgICAgKiBAc2VlIGh0dHA6Ly93d3cua2hyb25vcy5vcmcvd2ViZ2wvd2lraS9IYW5kbGluZ0hpZ2hEUElcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQHByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIGRldmljZVBpeGVsUmF0aW86ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbykgfHwgMS4wLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGVhciBjb2xvclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyW119XG4gICAgICAgICAqL1xuICAgICAgICBjbGVhckNvbG9yOiBbMC4wLCAwLjAsIDAuMCwgMC4wXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogRGVmYXVsdDpcbiAgICAgICAgICogICAgIF9nbC5DT0xPUl9CVUZGRVJfQklUIHwgX2dsLkRFUFRIX0JVRkZFUl9CSVQgfCBfZ2wuU1RFTkNJTF9CVUZGRVJfQklUXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBjbGVhckJpdDogMTc2NjQsXG5cbiAgICAgICAgLy8gU2V0dGluZ3Mgd2hlbiBnZXR0aW5nIGNvbnRleHRcbiAgICAgICAgLy8gaHR0cDovL3d3dy5raHJvbm9zLm9yZy9yZWdpc3RyeS93ZWJnbC9zcGVjcy9sYXRlc3QvIzIuNFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgbG9nIGRlcHRoIGJ1ZmZlclxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGxvZ0RlcHRoQnVmZmVyOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBhbHBoYSwgZGVmYXVsdCB0cnVlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgYWxwaGE6IHRydWUsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgZGVwdGggYnVmZmVyLCBkZWZhdWx0IHRydWVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBkZXB0aDogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBzdGVuY2lsIGJ1ZmZlciwgZGVmYXVsdCBmYWxzZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHN0ZW5jaWw6IGZhbHNlLFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGFudGlhbGlhcywgZGVmYXVsdCB0cnVlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgYW50aWFsaWFzOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIHByZW11bHRpcGxpZWQgYWxwaGEsIGRlZmF1bHQgdHJ1ZVxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHByZW11bHRpcGxpZWRBbHBoYTogdHJ1ZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHByZXNlcnZlIGRyYXdpbmcgYnVmZmVyLCBkZWZhdWx0IGZhbHNlXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiBmYWxzZSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRocm93IGNvbnRleHQgZXJyb3IsIHVzdWFsbHkgdHVybmVkIG9uIGluIGRlYnVnIG1vZGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aHJvd0Vycm9yOiB0cnVlLFxuICAgICAgICAvKipcbiAgICAgICAgICogV2ViR0wgQ29udGV4dCBjcmVhdGVkIGZyb20gZ2l2ZW4gY2FudmFzXG4gICAgICAgICAqIEB0eXBlIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9XG4gICAgICAgICAqL1xuICAgICAgICBnbDogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlcmVyIHZpZXdwb3J0LCByZWFkLW9ubHksIGNhbiBiZSBzZXQgYnkgc2V0Vmlld3BvcnQgbWV0aG9kXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB2aWV3cG9ydDoge30sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heCBqb2ludCBudW1iZXJcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIG1heEpvaW50TnVtYmVyOiAyMCxcblxuICAgICAgICAvLyBTZXQgYnkgRnJhbWVCdWZmZXIjYmluZFxuICAgICAgICBfX2N1cnJlbnRGcmFtZUJ1ZmZlcjogbnVsbCxcblxuICAgICAgICBfdmlld3BvcnRTdGFjazogW10sXG4gICAgICAgIF9jbGVhclN0YWNrOiBbXSxcblxuICAgICAgICBfc2NlbmVSZW5kZXJpbmc6IG51bGxcbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuXG4gICAgaWYgKCF0aGlzLmNhbnZhcykge1xuICAgICAgICB0aGlzLmNhbnZhcyA9IHZlbmRvci5jcmVhdGVDYW52YXMoKTtcbiAgICB9XG4gICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzO1xuICAgIHRyeSB7XG4gICAgICAgIHZhciBvcHRzID0ge1xuICAgICAgICAgICAgYWxwaGE6IHRoaXMuYWxwaGEsXG4gICAgICAgICAgICBkZXB0aDogdGhpcy5kZXB0aCxcbiAgICAgICAgICAgIHN0ZW5jaWw6IHRoaXMuc3RlbmNpbCxcbiAgICAgICAgICAgIGFudGlhbGlhczogdGhpcy5hbnRpYWxpYXMsXG4gICAgICAgICAgICBwcmVtdWx0aXBsaWVkQWxwaGE6IHRoaXMucHJlbXVsdGlwbGllZEFscGhhLFxuICAgICAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0aGlzLnByZXNlcnZlRHJhd2luZ0J1ZmZlclxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ2wnLCBvcHRzKVxuICAgICAgICAgICAgfHwgY2FudmFzLmdldENvbnRleHQoJ2V4cGVyaW1lbnRhbC13ZWJnbCcsIG9wdHMpO1xuXG4gICAgICAgIGlmICghdGhpcy5nbCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9nbGluZm8gPSBuZXcgR0xJbmZvKHRoaXMuZ2wpO1xuXG4gICAgICAgIGlmICh0aGlzLmdsLnRhcmdldFJlbmRlcmVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBbHJlYWR5IGNyZWF0ZWQgYSByZW5kZXJlcicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2wudGFyZ2V0UmVuZGVyZXIgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMucmVzaXplKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIHRocm93ICdFcnJvciBjcmVhdGluZyBXZWJHTCBDb250ZXh0ICcgKyBlO1xuICAgIH1cblxuICAgIC8vIEluaXQgbWFuYWdlcnNcbiAgICB0aGlzLl9wcm9ncmFtTWdyID0gbmV3IFByb2dyYW1NYW5hZ2VyKHRoaXMpO1xuXG4gICAgdGhpcy5fcGxhY2Vob2xkZXJUZXh0dXJlID0gbmV3IFBsYWNlSG9sZGVyVGV4dHVyZSh0aGlzKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuUmVuZGVyZXIucHJvdG90eXBlLiAqKi9cbntcbiAgICAvKipcbiAgICAgKiBSZXNpemUgdGhlIGNhbnZhc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICAgKi9cbiAgICByZXNpemU6IGZ1bmN0aW9uKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IHRoaXMuY2FudmFzO1xuICAgICAgICAvLyBodHRwOi8vd3d3Lmtocm9ub3Mub3JnL3dlYmdsL3dpa2kvSGFuZGxpbmdIaWdoRFBJXG4gICAgICAgIC8vIHNldCB0aGUgZGlzcGxheSBzaXplIG9mIHRoZSBjYW52YXMuXG4gICAgICAgIHZhciBkcHIgPSB0aGlzLmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIGlmICh3aWR0aCAhPSBudWxsKSB7XG4gICAgICAgICAgICBpZiAoY2FudmFzLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FudmFzLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICAgICAgICAgICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2V0IHRoZSBzaXplIG9mIHRoZSBkcmF3aW5nQnVmZmVyXG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB3aWR0aCAqIGRwcjtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBoZWlnaHQgKiBkcHI7XG5cbiAgICAgICAgICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB0aGlzLl9oZWlnaHQgPSBoZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl93aWR0aCA9IGNhbnZhcy53aWR0aCAvIGRwcjtcbiAgICAgICAgICAgIHRoaXMuX2hlaWdodCA9IGNhbnZhcy5oZWlnaHQgLyBkcHI7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldFZpZXdwb3J0KDAsIDAsIHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVuZGVyZXIgd2lkdGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0V2lkdGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgcmVuZGVyZXIgaGVpZ2h0XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldEhlaWdodDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgdmlld3BvcnQgYXNwZWN0LFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXRWaWV3cG9ydEFzcGVjdDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0O1xuICAgICAgICByZXR1cm4gdmlld3BvcnQud2lkdGggLyB2aWV3cG9ydC5oZWlnaHQ7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBkZXZpY2VQaXhlbFJhdGlvXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGRldmljZVBpeGVsUmF0aW9cbiAgICAgKi9cbiAgICBzZXREZXZpY2VQaXhlbFJhdGlvOiBmdW5jdGlvbihkZXZpY2VQaXhlbFJhdGlvKSB7XG4gICAgICAgIHRoaXMuZGV2aWNlUGl4ZWxSYXRpbyA9IGRldmljZVBpeGVsUmF0aW87XG4gICAgICAgIHRoaXMucmVzaXplKHRoaXMuX3dpZHRoLCB0aGlzLl9oZWlnaHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZGV2aWNlUGl4ZWxSYXRpb1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZXZpY2VQaXhlbFJhdGlvXG4gICAgICovXG4gICAgZ2V0RGV2aWNlUGl4ZWxSYXRpbzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgV2ViR0wgZXh0ZW5zaW9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAgICovXG4gICAgZ2V0R0xFeHRlbnNpb246IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nbGluZm8uZ2V0RXh0ZW5zaW9uKG5hbWUpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgV2ViR0wgcGFyYW1ldGVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHsqfVxuICAgICAqL1xuICAgIGdldEdMUGFyYW1ldGVyOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2xpbmZvLmdldFBhcmFtZXRlcihuYW1lKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHJlbmRlcmluZyB2aWV3cG9ydFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfE9iamVjdH0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeV1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbZGV2aWNlUGl4ZWxSYXRpb11cbiAgICAgKiAgICAgICAgRGVmYXVsdGx5IHVzZSB0aGUgcmVuZGVyZXJlIGRldmljZVBpeGVsUmF0aW9cbiAgICAgKiAgICAgICAgSXQgbmVlZHMgdG8gYmUgMSB3aGVuIHNldFZpZXdwb3J0IGlzIGNhbGxlZCBieSBmcmFtZUJ1ZmZlclxuICAgICAqXG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgc2V0Vmlld3BvcnQoMCwwLHdpZHRoLGhlaWdodCwxKVxuICAgICAqICBzZXRWaWV3cG9ydCh7XG4gICAgICogICAgICB4OiAwLFxuICAgICAqICAgICAgeTogMCxcbiAgICAgKiAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgKiAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAqICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogMVxuICAgICAqICB9KVxuICAgICAqL1xuICAgIHNldFZpZXdwb3J0OiBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZHByKSB7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgdmFyIG9iaiA9IHg7XG5cbiAgICAgICAgICAgIHggPSBvYmoueDtcbiAgICAgICAgICAgIHkgPSBvYmoueTtcbiAgICAgICAgICAgIHdpZHRoID0gb2JqLndpZHRoO1xuICAgICAgICAgICAgaGVpZ2h0ID0gb2JqLmhlaWdodDtcbiAgICAgICAgICAgIGRwciA9IG9iai5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICB9XG4gICAgICAgIGRwciA9IGRwciB8fCB0aGlzLmRldmljZVBpeGVsUmF0aW87XG5cbiAgICAgICAgdGhpcy5nbC52aWV3cG9ydChcbiAgICAgICAgICAgIHggKiBkcHIsIHkgKiBkcHIsIHdpZHRoICogZHByLCBoZWlnaHQgKiBkcHJcbiAgICAgICAgKTtcbiAgICAgICAgLy8gVXNlIGEgZnJlc2ggbmV3IG9iamVjdCwgbm90IHdyaXRlIHByb3BlcnR5LlxuICAgICAgICB0aGlzLnZpZXdwb3J0ID0ge1xuICAgICAgICAgICAgeDogeCxcbiAgICAgICAgICAgIHk6IHksXG4gICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IGhlaWdodCxcbiAgICAgICAgICAgIGRldmljZVBpeGVsUmF0aW86IGRwclxuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQdXNoIGN1cnJlbnQgdmlld3BvcnQgaW50byBhIHN0YWNrXG4gICAgICovXG4gICAgc2F2ZVZpZXdwb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3ZpZXdwb3J0U3RhY2sucHVzaCh0aGlzLnZpZXdwb3J0KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUG9wIHZpZXdwb3J0IGZyb20gc3RhY2ssIHJlc3RvcmUgaW4gdGhlIHJlbmRlcmVyXG4gICAgICovXG4gICAgcmVzdG9yZVZpZXdwb3J0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl92aWV3cG9ydFN0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Vmlld3BvcnQodGhpcy5fdmlld3BvcnRTdGFjay5wb3AoKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHVzaCBjdXJyZW50IGNsZWFyIGludG8gYSBzdGFja1xuICAgICAqL1xuICAgIHNhdmVDbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9jbGVhclN0YWNrLnB1c2goe1xuICAgICAgICAgICAgY2xlYXJCaXQ6IHRoaXMuY2xlYXJCaXQsXG4gICAgICAgICAgICBjbGVhckNvbG9yOiB0aGlzLmNsZWFyQ29sb3JcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBvcCBjbGVhciBmcm9tIHN0YWNrLCByZXN0b3JlIGluIHRoZSByZW5kZXJlclxuICAgICAqL1xuICAgIHJlc3RvcmVDbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5fY2xlYXJTdGFjay5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgb3B0ID0gdGhpcy5fY2xlYXJTdGFjay5wb3AoKTtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJDb2xvciA9IG9wdC5jbGVhckNvbG9yO1xuICAgICAgICAgICAgdGhpcy5jbGVhckJpdCA9IG9wdC5jbGVhckJpdDtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBiaW5kU2NlbmVSZW5kZXJpbmc6IGZ1bmN0aW9uIChzY2VuZSkge1xuICAgICAgICB0aGlzLl9zY2VuZVJlbmRlcmluZyA9IHNjZW5lO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgdGhlIHNjZW5lIGluIGNhbWVyYSB0byB0aGUgc2NyZWVuIG9yIGJpbmRlZCBvZmZsaW5lIGZyYW1lYnVmZmVyXG4gICAgICogQHBhcmFtICB7Y2xheS5TY2VuZX0gICAgICAgc2NlbmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LkNhbWVyYX0gICAgICBjYW1lcmFcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSAgICAgW25vdFVwZGF0ZVNjZW5lXSBJZiBub3QgY2FsbCB0aGUgc2NlbmUudXBkYXRlIG1ldGhvZHMgaW4gdGhlIHJlbmRlcmluZywgZGVmYXVsdCB0cnVlXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gICAgIFtwcmVaXSAgICAgICAgICAgSWYgdXNlIHByZVogb3B0aW1pemF0aW9uLCBkZWZhdWx0IGZhbHNlXG4gICAgICogQHJldHVybiB7SVJlbmRlckluZm99XG4gICAgICovXG4gICAgcmVuZGVyOiBmdW5jdGlvbihzY2VuZSwgY2FtZXJhLCBub3RVcGRhdGVTY2VuZSwgcHJlWikge1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcblxuICAgICAgICB2YXIgY2xlYXJDb2xvciA9IHRoaXMuY2xlYXJDb2xvcjtcblxuICAgICAgICBpZiAodGhpcy5jbGVhckJpdCkge1xuXG4gICAgICAgICAgICAvLyBNdXN0IHNldCBkZXB0aCBhbmQgY29sb3IgbWFzayB0cnVlIGJlZm9yZSBjbGVhclxuICAgICAgICAgICAgX2dsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIF9nbC5kZXB0aE1hc2sodHJ1ZSk7XG4gICAgICAgICAgICB2YXIgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0O1xuICAgICAgICAgICAgdmFyIG5lZWRzU2Npc3NvciA9IGZhbHNlO1xuICAgICAgICAgICAgdmFyIHZpZXdwb3J0RHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgICAgIGlmICh2aWV3cG9ydC53aWR0aCAhPT0gdGhpcy5fd2lkdGggfHwgdmlld3BvcnQuaGVpZ2h0ICE9PSB0aGlzLl9oZWlnaHRcbiAgICAgICAgICAgICAgICB8fCAodmlld3BvcnREcHIgJiYgdmlld3BvcnREcHIgIT09IHRoaXMuZGV2aWNlUGl4ZWxSYXRpbylcbiAgICAgICAgICAgICAgICB8fCB2aWV3cG9ydC54IHx8IHZpZXdwb3J0LnlcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIG5lZWRzU2Npc3NvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xMTU0NDYwOC9ob3ctdG8tY2xlYXItYS1yZWN0YW5nbGUtYXJlYS1pbi13ZWJnbFxuICAgICAgICAgICAgICAgIC8vIE9ubHkgY2xlYXIgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICAgICAgX2dsLmVuYWJsZShfZ2wuU0NJU1NPUl9URVNUKTtcbiAgICAgICAgICAgICAgICBfZ2wuc2Npc3Nvcih2aWV3cG9ydC54ICogdmlld3BvcnREcHIsIHZpZXdwb3J0LnkgKiB2aWV3cG9ydERwciwgdmlld3BvcnQud2lkdGggKiB2aWV3cG9ydERwciwgdmlld3BvcnQuaGVpZ2h0ICogdmlld3BvcnREcHIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX2dsLmNsZWFyQ29sb3IoY2xlYXJDb2xvclswXSwgY2xlYXJDb2xvclsxXSwgY2xlYXJDb2xvclsyXSwgY2xlYXJDb2xvclszXSk7XG4gICAgICAgICAgICBfZ2wuY2xlYXIodGhpcy5jbGVhckJpdCk7XG4gICAgICAgICAgICBpZiAobmVlZHNTY2lzc29yKSB7XG4gICAgICAgICAgICAgICAgX2dsLmRpc2FibGUoX2dsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGUgc2NlbmUgaGF2ZSBiZWVuIHVwZGF0ZWQgaW4gdGhlIHByZXBhc3MgbGlrZSBzaGFkb3cgbWFwXG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIG5lZWQgdG8gdXBkYXRlIGl0IGFnYWluXG4gICAgICAgIGlmICghbm90VXBkYXRlU2NlbmUpIHtcbiAgICAgICAgICAgIHNjZW5lLnVwZGF0ZShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudXBkYXRlTGlnaHRzKCk7XG5cbiAgICAgICAgY2FtZXJhID0gY2FtZXJhIHx8IHNjZW5lLmdldE1haW5DYW1lcmEoKTtcbiAgICAgICAgaWYgKCFjYW1lcmEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NhblxcJ3QgZmluZCBjYW1lcmEgaW4gdGhlIHNjZW5lLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNhbWVyYS51cGRhdGUoKTtcbiAgICAgICAgdmFyIHJlbmRlckxpc3QgPSBzY2VuZS51cGRhdGVSZW5kZXJMaXN0KGNhbWVyYSwgdHJ1ZSk7XG5cbiAgICAgICAgdGhpcy5fc2NlbmVSZW5kZXJpbmcgPSBzY2VuZTtcblxuICAgICAgICB2YXIgb3BhcXVlTGlzdCA9IHJlbmRlckxpc3Qub3BhcXVlO1xuICAgICAgICB2YXIgdHJhbnNwYXJlbnRMaXN0ID0gcmVuZGVyTGlzdC50cmFuc3BhcmVudDtcbiAgICAgICAgdmFyIHNjZW5lTWF0ZXJpYWwgPSBzY2VuZS5tYXRlcmlhbDtcblxuICAgICAgICBzY2VuZS50cmlnZ2VyKCdiZWZvcmVyZW5kZXInLCB0aGlzLCBzY2VuZSwgY2FtZXJhLCByZW5kZXJMaXN0KTtcblxuICAgICAgICAvLyBSZW5kZXIgcHJlIHpcbiAgICAgICAgaWYgKHByZVopIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJlWihvcGFxdWVMaXN0LCBzY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgICAgIF9nbC5kZXB0aEZ1bmMoX2dsLkxFUVVBTCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBfZ2wuZGVwdGhGdW5jKF9nbC5MRVNTKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgZGVwdGggb2YgdHJhbnNwYXJlbnQgbGlzdC5cbiAgICAgICAgdmFyIHdvcmxkVmlld01hdCA9IG1hdDRDcmVhdGUoKTtcbiAgICAgICAgdmFyIHBvc1ZpZXdTcGFjZSA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNwYXJlbnRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgcmVuZGVyYWJsZSA9IHRyYW5zcGFyZW50TGlzdFtpXTtcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHlBZmZpbmUod29ybGRWaWV3TWF0LCBjYW1lcmEudmlld01hdHJpeC5hcnJheSwgcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICB2ZWMzLnRyYW5zZm9ybU1hdDQocG9zVmlld1NwYWNlLCByZW5kZXJhYmxlLnBvc2l0aW9uLmFycmF5LCB3b3JsZFZpZXdNYXQpO1xuICAgICAgICAgICAgcmVuZGVyYWJsZS5fX2RlcHRoID0gcG9zVmlld1NwYWNlWzJdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyIG9wYXF1ZSBsaXN0XG4gICAgICAgIHRoaXMucmVuZGVyUGFzcyhvcGFxdWVMaXN0LCBjYW1lcmEsIHtcbiAgICAgICAgICAgIGdldE1hdGVyaWFsOiBmdW5jdGlvbiAocmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY2VuZU1hdGVyaWFsIHx8IHJlbmRlcmFibGUubWF0ZXJpYWw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc29ydENvbXBhcmU6IHRoaXMub3BhcXVlU29ydENvbXBhcmVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5yZW5kZXJQYXNzKHRyYW5zcGFyZW50TGlzdCwgY2FtZXJhLCB7XG4gICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NlbmVNYXRlcmlhbCB8fCByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvcnRDb21wYXJlOiB0aGlzLnRyYW5zcGFyZW50U29ydENvbXBhcmVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2NlbmUudHJpZ2dlcignYWZ0ZXJyZW5kZXInLCB0aGlzLCBzY2VuZSwgY2FtZXJhLCByZW5kZXJMaXN0KTtcblxuICAgICAgICAvLyBDbGVhbnVwXG4gICAgICAgIHRoaXMuX3NjZW5lUmVuZGVyaW5nID0gbnVsbDtcbiAgICB9LFxuXG4gICAgZ2V0UHJvZ3JhbTogZnVuY3Rpb24gKHJlbmRlcmFibGUsIHJlbmRlck1hdGVyaWFsLCBzY2VuZSkge1xuICAgICAgICByZW5kZXJNYXRlcmlhbCA9IHJlbmRlck1hdGVyaWFsIHx8IHJlbmRlcmFibGUubWF0ZXJpYWw7XG4gICAgICAgIHJldHVybiB0aGlzLl9wcm9ncmFtTWdyLmdldFByb2dyYW0ocmVuZGVyYWJsZSwgcmVuZGVyTWF0ZXJpYWwsIHNjZW5lLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgdmFsaWRhdGVQcm9ncmFtOiBmdW5jdGlvbiAocHJvZ3JhbSkge1xuICAgICAgICBpZiAocHJvZ3JhbS5fX2Vycm9yKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3JNc2cgPSBwcm9ncmFtLl9fZXJyb3I7XG4gICAgICAgICAgICBpZiAoZXJyb3JTaGFkZXJbcHJvZ3JhbS5fX3VpZF9fXSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVycm9yU2hhZGVyW3Byb2dyYW0uX191aWRfX10gPSB0cnVlO1xuXG4gICAgICAgICAgICBpZiAodGhpcy50aHJvd0Vycm9yKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGVycm9yTXNnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcignZXJyb3InLCBlcnJvck1zZyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICB1cGRhdGVQcm9ncmFtczogZnVuY3Rpb24gKGxpc3QsIHNjZW5lLCBwYXNzQ29uZmlnKSB7XG4gICAgICAgIHZhciBnZXRNYXRlcmlhbCA9IChwYXNzQ29uZmlnICYmIHBhc3NDb25maWcuZ2V0TWF0ZXJpYWwpIHx8IGRlZmF1bHRHZXRNYXRlcmlhbDtcbiAgICAgICAgc2NlbmUgPSBzY2VuZSB8fCBudWxsO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciByZW5kZXJhYmxlID0gbGlzdFtpXTtcbiAgICAgICAgICAgIHZhciByZW5kZXJNYXRlcmlhbCA9IGdldE1hdGVyaWFsLmNhbGwodGhpcywgcmVuZGVyYWJsZSk7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldlJlbmRlcmFibGUgPSBsaXN0W2kgLSAxXTtcbiAgICAgICAgICAgICAgICB2YXIgcHJldkpvaW50c0xlbiA9IHByZXZSZW5kZXJhYmxlLmpvaW50cyA/IHByZXZSZW5kZXJhYmxlLmpvaW50cy5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICAgIHZhciBqb2ludHNMZW4gPSByZW5kZXJhYmxlLmpvaW50cyA/IHJlbmRlcmFibGUuam9pbnRzLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgICAgLy8gS2VlcCBwcm9ncmFtIG5vdCBjaGFuZ2UgaWYgam9pbnRzLCBtYXRlcmlhbCwgbGlnaHRHcm91cCBhcmUgc2FtZSBvZiB0d28gcmVuZGVyYWJsZXMuXG4gICAgICAgICAgICAgICAgaWYgKGpvaW50c0xlbiA9PT0gcHJldkpvaW50c0xlblxuICAgICAgICAgICAgICAgICAgICAmJiByZW5kZXJhYmxlLm1hdGVyaWFsID09PSBwcmV2UmVuZGVyYWJsZS5tYXRlcmlhbFxuICAgICAgICAgICAgICAgICAgICAmJiByZW5kZXJhYmxlLmxpZ2h0R3JvdXAgPT09IHByZXZSZW5kZXJhYmxlLmxpZ2h0R3JvdXBcbiAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyYWJsZS5fX3Byb2dyYW0gPSBwcmV2UmVuZGVyYWJsZS5fX3Byb2dyYW07XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSB0aGlzLl9wcm9ncmFtTWdyLmdldFByb2dyYW0ocmVuZGVyYWJsZSwgcmVuZGVyTWF0ZXJpYWwsIHNjZW5lLCB0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy52YWxpZGF0ZVByb2dyYW0ocHJvZ3JhbSk7XG5cbiAgICAgICAgICAgIHJlbmRlcmFibGUuX19wcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZW5kZXIgYSBzaW5nbGUgcmVuZGVyYWJsZSBsaXN0IGluIGNhbWVyYSBpbiBzZXF1ZW5jZVxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJhYmxlW119IGxpc3QgTGlzdCBvZiBhbGwgcmVuZGVyYWJsZXMuXG4gICAgICogQHBhcmFtIHtjbGF5LkNhbWVyYX0gW2NhbWVyYV0gQ2FtZXJhIHByb3ZpZGUgdmlldyBtYXRyaXggYW5kIHBvcmplY3Rpb24gbWF0cml4LiBJdCBjYW4gYmUgbnVsbC5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3Bhc3NDb25maWddXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Bhc3NDb25maWcuZ2V0TWF0ZXJpYWxdIEdldCByZW5kZXJhYmxlIG1hdGVyaWFsLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLmdldFVuaWZvcm1dIEdldCBtYXRlcmlhbCB1bmlmb3JtIHZhbHVlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLmlzTWF0ZXJpYWxDaGFuZ2VkXSBJZiBtYXRlcmlhbCBjaGFuZ2VkLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLmJlZm9yZVJlbmRlcl0gQmVmb3JlIHJlbmRlciBlYWNoIHJlbmRlcmFibGUuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW3Bhc3NDb25maWcuYWZ0ZXJSZW5kZXJdIEFmdGVyIHJlbmRlciBlYWNoIHJlbmRlcmFibGVcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcGFzc0NvbmZpZy5pZlJlbmRlcl0gSWYgcmVuZGVyIHRoZSByZW5kZXJhYmxlLlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtwYXNzQ29uZmlnLnNvcnRDb21wYXJlXSBTb3J0IGNvbXBhcmUgZnVuY3Rpb24uXG4gICAgICogQHJldHVybiB7SVJlbmRlckluZm99XG4gICAgICovXG4gICAgcmVuZGVyUGFzczogZnVuY3Rpb24obGlzdCwgY2FtZXJhLCBwYXNzQ29uZmlnKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlcmVuZGVycGFzcycsIHRoaXMsIGxpc3QsIGNhbWVyYSwgcGFzc0NvbmZpZyk7XG5cbiAgICAgICAgcGFzc0NvbmZpZyA9IHBhc3NDb25maWcgfHwge307XG4gICAgICAgIHBhc3NDb25maWcuZ2V0TWF0ZXJpYWwgPSBwYXNzQ29uZmlnLmdldE1hdGVyaWFsIHx8IGRlZmF1bHRHZXRNYXRlcmlhbDtcbiAgICAgICAgcGFzc0NvbmZpZy5nZXRVbmlmb3JtID0gcGFzc0NvbmZpZy5nZXRVbmlmb3JtIHx8IGRlZmF1bHRHZXRVbmlmb3JtO1xuICAgICAgICAvLyBQRU5ESU5HIEJldHRlciBzb2x1dGlvbj9cbiAgICAgICAgcGFzc0NvbmZpZy5pc01hdGVyaWFsQ2hhbmdlZCA9IHBhc3NDb25maWcuaXNNYXRlcmlhbENoYW5nZWQgfHwgZGVmYXVsdElzTWF0ZXJpYWxDaGFuZ2VkO1xuICAgICAgICBwYXNzQ29uZmlnLmJlZm9yZVJlbmRlciA9IHBhc3NDb25maWcuYmVmb3JlUmVuZGVyIHx8IG5vb3A7XG4gICAgICAgIHBhc3NDb25maWcuYWZ0ZXJSZW5kZXIgPSBwYXNzQ29uZmlnLmFmdGVyUmVuZGVyIHx8IG5vb3A7XG5cbiAgICAgICAgdmFyIGlmUmVuZGVyT2JqZWN0ID0gcGFzc0NvbmZpZy5pZlJlbmRlciB8fCBkZWZhdWx0SWZSZW5kZXI7XG5cbiAgICAgICAgdGhpcy51cGRhdGVQcm9ncmFtcyhsaXN0LCB0aGlzLl9zY2VuZVJlbmRlcmluZywgcGFzc0NvbmZpZyk7XG4gICAgICAgIGlmIChwYXNzQ29uZmlnLnNvcnRDb21wYXJlKSB7XG4gICAgICAgICAgICBsaXN0LnNvcnQocGFzc0NvbmZpZy5zb3J0Q29tcGFyZSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb21lIGNvbW1vbiBidWlsdGluIHVuaWZvcm1zXG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHRoaXMudmlld3BvcnQ7XG4gICAgICAgIHZhciB2RHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbztcbiAgICAgICAgdmFyIHZpZXdwb3J0VW5pZm9ybSA9IFtcbiAgICAgICAgICAgIHZpZXdwb3J0LnggKiB2RHByLCB2aWV3cG9ydC55ICogdkRwcixcbiAgICAgICAgICAgIHZpZXdwb3J0LndpZHRoICogdkRwciwgdmlld3BvcnQuaGVpZ2h0ICogdkRwclxuICAgICAgICBdO1xuICAgICAgICB2YXIgd2luZG93RHByID0gdGhpcy5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICB2YXIgd2luZG93U2l6ZVVuaWZvcm0gPSB0aGlzLl9fY3VycmVudEZyYW1lQnVmZmVyXG4gICAgICAgICAgICA/IFt0aGlzLl9fY3VycmVudEZyYW1lQnVmZmVyLmdldFRleHR1cmVXaWR0aCgpLCB0aGlzLl9fY3VycmVudEZyYW1lQnVmZmVyLmdldFRleHR1cmVIZWlnaHQoKV1cbiAgICAgICAgICAgIDogW3RoaXMuX3dpZHRoICogd2luZG93RHByLCB0aGlzLl9oZWlnaHQgKiB3aW5kb3dEcHJdO1xuICAgICAgICAvLyBERVBSRUNBVEVEXG4gICAgICAgIHZhciB2aWV3cG9ydFNpemVVbmlmb3JtID0gW1xuICAgICAgICAgICAgdmlld3BvcnRVbmlmb3JtWzJdLCB2aWV3cG9ydFVuaWZvcm1bM11cbiAgICAgICAgXTtcbiAgICAgICAgdmFyIHRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB2aWV3IGFuZCBwcm9qZWN0aW9uIG1hdHJpeFxuICAgICAgICBpZiAoY2FtZXJhKSB7XG4gICAgICAgICAgICBtYXQ0LmNvcHkobWF0cmljZXMuVklFVywgY2FtZXJhLnZpZXdNYXRyaXguYXJyYXkpO1xuICAgICAgICAgICAgbWF0NC5jb3B5KG1hdHJpY2VzLlBST0pFQ1RJT04sIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICAgICAgICAgIG1hdDQuY29weShtYXRyaWNlcy5WSUVXSU5WRVJTRSwgY2FtZXJhLndvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1hdDQuaWRlbnRpdHkobWF0cmljZXMuVklFVyk7XG4gICAgICAgICAgICBtYXQ0LmlkZW50aXR5KG1hdHJpY2VzLlBST0pFQ1RJT04pO1xuICAgICAgICAgICAgbWF0NC5pZGVudGl0eShtYXRyaWNlcy5WSUVXSU5WRVJTRSk7XG4gICAgICAgIH1cbiAgICAgICAgbWF0NC5tdWx0aXBseShtYXRyaWNlcy5WSUVXUFJPSkVDVElPTiwgbWF0cmljZXMuUFJPSkVDVElPTiwgbWF0cmljZXMuVklFVyk7XG4gICAgICAgIG1hdDQuaW52ZXJ0KG1hdHJpY2VzLlBST0pFQ1RJT05JTlZFUlNFLCBtYXRyaWNlcy5QUk9KRUNUSU9OKTtcbiAgICAgICAgbWF0NC5pbnZlcnQobWF0cmljZXMuVklFV1BST0pFQ1RJT05JTlZFUlNFLCBtYXRyaWNlcy5WSUVXUFJPSkVDVElPTik7XG5cbiAgICAgICAgdmFyIF9nbCA9IHRoaXMuZ2w7XG4gICAgICAgIHZhciBzY2VuZSA9IHRoaXMuX3NjZW5lUmVuZGVyaW5nO1xuXG4gICAgICAgIHZhciBwcmV2TWF0ZXJpYWw7XG4gICAgICAgIHZhciBwcmV2UHJvZ3JhbTtcbiAgICAgICAgdmFyIHByZXZSZW5kZXJhYmxlO1xuXG4gICAgICAgIC8vIFN0YXR1c1xuICAgICAgICB2YXIgZGVwdGhUZXN0LCBkZXB0aE1hc2s7XG4gICAgICAgIHZhciBjdWxsaW5nLCBjdWxsRmFjZSwgZnJvbnRGYWNlO1xuICAgICAgICB2YXIgdHJhbnNwYXJlbnQ7XG4gICAgICAgIHZhciBkcmF3SUQ7XG4gICAgICAgIHZhciBjdXJyZW50VkFPO1xuICAgICAgICB2YXIgbWF0ZXJpYWxUYWtlc1RleHR1cmVTbG90O1xuXG4gICAgICAgIC8vIHZhciB2YW9FeHQgPSB0aGlzLmdldEdMRXh0ZW5zaW9uKCdPRVNfdmVydGV4X2FycmF5X29iamVjdCcpO1xuICAgICAgICAvLyBub3QgdXNlIHZhb0V4dCwgc29tZSBwbGF0Zm9ybXMgbWF5IG1lc3MgaXQgdXAuXG4gICAgICAgIHZhciB2YW9FeHQgPSBudWxsO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmFibGUgPSBsaXN0W2ldO1xuICAgICAgICAgICAgdmFyIGlzU2NlbmVOb2RlID0gcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybSAhPSBudWxsO1xuICAgICAgICAgICAgdmFyIHdvcmxkTTtcblxuICAgICAgICAgICAgaWYgKCFpZlJlbmRlck9iamVjdChyZW5kZXJhYmxlKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTa2lubmVkIG1lc2ggd2lsbCB0cmFuc2Zvcm1lZCB0byBqb2ludCBzcGFjZS4gSWdub3JlIHRoZSBtZXNoIHRyYW5zZm9ybVxuICAgICAgICAgICAgaWYgKGlzU2NlbmVOb2RlKSB7XG4gICAgICAgICAgICAgICAgd29ybGRNID0gKHJlbmRlcmFibGUuaXNTa2lubmVkTWVzaCAmJiByZW5kZXJhYmxlLmlzU2tpbm5lZE1lc2goKSlcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgICAgICAgICA/IChyZW5kZXJhYmxlLm9mZnNldE1hdHJpeCA/IHJlbmRlcmFibGUub2Zmc2V0TWF0cml4LmFycmF5IDptYXRyaWNlcy5JREVOVElUWSlcbiAgICAgICAgICAgICAgICAgICAgOiByZW5kZXJhYmxlLndvcmxkVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gcmVuZGVyYWJsZS5nZW9tZXRyeTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHBhc3NDb25maWcuZ2V0TWF0ZXJpYWwuY2FsbCh0aGlzLCByZW5kZXJhYmxlKTtcblxuICAgICAgICAgICAgdmFyIHByb2dyYW0gPSByZW5kZXJhYmxlLl9fcHJvZ3JhbTtcbiAgICAgICAgICAgIHZhciBzaGFkZXIgPSBtYXRlcmlhbC5zaGFkZXI7XG5cbiAgICAgICAgICAgIHZhciBjdXJyZW50RHJhd0lEID0gZ2VvbWV0cnkuX191aWRfXyArICctJyArIHByb2dyYW0uX191aWRfXztcbiAgICAgICAgICAgIHZhciBkcmF3SURDaGFuZ2VkID0gY3VycmVudERyYXdJRCAhPT0gZHJhd0lEO1xuICAgICAgICAgICAgZHJhd0lEID0gY3VycmVudERyYXdJRDtcbiAgICAgICAgICAgIGlmIChkcmF3SURDaGFuZ2VkICYmIHZhb0V4dCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8gU2VlbXMgbmVlZCB0byBiZSBib3VuZCB0byBudWxsIGltbWVkaWF0ZWx5IChvciBiZWZvcmUgYmluZCBhbm90aGVyIHByb2dyYW0/KSBpZiB2YW8gaXMgY2hhbmdlZFxuICAgICAgICAgICAgICAgIHZhb0V4dC5iaW5kVmVydGV4QXJyYXlPRVMobnVsbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTY2VuZU5vZGUpIHtcbiAgICAgICAgICAgICAgICBtYXQ0LmNvcHkobWF0cmljZXMuV09STEQsIHdvcmxkTSk7XG4gICAgICAgICAgICAgICAgbWF0NC5tdWx0aXBseShtYXRyaWNlcy5XT1JMRFZJRVdQUk9KRUNUSU9OLCBtYXRyaWNlcy5WSUVXUFJPSkVDVElPTiwgd29ybGRNKTtcbiAgICAgICAgICAgICAgICBtYXQ0Lm11bHRpcGx5QWZmaW5lKG1hdHJpY2VzLldPUkxEVklFVywgbWF0cmljZXMuVklFVywgd29ybGRNKTtcbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyLm1hdHJpeFNlbWFudGljcy5XT1JMRElOVkVSU0UgfHxcbiAgICAgICAgICAgICAgICAgICAgc2hhZGVyLm1hdHJpeFNlbWFudGljcy5XT1JMRElOVkVSU0VUUkFOU1BPU0UpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0NC5pbnZlcnQobWF0cmljZXMuV09STERJTlZFUlNFLCB3b3JsZE0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyLm1hdHJpeFNlbWFudGljcy5XT1JMRFZJRVdJTlZFUlNFIHx8XG4gICAgICAgICAgICAgICAgICAgIHNoYWRlci5tYXRyaXhTZW1hbnRpY3MuV09STERWSUVXSU5WRVJTRVRSQU5TUE9TRSkge1xuICAgICAgICAgICAgICAgICAgICBtYXQ0LmludmVydChtYXRyaWNlcy5XT1JMRFZJRVdJTlZFUlNFLCBtYXRyaWNlcy5XT1JMRFZJRVcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc2hhZGVyLm1hdHJpeFNlbWFudGljcy5XT1JMRFZJRVdQUk9KRUNUSU9OSU5WRVJTRSB8fFxuICAgICAgICAgICAgICAgICAgICBzaGFkZXIubWF0cml4U2VtYW50aWNzLldPUkxEVklFV1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdDQuaW52ZXJ0KG1hdHJpY2VzLldPUkxEVklFV1BST0pFQ1RJT05JTlZFUlNFLCBtYXRyaWNlcy5XT1JMRFZJRVdQUk9KRUNUSU9OKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEJlZm9yZSByZW5kZXIgaG9va1xuICAgICAgICAgICAgcmVuZGVyYWJsZS5iZWZvcmVSZW5kZXIgJiYgcmVuZGVyYWJsZS5iZWZvcmVSZW5kZXIodGhpcyk7XG4gICAgICAgICAgICBwYXNzQ29uZmlnLmJlZm9yZVJlbmRlci5jYWxsKHRoaXMsIHJlbmRlcmFibGUsIG1hdGVyaWFsLCBwcmV2TWF0ZXJpYWwpO1xuXG4gICAgICAgICAgICB2YXIgcHJvZ3JhbUNoYW5nZWQgPSBwcm9ncmFtICE9PSBwcmV2UHJvZ3JhbTtcbiAgICAgICAgICAgIGlmIChwcm9ncmFtQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgIC8vIFNldCBsaWdodHMgbnVtYmVyXG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIC8vIFNldCBzb21lIGNvbW1vbiB1bmlmb3Jtc1xuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybU9mU2VtYW50aWMoX2dsLCAnVklFV1BPUlQnLCB2aWV3cG9ydFVuaWZvcm0pO1xuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybU9mU2VtYW50aWMoX2dsLCAnV0lORE9XX1NJWkUnLCB3aW5kb3dTaXplVW5pZm9ybSk7XG4gICAgICAgICAgICAgICAgaWYgKGNhbWVyYSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ05FQVInLCBjYW1lcmEubmVhcik7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybU9mU2VtYW50aWMoX2dsLCAnRkFSJywgY2FtZXJhLmZhcik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9nRGVwdGhCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gU2VtYW50aWM/XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ0xPR19ERVBUSF9CVUZGRVJfRkMnLCAyLjAgLyAoTWF0aC5sb2coY2FtZXJhLmZhciArIDEuMCApIC8gTWF0aC5MTjIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ0RFVklDRVBJWEVMUkFUSU8nLCB2RHByKTtcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm1PZlNlbWFudGljKF9nbCwgJ1RJTUUnLCB0aW1lKTtcbiAgICAgICAgICAgICAgICAvLyBERVBSRUNBVEVEXG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdWSUVXUE9SVF9TSVpFJywgdmlld3BvcnRTaXplVW5pZm9ybSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTZXQgbGlnaHRzIHVuaWZvcm1zXG4gICAgICAgICAgICAgICAgLy8gVE9ETyBuZWVkcyBvcHRpbWl6ZWRcbiAgICAgICAgICAgICAgICBpZiAoc2NlbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmUuc2V0TGlnaHRVbmlmb3Jtcyhwcm9ncmFtLCByZW5kZXJhYmxlLmxpZ2h0R3JvdXAsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHByb2dyYW0gPSBwcmV2UHJvZ3JhbTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUHJvZ3JhbSBjaGFuZ2VzIGFsc28gbmVlZHMgcmVzZXQgdGhlIG1hdGVyaWFscy5cbiAgICAgICAgICAgIGlmIChwcm9ncmFtQ2hhbmdlZCB8fCBwYXNzQ29uZmlnLmlzTWF0ZXJpYWxDaGFuZ2VkKFxuICAgICAgICAgICAgICAgIHJlbmRlcmFibGUsIHByZXZSZW5kZXJhYmxlLCBtYXRlcmlhbCwgcHJldk1hdGVyaWFsXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmRlcHRoVGVzdCAhPT0gZGVwdGhUZXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLmRlcHRoVGVzdCA/IF9nbC5lbmFibGUoX2dsLkRFUFRIX1RFU1QpIDogX2dsLmRpc2FibGUoX2dsLkRFUFRIX1RFU1QpO1xuICAgICAgICAgICAgICAgICAgICBkZXB0aFRlc3QgPSBtYXRlcmlhbC5kZXB0aFRlc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5kZXB0aE1hc2sgIT09IGRlcHRoTWFzaykge1xuICAgICAgICAgICAgICAgICAgICBfZ2wuZGVwdGhNYXNrKG1hdGVyaWFsLmRlcHRoTWFzayk7XG4gICAgICAgICAgICAgICAgICAgIGRlcHRoTWFzayA9IG1hdGVyaWFsLmRlcHRoTWFzaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLnRyYW5zcGFyZW50ICE9PSB0cmFuc3BhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC50cmFuc3BhcmVudCA/IF9nbC5lbmFibGUoX2dsLkJMRU5EKSA6IF9nbC5kaXNhYmxlKF9nbC5CTEVORCk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zcGFyZW50ID0gbWF0ZXJpYWwudHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFRPRE8gY2FjaGUgYmxlbmRpbmdcbiAgICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmJsZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5ibGVuZChfZ2wpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBibGVuZCBmdW5jdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgX2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShfZ2wuRlVOQ19BREQsIF9nbC5GVU5DX0FERCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBfZ2wuYmxlbmRGdW5jU2VwYXJhdGUoX2dsLlNSQ19BTFBIQSwgX2dsLk9ORV9NSU5VU19TUkNfQUxQSEEsIF9nbC5PTkUsIF9nbC5PTkVfTUlOVVNfU1JDX0FMUEhBKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1hdGVyaWFsVGFrZXNUZXh0dXJlU2xvdCA9IHRoaXMuX2JpbmRNYXRlcmlhbChcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHByb2dyYW0sXG4gICAgICAgICAgICAgICAgICAgIHByZXZSZW5kZXJhYmxlIHx8IG51bGwsIHByZXZNYXRlcmlhbCB8fCBudWxsLCBwcmV2UHJvZ3JhbSB8fCBudWxsLFxuICAgICAgICAgICAgICAgICAgICBwYXNzQ29uZmlnLmdldFVuaWZvcm1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHByZXZNYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWF0cml4U2VtYW50aWNLZXlzID0gc2hhZGVyLm1hdHJpeFNlbWFudGljS2V5cztcblxuICAgICAgICAgICAgaWYgKGlzU2NlbmVOb2RlKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBtYXRyaXhTZW1hbnRpY0tleXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gbWF0cml4U2VtYW50aWNLZXlzW2tdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWNJbmZvID0gc2hhZGVyLm1hdHJpeFNlbWFudGljc1tzZW1hbnRpY107XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXRyaXggPSBtYXRyaWNlc1tzZW1hbnRpY107XG4gICAgICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpY0luZm8uaXNUcmFuc3Bvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYXRyaXhOb1RyYW5zcG9zZSA9IG1hdHJpY2VzW3NlbWFudGljSW5mby5zZW1hbnRpY05vVHJhbnNwb3NlXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdDQudHJhbnNwb3NlKG1hdHJpeCwgbWF0cml4Tm9UcmFuc3Bvc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybShfZ2wsIHNlbWFudGljSW5mby50eXBlLCBzZW1hbnRpY0luZm8uc3ltYm9sLCBtYXRyaXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHJlbmRlcmFibGUuY3VsbEZhY2UgIT09IGN1bGxGYWNlKSB7XG4gICAgICAgICAgICAgICAgY3VsbEZhY2UgPSByZW5kZXJhYmxlLmN1bGxGYWNlO1xuICAgICAgICAgICAgICAgIF9nbC5jdWxsRmFjZShjdWxsRmFjZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocmVuZGVyYWJsZS5mcm9udEZhY2UgIT09IGZyb250RmFjZSkge1xuICAgICAgICAgICAgICAgIGZyb250RmFjZSA9IHJlbmRlcmFibGUuZnJvbnRGYWNlO1xuICAgICAgICAgICAgICAgIF9nbC5mcm9udEZhY2UoZnJvbnRGYWNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZW5kZXJhYmxlLmN1bGxpbmcgIT09IGN1bGxpbmcpIHtcbiAgICAgICAgICAgICAgICBjdWxsaW5nID0gcmVuZGVyYWJsZS5jdWxsaW5nO1xuICAgICAgICAgICAgICAgIGN1bGxpbmcgPyBfZ2wuZW5hYmxlKF9nbC5DVUxMX0ZBQ0UpIDogX2dsLmRpc2FibGUoX2dsLkNVTExfRkFDRSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUT0RPIE5vdCB1cGRhdGUgc2tlbGV0b24gaW4gZWFjaCByZW5kZXJhYmxlLlxuICAgICAgICAgICAgdGhpcy5fdXBkYXRlU2tlbGV0b24ocmVuZGVyYWJsZSwgcHJvZ3JhbSwgbWF0ZXJpYWxUYWtlc1RleHR1cmVTbG90KTtcbiAgICAgICAgICAgIGlmIChkcmF3SURDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudFZBTyA9IHRoaXMuX2JpbmRWQU8odmFvRXh0LCBzaGFkZXIsIGdlb21ldHJ5LCBwcm9ncmFtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3JlbmRlck9iamVjdChyZW5kZXJhYmxlLCBjdXJyZW50VkFPLCBwcm9ncmFtKTtcblxuICAgICAgICAgICAgLy8gQWZ0ZXIgcmVuZGVyIGhvb2tcbiAgICAgICAgICAgIHBhc3NDb25maWcuYWZ0ZXJSZW5kZXIodGhpcywgcmVuZGVyYWJsZSk7XG4gICAgICAgICAgICByZW5kZXJhYmxlLmFmdGVyUmVuZGVyICYmIHJlbmRlcmFibGUuYWZ0ZXJSZW5kZXIodGhpcyk7XG5cbiAgICAgICAgICAgIHByZXZQcm9ncmFtID0gcHJvZ3JhbTtcbiAgICAgICAgICAgIHByZXZSZW5kZXJhYmxlID0gcmVuZGVyYWJsZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRPRE8gU2VlbXMgbmVlZCB0byBiZSBib3VuZCB0byBudWxsIGltbWVkaWF0ZWx5IGlmIHZhbyBpcyBjaGFuZ2VkP1xuICAgICAgICBpZiAodmFvRXh0KSB7XG4gICAgICAgICAgICB2YW9FeHQuYmluZFZlcnRleEFycmF5T0VTKG51bGwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlcnJlbmRlcnBhc3MnLCB0aGlzLCBsaXN0LCBjYW1lcmEsIHBhc3NDb25maWcpO1xuICAgIH0sXG5cbiAgICBnZXRNYXhKb2ludE51bWJlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tYXhKb2ludE51bWJlcjtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZVNrZWxldG9uOiBmdW5jdGlvbiAob2JqZWN0LCBwcm9ncmFtLCBzbG90KSB7XG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgc2tlbGV0b24gPSBvYmplY3Quc2tlbGV0b247XG4gICAgICAgIC8vIFNldCBwb3NlIG1hdHJpY2VzIG9mIHNraW5uZWQgbWVzaFxuICAgICAgICBpZiAoc2tlbGV0b24pIHtcbiAgICAgICAgICAgIC8vIFRPRE8gVXBkYXRlIGJlZm9yZSBjdWxsaW5nLlxuICAgICAgICAgICAgc2tlbGV0b24udXBkYXRlKCk7XG4gICAgICAgICAgICBpZiAob2JqZWN0LmpvaW50cy5sZW5ndGggPiB0aGlzLmdldE1heEpvaW50TnVtYmVyKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2tpbk1hdHJpY2VzVGV4dHVyZSA9IHNrZWxldG9uLmdldFN1YlNraW5NYXRyaWNlc1RleHR1cmUob2JqZWN0Ll9fdWlkX18sIG9iamVjdC5qb2ludHMpO1xuICAgICAgICAgICAgICAgIHByb2dyYW0udXNlVGV4dHVyZVNsb3QodGhpcywgc2tpbk1hdHJpY2VzVGV4dHVyZSwgc2xvdCk7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtKF9nbCwgJzFpJywgJ3NraW5NYXRyaWNlc1RleHR1cmUnLCBzbG90KTtcbiAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCAnMWYnLCAnc2tpbk1hdHJpY2VzVGV4dHVyZVNpemUnLCBza2luTWF0cmljZXNUZXh0dXJlLndpZHRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBza2luTWF0cmljZXNBcnJheSA9IHNrZWxldG9uLmdldFN1YlNraW5NYXRyaWNlcyhvYmplY3QuX191aWRfXywgb2JqZWN0LmpvaW50cyk7XG4gICAgICAgICAgICAgICAgcHJvZ3JhbS5zZXRVbmlmb3JtT2ZTZW1hbnRpYyhfZ2wsICdTS0lOX01BVFJJWCcsIHNraW5NYXRyaWNlc0FycmF5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfcmVuZGVyT2JqZWN0OiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgdmFvLCBwcm9ncmFtKSB7XG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgZ2VvbWV0cnkgPSByZW5kZXJhYmxlLmdlb21ldHJ5O1xuXG4gICAgICAgIHZhciBnbERyYXdNb2RlID0gcmVuZGVyYWJsZS5tb2RlO1xuICAgICAgICBpZiAoZ2xEcmF3TW9kZSA9PSBudWxsKSB7XG4gICAgICAgICAgICBnbERyYXdNb2RlID0gMHgwMDA0O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGV4dCA9IG51bGw7XG4gICAgICAgIHZhciBpc0luc3RhbmNlZCA9IHJlbmRlcmFibGUuaXNJbnN0YW5jZWRNZXNoICYmIHJlbmRlcmFibGUuaXNJbnN0YW5jZWRNZXNoKCk7XG4gICAgICAgIGlmIChpc0luc3RhbmNlZCkge1xuICAgICAgICAgICAgZXh0ID0gdGhpcy5nZXRHTEV4dGVuc2lvbignQU5HTEVfaW5zdGFuY2VkX2FycmF5cycpO1xuICAgICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RldmljZSBub3Qgc3VwcG9ydCBBTkdMRV9pbnN0YW5jZWRfYXJyYXlzIGV4dGVuc2lvbicpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbnN0YW5jZWRBdHRyTG9jYXRpb25zO1xuICAgICAgICBpZiAoaXNJbnN0YW5jZWQpIHtcbiAgICAgICAgICAgIGluc3RhbmNlZEF0dHJMb2NhdGlvbnMgPSB0aGlzLl9iaW5kSW5zdGFuY2VkQXR0cmlidXRlcyhyZW5kZXJhYmxlLCBwcm9ncmFtLCBleHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhby5pbmRpY2VzQnVmZmVyKSB7XG4gICAgICAgICAgICB2YXIgdWludEV4dCA9IHRoaXMuZ2V0R0xFeHRlbnNpb24oJ09FU19lbGVtZW50X2luZGV4X3VpbnQnKTtcbiAgICAgICAgICAgIHZhciB1c2VVaW50RXh0ID0gdWludEV4dCAmJiAoZ2VvbWV0cnkuaW5kaWNlcyBpbnN0YW5jZW9mIFVpbnQzMkFycmF5KTtcbiAgICAgICAgICAgIHZhciBpbmRpY2VzVHlwZSA9IHVzZVVpbnRFeHQgPyBfZ2wuVU5TSUdORURfSU5UIDogX2dsLlVOU0lHTkVEX1NIT1JUO1xuXG4gICAgICAgICAgICBpZiAoaXNJbnN0YW5jZWQpIHtcbiAgICAgICAgICAgICAgICBleHQuZHJhd0VsZW1lbnRzSW5zdGFuY2VkQU5HTEUoXG4gICAgICAgICAgICAgICAgICAgIGdsRHJhd01vZGUsIHZhby5pbmRpY2VzQnVmZmVyLmNvdW50LCBpbmRpY2VzVHlwZSwgMCwgcmVuZGVyYWJsZS5nZXRJbnN0YW5jZUNvdW50KClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgX2dsLmRyYXdFbGVtZW50cyhnbERyYXdNb2RlLCB2YW8uaW5kaWNlc0J1ZmZlci5jb3VudCwgaW5kaWNlc1R5cGUsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGlzSW5zdGFuY2VkKSB7XG4gICAgICAgICAgICAgICAgZXh0LmRyYXdBcnJheXNJbnN0YW5jZWRBTkdMRShnbERyYXdNb2RlLCAwLCBnZW9tZXRyeS52ZXJ0ZXhDb3VudCwgcmVuZGVyYWJsZS5nZXRJbnN0YW5jZUNvdW50KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRklYTUUgVXNlIHZlcnRleCBudW1iZXIgaW4gYnVmZmVyXG4gICAgICAgICAgICAgICAgLy8gdmVydGV4Q291bnQgbWF5IGdldCB0aGUgd3JvbmcgdmFsdWUgd2hlbiBnZW9tZXRyeSBmb3JnZXQgdG8gbWFyayBkaXJ0eSBhZnRlciB1cGRhdGVcbiAgICAgICAgICAgICAgICBfZ2wuZHJhd0FycmF5cyhnbERyYXdNb2RlLCAwLCBnZW9tZXRyeS52ZXJ0ZXhDb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNJbnN0YW5jZWQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2VkQXR0ckxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghaW5zdGFuY2VkQXR0ckxvY2F0aW9uc1tpXS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5kaXNhYmxlVmVydGV4QXR0cmliQXJyYXkoaW5zdGFuY2VkQXR0ckxvY2F0aW9uc1tpXS5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV4dC52ZXJ0ZXhBdHRyaWJEaXZpc29yQU5HTEUoaW5zdGFuY2VkQXR0ckxvY2F0aW9uc1tpXS5sb2NhdGlvbiwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX2JpbmRJbnN0YW5jZWRBdHRyaWJ1dGVzOiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgcHJvZ3JhbSwgZXh0KSB7XG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgaW5zdGFuY2VkQnVmZmVycyA9IHJlbmRlcmFibGUuZ2V0SW5zdGFuY2VkQXR0cmlidXRlc0J1ZmZlcnModGhpcyk7XG4gICAgICAgIHZhciBsb2NhdGlvbnMgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluc3RhbmNlZEJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBidWZmZXJPYmogPSBpbnN0YW5jZWRCdWZmZXJzW2ldO1xuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gcHJvZ3JhbS5nZXRBdHRyaWJMb2NhdGlvbihfZ2wsIGJ1ZmZlck9iai5zeW1ib2wpO1xuICAgICAgICAgICAgaWYgKGxvY2F0aW9uIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZ2xUeXBlID0gYXR0cmlidXRlQnVmZmVyVHlwZU1hcFtidWZmZXJPYmoudHlwZV0gfHwgX2dsLkZMT0FUOztcbiAgICAgICAgICAgIHZhciBpc0VuYWJsZWQgPSBwcm9ncmFtLmlzQXR0cmliRW5hYmxlZCh0aGlzLCBsb2NhdGlvbik7XG4gICAgICAgICAgICBpZiAoIXByb2dyYW0uaXNBdHRyaWJFbmFibGVkKHRoaXMsIGxvY2F0aW9uKSkge1xuICAgICAgICAgICAgICAgIF9nbC5lbmFibGVWZXJ0ZXhBdHRyaWJBcnJheShsb2NhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgbG9jYXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGlzRW5hYmxlZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuQVJSQVlfQlVGRkVSLCBidWZmZXJPYmouYnVmZmVyKTtcbiAgICAgICAgICAgIF9nbC52ZXJ0ZXhBdHRyaWJQb2ludGVyKGxvY2F0aW9uLCBidWZmZXJPYmouc2l6ZSwgZ2xUeXBlLCBmYWxzZSwgMCwgMCk7XG4gICAgICAgICAgICBleHQudmVydGV4QXR0cmliRGl2aXNvckFOR0xFKGxvY2F0aW9uLCBidWZmZXJPYmouZGl2aXNvcik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbG9jYXRpb25zO1xuICAgIH0sXG5cbiAgICBfYmluZE1hdGVyaWFsOiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHByb2dyYW0sIHByZXZSZW5kZXJhYmxlLCBwcmV2TWF0ZXJpYWwsIHByZXZQcm9ncmFtLCBnZXRVbmlmb3JtVmFsdWUpIHtcbiAgICAgICAgdmFyIF9nbCA9IHRoaXMuZ2w7XG4gICAgICAgIC8vIFBFTkRJTkcgU2FtZSB0ZXh0dXJlIGluIGRpZmZlcmVudCBtYXRlcmlhbCB0YWtlIGRpZmZlcmVudCBzbG90P1xuXG4gICAgICAgIC8vIE1heSB1c2Ugc2hhZGVyIG9mIG90aGVyIG1hdGVyaWFsIGlmIHNoYWRlciBjb2RlIGFyZSBzYW1lXG4gICAgICAgIHZhciBzYW1lUHJvZ3JhbSA9IHByZXZQcm9ncmFtID09PSBwcm9ncmFtO1xuXG4gICAgICAgIHZhciBjdXJyZW50VGV4dHVyZVNsb3QgPSBwcm9ncmFtLmN1cnJlbnRUZXh0dXJlU2xvdCgpO1xuICAgICAgICB2YXIgZW5hYmxlZFVuaWZvcm1zID0gbWF0ZXJpYWwuZ2V0RW5hYmxlZFVuaWZvcm1zKCk7XG4gICAgICAgIHZhciB0ZXh0dXJlVW5pZm9ybXMgPSBtYXRlcmlhbC5nZXRUZXh0dXJlVW5pZm9ybXMoKTtcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyVGV4dHVyZSA9IHRoaXMuX3BsYWNlaG9sZGVyVGV4dHVyZTtcblxuICAgICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IHRleHR1cmVVbmlmb3Jtcy5sZW5ndGg7IHUrKykge1xuICAgICAgICAgICAgdmFyIHN5bWJvbCA9IHRleHR1cmVVbmlmb3Jtc1t1XTtcbiAgICAgICAgICAgIHZhciB1bmlmb3JtVmFsdWUgPSBnZXRVbmlmb3JtVmFsdWUocmVuZGVyYWJsZSwgbWF0ZXJpYWwsIHN5bWJvbCk7XG4gICAgICAgICAgICB2YXIgdW5pZm9ybVR5cGUgPSBtYXRlcmlhbC51bmlmb3Jtc1tzeW1ib2xdLnR5cGU7XG4gICAgICAgICAgICAvLyBOb3QgdXNlIGBpbnN0YW5jZW9mYCB0byBkZXRlcm1pbmUgaWYgYSB2YWx1ZSBpcyB0ZXh0dXJlIGluIE1hdGVyaWFsI2JpbmQuXG4gICAgICAgICAgICAvLyBVc2UgdHlwZSBpbnN0ZWFkLCBpbiBzb21lIGNhc2UgdGV4dHVyZSBtYXkgYmUgaW4gZGlmZmVyZW50IG5hbWVzcGFjZXMuXG4gICAgICAgICAgICAvLyBUT0RPIER1Y2sgdHlwZSB2YWxpZGF0ZS5cbiAgICAgICAgICAgIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3QnICYmIHVuaWZvcm1WYWx1ZSkge1xuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHNsb3RcbiAgICAgICAgICAgICAgICB1bmlmb3JtVmFsdWUuX19zbG90ID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3R2Jykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5pZm9ybVZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtVmFsdWVbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVuaWZvcm1WYWx1ZVtpXS5fX3Nsb3QgPSAtMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHBsYWNlaG9sZGVyVGV4dHVyZS5fX3Nsb3QgPSAtMTtcblxuICAgICAgICAvLyBTZXQgdW5pZm9ybXNcbiAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBlbmFibGVkVW5pZm9ybXMubGVuZ3RoOyB1KyspIHtcbiAgICAgICAgICAgIHZhciBzeW1ib2wgPSBlbmFibGVkVW5pZm9ybXNbdV07XG4gICAgICAgICAgICB2YXIgdW5pZm9ybSA9IG1hdGVyaWFsLnVuaWZvcm1zW3N5bWJvbF07XG4gICAgICAgICAgICB2YXIgdW5pZm9ybVZhbHVlID0gZ2V0VW5pZm9ybVZhbHVlKHJlbmRlcmFibGUsIG1hdGVyaWFsLCBzeW1ib2wpO1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1UeXBlID0gdW5pZm9ybS50eXBlO1xuICAgICAgICAgICAgdmFyIGlzVGV4dHVyZSA9IHVuaWZvcm1UeXBlID09PSAndCc7XG5cbiAgICAgICAgICAgIGlmIChpc1RleHR1cmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXVuaWZvcm1WYWx1ZSB8fCAhdW5pZm9ybVZhbHVlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVuaWZvcm1WYWx1ZSA9IHBsYWNlaG9sZGVyVGV4dHVyZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICAvLyBXaGVuIGJpbmRpbmcgdHdvIG1hdGVyaWFscyB3aXRoIHRoZSBzYW1lIHNoYWRlclxuICAgICAgICAgICAgLy8gTWFueSB1bmlmb3JtcyB3aWxsIGJlIGJlIHNldCB0d2ljZSBldmVuIGlmIHRoZXkgaGF2ZSB0aGUgc2FtZSB2YWx1ZVxuICAgICAgICAgICAgLy8gU28gYWRkIGEgZXZhbHVhdGlvbiB0byBzZWUgaWYgdGhlIHVuaWZvcm0gaXMgcmVhbGx5IG5lZWRlZCB0byBiZSBzZXRcbiAgICAgICAgICAgIGlmIChwcmV2TWF0ZXJpYWwgJiYgc2FtZVByb2dyYW0pIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJldlVuaWZvcm1WYWx1ZSA9IGdldFVuaWZvcm1WYWx1ZShwcmV2UmVuZGVyYWJsZSwgcHJldk1hdGVyaWFsLCBzeW1ib2wpO1xuICAgICAgICAgICAgICAgIGlmIChpc1RleHR1cmUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2VW5pZm9ybVZhbHVlIHx8ICFwcmV2VW5pZm9ybVZhbHVlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VW5pZm9ybVZhbHVlID0gcGxhY2Vob2xkZXJUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHByZXZVbmlmb3JtVmFsdWUgPT09IHVuaWZvcm1WYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaXNUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTdGlsbCB0YWtlIHRoZSBzbG90IHRvIG1ha2Ugc3VyZSBzYW1lIHRleHR1cmUgaW4gZGlmZmVyZW50IG1hdGVyaWFscyBoYXZlIHNhbWUgc2xvdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2dyYW0udGFrZUN1cnJlbnRUZXh0dXJlU2xvdCh0aGlzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3R2JyAmJiB1bmlmb3JtVmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdW5pZm9ybVZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS50YWtlQ3VycmVudFRleHR1cmVTbG90KHRoaXMsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHVuaWZvcm1WYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1RleHR1cmUpIHtcbiAgICAgICAgICAgICAgICBpZiAodW5pZm9ybVZhbHVlLl9fc2xvdCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNsb3QgPSBwcm9ncmFtLmN1cnJlbnRUZXh0dXJlU2xvdCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzID0gcHJvZ3JhbS5zZXRVbmlmb3JtKF9nbCwgJzFpJywgc3ltYm9sLCBzbG90KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlcykgeyAvLyBUZXh0dXJlIHVuaWZvcm0gaXMgZW5hYmxlZFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS50YWtlQ3VycmVudFRleHR1cmVTbG90KHRoaXMsIHVuaWZvcm1WYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmlmb3JtVmFsdWUuX19zbG90ID0gc2xvdDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBNdWx0aXBsZSB1bmlmb3JtIHVzZSBzYW1lIHRleHR1cmUuLlxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCAnMWknLCBzeW1ib2wsIHVuaWZvcm1WYWx1ZS5fX3Nsb3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodW5pZm9ybVZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtVmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUZXh0dXJlIEFycmF5XG4gICAgICAgICAgICAgICAgaWYgKHVuaWZvcm1UeXBlID09PSAndHYnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcHJvZ3JhbS5oYXNVbmlmb3JtKHN5bWJvbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHVuaWZvcm1WYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB1bmlmb3JtVmFsdWVbaV07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlLl9fc2xvdCA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2xvdCA9IHByb2dyYW0uY3VycmVudFRleHR1cmVTbG90KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2goc2xvdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3JhbS50YWtlQ3VycmVudFRleHR1cmVTbG90KHRoaXMsIHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHR1cmUuX19zbG90ID0gc2xvdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyci5wdXNoKHRleHR1cmUuX19zbG90KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybShfZ2wsICcxaXYnLCBzeW1ib2wsIGFycik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmFtLnNldFVuaWZvcm0oX2dsLCB1bmlmb3JtLnR5cGUsIHN5bWJvbCwgdW5pZm9ybVZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIHByb2dyYW0uc2V0VW5pZm9ybShfZ2wsIHVuaWZvcm0udHlwZSwgc3ltYm9sLCB1bmlmb3JtVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdTbG90ID0gcHJvZ3JhbS5jdXJyZW50VGV4dHVyZVNsb3QoKTtcbiAgICAgICAgLy8gVGV4dHVyZSBzbG90IG1heWJlIHVzZWQgb3V0IG9mIG1hdGVyaWFsLlxuICAgICAgICBwcm9ncmFtLnJlc2V0VGV4dHVyZVNsb3QoY3VycmVudFRleHR1cmVTbG90KTtcbiAgICAgICAgcmV0dXJuIG5ld1Nsb3Q7XG4gICAgfSxcblxuICAgIF9iaW5kVkFPOiBmdW5jdGlvbiAodmFvRXh0LCBzaGFkZXIsIGdlb21ldHJ5LCBwcm9ncmFtKSB7XG4gICAgICAgIHZhciBpc1N0YXRpYyA9ICFnZW9tZXRyeS5keW5hbWljO1xuICAgICAgICB2YXIgX2dsID0gdGhpcy5nbDtcblxuICAgICAgICB2YXIgdmFvSWQgPSB0aGlzLl9fdWlkX18gKyAnLScgKyBwcm9ncmFtLl9fdWlkX187XG4gICAgICAgIHZhciB2YW8gPSBnZW9tZXRyeS5fX3Zhb0NhY2hlW3Zhb0lkXTtcbiAgICAgICAgaWYgKCF2YW8pIHtcbiAgICAgICAgICAgIHZhciBjaHVua3MgPSBnZW9tZXRyeS5nZXRCdWZmZXJDaHVua3ModGhpcyk7XG4gICAgICAgICAgICBpZiAoIWNodW5rcyB8fCAhY2h1bmtzLmxlbmd0aCkgeyAgLy8gRW1wdHkgbWVzaFxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjaHVuayA9IGNodW5rc1swXTtcbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVCdWZmZXJzID0gY2h1bmsuYXR0cmlidXRlQnVmZmVycztcbiAgICAgICAgICAgIHZhciBpbmRpY2VzQnVmZmVyID0gY2h1bmsuaW5kaWNlc0J1ZmZlcjtcblxuICAgICAgICAgICAgdmFyIGF2YWlsYWJsZUF0dHJpYnV0ZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBhdmFpbGFibGVBdHRyaWJ1dGVTeW1ib2xzID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGF0dHJpYnV0ZUJ1ZmZlcnMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlQnVmZmVySW5mbyA9IGF0dHJpYnV0ZUJ1ZmZlcnNbYV07XG4gICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGVCdWZmZXJJbmZvLm5hbWU7XG4gICAgICAgICAgICAgICAgdmFyIHNlbWFudGljID0gYXR0cmlidXRlQnVmZmVySW5mby5zZW1hbnRpYztcbiAgICAgICAgICAgICAgICB2YXIgc3ltYm9sO1xuICAgICAgICAgICAgICAgIGlmIChzZW1hbnRpYykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWNJbmZvID0gc2hhZGVyLmF0dHJpYnV0ZVNlbWFudGljc1tzZW1hbnRpY107XG4gICAgICAgICAgICAgICAgICAgIHN5bWJvbCA9IHNlbWFudGljSW5mbyAmJiBzZW1hbnRpY0luZm8uc3ltYm9sO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc3ltYm9sID0gbmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN5bWJvbCAmJiBwcm9ncmFtLmF0dHJpYnV0ZXNbc3ltYm9sXSkge1xuICAgICAgICAgICAgICAgICAgICBhdmFpbGFibGVBdHRyaWJ1dGVzLnB1c2goYXR0cmlidXRlQnVmZmVySW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIGF2YWlsYWJsZUF0dHJpYnV0ZVN5bWJvbHMucHVzaChzeW1ib2wpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFvID0gbmV3IFZlcnRleEFycmF5T2JqZWN0KFxuICAgICAgICAgICAgICAgIGF2YWlsYWJsZUF0dHJpYnV0ZXMsXG4gICAgICAgICAgICAgICAgYXZhaWxhYmxlQXR0cmlidXRlU3ltYm9scyxcbiAgICAgICAgICAgICAgICBpbmRpY2VzQnVmZmVyXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoaXNTdGF0aWMpIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5fX3Zhb0NhY2hlW3Zhb0lkXSA9IHZhbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBuZWVkc0JpbmRBdHRyaWJ1dGVzID0gdHJ1ZTtcblxuICAgICAgICAvLyBDcmVhdGUgdmVydGV4IG9iamVjdCBhcnJheSBjb3N0IGEgbG90XG4gICAgICAgIC8vIFNvIHdlIGRvbid0IHVzZSBpdCBvbiB0aGUgZHluYW1pYyBvYmplY3RcbiAgICAgICAgaWYgKHZhb0V4dCAmJiBpc1N0YXRpYykge1xuICAgICAgICAgICAgLy8gVXNlIHZlcnRleCBhcnJheSBvYmplY3RcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9ibG9nLnRvamljb2RlLmNvbS8yMDEyLzEwL29lc3ZlcnRleGFycmF5b2JqZWN0LWV4dGVuc2lvbi5odG1sXG4gICAgICAgICAgICBpZiAodmFvLnZhbyA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFvLnZhbyA9IHZhb0V4dC5jcmVhdGVWZXJ0ZXhBcnJheU9FUygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmVlZHNCaW5kQXR0cmlidXRlcyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFvRXh0LmJpbmRWZXJ0ZXhBcnJheU9FUyh2YW8udmFvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBhdmFpbGFibGVBdHRyaWJ1dGVzID0gdmFvLmF2YWlsYWJsZUF0dHJpYnV0ZXM7XG4gICAgICAgIHZhciBpbmRpY2VzQnVmZmVyID0gdmFvLmluZGljZXNCdWZmZXI7XG5cbiAgICAgICAgaWYgKG5lZWRzQmluZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbkxpc3QgPSBwcm9ncmFtLmVuYWJsZUF0dHJpYnV0ZXModGhpcywgdmFvLmF2YWlsYWJsZUF0dHJpYnV0ZVN5bWJvbHMsICh2YW9FeHQgJiYgaXNTdGF0aWMgJiYgdmFvKSk7XG4gICAgICAgICAgICAvLyBTZXR0aW5nIGF0dHJpYnV0ZXM7XG4gICAgICAgICAgICBmb3IgKHZhciBhID0gMDsgYSA8IGF2YWlsYWJsZUF0dHJpYnV0ZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBsb2NhdGlvbkxpc3RbYV07XG4gICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUJ1ZmZlckluZm8gPSBhdmFpbGFibGVBdHRyaWJ1dGVzW2FdO1xuICAgICAgICAgICAgICAgIHZhciBidWZmZXIgPSBhdHRyaWJ1dGVCdWZmZXJJbmZvLmJ1ZmZlcjtcbiAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGF0dHJpYnV0ZUJ1ZmZlckluZm8uc2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgZ2xUeXBlID0gYXR0cmlidXRlQnVmZmVyVHlwZU1hcFthdHRyaWJ1dGVCdWZmZXJJbmZvLnR5cGVdIHx8IF9nbC5GTE9BVDtcblxuICAgICAgICAgICAgICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgX2dsLnZlcnRleEF0dHJpYlBvaW50ZXIobG9jYXRpb24sIHNpemUsIGdsVHlwZSwgZmFsc2UsIDAsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZ2VvbWV0cnkuaXNVc2VJbmRpY2VzKCkpIHtcbiAgICAgICAgICAgICAgICBfZ2wuYmluZEJ1ZmZlcihfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIGluZGljZXNCdWZmZXIuYnVmZmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB2YW87XG4gICAgfSxcblxuICAgIHJlbmRlclByZVo6IGZ1bmN0aW9uIChsaXN0LCBzY2VuZSwgY2FtZXJhKSB7XG4gICAgICAgIHZhciBfZ2wgPSB0aGlzLmdsO1xuICAgICAgICB2YXIgcHJlWlBhc3NNYXRlcmlhbCA9IHRoaXMuX3ByZXpNYXRlcmlhbCB8fCBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKFNoYWRlci5zb3VyY2UoJ2NsYXkucHJlei52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5wcmV6LmZyYWdtZW50JykpXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9wcmV6TWF0ZXJpYWwgPSBwcmVaUGFzc01hdGVyaWFsO1xuICAgICAgICBpZiAodGhpcy5sb2dEZXB0aEJ1ZmZlcikge1xuICAgICAgICAgICAgdGhpcy5fcHJlek1hdGVyaWFsLnNldFVuaWZvcm0oJ2xvZ0RlcHRoQnVmRkMnLCAyLjAgLyAoTWF0aC5sb2coY2FtZXJhLmZhciArIDEuMCApIC8gTWF0aC5MTjIpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIF9nbC5jb2xvck1hc2soZmFsc2UsIGZhbHNlLCBmYWxzZSwgZmFsc2UpO1xuICAgICAgICBfZ2wuZGVwdGhNYXNrKHRydWUpO1xuXG4gICAgICAgIC8vIFN0YXR1c1xuICAgICAgICB0aGlzLnJlbmRlclBhc3MobGlzdCwgY2FtZXJhLCB7XG4gICAgICAgICAgICBpZlJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIXJlbmRlcmFibGUuaWdub3JlUHJlWjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBpc01hdGVyaWFsQ2hhbmdlZDogZnVuY3Rpb24gKHJlbmRlcmFibGUsIHByZXZSZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdEEgPSByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICAgICAgICAgIHZhciBtYXRCID0gcHJldlJlbmRlcmFibGUubWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1hdEEuZ2V0KCdkaWZmdXNlTWFwJykgIT09IG1hdEIuZ2V0KCdkaWZmdXNlTWFwJylcbiAgICAgICAgICAgICAgICAgICAgfHwgKG1hdEEuZ2V0KCdhbHBoYUN1dG9mZicpIHx8IDApICE9PSAobWF0Qi5nZXQoJ2FscGhhQ3V0b2ZmJykgfHwgMCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0VW5pZm9ybTogZnVuY3Rpb24gKHJlbmRlcmFibGUsIGRlcHRoTWF0ZXJpYWwsIHN5bWJvbCkge1xuICAgICAgICAgICAgICAgIGlmIChzeW1ib2wgPT09ICdhbHBoYU1hcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCdkaWZmdXNlTWFwJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ2FscGhhQ3V0b2ZmJykge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVuZGVyYWJsZS5tYXRlcmlhbC5pc0RlZmluZWQoJ2ZyYWdtZW50JywgJ0FMUEhBX1RFU1QnKVxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgcmVuZGVyYWJsZS5tYXRlcmlhbC5nZXQoJ2RpZmZ1c2VNYXAnKVxuICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbHBoYUN1dG9mZiA9IHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCdhbHBoYUN1dG9mZicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFscGhhQ3V0b2ZmIHx8IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ3V2UmVwZWF0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5tYXRlcmlhbC5nZXQoJ3V2UmVwZWF0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ3V2T2Zmc2V0Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5tYXRlcmlhbC5nZXQoJ3V2T2Zmc2V0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGVwdGhNYXRlcmlhbC5nZXQoc3ltYm9sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlWlBhc3NNYXRlcmlhbDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzb3J0OiB0aGlzLm9wYXF1ZVNvcnRDb21wYXJlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIF9nbC5jb2xvck1hc2sodHJ1ZSwgdHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICAgIF9nbC5kZXB0aE1hc2sodHJ1ZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgZ2l2ZW4gc2NlbmUsIGluY2x1ZGluZyBhbGwgZ2VvbWV0cmlzLCB0ZXh0dXJlcyBhbmQgc2hhZGVycyBpbiB0aGUgc2NlbmVcbiAgICAgKiBAcGFyYW0ge2NsYXkuU2NlbmV9IHNjZW5lXG4gICAgICovXG4gICAgZGlzcG9zZVNjZW5lOiBmdW5jdGlvbihzY2VuZSkge1xuICAgICAgICB0aGlzLmRpc3Bvc2VOb2RlKHNjZW5lLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgc2NlbmUuZGlzcG9zZSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGdpdmVuIG5vZGUsIGluY2x1ZGluZyBhbGwgZ2VvbWV0cmllcywgdGV4dHVyZXMgYW5kIHNoYWRlcnMgYXR0YWNoZWQgb24gaXQgb3IgaXRzIGRlc2NlbmRhbnRcbiAgICAgKiBAcGFyYW0ge2NsYXkuTm9kZX0gbm9kZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Rpc3Bvc2VHZW9tZXRyeT1mYWxzZV0gSWYgZGlzcG9zZSB0aGUgZ2VvbWV0cmllcyB1c2VkIGluIHRoZSBkZXNjZW5kYW50IG1lc2hcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtkaXNwb3NlVGV4dHVyZT1mYWxzZV0gSWYgZGlzcG9zZSB0aGUgdGV4dHVyZXMgdXNlZCBpbiB0aGUgZGVzY2VuZGFudCBtZXNoXG4gICAgICovXG4gICAgZGlzcG9zZU5vZGU6IGZ1bmN0aW9uKHJvb3QsIGRpc3Bvc2VHZW9tZXRyeSwgZGlzcG9zZVRleHR1cmUpIHtcbiAgICAgICAgLy8gRGV0dGFjaGVkIGZyb20gcGFyZW50XG4gICAgICAgIGlmIChyb290LmdldFBhcmVudCgpKSB7XG4gICAgICAgICAgICByb290LmdldFBhcmVudCgpLnJlbW92ZShyb290KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGlzcG9zZWRNYXAgPSB7fTtcbiAgICAgICAgcm9vdC50cmF2ZXJzZShmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBub2RlLm1hdGVyaWFsO1xuICAgICAgICAgICAgaWYgKG5vZGUuZ2VvbWV0cnkgJiYgZGlzcG9zZUdlb21ldHJ5KSB7XG4gICAgICAgICAgICAgICAgbm9kZS5nZW9tZXRyeS5kaXNwb3NlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRpc3Bvc2VUZXh0dXJlICYmIG1hdGVyaWFsICYmICFkaXNwb3NlZE1hcFttYXRlcmlhbC5fX3VpZF9fXSkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlVW5pZm9ybXMgPSBtYXRlcmlhbC5nZXRUZXh0dXJlVW5pZm9ybXMoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciB1ID0gMDsgdSA8IHRleHR1cmVVbmlmb3Jtcy5sZW5ndGg7IHUrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybU5hbWUgPSB0ZXh0dXJlVW5pZm9ybXNbdV07XG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBtYXRlcmlhbC51bmlmb3Jtc1t1bmlmb3JtTmFtZV0udmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmlmb3JtVHlwZSA9IG1hdGVyaWFsLnVuaWZvcm1zW3VuaWZvcm1OYW1lXS50eXBlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXZhbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHVuaWZvcm1UeXBlID09PSAndCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbC5kaXNwb3NlICYmIHZhbC5kaXNwb3NlKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHVuaWZvcm1UeXBlID09PSAndHYnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHZhbC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWxba10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsW2tdLmRpc3Bvc2UgJiYgdmFsW2tdLmRpc3Bvc2UodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRpc3Bvc2VkTWFwW21hdGVyaWFsLl9fdWlkX19dID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFBhcnRpY2xlIHN5c3RlbSBhbmQgQW1iaWVudEN1YmVtYXAgbGlnaHQgbmVlZCB0byBkaXNwb3NlXG4gICAgICAgICAgICBpZiAobm9kZS5kaXNwb3NlKSB7XG4gICAgICAgICAgICAgICAgbm9kZS5kaXNwb3NlKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBnaXZlbiBnZW9tZXRyeVxuICAgICAqIEBwYXJhbSB7Y2xheS5HZW9tZXRyeX0gZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBkaXNwb3NlR2VvbWV0cnk6IGZ1bmN0aW9uKGdlb21ldHJ5KSB7XG4gICAgICAgIGdlb21ldHJ5LmRpc3Bvc2UodGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgZ2l2ZW4gdGV4dHVyZVxuICAgICAqIEBwYXJhbSB7Y2xheS5UZXh0dXJlfSB0ZXh0dXJlXG4gICAgICovXG4gICAgZGlzcG9zZVRleHR1cmU6IGZ1bmN0aW9uKHRleHR1cmUpIHtcbiAgICAgICAgdGV4dHVyZS5kaXNwb3NlKHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIGdpdmVuIGZyYW1lIGJ1ZmZlclxuICAgICAqIEBwYXJhbSB7Y2xheS5GcmFtZUJ1ZmZlcn0gZnJhbWVCdWZmZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlRnJhbWVCdWZmZXI6IGZ1bmN0aW9uKGZyYW1lQnVmZmVyKSB7XG4gICAgICAgIGZyYW1lQnVmZmVyLmRpc3Bvc2UodGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAoKSB7fSxcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgc2NyZWVuIGNvb3JkcyB0byBub3JtYWxpemVkIGRldmljZSBjb29yZGluYXRlcyhOREMpXG4gICAgICogU2NyZWVuIGNvb3JkcyBjYW4gZ2V0IGZyb20gbW91c2UgZXZlbnQsIGl0IGlzIHBvc2l0aW9uZWQgcmVsYXRpdmUgdG8gY2FudmFzIGVsZW1lbnRcbiAgICAgKiBOREMgY2FuIGJlIHVzZWQgaW4gcmF5IGNhc3Rpbmcgd2l0aCBDYW1lcmEucHJvdG90eXBlLmNhc3RSYXkgbWV0aG9kc1xuICAgICAqXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgICAgICB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgICAgICB5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICBzY3JlZW5Ub05EQzogZnVuY3Rpb24oeCwgeSwgb3V0KSB7XG4gICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBuZXcgVmVjdG9yMigpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEludmVydCB5O1xuICAgICAgICB5ID0gdGhpcy5faGVpZ2h0IC0geTtcblxuICAgICAgICB2YXIgdmlld3BvcnQgPSB0aGlzLnZpZXdwb3J0O1xuICAgICAgICB2YXIgYXJyID0gb3V0LmFycmF5O1xuICAgICAgICBhcnJbMF0gPSAoeCAtIHZpZXdwb3J0LngpIC8gdmlld3BvcnQud2lkdGg7XG4gICAgICAgIGFyclswXSA9IGFyclswXSAqIDIgLSAxO1xuICAgICAgICBhcnJbMV0gPSAoeSAtIHZpZXdwb3J0LnkpIC8gdmlld3BvcnQuaGVpZ2h0O1xuICAgICAgICBhcnJbMV0gPSBhcnJbMV0gKiAyIC0gMTtcblxuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIE9wYXF1ZSByZW5kZXJhYmxlcyBjb21wYXJlIGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmFibGV9IHhcbiAqIEBwYXJhbSAge2NsYXkuUmVuZGVyYWJsZX0geVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqIEBzdGF0aWNcbiAqL1xuUmVuZGVyZXIub3BhcXVlU29ydENvbXBhcmUgPSBSZW5kZXJlci5wcm90b3R5cGUub3BhcXVlU29ydENvbXBhcmUgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgLy8gUHJpb3JpdHkgcmVuZGVyT3JkZXIgLT4gcHJvZ3JhbSAtPiBtYXRlcmlhbCAtPiBnZW9tZXRyeVxuICAgIGlmICh4LnJlbmRlck9yZGVyID09PSB5LnJlbmRlck9yZGVyKSB7XG4gICAgICAgIGlmICh4Ll9fcHJvZ3JhbSA9PT0geS5fX3Byb2dyYW0pIHtcbiAgICAgICAgICAgIGlmICh4Lm1hdGVyaWFsID09PSB5Lm1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHguZ2VvbWV0cnkuX191aWRfXyAtIHkuZ2VvbWV0cnkuX191aWRfXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB4Lm1hdGVyaWFsLl9fdWlkX18gLSB5Lm1hdGVyaWFsLl9fdWlkX187XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHguX19wcm9ncmFtICYmIHkuX19wcm9ncmFtKSB7XG4gICAgICAgICAgICByZXR1cm4geC5fX3Byb2dyYW0uX191aWRfXyAtIHkuX19wcm9ncmFtLl9fdWlkX187XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiB4LnJlbmRlck9yZGVyIC0geS5yZW5kZXJPcmRlcjtcbn07XG5cbi8qKlxuICogVHJhbnNwYXJlbnQgcmVuZGVyYWJsZXMgY29tcGFyZSBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5SZW5kZXJhYmxlfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmFibGV9IGJcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKiBAc3RhdGljXG4gKi9cblJlbmRlcmVyLnRyYW5zcGFyZW50U29ydENvbXBhcmUgPSBSZW5kZXJlci5wcm90b3R5cGUudHJhbnNwYXJlbnRTb3J0Q29tcGFyZSA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICAvLyBQcmlvcml0eSByZW5kZXJPcmRlciAtPiBkZXB0aCAtPiBwcm9ncmFtIC0+IG1hdGVyaWFsIC0+IGdlb21ldHJ5XG5cbiAgICBpZiAoeC5yZW5kZXJPcmRlciA9PT0geS5yZW5kZXJPcmRlcikge1xuICAgICAgICBpZiAoeC5fX2RlcHRoID09PSB5Ll9fZGVwdGgpIHtcbiAgICAgICAgICAgIGlmICh4Ll9fcHJvZ3JhbSA9PT0geS5fX3Byb2dyYW0pIHtcbiAgICAgICAgICAgICAgICBpZiAoeC5tYXRlcmlhbCA9PT0geS5tYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4geC5nZW9tZXRyeS5fX3VpZF9fIC0geS5nZW9tZXRyeS5fX3VpZF9fO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4geC5tYXRlcmlhbC5fX3VpZF9fIC0geS5tYXRlcmlhbC5fX3VpZF9fO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHguX19wcm9ncmFtICAmJiB5Ll9fcHJvZ3JhbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4Ll9fcHJvZ3JhbS5fX3VpZF9fIC0geS5fX3Byb2dyYW0uX191aWRfXztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIC8vIERlcHRoIGlzIG5lZ2F0aXZlXG4gICAgICAgIC8vIFNvIGZhcnRoZXIgb2JqZWN0IGhhcyBzbWFsbGVyIGRlcHRoIHZhbHVlXG4gICAgICAgIHJldHVybiB4Ll9fZGVwdGggLSB5Ll9fZGVwdGg7XG4gICAgfVxuICAgIHJldHVybiB4LnJlbmRlck9yZGVyIC0geS5yZW5kZXJPcmRlcjtcbn07XG5cbi8vIFRlbXBvcmFyeSB2YXJpYWJsZXNcbnZhciBtYXRyaWNlcyA9IHtcbiAgICBJREVOVElUWTogbWF0NENyZWF0ZSgpLFxuXG4gICAgV09STEQ6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXOiBtYXQ0Q3JlYXRlKCksXG4gICAgUFJPSkVDVElPTjogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFVzogbWF0NENyZWF0ZSgpLFxuICAgIFZJRVdQUk9KRUNUSU9OOiBtYXQ0Q3JlYXRlKCksXG4gICAgV09STERWSUVXUFJPSkVDVElPTjogbWF0NENyZWF0ZSgpLFxuXG4gICAgV09STERJTlZFUlNFOiBtYXQ0Q3JlYXRlKCksXG4gICAgVklFV0lOVkVSU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBQUk9KRUNUSU9OSU5WRVJTRTogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFV0lOVkVSU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXUFJPSkVDVElPTklOVkVSU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRFZJRVdQUk9KRUNUSU9OSU5WRVJTRTogbWF0NENyZWF0ZSgpLFxuXG4gICAgV09STERUUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBWSUVXVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgUFJPSkVDVElPTlRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxEVklFV1RSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFZJRVdQUk9KRUNUSU9OVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgV09STERWSUVXUFJPSkVDVElPTlRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFdPUkxESU5WRVJTRVRSQU5TUE9TRTogbWF0NENyZWF0ZSgpLFxuICAgIFZJRVdJTlZFUlNFVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgUFJPSkVDVElPTklOVkVSU0VUUkFOU1BPU0U6IG1hdDRDcmVhdGUoKSxcbiAgICBXT1JMRFZJRVdJTlZFUlNFVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgVklFV1BST0pFQ1RJT05JTlZFUlNFVFJBTlNQT1NFOiBtYXQ0Q3JlYXRlKCksXG4gICAgV09STERWSUVXUFJPSkVDVElPTklOVkVSU0VUUkFOU1BPU0U6IG1hdDRDcmVhdGUoKVxufTtcblxuLyoqXG4gKiBAbmFtZSBjbGF5LlJlbmRlcmVyLkNPTE9SX0JVRkZFUl9CSVRcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblJlbmRlcmVyLkNPTE9SX0JVRkZFUl9CSVQgPSBnbGVudW0uQ09MT1JfQlVGRkVSX0JJVDtcbi8qKlxuICogQG5hbWUgY2xheS5SZW5kZXJlci5ERVBUSF9CVUZGRVJfQklUXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJlci5ERVBUSF9CVUZGRVJfQklUID0gZ2xlbnVtLkRFUFRIX0JVRkZFUl9CSVQ7XG4vKipcbiAqIEBuYW1lIGNsYXkuUmVuZGVyZXIuU1RFTkNJTF9CVUZGRVJfQklUXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5SZW5kZXJlci5TVEVOQ0lMX0JVRkZFUl9CSVQgPSBnbGVudW0uU1RFTkNJTF9CVUZGRVJfQklUO1xuXG5leHBvcnQgZGVmYXVsdCBSZW5kZXJlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9SZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///48\n");

/***/ }),
/* 49 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_LRU__ = __webpack_require__(36);\n/**\n * @namespace clay.core.color\n */\n\n\nvar colorUtil = {};\n\nvar kCSSColorTable = {\n    'transparent': [0,0,0,0], 'aliceblue': [240,248,255,1],\n    'antiquewhite': [250,235,215,1], 'aqua': [0,255,255,1],\n    'aquamarine': [127,255,212,1], 'azure': [240,255,255,1],\n    'beige': [245,245,220,1], 'bisque': [255,228,196,1],\n    'black': [0,0,0,1], 'blanchedalmond': [255,235,205,1],\n    'blue': [0,0,255,1], 'blueviolet': [138,43,226,1],\n    'brown': [165,42,42,1], 'burlywood': [222,184,135,1],\n    'cadetblue': [95,158,160,1], 'chartreuse': [127,255,0,1],\n    'chocolate': [210,105,30,1], 'coral': [255,127,80,1],\n    'cornflowerblue': [100,149,237,1], 'cornsilk': [255,248,220,1],\n    'crimson': [220,20,60,1], 'cyan': [0,255,255,1],\n    'darkblue': [0,0,139,1], 'darkcyan': [0,139,139,1],\n    'darkgoldenrod': [184,134,11,1], 'darkgray': [169,169,169,1],\n    'darkgreen': [0,100,0,1], 'darkgrey': [169,169,169,1],\n    'darkkhaki': [189,183,107,1], 'darkmagenta': [139,0,139,1],\n    'darkolivegreen': [85,107,47,1], 'darkorange': [255,140,0,1],\n    'darkorchid': [153,50,204,1], 'darkred': [139,0,0,1],\n    'darksalmon': [233,150,122,1], 'darkseagreen': [143,188,143,1],\n    'darkslateblue': [72,61,139,1], 'darkslategray': [47,79,79,1],\n    'darkslategrey': [47,79,79,1], 'darkturquoise': [0,206,209,1],\n    'darkviolet': [148,0,211,1], 'deeppink': [255,20,147,1],\n    'deepskyblue': [0,191,255,1], 'dimgray': [105,105,105,1],\n    'dimgrey': [105,105,105,1], 'dodgerblue': [30,144,255,1],\n    'firebrick': [178,34,34,1], 'floralwhite': [255,250,240,1],\n    'forestgreen': [34,139,34,1], 'fuchsia': [255,0,255,1],\n    'gainsboro': [220,220,220,1], 'ghostwhite': [248,248,255,1],\n    'gold': [255,215,0,1], 'goldenrod': [218,165,32,1],\n    'gray': [128,128,128,1], 'green': [0,128,0,1],\n    'greenyellow': [173,255,47,1], 'grey': [128,128,128,1],\n    'honeydew': [240,255,240,1], 'hotpink': [255,105,180,1],\n    'indianred': [205,92,92,1], 'indigo': [75,0,130,1],\n    'ivory': [255,255,240,1], 'khaki': [240,230,140,1],\n    'lavender': [230,230,250,1], 'lavenderblush': [255,240,245,1],\n    'lawngreen': [124,252,0,1], 'lemonchiffon': [255,250,205,1],\n    'lightblue': [173,216,230,1], 'lightcoral': [240,128,128,1],\n    'lightcyan': [224,255,255,1], 'lightgoldenrodyellow': [250,250,210,1],\n    'lightgray': [211,211,211,1], 'lightgreen': [144,238,144,1],\n    'lightgrey': [211,211,211,1], 'lightpink': [255,182,193,1],\n    'lightsalmon': [255,160,122,1], 'lightseagreen': [32,178,170,1],\n    'lightskyblue': [135,206,250,1], 'lightslategray': [119,136,153,1],\n    'lightslategrey': [119,136,153,1], 'lightsteelblue': [176,196,222,1],\n    'lightyellow': [255,255,224,1], 'lime': [0,255,0,1],\n    'limegreen': [50,205,50,1], 'linen': [250,240,230,1],\n    'magenta': [255,0,255,1], 'maroon': [128,0,0,1],\n    'mediumaquamarine': [102,205,170,1], 'mediumblue': [0,0,205,1],\n    'mediumorchid': [186,85,211,1], 'mediumpurple': [147,112,219,1],\n    'mediumseagreen': [60,179,113,1], 'mediumslateblue': [123,104,238,1],\n    'mediumspringgreen': [0,250,154,1], 'mediumturquoise': [72,209,204,1],\n    'mediumvioletred': [199,21,133,1], 'midnightblue': [25,25,112,1],\n    'mintcream': [245,255,250,1], 'mistyrose': [255,228,225,1],\n    'moccasin': [255,228,181,1], 'navajowhite': [255,222,173,1],\n    'navy': [0,0,128,1], 'oldlace': [253,245,230,1],\n    'olive': [128,128,0,1], 'olivedrab': [107,142,35,1],\n    'orange': [255,165,0,1], 'orangered': [255,69,0,1],\n    'orchid': [218,112,214,1], 'palegoldenrod': [238,232,170,1],\n    'palegreen': [152,251,152,1], 'paleturquoise': [175,238,238,1],\n    'palevioletred': [219,112,147,1], 'papayawhip': [255,239,213,1],\n    'peachpuff': [255,218,185,1], 'peru': [205,133,63,1],\n    'pink': [255,192,203,1], 'plum': [221,160,221,1],\n    'powderblue': [176,224,230,1], 'purple': [128,0,128,1],\n    'red': [255,0,0,1], 'rosybrown': [188,143,143,1],\n    'royalblue': [65,105,225,1], 'saddlebrown': [139,69,19,1],\n    'salmon': [250,128,114,1], 'sandybrown': [244,164,96,1],\n    'seagreen': [46,139,87,1], 'seashell': [255,245,238,1],\n    'sienna': [160,82,45,1], 'silver': [192,192,192,1],\n    'skyblue': [135,206,235,1], 'slateblue': [106,90,205,1],\n    'slategray': [112,128,144,1], 'slategrey': [112,128,144,1],\n    'snow': [255,250,250,1], 'springgreen': [0,255,127,1],\n    'steelblue': [70,130,180,1], 'tan': [210,180,140,1],\n    'teal': [0,128,128,1], 'thistle': [216,191,216,1],\n    'tomato': [255,99,71,1], 'turquoise': [64,224,208,1],\n    'violet': [238,130,238,1], 'wheat': [245,222,179,1],\n    'white': [255,255,255,1], 'whitesmoke': [245,245,245,1],\n    'yellow': [255,255,0,1], 'yellowgreen': [154,205,50,1]\n};\n\nfunction clampCssByte(i) {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {  // int or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {  // float or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2/3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r; out[1] = g; out[2] = b; out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\n    return out;\n}\n\nvar colorCache = new __WEBPACK_IMPORTED_MODULE_0__core_LRU__[\"a\" /* default */](20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n    // Reuse removed array\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\n\n/**\n * @name clay.core.color.parse\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n */\ncolorUtil.parse = function (colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n\n    // #abc and #abc123 syntax.\n    if (str.charAt(0) === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n\n        return;\n    }\n    var op = str.indexOf('('), ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                alpha = parseCssFloat(params.pop()); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr,\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                );\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n};\n\ncolorUtil.parseToFloat = function (colorStr, rgbaArr) {\n    rgbaArr = colorUtil.parse(colorStr, rgbaArr);\n    if (!rgbaArr) {\n        return;\n    }\n    rgbaArr[0] /= 255;\n    rgbaArr[1] /= 255;\n    rgbaArr[2] /= 255;\n    return rgbaArr;\n}\n\n/**\n * @name clay.core.color.hsla2rgba\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n\n    rgba = rgba || [];\n    setRgba(rgba,\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255),\n        1\n    );\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n\n    return rgba;\n}\n\n/**\n * @name clay.core.color.rgba2hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n\n    // RGB from 0 to 255\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n\n    var vMin = Math.min(R, G, B); // Min. value of RGB\n    var vMax = Math.max(R, G, B); // Max. value of RGB\n    var delta = vMax - vMin; // Delta RGB value\n\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    // HSL results from 0 to 1\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n\n        if (H < 0) {\n            H += 1;\n        }\n\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n\n    return hsla;\n}\n\n/**\n * @name clay.core.color.lift\n * @param {string} color\n * @param {number} level\n * @return {string}\n */\ncolorUtil.lift = function (color, level) {\n    var colorArr = colorUtil.parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n        }\n        return colorUtil.stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\n\n/**\n * @name clay.core.color.toHex\n * @param {string} color\n * @return {string}\n */\ncolorUtil.toHex = function (color) {\n    var colorArr = colorUtil.parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n};\n\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @name clay.core.color\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\ncolorUtil.fastLerp = function (normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    out = out || [];\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n\n    return out;\n}\n\ncolorUtil.fastMapToColor = colorUtil.fastLerp;\n\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n */\ncolorUtil.lerp = function (normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colorUtil.parse(colors[leftIndex]);\n    var rightColor = colorUtil.parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n\n    var color = colorUtil.stringify(\n        [\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n        ],\n        'rgba'\n    );\n\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\n\n/**\n * @deprecated\n */\ncolorUtil.mapToColor = colorUtil.lerp;\n\n/**\n * @name clay.core.color\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n */\ncolorUtil.modifyHSL = function (color, h, s, l) {\n    color = colorUtil.parse(color);\n\n    if (color) {\n        color = rgba2hsla(color);\n        h != null && (color[0] = clampCssAngle(h));\n        s != null && (color[1] = parseCssFloat(s));\n        l != null && (color[2] = parseCssFloat(l));\n\n        return colorUtil.stringify(hsla2rgba(color), 'rgba');\n    }\n}\n\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n */\ncolorUtil.modifyAlpha = function (color, alpha) {\n    color = colorUtil.parse(color);\n\n    if (color && alpha != null) {\n        color[3] = clampCssFloat(alpha);\n        return colorUtil.stringify(color, 'rgba');\n    }\n}\n\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\ncolorUtil.stringify = function (arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n};\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (colorUtil);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvY29sb3IuanM/NjNhNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBuYW1lc3BhY2UgY2xheS5jb3JlLmNvbG9yXG4gKi9cbmltcG9ydCBMUlUgZnJvbSAnLi4vY29yZS9MUlUnO1xuXG52YXIgY29sb3JVdGlsID0ge307XG5cbnZhciBrQ1NTQ29sb3JUYWJsZSA9IHtcbiAgICAndHJhbnNwYXJlbnQnOiBbMCwwLDAsMF0sICdhbGljZWJsdWUnOiBbMjQwLDI0OCwyNTUsMV0sXG4gICAgJ2FudGlxdWV3aGl0ZSc6IFsyNTAsMjM1LDIxNSwxXSwgJ2FxdWEnOiBbMCwyNTUsMjU1LDFdLFxuICAgICdhcXVhbWFyaW5lJzogWzEyNywyNTUsMjEyLDFdLCAnYXp1cmUnOiBbMjQwLDI1NSwyNTUsMV0sXG4gICAgJ2JlaWdlJzogWzI0NSwyNDUsMjIwLDFdLCAnYmlzcXVlJzogWzI1NSwyMjgsMTk2LDFdLFxuICAgICdibGFjayc6IFswLDAsMCwxXSwgJ2JsYW5jaGVkYWxtb25kJzogWzI1NSwyMzUsMjA1LDFdLFxuICAgICdibHVlJzogWzAsMCwyNTUsMV0sICdibHVldmlvbGV0JzogWzEzOCw0MywyMjYsMV0sXG4gICAgJ2Jyb3duJzogWzE2NSw0Miw0MiwxXSwgJ2J1cmx5d29vZCc6IFsyMjIsMTg0LDEzNSwxXSxcbiAgICAnY2FkZXRibHVlJzogWzk1LDE1OCwxNjAsMV0sICdjaGFydHJldXNlJzogWzEyNywyNTUsMCwxXSxcbiAgICAnY2hvY29sYXRlJzogWzIxMCwxMDUsMzAsMV0sICdjb3JhbCc6IFsyNTUsMTI3LDgwLDFdLFxuICAgICdjb3JuZmxvd2VyYmx1ZSc6IFsxMDAsMTQ5LDIzNywxXSwgJ2Nvcm5zaWxrJzogWzI1NSwyNDgsMjIwLDFdLFxuICAgICdjcmltc29uJzogWzIyMCwyMCw2MCwxXSwgJ2N5YW4nOiBbMCwyNTUsMjU1LDFdLFxuICAgICdkYXJrYmx1ZSc6IFswLDAsMTM5LDFdLCAnZGFya2N5YW4nOiBbMCwxMzksMTM5LDFdLFxuICAgICdkYXJrZ29sZGVucm9kJzogWzE4NCwxMzQsMTEsMV0sICdkYXJrZ3JheSc6IFsxNjksMTY5LDE2OSwxXSxcbiAgICAnZGFya2dyZWVuJzogWzAsMTAwLDAsMV0sICdkYXJrZ3JleSc6IFsxNjksMTY5LDE2OSwxXSxcbiAgICAnZGFya2toYWtpJzogWzE4OSwxODMsMTA3LDFdLCAnZGFya21hZ2VudGEnOiBbMTM5LDAsMTM5LDFdLFxuICAgICdkYXJrb2xpdmVncmVlbic6IFs4NSwxMDcsNDcsMV0sICdkYXJrb3JhbmdlJzogWzI1NSwxNDAsMCwxXSxcbiAgICAnZGFya29yY2hpZCc6IFsxNTMsNTAsMjA0LDFdLCAnZGFya3JlZCc6IFsxMzksMCwwLDFdLFxuICAgICdkYXJrc2FsbW9uJzogWzIzMywxNTAsMTIyLDFdLCAnZGFya3NlYWdyZWVuJzogWzE0MywxODgsMTQzLDFdLFxuICAgICdkYXJrc2xhdGVibHVlJzogWzcyLDYxLDEzOSwxXSwgJ2RhcmtzbGF0ZWdyYXknOiBbNDcsNzksNzksMV0sXG4gICAgJ2RhcmtzbGF0ZWdyZXknOiBbNDcsNzksNzksMV0sICdkYXJrdHVycXVvaXNlJzogWzAsMjA2LDIwOSwxXSxcbiAgICAnZGFya3Zpb2xldCc6IFsxNDgsMCwyMTEsMV0sICdkZWVwcGluayc6IFsyNTUsMjAsMTQ3LDFdLFxuICAgICdkZWVwc2t5Ymx1ZSc6IFswLDE5MSwyNTUsMV0sICdkaW1ncmF5JzogWzEwNSwxMDUsMTA1LDFdLFxuICAgICdkaW1ncmV5JzogWzEwNSwxMDUsMTA1LDFdLCAnZG9kZ2VyYmx1ZSc6IFszMCwxNDQsMjU1LDFdLFxuICAgICdmaXJlYnJpY2snOiBbMTc4LDM0LDM0LDFdLCAnZmxvcmFsd2hpdGUnOiBbMjU1LDI1MCwyNDAsMV0sXG4gICAgJ2ZvcmVzdGdyZWVuJzogWzM0LDEzOSwzNCwxXSwgJ2Z1Y2hzaWEnOiBbMjU1LDAsMjU1LDFdLFxuICAgICdnYWluc2Jvcm8nOiBbMjIwLDIyMCwyMjAsMV0sICdnaG9zdHdoaXRlJzogWzI0OCwyNDgsMjU1LDFdLFxuICAgICdnb2xkJzogWzI1NSwyMTUsMCwxXSwgJ2dvbGRlbnJvZCc6IFsyMTgsMTY1LDMyLDFdLFxuICAgICdncmF5JzogWzEyOCwxMjgsMTI4LDFdLCAnZ3JlZW4nOiBbMCwxMjgsMCwxXSxcbiAgICAnZ3JlZW55ZWxsb3cnOiBbMTczLDI1NSw0NywxXSwgJ2dyZXknOiBbMTI4LDEyOCwxMjgsMV0sXG4gICAgJ2hvbmV5ZGV3JzogWzI0MCwyNTUsMjQwLDFdLCAnaG90cGluayc6IFsyNTUsMTA1LDE4MCwxXSxcbiAgICAnaW5kaWFucmVkJzogWzIwNSw5Miw5MiwxXSwgJ2luZGlnbyc6IFs3NSwwLDEzMCwxXSxcbiAgICAnaXZvcnknOiBbMjU1LDI1NSwyNDAsMV0sICdraGFraSc6IFsyNDAsMjMwLDE0MCwxXSxcbiAgICAnbGF2ZW5kZXInOiBbMjMwLDIzMCwyNTAsMV0sICdsYXZlbmRlcmJsdXNoJzogWzI1NSwyNDAsMjQ1LDFdLFxuICAgICdsYXduZ3JlZW4nOiBbMTI0LDI1MiwwLDFdLCAnbGVtb25jaGlmZm9uJzogWzI1NSwyNTAsMjA1LDFdLFxuICAgICdsaWdodGJsdWUnOiBbMTczLDIxNiwyMzAsMV0sICdsaWdodGNvcmFsJzogWzI0MCwxMjgsMTI4LDFdLFxuICAgICdsaWdodGN5YW4nOiBbMjI0LDI1NSwyNTUsMV0sICdsaWdodGdvbGRlbnJvZHllbGxvdyc6IFsyNTAsMjUwLDIxMCwxXSxcbiAgICAnbGlnaHRncmF5JzogWzIxMSwyMTEsMjExLDFdLCAnbGlnaHRncmVlbic6IFsxNDQsMjM4LDE0NCwxXSxcbiAgICAnbGlnaHRncmV5JzogWzIxMSwyMTEsMjExLDFdLCAnbGlnaHRwaW5rJzogWzI1NSwxODIsMTkzLDFdLFxuICAgICdsaWdodHNhbG1vbic6IFsyNTUsMTYwLDEyMiwxXSwgJ2xpZ2h0c2VhZ3JlZW4nOiBbMzIsMTc4LDE3MCwxXSxcbiAgICAnbGlnaHRza3libHVlJzogWzEzNSwyMDYsMjUwLDFdLCAnbGlnaHRzbGF0ZWdyYXknOiBbMTE5LDEzNiwxNTMsMV0sXG4gICAgJ2xpZ2h0c2xhdGVncmV5JzogWzExOSwxMzYsMTUzLDFdLCAnbGlnaHRzdGVlbGJsdWUnOiBbMTc2LDE5NiwyMjIsMV0sXG4gICAgJ2xpZ2h0eWVsbG93JzogWzI1NSwyNTUsMjI0LDFdLCAnbGltZSc6IFswLDI1NSwwLDFdLFxuICAgICdsaW1lZ3JlZW4nOiBbNTAsMjA1LDUwLDFdLCAnbGluZW4nOiBbMjUwLDI0MCwyMzAsMV0sXG4gICAgJ21hZ2VudGEnOiBbMjU1LDAsMjU1LDFdLCAnbWFyb29uJzogWzEyOCwwLDAsMV0sXG4gICAgJ21lZGl1bWFxdWFtYXJpbmUnOiBbMTAyLDIwNSwxNzAsMV0sICdtZWRpdW1ibHVlJzogWzAsMCwyMDUsMV0sXG4gICAgJ21lZGl1bW9yY2hpZCc6IFsxODYsODUsMjExLDFdLCAnbWVkaXVtcHVycGxlJzogWzE0NywxMTIsMjE5LDFdLFxuICAgICdtZWRpdW1zZWFncmVlbic6IFs2MCwxNzksMTEzLDFdLCAnbWVkaXVtc2xhdGVibHVlJzogWzEyMywxMDQsMjM4LDFdLFxuICAgICdtZWRpdW1zcHJpbmdncmVlbic6IFswLDI1MCwxNTQsMV0sICdtZWRpdW10dXJxdW9pc2UnOiBbNzIsMjA5LDIwNCwxXSxcbiAgICAnbWVkaXVtdmlvbGV0cmVkJzogWzE5OSwyMSwxMzMsMV0sICdtaWRuaWdodGJsdWUnOiBbMjUsMjUsMTEyLDFdLFxuICAgICdtaW50Y3JlYW0nOiBbMjQ1LDI1NSwyNTAsMV0sICdtaXN0eXJvc2UnOiBbMjU1LDIyOCwyMjUsMV0sXG4gICAgJ21vY2Nhc2luJzogWzI1NSwyMjgsMTgxLDFdLCAnbmF2YWpvd2hpdGUnOiBbMjU1LDIyMiwxNzMsMV0sXG4gICAgJ25hdnknOiBbMCwwLDEyOCwxXSwgJ29sZGxhY2UnOiBbMjUzLDI0NSwyMzAsMV0sXG4gICAgJ29saXZlJzogWzEyOCwxMjgsMCwxXSwgJ29saXZlZHJhYic6IFsxMDcsMTQyLDM1LDFdLFxuICAgICdvcmFuZ2UnOiBbMjU1LDE2NSwwLDFdLCAnb3JhbmdlcmVkJzogWzI1NSw2OSwwLDFdLFxuICAgICdvcmNoaWQnOiBbMjE4LDExMiwyMTQsMV0sICdwYWxlZ29sZGVucm9kJzogWzIzOCwyMzIsMTcwLDFdLFxuICAgICdwYWxlZ3JlZW4nOiBbMTUyLDI1MSwxNTIsMV0sICdwYWxldHVycXVvaXNlJzogWzE3NSwyMzgsMjM4LDFdLFxuICAgICdwYWxldmlvbGV0cmVkJzogWzIxOSwxMTIsMTQ3LDFdLCAncGFwYXlhd2hpcCc6IFsyNTUsMjM5LDIxMywxXSxcbiAgICAncGVhY2hwdWZmJzogWzI1NSwyMTgsMTg1LDFdLCAncGVydSc6IFsyMDUsMTMzLDYzLDFdLFxuICAgICdwaW5rJzogWzI1NSwxOTIsMjAzLDFdLCAncGx1bSc6IFsyMjEsMTYwLDIyMSwxXSxcbiAgICAncG93ZGVyYmx1ZSc6IFsxNzYsMjI0LDIzMCwxXSwgJ3B1cnBsZSc6IFsxMjgsMCwxMjgsMV0sXG4gICAgJ3JlZCc6IFsyNTUsMCwwLDFdLCAncm9zeWJyb3duJzogWzE4OCwxNDMsMTQzLDFdLFxuICAgICdyb3lhbGJsdWUnOiBbNjUsMTA1LDIyNSwxXSwgJ3NhZGRsZWJyb3duJzogWzEzOSw2OSwxOSwxXSxcbiAgICAnc2FsbW9uJzogWzI1MCwxMjgsMTE0LDFdLCAnc2FuZHlicm93bic6IFsyNDQsMTY0LDk2LDFdLFxuICAgICdzZWFncmVlbic6IFs0NiwxMzksODcsMV0sICdzZWFzaGVsbCc6IFsyNTUsMjQ1LDIzOCwxXSxcbiAgICAnc2llbm5hJzogWzE2MCw4Miw0NSwxXSwgJ3NpbHZlcic6IFsxOTIsMTkyLDE5MiwxXSxcbiAgICAnc2t5Ymx1ZSc6IFsxMzUsMjA2LDIzNSwxXSwgJ3NsYXRlYmx1ZSc6IFsxMDYsOTAsMjA1LDFdLFxuICAgICdzbGF0ZWdyYXknOiBbMTEyLDEyOCwxNDQsMV0sICdzbGF0ZWdyZXknOiBbMTEyLDEyOCwxNDQsMV0sXG4gICAgJ3Nub3cnOiBbMjU1LDI1MCwyNTAsMV0sICdzcHJpbmdncmVlbic6IFswLDI1NSwxMjcsMV0sXG4gICAgJ3N0ZWVsYmx1ZSc6IFs3MCwxMzAsMTgwLDFdLCAndGFuJzogWzIxMCwxODAsMTQwLDFdLFxuICAgICd0ZWFsJzogWzAsMTI4LDEyOCwxXSwgJ3RoaXN0bGUnOiBbMjE2LDE5MSwyMTYsMV0sXG4gICAgJ3RvbWF0byc6IFsyNTUsOTksNzEsMV0sICd0dXJxdW9pc2UnOiBbNjQsMjI0LDIwOCwxXSxcbiAgICAndmlvbGV0JzogWzIzOCwxMzAsMjM4LDFdLCAnd2hlYXQnOiBbMjQ1LDIyMiwxNzksMV0sXG4gICAgJ3doaXRlJzogWzI1NSwyNTUsMjU1LDFdLCAnd2hpdGVzbW9rZSc6IFsyNDUsMjQ1LDI0NSwxXSxcbiAgICAneWVsbG93JzogWzI1NSwyNTUsMCwxXSwgJ3llbGxvd2dyZWVuJzogWzE1NCwyMDUsNTAsMV1cbn07XG5cbmZ1bmN0aW9uIGNsYW1wQ3NzQnl0ZShpKSB7ICAvLyBDbGFtcCB0byBpbnRlZ2VyIDAgLi4gMjU1LlxuICAgIGkgPSBNYXRoLnJvdW5kKGkpOyAgLy8gU2VlbXMgdG8gYmUgd2hhdCBDaHJvbWUgZG9lcyAodnMgdHJ1bmNhdGlvbikuXG4gICAgcmV0dXJuIGkgPCAwID8gMCA6IGkgPiAyNTUgPyAyNTUgOiBpO1xufVxuXG5mdW5jdGlvbiBjbGFtcENzc0FuZ2xlKGkpIHsgIC8vIENsYW1wIHRvIGludGVnZXIgMCAuLiAzNjAuXG4gICAgaSA9IE1hdGgucm91bmQoaSk7ICAvLyBTZWVtcyB0byBiZSB3aGF0IENocm9tZSBkb2VzICh2cyB0cnVuY2F0aW9uKS5cbiAgICByZXR1cm4gaSA8IDAgPyAwIDogaSA+IDM2MCA/IDM2MCA6IGk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wQ3NzRmxvYXQoZikgeyAgLy8gQ2xhbXAgdG8gZmxvYXQgMC4wIC4uIDEuMC5cbiAgICByZXR1cm4gZiA8IDAgPyAwIDogZiA+IDEgPyAxIDogZjtcbn1cblxuZnVuY3Rpb24gcGFyc2VDc3NJbnQoc3RyKSB7ICAvLyBpbnQgb3IgcGVyY2VudGFnZS5cbiAgICBpZiAoc3RyLmxlbmd0aCAmJiBzdHIuY2hhckF0KHN0ci5sZW5ndGggLSAxKSA9PT0gJyUnKSB7XG4gICAgICAgIHJldHVybiBjbGFtcENzc0J5dGUocGFyc2VGbG9hdChzdHIpIC8gMTAwICogMjU1KTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wQ3NzQnl0ZShwYXJzZUludChzdHIsIDEwKSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlQ3NzRmxvYXQoc3RyKSB7ICAvLyBmbG9hdCBvciBwZXJjZW50YWdlLlxuICAgIGlmIChzdHIubGVuZ3RoICYmIHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpID09PSAnJScpIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wQ3NzRmxvYXQocGFyc2VGbG9hdChzdHIpIC8gMTAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGNsYW1wQ3NzRmxvYXQocGFyc2VGbG9hdChzdHIpKTtcbn1cblxuZnVuY3Rpb24gY3NzSHVlVG9SZ2IobTEsIG0yLCBoKSB7XG4gICAgaWYgKGggPCAwKSB7XG4gICAgICAgIGggKz0gMTtcbiAgICB9XG4gICAgZWxzZSBpZiAoaCA+IDEpIHtcbiAgICAgICAgaCAtPSAxO1xuICAgIH1cblxuICAgIGlmIChoICogNiA8IDEpIHtcbiAgICAgICAgcmV0dXJuIG0xICsgKG0yIC0gbTEpICogaCAqIDY7XG4gICAgfVxuICAgIGlmIChoICogMiA8IDEpIHtcbiAgICAgICAgcmV0dXJuIG0yO1xuICAgIH1cbiAgICBpZiAoaCAqIDMgPCAyKSB7XG4gICAgICAgIHJldHVybiBtMSArIChtMiAtIG0xKSAqICgyLzMgLSBoKSAqIDY7XG4gICAgfVxuICAgIHJldHVybiBtMTtcbn1cblxuZnVuY3Rpb24gbGVycE51bWJlcihhLCBiLCBwKSB7XG4gICAgcmV0dXJuIGEgKyAoYiAtIGEpICogcDtcbn1cblxuZnVuY3Rpb24gc2V0UmdiYShvdXQsIHIsIGcsIGIsIGEpIHtcbiAgICBvdXRbMF0gPSByOyBvdXRbMV0gPSBnOyBvdXRbMl0gPSBiOyBvdXRbM10gPSBhO1xuICAgIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBjb3B5UmdiYShvdXQsIGEpIHtcbiAgICBvdXRbMF0gPSBhWzBdOyBvdXRbMV0gPSBhWzFdOyBvdXRbMl0gPSBhWzJdOyBvdXRbM10gPSBhWzNdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbnZhciBjb2xvckNhY2hlID0gbmV3IExSVSgyMCk7XG52YXIgbGFzdFJlbW92ZWRBcnIgPSBudWxsO1xuXG5mdW5jdGlvbiBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKSB7XG4gICAgLy8gUmV1c2UgcmVtb3ZlZCBhcnJheVxuICAgIGlmIChsYXN0UmVtb3ZlZEFycikge1xuICAgICAgICBjb3B5UmdiYShsYXN0UmVtb3ZlZEFyciwgcmdiYUFycik7XG4gICAgfVxuICAgIGxhc3RSZW1vdmVkQXJyID0gY29sb3JDYWNoZS5wdXQoY29sb3JTdHIsIGxhc3RSZW1vdmVkQXJyIHx8IChyZ2JhQXJyLnNsaWNlKCkpKTtcbn1cblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3IucGFyc2VcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclN0clxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gb3V0XG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn1cbiAqL1xuY29sb3JVdGlsLnBhcnNlID0gZnVuY3Rpb24gKGNvbG9yU3RyLCByZ2JhQXJyKSB7XG4gICAgaWYgKCFjb2xvclN0cikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJnYmFBcnIgPSByZ2JhQXJyIHx8IFtdO1xuXG4gICAgdmFyIGNhY2hlZCA9IGNvbG9yQ2FjaGUuZ2V0KGNvbG9yU3RyKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBjb3B5UmdiYShyZ2JhQXJyLCBjYWNoZWQpO1xuICAgIH1cblxuICAgIC8vIGNvbG9yU3RyIG1heSBiZSBub3Qgc3RyaW5nXG4gICAgY29sb3JTdHIgPSBjb2xvclN0ciArICcnO1xuICAgIC8vIFJlbW92ZSBhbGwgd2hpdGVzcGFjZSwgbm90IGNvbXBsaWFudCwgYnV0IHNob3VsZCBqdXN0IGJlIG1vcmUgYWNjZXB0aW5nLlxuICAgIHZhciBzdHIgPSBjb2xvclN0ci5yZXBsYWNlKC8gL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ29sb3Iga2V5d29yZHMgKGFuZCB0cmFuc3BhcmVudCkgbG9va3VwLlxuICAgIGlmIChzdHIgaW4ga0NTU0NvbG9yVGFibGUpIHtcbiAgICAgICAgY29weVJnYmEocmdiYUFyciwga0NTU0NvbG9yVGFibGVbc3RyXSk7XG4gICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICB9XG5cbiAgICAvLyAjYWJjIGFuZCAjYWJjMTIzIHN5bnRheC5cbiAgICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgICgoaXYgJiAweGYwMCkgPj4gNCkgfCAoKGl2ICYgMHhmMDApID4+IDgpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZjApIHwgKChpdiAmIDB4ZjApID4+IDQpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZikgfCAoKGl2ICYgMHhmKSA8PCA0KSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHIubGVuZ3RoID09PSA3KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmZmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZmYwMDAwKSA+PiAxNixcbiAgICAgICAgICAgICAgICAoaXYgJiAweGZmMDApID4+IDgsXG4gICAgICAgICAgICAgICAgaXYgJiAweGZmLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgb3AgPSBzdHIuaW5kZXhPZignKCcpLCBlcCA9IHN0ci5pbmRleE9mKCcpJyk7XG4gICAgaWYgKG9wICE9PSAtMSAmJiBlcCArIDEgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGZuYW1lID0gc3RyLnN1YnN0cigwLCBvcCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdHIuc3Vic3RyKG9wICsgMSwgZXAgLSAob3AgKyAxKSkuc3BsaXQoJywnKTtcbiAgICAgICAgdmFyIGFscGhhID0gMTsgIC8vIFRvIGFsbG93IGNhc2UgZmFsbHRocm91Z2guXG4gICAgICAgIHN3aXRjaCAoZm5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3JnYmEnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWxwaGEgPSBwYXJzZUNzc0Zsb2F0KHBhcmFtcy5wb3AoKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgICAgICAgLy8gRmFsbCB0aHJvdWdoLlxuICAgICAgICAgICAgY2FzZSAncmdiJzpcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFycixcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzBdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICAgICAgY2FzZSAnaHNsYSc6XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJhbXNbM10gPSBwYXJzZUNzc0Zsb2F0KHBhcmFtc1szXSk7XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBjYXNlICdoc2wnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgcmV0dXJuO1xufTtcblxuY29sb3JVdGlsLnBhcnNlVG9GbG9hdCA9IGZ1bmN0aW9uIChjb2xvclN0ciwgcmdiYUFycikge1xuICAgIHJnYmFBcnIgPSBjb2xvclV0aWwucGFyc2UoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgIGlmICghcmdiYUFycikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJnYmFBcnJbMF0gLz0gMjU1O1xuICAgIHJnYmFBcnJbMV0gLz0gMjU1O1xuICAgIHJnYmFBcnJbMl0gLz0gMjU1O1xuICAgIHJldHVybiByZ2JhQXJyO1xufVxuXG4vKipcbiAqIEBuYW1lIGNsYXkuY29yZS5jb2xvci5oc2xhMnJnYmFcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGhzbGFcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSByZ2JhXG4gKi9cbmZ1bmN0aW9uIGhzbGEycmdiYShoc2xhLCByZ2JhKSB7XG4gICAgdmFyIGggPSAoKChwYXJzZUZsb2F0KGhzbGFbMF0pICUgMzYwKSArIDM2MCkgJSAzNjApIC8gMzYwOyAgLy8gMCAuLiAxXG4gICAgLy8gTk9URShkZWFubSk6IEFjY29yZGluZyB0byB0aGUgQ1NTIHNwZWMgcy9sIHNob3VsZCBvbmx5IGJlXG4gICAgLy8gcGVyY2VudGFnZXMsIGJ1dCB3ZSBkb24ndCBib3RoZXIgYW5kIGxldCBmbG9hdCBvciBwZXJjZW50YWdlLlxuICAgIHZhciBzID0gcGFyc2VDc3NGbG9hdChoc2xhWzFdKTtcbiAgICB2YXIgbCA9IHBhcnNlQ3NzRmxvYXQoaHNsYVsyXSk7XG4gICAgdmFyIG0yID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgdmFyIG0xID0gbCAqIDIgLSBtMjtcblxuICAgIHJnYmEgPSByZ2JhIHx8IFtdO1xuICAgIHNldFJnYmEocmdiYSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCArIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGgpICogMjU1KSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCAtIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIDFcbiAgICApO1xuXG4gICAgaWYgKGhzbGEubGVuZ3RoID09PSA0KSB7XG4gICAgICAgIHJnYmFbM10gPSBoc2xhWzNdO1xuICAgIH1cblxuICAgIHJldHVybiByZ2JhO1xufVxuXG4vKipcbiAqIEBuYW1lIGNsYXkuY29yZS5jb2xvci5yZ2JhMmhzbGFcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBoc2xhXG4gKi9cbmZ1bmN0aW9uIHJnYmEyaHNsYShyZ2JhKSB7XG4gICAgaWYgKCFyZ2JhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSR0IgZnJvbSAwIHRvIDI1NVxuICAgIHZhciBSID0gcmdiYVswXSAvIDI1NTtcbiAgICB2YXIgRyA9IHJnYmFbMV0gLyAyNTU7XG4gICAgdmFyIEIgPSByZ2JhWzJdIC8gMjU1O1xuXG4gICAgdmFyIHZNaW4gPSBNYXRoLm1pbihSLCBHLCBCKTsgLy8gTWluLiB2YWx1ZSBvZiBSR0JcbiAgICB2YXIgdk1heCA9IE1hdGgubWF4KFIsIEcsIEIpOyAvLyBNYXguIHZhbHVlIG9mIFJHQlxuICAgIHZhciBkZWx0YSA9IHZNYXggLSB2TWluOyAvLyBEZWx0YSBSR0IgdmFsdWVcblxuICAgIHZhciBMID0gKHZNYXggKyB2TWluKSAvIDI7XG4gICAgdmFyIEg7XG4gICAgdmFyIFM7XG4gICAgLy8gSFNMIHJlc3VsdHMgZnJvbSAwIHRvIDFcbiAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgSCA9IDA7XG4gICAgICAgIFMgPSAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKEwgPCAwLjUpIHtcbiAgICAgICAgICAgIFMgPSBkZWx0YSAvICh2TWF4ICsgdk1pbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBTID0gZGVsdGEgLyAoMiAtIHZNYXggLSB2TWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWx0YVIgPSAoKCh2TWF4IC0gUikgLyA2KSArIChkZWx0YSAvIDIpKSAvIGRlbHRhO1xuICAgICAgICB2YXIgZGVsdGFHID0gKCgodk1heCAtIEcpIC8gNikgKyAoZGVsdGEgLyAyKSkgLyBkZWx0YTtcbiAgICAgICAgdmFyIGRlbHRhQiA9ICgoKHZNYXggLSBCKSAvIDYpICsgKGRlbHRhIC8gMikpIC8gZGVsdGE7XG5cbiAgICAgICAgaWYgKFIgPT09IHZNYXgpIHtcbiAgICAgICAgICAgIEggPSBkZWx0YUIgLSBkZWx0YUc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoRyA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgxIC8gMykgKyBkZWx0YVIgLSBkZWx0YUI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQiA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgyIC8gMykgKyBkZWx0YUcgLSBkZWx0YVI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSCA8IDApIHtcbiAgICAgICAgICAgIEggKz0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChIID4gMSkge1xuICAgICAgICAgICAgSCAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhzbGEgPSBbSCAqIDM2MCwgUywgTF07XG5cbiAgICBpZiAocmdiYVszXSAhPSBudWxsKSB7XG4gICAgICAgIGhzbGEucHVzaChyZ2JhWzNdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHNsYTtcbn1cblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3IubGlmdFxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gKiBAcGFyYW0ge251bWJlcn0gbGV2ZWxcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuY29sb3JVdGlsLmxpZnQgPSBmdW5jdGlvbiAoY29sb3IsIGxldmVsKSB7XG4gICAgdmFyIGNvbG9yQXJyID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yKTtcbiAgICBpZiAoY29sb3JBcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsZXZlbCA8IDApIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9IGNvbG9yQXJyW2ldICogKDEgLSBsZXZlbCkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29sb3JBcnJbaV0gPSAoKDI1NSAtIGNvbG9yQXJyW2ldKSAqIGxldmVsICsgY29sb3JBcnJbaV0pIHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3JVdGlsLnN0cmluZ2lmeShjb2xvckFyciwgY29sb3JBcnIubGVuZ3RoID09PSA0ID8gJ3JnYmEnIDogJ3JnYicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3IudG9IZXhcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5jb2xvclV0aWwudG9IZXggPSBmdW5jdGlvbiAoY29sb3IpIHtcbiAgICB2YXIgY29sb3JBcnIgPSBjb2xvclV0aWwucGFyc2UoY29sb3IpO1xuICAgIGlmIChjb2xvckFycikge1xuICAgICAgICByZXR1cm4gKCgxIDw8IDI0KSArIChjb2xvckFyclswXSA8PCAxNikgKyAoY29sb3JBcnJbMV0gPDwgOCkgKyAoK2NvbG9yQXJyWzJdKSkudG9TdHJpbmcoMTYpLnNsaWNlKDEpO1xuICAgIH1cbn07XG5cbi8qKlxuICogTWFwIHZhbHVlIHRvIGNvbG9yLiBGYXN0ZXIgdGhhbiBsZXJwIG1ldGhvZHMgYmVjYXVzZSBjb2xvciBpcyByZXByZXNlbnRlZCBieSByZ2JhIGFycmF5LlxuICogQG5hbWUgY2xheS5jb3JlLmNvbG9yXG4gKiBAcGFyYW0ge251bWJlcn0gbm9ybWFsaXplZFZhbHVlIEEgZmxvYXQgYmV0d2VlbiAwIGFuZCAxLlxuICogQHBhcmFtIHtBcnJheS48QXJyYXkuPG51bWJlcj4+fSBjb2xvcnMgTGlzdCBvZiByZ2JhIGNvbG9yIGFycmF5XG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBbb3V0XSBNYXBwZWQgZ2JhIGNvbG9yIGFycmF5XG4gKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn0gd2lsbCBiZSBudWxsL3VuZGVmaW5lZCBpZiBpbnB1dCBpbGxlZ2FsLlxuICovXG5jb2xvclV0aWwuZmFzdExlcnAgPSBmdW5jdGlvbiAobm9ybWFsaXplZFZhbHVlLCBjb2xvcnMsIG91dCkge1xuICAgIGlmICghKGNvbG9ycyAmJiBjb2xvcnMubGVuZ3RoKVxuICAgICAgICB8fCAhKG5vcm1hbGl6ZWRWYWx1ZSA+PSAwICYmIG5vcm1hbGl6ZWRWYWx1ZSA8PSAxKVxuICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgb3V0ID0gb3V0IHx8IFtdO1xuXG4gICAgdmFyIHZhbHVlID0gbm9ybWFsaXplZFZhbHVlICogKGNvbG9ycy5sZW5ndGggLSAxKTtcbiAgICB2YXIgbGVmdEluZGV4ID0gTWF0aC5mbG9vcih2YWx1ZSk7XG4gICAgdmFyIHJpZ2h0SW5kZXggPSBNYXRoLmNlaWwodmFsdWUpO1xuICAgIHZhciBsZWZ0Q29sb3IgPSBjb2xvcnNbbGVmdEluZGV4XTtcbiAgICB2YXIgcmlnaHRDb2xvciA9IGNvbG9yc1tyaWdodEluZGV4XTtcbiAgICB2YXIgZHYgPSB2YWx1ZSAtIGxlZnRJbmRleDtcbiAgICBvdXRbMF0gPSBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMF0sIHJpZ2h0Q29sb3JbMF0sIGR2KSk7XG4gICAgb3V0WzFdID0gY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzFdLCByaWdodENvbG9yWzFdLCBkdikpO1xuICAgIG91dFsyXSA9IGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsyXSwgcmlnaHRDb2xvclsyXSwgZHYpKTtcbiAgICBvdXRbM10gPSBjbGFtcENzc0Zsb2F0KGxlcnBOdW1iZXIobGVmdENvbG9yWzNdLCByaWdodENvbG9yWzNdLCBkdikpO1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuY29sb3JVdGlsLmZhc3RNYXBUb0NvbG9yID0gY29sb3JVdGlsLmZhc3RMZXJwO1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBub3JtYWxpemVkVmFsdWUgQSBmbG9hdCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBjb2xvcnMgQ29sb3IgbGlzdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGZ1bGxPdXRwdXQgRGVmYXVsdCBmYWxzZS5cbiAqIEByZXR1cm4geyhzdHJpbmd8T2JqZWN0KX0gUmVzdWx0IGNvbG9yLiBJZiBmdWxsT3V0cHV0LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2NvbG9yOiAuLi4sIGxlZnRJbmRleDogLi4uLCByaWdodEluZGV4OiAuLi4sIHZhbHVlOiAuLi59LFxuICovXG5jb2xvclV0aWwubGVycCA9IGZ1bmN0aW9uIChub3JtYWxpemVkVmFsdWUsIGNvbG9ycywgZnVsbE91dHB1dCkge1xuICAgIGlmICghKGNvbG9ycyAmJiBjb2xvcnMubGVuZ3RoKVxuICAgICAgICB8fCAhKG5vcm1hbGl6ZWRWYWx1ZSA+PSAwICYmIG5vcm1hbGl6ZWRWYWx1ZSA8PSAxKVxuICAgICkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlID0gbm9ybWFsaXplZFZhbHVlICogKGNvbG9ycy5sZW5ndGggLSAxKTtcbiAgICB2YXIgbGVmdEluZGV4ID0gTWF0aC5mbG9vcih2YWx1ZSk7XG4gICAgdmFyIHJpZ2h0SW5kZXggPSBNYXRoLmNlaWwodmFsdWUpO1xuICAgIHZhciBsZWZ0Q29sb3IgPSBjb2xvclV0aWwucGFyc2UoY29sb3JzW2xlZnRJbmRleF0pO1xuICAgIHZhciByaWdodENvbG9yID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yc1tyaWdodEluZGV4XSk7XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG5cbiAgICB2YXIgY29sb3IgPSBjb2xvclV0aWwuc3RyaW5naWZ5KFxuICAgICAgICBbXG4gICAgICAgICAgICBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMF0sIHJpZ2h0Q29sb3JbMF0sIGR2KSksXG4gICAgICAgICAgICBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMV0sIHJpZ2h0Q29sb3JbMV0sIGR2KSksXG4gICAgICAgICAgICBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMl0sIHJpZ2h0Q29sb3JbMl0sIGR2KSksXG4gICAgICAgICAgICBjbGFtcENzc0Zsb2F0KGxlcnBOdW1iZXIobGVmdENvbG9yWzNdLCByaWdodENvbG9yWzNdLCBkdikpXG4gICAgICAgIF0sXG4gICAgICAgICdyZ2JhJ1xuICAgICk7XG5cbiAgICByZXR1cm4gZnVsbE91dHB1dFxuICAgICAgICA/IHtcbiAgICAgICAgICAgIGNvbG9yOiBjb2xvcixcbiAgICAgICAgICAgIGxlZnRJbmRleDogbGVmdEluZGV4LFxuICAgICAgICAgICAgcmlnaHRJbmRleDogcmlnaHRJbmRleCxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICB9XG4gICAgICAgIDogY29sb3I7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqL1xuY29sb3JVdGlsLm1hcFRvQ29sb3IgPSBjb2xvclV0aWwubGVycDtcblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNvcmUuY29sb3JcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHBhcmFtIHtudW1iZXI9fSBoIDAgfiAzNjAsIGlnbm9yZSB3aGVuIG51bGwuXG4gKiBAcGFyYW0ge251bWJlcj19IHMgMCB+IDEsIGlnbm9yZSB3aGVuIG51bGwuXG4gKiBAcGFyYW0ge251bWJlcj19IGwgMCB+IDEsIGlnbm9yZSB3aGVuIG51bGwuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENvbG9yIHN0cmluZyBpbiByZ2JhIGZvcm1hdC5cbiAqL1xuY29sb3JVdGlsLm1vZGlmeUhTTCA9IGZ1bmN0aW9uIChjb2xvciwgaCwgcywgbCkge1xuICAgIGNvbG9yID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yKTtcblxuICAgIGlmIChjb2xvcikge1xuICAgICAgICBjb2xvciA9IHJnYmEyaHNsYShjb2xvcik7XG4gICAgICAgIGggIT0gbnVsbCAmJiAoY29sb3JbMF0gPSBjbGFtcENzc0FuZ2xlKGgpKTtcbiAgICAgICAgcyAhPSBudWxsICYmIChjb2xvclsxXSA9IHBhcnNlQ3NzRmxvYXQocykpO1xuICAgICAgICBsICE9IG51bGwgJiYgKGNvbG9yWzJdID0gcGFyc2VDc3NGbG9hdChsKSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbG9yVXRpbC5zdHJpbmdpZnkoaHNsYTJyZ2JhKGNvbG9yKSwgJ3JnYmEnKTtcbiAgICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gKiBAcGFyYW0ge251bWJlcj19IGFscGhhIDAgfiAxXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENvbG9yIHN0cmluZyBpbiByZ2JhIGZvcm1hdC5cbiAqL1xuY29sb3JVdGlsLm1vZGlmeUFscGhhID0gZnVuY3Rpb24gKGNvbG9yLCBhbHBoYSkge1xuICAgIGNvbG9yID0gY29sb3JVdGlsLnBhcnNlKGNvbG9yKTtcblxuICAgIGlmIChjb2xvciAmJiBhbHBoYSAhPSBudWxsKSB7XG4gICAgICAgIGNvbG9yWzNdID0gY2xhbXBDc3NGbG9hdChhbHBoYSk7XG4gICAgICAgIHJldHVybiBjb2xvclV0aWwuc3RyaW5naWZ5KGNvbG9yLCAncmdiYScpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBhcnJDb2xvciBsaWtlIFsxMiwzMyw0NCwwLjRdXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAncmdiYScsICdoc3ZhJywgLi4uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJlc3VsdCBjb2xvci4gKElmIGlucHV0IGlsbGVnYWwsIHJldHVybiB1bmRlZmluZWQpLlxuICovXG5jb2xvclV0aWwuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKGFyckNvbG9yLCB0eXBlKSB7XG4gICAgaWYgKCFhcnJDb2xvciB8fCAhYXJyQ29sb3IubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvbG9yU3RyID0gYXJyQ29sb3JbMF0gKyAnLCcgKyBhcnJDb2xvclsxXSArICcsJyArIGFyckNvbG9yWzJdO1xuICAgIGlmICh0eXBlID09PSAncmdiYScgfHwgdHlwZSA9PT0gJ2hzdmEnIHx8IHR5cGUgPT09ICdoc2xhJykge1xuICAgICAgICBjb2xvclN0ciArPSAnLCcgKyBhcnJDb2xvclszXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgKyAnKCcgKyBjb2xvclN0ciArICcpJztcbn07XG5cblxuXG5leHBvcnQgZGVmYXVsdCBjb2xvclV0aWw7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDQ5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///49\n");

/***/ }),
/* 50 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.prez.vertex\\n#define SHADER_NAME prez\\nuniform mat4 WVP : WORLDVIEWPROJECTION;\\nattribute vec3 pos : POSITION;\\nattribute vec2 uv : TEXCOORD_0;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n vec4 P = vec4(pos, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n gl_Position = WVP * P;\\n v_Texcoord = uv * uvRepeat + uvOffset;\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.prez.fragment\\nuniform sampler2D alphaMap;\\nuniform float alphaCutoff: 0.0;\\n@import clay.util.logdepth_fragment_header\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n if (alphaCutoff > 0.0) {\\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\\n discard;\\n }\\n }\\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvcHJlei5nbHNsLmpzPzg4MDQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkucHJlei52ZXJ0ZXhcXG4jZGVmaW5lIFNIQURFUl9OQU1FIHByZXpcXG51bmlmb3JtIG1hdDQgV1ZQIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3MgOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMiB1diA6IFRFWENPT1JEXzA7XFxudW5pZm9ybSB2ZWMyIHV2UmVwZWF0IDogWzEuMCwgMS4wXTtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQgOiBbMC4wLCAwLjBdO1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfaGVhZGVyXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgUCA9IHZlYzQocG9zLCAxLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gUCA9IHNraW5NYXRyaXhXUyAqIFA7XFxuI2VuZGlmXFxuI2lmZGVmIElOU1RBTkNJTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLmluc3RhbmNpbmdfbWF0cml4XFxuIFAgPSBpbnN0YW5jZU1hdCAqIFA7XFxuI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gV1ZQICogUDtcXG4gdl9UZXhjb29yZCA9IHV2ICogdXZSZXBlYXQgKyB1dk9mZnNldDtcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X21haW5cXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5wcmV6LmZyYWdtZW50XFxudW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC4wO1xcbkBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X2hlYWRlclxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZvaWQgbWFpbigpXFxue1xcbiBpZiAoYWxwaGFDdXRvZmYgPiAwLjApIHtcXG4gaWYgKHRleHR1cmUyRChhbHBoYU1hcCwgdl9UZXhjb29yZCkuYSA8PSBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgwLjAsMC4wLDAuMCwxLjApO1xcbiBAaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF9mcmFnbWVudF9tYWluXFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3ByZXouZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///50\n");

/***/ }),
/* 51 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__calcAmbientSHLight_glsl_js__ = __webpack_require__(133);\n\n\nvar uniformVec3Prefix = 'uniform vec3 ';\nvar uniformFloatPrefix = 'uniform float ';\nvar exportHeaderPrefix = '@export clay.header.';\nvar exportEnd = '@end';\nvar unconfigurable = ':unconfigurable;';\n/* harmony default export */ __webpack_exports__[\"a\"] = ([\n    exportHeaderPrefix + 'directional_light',\n    uniformVec3Prefix + 'directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'directionalLightColor[DIRECTIONAL_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_light',\n    uniformVec3Prefix + 'ambientLightColor[AMBIENT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_sh_light',\n    uniformVec3Prefix + 'ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]' + unconfigurable,\n    __WEBPACK_IMPORTED_MODULE_0__calcAmbientSHLight_glsl_js__[\"a\" /* default */],\n    exportEnd,\n\n    exportHeaderPrefix + 'ambient_cubemap_light',\n    uniformVec3Prefix + 'ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    'uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    'uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'point_light',\n    uniformVec3Prefix + 'pointLightPosition[POINT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'pointLightRange[POINT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'pointLightColor[POINT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd,\n\n    exportHeaderPrefix + 'spot_light',\n    uniformVec3Prefix + 'spotLightPosition[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'spotLightDirection[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightRange[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformFloatPrefix + 'spotLightFalloffFactor[SPOT_LIGHT_COUNT]' + unconfigurable,\n    uniformVec3Prefix + 'spotLightColor[SPOT_LIGHT_COUNT]' + unconfigurable,\n    exportEnd\n].join('\\n'));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvaGVhZGVyL2xpZ2h0LmpzP2YwNDYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNhbGNBbWJpZW50U0hMaWdodEVzc2wgZnJvbSAnLi9jYWxjQW1iaWVudFNITGlnaHQuZ2xzbC5qcyc7XG5cbnZhciB1bmlmb3JtVmVjM1ByZWZpeCA9ICd1bmlmb3JtIHZlYzMgJztcbnZhciB1bmlmb3JtRmxvYXRQcmVmaXggPSAndW5pZm9ybSBmbG9hdCAnO1xudmFyIGV4cG9ydEhlYWRlclByZWZpeCA9ICdAZXhwb3J0IGNsYXkuaGVhZGVyLic7XG52YXIgZXhwb3J0RW5kID0gJ0BlbmQnO1xudmFyIHVuY29uZmlndXJhYmxlID0gJzp1bmNvbmZpZ3VyYWJsZTsnO1xuZXhwb3J0IGRlZmF1bHQgW1xuICAgIGV4cG9ydEhlYWRlclByZWZpeCArICdkaXJlY3Rpb25hbF9saWdodCcsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnZGlyZWN0aW9uYWxMaWdodERpcmVjdGlvbltESVJFQ1RJT05BTF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnZGlyZWN0aW9uYWxMaWdodENvbG9yW0RJUkVDVElPTkFMX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICBleHBvcnRFbmQsXG5cbiAgICBleHBvcnRIZWFkZXJQcmVmaXggKyAnYW1iaWVudF9saWdodCcsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnYW1iaWVudExpZ2h0Q29sb3JbQU1CSUVOVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgZXhwb3J0RW5kLFxuXG4gICAgZXhwb3J0SGVhZGVyUHJlZml4ICsgJ2FtYmllbnRfc2hfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ2FtYmllbnRTSExpZ2h0Q29sb3JbQU1CSUVOVF9TSF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbQU1CSUVOVF9TSF9MSUdIVF9DT1VOVCAqIDldJyArIHVuY29uZmlndXJhYmxlLFxuICAgIGNhbGNBbWJpZW50U0hMaWdodEVzc2wsXG4gICAgZXhwb3J0RW5kLFxuXG4gICAgZXhwb3J0SGVhZGVyUHJlZml4ICsgJ2FtYmllbnRfY3ViZW1hcF9saWdodCcsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnYW1iaWVudEN1YmVtYXBMaWdodENvbG9yW0FNQklFTlRfQ1VCRU1BUF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgJ3VuaWZvcm0gc2FtcGxlckN1YmUgYW1iaWVudEN1YmVtYXBMaWdodEN1YmVtYXBbQU1CSUVOVF9DVUJFTUFQX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICAndW5pZm9ybSBzYW1wbGVyMkQgYW1iaWVudEN1YmVtYXBMaWdodEJSREZMb29rdXBbQU1CSUVOVF9DVUJFTUFQX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICBleHBvcnRFbmQsXG5cbiAgICBleHBvcnRIZWFkZXJQcmVmaXggKyAncG9pbnRfbGlnaHQnLFxuICAgIHVuaWZvcm1WZWMzUHJlZml4ICsgJ3BvaW50TGlnaHRQb3NpdGlvbltQT0lOVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybUZsb2F0UHJlZml4ICsgJ3BvaW50TGlnaHRSYW5nZVtQT0lOVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAncG9pbnRMaWdodENvbG9yW1BPSU5UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICBleHBvcnRFbmQsXG5cbiAgICBleHBvcnRIZWFkZXJQcmVmaXggKyAnc3BvdF9saWdodCcsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnc3BvdExpZ2h0UG9zaXRpb25bU1BPVF9MSUdIVF9DT1VOVF0nICsgdW5jb25maWd1cmFibGUsXG4gICAgdW5pZm9ybVZlYzNQcmVmaXggKyAnc3BvdExpZ2h0RGlyZWN0aW9uW1NQT1RfTElHSFRfQ09VTlRdJyArIHVuY29uZmlndXJhYmxlLFxuICAgIHVuaWZvcm1GbG9hdFByZWZpeCArICdzcG90TGlnaHRSYW5nZVtTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICB1bmlmb3JtRmxvYXRQcmVmaXggKyAnc3BvdExpZ2h0VW1icmFBbmdsZUNvc2luZVtTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICB1bmlmb3JtRmxvYXRQcmVmaXggKyAnc3BvdExpZ2h0UGVudW1icmFBbmdsZUNvc2luZVtTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICB1bmlmb3JtRmxvYXRQcmVmaXggKyAnc3BvdExpZ2h0RmFsbG9mZkZhY3RvcltTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICB1bmlmb3JtVmVjM1ByZWZpeCArICdzcG90TGlnaHRDb2xvcltTUE9UX0xJR0hUX0NPVU5UXScgKyB1bmNvbmZpZ3VyYWJsZSxcbiAgICBleHBvcnRFbmRcbl0uam9pbignXFxuJyk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9oZWFkZXIvbGlnaHQuanNcbi8vIG1vZHVsZSBpZCA9IDUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///51\n");

/***/ }),
/* 52 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\nvar vec3Set = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].set;\nvar vec3Copy = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy;\nvar vec3TranformMat4 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].transformMat4;\nvar mathMin = Math.min;\nvar mathMax = Math.max;\n/**\n * @constructor\n * @alias clay.Frustum\n */\nvar Frustum = function() {\n\n    /**\n     * Eight planes to enclose the frustum\n     * @type {clay.Plane[]}\n     */\n    this.planes = [];\n\n    for (var i = 0; i < 6; i++) {\n        this.planes.push(new __WEBPACK_IMPORTED_MODULE_1__Plane__[\"a\" /* default */]());\n    }\n\n    /**\n     * Bounding box of frustum\n     * @type {clay.BoundingBox}\n     */\n    this.boundingBox = new __WEBPACK_IMPORTED_MODULE_0__BoundingBox__[\"a\" /* default */]();\n\n    /**\n     * Eight vertices of frustum\n     * @type {Float32Array[]}\n     */\n    this.vertices = [];\n    for (var i = 0; i < 8; i++) {\n        this.vertices[i] = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, 0, 0);\n    }\n};\n\nFrustum.prototype = {\n\n    // http://web.archive.org/web/20120531231005/http://crazyjoke.free.fr/doc/3D/plane%20extraction.pdf\n    /**\n     * Set frustum from a projection matrix\n     * @param {clay.Matrix4} projectionMatrix\n     */\n    setFromProjection: function(projectionMatrix) {\n\n        var planes = this.planes;\n        var m = projectionMatrix.array;\n        var m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3];\n        var m4 = m[4], m5 = m[5], m6 = m[6], m7 = m[7];\n        var m8 = m[8], m9 = m[9], m10 = m[10], m11 = m[11];\n        var m12 = m[12], m13 = m[13], m14 = m[14], m15 = m[15];\n\n        // Update planes\n        vec3Set(planes[0].normal.array, m3 - m0, m7 - m4, m11 - m8);\n        planes[0].distance = -(m15 - m12);\n        planes[0].normalize();\n\n        vec3Set(planes[1].normal.array, m3 + m0, m7 + m4, m11 + m8);\n        planes[1].distance = -(m15 + m12);\n        planes[1].normalize();\n\n        vec3Set(planes[2].normal.array, m3 + m1, m7 + m5, m11 + m9);\n        planes[2].distance = -(m15 + m13);\n        planes[2].normalize();\n\n        vec3Set(planes[3].normal.array, m3 - m1, m7 - m5, m11 - m9);\n        planes[3].distance = -(m15 - m13);\n        planes[3].normalize();\n\n        vec3Set(planes[4].normal.array, m3 - m2, m7 - m6, m11 - m10);\n        planes[4].distance = -(m15 - m14);\n        planes[4].normalize();\n\n        vec3Set(planes[5].normal.array, m3 + m2, m7 + m6, m11 + m10);\n        planes[5].distance = -(m15 + m14);\n        planes[5].normalize();\n\n        // Perspective projection\n        var boundingBox = this.boundingBox;\n        var vertices = this.vertices;\n        if (m15 === 0)  {\n            var aspect = m5 / m0;\n            var zNear = -m14 / (m10 - 1);\n            var zFar = -m14 / (m10 + 1);\n            var farY = -zFar / m5;\n            var nearY = -zNear / m5;\n            // Update bounding box\n            boundingBox.min.set(-farY * aspect, -farY, zFar);\n            boundingBox.max.set(farY * aspect, farY, zNear);\n            // update vertices\n            //--- min z\n            // min x\n            vec3Set(vertices[0], -farY * aspect, -farY, zFar);\n            vec3Set(vertices[1], -farY * aspect, farY, zFar);\n            // max x\n            vec3Set(vertices[2], farY * aspect, -farY, zFar);\n            vec3Set(vertices[3], farY * aspect, farY, zFar);\n            //-- max z\n            vec3Set(vertices[4], -nearY * aspect, -nearY, zNear);\n            vec3Set(vertices[5], -nearY * aspect, nearY, zNear);\n            vec3Set(vertices[6], nearY * aspect, -nearY, zNear);\n            vec3Set(vertices[7], nearY * aspect, nearY, zNear);\n        }\n        else { // Orthographic projection\n            var left = (-1 - m12) / m0;\n            var right = (1 - m12) / m0;\n            var top = (1 - m13) / m5;\n            var bottom = (-1 - m13) / m5;\n            var near = (-1 - m14) / m10;\n            var far = (1 - m14) / m10;\n\n\n            boundingBox.min.set(Math.min(left, right), Math.min(bottom, top), Math.min(far, near));\n            boundingBox.max.set(Math.max(right, left), Math.max(top, bottom), Math.max(near, far));\n\n            var min = boundingBox.min.array;\n            var max = boundingBox.max.array;\n            //--- min z\n            // min x\n            vec3Set(vertices[0], min[0], min[1], min[2]);\n            vec3Set(vertices[1], min[0], max[1], min[2]);\n            // max x\n            vec3Set(vertices[2], max[0], min[1], min[2]);\n            vec3Set(vertices[3], max[0], max[1], min[2]);\n            //-- max z\n            vec3Set(vertices[4], min[0], min[1], max[2]);\n            vec3Set(vertices[5], min[0], max[1], max[2]);\n            vec3Set(vertices[6], max[0], min[1], max[2]);\n            vec3Set(vertices[7], max[0], max[1], max[2]);\n        }\n    },\n\n    /**\n     * Apply a affine transform matrix and set to the given bounding box\n     * @function\n     * @param {clay.BoundingBox}\n     * @param {clay.Matrix4}\n     * @return {clay.BoundingBox}\n     */\n    getTransformedBoundingBox: (function() {\n\n        var tmpVec3 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create();\n\n        return function(bbox, matrix) {\n            var vertices = this.vertices;\n\n            var m4 = matrix.array;\n            var min = bbox.min;\n            var max = bbox.max;\n            var minArr = min.array;\n            var maxArr = max.array;\n            var v = vertices[0];\n            vec3TranformMat4(tmpVec3, v, m4);\n            vec3Copy(minArr, tmpVec3);\n            vec3Copy(maxArr, tmpVec3);\n\n            for (var i = 1; i < 8; i++) {\n                v = vertices[i];\n                vec3TranformMat4(tmpVec3, v, m4);\n\n                minArr[0] = mathMin(tmpVec3[0], minArr[0]);\n                minArr[1] = mathMin(tmpVec3[1], minArr[1]);\n                minArr[2] = mathMin(tmpVec3[2], minArr[2]);\n\n                maxArr[0] = mathMax(tmpVec3[0], maxArr[0]);\n                maxArr[1] = mathMax(tmpVec3[1], maxArr[1]);\n                maxArr[2] = mathMax(tmpVec3[2], maxArr[2]);\n            }\n\n            min._dirty = true;\n            max._dirty = true;\n\n            return bbox;\n        };\n    }) ()\n};\n/* harmony default export */ __webpack_exports__[\"a\"] = (Frustum);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvRnJ1c3R1bS5qcz9iYTRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuL0JvdW5kaW5nQm94JztcbmltcG9ydCBQbGFuZSBmcm9tICcuL1BsYW5lJztcblxuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbnZhciB2ZWMzU2V0ID0gdmVjMy5zZXQ7XG52YXIgdmVjM0NvcHkgPSB2ZWMzLmNvcHk7XG52YXIgdmVjM1RyYW5mb3JtTWF0NCA9IHZlYzMudHJhbnNmb3JtTWF0NDtcbnZhciBtYXRoTWluID0gTWF0aC5taW47XG52YXIgbWF0aE1heCA9IE1hdGgubWF4O1xuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LkZydXN0dW1cbiAqL1xudmFyIEZydXN0dW0gPSBmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIEVpZ2h0IHBsYW5lcyB0byBlbmNsb3NlIHRoZSBmcnVzdHVtXG4gICAgICogQHR5cGUge2NsYXkuUGxhbmVbXX1cbiAgICAgKi9cbiAgICB0aGlzLnBsYW5lcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgdGhpcy5wbGFuZXMucHVzaChuZXcgUGxhbmUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQm91bmRpbmcgYm94IG9mIGZydXN0dW1cbiAgICAgKiBAdHlwZSB7Y2xheS5Cb3VuZGluZ0JveH1cbiAgICAgKi9cbiAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG5cbiAgICAvKipcbiAgICAgKiBFaWdodCB2ZXJ0aWNlcyBvZiBmcnVzdHVtXG4gICAgICogQHR5cGUge0Zsb2F0MzJBcnJheVtdfVxuICAgICAqL1xuICAgIHRoaXMudmVydGljZXMgPSBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICB0aGlzLnZlcnRpY2VzW2ldID0gdmVjMy5mcm9tVmFsdWVzKDAsIDAsIDApO1xuICAgIH1cbn07XG5cbkZydXN0dW0ucHJvdG90eXBlID0ge1xuXG4gICAgLy8gaHR0cDovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMjA1MzEyMzEwMDUvaHR0cDovL2NyYXp5am9rZS5mcmVlLmZyL2RvYy8zRC9wbGFuZSUyMGV4dHJhY3Rpb24ucGRmXG4gICAgLyoqXG4gICAgICogU2V0IGZydXN0dW0gZnJvbSBhIHByb2plY3Rpb24gbWF0cml4XG4gICAgICogQHBhcmFtIHtjbGF5Lk1hdHJpeDR9IHByb2plY3Rpb25NYXRyaXhcbiAgICAgKi9cbiAgICBzZXRGcm9tUHJvamVjdGlvbjogZnVuY3Rpb24ocHJvamVjdGlvbk1hdHJpeCkge1xuXG4gICAgICAgIHZhciBwbGFuZXMgPSB0aGlzLnBsYW5lcztcbiAgICAgICAgdmFyIG0gPSBwcm9qZWN0aW9uTWF0cml4LmFycmF5O1xuICAgICAgICB2YXIgbTAgPSBtWzBdLCBtMSA9IG1bMV0sIG0yID0gbVsyXSwgbTMgPSBtWzNdO1xuICAgICAgICB2YXIgbTQgPSBtWzRdLCBtNSA9IG1bNV0sIG02ID0gbVs2XSwgbTcgPSBtWzddO1xuICAgICAgICB2YXIgbTggPSBtWzhdLCBtOSA9IG1bOV0sIG0xMCA9IG1bMTBdLCBtMTEgPSBtWzExXTtcbiAgICAgICAgdmFyIG0xMiA9IG1bMTJdLCBtMTMgPSBtWzEzXSwgbTE0ID0gbVsxNF0sIG0xNSA9IG1bMTVdO1xuXG4gICAgICAgIC8vIFVwZGF0ZSBwbGFuZXNcbiAgICAgICAgdmVjM1NldChwbGFuZXNbMF0ubm9ybWFsLmFycmF5LCBtMyAtIG0wLCBtNyAtIG00LCBtMTEgLSBtOCk7XG4gICAgICAgIHBsYW5lc1swXS5kaXN0YW5jZSA9IC0obTE1IC0gbTEyKTtcbiAgICAgICAgcGxhbmVzWzBdLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIHZlYzNTZXQocGxhbmVzWzFdLm5vcm1hbC5hcnJheSwgbTMgKyBtMCwgbTcgKyBtNCwgbTExICsgbTgpO1xuICAgICAgICBwbGFuZXNbMV0uZGlzdGFuY2UgPSAtKG0xNSArIG0xMik7XG4gICAgICAgIHBsYW5lc1sxXS5ub3JtYWxpemUoKTtcblxuICAgICAgICB2ZWMzU2V0KHBsYW5lc1syXS5ub3JtYWwuYXJyYXksIG0zICsgbTEsIG03ICsgbTUsIG0xMSArIG05KTtcbiAgICAgICAgcGxhbmVzWzJdLmRpc3RhbmNlID0gLShtMTUgKyBtMTMpO1xuICAgICAgICBwbGFuZXNbMl0ubm9ybWFsaXplKCk7XG5cbiAgICAgICAgdmVjM1NldChwbGFuZXNbM10ubm9ybWFsLmFycmF5LCBtMyAtIG0xLCBtNyAtIG01LCBtMTEgLSBtOSk7XG4gICAgICAgIHBsYW5lc1szXS5kaXN0YW5jZSA9IC0obTE1IC0gbTEzKTtcbiAgICAgICAgcGxhbmVzWzNdLm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIHZlYzNTZXQocGxhbmVzWzRdLm5vcm1hbC5hcnJheSwgbTMgLSBtMiwgbTcgLSBtNiwgbTExIC0gbTEwKTtcbiAgICAgICAgcGxhbmVzWzRdLmRpc3RhbmNlID0gLShtMTUgLSBtMTQpO1xuICAgICAgICBwbGFuZXNbNF0ubm9ybWFsaXplKCk7XG5cbiAgICAgICAgdmVjM1NldChwbGFuZXNbNV0ubm9ybWFsLmFycmF5LCBtMyArIG0yLCBtNyArIG02LCBtMTEgKyBtMTApO1xuICAgICAgICBwbGFuZXNbNV0uZGlzdGFuY2UgPSAtKG0xNSArIG0xNCk7XG4gICAgICAgIHBsYW5lc1s1XS5ub3JtYWxpemUoKTtcblxuICAgICAgICAvLyBQZXJzcGVjdGl2ZSBwcm9qZWN0aW9uXG4gICAgICAgIHZhciBib3VuZGluZ0JveCA9IHRoaXMuYm91bmRpbmdCb3g7XG4gICAgICAgIHZhciB2ZXJ0aWNlcyA9IHRoaXMudmVydGljZXM7XG4gICAgICAgIGlmIChtMTUgPT09IDApICB7XG4gICAgICAgICAgICB2YXIgYXNwZWN0ID0gbTUgLyBtMDtcbiAgICAgICAgICAgIHZhciB6TmVhciA9IC1tMTQgLyAobTEwIC0gMSk7XG4gICAgICAgICAgICB2YXIgekZhciA9IC1tMTQgLyAobTEwICsgMSk7XG4gICAgICAgICAgICB2YXIgZmFyWSA9IC16RmFyIC8gbTU7XG4gICAgICAgICAgICB2YXIgbmVhclkgPSAtek5lYXIgLyBtNTtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBib3VuZGluZyBib3hcbiAgICAgICAgICAgIGJvdW5kaW5nQm94Lm1pbi5zZXQoLWZhclkgKiBhc3BlY3QsIC1mYXJZLCB6RmFyKTtcbiAgICAgICAgICAgIGJvdW5kaW5nQm94Lm1heC5zZXQoZmFyWSAqIGFzcGVjdCwgZmFyWSwgek5lYXIpO1xuICAgICAgICAgICAgLy8gdXBkYXRlIHZlcnRpY2VzXG4gICAgICAgICAgICAvLy0tLSBtaW4gelxuICAgICAgICAgICAgLy8gbWluIHhcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbMF0sIC1mYXJZICogYXNwZWN0LCAtZmFyWSwgekZhcik7XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzFdLCAtZmFyWSAqIGFzcGVjdCwgZmFyWSwgekZhcik7XG4gICAgICAgICAgICAvLyBtYXggeFxuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1syXSwgZmFyWSAqIGFzcGVjdCwgLWZhclksIHpGYXIpO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1szXSwgZmFyWSAqIGFzcGVjdCwgZmFyWSwgekZhcik7XG4gICAgICAgICAgICAvLy0tIG1heCB6XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzRdLCAtbmVhclkgKiBhc3BlY3QsIC1uZWFyWSwgek5lYXIpO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s1XSwgLW5lYXJZICogYXNwZWN0LCBuZWFyWSwgek5lYXIpO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s2XSwgbmVhclkgKiBhc3BlY3QsIC1uZWFyWSwgek5lYXIpO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s3XSwgbmVhclkgKiBhc3BlY3QsIG5lYXJZLCB6TmVhcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7IC8vIE9ydGhvZ3JhcGhpYyBwcm9qZWN0aW9uXG4gICAgICAgICAgICB2YXIgbGVmdCA9ICgtMSAtIG0xMikgLyBtMDtcbiAgICAgICAgICAgIHZhciByaWdodCA9ICgxIC0gbTEyKSAvIG0wO1xuICAgICAgICAgICAgdmFyIHRvcCA9ICgxIC0gbTEzKSAvIG01O1xuICAgICAgICAgICAgdmFyIGJvdHRvbSA9ICgtMSAtIG0xMykgLyBtNTtcbiAgICAgICAgICAgIHZhciBuZWFyID0gKC0xIC0gbTE0KSAvIG0xMDtcbiAgICAgICAgICAgIHZhciBmYXIgPSAoMSAtIG0xNCkgLyBtMTA7XG5cblxuICAgICAgICAgICAgYm91bmRpbmdCb3gubWluLnNldChNYXRoLm1pbihsZWZ0LCByaWdodCksIE1hdGgubWluKGJvdHRvbSwgdG9wKSwgTWF0aC5taW4oZmFyLCBuZWFyKSk7XG4gICAgICAgICAgICBib3VuZGluZ0JveC5tYXguc2V0KE1hdGgubWF4KHJpZ2h0LCBsZWZ0KSwgTWF0aC5tYXgodG9wLCBib3R0b20pLCBNYXRoLm1heChuZWFyLCBmYXIpKTtcblxuICAgICAgICAgICAgdmFyIG1pbiA9IGJvdW5kaW5nQm94Lm1pbi5hcnJheTtcbiAgICAgICAgICAgIHZhciBtYXggPSBib3VuZGluZ0JveC5tYXguYXJyYXk7XG4gICAgICAgICAgICAvLy0tLSBtaW4gelxuICAgICAgICAgICAgLy8gbWluIHhcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbMF0sIG1pblswXSwgbWluWzFdLCBtaW5bMl0pO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1sxXSwgbWluWzBdLCBtYXhbMV0sIG1pblsyXSk7XG4gICAgICAgICAgICAvLyBtYXggeFxuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1syXSwgbWF4WzBdLCBtaW5bMV0sIG1pblsyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzNdLCBtYXhbMF0sIG1heFsxXSwgbWluWzJdKTtcbiAgICAgICAgICAgIC8vLS0gbWF4IHpcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbNF0sIG1pblswXSwgbWluWzFdLCBtYXhbMl0pO1xuICAgICAgICAgICAgdmVjM1NldCh2ZXJ0aWNlc1s1XSwgbWluWzBdLCBtYXhbMV0sIG1heFsyXSk7XG4gICAgICAgICAgICB2ZWMzU2V0KHZlcnRpY2VzWzZdLCBtYXhbMF0sIG1pblsxXSwgbWF4WzJdKTtcbiAgICAgICAgICAgIHZlYzNTZXQodmVydGljZXNbN10sIG1heFswXSwgbWF4WzFdLCBtYXhbMl0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgYWZmaW5lIHRyYW5zZm9ybSBtYXRyaXggYW5kIHNldCB0byB0aGUgZ2l2ZW4gYm91bmRpbmcgYm94XG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHBhcmFtIHtjbGF5LkJvdW5kaW5nQm94fVxuICAgICAqIEBwYXJhbSB7Y2xheS5NYXRyaXg0fVxuICAgICAqIEByZXR1cm4ge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICovXG4gICAgZ2V0VHJhbnNmb3JtZWRCb3VuZGluZ0JveDogKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciB0bXBWZWMzID0gdmVjMy5jcmVhdGUoKTtcblxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oYmJveCwgbWF0cml4KSB7XG4gICAgICAgICAgICB2YXIgdmVydGljZXMgPSB0aGlzLnZlcnRpY2VzO1xuXG4gICAgICAgICAgICB2YXIgbTQgPSBtYXRyaXguYXJyYXk7XG4gICAgICAgICAgICB2YXIgbWluID0gYmJveC5taW47XG4gICAgICAgICAgICB2YXIgbWF4ID0gYmJveC5tYXg7XG4gICAgICAgICAgICB2YXIgbWluQXJyID0gbWluLmFycmF5O1xuICAgICAgICAgICAgdmFyIG1heEFyciA9IG1heC5hcnJheTtcbiAgICAgICAgICAgIHZhciB2ID0gdmVydGljZXNbMF07XG4gICAgICAgICAgICB2ZWMzVHJhbmZvcm1NYXQ0KHRtcFZlYzMsIHYsIG00KTtcbiAgICAgICAgICAgIHZlYzNDb3B5KG1pbkFyciwgdG1wVmVjMyk7XG4gICAgICAgICAgICB2ZWMzQ29weShtYXhBcnIsIHRtcFZlYzMpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgIHYgPSB2ZXJ0aWNlc1tpXTtcbiAgICAgICAgICAgICAgICB2ZWMzVHJhbmZvcm1NYXQ0KHRtcFZlYzMsIHYsIG00KTtcblxuICAgICAgICAgICAgICAgIG1pbkFyclswXSA9IG1hdGhNaW4odG1wVmVjM1swXSwgbWluQXJyWzBdKTtcbiAgICAgICAgICAgICAgICBtaW5BcnJbMV0gPSBtYXRoTWluKHRtcFZlYzNbMV0sIG1pbkFyclsxXSk7XG4gICAgICAgICAgICAgICAgbWluQXJyWzJdID0gbWF0aE1pbih0bXBWZWMzWzJdLCBtaW5BcnJbMl0pO1xuXG4gICAgICAgICAgICAgICAgbWF4QXJyWzBdID0gbWF0aE1heCh0bXBWZWMzWzBdLCBtYXhBcnJbMF0pO1xuICAgICAgICAgICAgICAgIG1heEFyclsxXSA9IG1hdGhNYXgodG1wVmVjM1sxXSwgbWF4QXJyWzFdKTtcbiAgICAgICAgICAgICAgICBtYXhBcnJbMl0gPSBtYXRoTWF4KHRtcFZlYzNbMl0sIG1heEFyclsyXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG1pbi5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgbWF4Ll9kaXJ0eSA9IHRydWU7XG5cbiAgICAgICAgICAgIHJldHVybiBiYm94O1xuICAgICAgICB9O1xuICAgIH0pICgpXG59O1xuZXhwb3J0IGRlZmF1bHQgRnJ1c3R1bTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL0ZydXN0dW0uanNcbi8vIG1vZHVsZSBpZCA9IDUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///52\n");

/***/ }),
/* 53 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__ = __webpack_require__(31);\n\n\n\n\n\n/**\n * @constructor\n * @alias clay.Plane\n * @param {clay.Vector3} [normal]\n * @param {number} [distance]\n */\nvar Plane = function(normal, distance) {\n    /**\n     * Normal of the plane\n     * @type {clay.Vector3}\n     */\n    this.normal = normal || new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */](0, 1, 0);\n\n    /**\n     * Constant of the plane equation, used as distance to the origin\n     * @type {number}\n     */\n    this.distance = distance || 0;\n};\n\nPlane.prototype = {\n\n    constructor: Plane,\n\n    /**\n     * Distance from a given point to the plane\n     * @param  {clay.Vector3} point\n     * @return {number}\n     */\n    distanceToPoint: function(point) {\n        return __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(point.array, this.normal.array) - this.distance;\n    },\n\n    /**\n     * Calculate the projection point on the plane\n     * @param  {clay.Vector3} point\n     * @param  {clay.Vector3} out\n     * @return {clay.Vector3}\n     */\n    projectPoint: function(point, out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        var d = this.distanceToPoint(point);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, point.array, this.normal.array, -d);\n        out._dirty = true;\n        return out;\n    },\n\n    /**\n     * Normalize the plane's normal and calculate the distance\n     */\n    normalize: function() {\n        var invLen = 1 / __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].len(this.normal.array);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scale(this.normal.array, invLen);\n        this.distance *= invLen;\n    },\n\n    /**\n     * If the plane intersect a frustum\n     * @param  {clay.Frustum} Frustum\n     * @return {boolean}\n     */\n    intersectFrustum: function(frustum) {\n        // Check if all coords of frustum is on plane all under plane\n        var coords = frustum.vertices;\n        var normal = this.normal.array;\n        var onPlane = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(coords[0].array, normal) > this.distance;\n        for (var i = 1; i < 8; i++) {\n            if ((__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(coords[i].array, normal) > this.distance) != onPlane) {\n                return true;\n            }\n        }\n    },\n\n    /**\n     * Calculate the intersection point between plane and a given line\n     * @function\n     * @param {clay.Vector3} start start point of line\n     * @param {clay.Vector3} end end point of line\n     * @param {clay.Vector3} [out]\n     * @return {clay.Vector3}\n     */\n    intersectLine: (function() {\n        var rd = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create();\n        return function(start, end, out) {\n            var d0 = this.distanceToPoint(start);\n            var d1 = this.distanceToPoint(end);\n            if ((d0 > 0 && d1 > 0) || (d0 < 0 && d1 < 0)) {\n                return null;\n            }\n            // Ray intersection\n            var pn = this.normal.array;\n            var d = this.distance;\n            var ro = start.array;\n            // direction\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].sub(rd, end.array, start.array);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].normalize(rd, rd);\n\n            var divider = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pn, rd);\n            // ray is parallel to the plane\n            if (divider === 0) {\n                return null;\n            }\n            if (!out) {\n                out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n            }\n            var t = (__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pn, ro) - d) / divider;\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(out.array, ro, rd, -t);\n            out._dirty = true;\n            return out;\n        };\n    })(),\n\n    /**\n     * Apply an affine transform matrix to plane\n     * @function\n     * @return {clay.Matrix4}\n     */\n    applyTransform: (function() {\n        var inverseTranspose = __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].create();\n        var normalv4 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].create();\n        var pointv4 = __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].create();\n        pointv4[3] = 1;\n        return function(m4) {\n            m4 = m4.array;\n            // Transform point on plane\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scale(pointv4, this.normal.array, this.distance);\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].transformMat4(pointv4, pointv4, m4);\n            this.distance = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].dot(pointv4, this.normal.array);\n            // Transform plane normal\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].invert(inverseTranspose, m4);\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTranspose, inverseTranspose);\n            normalv4[3] = 0;\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(normalv4, this.normal.array);\n            __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec4__[\"a\" /* default */].transformMat4(normalv4, normalv4, inverseTranspose);\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(this.normal.array, normalv4);\n        };\n    })(),\n\n    /**\n     * Copy from another plane\n     * @param  {clay.Vector3} plane\n     */\n    copy: function(plane) {\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(this.normal.array, plane.normal.array);\n        this.normal._dirty = true;\n        this.distance = plane.distance;\n    },\n\n    /**\n     * Clone a new plane\n     * @return {clay.Plane}\n     */\n    clone: function() {\n        var plane = new Plane();\n        plane.copy(this);\n        return plane;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Plane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvUGxhbmUuanM/NDkzMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVmVjdG9yMyBmcm9tICcuL1ZlY3RvcjMnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi4vZ2xtYXRyaXgvbWF0NCc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcbmltcG9ydCB2ZWM0IGZyb20gJy4uL2dsbWF0cml4L3ZlYzQnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuUGxhbmVcbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBbbm9ybWFsXVxuICogQHBhcmFtIHtudW1iZXJ9IFtkaXN0YW5jZV1cbiAqL1xudmFyIFBsYW5lID0gZnVuY3Rpb24obm9ybWFsLCBkaXN0YW5jZSkge1xuICAgIC8qKlxuICAgICAqIE5vcm1hbCBvZiB0aGUgcGxhbmVcbiAgICAgKiBAdHlwZSB7Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMubm9ybWFsID0gbm9ybWFsIHx8IG5ldyBWZWN0b3IzKDAsIDEsIDApO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RhbnQgb2YgdGhlIHBsYW5lIGVxdWF0aW9uLCB1c2VkIGFzIGRpc3RhbmNlIHRvIHRoZSBvcmlnaW5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZSB8fCAwO1xufTtcblxuUGxhbmUucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IFBsYW5lLFxuXG4gICAgLyoqXG4gICAgICogRGlzdGFuY2UgZnJvbSBhIGdpdmVuIHBvaW50IHRvIHRoZSBwbGFuZVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gcG9pbnRcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGlzdGFuY2VUb1BvaW50OiBmdW5jdGlvbihwb2ludCkge1xuICAgICAgICByZXR1cm4gdmVjMy5kb3QocG9pbnQuYXJyYXksIHRoaXMubm9ybWFsLmFycmF5KSAtIHRoaXMuZGlzdGFuY2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgcHJvamVjdGlvbiBwb2ludCBvbiB0aGUgcGxhbmVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IHBvaW50XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBvdXRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgcHJvamVjdFBvaW50OiBmdW5jdGlvbihwb2ludCwgb3V0KSB7XG4gICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkID0gdGhpcy5kaXN0YW5jZVRvUG9pbnQocG9pbnQpO1xuICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgcG9pbnQuYXJyYXksIHRoaXMubm9ybWFsLmFycmF5LCAtZCk7XG4gICAgICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgdGhlIHBsYW5lJ3Mgbm9ybWFsIGFuZCBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlXG4gICAgICovXG4gICAgbm9ybWFsaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGludkxlbiA9IDEgLyB2ZWMzLmxlbih0aGlzLm5vcm1hbC5hcnJheSk7XG4gICAgICAgIHZlYzMuc2NhbGUodGhpcy5ub3JtYWwuYXJyYXksIGludkxlbik7XG4gICAgICAgIHRoaXMuZGlzdGFuY2UgKj0gaW52TGVuO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB0aGUgcGxhbmUgaW50ZXJzZWN0IGEgZnJ1c3R1bVxuICAgICAqIEBwYXJhbSAge2NsYXkuRnJ1c3R1bX0gRnJ1c3R1bVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaW50ZXJzZWN0RnJ1c3R1bTogZnVuY3Rpb24oZnJ1c3R1bSkge1xuICAgICAgICAvLyBDaGVjayBpZiBhbGwgY29vcmRzIG9mIGZydXN0dW0gaXMgb24gcGxhbmUgYWxsIHVuZGVyIHBsYW5lXG4gICAgICAgIHZhciBjb29yZHMgPSBmcnVzdHVtLnZlcnRpY2VzO1xuICAgICAgICB2YXIgbm9ybWFsID0gdGhpcy5ub3JtYWwuYXJyYXk7XG4gICAgICAgIHZhciBvblBsYW5lID0gdmVjMy5kb3QoY29vcmRzWzBdLmFycmF5LCBub3JtYWwpID4gdGhpcy5kaXN0YW5jZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCA4OyBpKyspIHtcbiAgICAgICAgICAgIGlmICgodmVjMy5kb3QoY29vcmRzW2ldLmFycmF5LCBub3JtYWwpID4gdGhpcy5kaXN0YW5jZSkgIT0gb25QbGFuZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gcGxhbmUgYW5kIGEgZ2l2ZW4gbGluZVxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBzdGFydCBzdGFydCBwb2ludCBvZiBsaW5lXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IGVuZCBlbmQgcG9pbnQgb2YgbGluZVxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBbb3V0XVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICBpbnRlcnNlY3RMaW5lOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZCA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihzdGFydCwgZW5kLCBvdXQpIHtcbiAgICAgICAgICAgIHZhciBkMCA9IHRoaXMuZGlzdGFuY2VUb1BvaW50KHN0YXJ0KTtcbiAgICAgICAgICAgIHZhciBkMSA9IHRoaXMuZGlzdGFuY2VUb1BvaW50KGVuZCk7XG4gICAgICAgICAgICBpZiAoKGQwID4gMCAmJiBkMSA+IDApIHx8IChkMCA8IDAgJiYgZDEgPCAwKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmF5IGludGVyc2VjdGlvblxuICAgICAgICAgICAgdmFyIHBuID0gdGhpcy5ub3JtYWwuYXJyYXk7XG4gICAgICAgICAgICB2YXIgZCA9IHRoaXMuZGlzdGFuY2U7XG4gICAgICAgICAgICB2YXIgcm8gPSBzdGFydC5hcnJheTtcbiAgICAgICAgICAgIC8vIGRpcmVjdGlvblxuICAgICAgICAgICAgdmVjMy5zdWIocmQsIGVuZC5hcnJheSwgc3RhcnQuYXJyYXkpO1xuICAgICAgICAgICAgdmVjMy5ub3JtYWxpemUocmQsIHJkKTtcblxuICAgICAgICAgICAgdmFyIGRpdmlkZXIgPSB2ZWMzLmRvdChwbiwgcmQpO1xuICAgICAgICAgICAgLy8gcmF5IGlzIHBhcmFsbGVsIHRvIHRoZSBwbGFuZVxuICAgICAgICAgICAgaWYgKGRpdmlkZXIgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ID0gKHZlYzMuZG90KHBuLCBybykgLSBkKSAvIGRpdmlkZXI7XG4gICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKG91dC5hcnJheSwgcm8sIHJkLCAtdCk7XG4gICAgICAgICAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IGFuIGFmZmluZSB0cmFuc2Zvcm0gbWF0cml4IHRvIHBsYW5lXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXg0fVxuICAgICAqL1xuICAgIGFwcGx5VHJhbnNmb3JtOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpbnZlcnNlVHJhbnNwb3NlID0gbWF0NC5jcmVhdGUoKTtcbiAgICAgICAgdmFyIG5vcm1hbHY0ID0gdmVjNC5jcmVhdGUoKTtcbiAgICAgICAgdmFyIHBvaW50djQgPSB2ZWM0LmNyZWF0ZSgpO1xuICAgICAgICBwb2ludHY0WzNdID0gMTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKG00KSB7XG4gICAgICAgICAgICBtNCA9IG00LmFycmF5O1xuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHBvaW50IG9uIHBsYW5lXG4gICAgICAgICAgICB2ZWMzLnNjYWxlKHBvaW50djQsIHRoaXMubm9ybWFsLmFycmF5LCB0aGlzLmRpc3RhbmNlKTtcbiAgICAgICAgICAgIHZlYzQudHJhbnNmb3JtTWF0NChwb2ludHY0LCBwb2ludHY0LCBtNCk7XG4gICAgICAgICAgICB0aGlzLmRpc3RhbmNlID0gdmVjMy5kb3QocG9pbnR2NCwgdGhpcy5ub3JtYWwuYXJyYXkpO1xuICAgICAgICAgICAgLy8gVHJhbnNmb3JtIHBsYW5lIG5vcm1hbFxuICAgICAgICAgICAgbWF0NC5pbnZlcnQoaW52ZXJzZVRyYW5zcG9zZSwgbTQpO1xuICAgICAgICAgICAgbWF0NC50cmFuc3Bvc2UoaW52ZXJzZVRyYW5zcG9zZSwgaW52ZXJzZVRyYW5zcG9zZSk7XG4gICAgICAgICAgICBub3JtYWx2NFszXSA9IDA7XG4gICAgICAgICAgICB2ZWMzLmNvcHkobm9ybWFsdjQsIHRoaXMubm9ybWFsLmFycmF5KTtcbiAgICAgICAgICAgIHZlYzQudHJhbnNmb3JtTWF0NChub3JtYWx2NCwgbm9ybWFsdjQsIGludmVyc2VUcmFuc3Bvc2UpO1xuICAgICAgICAgICAgdmVjMy5jb3B5KHRoaXMubm9ybWFsLmFycmF5LCBub3JtYWx2NCk7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgZnJvbSBhbm90aGVyIHBsYW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBwbGFuZVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uKHBsYW5lKSB7XG4gICAgICAgIHZlYzMuY29weSh0aGlzLm5vcm1hbC5hcnJheSwgcGxhbmUubm9ybWFsLmFycmF5KTtcbiAgICAgICAgdGhpcy5ub3JtYWwuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kaXN0YW5jZSA9IHBsYW5lLmRpc3RhbmNlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBwbGFuZVxuICAgICAqIEByZXR1cm4ge2NsYXkuUGxhbmV9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcGxhbmUgPSBuZXcgUGxhbmUoKTtcbiAgICAgICAgcGxhbmUuY29weSh0aGlzKTtcbiAgICAgICAgcmV0dXJuIHBsYW5lO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFBsYW5lO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvUGxhbmUuanNcbi8vIG1vZHVsZSBpZCA9IDUzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///53\n");

/***/ }),
/* 54 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\n\n\nvar planeMatrix = new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */]();\n\n/**\n * @constructor clay.geometry.Cube\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.widthSegments]\n * @param {number} [opt.heightSegments]\n * @param {number} [opt.depthSegments]\n * @param {boolean} [opt.inside]\n */\nvar Cube = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/**@lends clay.geometry.Cube# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 1,\n    /**\n     * @type {number}\n     */\n    heightSegments: 1,\n    /**\n     * @type {number}\n     */\n    depthSegments: 1,\n    /**\n     * @type {boolean}\n     */\n    inside: false\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cube.prototype */\n{\n    /**\n     * Build cube geometry\n     */\n    build: function() {\n\n        var planes = {\n            'px': createPlane('px', this.depthSegments, this.heightSegments),\n            'nx': createPlane('nx', this.depthSegments, this.heightSegments),\n            'py': createPlane('py', this.widthSegments, this.depthSegments),\n            'ny': createPlane('ny', this.widthSegments, this.depthSegments),\n            'pz': createPlane('pz', this.widthSegments, this.heightSegments),\n            'nz': createPlane('nz', this.widthSegments, this.heightSegments),\n        };\n\n        var attrList = ['position', 'texcoord0', 'normal'];\n        var vertexNumber = 0;\n        var faceNumber = 0;\n        for (var pos in planes) {\n            vertexNumber += planes[pos].vertexCount;\n            faceNumber += planes[pos].indices.length;\n        }\n        for (var k = 0; k < attrList.length; k++) {\n            this.attributes[attrList[k]].init(vertexNumber);\n        }\n        this.indices = new __WEBPACK_IMPORTED_MODULE_5__core_vendor__[\"a\" /* default */].Uint16Array(faceNumber);\n        var faceOffset = 0;\n        var vertexOffset = 0;\n        for (var pos in planes) {\n            var plane = planes[pos];\n            for (var k = 0; k < attrList.length; k++) {\n                var attrName = attrList[k];\n                var attrArray = plane.attributes[attrName].value;\n                var attrSize = plane.attributes[attrName].size;\n                var isNormal = attrName === 'normal';\n                for (var i = 0; i < attrArray.length; i++) {\n                    var value = attrArray[i];\n                    if (this.inside && isNormal) {\n                        value = -value;\n                    }\n                    this.attributes[attrName].value[i + attrSize * vertexOffset] = value;\n                }\n            }\n            var len = plane.indices.length;\n            for (var i = 0; i < plane.indices.length; i++) {\n                this.indices[i + faceOffset] = vertexOffset + plane.indices[this.inside ? (len - i - 1) : i];\n            }\n            faceOffset += plane.indices.length;\n            vertexOffset += plane.vertexCount;\n        }\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.max.set(1, 1, 1);\n        this.boundingBox.min.set(-1, -1, -1);\n    }\n});\n\nfunction createPlane(pos, widthSegments, heightSegments) {\n\n    planeMatrix.identity();\n\n    var plane = new __WEBPACK_IMPORTED_MODULE_1__Plane__[\"a\" /* default */]({\n        widthSegments: widthSegments,\n        heightSegments: heightSegments\n    });\n\n    switch(pos) {\n        case 'px':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_X);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, Math.PI / 2);\n            break;\n        case 'nx':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_X);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, -Math.PI / 2);\n            break;\n        case 'py':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_Y);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateX(planeMatrix, planeMatrix, -Math.PI / 2);\n            break;\n        case 'ny':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateX(planeMatrix, planeMatrix, Math.PI / 2);\n            break;\n        case 'pz':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n            break;\n        case 'nz':\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].translate(planeMatrix, planeMatrix, __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n            __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */].rotateY(planeMatrix, planeMatrix, Math.PI);\n            break;\n    }\n    plane.applyTransform(planeMatrix);\n    return plane;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cube);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L0N1YmUuanM/YjM3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IFBsYW5lIGZyb20gJy4vUGxhbmUnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi4vbWF0aC9NYXRyaXg0JztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcblxudmFyIHBsYW5lTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5nZW9tZXRyeS5DdWJlXG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LndpZHRoU2VnbWVudHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5oZWlnaHRTZWdtZW50c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmRlcHRoU2VnbWVudHNdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHQuaW5zaWRlXVxuICovXG52YXIgQ3ViZSA9IEdlb21ldHJ5LmV4dGVuZChcbi8qKkBsZW5kcyBjbGF5Lmdlb21ldHJ5LkN1YmUjICovXG57XG4gICAgZHluYW1pYzogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB3aWR0aFNlZ21lbnRzOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0U2VnbWVudHM6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBkZXB0aFNlZ21lbnRzOiAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGluc2lkZTogZmFsc2Vcbn0sIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYnVpbGQoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuQ3ViZS5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBCdWlsZCBjdWJlIGdlb21ldHJ5XG4gICAgICovXG4gICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBwbGFuZXMgPSB7XG4gICAgICAgICAgICAncHgnOiBjcmVhdGVQbGFuZSgncHgnLCB0aGlzLmRlcHRoU2VnbWVudHMsIHRoaXMuaGVpZ2h0U2VnbWVudHMpLFxuICAgICAgICAgICAgJ254JzogY3JlYXRlUGxhbmUoJ254JywgdGhpcy5kZXB0aFNlZ21lbnRzLCB0aGlzLmhlaWdodFNlZ21lbnRzKSxcbiAgICAgICAgICAgICdweSc6IGNyZWF0ZVBsYW5lKCdweScsIHRoaXMud2lkdGhTZWdtZW50cywgdGhpcy5kZXB0aFNlZ21lbnRzKSxcbiAgICAgICAgICAgICdueSc6IGNyZWF0ZVBsYW5lKCdueScsIHRoaXMud2lkdGhTZWdtZW50cywgdGhpcy5kZXB0aFNlZ21lbnRzKSxcbiAgICAgICAgICAgICdweic6IGNyZWF0ZVBsYW5lKCdweicsIHRoaXMud2lkdGhTZWdtZW50cywgdGhpcy5oZWlnaHRTZWdtZW50cyksXG4gICAgICAgICAgICAnbnonOiBjcmVhdGVQbGFuZSgnbnonLCB0aGlzLndpZHRoU2VnbWVudHMsIHRoaXMuaGVpZ2h0U2VnbWVudHMpLFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBhdHRyTGlzdCA9IFsncG9zaXRpb24nLCAndGV4Y29vcmQwJywgJ25vcm1hbCddO1xuICAgICAgICB2YXIgdmVydGV4TnVtYmVyID0gMDtcbiAgICAgICAgdmFyIGZhY2VOdW1iZXIgPSAwO1xuICAgICAgICBmb3IgKHZhciBwb3MgaW4gcGxhbmVzKSB7XG4gICAgICAgICAgICB2ZXJ0ZXhOdW1iZXIgKz0gcGxhbmVzW3Bvc10udmVydGV4Q291bnQ7XG4gICAgICAgICAgICBmYWNlTnVtYmVyICs9IHBsYW5lc1twb3NdLmluZGljZXMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgYXR0ckxpc3QubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlc1thdHRyTGlzdFtrXV0uaW5pdCh2ZXJ0ZXhOdW1iZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaW5kaWNlcyA9IG5ldyB2ZW5kb3IuVWludDE2QXJyYXkoZmFjZU51bWJlcik7XG4gICAgICAgIHZhciBmYWNlT2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIHZlcnRleE9mZnNldCA9IDA7XG4gICAgICAgIGZvciAodmFyIHBvcyBpbiBwbGFuZXMpIHtcbiAgICAgICAgICAgIHZhciBwbGFuZSA9IHBsYW5lc1twb3NdO1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBhdHRyTGlzdC5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyTmFtZSA9IGF0dHJMaXN0W2tdO1xuICAgICAgICAgICAgICAgIHZhciBhdHRyQXJyYXkgPSBwbGFuZS5hdHRyaWJ1dGVzW2F0dHJOYW1lXS52YWx1ZTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0clNpemUgPSBwbGFuZS5hdHRyaWJ1dGVzW2F0dHJOYW1lXS5zaXplO1xuICAgICAgICAgICAgICAgIHZhciBpc05vcm1hbCA9IGF0dHJOYW1lID09PSAnbm9ybWFsJztcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBhdHRyQXJyYXlbaV07XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluc2lkZSAmJiBpc05vcm1hbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSAtdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW2F0dHJOYW1lXS52YWx1ZVtpICsgYXR0clNpemUgKiB2ZXJ0ZXhPZmZzZXRdID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxlbiA9IHBsYW5lLmluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbGFuZS5pbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbmRpY2VzW2kgKyBmYWNlT2Zmc2V0XSA9IHZlcnRleE9mZnNldCArIHBsYW5lLmluZGljZXNbdGhpcy5pbnNpZGUgPyAobGVuIC0gaSAtIDEpIDogaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmYWNlT2Zmc2V0ICs9IHBsYW5lLmluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgdmVydGV4T2Zmc2V0ICs9IHBsYW5lLnZlcnRleENvdW50O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1heC5zZXQoMSwgMSwgMSk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWluLnNldCgtMSwgLTEsIC0xKTtcbiAgICB9XG59KTtcblxuZnVuY3Rpb24gY3JlYXRlUGxhbmUocG9zLCB3aWR0aFNlZ21lbnRzLCBoZWlnaHRTZWdtZW50cykge1xuXG4gICAgcGxhbmVNYXRyaXguaWRlbnRpdHkoKTtcblxuICAgIHZhciBwbGFuZSA9IG5ldyBQbGFuZSh7XG4gICAgICAgIHdpZHRoU2VnbWVudHM6IHdpZHRoU2VnbWVudHMsXG4gICAgICAgIGhlaWdodFNlZ21lbnRzOiBoZWlnaHRTZWdtZW50c1xuICAgIH0pO1xuXG4gICAgc3dpdGNoKHBvcykge1xuICAgICAgICBjYXNlICdweCc6XG4gICAgICAgICAgICBNYXRyaXg0LnRyYW5zbGF0ZShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIFZlY3RvcjMuUE9TSVRJVkVfWCk7XG4gICAgICAgICAgICBNYXRyaXg0LnJvdGF0ZVkocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBNYXRoLlBJIC8gMik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbngnOlxuICAgICAgICAgICAgTWF0cml4NC50cmFuc2xhdGUocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBWZWN0b3IzLk5FR0FUSVZFX1gpO1xuICAgICAgICAgICAgTWF0cml4NC5yb3RhdGVZKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgLU1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdweSc6XG4gICAgICAgICAgICBNYXRyaXg0LnRyYW5zbGF0ZShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIFZlY3RvcjMuUE9TSVRJVkVfWSk7XG4gICAgICAgICAgICBNYXRyaXg0LnJvdGF0ZVgocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCAtTWF0aC5QSSAvIDIpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ255JzpcbiAgICAgICAgICAgIE1hdHJpeDQudHJhbnNsYXRlKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICAgICAgICAgIE1hdHJpeDQucm90YXRlWChwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIE1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdweic6XG4gICAgICAgICAgICBNYXRyaXg0LnRyYW5zbGF0ZShwbGFuZU1hdHJpeCwgcGxhbmVNYXRyaXgsIFZlY3RvcjMuUE9TSVRJVkVfWik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnbnonOlxuICAgICAgICAgICAgTWF0cml4NC50cmFuc2xhdGUocGxhbmVNYXRyaXgsIHBsYW5lTWF0cml4LCBWZWN0b3IzLk5FR0FUSVZFX1opO1xuICAgICAgICAgICAgTWF0cml4NC5yb3RhdGVZKHBsYW5lTWF0cml4LCBwbGFuZU1hdHJpeCwgTWF0aC5QSSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG4gICAgcGxhbmUuYXBwbHlUcmFuc2Zvcm0ocGxhbmVNYXRyaXgpO1xuICAgIHJldHVybiBwbGFuZTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgQ3ViZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nZW9tZXRyeS9DdWJlLmpzXG4vLyBtb2R1bGUgaWQgPSA1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///54\n");

/***/ }),
/* 55 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n/**\n * @constructor clay.geometry.Sphere\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [widthSegments]\n * @param {number} [heightSegments]\n * @param {number} [phiStart]\n * @param {number} [phiLength]\n * @param {number} [thetaStart]\n * @param {number} [thetaLength]\n * @param {number} [radius]\n */\nvar Sphere = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(/** @lends clay.geometry.Sphere# */ {\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    widthSegments: 40,\n    /**\n     * @type {number}\n     */\n    heightSegments: 20,\n\n    /**\n     * @type {number}\n     */\n    phiStart: 0,\n    /**\n     * @type {number}\n     */\n    phiLength: Math.PI * 2,\n\n    /**\n     * @type {number}\n     */\n    thetaStart: 0,\n    /**\n     * @type {number}\n     */\n    thetaLength: Math.PI,\n\n    /**\n     * @type {number}\n     */\n    radius: 1\n\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Sphere.prototype */\n{\n    /**\n     * Build sphere geometry\n     */\n    build: function() {\n        var heightSegments = this.heightSegments;\n        var widthSegments = this.widthSegments;\n\n        var positionAttr = this.attributes.position;\n        var texcoordAttr = this.attributes.texcoord0;\n        var normalAttr = this.attributes.normal;\n\n        var vertexCount = (widthSegments + 1) * (heightSegments + 1);\n        positionAttr.init(vertexCount);\n        texcoordAttr.init(vertexCount);\n        normalAttr.init(vertexCount);\n\n        var IndicesCtor = vertexCount > 0xffff ? Uint32Array : Uint16Array;\n        var indices = this.indices = new IndicesCtor(widthSegments * heightSegments * 6);\n\n        var x, y, z,\n            u, v,\n            i, j;\n\n        var radius = this.radius;\n        var phiStart = this.phiStart;\n        var phiLength = this.phiLength;\n        var thetaStart = this.thetaStart;\n        var thetaLength = this.thetaLength;\n        var radius = this.radius;\n\n        var pos = [];\n        var uv = [];\n        var offset = 0;\n        var divider = 1 / radius;\n        for (j = 0; j <= heightSegments; j ++) {\n            for (i = 0; i <= widthSegments; i ++) {\n                u = i / widthSegments;\n                v = j / heightSegments;\n\n                // X axis is inverted so texture can be mapped from left to right\n                x = -radius * Math.cos(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n                y = radius * Math.cos(thetaStart + v * thetaLength);\n                z = radius * Math.sin(phiStart + u * phiLength) * Math.sin(thetaStart + v * thetaLength);\n\n                pos[0] = x; pos[1] = y; pos[2] = z;\n                uv[0] = u; uv[1] = v;\n                positionAttr.set(offset, pos);\n                texcoordAttr.set(offset, uv);\n                pos[0] *= divider;\n                pos[1] *= divider;\n                pos[2] *= divider;\n                normalAttr.set(offset, pos);\n                offset++;\n            }\n        }\n\n        var i1, i2, i3, i4;\n\n        var len = widthSegments + 1;\n\n        var n = 0;\n        for (j = 0; j < heightSegments; j ++) {\n            for (i = 0; i < widthSegments; i ++) {\n                i2 = j * len + i;\n                i1 = (j * len + i + 1);\n                i4 = (j + 1) * len + i + 1;\n                i3 = (j + 1) * len + i;\n\n                indices[n++] = i1;\n                indices[n++] = i2;\n                indices[n++] = i4;\n\n                indices[n++] = i2;\n                indices[n++] = i3;\n                indices[n++] = i4;\n            }\n        }\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        this.boundingBox.max.set(radius, radius, radius);\n        this.boundingBox.min.set(-radius, -radius, -radius);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Sphere);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L1NwaGVyZS5qcz82NTQxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgQm91bmRpbmdCb3ggZnJvbSAnLi4vbWF0aC9Cb3VuZGluZ0JveCc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuU3BoZXJlXG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbd2lkdGhTZWdtZW50c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0U2VnbWVudHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW3BoaVN0YXJ0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtwaGlMZW5ndGhdXG4gKiBAcGFyYW0ge251bWJlcn0gW3RoZXRhU3RhcnRdXG4gKiBAcGFyYW0ge251bWJlcn0gW3RoZXRhTGVuZ3RoXVxuICogQHBhcmFtIHtudW1iZXJ9IFtyYWRpdXNdXG4gKi9cbnZhciBTcGhlcmUgPSBHZW9tZXRyeS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LlNwaGVyZSMgKi8ge1xuICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgd2lkdGhTZWdtZW50czogNDAsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBoZWlnaHRTZWdtZW50czogMjAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHBoaVN0YXJ0OiAwLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcGhpTGVuZ3RoOiBNYXRoLlBJICogMixcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhldGFTdGFydDogMCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoZXRhTGVuZ3RoOiBNYXRoLlBJLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYWRpdXM6IDFcblxufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5idWlsZCgpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5TcGhlcmUucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgc3BoZXJlIGdlb21ldHJ5XG4gICAgICovXG4gICAgYnVpbGQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgaGVpZ2h0U2VnbWVudHMgPSB0aGlzLmhlaWdodFNlZ21lbnRzO1xuICAgICAgICB2YXIgd2lkdGhTZWdtZW50cyA9IHRoaXMud2lkdGhTZWdtZW50cztcblxuICAgICAgICB2YXIgcG9zaXRpb25BdHRyID0gdGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgICAgICB2YXIgdGV4Y29vcmRBdHRyID0gdGhpcy5hdHRyaWJ1dGVzLnRleGNvb3JkMDtcbiAgICAgICAgdmFyIG5vcm1hbEF0dHIgPSB0aGlzLmF0dHJpYnV0ZXMubm9ybWFsO1xuXG4gICAgICAgIHZhciB2ZXJ0ZXhDb3VudCA9ICh3aWR0aFNlZ21lbnRzICsgMSkgKiAoaGVpZ2h0U2VnbWVudHMgKyAxKTtcbiAgICAgICAgcG9zaXRpb25BdHRyLmluaXQodmVydGV4Q291bnQpO1xuICAgICAgICB0ZXhjb29yZEF0dHIuaW5pdCh2ZXJ0ZXhDb3VudCk7XG4gICAgICAgIG5vcm1hbEF0dHIuaW5pdCh2ZXJ0ZXhDb3VudCk7XG5cbiAgICAgICAgdmFyIEluZGljZXNDdG9yID0gdmVydGV4Q291bnQgPiAweGZmZmYgPyBVaW50MzJBcnJheSA6IFVpbnQxNkFycmF5O1xuICAgICAgICB2YXIgaW5kaWNlcyA9IHRoaXMuaW5kaWNlcyA9IG5ldyBJbmRpY2VzQ3Rvcih3aWR0aFNlZ21lbnRzICogaGVpZ2h0U2VnbWVudHMgKiA2KTtcblxuICAgICAgICB2YXIgeCwgeSwgeixcbiAgICAgICAgICAgIHUsIHYsXG4gICAgICAgICAgICBpLCBqO1xuXG4gICAgICAgIHZhciByYWRpdXMgPSB0aGlzLnJhZGl1cztcbiAgICAgICAgdmFyIHBoaVN0YXJ0ID0gdGhpcy5waGlTdGFydDtcbiAgICAgICAgdmFyIHBoaUxlbmd0aCA9IHRoaXMucGhpTGVuZ3RoO1xuICAgICAgICB2YXIgdGhldGFTdGFydCA9IHRoaXMudGhldGFTdGFydDtcbiAgICAgICAgdmFyIHRoZXRhTGVuZ3RoID0gdGhpcy50aGV0YUxlbmd0aDtcbiAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMucmFkaXVzO1xuXG4gICAgICAgIHZhciBwb3MgPSBbXTtcbiAgICAgICAgdmFyIHV2ID0gW107XG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICB2YXIgZGl2aWRlciA9IDEgLyByYWRpdXM7XG4gICAgICAgIGZvciAoaiA9IDA7IGogPD0gaGVpZ2h0U2VnbWVudHM7IGogKyspIHtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPD0gd2lkdGhTZWdtZW50czsgaSArKykge1xuICAgICAgICAgICAgICAgIHUgPSBpIC8gd2lkdGhTZWdtZW50cztcbiAgICAgICAgICAgICAgICB2ID0gaiAvIGhlaWdodFNlZ21lbnRzO1xuXG4gICAgICAgICAgICAgICAgLy8gWCBheGlzIGlzIGludmVydGVkIHNvIHRleHR1cmUgY2FuIGJlIG1hcHBlZCBmcm9tIGxlZnQgdG8gcmlnaHRcbiAgICAgICAgICAgICAgICB4ID0gLXJhZGl1cyAqIE1hdGguY29zKHBoaVN0YXJ0ICsgdSAqIHBoaUxlbmd0aCkgKiBNYXRoLnNpbih0aGV0YVN0YXJ0ICsgdiAqIHRoZXRhTGVuZ3RoKTtcbiAgICAgICAgICAgICAgICB5ID0gcmFkaXVzICogTWF0aC5jb3ModGhldGFTdGFydCArIHYgKiB0aGV0YUxlbmd0aCk7XG4gICAgICAgICAgICAgICAgeiA9IHJhZGl1cyAqIE1hdGguc2luKHBoaVN0YXJ0ICsgdSAqIHBoaUxlbmd0aCkgKiBNYXRoLnNpbih0aGV0YVN0YXJ0ICsgdiAqIHRoZXRhTGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIHBvc1swXSA9IHg7IHBvc1sxXSA9IHk7IHBvc1syXSA9IHo7XG4gICAgICAgICAgICAgICAgdXZbMF0gPSB1OyB1dlsxXSA9IHY7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyLnNldChvZmZzZXQsIHBvcyk7XG4gICAgICAgICAgICAgICAgdGV4Y29vcmRBdHRyLnNldChvZmZzZXQsIHV2KTtcbiAgICAgICAgICAgICAgICBwb3NbMF0gKj0gZGl2aWRlcjtcbiAgICAgICAgICAgICAgICBwb3NbMV0gKj0gZGl2aWRlcjtcbiAgICAgICAgICAgICAgICBwb3NbMl0gKj0gZGl2aWRlcjtcbiAgICAgICAgICAgICAgICBub3JtYWxBdHRyLnNldChvZmZzZXQsIHBvcyk7XG4gICAgICAgICAgICAgICAgb2Zmc2V0Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaTEsIGkyLCBpMywgaTQ7XG5cbiAgICAgICAgdmFyIGxlbiA9IHdpZHRoU2VnbWVudHMgKyAxO1xuXG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgZm9yIChqID0gMDsgaiA8IGhlaWdodFNlZ21lbnRzOyBqICsrKSB7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgd2lkdGhTZWdtZW50czsgaSArKykge1xuICAgICAgICAgICAgICAgIGkyID0gaiAqIGxlbiArIGk7XG4gICAgICAgICAgICAgICAgaTEgPSAoaiAqIGxlbiArIGkgKyAxKTtcbiAgICAgICAgICAgICAgICBpNCA9IChqICsgMSkgKiBsZW4gKyBpICsgMTtcbiAgICAgICAgICAgICAgICBpMyA9IChqICsgMSkgKiBsZW4gKyBpO1xuXG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTE7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTI7XG4gICAgICAgICAgICAgICAgaW5kaWNlc1tuKytdID0gaTQ7XG5cbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMjtcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMztcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5tYXguc2V0KHJhZGl1cywgcmFkaXVzLCByYWRpdXMpO1xuICAgICAgICB0aGlzLmJvdW5kaW5nQm94Lm1pbi5zZXQoLXJhZGl1cywgLXJhZGl1cywgLXJhZGl1cyk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNwaGVyZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nZW9tZXRyeS9TcGhlcmUuanNcbi8vIG1vZHVsZSBpZCA9IDU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///55\n");

/***/ }),
/* 56 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var mathUtil = {};\n\nmathUtil.isPowerOfTwo = function (value) {\n    return (value & (value - 1)) === 0;\n};\n\nmathUtil.nextPowerOfTwo = function (value) {\n    value --;\n    value |= value >> 1;\n    value |= value >> 2;\n    value |= value >> 4;\n    value |= value >> 8;\n    value |= value >> 16;\n    value ++;\n\n    return value;\n};\n\nmathUtil.nearestPowerOfTwo = function (value) {\n    return Math.pow( 2, Math.round( Math.log( value ) / Math.LN2 ) );\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mathUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvdXRpbC5qcz83ZWU1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBtYXRoVXRpbCA9IHt9O1xuXG5tYXRoVXRpbC5pc1Bvd2VyT2ZUd28gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gKHZhbHVlICYgKHZhbHVlIC0gMSkpID09PSAwO1xufTtcblxubWF0aFV0aWwubmV4dFBvd2VyT2ZUd28gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2YWx1ZSAtLTtcbiAgICB2YWx1ZSB8PSB2YWx1ZSA+PiAxO1xuICAgIHZhbHVlIHw9IHZhbHVlID4+IDI7XG4gICAgdmFsdWUgfD0gdmFsdWUgPj4gNDtcbiAgICB2YWx1ZSB8PSB2YWx1ZSA+PiA4O1xuICAgIHZhbHVlIHw9IHZhbHVlID4+IDE2O1xuICAgIHZhbHVlICsrO1xuXG4gICAgcmV0dXJuIHZhbHVlO1xufTtcblxubWF0aFV0aWwubmVhcmVzdFBvd2VyT2ZUd28gPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC5wb3coIDIsIE1hdGgucm91bmQoIE1hdGgubG9nKCB2YWx1ZSApIC8gTWF0aC5MTjIgKSApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgbWF0aFV0aWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSA1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///56\n");

/***/ }),
/* 57 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Shader__ = __webpack_require__(6);\n\n\nvar _library = {};\n\nfunction ShaderLibrary () {\n    this._pool = {};\n}\n\nShaderLibrary.prototype.get = function(name) {\n    var key = name;\n\n    if (this._pool[key]) {\n        return this._pool[key];\n    }\n    else {\n        var source = _library[name];\n        if (!source) {\n            console.error('Shader \"' + name + '\"' + ' is not in the library');\n            return;\n        }\n        var shader = new __WEBPACK_IMPORTED_MODULE_0__Shader__[\"a\" /* default */](source.vertex, source.fragment);\n        this._pool[key] = shader;\n        return shader;\n    }\n};\n\nShaderLibrary.prototype.clear = function() {\n    this._pool = {};\n};\n\nfunction template(name, vertex, fragment) {\n    _library[name] = {\n        vertex: vertex,\n        fragment: fragment\n    };\n}\n\nvar defaultLibrary = new ShaderLibrary();\n\n/**\n * ### Builin shaders\n * + clay.standard\n * + clay.basic\n * + clay.lambert\n * + clay.wireframe\n *\n * @namespace clay.shader.library\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    /**\n     * Create a new shader library.\n     */\n    createLibrary: function () {\n        return new ShaderLibrary();\n    },\n    /**\n     * Get shader from default library.\n     * @param {string} name\n     * @return {clay.Shader}\n     * @memberOf clay.shader.library\n     * @example\n     *     clay.shader.library.get('clay.standard')\n     */\n    get: function () {\n        return defaultLibrary.get.apply(defaultLibrary, arguments);\n    },\n    /**\n     * @memberOf clay.shader.library\n     * @param  {string} name\n     * @param  {string} vertex - Vertex shader code\n     * @param  {string} fragment - Fragment shader code\n     */\n    template: template,\n    clear: function () {\n        return defaultLibrary.clear();\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9saWJyYXJ5LmpzP2IxNzUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuXG52YXIgX2xpYnJhcnkgPSB7fTtcblxuZnVuY3Rpb24gU2hhZGVyTGlicmFyeSAoKSB7XG4gICAgdGhpcy5fcG9vbCA9IHt9O1xufVxuXG5TaGFkZXJMaWJyYXJ5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGtleSA9IG5hbWU7XG5cbiAgICBpZiAodGhpcy5fcG9vbFtrZXldKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9wb29sW2tleV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgc291cmNlID0gX2xpYnJhcnlbbmFtZV07XG4gICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdTaGFkZXIgXCInICsgbmFtZSArICdcIicgKyAnIGlzIG5vdCBpbiB0aGUgbGlicmFyeScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzaGFkZXIgPSBuZXcgU2hhZGVyKHNvdXJjZS52ZXJ0ZXgsIHNvdXJjZS5mcmFnbWVudCk7XG4gICAgICAgIHRoaXMuX3Bvb2xba2V5XSA9IHNoYWRlcjtcbiAgICAgICAgcmV0dXJuIHNoYWRlcjtcbiAgICB9XG59O1xuXG5TaGFkZXJMaWJyYXJ5LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3Bvb2wgPSB7fTtcbn07XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKG5hbWUsIHZlcnRleCwgZnJhZ21lbnQpIHtcbiAgICBfbGlicmFyeVtuYW1lXSA9IHtcbiAgICAgICAgdmVydGV4OiB2ZXJ0ZXgsXG4gICAgICAgIGZyYWdtZW50OiBmcmFnbWVudFxuICAgIH07XG59XG5cbnZhciBkZWZhdWx0TGlicmFyeSA9IG5ldyBTaGFkZXJMaWJyYXJ5KCk7XG5cbi8qKlxuICogIyMjIEJ1aWxpbiBzaGFkZXJzXG4gKiArIGNsYXkuc3RhbmRhcmRcbiAqICsgY2xheS5iYXNpY1xuICogKyBjbGF5LmxhbWJlcnRcbiAqICsgY2xheS53aXJlZnJhbWVcbiAqXG4gKiBAbmFtZXNwYWNlIGNsYXkuc2hhZGVyLmxpYnJhcnlcbiAqL1xuZXhwb3J0IGRlZmF1bHQge1xuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBzaGFkZXIgbGlicmFyeS5cbiAgICAgKi9cbiAgICBjcmVhdGVMaWJyYXJ5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyTGlicmFyeSgpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogR2V0IHNoYWRlciBmcm9tIGRlZmF1bHQgbGlicmFyeS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEByZXR1cm4ge2NsYXkuU2hhZGVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnNoYWRlci5saWJyYXJ5XG4gICAgICogQGV4YW1wbGVcbiAgICAgKiAgICAgY2xheS5zaGFkZXIubGlicmFyeS5nZXQoJ2NsYXkuc3RhbmRhcmQnKVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdExpYnJhcnkuZ2V0LmFwcGx5KGRlZmF1bHRMaWJyYXJ5LCBhcmd1bWVudHMpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQG1lbWJlck9mIGNsYXkuc2hhZGVyLmxpYnJhcnlcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHZlcnRleCAtIFZlcnRleCBzaGFkZXIgY29kZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gZnJhZ21lbnQgLSBGcmFnbWVudCBzaGFkZXIgY29kZVxuICAgICAqL1xuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZGVmYXVsdExpYnJhcnkuY2xlYXIoKTtcbiAgICB9XG59O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9saWJyYXJ5LmpzXG4vLyBtb2R1bGUgaWQgPSA1N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///57\n");

/***/ }),
/* 58 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n\n/**\n * @constructor clay.Joint\n * @extends clay.core.Base\n */\nvar Joint = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(\n/** @lends clay.Joint# */\n{\n    // https://github.com/KhronosGroup/glTF/issues/193#issuecomment-29216576\n    /**\n     * Joint name\n     * @type {string}\n     */\n    name: '',\n    /**\n     * Index of joint in the skeleton\n     * @type {number}\n     */\n    index: -1,\n\n    /**\n     * Scene node attached to\n     * @type {clay.Node}\n     */\n    node: null\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Joint);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0pvaW50LmpzPzhiNTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LkpvaW50XG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgSm9pbnQgPSBCYXNlLmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5Kb2ludCMgKi9cbntcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvaXNzdWVzLzE5MyNpc3N1ZWNvbW1lbnQtMjkyMTY1NzZcbiAgICAvKipcbiAgICAgKiBKb2ludCBuYW1lXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBuYW1lOiAnJyxcbiAgICAvKipcbiAgICAgKiBJbmRleCBvZiBqb2ludCBpbiB0aGUgc2tlbGV0b25cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGluZGV4OiAtMSxcblxuICAgIC8qKlxuICAgICAqIFNjZW5lIG5vZGUgYXR0YWNoZWQgdG9cbiAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIG5vZGU6IG51bGxcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBKb2ludDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9Kb2ludC5qc1xuLy8gbW9kdWxlIGlkID0gNThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///58\n");

/***/ }),
/* 59 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__dds__ = __webpack_require__(94);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__hdr__ = __webpack_require__(95);\n\n\n\n\n\n\n\n\n\n\n/**\n * @alias clay.util.texture\n */\nvar textureUtil = {\n    /**\n     * @param  {string|object} path\n     * @param  {object} [option]\n     * @param  {Function} [onsuccess]\n     * @param  {Function} [onerror]\n     * @return {clay.Texture}\n     */\n    loadTexture: function (path, option, onsuccess, onerror) {\n        var texture;\n        if (typeof(option) === 'function') {\n            onsuccess = option;\n            onerror = onsuccess;\n            option = {};\n        }\n        else {\n            option = option || {};\n        }\n        if (typeof(path) === 'string') {\n            if (path.match(/.hdr$/) || option.fileType === 'hdr') {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n                    width: 0,\n                    height: 0,\n                    sRGB: false\n                });\n                textureUtil._fetchTexture(\n                    path,\n                    function (data) {\n                        __WEBPACK_IMPORTED_MODULE_7__hdr__[\"a\" /* default */].parseRGBE(data, texture, option.exposure);\n                        texture.dirty();\n                        onsuccess && onsuccess(texture);\n                    },\n                    onerror\n                );\n                return texture;\n            }\n            else if (path.match(/.dds$/) || option.fileType === 'dds') {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n                    width: 0,\n                    height: 0\n                });\n                textureUtil._fetchTexture(\n                    path,\n                    function (data) {\n                        __WEBPACK_IMPORTED_MODULE_6__dds__[\"a\" /* default */].parse(data, texture);\n                        texture.dirty();\n                        onsuccess && onsuccess(texture);\n                    },\n                    onerror\n                );\n            }\n            else {\n                texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]();\n                texture.load(path);\n                texture.success(onsuccess);\n                texture.error(onerror);\n            }\n        }\n        else if (typeof path === 'object' && typeof(path.px) !== 'undefined') {\n            texture = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]();\n            texture.load(path);\n            texture.success(onsuccess);\n            texture.error(onerror);\n        }\n        return texture;\n    },\n\n    /**\n     * Load a panorama texture and render it to a cube map\n     * @param  {clay.Renderer} renderer\n     * @param  {string} path\n     * @param  {clay.TextureCube} cubeMap\n     * @param  {object} [option]\n     * @param  {boolean} [option.encodeRGBM]\n     * @param  {number} [option.exposure]\n     * @param  {Function} [onsuccess]\n     * @param  {Function} [onerror]\n     */\n    loadPanorama: function (renderer, path, cubeMap, option, onsuccess, onerror) {\n        var self = this;\n\n        if (typeof(option) === 'function') {\n            onsuccess = option;\n            onerror = onsuccess;\n            option = {};\n        }\n        else {\n            option = option || {};\n        }\n\n        textureUtil.loadTexture(path, option, function (texture) {\n            // PENDING\n            texture.flipY = option.flipY || false;\n            self.panoramaToCubeMap(renderer, texture, cubeMap, option);\n            texture.dispose(renderer);\n            onsuccess && onsuccess(cubeMap);\n        }, onerror);\n    },\n\n    /**\n     * Render a panorama texture to a cube map\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Texture2D} panoramaMap\n     * @param  {clay.TextureCube} cubeMap\n     * @param  {Object} option\n     * @param  {boolean} [option.encodeRGBM]\n     */\n    panoramaToCubeMap: function (renderer, panoramaMap, cubeMap, option) {\n        var environmentMapPass = new __WEBPACK_IMPORTED_MODULE_3__prePass_EnvironmentMap__[\"a\" /* default */]();\n        var skydome = new __WEBPACK_IMPORTED_MODULE_4__plugin_Skydome__[\"a\" /* default */]({\n            scene: new __WEBPACK_IMPORTED_MODULE_5__Scene__[\"a\" /* default */]()\n        });\n        skydome.setEnvironmentMap(panoramaMap);\n\n        option = option || {};\n        if (option.encodeRGBM) {\n            skydome.material.define('fragment', 'RGBM_ENCODE');\n        }\n\n        // Share sRGB\n        cubeMap.sRGB = panoramaMap.sRGB;\n\n        environmentMapPass.texture = cubeMap;\n        environmentMapPass.render(renderer, skydome.scene);\n        environmentMapPass.texture = null;\n        environmentMapPass.dispose(renderer);\n        return cubeMap;\n    },\n\n    /**\n     * Convert height map to normal map\n     * @param {HTMLImageElement|HTMLCanvasElement} image\n     * @param {boolean} [checkBump=false]\n     * @return {HTMLCanvasElement}\n     */\n    heightToNormal: function (image, checkBump) {\n        var canvas = document.createElement('canvas');\n        var width = canvas.width = image.width;\n        var height = canvas.height = image.height;\n        var ctx = canvas.getContext('2d');\n        ctx.drawImage(image, 0, 0, width, height);\n        checkBump = checkBump || false;\n        var srcData = ctx.getImageData(0, 0, width, height);\n        var dstData = ctx.createImageData(width, height);\n        for (var i = 0; i < srcData.data.length; i += 4) {\n            if (checkBump) {\n                var r = srcData.data[i];\n                var g = srcData.data[i + 1];\n                var b = srcData.data[i + 2];\n                var diff = Math.abs(r - g) + Math.abs(g - b);\n                if (diff > 20) {\n                    console.warn('Given image is not a height map');\n                    return image;\n                }\n            }\n            // Modified from http://mrdoob.com/lab/javascript/height2normal/\n            var x1, y1, x2, y2;\n            if (i % (width * 4) === 0) {\n                // left edge\n                x1 = srcData.data[i];\n                x2 = srcData.data[i + 4];\n            }\n            else if (i % (width * 4) === (width - 1) * 4) {\n                // right edge\n                x1 = srcData.data[i - 4];\n                x2 = srcData.data[i];\n            }\n            else {\n                x1 = srcData.data[i - 4];\n                x2 = srcData.data[i + 4];\n            }\n\n            if (i < width * 4) {\n                // top edge\n                y1 = srcData.data[i];\n                y2 = srcData.data[i + width * 4];\n            }\n            else if (i > width * (height - 1) * 4) {\n                // bottom edge\n                y1 = srcData.data[i - width * 4];\n                y2 = srcData.data[i];\n            }\n            else {\n                y1 = srcData.data[i - width * 4];\n                y2 = srcData.data[i + width * 4];\n            }\n\n            dstData.data[i] = (x1 - x2) + 127;\n            dstData.data[i + 1] = (y1 - y2) + 127;\n            dstData.data[i + 2] = 255;\n            dstData.data[i + 3] = 255;\n        }\n        ctx.putImageData(dstData, 0, 0);\n        return canvas;\n    },\n\n    /**\n     * Convert height map to normal map\n     * @param {HTMLImageElement|HTMLCanvasElement} image\n     * @param {boolean} [checkBump=false]\n     * @param {number} [threshold=20]\n     * @return {HTMLCanvasElement}\n     */\n    isHeightImage: function (img, downScaleSize, threshold) {\n        if (!img || !img.width || !img.height) {\n            return false;\n        }\n\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        var size = downScaleSize || 32;\n        threshold = threshold || 20;\n        canvas.width = canvas.height = size;\n        ctx.drawImage(img, 0, 0, size, size);\n        var srcData = ctx.getImageData(0, 0, size, size);\n        for (var i = 0; i < srcData.data.length; i += 4) {\n            var r = srcData.data[i];\n            var g = srcData.data[i + 1];\n            var b = srcData.data[i + 2];\n            var diff = Math.abs(r - g) + Math.abs(g - b);\n            if (diff > threshold) {\n                return false;\n            }\n        }\n        return true;\n    },\n\n    _fetchTexture: function (path, onsuccess, onerror) {\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: path,\n            responseType: 'arraybuffer',\n            onload: onsuccess,\n            onerror: onerror\n        });\n    },\n\n    /**\n     * Create a chessboard texture\n     * @param  {number} [size]\n     * @param  {number} [unitSize]\n     * @param  {string} [color1]\n     * @param  {string} [color2]\n     * @return {clay.Texture2D}\n     */\n    createChessboard: function (size, unitSize, color1, color2) {\n        size = size || 512;\n        unitSize = unitSize || 64;\n        color1 = color1 || 'black';\n        color2 = color2 || 'white';\n\n        var repeat = Math.ceil(size / unitSize);\n\n        var canvas = document.createElement('canvas');\n        canvas.width = size;\n        canvas.height = size;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = color2;\n        ctx.fillRect(0, 0, size, size);\n\n        ctx.fillStyle = color1;\n        for (var i = 0; i < repeat; i++) {\n            for (var j = 0; j < repeat; j++) {\n                var isFill = j % 2 ? (i % 2) : (i % 2 - 1);\n                if (isFill) {\n                    ctx.fillRect(i * unitSize, j * unitSize, unitSize, unitSize);\n                }\n            }\n        }\n\n        var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n            image: canvas,\n            anisotropic: 8\n        });\n\n        return texture;\n    },\n\n    /**\n     * Create a blank pure color 1x1 texture\n     * @param  {string} color\n     * @return {clay.Texture2D}\n     */\n    createBlank: function (color) {\n        var canvas = document.createElement('canvas');\n        canvas.width = 1;\n        canvas.height = 1;\n        var ctx = canvas.getContext('2d');\n        ctx.fillStyle = color;\n        ctx.fillRect(0, 0, 1, 1);\n\n        var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n            image: canvas\n        });\n\n        return texture;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (textureUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvdGV4dHVyZS5qcz8xMTM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi4vVGV4dHVyZTJEJztcbmltcG9ydCBUZXh0dXJlQ3ViZSBmcm9tICcuLi9UZXh0dXJlQ3ViZSc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcbmltcG9ydCBFbnZpcm9ubWVudE1hcFBhc3MgZnJvbSAnLi4vcHJlUGFzcy9FbnZpcm9ubWVudE1hcCc7XG5pbXBvcnQgU2t5ZG9tZSBmcm9tICcuLi9wbHVnaW4vU2t5ZG9tZSc7XG5pbXBvcnQgU2NlbmUgZnJvbSAnLi4vU2NlbmUnO1xuXG5pbXBvcnQgZGRzIGZyb20gJy4vZGRzJztcbmltcG9ydCBoZHIgZnJvbSAnLi9oZHInO1xuXG4vKipcbiAqIEBhbGlhcyBjbGF5LnV0aWwudGV4dHVyZVxuICovXG52YXIgdGV4dHVyZVV0aWwgPSB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7c3RyaW5nfG9iamVjdH0gcGF0aFxuICAgICAqIEBwYXJhbSAge29iamVjdH0gW29wdGlvbl1cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW29uc3VjY2Vzc11cbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gW29uZXJyb3JdXG4gICAgICogQHJldHVybiB7Y2xheS5UZXh0dXJlfVxuICAgICAqL1xuICAgIGxvYWRUZXh0dXJlOiBmdW5jdGlvbiAocGF0aCwgb3B0aW9uLCBvbnN1Y2Nlc3MsIG9uZXJyb3IpIHtcbiAgICAgICAgdmFyIHRleHR1cmU7XG4gICAgICAgIGlmICh0eXBlb2Yob3B0aW9uKSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgb25zdWNjZXNzID0gb3B0aW9uO1xuICAgICAgICAgICAgb25lcnJvciA9IG9uc3VjY2VzcztcbiAgICAgICAgICAgIG9wdGlvbiA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9uID0gb3B0aW9uIHx8IHt9O1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YocGF0aCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAocGF0aC5tYXRjaCgvLmhkciQvKSB8fCBvcHRpb24uZmlsZVR5cGUgPT09ICdoZHInKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgICAgICAgICBzUkdCOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRleHR1cmVVdGlsLl9mZXRjaFRleHR1cmUoXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoZHIucGFyc2VSR0JFKGRhdGEsIHRleHR1cmUsIG9wdGlvbi5leHBvc3VyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbnN1Y2Nlc3MgJiYgb25zdWNjZXNzKHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbmVycm9yXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHBhdGgubWF0Y2goLy5kZHMkLykgfHwgb3B0aW9uLmZpbGVUeXBlID09PSAnZGRzJykge1xuICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDAsXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRleHR1cmVVdGlsLl9mZXRjaFRleHR1cmUoXG4gICAgICAgICAgICAgICAgICAgIHBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZHMucGFyc2UoZGF0YSwgdGV4dHVyZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvbnN1Y2Nlc3MgJiYgb25zdWNjZXNzKHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvbmVycm9yXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKCk7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5sb2FkKHBhdGgpO1xuICAgICAgICAgICAgICAgIHRleHR1cmUuc3VjY2VzcyhvbnN1Y2Nlc3MpO1xuICAgICAgICAgICAgICAgIHRleHR1cmUuZXJyb3Iob25lcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBhdGggPT09ICdvYmplY3QnICYmIHR5cGVvZihwYXRoLnB4KSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZUN1YmUoKTtcbiAgICAgICAgICAgIHRleHR1cmUubG9hZChwYXRoKTtcbiAgICAgICAgICAgIHRleHR1cmUuc3VjY2VzcyhvbnN1Y2Nlc3MpO1xuICAgICAgICAgICAgdGV4dHVyZS5lcnJvcihvbmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTG9hZCBhIHBhbm9yYW1hIHRleHR1cmUgYW5kIHJlbmRlciBpdCB0byBhIGN1YmUgbWFwXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlRleHR1cmVDdWJlfSBjdWJlTWFwXG4gICAgICogQHBhcmFtICB7b2JqZWN0fSBbb3B0aW9uXVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW59IFtvcHRpb24uZW5jb2RlUkdCTV1cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFtvcHRpb24uZXhwb3N1cmVdXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvbnN1Y2Nlc3NdXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IFtvbmVycm9yXVxuICAgICAqL1xuICAgIGxvYWRQYW5vcmFtYTogZnVuY3Rpb24gKHJlbmRlcmVyLCBwYXRoLCBjdWJlTWFwLCBvcHRpb24sIG9uc3VjY2Vzcywgb25lcnJvcikge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHR5cGVvZihvcHRpb24pID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBvbnN1Y2Nlc3MgPSBvcHRpb247XG4gICAgICAgICAgICBvbmVycm9yID0gb25zdWNjZXNzO1xuICAgICAgICAgICAgb3B0aW9uID0ge307XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBvcHRpb24gPSBvcHRpb24gfHwge307XG4gICAgICAgIH1cblxuICAgICAgICB0ZXh0dXJlVXRpbC5sb2FkVGV4dHVyZShwYXRoLCBvcHRpb24sIGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICB0ZXh0dXJlLmZsaXBZID0gb3B0aW9uLmZsaXBZIHx8IGZhbHNlO1xuICAgICAgICAgICAgc2VsZi5wYW5vcmFtYVRvQ3ViZU1hcChyZW5kZXJlciwgdGV4dHVyZSwgY3ViZU1hcCwgb3B0aW9uKTtcbiAgICAgICAgICAgIHRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgICAgICBvbnN1Y2Nlc3MgJiYgb25zdWNjZXNzKGN1YmVNYXApO1xuICAgICAgICB9LCBvbmVycm9yKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVuZGVyIGEgcGFub3JhbWEgdGV4dHVyZSB0byBhIGN1YmUgbWFwXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlRleHR1cmUyRH0gcGFub3JhbWFNYXBcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlRleHR1cmVDdWJlfSBjdWJlTWFwXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBvcHRpb25cbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbb3B0aW9uLmVuY29kZVJHQk1dXG4gICAgICovXG4gICAgcGFub3JhbWFUb0N1YmVNYXA6IGZ1bmN0aW9uIChyZW5kZXJlciwgcGFub3JhbWFNYXAsIGN1YmVNYXAsIG9wdGlvbikge1xuICAgICAgICB2YXIgZW52aXJvbm1lbnRNYXBQYXNzID0gbmV3IEVudmlyb25tZW50TWFwUGFzcygpO1xuICAgICAgICB2YXIgc2t5ZG9tZSA9IG5ldyBTa3lkb21lKHtcbiAgICAgICAgICAgIHNjZW5lOiBuZXcgU2NlbmUoKVxuICAgICAgICB9KTtcbiAgICAgICAgc2t5ZG9tZS5zZXRFbnZpcm9ubWVudE1hcChwYW5vcmFtYU1hcCk7XG5cbiAgICAgICAgb3B0aW9uID0gb3B0aW9uIHx8IHt9O1xuICAgICAgICBpZiAob3B0aW9uLmVuY29kZVJHQk0pIHtcbiAgICAgICAgICAgIHNreWRvbWUubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdSR0JNX0VOQ09ERScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2hhcmUgc1JHQlxuICAgICAgICBjdWJlTWFwLnNSR0IgPSBwYW5vcmFtYU1hcC5zUkdCO1xuXG4gICAgICAgIGVudmlyb25tZW50TWFwUGFzcy50ZXh0dXJlID0gY3ViZU1hcDtcbiAgICAgICAgZW52aXJvbm1lbnRNYXBQYXNzLnJlbmRlcihyZW5kZXJlciwgc2t5ZG9tZS5zY2VuZSk7XG4gICAgICAgIGVudmlyb25tZW50TWFwUGFzcy50ZXh0dXJlID0gbnVsbDtcbiAgICAgICAgZW52aXJvbm1lbnRNYXBQYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICByZXR1cm4gY3ViZU1hcDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29udmVydCBoZWlnaHQgbWFwIHRvIG5vcm1hbCBtYXBcbiAgICAgKiBAcGFyYW0ge0hUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnR9IGltYWdlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbY2hlY2tCdW1wPWZhbHNlXVxuICAgICAqIEByZXR1cm4ge0hUTUxDYW52YXNFbGVtZW50fVxuICAgICAqL1xuICAgIGhlaWdodFRvTm9ybWFsOiBmdW5jdGlvbiAoaW1hZ2UsIGNoZWNrQnVtcCkge1xuICAgICAgICB2YXIgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIHZhciB3aWR0aCA9IGNhbnZhcy53aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gY2FudmFzLmhlaWdodCA9IGltYWdlLmhlaWdodDtcbiAgICAgICAgdmFyIGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBjdHguZHJhd0ltYWdlKGltYWdlLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgY2hlY2tCdW1wID0gY2hlY2tCdW1wIHx8IGZhbHNlO1xuICAgICAgICB2YXIgc3JjRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgIHZhciBkc3REYXRhID0gY3R4LmNyZWF0ZUltYWdlRGF0YSh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzcmNEYXRhLmRhdGEubGVuZ3RoOyBpICs9IDQpIHtcbiAgICAgICAgICAgIGlmIChjaGVja0J1bXApIHtcbiAgICAgICAgICAgICAgICB2YXIgciA9IHNyY0RhdGEuZGF0YVtpXTtcbiAgICAgICAgICAgICAgICB2YXIgZyA9IHNyY0RhdGEuZGF0YVtpICsgMV07XG4gICAgICAgICAgICAgICAgdmFyIGIgPSBzcmNEYXRhLmRhdGFbaSArIDJdO1xuICAgICAgICAgICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMociAtIGcpICsgTWF0aC5hYnMoZyAtIGIpO1xuICAgICAgICAgICAgICAgIGlmIChkaWZmID4gMjApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdHaXZlbiBpbWFnZSBpcyBub3QgYSBoZWlnaHQgbWFwJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpbWFnZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBNb2RpZmllZCBmcm9tIGh0dHA6Ly9tcmRvb2IuY29tL2xhYi9qYXZhc2NyaXB0L2hlaWdodDJub3JtYWwvXG4gICAgICAgICAgICB2YXIgeDEsIHkxLCB4MiwgeTI7XG4gICAgICAgICAgICBpZiAoaSAlICh3aWR0aCAqIDQpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gbGVmdCBlZGdlXG4gICAgICAgICAgICAgICAgeDEgPSBzcmNEYXRhLmRhdGFbaV07XG4gICAgICAgICAgICAgICAgeDIgPSBzcmNEYXRhLmRhdGFbaSArIDRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSAlICh3aWR0aCAqIDQpID09PSAod2lkdGggLSAxKSAqIDQpIHtcbiAgICAgICAgICAgICAgICAvLyByaWdodCBlZGdlXG4gICAgICAgICAgICAgICAgeDEgPSBzcmNEYXRhLmRhdGFbaSAtIDRdO1xuICAgICAgICAgICAgICAgIHgyID0gc3JjRGF0YS5kYXRhW2ldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgeDEgPSBzcmNEYXRhLmRhdGFbaSAtIDRdO1xuICAgICAgICAgICAgICAgIHgyID0gc3JjRGF0YS5kYXRhW2kgKyA0XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGkgPCB3aWR0aCAqIDQpIHtcbiAgICAgICAgICAgICAgICAvLyB0b3AgZWRnZVxuICAgICAgICAgICAgICAgIHkxID0gc3JjRGF0YS5kYXRhW2ldO1xuICAgICAgICAgICAgICAgIHkyID0gc3JjRGF0YS5kYXRhW2kgKyB3aWR0aCAqIDRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaSA+IHdpZHRoICogKGhlaWdodCAtIDEpICogNCkge1xuICAgICAgICAgICAgICAgIC8vIGJvdHRvbSBlZGdlXG4gICAgICAgICAgICAgICAgeTEgPSBzcmNEYXRhLmRhdGFbaSAtIHdpZHRoICogNF07XG4gICAgICAgICAgICAgICAgeTIgPSBzcmNEYXRhLmRhdGFbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB5MSA9IHNyY0RhdGEuZGF0YVtpIC0gd2lkdGggKiA0XTtcbiAgICAgICAgICAgICAgICB5MiA9IHNyY0RhdGEuZGF0YVtpICsgd2lkdGggKiA0XTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZHN0RGF0YS5kYXRhW2ldID0gKHgxIC0geDIpICsgMTI3O1xuICAgICAgICAgICAgZHN0RGF0YS5kYXRhW2kgKyAxXSA9ICh5MSAtIHkyKSArIDEyNztcbiAgICAgICAgICAgIGRzdERhdGEuZGF0YVtpICsgMl0gPSAyNTU7XG4gICAgICAgICAgICBkc3REYXRhLmRhdGFbaSArIDNdID0gMjU1O1xuICAgICAgICB9XG4gICAgICAgIGN0eC5wdXRJbWFnZURhdGEoZHN0RGF0YSwgMCwgMCk7XG4gICAgICAgIHJldHVybiBjYW52YXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvbnZlcnQgaGVpZ2h0IG1hcCB0byBub3JtYWwgbWFwXG4gICAgICogQHBhcmFtIHtIVE1MSW1hZ2VFbGVtZW50fEhUTUxDYW52YXNFbGVtZW50fSBpbWFnZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2NoZWNrQnVtcD1mYWxzZV1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3RocmVzaG9sZD0yMF1cbiAgICAgKiBAcmV0dXJuIHtIVE1MQ2FudmFzRWxlbWVudH1cbiAgICAgKi9cbiAgICBpc0hlaWdodEltYWdlOiBmdW5jdGlvbiAoaW1nLCBkb3duU2NhbGVTaXplLCB0aHJlc2hvbGQpIHtcbiAgICAgICAgaWYgKCFpbWcgfHwgIWltZy53aWR0aCB8fCAhaW1nLmhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgIHZhciBzaXplID0gZG93blNjYWxlU2l6ZSB8fCAzMjtcbiAgICAgICAgdGhyZXNob2xkID0gdGhyZXNob2xkIHx8IDIwO1xuICAgICAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gc2l6ZTtcbiAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHNpemUsIHNpemUpO1xuICAgICAgICB2YXIgc3JjRGF0YSA9IGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgc2l6ZSwgc2l6ZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3JjRGF0YS5kYXRhLmxlbmd0aDsgaSArPSA0KSB7XG4gICAgICAgICAgICB2YXIgciA9IHNyY0RhdGEuZGF0YVtpXTtcbiAgICAgICAgICAgIHZhciBnID0gc3JjRGF0YS5kYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIHZhciBiID0gc3JjRGF0YS5kYXRhW2kgKyAyXTtcbiAgICAgICAgICAgIHZhciBkaWZmID0gTWF0aC5hYnMociAtIGcpICsgTWF0aC5hYnMoZyAtIGIpO1xuICAgICAgICAgICAgaWYgKGRpZmYgPiB0aHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcblxuICAgIF9mZXRjaFRleHR1cmU6IGZ1bmN0aW9uIChwYXRoLCBvbnN1Y2Nlc3MsIG9uZXJyb3IpIHtcbiAgICAgICAgdmVuZG9yLnJlcXVlc3QuZ2V0KHtcbiAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICAgICAgICAgIG9ubG9hZDogb25zdWNjZXNzLFxuICAgICAgICAgICAgb25lcnJvcjogb25lcnJvclxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgY2hlc3Nib2FyZCB0ZXh0dXJlXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBbc2l6ZV1cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IFt1bml0U2l6ZV1cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IFtjb2xvcjFdXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBbY29sb3IyXVxuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGNyZWF0ZUNoZXNzYm9hcmQ6IGZ1bmN0aW9uIChzaXplLCB1bml0U2l6ZSwgY29sb3IxLCBjb2xvcjIpIHtcbiAgICAgICAgc2l6ZSA9IHNpemUgfHwgNTEyO1xuICAgICAgICB1bml0U2l6ZSA9IHVuaXRTaXplIHx8IDY0O1xuICAgICAgICBjb2xvcjEgPSBjb2xvcjEgfHwgJ2JsYWNrJztcbiAgICAgICAgY29sb3IyID0gY29sb3IyIHx8ICd3aGl0ZSc7XG5cbiAgICAgICAgdmFyIHJlcGVhdCA9IE1hdGguY2VpbChzaXplIC8gdW5pdFNpemUpO1xuXG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gc2l6ZTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHNpemU7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yMjtcbiAgICAgICAgY3R4LmZpbGxSZWN0KDAsIDAsIHNpemUsIHNpemUpO1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBjb2xvcjE7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVwZWF0OyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVwZWF0OyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgaXNGaWxsID0gaiAlIDIgPyAoaSAlIDIpIDogKGkgJSAyIC0gMSk7XG4gICAgICAgICAgICAgICAgaWYgKGlzRmlsbCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbFJlY3QoaSAqIHVuaXRTaXplLCBqICogdW5pdFNpemUsIHVuaXRTaXplLCB1bml0U2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgIGltYWdlOiBjYW52YXMsXG4gICAgICAgICAgICBhbmlzb3Ryb3BpYzogOFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgYmxhbmsgcHVyZSBjb2xvciAxeDEgdGV4dHVyZVxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gY29sb3JcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgKi9cbiAgICBjcmVhdGVCbGFuazogZnVuY3Rpb24gKGNvbG9yKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gMTtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IDE7XG4gICAgICAgIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBjdHguZmlsbFJlY3QoMCwgMCwgMSwgMSk7XG5cbiAgICAgICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgIGltYWdlOiBjYW52YXNcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgdGV4dHVyZVV0aWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC90ZXh0dXJlLmpzXG4vLyBtb2R1bGUgaWQgPSA1OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///59\n");

/***/ }),
/* 60 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Skybox__ = __webpack_require__(41);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__Skybox__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9Ta3lkb21lLmpzPzg0N2MiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFNreWJveCBmcm9tICcuL1NreWJveCc7XG5cbmV4cG9ydCBkZWZhdWx0IFNreWJveDtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGx1Z2luL1NreWRvbWUuanNcbi8vIG1vZHVsZSBpZCA9IDYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///60\n");

/***/ }),
/* 61 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n\n\n\n\nvar TexturePool = function () {\n\n    this._pool = {};\n\n    this._allocatedTextures = [];\n};\n\nTexturePool.prototype = {\n\n    constructor: TexturePool,\n\n    get: function (parameters) {\n        var key = generateKey(parameters);\n        if (!this._pool.hasOwnProperty(key)) {\n            this._pool[key] = [];\n        }\n        var list = this._pool[key];\n        if (!list.length) {\n            var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */](parameters);\n            this._allocatedTextures.push(texture);\n            return texture;\n        }\n        return list.pop();\n    },\n\n    put: function (texture) {\n        var key = generateKey(texture);\n        if (!this._pool.hasOwnProperty(key)) {\n            this._pool[key] = [];\n        }\n        var list = this._pool[key];\n        list.push(texture);\n    },\n\n    clear: function (renderer) {\n        for (var i = 0; i < this._allocatedTextures.length; i++) {\n            this._allocatedTextures[i].dispose(renderer);\n        }\n        this._pool = {};\n        this._allocatedTextures = [];\n    }\n};\n\nvar defaultParams = {\n    width: 512,\n    height: 512,\n    type: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].UNSIGNED_BYTE,\n    format: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].RGBA,\n    wrapS: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE,\n    wrapT: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE,\n    minFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR,\n    magFilter: __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR,\n    useMipmap: true,\n    anisotropic: 1,\n    flipY: true,\n    unpackAlignment: 4,\n    premultiplyAlpha: false\n};\n\nvar defaultParamPropList = Object.keys(defaultParams);\n\nfunction generateKey(parameters) {\n    __WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].defaultsWithPropList(parameters, defaultParams, defaultParamPropList);\n    fallBack(parameters);\n\n    var key = '';\n    for (var i = 0; i < defaultParamPropList.length; i++) {\n        var name = defaultParamPropList[i];\n        var chunk = parameters[name].toString();\n        key += chunk;\n    }\n    return key;\n}\n\nfunction fallBack(target) {\n\n    var IPOT = isPowerOfTwo(target.width, target.height);\n\n    if (target.format === __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_COMPONENT) {\n        target.useMipmap = false;\n    }\n\n    if (!IPOT || !target.useMipmap) {\n        if (target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_NEAREST ||\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST_MIPMAP_LINEAR) {\n            target.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n        } else if (\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_LINEAR ||\n            target.minFilter == __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR_MIPMAP_NEAREST\n        ) {\n            target.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].LINEAR;\n        }\n    }\n    if (!IPOT) {\n        target.wrapS = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n        target.wrapT = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].CLAMP_TO_EDGE;\n    }\n}\n\nfunction isPowerOfTwo(width, height) {\n    return (width & (width-1)) === 0 &&\n            (height & (height-1)) === 0;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TexturePool);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvVGV4dHVyZVBvb2wuanM/MmVjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgZ2xlbnVtIGZyb20gJy4uL2NvcmUvZ2xlbnVtJztcbmltcG9ydCB1dGlsIGZyb20gJy4uL2NvcmUvdXRpbCc7XG5cbnZhciBUZXh0dXJlUG9vbCA9IGZ1bmN0aW9uICgpIHtcblxuICAgIHRoaXMuX3Bvb2wgPSB7fTtcblxuICAgIHRoaXMuX2FsbG9jYXRlZFRleHR1cmVzID0gW107XG59O1xuXG5UZXh0dXJlUG9vbC5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVGV4dHVyZVBvb2wsXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBrZXkgPSBnZW5lcmF0ZUtleShwYXJhbWV0ZXJzKTtcbiAgICAgICAgaWYgKCF0aGlzLl9wb29sLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvb2xba2V5XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHZhciBsaXN0ID0gdGhpcy5fcG9vbFtrZXldO1xuICAgICAgICBpZiAoIWxpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQocGFyYW1ldGVycyk7XG4gICAgICAgICAgICB0aGlzLl9hbGxvY2F0ZWRUZXh0dXJlcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpc3QucG9wKCk7XG4gICAgfSxcblxuICAgIHB1dDogZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICAgICAgdmFyIGtleSA9IGdlbmVyYXRlS2V5KHRleHR1cmUpO1xuICAgICAgICBpZiAoIXRoaXMuX3Bvb2wuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgdGhpcy5fcG9vbFtrZXldID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxpc3QgPSB0aGlzLl9wb29sW2tleV07XG4gICAgICAgIGxpc3QucHVzaCh0ZXh0dXJlKTtcbiAgICB9LFxuXG4gICAgY2xlYXI6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FsbG9jYXRlZFRleHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9hbGxvY2F0ZWRUZXh0dXJlc1tpXS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wb29sID0ge307XG4gICAgICAgIHRoaXMuX2FsbG9jYXRlZFRleHR1cmVzID0gW107XG4gICAgfVxufTtcblxudmFyIGRlZmF1bHRQYXJhbXMgPSB7XG4gICAgd2lkdGg6IDUxMixcbiAgICBoZWlnaHQ6IDUxMixcbiAgICB0eXBlOiBnbGVudW0uVU5TSUdORURfQllURSxcbiAgICBmb3JtYXQ6IGdsZW51bS5SR0JBLFxuICAgIHdyYXBTOiBnbGVudW0uQ0xBTVBfVE9fRURHRSxcbiAgICB3cmFwVDogZ2xlbnVtLkNMQU1QX1RPX0VER0UsXG4gICAgbWluRmlsdGVyOiBnbGVudW0uTElORUFSX01JUE1BUF9MSU5FQVIsXG4gICAgbWFnRmlsdGVyOiBnbGVudW0uTElORUFSLFxuICAgIHVzZU1pcG1hcDogdHJ1ZSxcbiAgICBhbmlzb3Ryb3BpYzogMSxcbiAgICBmbGlwWTogdHJ1ZSxcbiAgICB1bnBhY2tBbGlnbm1lbnQ6IDQsXG4gICAgcHJlbXVsdGlwbHlBbHBoYTogZmFsc2Vcbn07XG5cbnZhciBkZWZhdWx0UGFyYW1Qcm9wTGlzdCA9IE9iamVjdC5rZXlzKGRlZmF1bHRQYXJhbXMpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZUtleShwYXJhbWV0ZXJzKSB7XG4gICAgdXRpbC5kZWZhdWx0c1dpdGhQcm9wTGlzdChwYXJhbWV0ZXJzLCBkZWZhdWx0UGFyYW1zLCBkZWZhdWx0UGFyYW1Qcm9wTGlzdCk7XG4gICAgZmFsbEJhY2socGFyYW1ldGVycyk7XG5cbiAgICB2YXIga2V5ID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkZWZhdWx0UGFyYW1Qcm9wTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmFtZSA9IGRlZmF1bHRQYXJhbVByb3BMaXN0W2ldO1xuICAgICAgICB2YXIgY2h1bmsgPSBwYXJhbWV0ZXJzW25hbWVdLnRvU3RyaW5nKCk7XG4gICAgICAgIGtleSArPSBjaHVuaztcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbn1cblxuZnVuY3Rpb24gZmFsbEJhY2sodGFyZ2V0KSB7XG5cbiAgICB2YXIgSVBPVCA9IGlzUG93ZXJPZlR3byh0YXJnZXQud2lkdGgsIHRhcmdldC5oZWlnaHQpO1xuXG4gICAgaWYgKHRhcmdldC5mb3JtYXQgPT09IGdsZW51bS5ERVBUSF9DT01QT05FTlQpIHtcbiAgICAgICAgdGFyZ2V0LnVzZU1pcG1hcCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghSVBPVCB8fCAhdGFyZ2V0LnVzZU1pcG1hcCkge1xuICAgICAgICBpZiAodGFyZ2V0Lm1pbkZpbHRlciA9PSBnbGVudW0uTkVBUkVTVF9NSVBNQVBfTkVBUkVTVCB8fFxuICAgICAgICAgICAgdGFyZ2V0Lm1pbkZpbHRlciA9PSBnbGVudW0uTkVBUkVTVF9NSVBNQVBfTElORUFSKSB7XG4gICAgICAgICAgICB0YXJnZXQubWluRmlsdGVyID0gZ2xlbnVtLk5FQVJFU1Q7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0YXJnZXQubWluRmlsdGVyID09IGdsZW51bS5MSU5FQVJfTUlQTUFQX0xJTkVBUiB8fFxuICAgICAgICAgICAgdGFyZ2V0Lm1pbkZpbHRlciA9PSBnbGVudW0uTElORUFSX01JUE1BUF9ORUFSRVNUXG4gICAgICAgICkge1xuICAgICAgICAgICAgdGFyZ2V0Lm1pbkZpbHRlciA9IGdsZW51bS5MSU5FQVI7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFJUE9UKSB7XG4gICAgICAgIHRhcmdldC53cmFwUyA9IGdsZW51bS5DTEFNUF9UT19FREdFO1xuICAgICAgICB0YXJnZXQud3JhcFQgPSBnbGVudW0uQ0xBTVBfVE9fRURHRTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzUG93ZXJPZlR3byh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgcmV0dXJuICh3aWR0aCAmICh3aWR0aC0xKSkgPT09IDAgJiZcbiAgICAgICAgICAgIChoZWlnaHQgJiAoaGVpZ2h0LTEpKSA9PT0gMDtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZVBvb2w7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9UZXh0dXJlUG9vbC5qc1xuLy8gbW9kdWxlIGlkID0gNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///61\n");

/***/ }),
/* 62 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__compositor_Compositor__ = __webpack_require__(101);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__compositor_SceneNode__ = __webpack_require__(103);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__compositor_TextureNode__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_FilterNode__ = __webpack_require__(105);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shader_registerBuiltinCompositor__ = __webpack_require__(106);\n\n\n\n\n\n\n\n\n\n\n\n\nObject(__WEBPACK_IMPORTED_MODULE_9__shader_registerBuiltinCompositor__[\"a\" /* default */])(__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */]);\n\nvar shaderSourceReg = /^#source\\((.*?)\\)/;\n\n/**\n * @name clay.createCompositor\n * @function\n * @param {Object} json\n * @param {Object} [opts]\n * @return {clay.compositor.Compositor}\n */\nfunction createCompositor(json, opts) {\n    var compositor = new __WEBPACK_IMPORTED_MODULE_1__compositor_Compositor__[\"a\" /* default */]();\n    opts = opts || {};\n\n    var lib = {\n        textures: {},\n        parameters: {}\n    };\n    var afterLoad = function(shaderLib, textureLib) {\n        for (var i = 0; i < json.nodes.length; i++) {\n            var nodeInfo = json.nodes[i];\n            var node = createNode(nodeInfo, lib, opts);\n            if (node) {\n                compositor.addNode(node);\n            }\n        }\n    };\n\n    for (var name in json.parameters) {\n        var paramInfo = json.parameters[name];\n        lib.parameters[name] = convertParameter(paramInfo);\n    }\n    // TODO load texture asynchronous\n    loadTextures(json, lib, opts, function(textureLib) {\n        lib.textures = textureLib;\n        afterLoad();\n    });\n\n    return compositor;\n}\n\nfunction createNode(nodeInfo, lib, opts) {\n    var type = nodeInfo.type || 'filter';\n    var shaderSource;\n    var inputs;\n    var outputs;\n\n    if (type === 'filter') {\n        var shaderExp = nodeInfo.shader.trim();\n        var res = shaderSourceReg.exec(shaderExp);\n        if (res) {\n            shaderSource = __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source(res[1].trim());\n        }\n        else if (shaderExp.charAt(0) === '#') {\n            shaderSource = lib.shaders[shaderExp.substr(1)];\n        }\n        if (!shaderSource) {\n            shaderSource = shaderExp;\n        }\n        if (!shaderSource) {\n            return;\n        }\n    }\n\n    if (nodeInfo.inputs) {\n        inputs = {};\n        for (var name in nodeInfo.inputs) {\n            if (typeof nodeInfo.inputs[name] === 'string') {\n                inputs[name] = nodeInfo.inputs[name];\n            }\n            else {\n                inputs[name] = {\n                    node: nodeInfo.inputs[name].node,\n                    pin: nodeInfo.inputs[name].pin\n                };\n            }\n        }\n    }\n    if (nodeInfo.outputs) {\n        outputs = {};\n        for (var name in nodeInfo.outputs) {\n            var outputInfo = nodeInfo.outputs[name];\n            outputs[name] = {};\n            if (outputInfo.attachment != null) {\n                outputs[name].attachment = outputInfo.attachment;\n            }\n            if (outputInfo.keepLastFrame != null) {\n                outputs[name].keepLastFrame = outputInfo.keepLastFrame;\n            }\n            if (outputInfo.outputLastFrame != null) {\n                outputs[name].outputLastFrame = outputInfo.outputLastFrame;\n            }\n            if (outputInfo.parameters) {\n                outputs[name].parameters = convertParameter(outputInfo.parameters);\n            }\n        }\n    }\n    var node;\n    if (type === 'scene') {\n        node = new __WEBPACK_IMPORTED_MODULE_2__compositor_SceneNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            scene: opts.scene,\n            camera: opts.camera,\n            outputs: outputs\n        });\n    }\n    else if (type === 'texture') {\n        node = new __WEBPACK_IMPORTED_MODULE_3__compositor_TextureNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            outputs: outputs\n        });\n    }\n    // Default is filter\n    else {\n        node = new __WEBPACK_IMPORTED_MODULE_4__compositor_FilterNode__[\"a\" /* default */]({\n            name: nodeInfo.name,\n            shader: shaderSource,\n            inputs: inputs,\n            outputs: outputs\n        });\n    }\n    if (node) {\n        if (nodeInfo.parameters) {\n            for (var name in nodeInfo.parameters) {\n                var val = nodeInfo.parameters[name];\n                if (typeof val === 'string') {\n                    val = val.trim();\n                    if (val.charAt(0) === '#') {\n                        val = lib.textures[val.substr(1)];\n                    }\n                    else {\n                        node.on(\n                            'beforerender', createSizeSetHandler(\n                                name, tryConvertExpr(val)\n                            )\n                        );\n                    }\n                }\n                else if (typeof val === 'function') {\n                    node.on('beforerender', val);\n                }\n                node.setParameter(name, val);\n            }\n        }\n        if (nodeInfo.defines && node.pass) {\n            for (var name in nodeInfo.defines) {\n                var val = nodeInfo.defines[name];\n                node.pass.material.define('fragment', name, val);\n            }\n        }\n    }\n    return node;\n}\n\nfunction defaultWidthFunc(width, height) {\n    return width;\n}\nfunction defaultHeightFunc(width, height) {\n    return height;\n}\n\nfunction convertParameter(paramInfo) {\n    var param = {};\n    if (!paramInfo) {\n        return param;\n    }\n    ['type', 'minFilter', 'magFilter', 'wrapS', 'wrapT', 'flipY', 'useMipmap']\n        .forEach(function(name) {\n            var val = paramInfo[name];\n            if (val != null) {\n                // Convert string to enum\n                if (typeof val === 'string') {\n                    val = __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */][val];\n                }\n                param[name] = val;\n            }\n        });\n\n    var sizeScale = paramInfo.scale || 1;\n    ['width', 'height']\n        .forEach(function(name) {\n            if (paramInfo[name] != null) {\n                var val = paramInfo[name];\n                if (typeof val === 'string') {\n                    val = val.trim();\n                    param[name] = createSizeParser(\n                        name, tryConvertExpr(val), sizeScale\n                    );\n                }\n                else {\n                    param[name] = val;\n                }\n            }\n        });\n    if (!param.width) {\n        param.width = defaultWidthFunc;\n    }\n    if (!param.height) {\n        param.height = defaultHeightFunc;\n    }\n\n    if (paramInfo.useMipmap != null) {\n        param.useMipmap = paramInfo.useMipmap;\n    }\n    return param;\n}\n\nfunction loadTextures(json, lib, opts, callback) {\n    if (!json.textures) {\n        callback({});\n        return;\n    }\n    var textures = {};\n    var loading = 0;\n\n    var cbd = false;\n    var textureRootPath = opts.textureRootPath;\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(json.textures, function(textureInfo, name) {\n        var texture;\n        var path = textureInfo.path;\n        var parameters = convertParameter(textureInfo.parameters);\n        if (Array.isArray(path) && path.length === 6) {\n            if (textureRootPath) {\n                path = path.map(function(item) {\n                    return __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].relative2absolute(item, textureRootPath);\n                });\n            }\n            texture = new __WEBPACK_IMPORTED_MODULE_8__TextureCube__[\"a\" /* default */](parameters);\n        }\n        else if(typeof path === 'string') {\n            if (textureRootPath) {\n                path = __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].relative2absolute(path, textureRootPath);\n            }\n            texture = new __WEBPACK_IMPORTED_MODULE_7__Texture2D__[\"a\" /* default */](parameters);\n        }\n        else {\n            return;\n        }\n\n        texture.load(path);\n        loading++;\n        texture.once('success', function() {\n            textures[name] = texture;\n            loading--;\n            if (loading === 0) {\n                callback(textures);\n                cbd = true;\n            }\n        });\n    });\n\n    if (loading === 0 && !cbd) {\n        callback(textures);\n    }\n}\n\nfunction createSizeSetHandler(name, exprFunc) {\n    return function (renderer) {\n        // PENDING viewport size or window size\n        var dpr = renderer.getDevicePixelRatio();\n        // PENDING If multiply dpr ?\n        var width = renderer.getWidth();\n        var height = renderer.getHeight();\n        var result = exprFunc(width, height, dpr);\n        this.setParameter(name, result);\n    };\n}\n\nfunction createSizeParser(name, exprFunc, scale) {\n    scale = scale || 1;\n    return function (renderer) {\n        var dpr = renderer.getDevicePixelRatio();\n        var width = renderer.getWidth() * scale;\n        var height = renderer.getHeight() * scale;\n        return exprFunc(width, height, dpr);\n    };\n}\n\nfunction tryConvertExpr(string) {\n    // PENDING\n    var exprRes = /^expr\\((.*)\\)$/.exec(string);\n    if (exprRes) {\n        try {\n            var func = new Function('width', 'height', 'dpr', 'return ' + exprRes[1]);\n            // Try run t\n            func(1, 1);\n\n            return func;\n        }\n        catch (e) {\n            throw new Error('Invalid expression.');\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (createCompositor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NyZWF0ZUNvbXBvc2l0b3IuanM/MWIzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXRpbCBmcm9tICcuL2NvcmUvdXRpbCc7XG5pbXBvcnQgQ29tcG9zaXRvciBmcm9tICcuL2NvbXBvc2l0b3IvQ29tcG9zaXRvcic7XG5pbXBvcnQgQ29tcG9TY2VuZU5vZGUgZnJvbSAnLi9jb21wb3NpdG9yL1NjZW5lTm9kZSc7XG5pbXBvcnQgQ29tcG9UZXh0dXJlTm9kZSBmcm9tICcuL2NvbXBvc2l0b3IvVGV4dHVyZU5vZGUnO1xuaW1wb3J0IENvbXBvRmlsdGVyTm9kZSBmcm9tICcuL2NvbXBvc2l0b3IvRmlsdGVyTm9kZSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4vU2hhZGVyJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4vVGV4dHVyZTJEJztcbmltcG9ydCBUZXh0dXJlQ3ViZSBmcm9tICcuL1RleHR1cmVDdWJlJztcblxuaW1wb3J0IHJlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IgZnJvbSAnLi9zaGFkZXIvcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvcic7XG5cbnJlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IoU2hhZGVyKTtcblxudmFyIHNoYWRlclNvdXJjZVJlZyA9IC9eI3NvdXJjZVxcKCguKj8pXFwpLztcblxuLyoqXG4gKiBAbmFtZSBjbGF5LmNyZWF0ZUNvbXBvc2l0b3JcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R9IGpzb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEByZXR1cm4ge2NsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yfVxuICovXG5mdW5jdGlvbiBjcmVhdGVDb21wb3NpdG9yKGpzb24sIG9wdHMpIHtcbiAgICB2YXIgY29tcG9zaXRvciA9IG5ldyBDb21wb3NpdG9yKCk7XG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICB2YXIgbGliID0ge1xuICAgICAgICB0ZXh0dXJlczoge30sXG4gICAgICAgIHBhcmFtZXRlcnM6IHt9XG4gICAgfTtcbiAgICB2YXIgYWZ0ZXJMb2FkID0gZnVuY3Rpb24oc2hhZGVyTGliLCB0ZXh0dXJlTGliKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwganNvbi5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5vZGVJbmZvID0ganNvbi5ub2Rlc1tpXTtcbiAgICAgICAgICAgIHZhciBub2RlID0gY3JlYXRlTm9kZShub2RlSW5mbywgbGliLCBvcHRzKTtcbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgY29tcG9zaXRvci5hZGROb2RlKG5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZvciAodmFyIG5hbWUgaW4ganNvbi5wYXJhbWV0ZXJzKSB7XG4gICAgICAgIHZhciBwYXJhbUluZm8gPSBqc29uLnBhcmFtZXRlcnNbbmFtZV07XG4gICAgICAgIGxpYi5wYXJhbWV0ZXJzW25hbWVdID0gY29udmVydFBhcmFtZXRlcihwYXJhbUluZm8pO1xuICAgIH1cbiAgICAvLyBUT0RPIGxvYWQgdGV4dHVyZSBhc3luY2hyb25vdXNcbiAgICBsb2FkVGV4dHVyZXMoanNvbiwgbGliLCBvcHRzLCBmdW5jdGlvbih0ZXh0dXJlTGliKSB7XG4gICAgICAgIGxpYi50ZXh0dXJlcyA9IHRleHR1cmVMaWI7XG4gICAgICAgIGFmdGVyTG9hZCgpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbXBvc2l0b3I7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU5vZGUobm9kZUluZm8sIGxpYiwgb3B0cykge1xuICAgIHZhciB0eXBlID0gbm9kZUluZm8udHlwZSB8fCAnZmlsdGVyJztcbiAgICB2YXIgc2hhZGVyU291cmNlO1xuICAgIHZhciBpbnB1dHM7XG4gICAgdmFyIG91dHB1dHM7XG5cbiAgICBpZiAodHlwZSA9PT0gJ2ZpbHRlcicpIHtcbiAgICAgICAgdmFyIHNoYWRlckV4cCA9IG5vZGVJbmZvLnNoYWRlci50cmltKCk7XG4gICAgICAgIHZhciByZXMgPSBzaGFkZXJTb3VyY2VSZWcuZXhlYyhzaGFkZXJFeHApO1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICBzaGFkZXJTb3VyY2UgPSBTaGFkZXIuc291cmNlKHJlc1sxXS50cmltKCkpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHNoYWRlckV4cC5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgICAgICAgc2hhZGVyU291cmNlID0gbGliLnNoYWRlcnNbc2hhZGVyRXhwLnN1YnN0cigxKV07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFzaGFkZXJTb3VyY2UpIHtcbiAgICAgICAgICAgIHNoYWRlclNvdXJjZSA9IHNoYWRlckV4cDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXNoYWRlclNvdXJjZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5vZGVJbmZvLmlucHV0cykge1xuICAgICAgICBpbnB1dHMgPSB7fTtcbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBub2RlSW5mby5pbnB1dHMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygbm9kZUluZm8uaW5wdXRzW25hbWVdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIGlucHV0c1tuYW1lXSA9IG5vZGVJbmZvLmlucHV0c1tuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlucHV0c1tuYW1lXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZUluZm8uaW5wdXRzW25hbWVdLm5vZGUsXG4gICAgICAgICAgICAgICAgICAgIHBpbjogbm9kZUluZm8uaW5wdXRzW25hbWVdLnBpblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKG5vZGVJbmZvLm91dHB1dHMpIHtcbiAgICAgICAgb3V0cHV0cyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG5vZGVJbmZvLm91dHB1dHMpIHtcbiAgICAgICAgICAgIHZhciBvdXRwdXRJbmZvID0gbm9kZUluZm8ub3V0cHV0c1tuYW1lXTtcbiAgICAgICAgICAgIG91dHB1dHNbbmFtZV0gPSB7fTtcbiAgICAgICAgICAgIGlmIChvdXRwdXRJbmZvLmF0dGFjaG1lbnQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG91dHB1dHNbbmFtZV0uYXR0YWNobWVudCA9IG91dHB1dEluZm8uYXR0YWNobWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXRwdXRJbmZvLmtlZXBMYXN0RnJhbWUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIG91dHB1dHNbbmFtZV0ua2VlcExhc3RGcmFtZSA9IG91dHB1dEluZm8ua2VlcExhc3RGcmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXRwdXRJbmZvLm91dHB1dExhc3RGcmFtZSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgb3V0cHV0c1tuYW1lXS5vdXRwdXRMYXN0RnJhbWUgPSBvdXRwdXRJbmZvLm91dHB1dExhc3RGcmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvdXRwdXRJbmZvLnBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRzW25hbWVdLnBhcmFtZXRlcnMgPSBjb252ZXJ0UGFyYW1ldGVyKG91dHB1dEluZm8ucGFyYW1ldGVycyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIG5vZGU7XG4gICAgaWYgKHR5cGUgPT09ICdzY2VuZScpIHtcbiAgICAgICAgbm9kZSA9IG5ldyBDb21wb1NjZW5lTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBub2RlSW5mby5uYW1lLFxuICAgICAgICAgICAgc2NlbmU6IG9wdHMuc2NlbmUsXG4gICAgICAgICAgICBjYW1lcmE6IG9wdHMuY2FtZXJhLFxuICAgICAgICAgICAgb3V0cHV0czogb3V0cHV0c1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZSA9PT0gJ3RleHR1cmUnKSB7XG4gICAgICAgIG5vZGUgPSBuZXcgQ29tcG9UZXh0dXJlTm9kZSh7XG4gICAgICAgICAgICBuYW1lOiBub2RlSW5mby5uYW1lLFxuICAgICAgICAgICAgb3V0cHV0czogb3V0cHV0c1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLy8gRGVmYXVsdCBpcyBmaWx0ZXJcbiAgICBlbHNlIHtcbiAgICAgICAgbm9kZSA9IG5ldyBDb21wb0ZpbHRlck5vZGUoe1xuICAgICAgICAgICAgbmFtZTogbm9kZUluZm8ubmFtZSxcbiAgICAgICAgICAgIHNoYWRlcjogc2hhZGVyU291cmNlLFxuICAgICAgICAgICAgaW5wdXRzOiBpbnB1dHMsXG4gICAgICAgICAgICBvdXRwdXRzOiBvdXRwdXRzXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAobm9kZSkge1xuICAgICAgICBpZiAobm9kZUluZm8ucGFyYW1ldGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiBub2RlSW5mby5wYXJhbWV0ZXJzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IG5vZGVJbmZvLnBhcmFtZXRlcnNbbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IHZhbC50cmltKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWwuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbCA9IGxpYi50ZXh0dXJlc1t2YWwuc3Vic3RyKDEpXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUub24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2JlZm9yZXJlbmRlcicsIGNyZWF0ZVNpemVTZXRIYW5kbGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCB0cnlDb252ZXJ0RXhwcih2YWwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUub24oJ2JlZm9yZXJlbmRlcicsIHZhbCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5vZGUuc2V0UGFyYW1ldGVyKG5hbWUsIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGVJbmZvLmRlZmluZXMgJiYgbm9kZS5wYXNzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBuYW1lIGluIG5vZGVJbmZvLmRlZmluZXMpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gbm9kZUluZm8uZGVmaW5lc1tuYW1lXTtcbiAgICAgICAgICAgICAgICBub2RlLnBhc3MubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsIG5hbWUsIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vZGU7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRXaWR0aEZ1bmMod2lkdGgsIGhlaWdodCkge1xuICAgIHJldHVybiB3aWR0aDtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRIZWlnaHRGdW5jKHdpZHRoLCBoZWlnaHQpIHtcbiAgICByZXR1cm4gaGVpZ2h0O1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UGFyYW1ldGVyKHBhcmFtSW5mbykge1xuICAgIHZhciBwYXJhbSA9IHt9O1xuICAgIGlmICghcGFyYW1JbmZvKSB7XG4gICAgICAgIHJldHVybiBwYXJhbTtcbiAgICB9XG4gICAgWyd0eXBlJywgJ21pbkZpbHRlcicsICdtYWdGaWx0ZXInLCAnd3JhcFMnLCAnd3JhcFQnLCAnZmxpcFknLCAndXNlTWlwbWFwJ11cbiAgICAgICAgLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IHBhcmFtSW5mb1tuYW1lXTtcbiAgICAgICAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgc3RyaW5nIHRvIGVudW1cbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gVGV4dHVyZVt2YWxdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJhbVtuYW1lXSA9IHZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB2YXIgc2l6ZVNjYWxlID0gcGFyYW1JbmZvLnNjYWxlIHx8IDE7XG4gICAgWyd3aWR0aCcsICdoZWlnaHQnXVxuICAgICAgICAuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICBpZiAocGFyYW1JbmZvW25hbWVdICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFsID0gcGFyYW1JbmZvW25hbWVdO1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICB2YWwgPSB2YWwudHJpbSgpO1xuICAgICAgICAgICAgICAgICAgICBwYXJhbVtuYW1lXSA9IGNyZWF0ZVNpemVQYXJzZXIoXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lLCB0cnlDb252ZXJ0RXhwcih2YWwpLCBzaXplU2NhbGVcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtW25hbWVdID0gdmFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgaWYgKCFwYXJhbS53aWR0aCkge1xuICAgICAgICBwYXJhbS53aWR0aCA9IGRlZmF1bHRXaWR0aEZ1bmM7XG4gICAgfVxuICAgIGlmICghcGFyYW0uaGVpZ2h0KSB7XG4gICAgICAgIHBhcmFtLmhlaWdodCA9IGRlZmF1bHRIZWlnaHRGdW5jO1xuICAgIH1cblxuICAgIGlmIChwYXJhbUluZm8udXNlTWlwbWFwICE9IG51bGwpIHtcbiAgICAgICAgcGFyYW0udXNlTWlwbWFwID0gcGFyYW1JbmZvLnVzZU1pcG1hcDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtO1xufVxuXG5mdW5jdGlvbiBsb2FkVGV4dHVyZXMoanNvbiwgbGliLCBvcHRzLCBjYWxsYmFjaykge1xuICAgIGlmICghanNvbi50ZXh0dXJlcykge1xuICAgICAgICBjYWxsYmFjayh7fSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRleHR1cmVzID0ge307XG4gICAgdmFyIGxvYWRpbmcgPSAwO1xuXG4gICAgdmFyIGNiZCA9IGZhbHNlO1xuICAgIHZhciB0ZXh0dXJlUm9vdFBhdGggPSBvcHRzLnRleHR1cmVSb290UGF0aDtcbiAgICB1dGlsLmVhY2goanNvbi50ZXh0dXJlcywgZnVuY3Rpb24odGV4dHVyZUluZm8sIG5hbWUpIHtcbiAgICAgICAgdmFyIHRleHR1cmU7XG4gICAgICAgIHZhciBwYXRoID0gdGV4dHVyZUluZm8ucGF0aDtcbiAgICAgICAgdmFyIHBhcmFtZXRlcnMgPSBjb252ZXJ0UGFyYW1ldGVyKHRleHR1cmVJbmZvLnBhcmFtZXRlcnMpO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShwYXRoKSAmJiBwYXRoLmxlbmd0aCA9PT0gNikge1xuICAgICAgICAgICAgaWYgKHRleHR1cmVSb290UGF0aCkge1xuICAgICAgICAgICAgICAgIHBhdGggPSBwYXRoLm1hcChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1dGlsLnJlbGF0aXZlMmFic29sdXRlKGl0ZW0sIHRleHR1cmVSb290UGF0aCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0dXJlID0gbmV3IFRleHR1cmVDdWJlKHBhcmFtZXRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodGV4dHVyZVJvb3RQYXRoKSB7XG4gICAgICAgICAgICAgICAgcGF0aCA9IHV0aWwucmVsYXRpdmUyYWJzb2x1dGUocGF0aCwgdGV4dHVyZVJvb3RQYXRoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHBhcmFtZXRlcnMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGV4dHVyZS5sb2FkKHBhdGgpO1xuICAgICAgICBsb2FkaW5nKys7XG4gICAgICAgIHRleHR1cmUub25jZSgnc3VjY2VzcycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGV4dHVyZXNbbmFtZV0gPSB0ZXh0dXJlO1xuICAgICAgICAgICAgbG9hZGluZy0tO1xuICAgICAgICAgICAgaWYgKGxvYWRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0ZXh0dXJlcyk7XG4gICAgICAgICAgICAgICAgY2JkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAobG9hZGluZyA9PT0gMCAmJiAhY2JkKSB7XG4gICAgICAgIGNhbGxiYWNrKHRleHR1cmVzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpemVTZXRIYW5kbGVyKG5hbWUsIGV4cHJGdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICAvLyBQRU5ESU5HIHZpZXdwb3J0IHNpemUgb3Igd2luZG93IHNpemVcbiAgICAgICAgdmFyIGRwciA9IHJlbmRlcmVyLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgLy8gUEVORElORyBJZiBtdWx0aXBseSBkcHIgP1xuICAgICAgICB2YXIgd2lkdGggPSByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIHZhciByZXN1bHQgPSBleHByRnVuYyh3aWR0aCwgaGVpZ2h0LCBkcHIpO1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcihuYW1lLCByZXN1bHQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpemVQYXJzZXIobmFtZSwgZXhwckZ1bmMsIHNjYWxlKSB7XG4gICAgc2NhbGUgPSBzY2FsZSB8fCAxO1xuICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdmFyIGRwciA9IHJlbmRlcmVyLmdldERldmljZVBpeGVsUmF0aW8oKTtcbiAgICAgICAgdmFyIHdpZHRoID0gcmVuZGVyZXIuZ2V0V2lkdGgoKSAqIHNjYWxlO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCkgKiBzY2FsZTtcbiAgICAgICAgcmV0dXJuIGV4cHJGdW5jKHdpZHRoLCBoZWlnaHQsIGRwcik7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdHJ5Q29udmVydEV4cHIoc3RyaW5nKSB7XG4gICAgLy8gUEVORElOR1xuICAgIHZhciBleHByUmVzID0gL15leHByXFwoKC4qKVxcKSQvLmV4ZWMoc3RyaW5nKTtcbiAgICBpZiAoZXhwclJlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmFyIGZ1bmMgPSBuZXcgRnVuY3Rpb24oJ3dpZHRoJywgJ2hlaWdodCcsICdkcHInLCAncmV0dXJuICcgKyBleHByUmVzWzFdKTtcbiAgICAgICAgICAgIC8vIFRyeSBydW4gdFxuICAgICAgICAgICAgZnVuYygxLCAxKTtcblxuICAgICAgICAgICAgcmV0dXJuIGZ1bmM7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBleHByZXNzaW9uLicpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDb21wb3NpdG9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NyZWF0ZUNvbXBvc2l0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///62\n");

/***/ }),
/* 63 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__ = __webpack_require__(45);\n\n\n\n\n\n/**\n * @constructor clay.geometry.Cone\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.topRadius]\n * @param {number} [opt.bottomRadius]\n * @param {number} [opt.height]\n * @param {number} [opt.capSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Cone = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(/** @lends clay.geometry.Cone# */ {\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    topRadius: 0,\n\n    /**\n     * @type {number}\n     */\n    bottomRadius: 1,\n\n    /**\n     * @type {number}\n     */\n    height: 2,\n\n    /**\n     * @type {number}\n     */\n    capSegments: 20,\n\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cone.prototype */\n{\n    /**\n     * Build cone geometry\n     */\n    build: function() {\n        var positions = [];\n        var texcoords = [];\n        var faces = [];\n        positions.length = 0;\n        texcoords.length = 0;\n        faces.length = 0;\n        // Top cap\n        var capSegRadial = Math.PI * 2 / this.capSegments;\n\n        var topCap = [];\n        var bottomCap = [];\n\n        var r1 = this.topRadius;\n        var r2 = this.bottomRadius;\n        var y = this.height / 2;\n\n        var c1 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, y, 0);\n        var c2 = __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(0, -y, 0);\n        for (var i = 0; i < this.capSegments; i++) {\n            var theta = i * capSegRadial;\n            var x = r1 * Math.sin(theta);\n            var z = r1 * Math.cos(theta);\n            topCap.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(x, y, z));\n\n            x = r2 * Math.sin(theta);\n            z = r2 * Math.cos(theta);\n            bottomCap.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].fromValues(x, -y, z));\n        }\n\n        // Build top cap\n        positions.push(c1);\n        // FIXME\n        texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(0, 1));\n        var n = this.capSegments;\n        for (var i = 0; i < n; i++) {\n            positions.push(topCap[i]);\n            // FIXME\n            texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, 0));\n            faces.push([0, i+1, (i+1) % n + 1]);\n        }\n\n        // Build bottom cap\n        var offset = positions.length;\n        positions.push(c2);\n        texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(0, 1));\n        for (var i = 0; i < n; i++) {\n            positions.push(bottomCap[i]);\n            // FIXME\n            texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, 0));\n            faces.push([offset, offset+((i+1) % n + 1), offset+i+1]);\n        }\n\n        // Build side\n        offset = positions.length;\n        var n2 = this.heightSegments;\n        for (var i = 0; i < n; i++) {\n            for (var j = 0; j < n2+1; j++) {\n                var v = j / n2;\n                positions.push(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].lerp(__WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].create(), topCap[i], bottomCap[i], v));\n                texcoords.push(__WEBPACK_IMPORTED_MODULE_3__glmatrix_vec2__[\"a\" /* default */].fromValues(i / n, v));\n            }\n        }\n        for (var i = 0; i < n; i++) {\n            for (var j = 0; j < n2; j++) {\n                var i1 = i * (n2 + 1) + j;\n                var i2 = ((i + 1) % n) * (n2 + 1) + j;\n                var i3 = ((i + 1) % n) * (n2 + 1) + j + 1;\n                var i4 = i * (n2 + 1) + j + 1;\n                faces.push([offset+i2, offset+i1, offset+i4]);\n                faces.push([offset+i4, offset+i3, offset+i2]);\n            }\n        }\n\n        this.attributes.position.fromArray(positions);\n        this.attributes.texcoord0.fromArray(texcoords);\n\n        this.initIndicesFromArray(faces);\n\n        this.generateVertexNormals();\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_1__math_BoundingBox__[\"a\" /* default */]();\n        var r = Math.max(this.topRadius, this.bottomRadius);\n        this.boundingBox.min.set(-r, -this.height/2, -r);\n        this.boundingBox.max.set(r, this.height/2, r);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cone);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L0NvbmUuanM/NGE0NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4uL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5pbXBvcnQgdmVjMiBmcm9tICcuLi9nbG1hdHJpeC92ZWMyJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5nZW9tZXRyeS5Db25lXG4gKiBAZXh0ZW5kcyBjbGF5Lkdlb21ldHJ5XG4gKiBAcGFyYW0ge09iamVjdH0gW29wdF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LnRvcFJhZGl1c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmJvdHRvbVJhZGl1c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmhlaWdodF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0LmNhcFNlZ21lbnRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuaGVpZ2h0U2VnbWVudHNdXG4gKi9cbnZhciBDb25lID0gR2VvbWV0cnkuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5Db25lIyAqLyB7XG4gICAgZHluYW1pYzogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0b3BSYWRpdXM6IDAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGJvdHRvbVJhZGl1czogMSxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0OiAyLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBjYXBTZWdtZW50czogMjAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGhlaWdodFNlZ21lbnRzOiAxXG59LCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmJ1aWxkKCk7XG59LFxuLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LkNvbmUucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgY29uZSBnZW9tZXRyeVxuICAgICAqL1xuICAgIGJ1aWxkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IFtdO1xuICAgICAgICB2YXIgdGV4Y29vcmRzID0gW107XG4gICAgICAgIHZhciBmYWNlcyA9IFtdO1xuICAgICAgICBwb3NpdGlvbnMubGVuZ3RoID0gMDtcbiAgICAgICAgdGV4Y29vcmRzLmxlbmd0aCA9IDA7XG4gICAgICAgIGZhY2VzLmxlbmd0aCA9IDA7XG4gICAgICAgIC8vIFRvcCBjYXBcbiAgICAgICAgdmFyIGNhcFNlZ1JhZGlhbCA9IE1hdGguUEkgKiAyIC8gdGhpcy5jYXBTZWdtZW50cztcblxuICAgICAgICB2YXIgdG9wQ2FwID0gW107XG4gICAgICAgIHZhciBib3R0b21DYXAgPSBbXTtcblxuICAgICAgICB2YXIgcjEgPSB0aGlzLnRvcFJhZGl1cztcbiAgICAgICAgdmFyIHIyID0gdGhpcy5ib3R0b21SYWRpdXM7XG4gICAgICAgIHZhciB5ID0gdGhpcy5oZWlnaHQgLyAyO1xuXG4gICAgICAgIHZhciBjMSA9IHZlYzMuZnJvbVZhbHVlcygwLCB5LCAwKTtcbiAgICAgICAgdmFyIGMyID0gdmVjMy5mcm9tVmFsdWVzKDAsIC15LCAwKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNhcFNlZ21lbnRzOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0aGV0YSA9IGkgKiBjYXBTZWdSYWRpYWw7XG4gICAgICAgICAgICB2YXIgeCA9IHIxICogTWF0aC5zaW4odGhldGEpO1xuICAgICAgICAgICAgdmFyIHogPSByMSAqIE1hdGguY29zKHRoZXRhKTtcbiAgICAgICAgICAgIHRvcENhcC5wdXNoKHZlYzMuZnJvbVZhbHVlcyh4LCB5LCB6KSk7XG5cbiAgICAgICAgICAgIHggPSByMiAqIE1hdGguc2luKHRoZXRhKTtcbiAgICAgICAgICAgIHogPSByMiAqIE1hdGguY29zKHRoZXRhKTtcbiAgICAgICAgICAgIGJvdHRvbUNhcC5wdXNoKHZlYzMuZnJvbVZhbHVlcyh4LCAteSwgeikpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQnVpbGQgdG9wIGNhcFxuICAgICAgICBwb3NpdGlvbnMucHVzaChjMSk7XG4gICAgICAgIC8vIEZJWE1FXG4gICAgICAgIHRleGNvb3Jkcy5wdXNoKHZlYzIuZnJvbVZhbHVlcygwLCAxKSk7XG4gICAgICAgIHZhciBuID0gdGhpcy5jYXBTZWdtZW50cztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHRvcENhcFtpXSk7XG4gICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgdGV4Y29vcmRzLnB1c2godmVjMi5mcm9tVmFsdWVzKGkgLyBuLCAwKSk7XG4gICAgICAgICAgICBmYWNlcy5wdXNoKFswLCBpKzEsIChpKzEpICUgbiArIDFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJ1aWxkIGJvdHRvbSBjYXBcbiAgICAgICAgdmFyIG9mZnNldCA9IHBvc2l0aW9ucy5sZW5ndGg7XG4gICAgICAgIHBvc2l0aW9ucy5wdXNoKGMyKTtcbiAgICAgICAgdGV4Y29vcmRzLnB1c2godmVjMi5mcm9tVmFsdWVzKDAsIDEpKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKGJvdHRvbUNhcFtpXSk7XG4gICAgICAgICAgICAvLyBGSVhNRVxuICAgICAgICAgICAgdGV4Y29vcmRzLnB1c2godmVjMi5mcm9tVmFsdWVzKGkgLyBuLCAwKSk7XG4gICAgICAgICAgICBmYWNlcy5wdXNoKFtvZmZzZXQsIG9mZnNldCsoKGkrMSkgJSBuICsgMSksIG9mZnNldCtpKzFdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJ1aWxkIHNpZGVcbiAgICAgICAgb2Zmc2V0ID0gcG9zaXRpb25zLmxlbmd0aDtcbiAgICAgICAgdmFyIG4yID0gdGhpcy5oZWlnaHRTZWdtZW50cztcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbjIrMTsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHYgPSBqIC8gbjI7XG4gICAgICAgICAgICAgICAgcG9zaXRpb25zLnB1c2godmVjMy5sZXJwKHZlYzMuY3JlYXRlKCksIHRvcENhcFtpXSwgYm90dG9tQ2FwW2ldLCB2KSk7XG4gICAgICAgICAgICAgICAgdGV4Y29vcmRzLnB1c2godmVjMi5mcm9tVmFsdWVzKGkgLyBuLCB2KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbjI7IGorKykge1xuICAgICAgICAgICAgICAgIHZhciBpMSA9IGkgKiAobjIgKyAxKSArIGo7XG4gICAgICAgICAgICAgICAgdmFyIGkyID0gKChpICsgMSkgJSBuKSAqIChuMiArIDEpICsgajtcbiAgICAgICAgICAgICAgICB2YXIgaTMgPSAoKGkgKyAxKSAlIG4pICogKG4yICsgMSkgKyBqICsgMTtcbiAgICAgICAgICAgICAgICB2YXIgaTQgPSBpICogKG4yICsgMSkgKyBqICsgMTtcbiAgICAgICAgICAgICAgICBmYWNlcy5wdXNoKFtvZmZzZXQraTIsIG9mZnNldCtpMSwgb2Zmc2V0K2k0XSk7XG4gICAgICAgICAgICAgICAgZmFjZXMucHVzaChbb2Zmc2V0K2k0LCBvZmZzZXQraTMsIG9mZnNldCtpMl0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLnBvc2l0aW9uLmZyb21BcnJheShwb3NpdGlvbnMpO1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudGV4Y29vcmQwLmZyb21BcnJheSh0ZXhjb29yZHMpO1xuXG4gICAgICAgIHRoaXMuaW5pdEluZGljZXNGcm9tQXJyYXkoZmFjZXMpO1xuXG4gICAgICAgIHRoaXMuZ2VuZXJhdGVWZXJ0ZXhOb3JtYWxzKCk7XG5cbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB2YXIgciA9IE1hdGgubWF4KHRoaXMudG9wUmFkaXVzLCB0aGlzLmJvdHRvbVJhZGl1cyk7XG4gICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWluLnNldCgtciwgLXRoaXMuaGVpZ2h0LzIsIC1yKTtcbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5tYXguc2V0KHIsIHRoaXMuaGVpZ2h0LzIsIHIpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBDb25lO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L0NvbmUuanNcbi8vIG1vZHVsZSBpZCA9IDYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///63\n");

/***/ }),
/* 64 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n// Generate halton sequence\n// https://en.wikipedia.org/wiki/Halton_sequence\nfunction halton(index, base) {\n\n    var result = 0;\n    var f = 1 / base;\n    var i = index;\n    while (i > 0) {\n        result = result + f * (i % base);\n        i = Math.floor(i / base);\n        f = f / base;\n    }\n    return result;\n}\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (halton);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9oYWx0b24uanM/NWI0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJcbi8vIEdlbmVyYXRlIGhhbHRvbiBzZXF1ZW5jZVxuLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSGFsdG9uX3NlcXVlbmNlXG5mdW5jdGlvbiBoYWx0b24oaW5kZXgsIGJhc2UpIHtcblxuICAgIHZhciByZXN1bHQgPSAwO1xuICAgIHZhciBmID0gMSAvIGJhc2U7XG4gICAgdmFyIGkgPSBpbmRleDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgZiAqIChpICUgYmFzZSk7XG4gICAgICAgIGkgPSBNYXRoLmZsb29yKGkgLyBiYXNlKTtcbiAgICAgICAgZiA9IGYgLyBiYXNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGhhbHRvbjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL2hhbHRvbi5qc1xuLy8gbW9kdWxlIGlkID0gNjRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///64\n");

/***/ }),
/* 65 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n/* unused harmony reexport interpolate */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__array__ = __webpack_require__(119);\n/* unused harmony reexport interpolateArray */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basis__ = __webpack_require__(69);\n/* unused harmony reexport interpolateBasis */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__basisClosed__ = __webpack_require__(117);\n/* unused harmony reexport interpolateBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__date__ = __webpack_require__(120);\n/* unused harmony reexport interpolateDate */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__discrete__ = __webpack_require__(227);\n/* unused harmony reexport interpolateDiscrete */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__hue__ = __webpack_require__(228);\n/* unused harmony reexport interpolateHue */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__number__ = __webpack_require__(43);\n/* unused harmony reexport interpolateNumber */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__object__ = __webpack_require__(121);\n/* unused harmony reexport interpolateObject */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__round__ = __webpack_require__(229);\n/* unused harmony reexport interpolateRound */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__string__ = __webpack_require__(122);\n/* unused harmony reexport interpolateString */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__transform_index__ = __webpack_require__(230);\n/* unused harmony reexport interpolateTransformCss */\n/* unused harmony reexport interpolateTransformSvg */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__zoom__ = __webpack_require__(233);\n/* unused harmony reexport interpolateZoom */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__rgb__ = __webpack_require__(116);\n/* unused harmony reexport interpolateRgb */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return __WEBPACK_IMPORTED_MODULE_13__rgb__[\"b\"]; });\n/* unused harmony reexport interpolateRgbBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__hsl__ = __webpack_require__(234);\n/* unused harmony reexport interpolateHsl */\n/* unused harmony reexport interpolateHslLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__lab__ = __webpack_require__(235);\n/* unused harmony reexport interpolateLab */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__hcl__ = __webpack_require__(236);\n/* unused harmony reexport interpolateHcl */\n/* unused harmony reexport interpolateHclLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__cubehelix__ = __webpack_require__(237);\n/* unused harmony reexport interpolateCubehelix */\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return __WEBPACK_IMPORTED_MODULE_17__cubehelix__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__piecewise__ = __webpack_require__(238);\n/* unused harmony reexport piecewise */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__quantize__ = __webpack_require__(239);\n/* unused harmony reexport quantize */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2luZGV4LmpzPzI3MjAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlfSBmcm9tIFwiLi92YWx1ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlQXJyYXl9IGZyb20gXCIuL2FycmF5XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCYXNpc30gZnJvbSBcIi4vYmFzaXNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUJhc2lzQ2xvc2VkfSBmcm9tIFwiLi9iYXNpc0Nsb3NlZFwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlRGF0ZX0gZnJvbSBcIi4vZGF0ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlRGlzY3JldGV9IGZyb20gXCIuL2Rpc2NyZXRlXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVIdWV9IGZyb20gXCIuL2h1ZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlTnVtYmVyfSBmcm9tIFwiLi9udW1iZXJcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZU9iamVjdH0gZnJvbSBcIi4vb2JqZWN0XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSb3VuZH0gZnJvbSBcIi4vcm91bmRcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVN0cmluZ30gZnJvbSBcIi4vc3RyaW5nXCI7XG5leHBvcnQge2ludGVycG9sYXRlVHJhbnNmb3JtQ3NzLCBpbnRlcnBvbGF0ZVRyYW5zZm9ybVN2Z30gZnJvbSBcIi4vdHJhbnNmb3JtL2luZGV4XCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVab29tfSBmcm9tIFwiLi96b29tXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZ2IsIHJnYkJhc2lzIGFzIGludGVycG9sYXRlUmdiQmFzaXMsIHJnYkJhc2lzQ2xvc2VkIGFzIGludGVycG9sYXRlUmdiQmFzaXNDbG9zZWR9IGZyb20gXCIuL3JnYlwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlSHNsLCBoc2xMb25nIGFzIGludGVycG9sYXRlSHNsTG9uZ30gZnJvbSBcIi4vaHNsXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVMYWJ9IGZyb20gXCIuL2xhYlwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlSGNsLCBoY2xMb25nIGFzIGludGVycG9sYXRlSGNsTG9uZ30gZnJvbSBcIi4vaGNsXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVDdWJlaGVsaXgsIGN1YmVoZWxpeExvbmcgYXMgaW50ZXJwb2xhdGVDdWJlaGVsaXhMb25nfSBmcm9tIFwiLi9jdWJlaGVsaXhcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBwaWVjZXdpc2V9IGZyb20gXCIuL3BpZWNld2lzZVwiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHF1YW50aXplfSBmcm9tIFwiLi9xdWFudGl6ZVwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSA2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///65\n");

/***/ }),
/* 66 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__rgb__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__array__ = __webpack_require__(119);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__date__ = __webpack_require__(120);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__number__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__object__ = __webpack_require__(121);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__string__ = __webpack_require__(122);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__constant__ = __webpack_require__(118);\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? Object(__WEBPACK_IMPORTED_MODULE_7__constant__[\"a\" /* default */])(b)\n      : (t === \"number\" ? __WEBPACK_IMPORTED_MODULE_4__number__[\"a\" /* default */]\n      : t === \"string\" ? ((c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"a\" /* color */])(b)) ? (b = c, __WEBPACK_IMPORTED_MODULE_1__rgb__[\"a\" /* default */]) : __WEBPACK_IMPORTED_MODULE_6__string__[\"a\" /* default */])\n      : b instanceof __WEBPACK_IMPORTED_MODULE_0_d3_color__[\"a\" /* color */] ? __WEBPACK_IMPORTED_MODULE_1__rgb__[\"a\" /* default */]\n      : b instanceof Date ? __WEBPACK_IMPORTED_MODULE_3__date__[\"a\" /* default */]\n      : Array.isArray(b) ? __WEBPACK_IMPORTED_MODULE_2__array__[\"a\" /* default */]\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? __WEBPACK_IMPORTED_MODULE_5__object__[\"a\" /* default */]\n      : __WEBPACK_IMPORTED_MODULE_4__number__[\"a\" /* default */])(a, b);\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3ZhbHVlLmpzP2FmM2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjb2xvcn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgcmdiIGZyb20gXCIuL3JnYlwiO1xuaW1wb3J0IGFycmF5IGZyb20gXCIuL2FycmF5XCI7XG5pbXBvcnQgZGF0ZSBmcm9tIFwiLi9kYXRlXCI7XG5pbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlclwiO1xuaW1wb3J0IG9iamVjdCBmcm9tIFwiLi9vYmplY3RcIjtcbmltcG9ydCBzdHJpbmcgZnJvbSBcIi4vc3RyaW5nXCI7XG5pbXBvcnQgY29uc3RhbnQgZnJvbSBcIi4vY29uc3RhbnRcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgdCA9IHR5cGVvZiBiLCBjO1xuICByZXR1cm4gYiA9PSBudWxsIHx8IHQgPT09IFwiYm9vbGVhblwiID8gY29uc3RhbnQoYilcbiAgICAgIDogKHQgPT09IFwibnVtYmVyXCIgPyBudW1iZXJcbiAgICAgIDogdCA9PT0gXCJzdHJpbmdcIiA/ICgoYyA9IGNvbG9yKGIpKSA/IChiID0gYywgcmdiKSA6IHN0cmluZylcbiAgICAgIDogYiBpbnN0YW5jZW9mIGNvbG9yID8gcmdiXG4gICAgICA6IGIgaW5zdGFuY2VvZiBEYXRlID8gZGF0ZVxuICAgICAgOiBBcnJheS5pc0FycmF5KGIpID8gYXJyYXlcbiAgICAgIDogdHlwZW9mIGIudmFsdWVPZiAhPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBiLnRvU3RyaW5nICE9PSBcImZ1bmN0aW9uXCIgfHwgaXNOYU4oYikgPyBvYmplY3RcbiAgICAgIDogbnVtYmVyKShhLCBiKTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy92YWx1ZS5qc1xuLy8gbW9kdWxlIGlkID0gNjZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///66\n");

/***/ }),
/* 67 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = Color;\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return darker; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return brighter; });\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = color;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = rgbConvert;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = rgb;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = Rgb;\n/* unused harmony export hslConvert */\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = hsl;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n\n\nfunction Color() {}\n\nvar darker = 0.7;\nvar brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex3 = /^#([0-9a-f]{3})$/,\n    reHex6 = /^#([0-9a-f]{6})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nfunction color(format) {\n  var m;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex3.exec(format)) ? (m = parseInt(m[1], 16), new Rgb((m >> 8 & 0xf) | (m >> 4 & 0x0f0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1)) // #f00\n      : (m = reHex6.exec(format)) ? rgbn(parseInt(m[1], 16)) // #ff0000\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nfunction rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nfunction rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nfunction Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Rgb, rgb, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nfunction hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nfunction hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Hsl, hsl, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzPzc1MjUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRlZmluZSwge2V4dGVuZH0gZnJvbSBcIi4vZGVmaW5lXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xvcigpIHt9XG5cbmV4cG9ydCB2YXIgZGFya2VyID0gMC43O1xuZXhwb3J0IHZhciBicmlnaHRlciA9IDEgLyBkYXJrZXI7XG5cbnZhciByZUkgPSBcIlxcXFxzKihbKy1dP1xcXFxkKylcXFxccypcIixcbiAgICByZU4gPSBcIlxcXFxzKihbKy1dP1xcXFxkKlxcXFwuP1xcXFxkKyg/OltlRV1bKy1dP1xcXFxkKyk/KVxcXFxzKlwiLFxuICAgIHJlUCA9IFwiXFxcXHMqKFsrLV0/XFxcXGQqXFxcXC4/XFxcXGQrKD86W2VFXVsrLV0/XFxcXGQrKT8pJVxcXFxzKlwiLFxuICAgIHJlSGV4MyA9IC9eIyhbMC05YS1mXXszfSkkLyxcbiAgICByZUhleDYgPSAvXiMoWzAtOWEtZl17Nn0pJC8sXG4gICAgcmVSZ2JJbnRlZ2VyID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlSSwgcmVJLCByZUldICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5yZ2JcXFxcKFwiICsgW3JlUCwgcmVQLCByZVBdICsgXCJcXFxcKSRcIiksXG4gICAgcmVSZ2JhSW50ZWdlciA9IG5ldyBSZWdFeHAoXCJecmdiYVxcXFwoXCIgKyBbcmVJLCByZUksIHJlSSwgcmVOXSArIFwiXFxcXCkkXCIpLFxuICAgIHJlUmdiYVBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXnJnYmFcXFxcKFwiICsgW3JlUCwgcmVQLCByZVAsIHJlTl0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbFBlcmNlbnQgPSBuZXcgUmVnRXhwKFwiXmhzbFxcXFwoXCIgKyBbcmVOLCByZVAsIHJlUF0gKyBcIlxcXFwpJFwiKSxcbiAgICByZUhzbGFQZXJjZW50ID0gbmV3IFJlZ0V4cChcIl5oc2xhXFxcXChcIiArIFtyZU4sIHJlUCwgcmVQLCByZU5dICsgXCJcXFxcKSRcIik7XG5cbnZhciBuYW1lZCA9IHtcbiAgYWxpY2VibHVlOiAweGYwZjhmZixcbiAgYW50aXF1ZXdoaXRlOiAweGZhZWJkNyxcbiAgYXF1YTogMHgwMGZmZmYsXG4gIGFxdWFtYXJpbmU6IDB4N2ZmZmQ0LFxuICBhenVyZTogMHhmMGZmZmYsXG4gIGJlaWdlOiAweGY1ZjVkYyxcbiAgYmlzcXVlOiAweGZmZTRjNCxcbiAgYmxhY2s6IDB4MDAwMDAwLFxuICBibGFuY2hlZGFsbW9uZDogMHhmZmViY2QsXG4gIGJsdWU6IDB4MDAwMGZmLFxuICBibHVldmlvbGV0OiAweDhhMmJlMixcbiAgYnJvd246IDB4YTUyYTJhLFxuICBidXJseXdvb2Q6IDB4ZGViODg3LFxuICBjYWRldGJsdWU6IDB4NWY5ZWEwLFxuICBjaGFydHJldXNlOiAweDdmZmYwMCxcbiAgY2hvY29sYXRlOiAweGQyNjkxZSxcbiAgY29yYWw6IDB4ZmY3ZjUwLFxuICBjb3JuZmxvd2VyYmx1ZTogMHg2NDk1ZWQsXG4gIGNvcm5zaWxrOiAweGZmZjhkYyxcbiAgY3JpbXNvbjogMHhkYzE0M2MsXG4gIGN5YW46IDB4MDBmZmZmLFxuICBkYXJrYmx1ZTogMHgwMDAwOGIsXG4gIGRhcmtjeWFuOiAweDAwOGI4YixcbiAgZGFya2dvbGRlbnJvZDogMHhiODg2MGIsXG4gIGRhcmtncmF5OiAweGE5YTlhOSxcbiAgZGFya2dyZWVuOiAweDAwNjQwMCxcbiAgZGFya2dyZXk6IDB4YTlhOWE5LFxuICBkYXJra2hha2k6IDB4YmRiNzZiLFxuICBkYXJrbWFnZW50YTogMHg4YjAwOGIsXG4gIGRhcmtvbGl2ZWdyZWVuOiAweDU1NmIyZixcbiAgZGFya29yYW5nZTogMHhmZjhjMDAsXG4gIGRhcmtvcmNoaWQ6IDB4OTkzMmNjLFxuICBkYXJrcmVkOiAweDhiMDAwMCxcbiAgZGFya3NhbG1vbjogMHhlOTk2N2EsXG4gIGRhcmtzZWFncmVlbjogMHg4ZmJjOGYsXG4gIGRhcmtzbGF0ZWJsdWU6IDB4NDgzZDhiLFxuICBkYXJrc2xhdGVncmF5OiAweDJmNGY0ZixcbiAgZGFya3NsYXRlZ3JleTogMHgyZjRmNGYsXG4gIGRhcmt0dXJxdW9pc2U6IDB4MDBjZWQxLFxuICBkYXJrdmlvbGV0OiAweDk0MDBkMyxcbiAgZGVlcHBpbms6IDB4ZmYxNDkzLFxuICBkZWVwc2t5Ymx1ZTogMHgwMGJmZmYsXG4gIGRpbWdyYXk6IDB4Njk2OTY5LFxuICBkaW1ncmV5OiAweDY5Njk2OSxcbiAgZG9kZ2VyYmx1ZTogMHgxZTkwZmYsXG4gIGZpcmVicmljazogMHhiMjIyMjIsXG4gIGZsb3JhbHdoaXRlOiAweGZmZmFmMCxcbiAgZm9yZXN0Z3JlZW46IDB4MjI4YjIyLFxuICBmdWNoc2lhOiAweGZmMDBmZixcbiAgZ2FpbnNib3JvOiAweGRjZGNkYyxcbiAgZ2hvc3R3aGl0ZTogMHhmOGY4ZmYsXG4gIGdvbGQ6IDB4ZmZkNzAwLFxuICBnb2xkZW5yb2Q6IDB4ZGFhNTIwLFxuICBncmF5OiAweDgwODA4MCxcbiAgZ3JlZW46IDB4MDA4MDAwLFxuICBncmVlbnllbGxvdzogMHhhZGZmMmYsXG4gIGdyZXk6IDB4ODA4MDgwLFxuICBob25leWRldzogMHhmMGZmZjAsXG4gIGhvdHBpbms6IDB4ZmY2OWI0LFxuICBpbmRpYW5yZWQ6IDB4Y2Q1YzVjLFxuICBpbmRpZ286IDB4NGIwMDgyLFxuICBpdm9yeTogMHhmZmZmZjAsXG4gIGtoYWtpOiAweGYwZTY4YyxcbiAgbGF2ZW5kZXI6IDB4ZTZlNmZhLFxuICBsYXZlbmRlcmJsdXNoOiAweGZmZjBmNSxcbiAgbGF3bmdyZWVuOiAweDdjZmMwMCxcbiAgbGVtb25jaGlmZm9uOiAweGZmZmFjZCxcbiAgbGlnaHRibHVlOiAweGFkZDhlNixcbiAgbGlnaHRjb3JhbDogMHhmMDgwODAsXG4gIGxpZ2h0Y3lhbjogMHhlMGZmZmYsXG4gIGxpZ2h0Z29sZGVucm9keWVsbG93OiAweGZhZmFkMixcbiAgbGlnaHRncmF5OiAweGQzZDNkMyxcbiAgbGlnaHRncmVlbjogMHg5MGVlOTAsXG4gIGxpZ2h0Z3JleTogMHhkM2QzZDMsXG4gIGxpZ2h0cGluazogMHhmZmI2YzEsXG4gIGxpZ2h0c2FsbW9uOiAweGZmYTA3YSxcbiAgbGlnaHRzZWFncmVlbjogMHgyMGIyYWEsXG4gIGxpZ2h0c2t5Ymx1ZTogMHg4N2NlZmEsXG4gIGxpZ2h0c2xhdGVncmF5OiAweDc3ODg5OSxcbiAgbGlnaHRzbGF0ZWdyZXk6IDB4Nzc4ODk5LFxuICBsaWdodHN0ZWVsYmx1ZTogMHhiMGM0ZGUsXG4gIGxpZ2h0eWVsbG93OiAweGZmZmZlMCxcbiAgbGltZTogMHgwMGZmMDAsXG4gIGxpbWVncmVlbjogMHgzMmNkMzIsXG4gIGxpbmVuOiAweGZhZjBlNixcbiAgbWFnZW50YTogMHhmZjAwZmYsXG4gIG1hcm9vbjogMHg4MDAwMDAsXG4gIG1lZGl1bWFxdWFtYXJpbmU6IDB4NjZjZGFhLFxuICBtZWRpdW1ibHVlOiAweDAwMDBjZCxcbiAgbWVkaXVtb3JjaGlkOiAweGJhNTVkMyxcbiAgbWVkaXVtcHVycGxlOiAweDkzNzBkYixcbiAgbWVkaXVtc2VhZ3JlZW46IDB4M2NiMzcxLFxuICBtZWRpdW1zbGF0ZWJsdWU6IDB4N2I2OGVlLFxuICBtZWRpdW1zcHJpbmdncmVlbjogMHgwMGZhOWEsXG4gIG1lZGl1bXR1cnF1b2lzZTogMHg0OGQxY2MsXG4gIG1lZGl1bXZpb2xldHJlZDogMHhjNzE1ODUsXG4gIG1pZG5pZ2h0Ymx1ZTogMHgxOTE5NzAsXG4gIG1pbnRjcmVhbTogMHhmNWZmZmEsXG4gIG1pc3R5cm9zZTogMHhmZmU0ZTEsXG4gIG1vY2Nhc2luOiAweGZmZTRiNSxcbiAgbmF2YWpvd2hpdGU6IDB4ZmZkZWFkLFxuICBuYXZ5OiAweDAwMDA4MCxcbiAgb2xkbGFjZTogMHhmZGY1ZTYsXG4gIG9saXZlOiAweDgwODAwMCxcbiAgb2xpdmVkcmFiOiAweDZiOGUyMyxcbiAgb3JhbmdlOiAweGZmYTUwMCxcbiAgb3JhbmdlcmVkOiAweGZmNDUwMCxcbiAgb3JjaGlkOiAweGRhNzBkNixcbiAgcGFsZWdvbGRlbnJvZDogMHhlZWU4YWEsXG4gIHBhbGVncmVlbjogMHg5OGZiOTgsXG4gIHBhbGV0dXJxdW9pc2U6IDB4YWZlZWVlLFxuICBwYWxldmlvbGV0cmVkOiAweGRiNzA5MyxcbiAgcGFwYXlhd2hpcDogMHhmZmVmZDUsXG4gIHBlYWNocHVmZjogMHhmZmRhYjksXG4gIHBlcnU6IDB4Y2Q4NTNmLFxuICBwaW5rOiAweGZmYzBjYixcbiAgcGx1bTogMHhkZGEwZGQsXG4gIHBvd2RlcmJsdWU6IDB4YjBlMGU2LFxuICBwdXJwbGU6IDB4ODAwMDgwLFxuICByZWJlY2NhcHVycGxlOiAweDY2MzM5OSxcbiAgcmVkOiAweGZmMDAwMCxcbiAgcm9zeWJyb3duOiAweGJjOGY4ZixcbiAgcm95YWxibHVlOiAweDQxNjllMSxcbiAgc2FkZGxlYnJvd246IDB4OGI0NTEzLFxuICBzYWxtb246IDB4ZmE4MDcyLFxuICBzYW5keWJyb3duOiAweGY0YTQ2MCxcbiAgc2VhZ3JlZW46IDB4MmU4YjU3LFxuICBzZWFzaGVsbDogMHhmZmY1ZWUsXG4gIHNpZW5uYTogMHhhMDUyMmQsXG4gIHNpbHZlcjogMHhjMGMwYzAsXG4gIHNreWJsdWU6IDB4ODdjZWViLFxuICBzbGF0ZWJsdWU6IDB4NmE1YWNkLFxuICBzbGF0ZWdyYXk6IDB4NzA4MDkwLFxuICBzbGF0ZWdyZXk6IDB4NzA4MDkwLFxuICBzbm93OiAweGZmZmFmYSxcbiAgc3ByaW5nZ3JlZW46IDB4MDBmZjdmLFxuICBzdGVlbGJsdWU6IDB4NDY4MmI0LFxuICB0YW46IDB4ZDJiNDhjLFxuICB0ZWFsOiAweDAwODA4MCxcbiAgdGhpc3RsZTogMHhkOGJmZDgsXG4gIHRvbWF0bzogMHhmZjYzNDcsXG4gIHR1cnF1b2lzZTogMHg0MGUwZDAsXG4gIHZpb2xldDogMHhlZTgyZWUsXG4gIHdoZWF0OiAweGY1ZGViMyxcbiAgd2hpdGU6IDB4ZmZmZmZmLFxuICB3aGl0ZXNtb2tlOiAweGY1ZjVmNSxcbiAgeWVsbG93OiAweGZmZmYwMCxcbiAgeWVsbG93Z3JlZW46IDB4OWFjZDMyXG59O1xuXG5kZWZpbmUoQ29sb3IsIGNvbG9yLCB7XG4gIGNvcHk6IGZ1bmN0aW9uKGNoYW5uZWxzKSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24obmV3IHRoaXMuY29uc3RydWN0b3IsIHRoaXMsIGNoYW5uZWxzKTtcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnJnYigpLmRpc3BsYXlhYmxlKCk7XG4gIH0sXG4gIGhleDogY29sb3JfZm9ybWF0SGV4LCAvLyBEZXByZWNhdGVkISBVc2UgY29sb3IuZm9ybWF0SGV4LlxuICBmb3JtYXRIZXg6IGNvbG9yX2Zvcm1hdEhleCxcbiAgZm9ybWF0SHNsOiBjb2xvcl9mb3JtYXRIc2wsXG4gIGZvcm1hdFJnYjogY29sb3JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogY29sb3JfZm9ybWF0UmdiXG59KTtcblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRIZXgoKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0SHNsKCkge1xuICByZXR1cm4gaHNsQ29udmVydCh0aGlzKS5mb3JtYXRIc2woKTtcbn1cblxuZnVuY3Rpb24gY29sb3JfZm9ybWF0UmdiKCkge1xuICByZXR1cm4gdGhpcy5yZ2IoKS5mb3JtYXRSZ2IoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY29sb3IoZm9ybWF0KSB7XG4gIHZhciBtO1xuICBmb3JtYXQgPSAoZm9ybWF0ICsgXCJcIikudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gIHJldHVybiAobSA9IHJlSGV4My5leGVjKGZvcm1hdCkpID8gKG0gPSBwYXJzZUludChtWzFdLCAxNiksIG5ldyBSZ2IoKG0gPj4gOCAmIDB4ZikgfCAobSA+PiA0ICYgMHgwZjApLCAobSA+PiA0ICYgMHhmKSB8IChtICYgMHhmMCksICgobSAmIDB4ZikgPDwgNCkgfCAobSAmIDB4ZiksIDEpKSAvLyAjZjAwXG4gICAgICA6IChtID0gcmVIZXg2LmV4ZWMoZm9ybWF0KSkgPyByZ2JuKHBhcnNlSW50KG1bMV0sIDE2KSkgLy8gI2ZmMDAwMFxuICAgICAgOiAobSA9IHJlUmdiSW50ZWdlci5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdLCBtWzJdLCBtWzNdLCAxKSAvLyByZ2IoMjU1LCAwLCAwKVxuICAgICAgOiAobSA9IHJlUmdiUGVyY2VudC5leGVjKGZvcm1hdCkpID8gbmV3IFJnYihtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCAxKSAvLyByZ2IoMTAwJSwgMCUsIDAlKVxuICAgICAgOiAobSA9IHJlUmdiYUludGVnZXIuZXhlYyhmb3JtYXQpKSA/IHJnYmEobVsxXSwgbVsyXSwgbVszXSwgbVs0XSkgLy8gcmdiYSgyNTUsIDAsIDAsIDEpXG4gICAgICA6IChtID0gcmVSZ2JhUGVyY2VudC5leGVjKGZvcm1hdCkpID8gcmdiYShtWzFdICogMjU1IC8gMTAwLCBtWzJdICogMjU1IC8gMTAwLCBtWzNdICogMjU1IC8gMTAwLCBtWzRdKSAvLyByZ2IoMTAwJSwgMCUsIDAlLCAxKVxuICAgICAgOiAobSA9IHJlSHNsUGVyY2VudC5leGVjKGZvcm1hdCkpID8gaHNsYShtWzFdLCBtWzJdIC8gMTAwLCBtWzNdIC8gMTAwLCAxKSAvLyBoc2woMTIwLCA1MCUsIDUwJSlcbiAgICAgIDogKG0gPSByZUhzbGFQZXJjZW50LmV4ZWMoZm9ybWF0KSkgPyBoc2xhKG1bMV0sIG1bMl0gLyAxMDAsIG1bM10gLyAxMDAsIG1bNF0pIC8vIGhzbGEoMTIwLCA1MCUsIDUwJSwgMSlcbiAgICAgIDogbmFtZWQuaGFzT3duUHJvcGVydHkoZm9ybWF0KSA/IHJnYm4obmFtZWRbZm9ybWF0XSkgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICAgIDogZm9ybWF0ID09PSBcInRyYW5zcGFyZW50XCIgPyBuZXcgUmdiKE5hTiwgTmFOLCBOYU4sIDApXG4gICAgICA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHJnYm4obikge1xuICByZXR1cm4gbmV3IFJnYihuID4+IDE2ICYgMHhmZiwgbiA+PiA4ICYgMHhmZiwgbiAmIDB4ZmYsIDEpO1xufVxuXG5mdW5jdGlvbiByZ2JhKHIsIGcsIGIsIGEpIHtcbiAgaWYgKGEgPD0gMCkgciA9IGcgPSBiID0gTmFOO1xuICByZXR1cm4gbmV3IFJnYihyLCBnLCBiLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJnYkNvbnZlcnQobykge1xuICBpZiAoIShvIGluc3RhbmNlb2YgQ29sb3IpKSBvID0gY29sb3Iobyk7XG4gIGlmICghbykgcmV0dXJuIG5ldyBSZ2I7XG4gIG8gPSBvLnJnYigpO1xuICByZXR1cm4gbmV3IFJnYihvLnIsIG8uZywgby5iLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmdiKHIsIGcsIGIsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyByZ2JDb252ZXJ0KHIpIDogbmV3IFJnYihyLCBnLCBiLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBSZ2IociwgZywgYiwgb3BhY2l0eSkge1xuICB0aGlzLnIgPSArcjtcbiAgdGhpcy5nID0gK2c7XG4gIHRoaXMuYiA9ICtiO1xuICB0aGlzLm9wYWNpdHkgPSArb3BhY2l0eTtcbn1cblxuZGVmaW5lKFJnYiwgcmdiLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gYnJpZ2h0ZXIgOiBNYXRoLnBvdyhicmlnaHRlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBSZ2IodGhpcy5yICogaywgdGhpcy5nICogaywgdGhpcy5iICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfSxcbiAgZGlzcGxheWFibGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAoLTAuNSA8PSB0aGlzLnIgJiYgdGhpcy5yIDwgMjU1LjUpXG4gICAgICAgICYmICgtMC41IDw9IHRoaXMuZyAmJiB0aGlzLmcgPCAyNTUuNSlcbiAgICAgICAgJiYgKC0wLjUgPD0gdGhpcy5iICYmIHRoaXMuYiA8IDI1NS41KVxuICAgICAgICAmJiAoMCA8PSB0aGlzLm9wYWNpdHkgJiYgdGhpcy5vcGFjaXR5IDw9IDEpO1xuICB9LFxuICBoZXg6IHJnYl9mb3JtYXRIZXgsIC8vIERlcHJlY2F0ZWQhIFVzZSBjb2xvci5mb3JtYXRIZXguXG4gIGZvcm1hdEhleDogcmdiX2Zvcm1hdEhleCxcbiAgZm9ybWF0UmdiOiByZ2JfZm9ybWF0UmdiLFxuICB0b1N0cmluZzogcmdiX2Zvcm1hdFJnYlxufSkpO1xuXG5mdW5jdGlvbiByZ2JfZm9ybWF0SGV4KCkge1xuICByZXR1cm4gXCIjXCIgKyBoZXgodGhpcy5yKSArIGhleCh0aGlzLmcpICsgaGV4KHRoaXMuYik7XG59XG5cbmZ1bmN0aW9uIHJnYl9mb3JtYXRSZ2IoKSB7XG4gIHZhciBhID0gdGhpcy5vcGFjaXR5OyBhID0gaXNOYU4oYSkgPyAxIDogTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgYSkpO1xuICByZXR1cm4gKGEgPT09IDEgPyBcInJnYihcIiA6IFwicmdiYShcIilcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKHRoaXMucikgfHwgMCkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh0aGlzLmcpIHx8IDApKSArIFwiLCBcIlxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQodGhpcy5iKSB8fCAwKSlcbiAgICAgICsgKGEgPT09IDEgPyBcIilcIiA6IFwiLCBcIiArIGEgKyBcIilcIik7XG59XG5cbmZ1bmN0aW9uIGhleCh2YWx1ZSkge1xuICB2YWx1ZSA9IE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCh2YWx1ZSkgfHwgMCkpO1xuICByZXR1cm4gKHZhbHVlIDwgMTYgPyBcIjBcIiA6IFwiXCIpICsgdmFsdWUudG9TdHJpbmcoMTYpO1xufVxuXG5mdW5jdGlvbiBoc2xhKGgsIHMsIGwsIGEpIHtcbiAgaWYgKGEgPD0gMCkgaCA9IHMgPSBsID0gTmFOO1xuICBlbHNlIGlmIChsIDw9IDAgfHwgbCA+PSAxKSBoID0gcyA9IE5hTjtcbiAgZWxzZSBpZiAocyA8PSAwKSBoID0gTmFOO1xuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBhKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhzbENvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG5ldyBIc2woby5oLCBvLnMsIG8ubCwgby5vcGFjaXR5KTtcbiAgaWYgKCEobyBpbnN0YW5jZW9mIENvbG9yKSkgbyA9IGNvbG9yKG8pO1xuICBpZiAoIW8pIHJldHVybiBuZXcgSHNsO1xuICBpZiAobyBpbnN0YW5jZW9mIEhzbCkgcmV0dXJuIG87XG4gIG8gPSBvLnJnYigpO1xuICB2YXIgciA9IG8uciAvIDI1NSxcbiAgICAgIGcgPSBvLmcgLyAyNTUsXG4gICAgICBiID0gby5iIC8gMjU1LFxuICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYiksXG4gICAgICBtYXggPSBNYXRoLm1heChyLCBnLCBiKSxcbiAgICAgIGggPSBOYU4sXG4gICAgICBzID0gbWF4IC0gbWluLFxuICAgICAgbCA9IChtYXggKyBtaW4pIC8gMjtcbiAgaWYgKHMpIHtcbiAgICBpZiAociA9PT0gbWF4KSBoID0gKGcgLSBiKSAvIHMgKyAoZyA8IGIpICogNjtcbiAgICBlbHNlIGlmIChnID09PSBtYXgpIGggPSAoYiAtIHIpIC8gcyArIDI7XG4gICAgZWxzZSBoID0gKHIgLSBnKSAvIHMgKyA0O1xuICAgIHMgLz0gbCA8IDAuNSA/IG1heCArIG1pbiA6IDIgLSBtYXggLSBtaW47XG4gICAgaCAqPSA2MDtcbiAgfSBlbHNlIHtcbiAgICBzID0gbCA+IDAgJiYgbCA8IDEgPyAwIDogaDtcbiAgfVxuICByZXR1cm4gbmV3IEhzbChoLCBzLCBsLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaHNsKGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoc2xDb252ZXJ0KGgpIDogbmV3IEhzbChoLCBzLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmZ1bmN0aW9uIEhzbChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLnMgPSArcztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoSHNsLCBoc2wsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIGsgPSBrID09IG51bGwgPyBicmlnaHRlciA6IE1hdGgucG93KGJyaWdodGVyLCBrKTtcbiAgICByZXR1cm4gbmV3IEhzbCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGRhcmtlciA6IE1hdGgucG93KGRhcmtlciwgayk7XG4gICAgcmV0dXJuIG5ldyBIc2wodGhpcy5oLCB0aGlzLnMsIHRoaXMubCAqIGssIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIHJnYjogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGggPSB0aGlzLmggJSAzNjAgKyAodGhpcy5oIDwgMCkgKiAzNjAsXG4gICAgICAgIHMgPSBpc05hTihoKSB8fCBpc05hTih0aGlzLnMpID8gMCA6IHRoaXMucyxcbiAgICAgICAgbCA9IHRoaXMubCxcbiAgICAgICAgbTIgPSBsICsgKGwgPCAwLjUgPyBsIDogMSAtIGwpICogcyxcbiAgICAgICAgbTEgPSAyICogbCAtIG0yO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgaHNsMnJnYihoID49IDI0MCA/IGggLSAyNDAgOiBoICsgMTIwLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoLCBtMSwgbTIpLFxuICAgICAgaHNsMnJnYihoIDwgMTIwID8gaCArIDI0MCA6IGggLSAxMjAsIG0xLCBtMiksXG4gICAgICB0aGlzLm9wYWNpdHlcbiAgICApO1xuICB9LFxuICBkaXNwbGF5YWJsZTogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuICgwIDw9IHRoaXMucyAmJiB0aGlzLnMgPD0gMSB8fCBpc05hTih0aGlzLnMpKVxuICAgICAgICAmJiAoMCA8PSB0aGlzLmwgJiYgdGhpcy5sIDw9IDEpXG4gICAgICAgICYmICgwIDw9IHRoaXMub3BhY2l0eSAmJiB0aGlzLm9wYWNpdHkgPD0gMSk7XG4gIH0sXG4gIGZvcm1hdEhzbDogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGEgPSB0aGlzLm9wYWNpdHk7IGEgPSBpc05hTihhKSA/IDEgOiBNYXRoLm1heCgwLCBNYXRoLm1pbigxLCBhKSk7XG4gICAgcmV0dXJuIChhID09PSAxID8gXCJoc2woXCIgOiBcImhzbGEoXCIpXG4gICAgICAgICsgKHRoaXMuaCB8fCAwKSArIFwiLCBcIlxuICAgICAgICArICh0aGlzLnMgfHwgMCkgKiAxMDAgKyBcIiUsIFwiXG4gICAgICAgICsgKHRoaXMubCB8fCAwKSAqIDEwMCArIFwiJVwiXG4gICAgICAgICsgKGEgPT09IDEgPyBcIilcIiA6IFwiLCBcIiArIGEgKyBcIilcIik7XG4gIH1cbn0pKTtcblxuLyogRnJvbSBGdkQgMTMuMzcsIENTUyBDb2xvciBNb2R1bGUgTGV2ZWwgMyAqL1xuZnVuY3Rpb24gaHNsMnJnYihoLCBtMSwgbTIpIHtcbiAgcmV0dXJuIChoIDwgNjAgPyBtMSArIChtMiAtIG0xKSAqIGggLyA2MFxuICAgICAgOiBoIDwgMTgwID8gbTJcbiAgICAgIDogaCA8IDI0MCA/IG0xICsgKG0yIC0gbTEpICogKDI0MCAtIGgpIC8gNjBcbiAgICAgIDogbTEpICogMjU1O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2NvbG9yLmpzXG4vLyBtb2R1bGUgaWQgPSA2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///67\n");

/***/ }),
/* 68 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"b\"] = extend;\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n});\n\nfunction extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qcz8zNjJkIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGNvbnN0cnVjdG9yLCBmYWN0b3J5LCBwcm90b3R5cGUpIHtcbiAgY29uc3RydWN0b3IucHJvdG90eXBlID0gZmFjdG9yeS5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gIHByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNvbnN0cnVjdG9yO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHBhcmVudCwgZGVmaW5pdGlvbikge1xuICB2YXIgcHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnQucHJvdG90eXBlKTtcbiAgZm9yICh2YXIga2V5IGluIGRlZmluaXRpb24pIHByb3RvdHlwZVtrZXldID0gZGVmaW5pdGlvbltrZXldO1xuICByZXR1cm4gcHJvdG90eXBlO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2RlZmluZS5qc1xuLy8gbW9kdWxlIGlkID0gNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///68\n");

/***/ }),
/* 69 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = basis;\nfunction basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2Jhc2lzLmpzP2FkMDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGJhc2lzKHQxLCB2MCwgdjEsIHYyLCB2Mykge1xuICB2YXIgdDIgPSB0MSAqIHQxLCB0MyA9IHQyICogdDE7XG4gIHJldHVybiAoKDEgLSAzICogdDEgKyAzICogdDIgLSB0MykgKiB2MFxuICAgICAgKyAoNCAtIDYgKiB0MiArIDMgKiB0MykgKiB2MVxuICAgICAgKyAoMSArIDMgKiB0MSArIDMgKiB0MiAtIDMgKiB0MykgKiB2MlxuICAgICAgKyB0MyAqIHYzKSAvIDY7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGggLSAxO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciBpID0gdCA8PSAwID8gKHQgPSAwKSA6IHQgPj0gMSA/ICh0ID0gMSwgbiAtIDEpIDogTWF0aC5mbG9vcih0ICogbiksXG4gICAgICAgIHYxID0gdmFsdWVzW2ldLFxuICAgICAgICB2MiA9IHZhbHVlc1tpICsgMV0sXG4gICAgICAgIHYwID0gaSA+IDAgPyB2YWx1ZXNbaSAtIDFdIDogMiAqIHYxIC0gdjIsXG4gICAgICAgIHYzID0gaSA8IG4gLSAxID8gdmFsdWVzW2kgKyAyXSA6IDIgKiB2MiAtIHYxO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpcy5qc1xuLy8gbW9kdWxlIGlkID0gNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///69\n");

/***/ }),
/* 70 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__easing__ = __webpack_require__(44);\n\n\n\nvar arraySlice = Array.prototype.slice;\n\nfunction defaultGetter(target, key) {\n    return target[key];\n}\nfunction defaultSetter(target, key, value) {\n    target[key] = value;\n}\n\nfunction interpolateNumber(p0, p1, percent) {\n    return (p1 - p0) * percent + p0;\n}\n\nfunction interpolateArray(p0, p1, percent, out, arrDim) {\n    var len = p0.length;\n    if (arrDim == 1) {\n        for (var i = 0; i < len; i++) {\n            out[i] = interpolateNumber(p0[i], p1[i], percent);\n        }\n    }\n    else {\n        var len2 = p0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                out[i][j] = interpolateNumber(\n                    p0[i][j], p1[i][j], percent\n                );\n            }\n        }\n    }\n}\n\nfunction isArrayLike(data) {\n    if (typeof(data) == 'undefined') {\n        return false;\n    } else if (typeof(data) == 'string') {\n        return false;\n    } else {\n        return typeof(data.length) == 'number';\n    }\n}\n\nfunction cloneValue(value) {\n    if (isArrayLike(value)) {\n        var len = value.length;\n        if (isArrayLike(value[0])) {\n            var ret = [];\n            for (var i = 0; i < len; i++) {\n                ret.push(arraySlice.call(value[i]));\n            }\n            return ret;\n        } else {\n            return arraySlice.call(value);\n        }\n    } else {\n        return value;\n    }\n}\n\nfunction catmullRomInterpolateArray(\n    p0, p1, p2, p3, t, t2, t3, out, arrDim\n) {\n    var len = p0.length;\n    if (arrDim == 1) {\n        for (var i = 0; i < len; i++) {\n            out[i] = catmullRomInterpolate(\n                p0[i], p1[i], p2[i], p3[i], t, t2, t3\n            );\n        }\n    } else {\n        var len2 = p0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                out[i][j] = catmullRomInterpolate(\n                    p0[i][j], p1[i][j], p2[i][j], p3[i][j],\n                    t, t2, t3\n                );\n            }\n        }\n    }\n}\n\nfunction catmullRomInterpolate(p0, p1, p2, p3, t, t2, t3) {\n    var v0 = (p2 - p0) * 0.5;\n    var v1 = (p3 - p1) * 0.5;\n    return (2 * (p1 - p2) + v0 + v1) * t3\n            + (- 3 * (p1 - p2) - 2 * v0 - v1) * t2\n            + v0 * t + p1;\n}\n\n// arr0 is source array, arr1 is target array.\n// Do some preprocess to avoid error happened when interpolating from arr0 to arr1\nfunction fillArr(arr0, arr1, arrDim) {\n    var arr0Len = arr0.length;\n    var arr1Len = arr1.length;\n    if (arr0Len !== arr1Len) {\n        // FIXME Not work for TypedArray\n        var isPreviousLarger = arr0Len > arr1Len;\n        if (isPreviousLarger) {\n            // Cut the previous\n            arr0.length = arr1Len;\n        }\n        else {\n            // Fill the previous\n            for (var i = arr0Len; i < arr1Len; i++) {\n                arr0.push(\n                    arrDim === 1 ? arr1[i] : arraySlice.call(arr1[i])\n                );\n            }\n        }\n    }\n    // Handling NaN value\n    var len2 = arr0[0] && arr0[0].length;\n    for (var i = 0; i < arr0.length; i++) {\n        if (arrDim === 1) {\n            if (isNaN(arr0[i])) {\n                arr0[i] = arr1[i];\n            }\n        }\n        else {\n            for (var j = 0; j < len2; j++) {\n                if (isNaN(arr0[i][j])) {\n                    arr0[i][j] = arr1[i][j];\n                }\n            }\n        }\n    }\n}\n\nfunction isArraySame(arr0, arr1, arrDim) {\n    if (arr0 === arr1) {\n        return true;\n    }\n    var len = arr0.length;\n    if (len !== arr1.length) {\n        return false;\n    }\n    if (arrDim === 1) {\n        for (var i = 0; i < len; i++) {\n            if (arr0[i] !== arr1[i]) {\n                return false;\n            }\n        }\n    }\n    else {\n        var len2 = arr0[0].length;\n        for (var i = 0; i < len; i++) {\n            for (var j = 0; j < len2; j++) {\n                if (arr0[i][j] !== arr1[i][j]) {\n                    return false;\n                }\n            }\n        }\n    }\n    return true;\n}\n\nfunction createTrackClip(animator, globalEasing, oneTrackDone, keyframes, propName, interpolater, maxTime) {\n    var getter = animator._getter;\n    var setter = animator._setter;\n    var useSpline = globalEasing === 'spline';\n\n    var trackLen = keyframes.length;\n    if (!trackLen) {\n        return;\n    }\n    // Guess data type\n    var firstVal = keyframes[0].value;\n    var isValueArray = isArrayLike(firstVal);\n\n    // For vertices morphing\n    var arrDim = (\n            isValueArray\n            && isArrayLike(firstVal[0])\n        )\n        ? 2 : 1;\n    // Sort keyframe as ascending\n    keyframes.sort(function(a, b) {\n        return a.time - b.time;\n    });\n\n    // Percents of each keyframe\n    var kfPercents = [];\n    // Value of each keyframe\n    var kfValues = [];\n    // Easing funcs of each keyframe.\n    var kfEasings = [];\n\n    var prevValue = keyframes[0].value;\n    var isAllValueEqual = true;\n    for (var i = 0; i < trackLen; i++) {\n        kfPercents.push(keyframes[i].time / maxTime);\n\n        // Assume value is a color when it is a string\n        var value = keyframes[i].value;\n\n        // Check if value is equal, deep check if value is array\n        if (!((isValueArray && isArraySame(value, prevValue, arrDim))\n            || (!isValueArray && value === prevValue))) {\n            isAllValueEqual = false;\n        }\n        prevValue = value;\n\n        kfValues.push(value);\n        kfEasings.push(keyframes[i].easing);\n    }\n    if (isAllValueEqual) {\n        return;\n    }\n\n    var lastValue = kfValues[trackLen - 1];\n    // Polyfill array and NaN value\n    for (var i = 0; i < trackLen - 1; i++) {\n        if (isValueArray) {\n            fillArr(kfValues[i], lastValue, arrDim);\n        }\n        else {\n            if (isNaN(kfValues[i]) && !isNaN(lastValue)) {\n                kfValues[i] = lastValue;\n            }\n        }\n    }\n    isValueArray && fillArr(getter(animator._target, propName), lastValue, arrDim);\n\n    // Cache the key of last frame to speed up when\n    // animation playback is sequency\n    var cacheKey = 0;\n    var cachePercent = 0;\n    var start;\n    var i, w;\n    var p0, p1, p2, p3;\n\n    var onframe = function(target, percent) {\n        // Find the range keyframes\n        // kf1-----kf2---------current--------kf3\n        // find kf2(i) and kf3(i + 1) and do interpolation\n        if (percent < cachePercent) {\n            // Start from next key\n            start = Math.min(cacheKey + 1, trackLen - 1);\n            for (i = start; i >= 0; i--) {\n                if (kfPercents[i] <= percent) {\n                    break;\n                }\n            }\n            i = Math.min(i, trackLen - 2);\n        }\n        else {\n            for (i = cacheKey; i < trackLen; i++) {\n                if (kfPercents[i] > percent) {\n                    break;\n                }\n            }\n            i = Math.min(i - 1, trackLen - 2);\n        }\n        cacheKey = i;\n        cachePercent = percent;\n\n        var range = (kfPercents[i + 1] - kfPercents[i]);\n        if (range === 0) {\n            return;\n        }\n        else {\n            w = (percent - kfPercents[i]) / range;\n            // Clamp 0 - 1\n            w = Math.max(Math.min(1, w), 0);\n        }\n        w = kfEasings[i + 1](w);\n\n        if (useSpline) {\n            p1 = kfValues[i];\n            p0 = kfValues[i === 0 ? i : i - 1];\n            p2 = kfValues[i > trackLen - 2 ? trackLen - 1 : i + 1];\n            p3 = kfValues[i > trackLen - 3 ? trackLen - 1 : i + 2];\n            if (interpolater) {\n                setter(\n                    target,\n                    propName,\n                    interpolater(\n                        getter(target, propName),\n                        p0, p1, p2, p3, w\n                    )\n                );\n            }\n            else if (isValueArray) {\n                catmullRomInterpolateArray(\n                    p0, p1, p2, p3, w, w*w, w*w*w,\n                    getter(target, propName),\n                    arrDim\n                );\n            }\n            else {\n                setter(\n                    target,\n                    propName,\n                    catmullRomInterpolate(p0, p1, p2, p3, w, w*w, w*w*w)\n                );\n            }\n        }\n        else {\n            if (interpolater) {\n                setter(\n                    target,\n                    propName,\n                    interpolater(\n                        getter(target, propName),\n                        kfValues[i],\n                        kfValues[i + 1],\n                        w\n                    )\n                );\n            }\n\n            else if (isValueArray) {\n                interpolateArray(\n                    kfValues[i], kfValues[i+1], w,\n                    getter(target, propName),\n                    arrDim\n                );\n            }\n            else {\n                setter(\n                    target,\n                    propName,\n                    interpolateNumber(kfValues[i], kfValues[i+1], w)\n                );\n            }\n        }\n    };\n\n    var clip = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]({\n        target: animator._target,\n        life: maxTime,\n        loop: animator._loop,\n        delay: animator._delay,\n        onframe: onframe,\n        onfinish: oneTrackDone\n    });\n\n    if (globalEasing && globalEasing !== 'spline') {\n        clip.setEasing(globalEasing);\n    }\n\n    return clip;\n}\n\n/**\n * @description Animator object can only be created by Animation.prototype.animate method.\n * After created, we can use {@link clay.animation.Animator#when} to add all keyframes and {@link clay.animation.Animator#start} it.\n * Clips will be automatically created and added to the animation instance which created this deferred object.\n *\n * @constructor clay.animation.Animator\n *\n * @param {Object} target\n * @param {boolean} loop\n * @param {Function} getter\n * @param {Function} setter\n * @param {Function} interpolater\n */\nfunction Animator(target, loop, getter, setter, interpolater) {\n    this._tracks = {};\n    this._target = target;\n\n    this._loop = loop || false;\n\n    this._getter = getter || defaultGetter;\n    this._setter = setter || defaultSetter;\n\n    this._interpolater = interpolater || null;\n\n    this._delay = 0;\n\n    this._doneList = [];\n\n    this._onframeList = [];\n\n    this._clipList = [];\n\n    this._maxTime = 0;\n\n    this._lastKFTime = 0;\n}\n\nfunction noopEasing(w) {\n    return w;\n}\n\nAnimator.prototype = {\n\n    constructor: Animator,\n\n    /**\n     * @param {number} time Keyframe time using millisecond\n     * @param {Object} props A key-value object. Value can be number, 1d and 2d array\n     * @param {string|Function} [easing]\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    when: function (time, props, easing) {\n\n        this._maxTime = Math.max(time, this._maxTime);\n\n        easing = (typeof easing === 'function' ? easing : __WEBPACK_IMPORTED_MODULE_1__easing__[\"a\" /* default */][easing]) || noopEasing;\n        for (var propName in props) {\n            if (!this._tracks[propName]) {\n                this._tracks[propName] = [];\n                // If time is 0\n                //  Then props is given initialize value\n                // Else\n                //  Initialize value from current prop value\n                if (time !== 0) {\n                    this._tracks[propName].push({\n                        time: 0,\n                        value: cloneValue(\n                            this._getter(this._target, propName)\n                        ),\n                        easing: easing\n                    });\n                }\n            }\n            this._tracks[propName].push({\n                time: parseInt(time),\n                value: props[propName],\n                easing: easing\n            });\n        }\n        return this;\n    },\n    /**\n     * @param {number} time During time since last keyframe\n     * @param {Object} props A key-value object. Value can be number, 1d and 2d array\n     * @param {string|Function} [easing]\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    then: function (duringTime, props, easing) {\n        this.when(duringTime + this._lastKFTime, props, easing);\n        this._lastKFTime += duringTime;\n        return this;\n    },\n    /**\n     * callback when running animation\n     * @param  {Function} callback callback have two args, animating target and current percent\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    during: function (callback) {\n        this._onframeList.push(callback);\n        return this;\n    },\n\n    _doneCallback: function () {\n        // Clear all tracks\n        this._tracks = {};\n        // Clear all clips\n        this._clipList.length = 0;\n\n        var doneList = this._doneList;\n        var len = doneList.length;\n        for (var i = 0; i < len; i++) {\n            doneList[i].call(this);\n        }\n    },\n    /**\n     * Start the animation\n     * @param  {string|Function} easing\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    start: function (globalEasing) {\n\n        var self = this;\n        var clipCount = 0;\n\n        var oneTrackDone = function() {\n            clipCount--;\n            if (clipCount === 0) {\n                self._doneCallback();\n            }\n        };\n\n        var lastClip;\n        var clipMaxTime = 0;\n        for (var propName in this._tracks) {\n            var clip = createTrackClip(\n                this, globalEasing, oneTrackDone,\n                this._tracks[propName], propName, self._interpolater, self._maxTime\n            );\n            if (clip) {\n                clipMaxTime = Math.max(clipMaxTime, clip.life);\n                this._clipList.push(clip);\n                clipCount++;\n\n                // If start after added to animation\n                if (this.animation) {\n                    this.animation.addClip(clip);\n                }\n\n                lastClip = clip;\n            }\n        }\n\n        // Add during callback on the last clip\n        if (lastClip) {\n            var oldOnFrame = lastClip.onframe;\n            lastClip.onframe = function (target, percent) {\n                oldOnFrame(target, percent);\n\n                for (var i = 0; i < self._onframeList.length; i++) {\n                    self._onframeList[i](target, percent);\n                }\n            };\n        }\n\n        if (!clipCount) {\n            this._doneCallback();\n        }\n        return this;\n    },\n\n    /**\n     * Stop the animation\n     * @memberOf clay.animation.Animator.prototype\n     */\n    stop: function () {\n        for (var i = 0; i < this._clipList.length; i++) {\n            var clip = this._clipList[i];\n            this.animation.removeClip(clip);\n        }\n        this._clipList = [];\n    },\n    /**\n     * Delay given milliseconds\n     * @param  {number} time\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    delay: function (time){\n        this._delay = time;\n        return this;\n    },\n    /**\n     * Callback after animation finished\n     * @param {Function} func\n     * @return {clay.animation.Animator}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    done: function (func) {\n        if (func) {\n            this._doneList.push(func);\n        }\n        return this;\n    },\n    /**\n     * Get all clips created in start method.\n     * @return {clay.animation.Clip[]}\n     * @memberOf clay.animation.Animator.prototype\n     */\n    getClips: function () {\n        return this._clipList;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Animator);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9BbmltYXRvci5qcz9jNTMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDbGlwIGZyb20gJy4vQ2xpcCc7XG5pbXBvcnQgZWFzaW5nRnVuY3MgZnJvbSAnLi9lYXNpbmcnO1xuXG52YXIgYXJyYXlTbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuZnVuY3Rpb24gZGVmYXVsdEdldHRlcih0YXJnZXQsIGtleSkge1xuICAgIHJldHVybiB0YXJnZXRba2V5XTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRTZXR0ZXIodGFyZ2V0LCBrZXksIHZhbHVlKSB7XG4gICAgdGFyZ2V0W2tleV0gPSB2YWx1ZTtcbn1cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVOdW1iZXIocDAsIHAxLCBwZXJjZW50KSB7XG4gICAgcmV0dXJuIChwMSAtIHAwKSAqIHBlcmNlbnQgKyBwMDtcbn1cblxuZnVuY3Rpb24gaW50ZXJwb2xhdGVBcnJheShwMCwgcDEsIHBlcmNlbnQsIG91dCwgYXJyRGltKSB7XG4gICAgdmFyIGxlbiA9IHAwLmxlbmd0aDtcbiAgICBpZiAoYXJyRGltID09IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3V0W2ldID0gaW50ZXJwb2xhdGVOdW1iZXIocDBbaV0sIHAxW2ldLCBwZXJjZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdmFyIGxlbjIgPSBwMFswXS5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbGVuMjsgaisrKSB7XG4gICAgICAgICAgICAgICAgb3V0W2ldW2pdID0gaW50ZXJwb2xhdGVOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgIHAwW2ldW2pdLCBwMVtpXVtqXSwgcGVyY2VudFxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mKGRhdGEpID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZihkYXRhKSA9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZihkYXRhLmxlbmd0aCkgPT0gJ251bWJlcic7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjbG9uZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXlMaWtlKHZhbHVlKSkge1xuICAgICAgICB2YXIgbGVuID0gdmFsdWUubGVuZ3RoO1xuICAgICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWVbMF0pKSB7XG4gICAgICAgICAgICB2YXIgcmV0ID0gW107XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcmV0LnB1c2goYXJyYXlTbGljZS5jYWxsKHZhbHVlW2ldKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGFycmF5U2xpY2UuY2FsbCh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYXRtdWxsUm9tSW50ZXJwb2xhdGVBcnJheShcbiAgICBwMCwgcDEsIHAyLCBwMywgdCwgdDIsIHQzLCBvdXQsIGFyckRpbVxuKSB7XG4gICAgdmFyIGxlbiA9IHAwLmxlbmd0aDtcbiAgICBpZiAoYXJyRGltID09IDEpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgb3V0W2ldID0gY2F0bXVsbFJvbUludGVycG9sYXRlKFxuICAgICAgICAgICAgICAgIHAwW2ldLCBwMVtpXSwgcDJbaV0sIHAzW2ldLCB0LCB0MiwgdDNcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgbGVuMiA9IHAwWzBdLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBsZW4yOyBqKyspIHtcbiAgICAgICAgICAgICAgICBvdXRbaV1bal0gPSBjYXRtdWxsUm9tSW50ZXJwb2xhdGUoXG4gICAgICAgICAgICAgICAgICAgIHAwW2ldW2pdLCBwMVtpXVtqXSwgcDJbaV1bal0sIHAzW2ldW2pdLFxuICAgICAgICAgICAgICAgICAgICB0LCB0MiwgdDNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjYXRtdWxsUm9tSW50ZXJwb2xhdGUocDAsIHAxLCBwMiwgcDMsIHQsIHQyLCB0Mykge1xuICAgIHZhciB2MCA9IChwMiAtIHAwKSAqIDAuNTtcbiAgICB2YXIgdjEgPSAocDMgLSBwMSkgKiAwLjU7XG4gICAgcmV0dXJuICgyICogKHAxIC0gcDIpICsgdjAgKyB2MSkgKiB0M1xuICAgICAgICAgICAgKyAoLSAzICogKHAxIC0gcDIpIC0gMiAqIHYwIC0gdjEpICogdDJcbiAgICAgICAgICAgICsgdjAgKiB0ICsgcDE7XG59XG5cbi8vIGFycjAgaXMgc291cmNlIGFycmF5LCBhcnIxIGlzIHRhcmdldCBhcnJheS5cbi8vIERvIHNvbWUgcHJlcHJvY2VzcyB0byBhdm9pZCBlcnJvciBoYXBwZW5lZCB3aGVuIGludGVycG9sYXRpbmcgZnJvbSBhcnIwIHRvIGFycjFcbmZ1bmN0aW9uIGZpbGxBcnIoYXJyMCwgYXJyMSwgYXJyRGltKSB7XG4gICAgdmFyIGFycjBMZW4gPSBhcnIwLmxlbmd0aDtcbiAgICB2YXIgYXJyMUxlbiA9IGFycjEubGVuZ3RoO1xuICAgIGlmIChhcnIwTGVuICE9PSBhcnIxTGVuKSB7XG4gICAgICAgIC8vIEZJWE1FIE5vdCB3b3JrIGZvciBUeXBlZEFycmF5XG4gICAgICAgIHZhciBpc1ByZXZpb3VzTGFyZ2VyID0gYXJyMExlbiA+IGFycjFMZW47XG4gICAgICAgIGlmIChpc1ByZXZpb3VzTGFyZ2VyKSB7XG4gICAgICAgICAgICAvLyBDdXQgdGhlIHByZXZpb3VzXG4gICAgICAgICAgICBhcnIwLmxlbmd0aCA9IGFycjFMZW47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBGaWxsIHRoZSBwcmV2aW91c1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGFycjBMZW47IGkgPCBhcnIxTGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICBhcnIwLnB1c2goXG4gICAgICAgICAgICAgICAgICAgIGFyckRpbSA9PT0gMSA/IGFycjFbaV0gOiBhcnJheVNsaWNlLmNhbGwoYXJyMVtpXSlcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEhhbmRsaW5nIE5hTiB2YWx1ZVxuICAgIHZhciBsZW4yID0gYXJyMFswXSAmJiBhcnIwWzBdLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycjAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKGFyckRpbSA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGlzTmFOKGFycjBbaV0pKSB7XG4gICAgICAgICAgICAgICAgYXJyMFtpXSA9IGFycjFbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjI7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChpc05hTihhcnIwW2ldW2pdKSkge1xuICAgICAgICAgICAgICAgICAgICBhcnIwW2ldW2pdID0gYXJyMVtpXVtqXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGlzQXJyYXlTYW1lKGFycjAsIGFycjEsIGFyckRpbSkge1xuICAgIGlmIChhcnIwID09PSBhcnIxKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB2YXIgbGVuID0gYXJyMC5sZW5ndGg7XG4gICAgaWYgKGxlbiAhPT0gYXJyMS5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoYXJyRGltID09PSAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhcnIwW2ldICE9PSBhcnIxW2ldKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YXIgbGVuMiA9IGFycjBbMF0ubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGxlbjI7IGorKykge1xuICAgICAgICAgICAgICAgIGlmIChhcnIwW2ldW2pdICE9PSBhcnIxW2ldW2pdKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRyYWNrQ2xpcChhbmltYXRvciwgZ2xvYmFsRWFzaW5nLCBvbmVUcmFja0RvbmUsIGtleWZyYW1lcywgcHJvcE5hbWUsIGludGVycG9sYXRlciwgbWF4VGltZSkge1xuICAgIHZhciBnZXR0ZXIgPSBhbmltYXRvci5fZ2V0dGVyO1xuICAgIHZhciBzZXR0ZXIgPSBhbmltYXRvci5fc2V0dGVyO1xuICAgIHZhciB1c2VTcGxpbmUgPSBnbG9iYWxFYXNpbmcgPT09ICdzcGxpbmUnO1xuXG4gICAgdmFyIHRyYWNrTGVuID0ga2V5ZnJhbWVzLmxlbmd0aDtcbiAgICBpZiAoIXRyYWNrTGVuKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gR3Vlc3MgZGF0YSB0eXBlXG4gICAgdmFyIGZpcnN0VmFsID0ga2V5ZnJhbWVzWzBdLnZhbHVlO1xuICAgIHZhciBpc1ZhbHVlQXJyYXkgPSBpc0FycmF5TGlrZShmaXJzdFZhbCk7XG5cbiAgICAvLyBGb3IgdmVydGljZXMgbW9ycGhpbmdcbiAgICB2YXIgYXJyRGltID0gKFxuICAgICAgICAgICAgaXNWYWx1ZUFycmF5XG4gICAgICAgICAgICAmJiBpc0FycmF5TGlrZShmaXJzdFZhbFswXSlcbiAgICAgICAgKVxuICAgICAgICA/IDIgOiAxO1xuICAgIC8vIFNvcnQga2V5ZnJhbWUgYXMgYXNjZW5kaW5nXG4gICAga2V5ZnJhbWVzLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gYS50aW1lIC0gYi50aW1lO1xuICAgIH0pO1xuXG4gICAgLy8gUGVyY2VudHMgb2YgZWFjaCBrZXlmcmFtZVxuICAgIHZhciBrZlBlcmNlbnRzID0gW107XG4gICAgLy8gVmFsdWUgb2YgZWFjaCBrZXlmcmFtZVxuICAgIHZhciBrZlZhbHVlcyA9IFtdO1xuICAgIC8vIEVhc2luZyBmdW5jcyBvZiBlYWNoIGtleWZyYW1lLlxuICAgIHZhciBrZkVhc2luZ3MgPSBbXTtcblxuICAgIHZhciBwcmV2VmFsdWUgPSBrZXlmcmFtZXNbMF0udmFsdWU7XG4gICAgdmFyIGlzQWxsVmFsdWVFcXVhbCA9IHRydWU7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja0xlbjsgaSsrKSB7XG4gICAgICAgIGtmUGVyY2VudHMucHVzaChrZXlmcmFtZXNbaV0udGltZSAvIG1heFRpbWUpO1xuXG4gICAgICAgIC8vIEFzc3VtZSB2YWx1ZSBpcyBhIGNvbG9yIHdoZW4gaXQgaXMgYSBzdHJpbmdcbiAgICAgICAgdmFyIHZhbHVlID0ga2V5ZnJhbWVzW2ldLnZhbHVlO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHZhbHVlIGlzIGVxdWFsLCBkZWVwIGNoZWNrIGlmIHZhbHVlIGlzIGFycmF5XG4gICAgICAgIGlmICghKChpc1ZhbHVlQXJyYXkgJiYgaXNBcnJheVNhbWUodmFsdWUsIHByZXZWYWx1ZSwgYXJyRGltKSlcbiAgICAgICAgICAgIHx8ICghaXNWYWx1ZUFycmF5ICYmIHZhbHVlID09PSBwcmV2VmFsdWUpKSkge1xuICAgICAgICAgICAgaXNBbGxWYWx1ZUVxdWFsID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcHJldlZhbHVlID0gdmFsdWU7XG5cbiAgICAgICAga2ZWYWx1ZXMucHVzaCh2YWx1ZSk7XG4gICAgICAgIGtmRWFzaW5ncy5wdXNoKGtleWZyYW1lc1tpXS5lYXNpbmcpO1xuICAgIH1cbiAgICBpZiAoaXNBbGxWYWx1ZUVxdWFsKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGFzdFZhbHVlID0ga2ZWYWx1ZXNbdHJhY2tMZW4gLSAxXTtcbiAgICAvLyBQb2x5ZmlsbCBhcnJheSBhbmQgTmFOIHZhbHVlXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0cmFja0xlbiAtIDE7IGkrKykge1xuICAgICAgICBpZiAoaXNWYWx1ZUFycmF5KSB7XG4gICAgICAgICAgICBmaWxsQXJyKGtmVmFsdWVzW2ldLCBsYXN0VmFsdWUsIGFyckRpbSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZiAoaXNOYU4oa2ZWYWx1ZXNbaV0pICYmICFpc05hTihsYXN0VmFsdWUpKSB7XG4gICAgICAgICAgICAgICAga2ZWYWx1ZXNbaV0gPSBsYXN0VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNWYWx1ZUFycmF5ICYmIGZpbGxBcnIoZ2V0dGVyKGFuaW1hdG9yLl90YXJnZXQsIHByb3BOYW1lKSwgbGFzdFZhbHVlLCBhcnJEaW0pO1xuXG4gICAgLy8gQ2FjaGUgdGhlIGtleSBvZiBsYXN0IGZyYW1lIHRvIHNwZWVkIHVwIHdoZW5cbiAgICAvLyBhbmltYXRpb24gcGxheWJhY2sgaXMgc2VxdWVuY3lcbiAgICB2YXIgY2FjaGVLZXkgPSAwO1xuICAgIHZhciBjYWNoZVBlcmNlbnQgPSAwO1xuICAgIHZhciBzdGFydDtcbiAgICB2YXIgaSwgdztcbiAgICB2YXIgcDAsIHAxLCBwMiwgcDM7XG5cbiAgICB2YXIgb25mcmFtZSA9IGZ1bmN0aW9uKHRhcmdldCwgcGVyY2VudCkge1xuICAgICAgICAvLyBGaW5kIHRoZSByYW5nZSBrZXlmcmFtZXNcbiAgICAgICAgLy8ga2YxLS0tLS1rZjItLS0tLS0tLS1jdXJyZW50LS0tLS0tLS1rZjNcbiAgICAgICAgLy8gZmluZCBrZjIoaSkgYW5kIGtmMyhpICsgMSkgYW5kIGRvIGludGVycG9sYXRpb25cbiAgICAgICAgaWYgKHBlcmNlbnQgPCBjYWNoZVBlcmNlbnQpIHtcbiAgICAgICAgICAgIC8vIFN0YXJ0IGZyb20gbmV4dCBrZXlcbiAgICAgICAgICAgIHN0YXJ0ID0gTWF0aC5taW4oY2FjaGVLZXkgKyAxLCB0cmFja0xlbiAtIDEpO1xuICAgICAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtmUGVyY2VudHNbaV0gPD0gcGVyY2VudCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpID0gTWF0aC5taW4oaSwgdHJhY2tMZW4gLSAyKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoaSA9IGNhY2hlS2V5OyBpIDwgdHJhY2tMZW47IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChrZlBlcmNlbnRzW2ldID4gcGVyY2VudCkge1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpID0gTWF0aC5taW4oaSAtIDEsIHRyYWNrTGVuIC0gMik7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGVLZXkgPSBpO1xuICAgICAgICBjYWNoZVBlcmNlbnQgPSBwZXJjZW50O1xuXG4gICAgICAgIHZhciByYW5nZSA9IChrZlBlcmNlbnRzW2kgKyAxXSAtIGtmUGVyY2VudHNbaV0pO1xuICAgICAgICBpZiAocmFuZ2UgPT09IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHcgPSAocGVyY2VudCAtIGtmUGVyY2VudHNbaV0pIC8gcmFuZ2U7XG4gICAgICAgICAgICAvLyBDbGFtcCAwIC0gMVxuICAgICAgICAgICAgdyA9IE1hdGgubWF4KE1hdGgubWluKDEsIHcpLCAwKTtcbiAgICAgICAgfVxuICAgICAgICB3ID0ga2ZFYXNpbmdzW2kgKyAxXSh3KTtcblxuICAgICAgICBpZiAodXNlU3BsaW5lKSB7XG4gICAgICAgICAgICBwMSA9IGtmVmFsdWVzW2ldO1xuICAgICAgICAgICAgcDAgPSBrZlZhbHVlc1tpID09PSAwID8gaSA6IGkgLSAxXTtcbiAgICAgICAgICAgIHAyID0ga2ZWYWx1ZXNbaSA+IHRyYWNrTGVuIC0gMiA/IHRyYWNrTGVuIC0gMSA6IGkgKyAxXTtcbiAgICAgICAgICAgIHAzID0ga2ZWYWx1ZXNbaSA+IHRyYWNrTGVuIC0gMyA/IHRyYWNrTGVuIC0gMSA6IGkgKyAyXTtcbiAgICAgICAgICAgIGlmIChpbnRlcnBvbGF0ZXIpIHtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGludGVycG9sYXRlcihcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcih0YXJnZXQsIHByb3BOYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHAwLCBwMSwgcDIsIHAzLCB3XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaXNWYWx1ZUFycmF5KSB7XG4gICAgICAgICAgICAgICAgY2F0bXVsbFJvbUludGVycG9sYXRlQXJyYXkoXG4gICAgICAgICAgICAgICAgICAgIHAwLCBwMSwgcDIsIHAzLCB3LCB3KncsIHcqdyp3LFxuICAgICAgICAgICAgICAgICAgICBnZXR0ZXIodGFyZ2V0LCBwcm9wTmFtZSksXG4gICAgICAgICAgICAgICAgICAgIGFyckRpbVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXR0ZXIoXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCxcbiAgICAgICAgICAgICAgICAgICAgcHJvcE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNhdG11bGxSb21JbnRlcnBvbGF0ZShwMCwgcDEsIHAyLCBwMywgdywgdyp3LCB3KncqdylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaWYgKGludGVycG9sYXRlcikge1xuICAgICAgICAgICAgICAgIHNldHRlcihcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgICAgICBwcm9wTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgaW50ZXJwb2xhdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0dGVyKHRhcmdldCwgcHJvcE5hbWUpLFxuICAgICAgICAgICAgICAgICAgICAgICAga2ZWYWx1ZXNbaV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBrZlZhbHVlc1tpICsgMV0sXG4gICAgICAgICAgICAgICAgICAgICAgICB3XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBlbHNlIGlmIChpc1ZhbHVlQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZUFycmF5KFxuICAgICAgICAgICAgICAgICAgICBrZlZhbHVlc1tpXSwga2ZWYWx1ZXNbaSsxXSwgdyxcbiAgICAgICAgICAgICAgICAgICAgZ2V0dGVyKHRhcmdldCwgcHJvcE5hbWUpLFxuICAgICAgICAgICAgICAgICAgICBhcnJEaW1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0dGVyKFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQsXG4gICAgICAgICAgICAgICAgICAgIHByb3BOYW1lLFxuICAgICAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZU51bWJlcihrZlZhbHVlc1tpXSwga2ZWYWx1ZXNbaSsxXSwgdylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBjbGlwID0gbmV3IENsaXAoe1xuICAgICAgICB0YXJnZXQ6IGFuaW1hdG9yLl90YXJnZXQsXG4gICAgICAgIGxpZmU6IG1heFRpbWUsXG4gICAgICAgIGxvb3A6IGFuaW1hdG9yLl9sb29wLFxuICAgICAgICBkZWxheTogYW5pbWF0b3IuX2RlbGF5LFxuICAgICAgICBvbmZyYW1lOiBvbmZyYW1lLFxuICAgICAgICBvbmZpbmlzaDogb25lVHJhY2tEb25lXG4gICAgfSk7XG5cbiAgICBpZiAoZ2xvYmFsRWFzaW5nICYmIGdsb2JhbEVhc2luZyAhPT0gJ3NwbGluZScpIHtcbiAgICAgICAgY2xpcC5zZXRFYXNpbmcoZ2xvYmFsRWFzaW5nKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xpcDtcbn1cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gQW5pbWF0b3Igb2JqZWN0IGNhbiBvbmx5IGJlIGNyZWF0ZWQgYnkgQW5pbWF0aW9uLnByb3RvdHlwZS5hbmltYXRlIG1ldGhvZC5cbiAqIEFmdGVyIGNyZWF0ZWQsIHdlIGNhbiB1c2Uge0BsaW5rIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yI3doZW59IHRvIGFkZCBhbGwga2V5ZnJhbWVzIGFuZCB7QGxpbmsgY2xheS5hbmltYXRpb24uQW5pbWF0b3Ijc3RhcnR9IGl0LlxuICogQ2xpcHMgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGNyZWF0ZWQgYW5kIGFkZGVkIHRvIHRoZSBhbmltYXRpb24gaW5zdGFuY2Ugd2hpY2ggY3JlYXRlZCB0aGlzIGRlZmVycmVkIG9iamVjdC5cbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5hbmltYXRpb24uQW5pbWF0b3JcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdGFyZ2V0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IGxvb3BcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdldHRlclxuICogQHBhcmFtIHtGdW5jdGlvbn0gc2V0dGVyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbnRlcnBvbGF0ZXJcbiAqL1xuZnVuY3Rpb24gQW5pbWF0b3IodGFyZ2V0LCBsb29wLCBnZXR0ZXIsIHNldHRlciwgaW50ZXJwb2xhdGVyKSB7XG4gICAgdGhpcy5fdHJhY2tzID0ge307XG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuXG4gICAgdGhpcy5fbG9vcCA9IGxvb3AgfHwgZmFsc2U7XG5cbiAgICB0aGlzLl9nZXR0ZXIgPSBnZXR0ZXIgfHwgZGVmYXVsdEdldHRlcjtcbiAgICB0aGlzLl9zZXR0ZXIgPSBzZXR0ZXIgfHwgZGVmYXVsdFNldHRlcjtcblxuICAgIHRoaXMuX2ludGVycG9sYXRlciA9IGludGVycG9sYXRlciB8fCBudWxsO1xuXG4gICAgdGhpcy5fZGVsYXkgPSAwO1xuXG4gICAgdGhpcy5fZG9uZUxpc3QgPSBbXTtcblxuICAgIHRoaXMuX29uZnJhbWVMaXN0ID0gW107XG5cbiAgICB0aGlzLl9jbGlwTGlzdCA9IFtdO1xuXG4gICAgdGhpcy5fbWF4VGltZSA9IDA7XG5cbiAgICB0aGlzLl9sYXN0S0ZUaW1lID0gMDtcbn1cblxuZnVuY3Rpb24gbm9vcEVhc2luZyh3KSB7XG4gICAgcmV0dXJuIHc7XG59XG5cbkFuaW1hdG9yLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBBbmltYXRvcixcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0aW1lIEtleWZyYW1lIHRpbWUgdXNpbmcgbWlsbGlzZWNvbmRcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQSBrZXktdmFsdWUgb2JqZWN0LiBWYWx1ZSBjYW4gYmUgbnVtYmVyLCAxZCBhbmQgMmQgYXJyYXlcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gW2Vhc2luZ11cbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgd2hlbjogZnVuY3Rpb24gKHRpbWUsIHByb3BzLCBlYXNpbmcpIHtcblxuICAgICAgICB0aGlzLl9tYXhUaW1lID0gTWF0aC5tYXgodGltZSwgdGhpcy5fbWF4VGltZSk7XG5cbiAgICAgICAgZWFzaW5nID0gKHR5cGVvZiBlYXNpbmcgPT09ICdmdW5jdGlvbicgPyBlYXNpbmcgOiBlYXNpbmdGdW5jc1tlYXNpbmddKSB8fCBub29wRWFzaW5nO1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBwcm9wcykge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl90cmFja3NbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdHJhY2tzW3Byb3BOYW1lXSA9IFtdO1xuICAgICAgICAgICAgICAgIC8vIElmIHRpbWUgaXMgMFxuICAgICAgICAgICAgICAgIC8vICBUaGVuIHByb3BzIGlzIGdpdmVuIGluaXRpYWxpemUgdmFsdWVcbiAgICAgICAgICAgICAgICAvLyBFbHNlXG4gICAgICAgICAgICAgICAgLy8gIEluaXRpYWxpemUgdmFsdWUgZnJvbSBjdXJyZW50IHByb3AgdmFsdWVcbiAgICAgICAgICAgICAgICBpZiAodGltZSAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl90cmFja3NbcHJvcE5hbWVdLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgdGltZTogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjbG9uZVZhbHVlKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dldHRlcih0aGlzLl90YXJnZXQsIHByb3BOYW1lKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogZWFzaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3RyYWNrc1twcm9wTmFtZV0ucHVzaCh7XG4gICAgICAgICAgICAgICAgdGltZTogcGFyc2VJbnQodGltZSksXG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzW3Byb3BOYW1lXSxcbiAgICAgICAgICAgICAgICBlYXNpbmc6IGVhc2luZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gdGltZSBEdXJpbmcgdGltZSBzaW5jZSBsYXN0IGtleWZyYW1lXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEEga2V5LXZhbHVlIG9iamVjdC4gVmFsdWUgY2FuIGJlIG51bWJlciwgMWQgYW5kIDJkIGFycmF5XG4gICAgICogQHBhcmFtIHtzdHJpbmd8RnVuY3Rpb259IFtlYXNpbmddXG4gICAgICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uQW5pbWF0b3J9XG4gICAgICogQG1lbWJlck9mIGNsYXkuYW5pbWF0aW9uLkFuaW1hdG9yLnByb3RvdHlwZVxuICAgICAqL1xuICAgIHRoZW46IGZ1bmN0aW9uIChkdXJpbmdUaW1lLCBwcm9wcywgZWFzaW5nKSB7XG4gICAgICAgIHRoaXMud2hlbihkdXJpbmdUaW1lICsgdGhpcy5fbGFzdEtGVGltZSwgcHJvcHMsIGVhc2luZyk7XG4gICAgICAgIHRoaXMuX2xhc3RLRlRpbWUgKz0gZHVyaW5nVGltZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBjYWxsYmFjayB3aGVuIHJ1bm5pbmcgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtICB7RnVuY3Rpb259IGNhbGxiYWNrIGNhbGxiYWNrIGhhdmUgdHdvIGFyZ3MsIGFuaW1hdGluZyB0YXJnZXQgYW5kIGN1cnJlbnQgcGVyY2VudFxuICAgICAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkFuaW1hdG9yfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmFuaW1hdGlvbi5BbmltYXRvci5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBkdXJpbmc6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgICB0aGlzLl9vbmZyYW1lTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIF9kb25lQ2FsbGJhY2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gQ2xlYXIgYWxsIHRyYWNrc1xuICAgICAgICB0aGlzLl90cmFja3MgPSB7fTtcbiAgICAgICAgLy8gQ2xlYXIgYWxsIGNsaXBzXG4gICAgICAgIHRoaXMuX2NsaXBMaXN0Lmxlbmd0aCA9IDA7XG5cbiAgICAgICAgdmFyIGRvbmVMaXN0ID0gdGhpcy5fZG9uZUxpc3Q7XG4gICAgICAgIHZhciBsZW4gPSBkb25lTGlzdC5sZW5ndGg7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGRvbmVMaXN0W2ldLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd8RnVuY3Rpb259IGVhc2luZ1xuICAgICAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkFuaW1hdG9yfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmFuaW1hdGlvbi5BbmltYXRvci5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBzdGFydDogZnVuY3Rpb24gKGdsb2JhbEVhc2luZykge1xuXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNsaXBDb3VudCA9IDA7XG5cbiAgICAgICAgdmFyIG9uZVRyYWNrRG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgY2xpcENvdW50LS07XG4gICAgICAgICAgICBpZiAoY2xpcENvdW50ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fZG9uZUNhbGxiYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGxhc3RDbGlwO1xuICAgICAgICB2YXIgY2xpcE1heFRpbWUgPSAwO1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiB0aGlzLl90cmFja3MpIHtcbiAgICAgICAgICAgIHZhciBjbGlwID0gY3JlYXRlVHJhY2tDbGlwKFxuICAgICAgICAgICAgICAgIHRoaXMsIGdsb2JhbEVhc2luZywgb25lVHJhY2tEb25lLFxuICAgICAgICAgICAgICAgIHRoaXMuX3RyYWNrc1twcm9wTmFtZV0sIHByb3BOYW1lLCBzZWxmLl9pbnRlcnBvbGF0ZXIsIHNlbGYuX21heFRpbWVcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBpZiAoY2xpcCkge1xuICAgICAgICAgICAgICAgIGNsaXBNYXhUaW1lID0gTWF0aC5tYXgoY2xpcE1heFRpbWUsIGNsaXAubGlmZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5fY2xpcExpc3QucHVzaChjbGlwKTtcbiAgICAgICAgICAgICAgICBjbGlwQ291bnQrKztcblxuICAgICAgICAgICAgICAgIC8vIElmIHN0YXJ0IGFmdGVyIGFkZGVkIHRvIGFuaW1hdGlvblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmFuaW1hdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5hZGRDbGlwKGNsaXApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxhc3RDbGlwID0gY2xpcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBkdXJpbmcgY2FsbGJhY2sgb24gdGhlIGxhc3QgY2xpcFxuICAgICAgICBpZiAobGFzdENsaXApIHtcbiAgICAgICAgICAgIHZhciBvbGRPbkZyYW1lID0gbGFzdENsaXAub25mcmFtZTtcbiAgICAgICAgICAgIGxhc3RDbGlwLm9uZnJhbWUgPSBmdW5jdGlvbiAodGFyZ2V0LCBwZXJjZW50KSB7XG4gICAgICAgICAgICAgICAgb2xkT25GcmFtZSh0YXJnZXQsIHBlcmNlbnQpO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWxmLl9vbmZyYW1lTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9vbmZyYW1lTGlzdFtpXSh0YXJnZXQsIHBlcmNlbnQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNsaXBDb3VudCkge1xuICAgICAgICAgICAgdGhpcy5fZG9uZUNhbGxiYWNrKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFN0b3AgdGhlIGFuaW1hdGlvblxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmFuaW1hdGlvbi5BbmltYXRvci5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBzdG9wOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fY2xpcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjbGlwID0gdGhpcy5fY2xpcExpc3RbaV07XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbi5yZW1vdmVDbGlwKGNsaXApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NsaXBMaXN0ID0gW107XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBEZWxheSBnaXZlbiBtaWxsaXNlY29uZHNcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgZGVsYXk6IGZ1bmN0aW9uICh0aW1lKXtcbiAgICAgICAgdGhpcy5fZGVsYXkgPSB0aW1lO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGFmdGVyIGFuaW1hdGlvbiBmaW5pc2hlZFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5BbmltYXRvcn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgZG9uZTogZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgaWYgKGZ1bmMpIHtcbiAgICAgICAgICAgIHRoaXMuX2RvbmVMaXN0LnB1c2goZnVuYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBHZXQgYWxsIGNsaXBzIGNyZWF0ZWQgaW4gc3RhcnQgbWV0aG9kLlxuICAgICAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkNsaXBbXX1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5hbmltYXRpb24uQW5pbWF0b3IucHJvdG90eXBlXG4gICAgICovXG4gICAgZ2V0Q2xpcHM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsaXBMaXN0O1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEFuaW1hdG9yO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9BbmltYXRvci5qc1xuLy8gbW9kdWxlIGlkID0gNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///70\n");

/***/ }),
/* 71 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// Delaunay Triangulation\n// Modified from https://github.com/ironwallaby/delaunay\nvar EPSILON = 1.0 / 1048576.0;\n\nfunction supertriangle(vertices) {\n    var xmin = Number.POSITIVE_INFINITY;\n    var ymin = Number.POSITIVE_INFINITY;\n    var xmax = Number.NEGATIVE_INFINITY;\n    var ymax = Number.NEGATIVE_INFINITY;\n    var i, dx, dy, dmax, xmid, ymid;\n\n    for (i = vertices.length; i--; ) {\n        if (vertices[i][0] < xmin) { xmin = vertices[i][0]; }\n        if (vertices[i][0] > xmax) { xmax = vertices[i][0]; }\n        if (vertices[i][1] < ymin) { ymin = vertices[i][1]; }\n        if (vertices[i][1] > ymax) { ymax = vertices[i][1]; }\n    }\n\n    dx = xmax - xmin;\n    dy = ymax - ymin;\n    dmax = Math.max(dx, dy);\n    xmid = xmin + dx * 0.5;\n    ymid = ymin + dy * 0.5;\n\n    return [\n        [xmid - 20 * dmax, ymid -      dmax],\n        [xmid            , ymid + 20 * dmax],\n        [xmid + 20 * dmax, ymid -      dmax]\n    ];\n}\n\nfunction circumcircle(vertices, i, j, k) {\n    var x1 = vertices[i][0],\n            y1 = vertices[i][1],\n            x2 = vertices[j][0],\n            y2 = vertices[j][1],\n            x3 = vertices[k][0],\n            y3 = vertices[k][1],\n            fabsy1y2 = Math.abs(y1 - y2),\n            fabsy2y3 = Math.abs(y2 - y3),\n            xc, yc, m1, m2, mx1, mx2, my1, my2, dx, dy;\n\n    /* Check for coincident points */\n    if (fabsy1y2 < EPSILON && fabsy2y3 < EPSILON) {\n        throw new Error('Eek! Coincident points!');\n    }\n\n    if (fabsy1y2 < EPSILON) {\n        m2  = -((x3 - x2) / (y3 - y2));\n        mx2 = (x2 + x3) / 2.0;\n        my2 = (y2 + y3) / 2.0;\n        xc  = (x2 + x1) / 2.0;\n        yc  = m2 * (xc - mx2) + my2;\n    }\n\n    else if (fabsy2y3 < EPSILON) {\n        m1  = -((x2 - x1) / (y2 - y1));\n        mx1 = (x1 + x2) / 2.0;\n        my1 = (y1 + y2) / 2.0;\n        xc  = (x3 + x2) / 2.0;\n        yc  = m1 * (xc - mx1) + my1;\n    }\n\n    else {\n        m1  = -((x2 - x1) / (y2 - y1));\n        m2  = -((x3 - x2) / (y3 - y2));\n        mx1 = (x1 + x2) / 2.0;\n        mx2 = (x2 + x3) / 2.0;\n        my1 = (y1 + y2) / 2.0;\n        my2 = (y2 + y3) / 2.0;\n        xc  = (m1 * mx1 - m2 * mx2 + my2 - my1) / (m1 - m2);\n        yc  = (fabsy1y2 > fabsy2y3) ?\n            m1 * (xc - mx1) + my1 :\n            m2 * (xc - mx2) + my2;\n    }\n\n    dx = x2 - xc;\n    dy = y2 - yc;\n    return {i: i, j: j, k: k, x: xc, y: yc, r: dx * dx + dy * dy};\n}\n\nfunction dedup(edges) {\n    var i, j, a, b, m, n;\n\n    for (j = edges.length; j; ) {\n        b = edges[--j];\n        a = edges[--j];\n\n        for (i = j; i; ) {\n            n = edges[--i];\n            m = edges[--i];\n\n            if ((a === m && b === n) || (a === n && b === m)) {\n                edges.splice(j, 2);\n                edges.splice(i, 2);\n                break;\n            }\n        }\n    }\n}\n\nvar delaunay = {\n    triangulate: function(vertices, key) {\n        var n = vertices.length;\n        var i, j, indices, st, open, closed, edges, dx, dy, a, b, c;\n\n        /* Bail if there aren't enough vertices to form any triangles. */\n        if (n < 3) {\n            return [];\n        }\n\n        /* Slice out the actual vertices from the passed objects. (Duplicate the\n            * array even if we don't, though, since we need to make a supertriangle\n            * later on!) */\n        vertices = vertices.slice(0);\n\n        if (key) {\n            for (i = n; i--; ) {\n                vertices[i] = vertices[i][key];\n            }\n        }\n\n        /* Make an array of indices into the vertex array, sorted by the\n            * vertices' x-position. Force stable sorting by comparing indices if\n            * the x-positions are equal. */\n        indices = new Array(n);\n\n        for (i = n; i--; ) {\n            indices[i] = i;\n        }\n\n        indices.sort(function(i, j) {\n            var diff = vertices[j][0] - vertices[i][0];\n            return diff !== 0 ? diff : i - j;\n        });\n\n        /* Next, find the vertices of the supertriangle (which contains all other\n            * triangles), and append them onto the end of a (copy of) the vertex\n            * array. */\n        st = supertriangle(vertices);\n        vertices.push(st[0], st[1], st[2]);\n\n        /* Initialize the open list (containing the supertriangle and nothing\n            * else) and the closed list (which is empty since we havn't processed\n            * any triangles yet). */\n        open   = [circumcircle(vertices, n + 0, n + 1, n + 2)];\n        closed = [];\n        edges  = [];\n\n        /* Incrementally add each vertex to the mesh. */\n        for (i = indices.length; i--; edges.length = 0) {\n            c = indices[i];\n\n            /* For each open triangle, check to see if the current point is\n                * inside it's circumcircle. If it is, remove the triangle and add\n                * it's edges to an edge list. */\n            for (j = open.length; j--; ) {\n                /* If this point is to the right of this triangle's circumcircle,\n                    * then this triangle should never get checked again. Remove it\n                    * from the open list, add it to the closed list, and skip. */\n                dx = vertices[c][0] - open[j].x;\n                if (dx > 0.0 && dx * dx > open[j].r) {\n                    closed.push(open[j]);\n                    open.splice(j, 1);\n                    continue;\n                }\n\n                /* If we're outside the circumcircle, skip this triangle. */\n                dy = vertices[c][1] - open[j].y;\n                if (dx * dx + dy * dy - open[j].r > EPSILON) {\n                    continue;\n                }\n\n                /* Remove the triangle and add it's edges to the edge list. */\n                edges.push(\n                    open[j].i, open[j].j,\n                    open[j].j, open[j].k,\n                    open[j].k, open[j].i\n                );\n                open.splice(j, 1);\n            }\n\n            /* Remove any doubled edges. */\n            dedup(edges);\n\n            /* Add a new triangle for each edge. */\n            for (j = edges.length; j; ) {\n                b = edges[--j];\n                a = edges[--j];\n                open.push(circumcircle(vertices, a, b, c));\n            }\n        }\n\n        /* Copy any remaining open triangles to the closed list, and then\n            * remove any triangles that share a vertex with the supertriangle,\n            * building a list of triplets that represent triangles. */\n        for (i = open.length; i--; ) {\n            closed.push(open[i]);\n        }\n        open.length = 0;\n\n        for (i = closed.length; i--; ) {\n            if (closed[i].i < n && closed[i].j < n && closed[i].k < n) {\n                open.push(closed[i].i, closed[i].j, closed[i].k);\n            }\n        }\n\n        /* Yay, we're done! */\n        return open;\n    },\n    contains: function(tri, p) {\n        /* Bounding box test first, for quick rejections. */\n        if ((p[0] < tri[0][0] && p[0] < tri[1][0] && p[0] < tri[2][0]) ||\n                (p[0] > tri[0][0] && p[0] > tri[1][0] && p[0] > tri[2][0]) ||\n                (p[1] < tri[0][1] && p[1] < tri[1][1] && p[1] < tri[2][1]) ||\n                (p[1] > tri[0][1] && p[1] > tri[1][1] && p[1] > tri[2][1])) {\n            return null;\n        }\n\n        var a = tri[1][0] - tri[0][0];\n        var b = tri[2][0] - tri[0][0];\n        var c = tri[1][1] - tri[0][1];\n        var d = tri[2][1] - tri[0][1];\n        var i = a * d - b * c;\n\n        /* Degenerate tri. */\n        if (i === 0.0) {\n            return null;\n        }\n\n        var u = (d * (p[0] - tri[0][0]) - b * (p[1] - tri[0][1])) / i,\n                v = (a * (p[1] - tri[0][1]) - c * (p[0] - tri[0][0])) / i;\n\n        /* If we're outside the tri, fail. */\n        if (u < 0.0 || v < 0.0 || (u + v) > 1.0) {\n            return null;\n        }\n\n        return [u, v];\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (delaunay);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvZGVsYXVuYXkuanM/MGI3NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBEZWxhdW5heSBUcmlhbmd1bGF0aW9uXG4vLyBNb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9pcm9ud2FsbGFieS9kZWxhdW5heVxudmFyIEVQU0lMT04gPSAxLjAgLyAxMDQ4NTc2LjA7XG5cbmZ1bmN0aW9uIHN1cGVydHJpYW5nbGUodmVydGljZXMpIHtcbiAgICB2YXIgeG1pbiA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB2YXIgeW1pbiA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgICB2YXIgeG1heCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICB2YXIgeW1heCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgICB2YXIgaSwgZHgsIGR5LCBkbWF4LCB4bWlkLCB5bWlkO1xuXG4gICAgZm9yIChpID0gdmVydGljZXMubGVuZ3RoOyBpLS07ICkge1xuICAgICAgICBpZiAodmVydGljZXNbaV1bMF0gPCB4bWluKSB7IHhtaW4gPSB2ZXJ0aWNlc1tpXVswXTsgfVxuICAgICAgICBpZiAodmVydGljZXNbaV1bMF0gPiB4bWF4KSB7IHhtYXggPSB2ZXJ0aWNlc1tpXVswXTsgfVxuICAgICAgICBpZiAodmVydGljZXNbaV1bMV0gPCB5bWluKSB7IHltaW4gPSB2ZXJ0aWNlc1tpXVsxXTsgfVxuICAgICAgICBpZiAodmVydGljZXNbaV1bMV0gPiB5bWF4KSB7IHltYXggPSB2ZXJ0aWNlc1tpXVsxXTsgfVxuICAgIH1cblxuICAgIGR4ID0geG1heCAtIHhtaW47XG4gICAgZHkgPSB5bWF4IC0geW1pbjtcbiAgICBkbWF4ID0gTWF0aC5tYXgoZHgsIGR5KTtcbiAgICB4bWlkID0geG1pbiArIGR4ICogMC41O1xuICAgIHltaWQgPSB5bWluICsgZHkgKiAwLjU7XG5cbiAgICByZXR1cm4gW1xuICAgICAgICBbeG1pZCAtIDIwICogZG1heCwgeW1pZCAtICAgICAgZG1heF0sXG4gICAgICAgIFt4bWlkICAgICAgICAgICAgLCB5bWlkICsgMjAgKiBkbWF4XSxcbiAgICAgICAgW3htaWQgKyAyMCAqIGRtYXgsIHltaWQgLSAgICAgIGRtYXhdXG4gICAgXTtcbn1cblxuZnVuY3Rpb24gY2lyY3VtY2lyY2xlKHZlcnRpY2VzLCBpLCBqLCBrKSB7XG4gICAgdmFyIHgxID0gdmVydGljZXNbaV1bMF0sXG4gICAgICAgICAgICB5MSA9IHZlcnRpY2VzW2ldWzFdLFxuICAgICAgICAgICAgeDIgPSB2ZXJ0aWNlc1tqXVswXSxcbiAgICAgICAgICAgIHkyID0gdmVydGljZXNbal1bMV0sXG4gICAgICAgICAgICB4MyA9IHZlcnRpY2VzW2tdWzBdLFxuICAgICAgICAgICAgeTMgPSB2ZXJ0aWNlc1trXVsxXSxcbiAgICAgICAgICAgIGZhYnN5MXkyID0gTWF0aC5hYnMoeTEgLSB5MiksXG4gICAgICAgICAgICBmYWJzeTJ5MyA9IE1hdGguYWJzKHkyIC0geTMpLFxuICAgICAgICAgICAgeGMsIHljLCBtMSwgbTIsIG14MSwgbXgyLCBteTEsIG15MiwgZHgsIGR5O1xuXG4gICAgLyogQ2hlY2sgZm9yIGNvaW5jaWRlbnQgcG9pbnRzICovXG4gICAgaWYgKGZhYnN5MXkyIDwgRVBTSUxPTiAmJiBmYWJzeTJ5MyA8IEVQU0lMT04pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFZWshIENvaW5jaWRlbnQgcG9pbnRzIScpO1xuICAgIH1cblxuICAgIGlmIChmYWJzeTF5MiA8IEVQU0lMT04pIHtcbiAgICAgICAgbTIgID0gLSgoeDMgLSB4MikgLyAoeTMgLSB5MikpO1xuICAgICAgICBteDIgPSAoeDIgKyB4MykgLyAyLjA7XG4gICAgICAgIG15MiA9ICh5MiArIHkzKSAvIDIuMDtcbiAgICAgICAgeGMgID0gKHgyICsgeDEpIC8gMi4wO1xuICAgICAgICB5YyAgPSBtMiAqICh4YyAtIG14MikgKyBteTI7XG4gICAgfVxuXG4gICAgZWxzZSBpZiAoZmFic3kyeTMgPCBFUFNJTE9OKSB7XG4gICAgICAgIG0xICA9IC0oKHgyIC0geDEpIC8gKHkyIC0geTEpKTtcbiAgICAgICAgbXgxID0gKHgxICsgeDIpIC8gMi4wO1xuICAgICAgICBteTEgPSAoeTEgKyB5MikgLyAyLjA7XG4gICAgICAgIHhjICA9ICh4MyArIHgyKSAvIDIuMDtcbiAgICAgICAgeWMgID0gbTEgKiAoeGMgLSBteDEpICsgbXkxO1xuICAgIH1cblxuICAgIGVsc2Uge1xuICAgICAgICBtMSAgPSAtKCh4MiAtIHgxKSAvICh5MiAtIHkxKSk7XG4gICAgICAgIG0yICA9IC0oKHgzIC0geDIpIC8gKHkzIC0geTIpKTtcbiAgICAgICAgbXgxID0gKHgxICsgeDIpIC8gMi4wO1xuICAgICAgICBteDIgPSAoeDIgKyB4MykgLyAyLjA7XG4gICAgICAgIG15MSA9ICh5MSArIHkyKSAvIDIuMDtcbiAgICAgICAgbXkyID0gKHkyICsgeTMpIC8gMi4wO1xuICAgICAgICB4YyAgPSAobTEgKiBteDEgLSBtMiAqIG14MiArIG15MiAtIG15MSkgLyAobTEgLSBtMik7XG4gICAgICAgIHljICA9IChmYWJzeTF5MiA+IGZhYnN5MnkzKSA/XG4gICAgICAgICAgICBtMSAqICh4YyAtIG14MSkgKyBteTEgOlxuICAgICAgICAgICAgbTIgKiAoeGMgLSBteDIpICsgbXkyO1xuICAgIH1cblxuICAgIGR4ID0geDIgLSB4YztcbiAgICBkeSA9IHkyIC0geWM7XG4gICAgcmV0dXJuIHtpOiBpLCBqOiBqLCBrOiBrLCB4OiB4YywgeTogeWMsIHI6IGR4ICogZHggKyBkeSAqIGR5fTtcbn1cblxuZnVuY3Rpb24gZGVkdXAoZWRnZXMpIHtcbiAgICB2YXIgaSwgaiwgYSwgYiwgbSwgbjtcblxuICAgIGZvciAoaiA9IGVkZ2VzLmxlbmd0aDsgajsgKSB7XG4gICAgICAgIGIgPSBlZGdlc1stLWpdO1xuICAgICAgICBhID0gZWRnZXNbLS1qXTtcblxuICAgICAgICBmb3IgKGkgPSBqOyBpOyApIHtcbiAgICAgICAgICAgIG4gPSBlZGdlc1stLWldO1xuICAgICAgICAgICAgbSA9IGVkZ2VzWy0taV07XG5cbiAgICAgICAgICAgIGlmICgoYSA9PT0gbSAmJiBiID09PSBuKSB8fCAoYSA9PT0gbiAmJiBiID09PSBtKSkge1xuICAgICAgICAgICAgICAgIGVkZ2VzLnNwbGljZShqLCAyKTtcbiAgICAgICAgICAgICAgICBlZGdlcy5zcGxpY2UoaSwgMik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBkZWxhdW5heSA9IHtcbiAgICB0cmlhbmd1bGF0ZTogZnVuY3Rpb24odmVydGljZXMsIGtleSkge1xuICAgICAgICB2YXIgbiA9IHZlcnRpY2VzLmxlbmd0aDtcbiAgICAgICAgdmFyIGksIGosIGluZGljZXMsIHN0LCBvcGVuLCBjbG9zZWQsIGVkZ2VzLCBkeCwgZHksIGEsIGIsIGM7XG5cbiAgICAgICAgLyogQmFpbCBpZiB0aGVyZSBhcmVuJ3QgZW5vdWdoIHZlcnRpY2VzIHRvIGZvcm0gYW55IHRyaWFuZ2xlcy4gKi9cbiAgICAgICAgaWYgKG4gPCAzKSB7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICAvKiBTbGljZSBvdXQgdGhlIGFjdHVhbCB2ZXJ0aWNlcyBmcm9tIHRoZSBwYXNzZWQgb2JqZWN0cy4gKER1cGxpY2F0ZSB0aGVcbiAgICAgICAgICAgICogYXJyYXkgZXZlbiBpZiB3ZSBkb24ndCwgdGhvdWdoLCBzaW5jZSB3ZSBuZWVkIHRvIG1ha2UgYSBzdXBlcnRyaWFuZ2xlXG4gICAgICAgICAgICAqIGxhdGVyIG9uISkgKi9cbiAgICAgICAgdmVydGljZXMgPSB2ZXJ0aWNlcy5zbGljZSgwKTtcblxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgICBmb3IgKGkgPSBuOyBpLS07ICkge1xuICAgICAgICAgICAgICAgIHZlcnRpY2VzW2ldID0gdmVydGljZXNbaV1ba2V5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8qIE1ha2UgYW4gYXJyYXkgb2YgaW5kaWNlcyBpbnRvIHRoZSB2ZXJ0ZXggYXJyYXksIHNvcnRlZCBieSB0aGVcbiAgICAgICAgICAgICogdmVydGljZXMnIHgtcG9zaXRpb24uIEZvcmNlIHN0YWJsZSBzb3J0aW5nIGJ5IGNvbXBhcmluZyBpbmRpY2VzIGlmXG4gICAgICAgICAgICAqIHRoZSB4LXBvc2l0aW9ucyBhcmUgZXF1YWwuICovXG4gICAgICAgIGluZGljZXMgPSBuZXcgQXJyYXkobik7XG5cbiAgICAgICAgZm9yIChpID0gbjsgaS0tOyApIHtcbiAgICAgICAgICAgIGluZGljZXNbaV0gPSBpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5kaWNlcy5zb3J0KGZ1bmN0aW9uKGksIGopIHtcbiAgICAgICAgICAgIHZhciBkaWZmID0gdmVydGljZXNbal1bMF0gLSB2ZXJ0aWNlc1tpXVswXTtcbiAgICAgICAgICAgIHJldHVybiBkaWZmICE9PSAwID8gZGlmZiA6IGkgLSBqO1xuICAgICAgICB9KTtcblxuICAgICAgICAvKiBOZXh0LCBmaW5kIHRoZSB2ZXJ0aWNlcyBvZiB0aGUgc3VwZXJ0cmlhbmdsZSAod2hpY2ggY29udGFpbnMgYWxsIG90aGVyXG4gICAgICAgICAgICAqIHRyaWFuZ2xlcyksIGFuZCBhcHBlbmQgdGhlbSBvbnRvIHRoZSBlbmQgb2YgYSAoY29weSBvZikgdGhlIHZlcnRleFxuICAgICAgICAgICAgKiBhcnJheS4gKi9cbiAgICAgICAgc3QgPSBzdXBlcnRyaWFuZ2xlKHZlcnRpY2VzKTtcbiAgICAgICAgdmVydGljZXMucHVzaChzdFswXSwgc3RbMV0sIHN0WzJdKTtcblxuICAgICAgICAvKiBJbml0aWFsaXplIHRoZSBvcGVuIGxpc3QgKGNvbnRhaW5pbmcgdGhlIHN1cGVydHJpYW5nbGUgYW5kIG5vdGhpbmdcbiAgICAgICAgICAgICogZWxzZSkgYW5kIHRoZSBjbG9zZWQgbGlzdCAod2hpY2ggaXMgZW1wdHkgc2luY2Ugd2UgaGF2bid0IHByb2Nlc3NlZFxuICAgICAgICAgICAgKiBhbnkgdHJpYW5nbGVzIHlldCkuICovXG4gICAgICAgIG9wZW4gICA9IFtjaXJjdW1jaXJjbGUodmVydGljZXMsIG4gKyAwLCBuICsgMSwgbiArIDIpXTtcbiAgICAgICAgY2xvc2VkID0gW107XG4gICAgICAgIGVkZ2VzICA9IFtdO1xuXG4gICAgICAgIC8qIEluY3JlbWVudGFsbHkgYWRkIGVhY2ggdmVydGV4IHRvIHRoZSBtZXNoLiAqL1xuICAgICAgICBmb3IgKGkgPSBpbmRpY2VzLmxlbmd0aDsgaS0tOyBlZGdlcy5sZW5ndGggPSAwKSB7XG4gICAgICAgICAgICBjID0gaW5kaWNlc1tpXTtcblxuICAgICAgICAgICAgLyogRm9yIGVhY2ggb3BlbiB0cmlhbmdsZSwgY2hlY2sgdG8gc2VlIGlmIHRoZSBjdXJyZW50IHBvaW50IGlzXG4gICAgICAgICAgICAgICAgKiBpbnNpZGUgaXQncyBjaXJjdW1jaXJjbGUuIElmIGl0IGlzLCByZW1vdmUgdGhlIHRyaWFuZ2xlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAqIGl0J3MgZWRnZXMgdG8gYW4gZWRnZSBsaXN0LiAqL1xuICAgICAgICAgICAgZm9yIChqID0gb3Blbi5sZW5ndGg7IGotLTsgKSB7XG4gICAgICAgICAgICAgICAgLyogSWYgdGhpcyBwb2ludCBpcyB0byB0aGUgcmlnaHQgb2YgdGhpcyB0cmlhbmdsZSdzIGNpcmN1bWNpcmNsZSxcbiAgICAgICAgICAgICAgICAgICAgKiB0aGVuIHRoaXMgdHJpYW5nbGUgc2hvdWxkIG5ldmVyIGdldCBjaGVja2VkIGFnYWluLiBSZW1vdmUgaXRcbiAgICAgICAgICAgICAgICAgICAgKiBmcm9tIHRoZSBvcGVuIGxpc3QsIGFkZCBpdCB0byB0aGUgY2xvc2VkIGxpc3QsIGFuZCBza2lwLiAqL1xuICAgICAgICAgICAgICAgIGR4ID0gdmVydGljZXNbY11bMF0gLSBvcGVuW2pdLng7XG4gICAgICAgICAgICAgICAgaWYgKGR4ID4gMC4wICYmIGR4ICogZHggPiBvcGVuW2pdLnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VkLnB1c2gob3BlbltqXSk7XG4gICAgICAgICAgICAgICAgICAgIG9wZW4uc3BsaWNlKGosIDEpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBJZiB3ZSdyZSBvdXRzaWRlIHRoZSBjaXJjdW1jaXJjbGUsIHNraXAgdGhpcyB0cmlhbmdsZS4gKi9cbiAgICAgICAgICAgICAgICBkeSA9IHZlcnRpY2VzW2NdWzFdIC0gb3BlbltqXS55O1xuICAgICAgICAgICAgICAgIGlmIChkeCAqIGR4ICsgZHkgKiBkeSAtIG9wZW5bal0uciA+IEVQU0lMT04pIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyogUmVtb3ZlIHRoZSB0cmlhbmdsZSBhbmQgYWRkIGl0J3MgZWRnZXMgdG8gdGhlIGVkZ2UgbGlzdC4gKi9cbiAgICAgICAgICAgICAgICBlZGdlcy5wdXNoKFxuICAgICAgICAgICAgICAgICAgICBvcGVuW2pdLmksIG9wZW5bal0uaixcbiAgICAgICAgICAgICAgICAgICAgb3BlbltqXS5qLCBvcGVuW2pdLmssXG4gICAgICAgICAgICAgICAgICAgIG9wZW5bal0uaywgb3BlbltqXS5pXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBvcGVuLnNwbGljZShqLCAxKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogUmVtb3ZlIGFueSBkb3VibGVkIGVkZ2VzLiAqL1xuICAgICAgICAgICAgZGVkdXAoZWRnZXMpO1xuXG4gICAgICAgICAgICAvKiBBZGQgYSBuZXcgdHJpYW5nbGUgZm9yIGVhY2ggZWRnZS4gKi9cbiAgICAgICAgICAgIGZvciAoaiA9IGVkZ2VzLmxlbmd0aDsgajsgKSB7XG4gICAgICAgICAgICAgICAgYiA9IGVkZ2VzWy0tal07XG4gICAgICAgICAgICAgICAgYSA9IGVkZ2VzWy0tal07XG4gICAgICAgICAgICAgICAgb3Blbi5wdXNoKGNpcmN1bWNpcmNsZSh2ZXJ0aWNlcywgYSwgYiwgYykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogQ29weSBhbnkgcmVtYWluaW5nIG9wZW4gdHJpYW5nbGVzIHRvIHRoZSBjbG9zZWQgbGlzdCwgYW5kIHRoZW5cbiAgICAgICAgICAgICogcmVtb3ZlIGFueSB0cmlhbmdsZXMgdGhhdCBzaGFyZSBhIHZlcnRleCB3aXRoIHRoZSBzdXBlcnRyaWFuZ2xlLFxuICAgICAgICAgICAgKiBidWlsZGluZyBhIGxpc3Qgb2YgdHJpcGxldHMgdGhhdCByZXByZXNlbnQgdHJpYW5nbGVzLiAqL1xuICAgICAgICBmb3IgKGkgPSBvcGVuLmxlbmd0aDsgaS0tOyApIHtcbiAgICAgICAgICAgIGNsb3NlZC5wdXNoKG9wZW5baV0pO1xuICAgICAgICB9XG4gICAgICAgIG9wZW4ubGVuZ3RoID0gMDtcblxuICAgICAgICBmb3IgKGkgPSBjbG9zZWQubGVuZ3RoOyBpLS07ICkge1xuICAgICAgICAgICAgaWYgKGNsb3NlZFtpXS5pIDwgbiAmJiBjbG9zZWRbaV0uaiA8IG4gJiYgY2xvc2VkW2ldLmsgPCBuKSB7XG4gICAgICAgICAgICAgICAgb3Blbi5wdXNoKGNsb3NlZFtpXS5pLCBjbG9zZWRbaV0uaiwgY2xvc2VkW2ldLmspO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLyogWWF5LCB3ZSdyZSBkb25lISAqL1xuICAgICAgICByZXR1cm4gb3BlbjtcbiAgICB9LFxuICAgIGNvbnRhaW5zOiBmdW5jdGlvbih0cmksIHApIHtcbiAgICAgICAgLyogQm91bmRpbmcgYm94IHRlc3QgZmlyc3QsIGZvciBxdWljayByZWplY3Rpb25zLiAqL1xuICAgICAgICBpZiAoKHBbMF0gPCB0cmlbMF1bMF0gJiYgcFswXSA8IHRyaVsxXVswXSAmJiBwWzBdIDwgdHJpWzJdWzBdKSB8fFxuICAgICAgICAgICAgICAgIChwWzBdID4gdHJpWzBdWzBdICYmIHBbMF0gPiB0cmlbMV1bMF0gJiYgcFswXSA+IHRyaVsyXVswXSkgfHxcbiAgICAgICAgICAgICAgICAocFsxXSA8IHRyaVswXVsxXSAmJiBwWzFdIDwgdHJpWzFdWzFdICYmIHBbMV0gPCB0cmlbMl1bMV0pIHx8XG4gICAgICAgICAgICAgICAgKHBbMV0gPiB0cmlbMF1bMV0gJiYgcFsxXSA+IHRyaVsxXVsxXSAmJiBwWzFdID4gdHJpWzJdWzFdKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYSA9IHRyaVsxXVswXSAtIHRyaVswXVswXTtcbiAgICAgICAgdmFyIGIgPSB0cmlbMl1bMF0gLSB0cmlbMF1bMF07XG4gICAgICAgIHZhciBjID0gdHJpWzFdWzFdIC0gdHJpWzBdWzFdO1xuICAgICAgICB2YXIgZCA9IHRyaVsyXVsxXSAtIHRyaVswXVsxXTtcbiAgICAgICAgdmFyIGkgPSBhICogZCAtIGIgKiBjO1xuXG4gICAgICAgIC8qIERlZ2VuZXJhdGUgdHJpLiAqL1xuICAgICAgICBpZiAoaSA9PT0gMC4wKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB1ID0gKGQgKiAocFswXSAtIHRyaVswXVswXSkgLSBiICogKHBbMV0gLSB0cmlbMF1bMV0pKSAvIGksXG4gICAgICAgICAgICAgICAgdiA9IChhICogKHBbMV0gLSB0cmlbMF1bMV0pIC0gYyAqIChwWzBdIC0gdHJpWzBdWzBdKSkgLyBpO1xuXG4gICAgICAgIC8qIElmIHdlJ3JlIG91dHNpZGUgdGhlIHRyaSwgZmFpbC4gKi9cbiAgICAgICAgaWYgKHUgPCAwLjAgfHwgdiA8IDAuMCB8fCAodSArIHYpID4gMS4wKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbdSwgdl07XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZGVsYXVuYXk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC9kZWxhdW5heS5qc1xuLy8gbW9kdWxlIGlkID0gNzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///71\n");

/***/ }),
/* 72 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n// Sampler clip is especially for the animation sampler in glTF\n// Use Typed Array can reduce a lot of heap memory\n\n\n\n\n// lerp function with offset in large array\nfunction vec3lerp(out, a, b, t, oa, ob) {\n    var ax = a[oa];\n    var ay = a[oa + 1];\n    var az = a[oa + 2];\n    out[0] = ax + t * (b[ob] - ax);\n    out[1] = ay + t * (b[ob + 1] - ay);\n    out[2] = az + t * (b[ob + 2] - az);\n\n    return out;\n}\n\nfunction quatSlerp(out, a, b, t, oa, ob) {\n    // benchmarks:\n    //    http://jsperf.com/quaternion-slerp-implementations\n\n    var ax = a[0 + oa], ay = a[1 + oa], az = a[2 + oa], aw = a[3 + oa],\n        bx = b[0 + ob], by = b[1 + ob], bz = b[2 + ob], bw = b[3 + ob];\n\n    var omega, cosom, sinom, scale0, scale1;\n\n    // calc cosine\n    cosom = ax * bx + ay * by + az * bz + aw * bw;\n    // adjust signs (if necessary)\n    if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = - bx;\n        by = - by;\n        bz = - bz;\n        bw = - bw;\n    }\n    // calculate coefficients\n    if ((1.0 - cosom) > 0.000001) {\n        // standard case (slerp)\n        omega  = Math.acos(cosom);\n        sinom  = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n    }\n    else {\n        // 'from' and 'to' quaternions are very close\n        //  ... so we can do a linear interpolation\n        scale0 = 1.0 - t;\n        scale1 = t;\n    }\n    // calculate final values\n    out[0] = scale0 * ax + scale1 * bx;\n    out[1] = scale0 * ay + scale1 * by;\n    out[2] = scale0 * az + scale1 * bz;\n    out[3] = scale0 * aw + scale1 * bw;\n\n    return out;\n}\n\n/**\n * SamplerTrack manages `position`, `rotation`, `scale` tracks in animation of single scene node.\n * @constructor\n * @alias clay.animation.SamplerTrack\n * @param {Object} [opts]\n * @param {string} [opts.name] Track name\n * @param {clay.Node} [opts.target] Target node's transform will updated automatically\n */\nvar SamplerTrack = function (opts) {\n    opts = opts || {};\n\n    this.name = opts.name || '';\n    /**\n     * @param {clay.Node}\n     */\n    this.target = opts.target || null;\n    /**\n     * @type {Array}\n     */\n    this.position = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].create();\n    /**\n     * Rotation is represented by a quaternion\n     * @type {Array}\n     */\n    this.rotation = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    /**\n     * @type {Array}\n     */\n    this.scale = __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].fromValues(1, 1, 1);\n\n    this.channels = {\n        time: null,\n        position: null,\n        rotation: null,\n        scale: null\n    };\n\n    this._cacheKey = 0;\n    this._cacheTime = 0;\n};\n\nSamplerTrack.prototype.setTime = function (time) {\n    if (!this.channels.time) {\n        return;\n    }\n    var channels = this.channels;\n    var len = channels.time.length;\n    var key = -1;\n    // Only one frame\n    if (len === 1) {\n        if (channels.rotation) {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.rotation, channels.rotation);\n        }\n        if (channels.position) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(this.position, channels.position);\n        }\n        if (channels.scale) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(this.scale, channels.scale);\n        }\n        return;\n    }\n    // Clamp\n    else if (time <= channels.time[0]) {\n        time = channels.time[0];\n        key = 0;\n    }\n    else if (time >= channels.time[len - 1]) {\n        time = channels.time[len - 1];\n        key = len - 2;\n    }\n    else {\n        if (time < this._cacheTime) {\n            var s = Math.min(len - 1, this._cacheKey + 1);\n            for (var i = s; i >= 0; i--) {\n                if (channels.time[i - 1] <= time && channels.time[i] > time) {\n                    key = i - 1;\n                    break;\n                }\n            }\n        }\n        else {\n            for (var i = this._cacheKey; i < len - 1; i++) {\n                if (channels.time[i] <= time && channels.time[i + 1] > time) {\n                    key = i;\n                    break;\n                }\n            }\n        }\n    }\n    if (key > -1) {\n        this._cacheKey = key;\n        this._cacheTime = time;\n        var start = key;\n        var end = key + 1;\n        var startTime = channels.time[start];\n        var endTime = channels.time[end];\n        var range = endTime - startTime;\n        var percent = range === 0 ? 0 : (time - startTime) / range;\n\n        if (channels.rotation) {\n            quatSlerp(this.rotation, channels.rotation, channels.rotation, percent, start * 4, end * 4);\n        }\n        if (channels.position) {\n            vec3lerp(this.position, channels.position, channels.position, percent, start * 3, end * 3);\n        }\n        if (channels.scale) {\n            vec3lerp(this.scale, channels.scale, channels.scale, percent, start * 3, end * 3);\n        }\n    }\n    // Loop handling\n    if (key === len - 2) {\n        this._cacheKey = 0;\n        this._cacheTime = 0;\n    }\n\n    this.updateTarget();\n};\n\n/**\n * Update transform of target node manually\n */\nSamplerTrack.prototype.updateTarget = function () {\n    var channels = this.channels;\n    if (this.target) {\n        // Only update target prop if have data.\n        if (channels.position) {\n            this.target.position.setArray(this.position);\n        }\n        if (channels.rotation) {\n            this.target.rotation.setArray(this.rotation);\n        }\n        if (channels.scale) {\n            this.target.scale.setArray(this.scale);\n        }\n    }\n};\n\n/**\n * @return {number}\n */\nSamplerTrack.prototype.getMaxTime = function () {\n    return this.channels.time[this.channels.time.length - 1];\n};\n\n/**\n * @param {number} startTime\n * @param {number} endTime\n * @return {clay.animation.SamplerTrack}\n */\nSamplerTrack.prototype.getSubTrack = function (startTime, endTime) {\n\n    var subClip = new SamplerTrack({\n        name: this.name\n    });\n    var minTime = this.channels.time[0];\n    startTime = Math.min(Math.max(startTime, minTime), this.life);\n    endTime = Math.min(Math.max(endTime, minTime), this.life);\n\n    var rangeStart = this._findRange(startTime);\n    var rangeEnd = this._findRange(endTime);\n\n    var count = rangeEnd[0] - rangeStart[0] + 1;\n    if (rangeStart[1] === 0 && rangeEnd[1] === 0) {\n        count -= 1;\n    }\n    if (this.channels.rotation) {\n        subClip.channels.rotation = new Float32Array(count * 4);\n    }\n    if (this.channels.position) {\n        subClip.channels.position = new Float32Array(count * 3);\n    }\n    if (this.channels.scale) {\n        subClip.channels.scale = new Float32Array(count * 3);\n    }\n    if (this.channels.time) {\n        subClip.channels.time = new Float32Array(count);\n    }\n    // Clip at the start\n    this.setTime(startTime);\n    for (var i = 0; i < 3; i++) {\n        subClip.channels.rotation[i] = this.rotation[i];\n        subClip.channels.position[i] = this.position[i];\n        subClip.channels.scale[i] = this.scale[i];\n    }\n    subClip.channels.time[0] = 0;\n    subClip.channels.rotation[3] = this.rotation[3];\n\n    for (var i = 1; i < count-1; i++) {\n        var i2;\n        for (var j = 0; j < 3; j++) {\n            i2 = rangeStart[0] + i;\n            subClip.channels.rotation[i * 4 + j] = this.channels.rotation[i2 * 4 + j];\n            subClip.channels.position[i * 3 + j] = this.channels.position[i2 * 3 + j];\n            subClip.channels.scale[i * 3 + j] = this.channels.scale[i2 * 3 + j];\n        }\n        subClip.channels.time[i] = this.channels.time[i2] - startTime;\n        subClip.channels.rotation[i * 4 + 3] = this.channels.rotation[i2 * 4 + 3];\n    }\n    // Clip at the end\n    this.setTime(endTime);\n    for (var i = 0; i < 3; i++) {\n        subClip.channels.rotation[(count - 1) * 4 + i] = this.rotation[i];\n        subClip.channels.position[(count - 1) * 3 + i] = this.position[i];\n        subClip.channels.scale[(count - 1) * 3 + i] = this.scale[i];\n    }\n    subClip.channels.time[(count - 1)] = endTime - startTime;\n    subClip.channels.rotation[(count - 1) * 4 + 3] = this.rotation[3];\n\n    // TODO set back ?\n    subClip.life = endTime - startTime;\n    return subClip;\n};\n\nSamplerTrack.prototype._findRange = function (time) {\n    var channels = this.channels;\n    var len = channels.time.length;\n    var start = -1;\n    for (var i = 0; i < len - 1; i++) {\n        if (channels.time[i] <= time && channels.time[i+1] > time) {\n            start = i;\n        }\n    }\n    var percent = 0;\n    if (start >= 0) {\n        var startTime = channels.time[start];\n        var endTime = channels.time[start+1];\n        var percent = (time-startTime) / (endTime-startTime);\n    }\n    // Percent [0, 1)\n    return [start, percent];\n};\n\n/**\n * 1D blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n * @param  {number} w\n */\nSamplerTrack.prototype.blend1D = function (t1, t2, w) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lerp(this.position, t1.position, t2.position, w);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].lerp(this.scale, t1.scale, t2.scale, w);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.rotation, t1.rotation, t2.rotation, w);\n};\n/**\n * 2D blending between three clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c3\n * @param  {number} f\n * @param  {number} g\n */\nSamplerTrack.prototype.blend2D = (function () {\n    var q1 = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    var q2 = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].create();\n    return function (t1, t2, t3, f, g) {\n        var a = 1 - f - g;\n\n        this.position[0] = t1.position[0] * a + t2.position[0] * f + t3.position[0] * g;\n        this.position[1] = t1.position[1] * a + t2.position[1] * f + t3.position[1] * g;\n        this.position[2] = t1.position[2] * a + t2.position[2] * f + t3.position[2] * g;\n\n        this.scale[0] = t1.scale[0] * a + t2.scale[0] * f + t3.scale[0] * g;\n        this.scale[1] = t1.scale[1] * a + t2.scale[1] * f + t3.scale[1] * g;\n        this.scale[2] = t1.scale[2] * a + t2.scale[2] * f + t3.scale[2] * g;\n\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/bb205403(v=vs.85).aspx\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/microsoft.directx_sdk.quaternion.xmquaternionbarycentric(v=vs.85).aspx\n        var s = f + g;\n        if (s === 0) {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.rotation, t1.rotation);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(q1, t1.rotation, t2.rotation, s);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(q2, t1.rotation, t3.rotation, s);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.rotation, q1, q2, g / s);\n        }\n    };\n})();\n/**\n * Additive blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n */\nSamplerTrack.prototype.additiveBlend = function (t1, t2) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add(this.position, t1.position, t2.position);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].add(this.scale, t1.scale, t2.scale);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.rotation, t2.rotation, t1.rotation);\n};\n/**\n * Subtractive blending between two clips\n * @function\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c1\n * @param  {clay.animation.SamplerTrack|clay.animation.TransformTrack} c2\n */\nSamplerTrack.prototype.subtractiveBlend = function (t1, t2) {\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(this.position, t1.position, t2.position);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].sub(this.scale, t1.scale, t2.scale);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(this.rotation, t2.rotation);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.rotation, this.rotation, t1.rotation);\n};\n\n/**\n * Clone a new SamplerTrack\n * @return {clay.animation.SamplerTrack}\n */\nSamplerTrack.prototype.clone = function () {\n    var track = SamplerTrack.prototype.clone.call(this);\n    track.channels = {\n        time: this.channels.time || null,\n        position: this.channels.position || null,\n        rotation: this.channels.rotation || null,\n        scale: this.channels.scale || null\n    };\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(track.position, this.position);\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(track.rotation, this.rotation);\n    __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].copy(track.scale, this.scale);\n\n    track.target = this.target;\n    track.updateTarget();\n\n    return track;\n\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SamplerTrack);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9TYW1wbGVyVHJhY2suanM/NDExMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTYW1wbGVyIGNsaXAgaXMgZXNwZWNpYWxseSBmb3IgdGhlIGFuaW1hdGlvbiBzYW1wbGVyIGluIGdsVEZcbi8vIFVzZSBUeXBlZCBBcnJheSBjYW4gcmVkdWNlIGEgbG90IG9mIGhlYXAgbWVtb3J5XG5cbmltcG9ydCBxdWF0IGZyb20gJy4uL2dsbWF0cml4L3F1YXQnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5cbi8vIGxlcnAgZnVuY3Rpb24gd2l0aCBvZmZzZXQgaW4gbGFyZ2UgYXJyYXlcbmZ1bmN0aW9uIHZlYzNsZXJwKG91dCwgYSwgYiwgdCwgb2EsIG9iKSB7XG4gICAgdmFyIGF4ID0gYVtvYV07XG4gICAgdmFyIGF5ID0gYVtvYSArIDFdO1xuICAgIHZhciBheiA9IGFbb2EgKyAyXTtcbiAgICBvdXRbMF0gPSBheCArIHQgKiAoYltvYl0gLSBheCk7XG4gICAgb3V0WzFdID0gYXkgKyB0ICogKGJbb2IgKyAxXSAtIGF5KTtcbiAgICBvdXRbMl0gPSBheiArIHQgKiAoYltvYiArIDJdIC0gYXopO1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gcXVhdFNsZXJwKG91dCwgYSwgYiwgdCwgb2EsIG9iKSB7XG4gICAgLy8gYmVuY2htYXJrczpcbiAgICAvLyAgICBodHRwOi8vanNwZXJmLmNvbS9xdWF0ZXJuaW9uLXNsZXJwLWltcGxlbWVudGF0aW9uc1xuXG4gICAgdmFyIGF4ID0gYVswICsgb2FdLCBheSA9IGFbMSArIG9hXSwgYXogPSBhWzIgKyBvYV0sIGF3ID0gYVszICsgb2FdLFxuICAgICAgICBieCA9IGJbMCArIG9iXSwgYnkgPSBiWzEgKyBvYl0sIGJ6ID0gYlsyICsgb2JdLCBidyA9IGJbMyArIG9iXTtcblxuICAgIHZhciBvbWVnYSwgY29zb20sIHNpbm9tLCBzY2FsZTAsIHNjYWxlMTtcblxuICAgIC8vIGNhbGMgY29zaW5lXG4gICAgY29zb20gPSBheCAqIGJ4ICsgYXkgKiBieSArIGF6ICogYnogKyBhdyAqIGJ3O1xuICAgIC8vIGFkanVzdCBzaWducyAoaWYgbmVjZXNzYXJ5KVxuICAgIGlmIChjb3NvbSA8IDAuMCkge1xuICAgICAgICBjb3NvbSA9IC1jb3NvbTtcbiAgICAgICAgYnggPSAtIGJ4O1xuICAgICAgICBieSA9IC0gYnk7XG4gICAgICAgIGJ6ID0gLSBiejtcbiAgICAgICAgYncgPSAtIGJ3O1xuICAgIH1cbiAgICAvLyBjYWxjdWxhdGUgY29lZmZpY2llbnRzXG4gICAgaWYgKCgxLjAgLSBjb3NvbSkgPiAwLjAwMDAwMSkge1xuICAgICAgICAvLyBzdGFuZGFyZCBjYXNlIChzbGVycClcbiAgICAgICAgb21lZ2EgID0gTWF0aC5hY29zKGNvc29tKTtcbiAgICAgICAgc2lub20gID0gTWF0aC5zaW4ob21lZ2EpO1xuICAgICAgICBzY2FsZTAgPSBNYXRoLnNpbigoMS4wIC0gdCkgKiBvbWVnYSkgLyBzaW5vbTtcbiAgICAgICAgc2NhbGUxID0gTWF0aC5zaW4odCAqIG9tZWdhKSAvIHNpbm9tO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gJ2Zyb20nIGFuZCAndG8nIHF1YXRlcm5pb25zIGFyZSB2ZXJ5IGNsb3NlXG4gICAgICAgIC8vICAuLi4gc28gd2UgY2FuIGRvIGEgbGluZWFyIGludGVycG9sYXRpb25cbiAgICAgICAgc2NhbGUwID0gMS4wIC0gdDtcbiAgICAgICAgc2NhbGUxID0gdDtcbiAgICB9XG4gICAgLy8gY2FsY3VsYXRlIGZpbmFsIHZhbHVlc1xuICAgIG91dFswXSA9IHNjYWxlMCAqIGF4ICsgc2NhbGUxICogYng7XG4gICAgb3V0WzFdID0gc2NhbGUwICogYXkgKyBzY2FsZTEgKiBieTtcbiAgICBvdXRbMl0gPSBzY2FsZTAgKiBheiArIHNjYWxlMSAqIGJ6O1xuICAgIG91dFszXSA9IHNjYWxlMCAqIGF3ICsgc2NhbGUxICogYnc7XG5cbiAgICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIFNhbXBsZXJUcmFjayBtYW5hZ2VzIGBwb3NpdGlvbmAsIGByb3RhdGlvbmAsIGBzY2FsZWAgdHJhY2tzIGluIGFuaW1hdGlvbiBvZiBzaW5nbGUgc2NlbmUgbm9kZS5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm5hbWVdIFRyYWNrIG5hbWVcbiAqIEBwYXJhbSB7Y2xheS5Ob2RlfSBbb3B0cy50YXJnZXRdIFRhcmdldCBub2RlJ3MgdHJhbnNmb3JtIHdpbGwgdXBkYXRlZCBhdXRvbWF0aWNhbGx5XG4gKi9cbnZhciBTYW1wbGVyVHJhY2sgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgdGhpcy5uYW1lID0gb3B0cy5uYW1lIHx8ICcnO1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Y2xheS5Ob2RlfVxuICAgICAqL1xuICAgIHRoaXMudGFyZ2V0ID0gb3B0cy50YXJnZXQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7QXJyYXl9XG4gICAgICovXG4gICAgdGhpcy5wb3NpdGlvbiA9IHZlYzMuY3JlYXRlKCk7XG4gICAgLyoqXG4gICAgICogUm90YXRpb24gaXMgcmVwcmVzZW50ZWQgYnkgYSBxdWF0ZXJuaW9uXG4gICAgICogQHR5cGUge0FycmF5fVxuICAgICAqL1xuICAgIHRoaXMucm90YXRpb24gPSBxdWF0LmNyZWF0ZSgpO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtBcnJheX1cbiAgICAgKi9cbiAgICB0aGlzLnNjYWxlID0gdmVjMy5mcm9tVmFsdWVzKDEsIDEsIDEpO1xuXG4gICAgdGhpcy5jaGFubmVscyA9IHtcbiAgICAgICAgdGltZTogbnVsbCxcbiAgICAgICAgcG9zaXRpb246IG51bGwsXG4gICAgICAgIHJvdGF0aW9uOiBudWxsLFxuICAgICAgICBzY2FsZTogbnVsbFxuICAgIH07XG5cbiAgICB0aGlzLl9jYWNoZUtleSA9IDA7XG4gICAgdGhpcy5fY2FjaGVUaW1lID0gMDtcbn07XG5cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuc2V0VGltZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgaWYgKCF0aGlzLmNoYW5uZWxzLnRpbWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY2hhbm5lbHMgPSB0aGlzLmNoYW5uZWxzO1xuICAgIHZhciBsZW4gPSBjaGFubmVscy50aW1lLmxlbmd0aDtcbiAgICB2YXIga2V5ID0gLTE7XG4gICAgLy8gT25seSBvbmUgZnJhbWVcbiAgICBpZiAobGVuID09PSAxKSB7XG4gICAgICAgIGlmIChjaGFubmVscy5yb3RhdGlvbikge1xuICAgICAgICAgICAgcXVhdC5jb3B5KHRoaXMucm90YXRpb24sIGNoYW5uZWxzLnJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2hhbm5lbHMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHZlYzMuY29weSh0aGlzLnBvc2l0aW9uLCBjaGFubmVscy5wb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWxzLnNjYWxlKSB7XG4gICAgICAgICAgICB2ZWMzLmNvcHkodGhpcy5zY2FsZSwgY2hhbm5lbHMuc2NhbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gQ2xhbXBcbiAgICBlbHNlIGlmICh0aW1lIDw9IGNoYW5uZWxzLnRpbWVbMF0pIHtcbiAgICAgICAgdGltZSA9IGNoYW5uZWxzLnRpbWVbMF07XG4gICAgICAgIGtleSA9IDA7XG4gICAgfVxuICAgIGVsc2UgaWYgKHRpbWUgPj0gY2hhbm5lbHMudGltZVtsZW4gLSAxXSkge1xuICAgICAgICB0aW1lID0gY2hhbm5lbHMudGltZVtsZW4gLSAxXTtcbiAgICAgICAga2V5ID0gbGVuIC0gMjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGlmICh0aW1lIDwgdGhpcy5fY2FjaGVUaW1lKSB7XG4gICAgICAgICAgICB2YXIgcyA9IE1hdGgubWluKGxlbiAtIDEsIHRoaXMuX2NhY2hlS2V5ICsgMSk7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gczsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBpZiAoY2hhbm5lbHMudGltZVtpIC0gMV0gPD0gdGltZSAmJiBjaGFubmVscy50aW1lW2ldID4gdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBpIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IHRoaXMuX2NhY2hlS2V5OyBpIDwgbGVuIC0gMTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNoYW5uZWxzLnRpbWVbaV0gPD0gdGltZSAmJiBjaGFubmVscy50aW1lW2kgKyAxXSA+IHRpbWUpIHtcbiAgICAgICAgICAgICAgICAgICAga2V5ID0gaTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChrZXkgPiAtMSkge1xuICAgICAgICB0aGlzLl9jYWNoZUtleSA9IGtleTtcbiAgICAgICAgdGhpcy5fY2FjaGVUaW1lID0gdGltZTtcbiAgICAgICAgdmFyIHN0YXJ0ID0ga2V5O1xuICAgICAgICB2YXIgZW5kID0ga2V5ICsgMTtcbiAgICAgICAgdmFyIHN0YXJ0VGltZSA9IGNoYW5uZWxzLnRpbWVbc3RhcnRdO1xuICAgICAgICB2YXIgZW5kVGltZSA9IGNoYW5uZWxzLnRpbWVbZW5kXTtcbiAgICAgICAgdmFyIHJhbmdlID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSByYW5nZSA9PT0gMCA/IDAgOiAodGltZSAtIHN0YXJ0VGltZSkgLyByYW5nZTtcblxuICAgICAgICBpZiAoY2hhbm5lbHMucm90YXRpb24pIHtcbiAgICAgICAgICAgIHF1YXRTbGVycCh0aGlzLnJvdGF0aW9uLCBjaGFubmVscy5yb3RhdGlvbiwgY2hhbm5lbHMucm90YXRpb24sIHBlcmNlbnQsIHN0YXJ0ICogNCwgZW5kICogNCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWxzLnBvc2l0aW9uKSB7XG4gICAgICAgICAgICB2ZWMzbGVycCh0aGlzLnBvc2l0aW9uLCBjaGFubmVscy5wb3NpdGlvbiwgY2hhbm5lbHMucG9zaXRpb24sIHBlcmNlbnQsIHN0YXJ0ICogMywgZW5kICogMyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWxzLnNjYWxlKSB7XG4gICAgICAgICAgICB2ZWMzbGVycCh0aGlzLnNjYWxlLCBjaGFubmVscy5zY2FsZSwgY2hhbm5lbHMuc2NhbGUsIHBlcmNlbnQsIHN0YXJ0ICogMywgZW5kICogMyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gTG9vcCBoYW5kbGluZ1xuICAgIGlmIChrZXkgPT09IGxlbiAtIDIpIHtcbiAgICAgICAgdGhpcy5fY2FjaGVLZXkgPSAwO1xuICAgICAgICB0aGlzLl9jYWNoZVRpbWUgPSAwO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlVGFyZ2V0KCk7XG59O1xuXG4vKipcbiAqIFVwZGF0ZSB0cmFuc2Zvcm0gb2YgdGFyZ2V0IG5vZGUgbWFudWFsbHlcbiAqL1xuU2FtcGxlclRyYWNrLnByb3RvdHlwZS51cGRhdGVUYXJnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNoYW5uZWxzID0gdGhpcy5jaGFubmVscztcbiAgICBpZiAodGhpcy50YXJnZXQpIHtcbiAgICAgICAgLy8gT25seSB1cGRhdGUgdGFyZ2V0IHByb3AgaWYgaGF2ZSBkYXRhLlxuICAgICAgICBpZiAoY2hhbm5lbHMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnBvc2l0aW9uLnNldEFycmF5KHRoaXMucG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjaGFubmVscy5yb3RhdGlvbikge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQucm90YXRpb24uc2V0QXJyYXkodGhpcy5yb3RhdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYW5uZWxzLnNjYWxlKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldC5zY2FsZS5zZXRBcnJheSh0aGlzLnNjYWxlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLmdldE1heFRpbWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhbm5lbHMudGltZVt0aGlzLmNoYW5uZWxzLnRpbWUubGVuZ3RoIC0gMV07XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFRpbWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRUaW1lXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t9XG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuZ2V0U3ViVHJhY2sgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lKSB7XG5cbiAgICB2YXIgc3ViQ2xpcCA9IG5ldyBTYW1wbGVyVHJhY2soe1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICB9KTtcbiAgICB2YXIgbWluVGltZSA9IHRoaXMuY2hhbm5lbHMudGltZVswXTtcbiAgICBzdGFydFRpbWUgPSBNYXRoLm1pbihNYXRoLm1heChzdGFydFRpbWUsIG1pblRpbWUpLCB0aGlzLmxpZmUpO1xuICAgIGVuZFRpbWUgPSBNYXRoLm1pbihNYXRoLm1heChlbmRUaW1lLCBtaW5UaW1lKSwgdGhpcy5saWZlKTtcblxuICAgIHZhciByYW5nZVN0YXJ0ID0gdGhpcy5fZmluZFJhbmdlKHN0YXJ0VGltZSk7XG4gICAgdmFyIHJhbmdlRW5kID0gdGhpcy5fZmluZFJhbmdlKGVuZFRpbWUpO1xuXG4gICAgdmFyIGNvdW50ID0gcmFuZ2VFbmRbMF0gLSByYW5nZVN0YXJ0WzBdICsgMTtcbiAgICBpZiAocmFuZ2VTdGFydFsxXSA9PT0gMCAmJiByYW5nZUVuZFsxXSA9PT0gMCkge1xuICAgICAgICBjb3VudCAtPSAxO1xuICAgIH1cbiAgICBpZiAodGhpcy5jaGFubmVscy5yb3RhdGlvbikge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnJvdGF0aW9uID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCAqIDQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jaGFubmVscy5wb3NpdGlvbikge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnBvc2l0aW9uID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCAqIDMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jaGFubmVscy5zY2FsZSkge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnNjYWxlID0gbmV3IEZsb2F0MzJBcnJheShjb3VudCAqIDMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5jaGFubmVscy50aW1lKSB7XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMudGltZSA9IG5ldyBGbG9hdDMyQXJyYXkoY291bnQpO1xuICAgIH1cbiAgICAvLyBDbGlwIGF0IHRoZSBzdGFydFxuICAgIHRoaXMuc2V0VGltZShzdGFydFRpbWUpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMucm90YXRpb25baV0gPSB0aGlzLnJvdGF0aW9uW2ldO1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnBvc2l0aW9uW2ldID0gdGhpcy5wb3NpdGlvbltpXTtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5zY2FsZVtpXSA9IHRoaXMuc2NhbGVbaV07XG4gICAgfVxuICAgIHN1YkNsaXAuY2hhbm5lbHMudGltZVswXSA9IDA7XG4gICAgc3ViQ2xpcC5jaGFubmVscy5yb3RhdGlvblszXSA9IHRoaXMucm90YXRpb25bM107XG5cbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGNvdW50LTE7IGkrKykge1xuICAgICAgICB2YXIgaTI7XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgMzsgaisrKSB7XG4gICAgICAgICAgICBpMiA9IHJhbmdlU3RhcnRbMF0gKyBpO1xuICAgICAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5yb3RhdGlvbltpICogNCArIGpdID0gdGhpcy5jaGFubmVscy5yb3RhdGlvbltpMiAqIDQgKyBqXTtcbiAgICAgICAgICAgIHN1YkNsaXAuY2hhbm5lbHMucG9zaXRpb25baSAqIDMgKyBqXSA9IHRoaXMuY2hhbm5lbHMucG9zaXRpb25baTIgKiAzICsgal07XG4gICAgICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnNjYWxlW2kgKiAzICsgal0gPSB0aGlzLmNoYW5uZWxzLnNjYWxlW2kyICogMyArIGpdO1xuICAgICAgICB9XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMudGltZVtpXSA9IHRoaXMuY2hhbm5lbHMudGltZVtpMl0gLSBzdGFydFRpbWU7XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMucm90YXRpb25baSAqIDQgKyAzXSA9IHRoaXMuY2hhbm5lbHMucm90YXRpb25baTIgKiA0ICsgM107XG4gICAgfVxuICAgIC8vIENsaXAgYXQgdGhlIGVuZFxuICAgIHRoaXMuc2V0VGltZShlbmRUaW1lKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICBzdWJDbGlwLmNoYW5uZWxzLnJvdGF0aW9uWyhjb3VudCAtIDEpICogNCArIGldID0gdGhpcy5yb3RhdGlvbltpXTtcbiAgICAgICAgc3ViQ2xpcC5jaGFubmVscy5wb3NpdGlvblsoY291bnQgLSAxKSAqIDMgKyBpXSA9IHRoaXMucG9zaXRpb25baV07XG4gICAgICAgIHN1YkNsaXAuY2hhbm5lbHMuc2NhbGVbKGNvdW50IC0gMSkgKiAzICsgaV0gPSB0aGlzLnNjYWxlW2ldO1xuICAgIH1cbiAgICBzdWJDbGlwLmNoYW5uZWxzLnRpbWVbKGNvdW50IC0gMSldID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICBzdWJDbGlwLmNoYW5uZWxzLnJvdGF0aW9uWyhjb3VudCAtIDEpICogNCArIDNdID0gdGhpcy5yb3RhdGlvblszXTtcblxuICAgIC8vIFRPRE8gc2V0IGJhY2sgP1xuICAgIHN1YkNsaXAubGlmZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG4gICAgcmV0dXJuIHN1YkNsaXA7XG59O1xuXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLl9maW5kUmFuZ2UgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIHZhciBjaGFubmVscyA9IHRoaXMuY2hhbm5lbHM7XG4gICAgdmFyIGxlbiA9IGNoYW5uZWxzLnRpbWUubGVuZ3RoO1xuICAgIHZhciBzdGFydCA9IC0xO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmIChjaGFubmVscy50aW1lW2ldIDw9IHRpbWUgJiYgY2hhbm5lbHMudGltZVtpKzFdID4gdGltZSkge1xuICAgICAgICAgICAgc3RhcnQgPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZhciBwZXJjZW50ID0gMDtcbiAgICBpZiAoc3RhcnQgPj0gMCkge1xuICAgICAgICB2YXIgc3RhcnRUaW1lID0gY2hhbm5lbHMudGltZVtzdGFydF07XG4gICAgICAgIHZhciBlbmRUaW1lID0gY2hhbm5lbHMudGltZVtzdGFydCsxXTtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSAodGltZS1zdGFydFRpbWUpIC8gKGVuZFRpbWUtc3RhcnRUaW1lKTtcbiAgICB9XG4gICAgLy8gUGVyY2VudCBbMCwgMSlcbiAgICByZXR1cm4gW3N0YXJ0LCBwZXJjZW50XTtcbn07XG5cbi8qKlxuICogMUQgYmxlbmRpbmcgYmV0d2VlbiB0d28gY2xpcHNcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMVxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMlxuICogQHBhcmFtICB7bnVtYmVyfSB3XG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuYmxlbmQxRCA9IGZ1bmN0aW9uICh0MSwgdDIsIHcpIHtcbiAgICB2ZWMzLmxlcnAodGhpcy5wb3NpdGlvbiwgdDEucG9zaXRpb24sIHQyLnBvc2l0aW9uLCB3KTtcbiAgICB2ZWMzLmxlcnAodGhpcy5zY2FsZSwgdDEuc2NhbGUsIHQyLnNjYWxlLCB3KTtcbiAgICBxdWF0LnNsZXJwKHRoaXMucm90YXRpb24sIHQxLnJvdGF0aW9uLCB0Mi5yb3RhdGlvbiwgdyk7XG59O1xuLyoqXG4gKiAyRCBibGVuZGluZyBiZXR3ZWVuIHRocmVlIGNsaXBzXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzFcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzJcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja3xjbGF5LmFuaW1hdGlvbi5UcmFuc2Zvcm1UcmFja30gYzNcbiAqIEBwYXJhbSAge251bWJlcn0gZlxuICogQHBhcmFtICB7bnVtYmVyfSBnXG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuYmxlbmQyRCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHExID0gcXVhdC5jcmVhdGUoKTtcbiAgICB2YXIgcTIgPSBxdWF0LmNyZWF0ZSgpO1xuICAgIHJldHVybiBmdW5jdGlvbiAodDEsIHQyLCB0MywgZiwgZykge1xuICAgICAgICB2YXIgYSA9IDEgLSBmIC0gZztcblxuICAgICAgICB0aGlzLnBvc2l0aW9uWzBdID0gdDEucG9zaXRpb25bMF0gKiBhICsgdDIucG9zaXRpb25bMF0gKiBmICsgdDMucG9zaXRpb25bMF0gKiBnO1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzFdID0gdDEucG9zaXRpb25bMV0gKiBhICsgdDIucG9zaXRpb25bMV0gKiBmICsgdDMucG9zaXRpb25bMV0gKiBnO1xuICAgICAgICB0aGlzLnBvc2l0aW9uWzJdID0gdDEucG9zaXRpb25bMl0gKiBhICsgdDIucG9zaXRpb25bMl0gKiBmICsgdDMucG9zaXRpb25bMl0gKiBnO1xuXG4gICAgICAgIHRoaXMuc2NhbGVbMF0gPSB0MS5zY2FsZVswXSAqIGEgKyB0Mi5zY2FsZVswXSAqIGYgKyB0My5zY2FsZVswXSAqIGc7XG4gICAgICAgIHRoaXMuc2NhbGVbMV0gPSB0MS5zY2FsZVsxXSAqIGEgKyB0Mi5zY2FsZVsxXSAqIGYgKyB0My5zY2FsZVsxXSAqIGc7XG4gICAgICAgIHRoaXMuc2NhbGVbMl0gPSB0MS5zY2FsZVsyXSAqIGEgKyB0Mi5zY2FsZVsyXSAqIGYgKyB0My5zY2FsZVsyXSAqIGc7XG5cbiAgICAgICAgLy8gaHR0cDovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L3dpbmRvd3MvZGVza3RvcC9iYjIwNTQwMyh2PXZzLjg1KS5hc3B4XG4gICAgICAgIC8vIGh0dHA6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS93aW5kb3dzL2Rlc2t0b3AvbWljcm9zb2Z0LmRpcmVjdHhfc2RrLnF1YXRlcm5pb24ueG1xdWF0ZXJuaW9uYmFyeWNlbnRyaWModj12cy44NSkuYXNweFxuICAgICAgICB2YXIgcyA9IGYgKyBnO1xuICAgICAgICBpZiAocyA9PT0gMCkge1xuICAgICAgICAgICAgcXVhdC5jb3B5KHRoaXMucm90YXRpb24sIHQxLnJvdGF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHF1YXQuc2xlcnAocTEsIHQxLnJvdGF0aW9uLCB0Mi5yb3RhdGlvbiwgcyk7XG4gICAgICAgICAgICBxdWF0LnNsZXJwKHEyLCB0MS5yb3RhdGlvbiwgdDMucm90YXRpb24sIHMpO1xuICAgICAgICAgICAgcXVhdC5zbGVycCh0aGlzLnJvdGF0aW9uLCBxMSwgcTIsIGcgLyBzKTtcbiAgICAgICAgfVxuICAgIH07XG59KSgpO1xuLyoqXG4gKiBBZGRpdGl2ZSBibGVuZGluZyBiZXR3ZWVuIHR3byBjbGlwc1xuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t8Y2xheS5hbmltYXRpb24uVHJhbnNmb3JtVHJhY2t9IGMxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t8Y2xheS5hbmltYXRpb24uVHJhbnNmb3JtVHJhY2t9IGMyXG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuYWRkaXRpdmVCbGVuZCA9IGZ1bmN0aW9uICh0MSwgdDIpIHtcbiAgICB2ZWMzLmFkZCh0aGlzLnBvc2l0aW9uLCB0MS5wb3NpdGlvbiwgdDIucG9zaXRpb24pO1xuICAgIHZlYzMuYWRkKHRoaXMuc2NhbGUsIHQxLnNjYWxlLCB0Mi5zY2FsZSk7XG4gICAgcXVhdC5tdWx0aXBseSh0aGlzLnJvdGF0aW9uLCB0Mi5yb3RhdGlvbiwgdDEucm90YXRpb24pO1xufTtcbi8qKlxuICogU3VidHJhY3RpdmUgYmxlbmRpbmcgYmV0d2VlbiB0d28gY2xpcHNcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMVxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfGNsYXkuYW5pbWF0aW9uLlRyYW5zZm9ybVRyYWNrfSBjMlxuICovXG5TYW1wbGVyVHJhY2sucHJvdG90eXBlLnN1YnRyYWN0aXZlQmxlbmQgPSBmdW5jdGlvbiAodDEsIHQyKSB7XG4gICAgdmVjMy5zdWIodGhpcy5wb3NpdGlvbiwgdDEucG9zaXRpb24sIHQyLnBvc2l0aW9uKTtcbiAgICB2ZWMzLnN1Yih0aGlzLnNjYWxlLCB0MS5zY2FsZSwgdDIuc2NhbGUpO1xuICAgIHF1YXQuaW52ZXJ0KHRoaXMucm90YXRpb24sIHQyLnJvdGF0aW9uKTtcbiAgICBxdWF0Lm11bHRpcGx5KHRoaXMucm90YXRpb24sIHRoaXMucm90YXRpb24sIHQxLnJvdGF0aW9uKTtcbn07XG5cbi8qKlxuICogQ2xvbmUgYSBuZXcgU2FtcGxlclRyYWNrXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2t9XG4gKi9cblNhbXBsZXJUcmFjay5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHRyYWNrID0gU2FtcGxlclRyYWNrLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIHRyYWNrLmNoYW5uZWxzID0ge1xuICAgICAgICB0aW1lOiB0aGlzLmNoYW5uZWxzLnRpbWUgfHwgbnVsbCxcbiAgICAgICAgcG9zaXRpb246IHRoaXMuY2hhbm5lbHMucG9zaXRpb24gfHwgbnVsbCxcbiAgICAgICAgcm90YXRpb246IHRoaXMuY2hhbm5lbHMucm90YXRpb24gfHwgbnVsbCxcbiAgICAgICAgc2NhbGU6IHRoaXMuY2hhbm5lbHMuc2NhbGUgfHwgbnVsbFxuICAgIH07XG4gICAgdmVjMy5jb3B5KHRyYWNrLnBvc2l0aW9uLCB0aGlzLnBvc2l0aW9uKTtcbiAgICBxdWF0LmNvcHkodHJhY2sucm90YXRpb24sIHRoaXMucm90YXRpb24pO1xuICAgIHZlYzMuY29weSh0cmFjay5zY2FsZSwgdGhpcy5zY2FsZSk7XG5cbiAgICB0cmFjay50YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICB0cmFjay51cGRhdGVUYXJnZXQoKTtcblxuICAgIHJldHVybiB0cmFjaztcblxufTtcblxuZXhwb3J0IGRlZmF1bHQgU2FtcGxlclRyYWNrO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9TYW1wbGVyVHJhY2suanNcbi8vIG1vZHVsZSBpZCA9IDcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///72\n");

/***/ }),
/* 73 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * Extend a sub class from base class\n * @param {object|Function} makeDefaultOpt default option of this sub class, method of the sub can use this.xxx to access this option\n * @param {Function} [initialize] Initialize after the sub class is instantiated\n * @param {Object} [proto] Prototype methods/properties of the sub class\n * @memberOf clay.core.mixin.extend\n * @return {Function}\n */\nfunction derive(makeDefaultOpt, initialize/*optional*/, proto/*optional*/) {\n\n    if (typeof initialize == 'object') {\n        proto = initialize;\n        initialize = null;\n    }\n\n    var _super = this;\n\n    var propList;\n    if (!(makeDefaultOpt instanceof Function)) {\n        // Optimize the property iterate if it have been fixed\n        propList = [];\n        for (var propName in makeDefaultOpt) {\n            if (makeDefaultOpt.hasOwnProperty(propName)) {\n                propList.push(propName);\n            }\n        }\n    }\n\n    var sub = function(options) {\n\n        // call super constructor\n        _super.apply(this, arguments);\n\n        if (makeDefaultOpt instanceof Function) {\n            // Invoke makeDefaultOpt each time if it is a function, So we can make sure each\n            // property in the object will not be shared by mutiple instances\n            extend(this, makeDefaultOpt.call(this, options));\n        }\n        else {\n            extendWithPropList(this, makeDefaultOpt, propList);\n        }\n\n        if (this.constructor === sub) {\n            // Initialize function will be called in the order of inherit\n            var initializers = sub.__initializers__;\n            for (var i = 0; i < initializers.length; i++) {\n                initializers[i].apply(this, arguments);\n            }\n        }\n    };\n    // save super constructor\n    sub.__super__ = _super;\n    // Initialize function will be called after all the super constructor is called\n    if (!_super.__initializers__) {\n        sub.__initializers__ = [];\n    } else {\n        sub.__initializers__ = _super.__initializers__.slice();\n    }\n    if (initialize) {\n        sub.__initializers__.push(initialize);\n    }\n\n    var Ctor = function() {};\n    Ctor.prototype = _super.prototype;\n    sub.prototype = new Ctor();\n    sub.prototype.constructor = sub;\n    extend(sub.prototype, proto);\n\n    // extend the derive method as a static method;\n    sub.extend = _super.extend;\n\n    // DEPCRATED\n    sub.derive = _super.extend;\n\n    return sub;\n}\n\nfunction extend(target, source) {\n    if (!source) {\n        return;\n    }\n    for (var name in source) {\n        if (source.hasOwnProperty(name)) {\n            target[name] = source[name];\n        }\n    }\n}\n\nfunction extendWithPropList(target, source, propList) {\n    for (var i = 0; i < propList.length; i++) {\n        var propName = propList[i];\n        target[propName] = source[propName];\n    }\n}\n\n/**\n * @alias clay.core.mixin.extend\n * @mixin\n */\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n\n    extend: derive,\n\n    // DEPCRATED\n    derive: derive\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvbWl4aW4vZXh0ZW5kLmpzPzk1NDYiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFeHRlbmQgYSBzdWIgY2xhc3MgZnJvbSBiYXNlIGNsYXNzXG4gKiBAcGFyYW0ge29iamVjdHxGdW5jdGlvbn0gbWFrZURlZmF1bHRPcHQgZGVmYXVsdCBvcHRpb24gb2YgdGhpcyBzdWIgY2xhc3MsIG1ldGhvZCBvZiB0aGUgc3ViIGNhbiB1c2UgdGhpcy54eHggdG8gYWNjZXNzIHRoaXMgb3B0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbaW5pdGlhbGl6ZV0gSW5pdGlhbGl6ZSBhZnRlciB0aGUgc3ViIGNsYXNzIGlzIGluc3RhbnRpYXRlZFxuICogQHBhcmFtIHtPYmplY3R9IFtwcm90b10gUHJvdG90eXBlIG1ldGhvZHMvcHJvcGVydGllcyBvZiB0aGUgc3ViIGNsYXNzXG4gKiBAbWVtYmVyT2YgY2xheS5jb3JlLm1peGluLmV4dGVuZFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmZ1bmN0aW9uIGRlcml2ZShtYWtlRGVmYXVsdE9wdCwgaW5pdGlhbGl6ZS8qb3B0aW9uYWwqLywgcHJvdG8vKm9wdGlvbmFsKi8pIHtcblxuICAgIGlmICh0eXBlb2YgaW5pdGlhbGl6ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICBwcm90byA9IGluaXRpYWxpemU7XG4gICAgICAgIGluaXRpYWxpemUgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBfc3VwZXIgPSB0aGlzO1xuXG4gICAgdmFyIHByb3BMaXN0O1xuICAgIGlmICghKG1ha2VEZWZhdWx0T3B0IGluc3RhbmNlb2YgRnVuY3Rpb24pKSB7XG4gICAgICAgIC8vIE9wdGltaXplIHRoZSBwcm9wZXJ0eSBpdGVyYXRlIGlmIGl0IGhhdmUgYmVlbiBmaXhlZFxuICAgICAgICBwcm9wTGlzdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwcm9wTmFtZSBpbiBtYWtlRGVmYXVsdE9wdCkge1xuICAgICAgICAgICAgaWYgKG1ha2VEZWZhdWx0T3B0Lmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICAgICAgICAgIHByb3BMaXN0LnB1c2gocHJvcE5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHN1YiA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgICAgICAvLyBjYWxsIHN1cGVyIGNvbnN0cnVjdG9yXG4gICAgICAgIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgICAgIGlmIChtYWtlRGVmYXVsdE9wdCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAvLyBJbnZva2UgbWFrZURlZmF1bHRPcHQgZWFjaCB0aW1lIGlmIGl0IGlzIGEgZnVuY3Rpb24sIFNvIHdlIGNhbiBtYWtlIHN1cmUgZWFjaFxuICAgICAgICAgICAgLy8gcHJvcGVydHkgaW4gdGhlIG9iamVjdCB3aWxsIG5vdCBiZSBzaGFyZWQgYnkgbXV0aXBsZSBpbnN0YW5jZXNcbiAgICAgICAgICAgIGV4dGVuZCh0aGlzLCBtYWtlRGVmYXVsdE9wdC5jYWxsKHRoaXMsIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGV4dGVuZFdpdGhQcm9wTGlzdCh0aGlzLCBtYWtlRGVmYXVsdE9wdCwgcHJvcExpc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IHN1Yikge1xuICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBpbiB0aGUgb3JkZXIgb2YgaW5oZXJpdFxuICAgICAgICAgICAgdmFyIGluaXRpYWxpemVycyA9IHN1Yi5fX2luaXRpYWxpemVyc19fO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbml0aWFsaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplcnNbaV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgLy8gc2F2ZSBzdXBlciBjb25zdHJ1Y3RvclxuICAgIHN1Yi5fX3N1cGVyX18gPSBfc3VwZXI7XG4gICAgLy8gSW5pdGlhbGl6ZSBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBhZnRlciBhbGwgdGhlIHN1cGVyIGNvbnN0cnVjdG9yIGlzIGNhbGxlZFxuICAgIGlmICghX3N1cGVyLl9faW5pdGlhbGl6ZXJzX18pIHtcbiAgICAgICAgc3ViLl9faW5pdGlhbGl6ZXJzX18gPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzdWIuX19pbml0aWFsaXplcnNfXyA9IF9zdXBlci5fX2luaXRpYWxpemVyc19fLnNsaWNlKCk7XG4gICAgfVxuICAgIGlmIChpbml0aWFsaXplKSB7XG4gICAgICAgIHN1Yi5fX2luaXRpYWxpemVyc19fLnB1c2goaW5pdGlhbGl6ZSk7XG4gICAgfVxuXG4gICAgdmFyIEN0b3IgPSBmdW5jdGlvbigpIHt9O1xuICAgIEN0b3IucHJvdG90eXBlID0gX3N1cGVyLnByb3RvdHlwZTtcbiAgICBzdWIucHJvdG90eXBlID0gbmV3IEN0b3IoKTtcbiAgICBzdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gc3ViO1xuICAgIGV4dGVuZChzdWIucHJvdG90eXBlLCBwcm90byk7XG5cbiAgICAvLyBleHRlbmQgdGhlIGRlcml2ZSBtZXRob2QgYXMgYSBzdGF0aWMgbWV0aG9kO1xuICAgIHN1Yi5leHRlbmQgPSBfc3VwZXIuZXh0ZW5kO1xuXG4gICAgLy8gREVQQ1JBVEVEXG4gICAgc3ViLmRlcml2ZSA9IF9zdXBlci5leHRlbmQ7XG5cbiAgICByZXR1cm4gc3ViO1xufVxuXG5mdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIG5hbWUgaW4gc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtuYW1lXSA9IHNvdXJjZVtuYW1lXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gZXh0ZW5kV2l0aFByb3BMaXN0KHRhcmdldCwgc291cmNlLCBwcm9wTGlzdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcExpc3RbaV07XG4gICAgICAgIHRhcmdldFtwcm9wTmFtZV0gPSBzb3VyY2VbcHJvcE5hbWVdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAYWxpYXMgY2xheS5jb3JlLm1peGluLmV4dGVuZFxuICogQG1peGluXG4gKi9cbmV4cG9ydCBkZWZhdWx0IHtcblxuICAgIGV4dGVuZDogZGVyaXZlLFxuXG4gICAgLy8gREVQQ1JBVEVEXG4gICAgZGVyaXZlOiBkZXJpdmVcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS9taXhpbi9leHRlbmQuanNcbi8vIG1vZHVsZSBpZCA9IDczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///73\n");

/***/ }),
/* 74 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function get(options) {\n\n    var xhr = new XMLHttpRequest();\n\n    xhr.open('get', options.url);\n    // With response type set browser can get and put binary data\n    // https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Sending_and_Receiving_Binary_Data\n    // Default is text, and it can be set\n    // arraybuffer, blob, document, json, text\n    xhr.responseType = options.responseType || 'text';\n\n    if (options.onprogress) {\n        //https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Using_XMLHttpRequest\n        xhr.onprogress = function(e) {\n            if (e.lengthComputable) {\n                var percent = e.loaded / e.total;\n                options.onprogress(percent, e.loaded, e.total);\n            }\n            else {\n                options.onprogress(null);\n            }\n        };\n    }\n    xhr.onload = function(e) {\n        if (xhr.status >= 400) {\n            options.onerror && options.onerror();\n        }\n        else {\n            options.onload && options.onload(xhr.response);\n        }\n    };\n    if (options.onerror) {\n        xhr.onerror = options.onerror;\n    }\n    xhr.send(null);\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    get: get\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvcmVxdWVzdC5qcz84MmE5Il0sInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGdldChvcHRpb25zKSB7XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICB4aHIub3BlbignZ2V0Jywgb3B0aW9ucy51cmwpO1xuICAgIC8vIFdpdGggcmVzcG9uc2UgdHlwZSBzZXQgYnJvd3NlciBjYW4gZ2V0IGFuZCBwdXQgYmluYXJ5IGRhdGFcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9YTUxIdHRwUmVxdWVzdC9TZW5kaW5nX2FuZF9SZWNlaXZpbmdfQmluYXJ5X0RhdGFcbiAgICAvLyBEZWZhdWx0IGlzIHRleHQsIGFuZCBpdCBjYW4gYmUgc2V0XG4gICAgLy8gYXJyYXlidWZmZXIsIGJsb2IsIGRvY3VtZW50LCBqc29uLCB0ZXh0XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9IG9wdGlvbnMucmVzcG9uc2VUeXBlIHx8ICd0ZXh0JztcblxuICAgIGlmIChvcHRpb25zLm9ucHJvZ3Jlc3MpIHtcbiAgICAgICAgLy9odHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0RPTS9YTUxIdHRwUmVxdWVzdC9Vc2luZ19YTUxIdHRwUmVxdWVzdFxuICAgICAgICB4aHIub25wcm9ncmVzcyA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmxlbmd0aENvbXB1dGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IGUubG9hZGVkIC8gZS50b3RhbDtcbiAgICAgICAgICAgICAgICBvcHRpb25zLm9ucHJvZ3Jlc3MocGVyY2VudCwgZS5sb2FkZWQsIGUudG90YWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgb3B0aW9ucy5vbnByb2dyZXNzKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25lcnJvciAmJiBvcHRpb25zLm9uZXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25sb2FkICYmIG9wdGlvbnMub25sb2FkKHhoci5yZXNwb25zZSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGlmIChvcHRpb25zLm9uZXJyb3IpIHtcbiAgICAgICAgeGhyLm9uZXJyb3IgPSBvcHRpb25zLm9uZXJyb3I7XG4gICAgfVxuICAgIHhoci5zZW5kKG51bGwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCB7XG4gICAgZ2V0OiBnZXRcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29yZS9yZXF1ZXN0LmpzXG4vLyBtb2R1bGUgaWQgPSA3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///74\n");

/***/ }),
/* 75 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n/**\n *\n * Animation clip that manage a collection of {@link clay.animation.SamplerTrack}\n * @constructor\n * @alias clay.animation.TrackClip\n *\n * @extends clay.animation.Clip\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {Array.<clay.animation.SamplerTrack>} [opts.tracks]\n */\nvar TrackClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n\n    /**\n     *\n     * @type {clay.animation.SamplerTrack[]}\n     */\n    this.tracks = opts.tracks || [];\n\n    this.calcLifeFromTracks();\n};\n\nTrackClip.prototype = Object.create(__WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype);\n\nTrackClip.prototype.constructor = TrackClip;\n\nTrackClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time, dTime, true);\n\n    if (ret !== 'finish') {\n        var time = this.getElapsedTime();\n        // TODO life may be changed.\n        if (this._range) {\n            time = this._range[0] + time;\n        }\n        this.setTime(time);\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n\n    return ret;\n};\n\n/**\n * @param {Array.<number>} range\n */\nTrackClip.prototype.setRange = function (range) {\n    this.calcLifeFromTracks();\n    this._range = range;\n    if (range) {\n        range[1] = Math.min(range[1], this.life);\n        range[0] = Math.min(range[0], this.life);\n        this.life = (range[1] - range[0]);\n    }\n};\n\nTrackClip.prototype.setTime = function (time) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        this.tracks[i].setTime(time);\n    }\n};\n\nTrackClip.prototype.calcLifeFromTracks = function () {\n    this.life = 0;\n    for (var i = 0; i < this.tracks.length; i++) {\n        this.life = Math.max(this.life, this.tracks[i].getMaxTime());\n    }\n};\n\n/**\n * @param {clay.animation.SamplerTrack} track\n */\nTrackClip.prototype.addTrack = function (track) {\n    this.tracks.push(track);\n    this.calcLifeFromTracks();\n};\n\n/**\n * @param {clay.animation.SamplerTrack} track\n */\nTrackClip.prototype.removeTarck = function (track) {\n    var idx = this.tracks.indexOf(track);\n    if (idx >= 0) {\n        this.tracks.splice(idx, 1);\n    }\n};\n\n/**\n * @param {number} startTime\n * @param {number} endTime\n * @param {boolean} isLoop\n * @return {clay.animation.TrackClip}\n */\nTrackClip.prototype.getSubClip = function (startTime, endTime, isLoop) {\n    var subClip = new TrackClip({\n        name: this.name\n    });\n\n    for (var i = 0; i < this.tracks.length; i++) {\n        var subTrack = this.tracks[i].getSubTrack(startTime, endTime);\n        subClip.addTrack(subTrack);\n    }\n\n    if (isLoop !== undefined) {\n        subClip.setLoop(isLoop);\n    }\n\n    subClip.life = endTime - startTime;\n\n    return subClip;\n};\n\n/**\n * 1d blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n * @param  {number} w\n */\nTrackClip.prototype.blend1D = function (clip1, clip2, w) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.blend1D(c1, c2, w);\n    }\n};\n\n/**\n * Additive blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n */\nTrackClip.prototype.additiveBlend = function (clip1, clip2) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.additiveBlend(c1, c2);\n    }\n};\n\n/**\n * Subtractive blending from two skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n */\nTrackClip.prototype.subtractiveBlend = function (clip1, clip2) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.subtractiveBlend(c1, c2);\n    }\n};\n\n/**\n * 2D blending from three skinning clips\n * @param  {clay.animation.TrackClip} clip1\n * @param  {clay.animation.TrackClip} clip2\n * @param  {clay.animation.TrackClip} clip3\n * @param  {number} f\n * @param  {number} g\n */\nTrackClip.prototype.blend2D = function (clip1, clip2, clip3, f, g) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var c1 = clip1.tracks[i];\n        var c2 = clip2.tracks[i];\n        var c3 = clip3.tracks[i];\n        var tClip = this.tracks[i];\n\n        tClip.blend2D(c1, c2, c3, f, g);\n    }\n};\n\n/**\n * Copy SRT of all joints clips from another TrackClip\n * @param  {clay.animation.TrackClip} clip\n */\nTrackClip.prototype.copy = function (clip) {\n    for (var i = 0; i < this.tracks.length; i++) {\n        var sTrack = clip.tracks[i];\n        var tTrack = this.tracks[i];\n\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(tTrack.position, sTrack.position);\n        __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].copy(tTrack.scale, sTrack.scale);\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_quat__[\"a\" /* default */].copy(tTrack.rotation, sTrack.rotation);\n    }\n};\n\nTrackClip.prototype.clone = function () {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    for (var i = 0; i < this.tracks.length; i++) {\n        clip.addTrack(this.tracks[i].clone());\n    }\n    clip.life = this.life;\n    return clip;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TrackClip);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9UcmFja0NsaXAuanM/YjNmNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2xpcCBmcm9tICcuL0NsaXAnO1xuXG5pbXBvcnQgcXVhdCBmcm9tICcuLi9nbG1hdHJpeC9xdWF0JztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG5cbi8qKlxuICpcbiAqIEFuaW1hdGlvbiBjbGlwIHRoYXQgbWFuYWdlIGEgY29sbGVjdGlvbiBvZiB7QGxpbmsgY2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfVxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5hbmltYXRpb24uVHJhY2tDbGlwXG4gKlxuICogQGV4dGVuZHMgY2xheS5hbmltYXRpb24uQ2xpcFxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm5hbWVdXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudGFyZ2V0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmxpZmVdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZGVsYXldXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZ2FwXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnBsYXliYWNrUmF0aW9dXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbb3B0cy5sb29wXSBJZiBsb29wIGlzIGEgbnVtYmVyLCBpdCBpbmRpY2F0ZSB0aGUgbG9vcCBjb3VudCBvZiBhbmltYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSBbb3B0cy5lYXNpbmddXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbmZyYW1lXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25maW5pc2hdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbnJlc3RhcnRdXG4gKiBAcGFyYW0ge0FycmF5LjxjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2s+fSBbb3B0cy50cmFja3NdXG4gKi9cbnZhciBUcmFja0NsaXAgPSBmdW5jdGlvbiAob3B0cykge1xuXG4gICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICBDbGlwLmNhbGwodGhpcywgb3B0cyk7XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEB0eXBlIHtjbGF5LmFuaW1hdGlvbi5TYW1wbGVyVHJhY2tbXX1cbiAgICAgKi9cbiAgICB0aGlzLnRyYWNrcyA9IG9wdHMudHJhY2tzIHx8IFtdO1xuXG4gICAgdGhpcy5jYWxjTGlmZUZyb21UcmFja3MoKTtcbn07XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKENsaXAucHJvdG90eXBlKTtcblxuVHJhY2tDbGlwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRyYWNrQ2xpcDtcblxuVHJhY2tDbGlwLnByb3RvdHlwZS5zdGVwID0gZnVuY3Rpb24gKHRpbWUsIGRUaW1lLCBzaWxlbnQpIHtcblxuICAgIHZhciByZXQgPSBDbGlwLnByb3RvdHlwZS5zdGVwLmNhbGwodGhpcywgdGltZSwgZFRpbWUsIHRydWUpO1xuXG4gICAgaWYgKHJldCAhPT0gJ2ZpbmlzaCcpIHtcbiAgICAgICAgdmFyIHRpbWUgPSB0aGlzLmdldEVsYXBzZWRUaW1lKCk7XG4gICAgICAgIC8vIFRPRE8gbGlmZSBtYXkgYmUgY2hhbmdlZC5cbiAgICAgICAgaWYgKHRoaXMuX3JhbmdlKSB7XG4gICAgICAgICAgICB0aW1lID0gdGhpcy5fcmFuZ2VbMF0gKyB0aW1lO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0VGltZSh0aW1lKTtcbiAgICB9XG5cbiAgICAvLyBQRU5ESU5HIFNjaGVkdWxlXG4gICAgaWYgKCFzaWxlbnQgJiYgcmV0ICE9PSAncGF1c2VkJykge1xuICAgICAgICB0aGlzLmZpcmUoJ2ZyYW1lJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gcmFuZ2VcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5zZXRSYW5nZSA9IGZ1bmN0aW9uIChyYW5nZSkge1xuICAgIHRoaXMuY2FsY0xpZmVGcm9tVHJhY2tzKCk7XG4gICAgdGhpcy5fcmFuZ2UgPSByYW5nZTtcbiAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgcmFuZ2VbMV0gPSBNYXRoLm1pbihyYW5nZVsxXSwgdGhpcy5saWZlKTtcbiAgICAgICAgcmFuZ2VbMF0gPSBNYXRoLm1pbihyYW5nZVswXSwgdGhpcy5saWZlKTtcbiAgICAgICAgdGhpcy5saWZlID0gKHJhbmdlWzFdIC0gcmFuZ2VbMF0pO1xuICAgIH1cbn07XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUuc2V0VGltZSA9IGZ1bmN0aW9uICh0aW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnRyYWNrc1tpXS5zZXRUaW1lKHRpbWUpO1xuICAgIH1cbn07XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUuY2FsY0xpZmVGcm9tVHJhY2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMubGlmZSA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmxpZmUgPSBNYXRoLm1heCh0aGlzLmxpZmUsIHRoaXMudHJhY2tzW2ldLmdldE1heFRpbWUoKSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLlNhbXBsZXJUcmFja30gdHJhY2tcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5hZGRUcmFjayA9IGZ1bmN0aW9uICh0cmFjaykge1xuICAgIHRoaXMudHJhY2tzLnB1c2godHJhY2spO1xuICAgIHRoaXMuY2FsY0xpZmVGcm9tVHJhY2tzKCk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7Y2xheS5hbmltYXRpb24uU2FtcGxlclRyYWNrfSB0cmFja1xuICovXG5UcmFja0NsaXAucHJvdG90eXBlLnJlbW92ZVRhcmNrID0gZnVuY3Rpb24gKHRyYWNrKSB7XG4gICAgdmFyIGlkeCA9IHRoaXMudHJhY2tzLmluZGV4T2YodHJhY2spO1xuICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICB0aGlzLnRyYWNrcy5zcGxpY2UoaWR4LCAxKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBzdGFydFRpbWVcbiAqIEBwYXJhbSB7bnVtYmVyfSBlbmRUaW1lXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGlzTG9vcFxuICogQHJldHVybiB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfVxuICovXG5UcmFja0NsaXAucHJvdG90eXBlLmdldFN1YkNsaXAgPSBmdW5jdGlvbiAoc3RhcnRUaW1lLCBlbmRUaW1lLCBpc0xvb3ApIHtcbiAgICB2YXIgc3ViQ2xpcCA9IG5ldyBUcmFja0NsaXAoe1xuICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHN1YlRyYWNrID0gdGhpcy50cmFja3NbaV0uZ2V0U3ViVHJhY2soc3RhcnRUaW1lLCBlbmRUaW1lKTtcbiAgICAgICAgc3ViQ2xpcC5hZGRUcmFjayhzdWJUcmFjayk7XG4gICAgfVxuXG4gICAgaWYgKGlzTG9vcCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHN1YkNsaXAuc2V0TG9vcChpc0xvb3ApO1xuICAgIH1cblxuICAgIHN1YkNsaXAubGlmZSA9IGVuZFRpbWUgLSBzdGFydFRpbWU7XG5cbiAgICByZXR1cm4gc3ViQ2xpcDtcbn07XG5cbi8qKlxuICogMWQgYmxlbmRpbmcgZnJvbSB0d28gc2tpbm5pbmcgY2xpcHNcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH0gY2xpcDFcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH0gY2xpcDJcbiAqIEBwYXJhbSAge251bWJlcn0gd1xuICovXG5UcmFja0NsaXAucHJvdG90eXBlLmJsZW5kMUQgPSBmdW5jdGlvbiAoY2xpcDEsIGNsaXAyLCB3KSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgYzEgPSBjbGlwMS50cmFja3NbaV07XG4gICAgICAgIHZhciBjMiA9IGNsaXAyLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIHRDbGlwID0gdGhpcy50cmFja3NbaV07XG5cbiAgICAgICAgdENsaXAuYmxlbmQxRChjMSwgYzIsIHcpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQWRkaXRpdmUgYmxlbmRpbmcgZnJvbSB0d28gc2tpbm5pbmcgY2xpcHNcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH0gY2xpcDFcbiAqIEBwYXJhbSAge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcH0gY2xpcDJcbiAqL1xuVHJhY2tDbGlwLnByb3RvdHlwZS5hZGRpdGl2ZUJsZW5kID0gZnVuY3Rpb24gKGNsaXAxLCBjbGlwMikge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMxID0gY2xpcDEudHJhY2tzW2ldO1xuICAgICAgICB2YXIgYzIgPSBjbGlwMi50cmFja3NbaV07XG4gICAgICAgIHZhciB0Q2xpcCA9IHRoaXMudHJhY2tzW2ldO1xuXG4gICAgICAgIHRDbGlwLmFkZGl0aXZlQmxlbmQoYzEsIGMyKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIFN1YnRyYWN0aXZlIGJsZW5kaW5nIGZyb20gdHdvIHNraW5uaW5nIGNsaXBzXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAyXG4gKi9cblRyYWNrQ2xpcC5wcm90b3R5cGUuc3VidHJhY3RpdmVCbGVuZCA9IGZ1bmN0aW9uIChjbGlwMSwgY2xpcDIpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjMSA9IGNsaXAxLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIGMyID0gY2xpcDIudHJhY2tzW2ldO1xuICAgICAgICB2YXIgdENsaXAgPSB0aGlzLnRyYWNrc1tpXTtcblxuICAgICAgICB0Q2xpcC5zdWJ0cmFjdGl2ZUJsZW5kKGMxLCBjMik7XG4gICAgfVxufTtcblxuLyoqXG4gKiAyRCBibGVuZGluZyBmcm9tIHRocmVlIHNraW5uaW5nIGNsaXBzXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAxXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAyXG4gKiBAcGFyYW0gIHtjbGF5LmFuaW1hdGlvbi5UcmFja0NsaXB9IGNsaXAzXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGZcbiAqIEBwYXJhbSAge251bWJlcn0gZ1xuICovXG5UcmFja0NsaXAucHJvdG90eXBlLmJsZW5kMkQgPSBmdW5jdGlvbiAoY2xpcDEsIGNsaXAyLCBjbGlwMywgZiwgZykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGMxID0gY2xpcDEudHJhY2tzW2ldO1xuICAgICAgICB2YXIgYzIgPSBjbGlwMi50cmFja3NbaV07XG4gICAgICAgIHZhciBjMyA9IGNsaXAzLnRyYWNrc1tpXTtcbiAgICAgICAgdmFyIHRDbGlwID0gdGhpcy50cmFja3NbaV07XG5cbiAgICAgICAgdENsaXAuYmxlbmQyRChjMSwgYzIsIGMzLCBmLCBnKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIENvcHkgU1JUIG9mIGFsbCBqb2ludHMgY2xpcHMgZnJvbSBhbm90aGVyIFRyYWNrQ2xpcFxuICogQHBhcmFtICB7Y2xheS5hbmltYXRpb24uVHJhY2tDbGlwfSBjbGlwXG4gKi9cblRyYWNrQ2xpcC5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIChjbGlwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnRyYWNrcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgc1RyYWNrID0gY2xpcC50cmFja3NbaV07XG4gICAgICAgIHZhciB0VHJhY2sgPSB0aGlzLnRyYWNrc1tpXTtcblxuICAgICAgICB2ZWMzLmNvcHkodFRyYWNrLnBvc2l0aW9uLCBzVHJhY2sucG9zaXRpb24pO1xuICAgICAgICB2ZWMzLmNvcHkodFRyYWNrLnNjYWxlLCBzVHJhY2suc2NhbGUpO1xuICAgICAgICBxdWF0LmNvcHkodFRyYWNrLnJvdGF0aW9uLCBzVHJhY2sucm90YXRpb24pO1xuICAgIH1cbn07XG5cblRyYWNrQ2xpcC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNsaXAgPSBDbGlwLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy50cmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2xpcC5hZGRUcmFjayh0aGlzLnRyYWNrc1tpXS5jbG9uZSgpKTtcbiAgICB9XG4gICAgY2xpcC5saWZlID0gdGhpcy5saWZlO1xuICAgIHJldHVybiBjbGlwO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgVHJhY2tDbGlwO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9UcmFja0NsaXAuanNcbi8vIG1vZHVsZSBpZCA9IDc1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///75\n");

/***/ }),
/* 76 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var EXTENSION_LIST = [\n    'OES_texture_float',\n    'OES_texture_half_float',\n    'OES_texture_float_linear',\n    'OES_texture_half_float_linear',\n    'OES_standard_derivatives',\n    'OES_vertex_array_object',\n    'OES_element_index_uint',\n    'WEBGL_compressed_texture_s3tc',\n    'WEBGL_compressed_texture_etc',\n    'WEBGL_compressed_texture_etc1',\n    'WEBGL_compressed_texture_pvrtc',\n    'WEBGL_compressed_texture_atc',\n    'WEBGL_compressed_texture_astc',\n    'WEBGL_depth_texture',\n    'EXT_texture_filter_anisotropic',\n    'EXT_shader_texture_lod',\n    'WEBGL_draw_buffers',\n    'EXT_frag_depth',\n    'EXT_sRGB',\n    'ANGLE_instanced_arrays'\n];\n\nvar PARAMETER_NAMES = [\n    'MAX_TEXTURE_SIZE',\n    'MAX_CUBE_MAP_TEXTURE_SIZE'\n];\n\nfunction GLInfo(_gl) {\n    var extensions = {};\n    var parameters = {};\n\n    // Get webgl extension\n    for (var i = 0; i < EXTENSION_LIST.length; i++) {\n        var extName = EXTENSION_LIST[i];\n        createExtension(extName);\n    }\n    // Get parameters\n    for (var i = 0; i < PARAMETER_NAMES.length; i++) {\n        var name = PARAMETER_NAMES[i];\n        parameters[name] = _gl.getParameter(_gl[name]);\n    }\n\n    this.getExtension = function (name) {\n        if (!(name in extensions)) {\n            createExtension(name);\n        }\n        return extensions[name];\n    };\n\n    this.getParameter = function (name) {\n        return parameters[name];\n    };\n\n    function createExtension(name) {\n        if (_gl.getExtension) {\n            var ext = _gl.getExtension(name);\n            if (!ext) {\n                ext = _gl.getExtension('MOZ_' + name);\n            }\n            if (!ext) {\n                ext = _gl.getExtension('WEBKIT_' + name);\n            }\n            extensions[name] = ext;\n        }\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLInfo);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvR0xJbmZvLmpzP2NiMmEiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIEVYVEVOU0lPTl9MSVNUID0gW1xuICAgICdPRVNfdGV4dHVyZV9mbG9hdCcsXG4gICAgJ09FU190ZXh0dXJlX2hhbGZfZmxvYXQnLFxuICAgICdPRVNfdGV4dHVyZV9mbG9hdF9saW5lYXInLFxuICAgICdPRVNfdGV4dHVyZV9oYWxmX2Zsb2F0X2xpbmVhcicsXG4gICAgJ09FU19zdGFuZGFyZF9kZXJpdmF0aXZlcycsXG4gICAgJ09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0JyxcbiAgICAnT0VTX2VsZW1lbnRfaW5kZXhfdWludCcsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9zM3RjJyxcbiAgICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2V0YycsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9ldGMxJyxcbiAgICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX3B2cnRjJyxcbiAgICAnV0VCR0xfY29tcHJlc3NlZF90ZXh0dXJlX2F0YycsXG4gICAgJ1dFQkdMX2NvbXByZXNzZWRfdGV4dHVyZV9hc3RjJyxcbiAgICAnV0VCR0xfZGVwdGhfdGV4dHVyZScsXG4gICAgJ0VYVF90ZXh0dXJlX2ZpbHRlcl9hbmlzb3Ryb3BpYycsXG4gICAgJ0VYVF9zaGFkZXJfdGV4dHVyZV9sb2QnLFxuICAgICdXRUJHTF9kcmF3X2J1ZmZlcnMnLFxuICAgICdFWFRfZnJhZ19kZXB0aCcsXG4gICAgJ0VYVF9zUkdCJyxcbiAgICAnQU5HTEVfaW5zdGFuY2VkX2FycmF5cydcbl07XG5cbnZhciBQQVJBTUVURVJfTkFNRVMgPSBbXG4gICAgJ01BWF9URVhUVVJFX1NJWkUnLFxuICAgICdNQVhfQ1VCRV9NQVBfVEVYVFVSRV9TSVpFJ1xuXTtcblxuZnVuY3Rpb24gR0xJbmZvKF9nbCkge1xuICAgIHZhciBleHRlbnNpb25zID0ge307XG4gICAgdmFyIHBhcmFtZXRlcnMgPSB7fTtcblxuICAgIC8vIEdldCB3ZWJnbCBleHRlbnNpb25cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IEVYVEVOU0lPTl9MSVNULmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBleHROYW1lID0gRVhURU5TSU9OX0xJU1RbaV07XG4gICAgICAgIGNyZWF0ZUV4dGVuc2lvbihleHROYW1lKTtcbiAgICB9XG4gICAgLy8gR2V0IHBhcmFtZXRlcnNcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBBUkFNRVRFUl9OQU1FUy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgbmFtZSA9IFBBUkFNRVRFUl9OQU1FU1tpXTtcbiAgICAgICAgcGFyYW1ldGVyc1tuYW1lXSA9IF9nbC5nZXRQYXJhbWV0ZXIoX2dsW25hbWVdKTtcbiAgICB9XG5cbiAgICB0aGlzLmdldEV4dGVuc2lvbiA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGlmICghKG5hbWUgaW4gZXh0ZW5zaW9ucykpIHtcbiAgICAgICAgICAgIGNyZWF0ZUV4dGVuc2lvbihuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXh0ZW5zaW9uc1tuYW1lXTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRQYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gcGFyYW1ldGVyc1tuYW1lXTtcbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gY3JlYXRlRXh0ZW5zaW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKF9nbC5nZXRFeHRlbnNpb24pIHtcbiAgICAgICAgICAgIHZhciBleHQgPSBfZ2wuZ2V0RXh0ZW5zaW9uKG5hbWUpO1xuICAgICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgICAgICBleHQgPSBfZ2wuZ2V0RXh0ZW5zaW9uKCdNT1pfJyArIG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFleHQpIHtcbiAgICAgICAgICAgICAgICBleHQgPSBfZ2wuZ2V0RXh0ZW5zaW9uKCdXRUJLSVRfJyArIG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXh0ZW5zaW9uc1tuYW1lXSA9IGV4dDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgR0xJbmZvO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvR0xJbmZvLmpzXG4vLyBtb2R1bGUgaWQgPSA3NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///76\n");

/***/ }),
/* 77 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n * @alias clay.core.LinkedList\n */\nvar LinkedList = function () {\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.head = null;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.tail = null;\n\n    this._length = 0;\n};\n\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {clay.core.LinkedList.Entry}\n */\nLinkedList.prototype.insert = function (val) {\n    var entry = new LinkedList.Entry(val);\n    this.insertEntry(entry);\n    return entry;\n};\n\n/**\n * Insert a new value at idx\n * @param {number} idx\n * @param  {} val\n * @return {clay.core.LinkedList.Entry}\n */\nLinkedList.prototype.insertAt = function (idx, val) {\n    if (idx < 0) {\n        return;\n    }\n    var next = this.head;\n    var cursor = 0;\n    while (next && cursor != idx) {\n        next = next.next;\n        cursor++;\n    }\n    if (next) {\n        var entry = new LinkedList.Entry(val);\n        var prev = next.prev;\n        if (!prev) { //next is head\n            this.head = entry;\n        }\n        else {\n            prev.next = entry;\n            entry.prev = prev;\n        }\n        entry.next = next;\n        next.prev = entry;\n    }\n    else {\n        this.insert(val);\n    }\n};\n\nLinkedList.prototype.insertBeforeEntry = function (val, next) {\n    var entry = new LinkedList.Entry(val);\n    var prev = next.prev;\n    if (!prev) { //next is head\n        this.head = entry;\n    }\n    else {\n        prev.next = entry;\n        entry.prev = prev;\n    }\n    entry.next = next;\n    next.prev = entry;\n\n    this._length++;\n};\n\n/**\n * Insert an entry at the tail\n * @param  {clay.core.LinkedList.Entry} entry\n */\nLinkedList.prototype.insertEntry = function (entry) {\n    if (!this.head) {\n        this.head = this.tail = entry;\n    }\n    else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        this.tail = entry;\n    }\n    this._length++;\n};\n\n/**\n * Remove entry.\n * @param  {clay.core.LinkedList.Entry} entry\n */\nLinkedList.prototype.remove = function (entry) {\n    var prev = entry.prev;\n    var next = entry.next;\n    if (prev) {\n        prev.next = next;\n    }\n    else {\n        // Is head\n        this.head = next;\n    }\n    if (next) {\n        next.prev = prev;\n    }\n    else {\n        // Is tail\n        this.tail = prev;\n    }\n    entry.next = entry.prev = null;\n    this._length--;\n};\n\n/**\n * Remove entry at index.\n * @param  {number} idx\n * @return {}\n */\nLinkedList.prototype.removeAt = function (idx) {\n    if (idx < 0) {\n        return;\n    }\n    var curr = this.head;\n    var cursor = 0;\n    while (curr && cursor != idx) {\n        curr = curr.next;\n        cursor++;\n    }\n    if (curr) {\n        this.remove(curr);\n        return curr.value;\n    }\n};\n/**\n * Get head value\n * @return {}\n */\nLinkedList.prototype.getHead = function () {\n    if (this.head) {\n        return this.head.value;\n    }\n};\n/**\n * Get tail value\n * @return {}\n */\nLinkedList.prototype.getTail = function () {\n    if (this.tail) {\n        return this.tail.value;\n    }\n};\n/**\n * Get value at idx\n * @param {number} idx\n * @return {}\n */\nLinkedList.prototype.getAt = function (idx) {\n    if (idx < 0) {\n        return;\n    }\n    var curr = this.head;\n    var cursor = 0;\n    while (curr && cursor != idx) {\n        curr = curr.next;\n        cursor++;\n    }\n    return curr.value;\n};\n\n/**\n * @param  {} value\n * @return {number}\n */\nLinkedList.prototype.indexOf = function (value) {\n    var curr = this.head;\n    var cursor = 0;\n    while (curr) {\n        if (curr.value === value) {\n            return cursor;\n        }\n        curr = curr.next;\n        cursor++;\n    }\n};\n\n/**\n * @return {number}\n */\nLinkedList.prototype.length = function () {\n    return this._length;\n};\n\n/**\n * If list is empty\n */\nLinkedList.prototype.isEmpty = function () {\n    return this._length === 0;\n};\n\n/**\n * @param  {Function} cb\n * @param  {} context\n */\nLinkedList.prototype.forEach = function (cb, context) {\n    var curr = this.head;\n    var idx = 0;\n    var haveContext = typeof(context) != 'undefined';\n    while (curr) {\n        if (haveContext) {\n            cb.call(context, curr.value, idx);\n        }\n        else {\n            cb(curr.value, idx);\n        }\n        curr = curr.next;\n        idx++;\n    }\n};\n\n/**\n * Clear the list\n */\nLinkedList.prototype.clear = function () {\n    this.tail = this.head = null;\n    this._length = 0;\n};\n\n/**\n * @constructor\n * @param {} val\n */\nLinkedList.Entry = function (val) {\n    /**\n     * @type {}\n     */\n    this.value = val;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.next = null;\n\n    /**\n     * @type {clay.core.LinkedList.Entry}\n     */\n    this.prev = null;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LinkedList);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvcmUvTGlua2VkTGlzdC5qcz9mMmFlIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2ltcGxlIGRvdWJsZSBsaW5rZWQgbGlzdC4gQ29tcGFyZWQgd2l0aCBhcnJheSwgaXQgaGFzIE8oMSkgcmVtb3ZlIG9wZXJhdGlvbi5cbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuY29yZS5MaW5rZWRMaXN0XG4gKi9cbnZhciBMaW5rZWRMaXN0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuY29yZS5MaW5rZWRMaXN0LkVudHJ5fVxuICAgICAqL1xuICAgIHRoaXMuaGVhZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5jb3JlLkxpbmtlZExpc3QuRW50cnl9XG4gICAgICovXG4gICAgdGhpcy50YWlsID0gbnVsbDtcblxuICAgIHRoaXMuX2xlbmd0aCA9IDA7XG59O1xuXG4vKipcbiAqIEluc2VydCBhIG5ldyB2YWx1ZSBhdCB0aGUgdGFpbFxuICogQHBhcmFtICB7fSB2YWxcbiAqIEByZXR1cm4ge2NsYXkuY29yZS5MaW5rZWRMaXN0LkVudHJ5fVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5pbnNlcnQgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgdmFyIGVudHJ5ID0gbmV3IExpbmtlZExpc3QuRW50cnkodmFsKTtcbiAgICB0aGlzLmluc2VydEVudHJ5KGVudHJ5KTtcbiAgICByZXR1cm4gZW50cnk7XG59O1xuXG4vKipcbiAqIEluc2VydCBhIG5ldyB2YWx1ZSBhdCBpZHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAqIEBwYXJhbSAge30gdmFsXG4gKiBAcmV0dXJuIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX1cbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuaW5zZXJ0QXQgPSBmdW5jdGlvbiAoaWR4LCB2YWwpIHtcbiAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBuZXh0ID0gdGhpcy5oZWFkO1xuICAgIHZhciBjdXJzb3IgPSAwO1xuICAgIHdoaWxlIChuZXh0ICYmIGN1cnNvciAhPSBpZHgpIHtcbiAgICAgICAgbmV4dCA9IG5leHQubmV4dDtcbiAgICAgICAgY3Vyc29yKys7XG4gICAgfVxuICAgIGlmIChuZXh0KSB7XG4gICAgICAgIHZhciBlbnRyeSA9IG5ldyBMaW5rZWRMaXN0LkVudHJ5KHZhbCk7XG4gICAgICAgIHZhciBwcmV2ID0gbmV4dC5wcmV2O1xuICAgICAgICBpZiAoIXByZXYpIHsgLy9uZXh0IGlzIGhlYWRcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJldi5uZXh0ID0gZW50cnk7XG4gICAgICAgICAgICBlbnRyeS5wcmV2ID0gcHJldjtcbiAgICAgICAgfVxuICAgICAgICBlbnRyeS5uZXh0ID0gbmV4dDtcbiAgICAgICAgbmV4dC5wcmV2ID0gZW50cnk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmluc2VydCh2YWwpO1xuICAgIH1cbn07XG5cbkxpbmtlZExpc3QucHJvdG90eXBlLmluc2VydEJlZm9yZUVudHJ5ID0gZnVuY3Rpb24gKHZhbCwgbmV4dCkge1xuICAgIHZhciBlbnRyeSA9IG5ldyBMaW5rZWRMaXN0LkVudHJ5KHZhbCk7XG4gICAgdmFyIHByZXYgPSBuZXh0LnByZXY7XG4gICAgaWYgKCFwcmV2KSB7IC8vbmV4dCBpcyBoZWFkXG4gICAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcHJldi5uZXh0ID0gZW50cnk7XG4gICAgICAgIGVudHJ5LnByZXYgPSBwcmV2O1xuICAgIH1cbiAgICBlbnRyeS5uZXh0ID0gbmV4dDtcbiAgICBuZXh0LnByZXYgPSBlbnRyeTtcblxuICAgIHRoaXMuX2xlbmd0aCsrO1xufTtcblxuLyoqXG4gKiBJbnNlcnQgYW4gZW50cnkgYXQgdGhlIHRhaWxcbiAqIEBwYXJhbSAge2NsYXkuY29yZS5MaW5rZWRMaXN0LkVudHJ5fSBlbnRyeVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5pbnNlcnRFbnRyeSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIGlmICghdGhpcy5oZWFkKSB7XG4gICAgICAgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy50YWlsLm5leHQgPSBlbnRyeTtcbiAgICAgICAgZW50cnkucHJldiA9IHRoaXMudGFpbDtcbiAgICAgICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMuX2xlbmd0aCsrO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgZW50cnkuXG4gKiBAcGFyYW0gIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX0gZW50cnlcbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgdmFyIHByZXYgPSBlbnRyeS5wcmV2O1xuICAgIHZhciBuZXh0ID0gZW50cnkubmV4dDtcbiAgICBpZiAocHJldikge1xuICAgICAgICBwcmV2Lm5leHQgPSBuZXh0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSXMgaGVhZFxuICAgICAgICB0aGlzLmhlYWQgPSBuZXh0O1xuICAgIH1cbiAgICBpZiAobmV4dCkge1xuICAgICAgICBuZXh0LnByZXYgPSBwcmV2O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gSXMgdGFpbFxuICAgICAgICB0aGlzLnRhaWwgPSBwcmV2O1xuICAgIH1cbiAgICBlbnRyeS5uZXh0ID0gZW50cnkucHJldiA9IG51bGw7XG4gICAgdGhpcy5fbGVuZ3RoLS07XG59O1xuXG4vKipcbiAqIFJlbW92ZSBlbnRyeSBhdCBpbmRleC5cbiAqIEBwYXJhbSAge251bWJlcn0gaWR4XG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLnJlbW92ZUF0ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgIGlmIChpZHggPCAwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGN1cnIgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGN1cnNvciA9IDA7XG4gICAgd2hpbGUgKGN1cnIgJiYgY3Vyc29yICE9IGlkeCkge1xuICAgICAgICBjdXJyID0gY3Vyci5uZXh0O1xuICAgICAgICBjdXJzb3IrKztcbiAgICB9XG4gICAgaWYgKGN1cnIpIHtcbiAgICAgICAgdGhpcy5yZW1vdmUoY3Vycik7XG4gICAgICAgIHJldHVybiBjdXJyLnZhbHVlO1xuICAgIH1cbn07XG4vKipcbiAqIEdldCBoZWFkIHZhbHVlXG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmdldEhlYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuaGVhZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oZWFkLnZhbHVlO1xuICAgIH1cbn07XG4vKipcbiAqIEdldCB0YWlsIHZhbHVlXG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmdldFRhaWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgICByZXR1cm4gdGhpcy50YWlsLnZhbHVlO1xuICAgIH1cbn07XG4vKipcbiAqIEdldCB2YWx1ZSBhdCBpZHhcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAqIEByZXR1cm4ge31cbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuZ2V0QXQgPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgY3VyciA9IHRoaXMuaGVhZDtcbiAgICB2YXIgY3Vyc29yID0gMDtcbiAgICB3aGlsZSAoY3VyciAmJiBjdXJzb3IgIT0gaWR4KSB7XG4gICAgICAgIGN1cnIgPSBjdXJyLm5leHQ7XG4gICAgICAgIGN1cnNvcisrO1xuICAgIH1cbiAgICByZXR1cm4gY3Vyci52YWx1ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7fSB2YWx1ZVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5pbmRleE9mID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgdmFyIGN1cnIgPSB0aGlzLmhlYWQ7XG4gICAgdmFyIGN1cnNvciA9IDA7XG4gICAgd2hpbGUgKGN1cnIpIHtcbiAgICAgICAgaWYgKGN1cnIudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm4gY3Vyc29yO1xuICAgICAgICB9XG4gICAgICAgIGN1cnIgPSBjdXJyLm5leHQ7XG4gICAgICAgIGN1cnNvcisrO1xuICAgIH1cbn07XG5cbi8qKlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbmd0aDtcbn07XG5cbi8qKlxuICogSWYgbGlzdCBpcyBlbXB0eVxuICovXG5MaW5rZWRMaXN0LnByb3RvdHlwZS5pc0VtcHR5ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9sZW5ndGggPT09IDA7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtICB7fSBjb250ZXh0XG4gKi9cbkxpbmtlZExpc3QucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbiAoY2IsIGNvbnRleHQpIHtcbiAgICB2YXIgY3VyciA9IHRoaXMuaGVhZDtcbiAgICB2YXIgaWR4ID0gMDtcbiAgICB2YXIgaGF2ZUNvbnRleHQgPSB0eXBlb2YoY29udGV4dCkgIT0gJ3VuZGVmaW5lZCc7XG4gICAgd2hpbGUgKGN1cnIpIHtcbiAgICAgICAgaWYgKGhhdmVDb250ZXh0KSB7XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIGN1cnIudmFsdWUsIGlkeCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYihjdXJyLnZhbHVlLCBpZHgpO1xuICAgICAgICB9XG4gICAgICAgIGN1cnIgPSBjdXJyLm5leHQ7XG4gICAgICAgIGlkeCsrO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ2xlYXIgdGhlIGxpc3RcbiAqL1xuTGlua2VkTGlzdC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy50YWlsID0gdGhpcy5oZWFkID0gbnVsbDtcbiAgICB0aGlzLl9sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7fSB2YWxcbiAqL1xuTGlua2VkTGlzdC5FbnRyeSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7fVxuICAgICAqL1xuICAgIHRoaXMudmFsdWUgPSB2YWw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5jb3JlLkxpbmtlZExpc3QuRW50cnl9XG4gICAgICovXG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LmNvcmUuTGlua2VkTGlzdC5FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLnByZXYgPSBudWxsO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTGlua2VkTGlzdDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb3JlL0xpbmtlZExpc3QuanNcbi8vIG1vZHVsZSBpZCA9IDc3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///77\n");

/***/ }),
/* 78 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__ = __webpack_require__(32);\n\n\n\n/**\n * @constructor\n * @alias clay.Quaternion\n * @param {number} x\n * @param {number} y\n * @param {number} z\n * @param {number} w\n */\nvar Quaternion = function (x, y, z, w) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n    w = w === undefined ? 1 : w;\n\n    /**\n     * Storage of Quaternion, read and write of x, y, z, w will change the values in array\n     * All methods also operate on the array instead of x, y, z, w components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Quaternion#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromValues(x, y, z, w);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Quaternion#\n     */\n    this._dirty = true;\n};\n\nQuaternion.prototype = {\n\n    constructor: Quaternion,\n\n    /**\n     * Add b to self\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    add: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate the w component from x, y, z component\n     * @return {clay.Quaternion}\n     */\n    calculateW: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].calculateW(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @param  {number}  w\n     * @return {clay.Quaternion}\n     */\n    set: function (x, y, z, w) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this.array[3] = w;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y, z and w components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Quaternion}\n     */\n    setArray: function (arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n        this.array[3] = arr[3];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Quaternion\n     * @return {clay.Quaternion}\n     */\n    clone: function () {\n        return new Quaternion(this.x, this.y, this.z, this.w);\n    },\n\n    /**\n     * Calculates the conjugate of self If the quaternion is normalized,\n     * this function is faster than invert and produces the same result.\n     *\n     * @return {clay.Quaternion}\n     */\n    conjugate: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].conjugate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Quaternion} b\n     * @return {number}\n     */\n    dot: function (b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Set from the given 3x3 rotation matrix\n     * @param  {clay.Matrix3} m\n     * @return {clay.Quaternion}\n     */\n    fromMat3: function (m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set from the given 4x4 rotation matrix\n     * The 4th column and 4th row will be droped\n     * @param  {clay.Matrix4} m\n     * @return {clay.Quaternion}\n     */\n    fromMat4: (function () {\n        var m3 = __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].create();\n        return function (m) {\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].fromMat4(m3, m.array);\n            // TODO Not like mat4, mat3 in glmatrix seems to be row-based\n            __WEBPACK_IMPORTED_MODULE_1__glmatrix_mat3__[\"a\" /* default */].transpose(m3, m3);\n            __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(this.array, m3);\n            this._dirty = true;\n            return this;\n        };\n    })(),\n\n    /**\n     * Set to identity quaternion\n     * @return {clay.Quaternion}\n     */\n    identity: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Invert self\n     * @return {clay.Quaternion}\n     */\n    invert: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].length(this.array);\n    },\n\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Quaternion} a\n     * @param  {clay.Quaternion} b\n     * @param  {number}  t\n     * @return {clay.Quaternion}\n     */\n    lerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Quaternion} a\n     * @return {clay.Quaternion}\n     */\n    mulLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Quaternion} b\n     * @return {clay.Quaternion}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply a and self\n     * Quaternion mutiply is not commutative, so the result of mutiplyLeft is different with multiply.\n     * @param  {clay.Quaternion} a\n     * @return {clay.Quaternion}\n     */\n    multiplyLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Quaternion}\n     */\n    normalize: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about X axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateX: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateX(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Y axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateY: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateY(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian about Z axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    rotateZ: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateZ(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Sets self to represent the shortest rotation from Vector3 a to Vector3 b.\n     * a and b needs to be normalized\n     * @param  {clay.Vector3} a\n     * @param  {clay.Vector3} b\n     * @return {clay.Quaternion}\n     */\n    rotationTo: function (a, b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotationTo(this.array, a.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Sets self with values corresponding to the given axes\n     * @param {clay.Vector3} view\n     * @param {clay.Vector3} right\n     * @param {clay.Vector3} up\n     * @return {clay.Quaternion}\n     */\n    setAxes: function (view, right, up) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxes(this.array, view.array, right.array, up.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Sets self with a rotation axis and rotation angle\n     * @param {clay.Vector3} axis\n     * @param {number} rad\n     * @return {clay.Quaternion}\n     */\n    setAxisAngle: function (axis, rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxisAngle(this.array, axis.array, rad);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Perform spherical linear interpolation between a and b\n     * @param  {clay.Quaternion} a\n     * @param  {clay.Quaternion} b\n     * @param  {number} t\n     * @return {clay.Quaternion}\n     */\n    slerp: function (a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Set from euler\n     * @param {clay.Vector3} v\n     * @param {String} order\n     */\n    fromEuler: function (v, order) {\n        return Quaternion.fromEuler(this, v, order);\n    },\n\n    toString: function () {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Quaternion.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name w\n     * @type {number}\n     * @memberOf clay.Quaternion\n     * @instance\n     */\n    defineProperty(proto, 'w', {\n        get: function () {\n            return this.array[3];\n        },\n        set: function (value) {\n            this.array[3] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.add = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {number}     x\n * @param  {number}     y\n * @param  {number}     z\n * @param  {number}     w\n * @return {clay.Quaternion}\n */\nQuaternion.set = function (out, x, y, z, w) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].set(out.array, x, y, z, w);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.copy = function (out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.calculateW = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].calculateW(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.conjugate = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].conjugate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @return {clay.Quaternion}\n */\nQuaternion.identity = function (out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.invert = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {number}\n */\nQuaternion.dot = function (a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.len = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].length(a.array);\n};\n\n// Quaternion.length = Quaternion.len;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @param  {number}     t\n * @return {clay.Quaternion}\n */\nQuaternion.lerp = function (out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @param  {number}     t\n * @return {clay.Quaternion}\n */\nQuaternion.slerp = function (out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].slerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.mul = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {clay.Quaternion} b\n * @return {clay.Quaternion}\n */\nQuaternion.multiply = Quaternion.mul;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateX = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateX(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateY = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateY(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.rotateZ = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotateZ(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    axis\n * @param  {number}     rad\n * @return {clay.Quaternion}\n */\nQuaternion.setAxisAngle = function (out, axis, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxisAngle(out.array, axis.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Quaternion} a\n * @return {clay.Quaternion}\n */\nQuaternion.normalize = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.sqrLen = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].sqrLen(a.array);\n};\n\n/**\n * @function\n * @param  {clay.Quaternion} a\n * @return {number}\n */\nQuaternion.squaredLength = Quaternion.sqrLen;\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Matrix3}    m\n * @return {clay.Quaternion}\n */\nQuaternion.fromMat3 = function (out, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].fromMat3(out.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    view\n * @param  {clay.Vector3}    right\n * @param  {clay.Vector3}    up\n * @return {clay.Quaternion}\n */\nQuaternion.setAxes = function (out, view, right, up) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].setAxes(out.array, view.array, right.array, up.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Quaternion} out\n * @param  {clay.Vector3}    a\n * @param  {clay.Vector3}    b\n * @return {clay.Quaternion}\n */\nQuaternion.rotationTo = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_quat__[\"a\" /* default */].rotationTo(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * Set quaternion from euler\n * @param {clay.Quaternion} out\n * @param {clay.Vector3} v\n * @param {String} order\n */\nQuaternion.fromEuler = function (out, v, order) {\n\n    out._dirty = true;\n\n    v = v.array;\n    var target = out.array;\n    var c1 = Math.cos(v[0] / 2);\n    var c2 = Math.cos(v[1] / 2);\n    var c3 = Math.cos(v[2] / 2);\n    var s1 = Math.sin(v[0] / 2);\n    var s2 = Math.sin(v[1] / 2);\n    var s3 = Math.sin(v[2] / 2);\n\n    var order = (order || 'XYZ').toUpperCase();\n\n    // http://www.mathworks.com/matlabcentral/fileexchange/\n    //  20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n    //  content/SpinCalc.m\n\n    switch (order) {\n        case 'XYZ':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'YXZ':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n        case 'ZXY':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'ZYX':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n        case 'YZX':\n            target[0] = s1 * c2 * c3 + c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 + s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 - s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 - s1 * s2 * s3;\n            break;\n        case 'XZY':\n            target[0] = s1 * c2 * c3 - c1 * s2 * s3;\n            target[1] = c1 * s2 * c3 - s1 * c2 * s3;\n            target[2] = c1 * c2 * s3 + s1 * s2 * c3;\n            target[3] = c1 * c2 * c3 + s1 * s2 * s3;\n            break;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Quaternion);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL21hdGgvUXVhdGVybmlvbi5qcz85MjhjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBxdWF0IGZyb20gJy4uL2dsbWF0cml4L3F1YXQnO1xuaW1wb3J0IG1hdDMgZnJvbSAnLi4vZ2xtYXRyaXgvbWF0Myc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5RdWF0ZXJuaW9uXG4gKiBAcGFyYW0ge251bWJlcn0geFxuICogQHBhcmFtIHtudW1iZXJ9IHlcbiAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gKiBAcGFyYW0ge251bWJlcn0gd1xuICovXG52YXIgUXVhdGVybmlvbiA9IGZ1bmN0aW9uICh4LCB5LCB6LCB3KSB7XG5cbiAgICB4ID0geCB8fCAwO1xuICAgIHkgPSB5IHx8IDA7XG4gICAgeiA9IHogfHwgMDtcbiAgICB3ID0gdyA9PT0gdW5kZWZpbmVkID8gMSA6IHc7XG5cbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIFF1YXRlcm5pb24sIHJlYWQgYW5kIHdyaXRlIG9mIHgsIHksIHosIHcgd2lsbCBjaGFuZ2UgdGhlIHZhbHVlcyBpbiBhcnJheVxuICAgICAqIEFsbCBtZXRob2RzIGFsc28gb3BlcmF0ZSBvbiB0aGUgYXJyYXkgaW5zdGVhZCBvZiB4LCB5LCB6LCB3IGNvbXBvbmVudHNcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuUXVhdGVybmlvbiNcbiAgICAgKi9cbiAgICB0aGlzLmFycmF5ID0gcXVhdC5mcm9tVmFsdWVzKHgsIHksIHosIHcpO1xuXG4gICAgLyoqXG4gICAgICogRGlydHkgZmxhZyBpcyB1c2VkIGJ5IHRoZSBOb2RlIHRvIGRldGVybWluZVxuICAgICAqIGlmIHRoZSBtYXRyaXggaXMgdXBkYXRlZCB0byBsYXRlc3RcbiAgICAgKiBAbmFtZSBfZGlydHlcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5RdWF0ZXJuaW9uI1xuICAgICAqL1xuICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cblF1YXRlcm5pb24ucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IFF1YXRlcm5pb24sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgYiB0byBzZWxmXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGFkZDogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcXVhdC5hZGQodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENhbGN1bGF0ZSB0aGUgdyBjb21wb25lbnQgZnJvbSB4LCB5LCB6IGNvbXBvbmVudFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBjYWxjdWxhdGVXOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHF1YXQuY2FsY3VsYXRlVyh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHgsIHkgYW5kIHogY29tcG9uZW50c1xuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHhcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB5XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgelxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHdcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgc2V0OiBmdW5jdGlvbiAoeCwgeSwgeiwgdykge1xuICAgICAgICB0aGlzLmFycmF5WzBdID0geDtcbiAgICAgICAgdGhpcy5hcnJheVsxXSA9IHk7XG4gICAgICAgIHRoaXMuYXJyYXlbMl0gPSB6O1xuICAgICAgICB0aGlzLmFycmF5WzNdID0gdztcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHgsIHksIHogYW5kIHcgY29tcG9uZW50cyBmcm9tIGFycmF5XG4gICAgICogQHBhcmFtICB7RmxvYXQzMkFycmF5fG51bWJlcltdfSBhcnJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IGFyclswXTtcbiAgICAgICAgdGhpcy5hcnJheVsxXSA9IGFyclsxXTtcbiAgICAgICAgdGhpcy5hcnJheVsyXSA9IGFyclsyXTtcbiAgICAgICAgdGhpcy5hcnJheVszXSA9IGFyclszXTtcblxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBRdWF0ZXJuaW9uXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbih0aGlzLngsIHRoaXMueSwgdGhpcy56LCB0aGlzLncpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGVzIHRoZSBjb25qdWdhdGUgb2Ygc2VsZiBJZiB0aGUgcXVhdGVybmlvbiBpcyBub3JtYWxpemVkLFxuICAgICAqIHRoaXMgZnVuY3Rpb24gaXMgZmFzdGVyIHRoYW4gaW52ZXJ0IGFuZCBwcm9kdWNlcyB0aGUgc2FtZSByZXN1bHQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgY29uanVnYXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHF1YXQuY29uanVnYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbiAoYikge1xuICAgICAgICBxdWF0LmNvcHkodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERvdCBwcm9kdWN0IG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZG90OiBmdW5jdGlvbiAoYikge1xuICAgICAgICByZXR1cm4gcXVhdC5kb3QodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBmcm9tIHRoZSBnaXZlbiAzeDMgcm90YXRpb24gbWF0cml4XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBtXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGZyb21NYXQzOiBmdW5jdGlvbiAobSkge1xuICAgICAgICBxdWF0LmZyb21NYXQzKHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgZnJvbSB0aGUgZ2l2ZW4gNHg0IHJvdGF0aW9uIG1hdHJpeFxuICAgICAqIFRoZSA0dGggY29sdW1uIGFuZCA0dGggcm93IHdpbGwgYmUgZHJvcGVkXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGZyb21NYXQ0OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbTMgPSBtYXQzLmNyZWF0ZSgpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKG0pIHtcbiAgICAgICAgICAgIG1hdDMuZnJvbU1hdDQobTMsIG0uYXJyYXkpO1xuICAgICAgICAgICAgLy8gVE9ETyBOb3QgbGlrZSBtYXQ0LCBtYXQzIGluIGdsbWF0cml4IHNlZW1zIHRvIGJlIHJvdy1iYXNlZFxuICAgICAgICAgICAgbWF0My50cmFuc3Bvc2UobTMsIG0zKTtcbiAgICAgICAgICAgIHF1YXQuZnJvbU1hdDModGhpcy5hcnJheSwgbTMpO1xuICAgICAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byBpZGVudGl0eSBxdWF0ZXJuaW9uXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIGlkZW50aXR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHF1YXQuaWRlbnRpdHkodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBJbnZlcnQgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBpbnZlcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcXVhdC5pbnZlcnQodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBxdWF0Lmxlbih0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuZ3RoOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBxdWF0Lmxlbmd0aCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgdFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBsZXJwOiBmdW5jdGlvbiAoYSwgYiwgdCkge1xuICAgICAgICBxdWF0LmxlcnAodGhpcy5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdWx0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHF1YXQubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlMZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIG11bExlZnQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHF1YXQubXVsdGlwbHkodGhpcy5hcnJheSwgYS5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE11dGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgcXVhdC5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXV0aXBseSBhIGFuZCBzZWxmXG4gICAgICogUXVhdGVybmlvbiBtdXRpcGx5IGlzIG5vdCBjb21tdXRhdGl2ZSwgc28gdGhlIHJlc3VsdCBvZiBtdXRpcGx5TGVmdCBpcyBkaWZmZXJlbnQgd2l0aCBtdWx0aXBseS5cbiAgICAgKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgbXVsdGlwbHlMZWZ0OiBmdW5jdGlvbiAoYSkge1xuICAgICAgICBxdWF0Lm11bHRpcGx5KHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBub3JtYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcXVhdC5ub3JtYWxpemUodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJvdGF0ZSBzZWxmIGJ5IGEgZ2l2ZW4gcmFkaWFuIGFib3V0IFggYXhpc1xuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgcm90YXRlWDogZnVuY3Rpb24gKHJhZCkge1xuICAgICAgICBxdWF0LnJvdGF0ZVgodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW4gYWJvdXQgWSBheGlzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhZFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICByb3RhdGVZOiBmdW5jdGlvbiAocmFkKSB7XG4gICAgICAgIHF1YXQucm90YXRlWSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCByYWQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgc2VsZiBieSBhIGdpdmVuIHJhZGlhbiBhYm91dCBaIGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHJvdGF0ZVo6IGZ1bmN0aW9uIChyYWQpIHtcbiAgICAgICAgcXVhdC5yb3RhdGVaKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHJhZCk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldHMgc2VsZiB0byByZXByZXNlbnQgdGhlIHNob3J0ZXN0IHJvdGF0aW9uIGZyb20gVmVjdG9yMyBhIHRvIFZlY3RvcjMgYi5cbiAgICAgKiBhIGFuZCBiIG5lZWRzIHRvIGJlIG5vcm1hbGl6ZWRcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGFcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gICAgICovXG4gICAgcm90YXRpb25UbzogZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgcXVhdC5yb3RhdGlvblRvKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2V0cyBzZWxmIHdpdGggdmFsdWVzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIGF4ZXNcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gdmlld1xuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSByaWdodFxuICAgICAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSB1cFxuICAgICAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAgICAgKi9cbiAgICBzZXRBeGVzOiBmdW5jdGlvbiAodmlldywgcmlnaHQsIHVwKSB7XG4gICAgICAgIHF1YXQuc2V0QXhlcyh0aGlzLmFycmF5LCB2aWV3LmFycmF5LCByaWdodC5hcnJheSwgdXAuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHNlbGYgd2l0aCBhIHJvdGF0aW9uIGF4aXMgYW5kIHJvdGF0aW9uIGFuZ2xlXG4gICAgICogQHBhcmFtIHtjbGF5LlZlY3RvcjN9IGF4aXNcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHNldEF4aXNBbmdsZTogZnVuY3Rpb24gKGF4aXMsIHJhZCkge1xuICAgICAgICBxdWF0LnNldEF4aXNBbmdsZSh0aGlzLmFycmF5LCBheGlzLmFycmF5LCByYWQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBzcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiBhIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB0XG4gICAgICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICAgICAqL1xuICAgIHNsZXJwOiBmdW5jdGlvbiAoYSwgYiwgdCkge1xuICAgICAgICBxdWF0LnNsZXJwKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3F1YXJlZExlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBzcXJMZW46IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHF1YXQuc3FyTGVuKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTcXVhcmVkIGxlbmd0aCBvZiBzZWxmXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxdWFyZWRMZW5ndGg6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHF1YXQuc3F1YXJlZExlbmd0aCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGZyb20gZXVsZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gdlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBvcmRlclxuICAgICAqL1xuICAgIGZyb21FdWxlcjogZnVuY3Rpb24gKHYsIG9yZGVyKSB7XG4gICAgICAgIHJldHVybiBRdWF0ZXJuaW9uLmZyb21FdWxlcih0aGlzLCB2LCBvcmRlcik7XG4gICAgfSxcblxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAnWycgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMuYXJyYXksICcsJykgKyAnXSc7XG4gICAgfSxcblxuICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpO1xuICAgIH1cbn07XG5cbnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbi8vIEdldHRlciBhbmQgU2V0dGVyXG5pZiAoZGVmaW5lUHJvcGVydHkpIHtcblxuICAgIHZhciBwcm90byA9IFF1YXRlcm5pb24ucHJvdG90eXBlO1xuICAgIC8qKlxuICAgICAqIEBuYW1lIHhcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlF1YXRlcm5pb25cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3gnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlF1YXRlcm5pb25cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3knLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzFdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlF1YXRlcm5pb25cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3onLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMl07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzJdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHdcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlF1YXRlcm5pb25cbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3cnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbM107XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzNdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gU3VwcGx5IG1ldGhvZHMgdGhhdCBhcmUgbm90IGluIHBsYWNlXG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uYWRkID0gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHF1YXQuYWRkKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHhcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHlcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHpcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHdcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5zZXQgPSBmdW5jdGlvbiAob3V0LCB4LCB5LCB6LCB3KSB7XG4gICAgcXVhdC5zZXQob3V0LmFycmF5LCB4LCB5LCB6LCB3KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmNvcHkgPSBmdW5jdGlvbiAob3V0LCBiKSB7XG4gICAgcXVhdC5jb3B5KG91dC5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmNhbGN1bGF0ZVcgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgcXVhdC5jYWxjdWxhdGVXKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmNvbmp1Z2F0ZSA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBxdWF0LmNvbmp1Z2F0ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uaWRlbnRpdHkgPSBmdW5jdGlvbiAob3V0KSB7XG4gICAgcXVhdC5pZGVudGl0eShvdXQuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5pbnZlcnQgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgcXVhdC5pbnZlcnQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5RdWF0ZXJuaW9uLmRvdCA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgcmV0dXJuIHF1YXQuZG90KGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuUXVhdGVybmlvbi5sZW4gPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBxdWF0Lmxlbmd0aChhLmFycmF5KTtcbn07XG5cbi8vIFF1YXRlcm5pb24ubGVuZ3RoID0gUXVhdGVybmlvbi5sZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgICB0XG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ubGVycCA9IGZ1bmN0aW9uIChvdXQsIGEsIGIsIHQpIHtcbiAgICBxdWF0LmxlcnAob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCB0KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGJcbiAqIEBwYXJhbSAge251bWJlcn0gICAgIHRcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5zbGVycCA9IGZ1bmN0aW9uIChvdXQsIGEsIGIsIHQpIHtcbiAgICBxdWF0LnNsZXJwKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSwgdCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBiXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ubXVsID0gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHF1YXQubXVsdGlwbHkob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYlxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLm11bHRpcGx5ID0gUXVhdGVybmlvbi5tdWw7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ucm90YXRlWCA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHF1YXQucm90YXRlWChvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ucm90YXRlWSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHF1YXQucm90YXRlWShvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ucm90YXRlWiA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHF1YXQucm90YXRlWihvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gICAgYXhpc1xuICogQHBhcmFtICB7bnVtYmVyfSAgICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uc2V0QXhpc0FuZ2xlID0gZnVuY3Rpb24gKG91dCwgYXhpcywgcmFkKSB7XG4gICAgcXVhdC5zZXRBeGlzQW5nbGUob3V0LmFycmF5LCBheGlzLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge2NsYXkuUXVhdGVybmlvbn1cbiAqL1xuUXVhdGVybmlvbi5ub3JtYWxpemUgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgcXVhdC5ub3JtYWxpemUob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuUXVhdGVybmlvbi5zcXJMZW4gPSBmdW5jdGlvbiAoYSkge1xuICAgIHJldHVybiBxdWF0LnNxckxlbihhLmFycmF5KTtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuUXVhdGVybmlvbi5zcXVhcmVkTGVuZ3RoID0gUXVhdGVybmlvbi5zcXJMZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gICAgbVxuICogQHJldHVybiB7Y2xheS5RdWF0ZXJuaW9ufVxuICovXG5RdWF0ZXJuaW9uLmZyb21NYXQzID0gZnVuY3Rpb24gKG91dCwgbSkge1xuICAgIHF1YXQuZnJvbU1hdDMob3V0LmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgICB2aWV3XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICAgIHJpZ2h0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjN9ICAgIHVwXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24uc2V0QXhlcyA9IGZ1bmN0aW9uIChvdXQsIHZpZXcsIHJpZ2h0LCB1cCkge1xuICAgIHF1YXQuc2V0QXhlcyhvdXQuYXJyYXksIHZpZXcuYXJyYXksIHJpZ2h0LmFycmF5LCB1cC5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gICAgYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSAgICBiXG4gKiBAcmV0dXJuIHtjbGF5LlF1YXRlcm5pb259XG4gKi9cblF1YXRlcm5pb24ucm90YXRpb25UbyA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICBxdWF0LnJvdGF0aW9uVG8ob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgcXVhdGVybmlvbiBmcm9tIGV1bGVyXG4gKiBAcGFyYW0ge2NsYXkuUXVhdGVybmlvbn0gb3V0XG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gdlxuICogQHBhcmFtIHtTdHJpbmd9IG9yZGVyXG4gKi9cblF1YXRlcm5pb24uZnJvbUV1bGVyID0gZnVuY3Rpb24gKG91dCwgdiwgb3JkZXIpIHtcblxuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuXG4gICAgdiA9IHYuYXJyYXk7XG4gICAgdmFyIHRhcmdldCA9IG91dC5hcnJheTtcbiAgICB2YXIgYzEgPSBNYXRoLmNvcyh2WzBdIC8gMik7XG4gICAgdmFyIGMyID0gTWF0aC5jb3ModlsxXSAvIDIpO1xuICAgIHZhciBjMyA9IE1hdGguY29zKHZbMl0gLyAyKTtcbiAgICB2YXIgczEgPSBNYXRoLnNpbih2WzBdIC8gMik7XG4gICAgdmFyIHMyID0gTWF0aC5zaW4odlsxXSAvIDIpO1xuICAgIHZhciBzMyA9IE1hdGguc2luKHZbMl0gLyAyKTtcblxuICAgIHZhciBvcmRlciA9IChvcmRlciB8fCAnWFlaJykudG9VcHBlckNhc2UoKTtcblxuICAgIC8vIGh0dHA6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2ZpbGVleGNoYW5nZS9cbiAgICAvLyAgMjA2OTYtZnVuY3Rpb24tdG8tY29udmVydC1iZXR3ZWVuLWRjbS1ldWxlci1hbmdsZXMtcXVhdGVybmlvbnMtYW5kLWV1bGVyLXZlY3RvcnMvXG4gICAgLy8gIGNvbnRlbnQvU3BpbkNhbGMubVxuXG4gICAgc3dpdGNoIChvcmRlcikge1xuICAgICAgICBjYXNlICdYWVonOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gczEgKiBjMiAqIGMzICsgYzEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYzEgKiBzMiAqIGMzIC0gczEgKiBjMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYzEgKiBjMiAqIHMzICsgczEgKiBzMiAqIGMzO1xuICAgICAgICAgICAgdGFyZ2V0WzNdID0gYzEgKiBjMiAqIGMzIC0gczEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1lYWic6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBjMSAqIHMyICogYzMgLSBzMSAqIGMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XG4gICAgICAgICAgICB0YXJnZXRbM10gPSBjMSAqIGMyICogYzMgKyBzMSAqIHMyICogczM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWlhZJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGMxICogczIgKiBjMyArIHMxICogYzIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgICAgICAgIHRhcmdldFszXSA9IGMxICogYzIgKiBjMyAtIHMxICogczIgKiBzMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdaWVgnOlxuICAgICAgICAgICAgdGFyZ2V0WzBdID0gczEgKiBjMiAqIGMzIC0gYzEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzFdID0gYzEgKiBzMiAqIGMzICsgczEgKiBjMiAqIHMzO1xuICAgICAgICAgICAgdGFyZ2V0WzJdID0gYzEgKiBjMiAqIHMzIC0gczEgKiBzMiAqIGMzO1xuICAgICAgICAgICAgdGFyZ2V0WzNdID0gYzEgKiBjMiAqIGMzICsgczEgKiBzMiAqIHMzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ1laWCc6XG4gICAgICAgICAgICB0YXJnZXRbMF0gPSBzMSAqIGMyICogYzMgKyBjMSAqIHMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMV0gPSBjMSAqIHMyICogYzMgKyBzMSAqIGMyICogczM7XG4gICAgICAgICAgICB0YXJnZXRbMl0gPSBjMSAqIGMyICogczMgLSBzMSAqIHMyICogYzM7XG4gICAgICAgICAgICB0YXJnZXRbM10gPSBjMSAqIGMyICogYzMgLSBzMSAqIHMyICogczM7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnWFpZJzpcbiAgICAgICAgICAgIHRhcmdldFswXSA9IHMxICogYzIgKiBjMyAtIGMxICogczIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsxXSA9IGMxICogczIgKiBjMyAtIHMxICogYzIgKiBzMztcbiAgICAgICAgICAgIHRhcmdldFsyXSA9IGMxICogYzIgKiBzMyArIHMxICogczIgKiBjMztcbiAgICAgICAgICAgIHRhcmdldFszXSA9IGMxICogYzIgKiBjMyArIHMxICogczIgKiBzMztcbiAgICAgICAgICAgIGJyZWFrO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFF1YXRlcm5pb247XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9RdWF0ZXJuaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSA3OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///78\n");

/***/ }),
/* 79 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_vendor__ = __webpack_require__(4);\n\n\n\n\n\nfunction getArrayCtorByType (type) {\n    return ({\n        'byte': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Int8Array,\n        'ubyte': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint8Array,\n        'short': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Int16Array,\n        'ushort': __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint16Array\n    })[type] || __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Float32Array;\n}\n\nfunction makeAttrKey(attrName) {\n    return 'attr_' + attrName;\n}\n/**\n * GeometryBase attribute\n * @alias clay.GeometryBase.Attribute\n * @constructor\n */\nfunction Attribute(name, type, size, semantic) {\n    /**\n     * Attribute name\n     * @type {string}\n     */\n    this.name = name;\n    /**\n     * Attribute type\n     * Possible values:\n     *  + `'byte'`\n     *  + `'ubyte'`\n     *  + `'short'`\n     *  + `'ushort'`\n     *  + `'float'` Most commonly used.\n     * @type {string}\n     */\n    this.type = type;\n    /**\n     * Size of attribute component. 1 - 4.\n     * @type {number}\n     */\n    this.size = size;\n    /**\n     * Semantic of this attribute.\n     * Possible values:\n     *  + `'POSITION'`\n     *  + `'NORMAL'`\n     *  + `'BINORMAL'`\n     *  + `'TANGENT'`\n     *  + `'TEXCOORD'`\n     *  + `'TEXCOORD_0'`\n     *  + `'TEXCOORD_1'`\n     *  + `'COLOR'`\n     *  + `'JOINT'`\n     *  + `'WEIGHT'`\n     *\n     * In shader, attribute with same semantic will be automatically mapped. For example:\n     * ```glsl\n     * attribute vec3 pos: POSITION\n     * ```\n     * will use the attribute value with semantic POSITION in geometry, no matter what name it used.\n     * @type {string}\n     */\n    this.semantic = semantic || '';\n\n    /**\n     * Value of the attribute.\n     * @type {TypedArray}\n     */\n    this.value = null;\n\n    // Init getter setter\n    switch (size) {\n        case 1:\n            this.get = function (idx) {\n                return this.value[idx];\n            };\n            this.set = function (idx, value) {\n                this.value[idx] = value;\n            };\n            // Copy from source to target\n            this.copy = function (target, source) {\n                this.value[target] = this.value[target];\n            };\n            break;\n        case 2:\n            this.get = function (idx, out) {\n                var arr = this.value;\n                out[0] = arr[idx * 2];\n                out[1] = arr[idx * 2 + 1];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var arr = this.value;\n                arr[idx * 2] = val[0];\n                arr[idx * 2 + 1] = val[1];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 2;\n                target *= 2;\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n            };\n            break;\n        case 3:\n            this.get = function (idx, out) {\n                var idx3 = idx * 3;\n                var arr = this.value;\n                out[0] = arr[idx3];\n                out[1] = arr[idx3 + 1];\n                out[2] = arr[idx3 + 2];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var idx3 = idx * 3;\n                var arr = this.value;\n                arr[idx3] = val[0];\n                arr[idx3 + 1] = val[1];\n                arr[idx3 + 2] = val[2];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 3;\n                target *= 3;\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n                arr[target + 2] = arr[source + 2];\n            };\n            break;\n        case 4:\n            this.get = function (idx, out) {\n                var arr = this.value;\n                var idx4 = idx * 4;\n                out[0] = arr[idx4];\n                out[1] = arr[idx4 + 1];\n                out[2] = arr[idx4 + 2];\n                out[3] = arr[idx4 + 3];\n                return out;\n            };\n            this.set = function (idx, val) {\n                var arr = this.value;\n                var idx4 = idx * 4;\n                arr[idx4] = val[0];\n                arr[idx4 + 1] = val[1];\n                arr[idx4 + 2] = val[2];\n                arr[idx4 + 3] = val[3];\n            };\n            this.copy = function (target, source) {\n                var arr = this.value;\n                source *= 4;\n                target *= 4;\n                // copyWithin is extremely slow\n                arr[target] = arr[source];\n                arr[target + 1] = arr[source + 1];\n                arr[target + 2] = arr[source + 2];\n                arr[target + 3] = arr[source + 3];\n            };\n    }\n}\n\n/**\n * Set item value at give index. Second parameter val is number if size is 1\n * @function\n * @name clay.GeometryBase.Attribute#set\n * @param {number} idx\n * @param {number[]|number} val\n * @example\n * geometry.getAttribute('position').set(0, [1, 1, 1]);\n */\n\n/**\n * Get item value at give index. Second parameter out is no need if size is 1\n * @function\n * @name clay.GeometryBase.Attribute#set\n * @param {number} idx\n * @param {number[]} [out]\n * @example\n * geometry.getAttribute('position').get(0, out);\n */\n\n/**\n * Initialize attribute with given vertex count\n * @param {number} nVertex\n */\nAttribute.prototype.init = function (nVertex) {\n    if (!this.value || this.value.length !== nVertex * this.size) {\n        var ArrayConstructor = getArrayCtorByType(this.type);\n        this.value = new ArrayConstructor(nVertex * this.size);\n    }\n};\n\n/**\n * Initialize attribute with given array. Which can be 1 dimensional or 2 dimensional\n * @param {Array} array\n * @example\n *  geometry.getAttribute('position').fromArray(\n *      [-1, 0, 0, 1, 0, 0, 0, 1, 0]\n *  );\n *  geometry.getAttribute('position').fromArray(\n *      [ [-1, 0, 0], [1, 0, 0], [0, 1, 0] ]\n *  );\n */\nAttribute.prototype.fromArray = function (array) {\n    var ArrayConstructor = getArrayCtorByType(this.type);\n    var value;\n    // Convert 2d array to flat\n    if (array[0] && (array[0].length)) {\n        var n = 0;\n        var size = this.size;\n        value = new ArrayConstructor(array.length * size);\n        for (var i = 0; i < array.length; i++) {\n            for (var j = 0; j < size; j++) {\n                value[n++] = array[i][j];\n            }\n        }\n    }\n    else {\n        value = new ArrayConstructor(array);\n    }\n    this.value = value;\n};\n\nAttribute.prototype.clone = function(copyValue) {\n    var ret = new Attribute(this.name, this.type, this.size, this.semantic);\n    // FIXME\n    if (copyValue) {\n        console.warn('todo');\n    }\n    return ret;\n};\n\nfunction AttributeBuffer(name, type, buffer, size, semantic) {\n    this.name = name;\n    this.type = type;\n    this.buffer = buffer;\n    this.size = size;\n    this.semantic = semantic;\n\n    // To be set in mesh\n    // symbol in the shader\n    this.symbol = '';\n\n    // Needs remove flag\n    this.needsRemove = false;\n}\n\nfunction IndicesBuffer(buffer) {\n    this.buffer = buffer;\n    this.count = 0;\n}\n\n/**\n * Base of all geometry. Use {@link clay.Geometry} for common 3D usage.\n * @constructor clay.GeometryBase\n * @extends clay.core.Base\n */\nvar GeometryBase = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.GeometryBase# */ {\n        /**\n         * Attributes of geometry.\n         * @type {Object.<string, clay.GeometryBase.Attribute>}\n         */\n        attributes: {},\n\n        /**\n         * Indices of geometry.\n         * @type {Uint16Array|Uint32Array}\n         */\n        indices: null,\n\n        /**\n         * Is vertices data dynamically updated.\n         * Attributes value can't be changed after first render if dyanmic is false.\n         * @type {boolean}\n         */\n        dynamic: true,\n\n        _enabledAttributes: null,\n\n        // PENDING\n        // Init it here to avoid deoptimization when it's assigned in application dynamically\n        __used: 0\n    };\n}, function () {\n    // Use cache\n    this._cache = new __WEBPACK_IMPORTED_MODULE_2__core_Cache__[\"a\" /* default */]();\n\n    this._attributeList = Object.keys(this.attributes);\n\n    this.__vaoCache = {};\n},\n/** @lends clay.GeometryBase.prototype */\n{\n    /**\n     * Main attribute will be used to count vertex number\n     * @type {string}\n     */\n    mainAttribute: '',\n    /**\n     * User defined picking algorithm instead of default\n     * triangle ray intersection\n     * x, y are NDC.\n     * ```typescript\n     * (x, y, renderer, camera, renderable, out) => boolean\n     * ```\n     * @type {?Function}\n     */\n    pick: null,\n\n    /**\n     * User defined ray picking algorithm instead of default\n     * triangle ray intersection\n     * ```typescript\n     * (ray: clay.Ray, renderable: clay.Renderable, out: Array) => boolean\n     * ```\n     * @type {?Function}\n     */\n    pickByRay: null,\n\n    /**\n     * Mark attributes and indices in geometry needs to update.\n     * Usually called after you change the data in attributes.\n     */\n    dirty: function () {\n        var enabledAttributes = this.getEnabledAttributes();\n        for (var i = 0; i < enabledAttributes.length; i++) {\n            this.dirtyAttribute(enabledAttributes[i]);\n        }\n        this.dirtyIndices();\n        this._enabledAttributes = null;\n\n        this._cache.dirtyAll('any');\n    },\n    /**\n     * Mark the indices needs to update.\n     */\n    dirtyIndices: function () {\n        this._cache.dirtyAll('indices');\n    },\n    /**\n     * Mark the attributes needs to update.\n     * @param {string} [attrName]\n     */\n    dirtyAttribute: function (attrName) {\n        this._cache.dirtyAll(makeAttrKey(attrName));\n        this._cache.dirtyAll('attributes');\n    },\n    /**\n     * Get indices of triangle at given index.\n     * @param {number} idx\n     * @param {Array.<number>} out\n     * @return {Array.<number>}\n     */\n    getTriangleIndices: function (idx, out) {\n        if (idx < this.triangleCount && idx >= 0) {\n            if (!out) {\n                out = [];\n            }\n            var indices = this.indices;\n            out[0] = indices[idx * 3];\n            out[1] = indices[idx * 3 + 1];\n            out[2] = indices[idx * 3 + 2];\n            return out;\n        }\n    },\n\n    /**\n     * Set indices of triangle at given index.\n     * @param {number} idx\n     * @param {Array.<number>} arr\n     */\n    setTriangleIndices: function (idx, arr) {\n        var indices = this.indices;\n        indices[idx * 3] = arr[0];\n        indices[idx * 3 + 1] = arr[1];\n        indices[idx * 3 + 2] = arr[2];\n    },\n\n    isUseIndices: function () {\n        return !!this.indices;\n    },\n\n    /**\n     * Initialize indices from an array.\n     * @param {Array} array\n     */\n    initIndicesFromArray: function (array) {\n        var value;\n        var ArrayConstructor = this.vertexCount > 0xffff\n            ? __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint32Array : __WEBPACK_IMPORTED_MODULE_3__core_vendor__[\"a\" /* default */].Uint16Array;\n        // Convert 2d array to flat\n        if (array[0] && (array[0].length)) {\n            var n = 0;\n            var size = 3;\n\n            value = new ArrayConstructor(array.length * size);\n            for (var i = 0; i < array.length; i++) {\n                for (var j = 0; j < size; j++) {\n                    value[n++] = array[i][j];\n                }\n            }\n        }\n        else {\n            value = new ArrayConstructor(array);\n        }\n\n        this.indices = value;\n    },\n    /**\n     * Create a new attribute\n     * @param {string} name\n     * @param {string} type\n     * @param {number} size\n     * @param {string} [semantic]\n     */\n    createAttribute: function (name, type, size, semantic) {\n        var attrib = new Attribute(name, type, size, semantic);\n        if (this.attributes[name]) {\n            this.removeAttribute(name);\n        }\n        this.attributes[name] = attrib;\n        this._attributeList.push(name);\n        return attrib;\n    },\n    /**\n     * Remove attribute\n     * @param {string} name\n     */\n    removeAttribute: function (name) {\n        var attributeList = this._attributeList;\n        var idx = attributeList.indexOf(name);\n        if (idx >= 0) {\n            attributeList.splice(idx, 1);\n            delete this.attributes[name];\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Get attribute\n     * @param {string} name\n     * @return {clay.GeometryBase.Attribute}\n     */\n    getAttribute: function (name) {\n        return this.attributes[name];\n    },\n\n    /**\n     * Get enabled attributes name list\n     * Attribute which has the same vertex number with position is treated as a enabled attribute\n     * @return {string[]}\n     */\n    getEnabledAttributes: function () {\n        var enabledAttributes = this._enabledAttributes;\n        var attributeList = this._attributeList;\n        // Cache\n        if (enabledAttributes) {\n            return enabledAttributes;\n        }\n\n        var result = [];\n        var nVertex = this.vertexCount;\n\n        for (var i = 0; i < attributeList.length; i++) {\n            var name = attributeList[i];\n            var attrib = this.attributes[name];\n            if (attrib.value) {\n                if (attrib.value.length === nVertex * attrib.size) {\n                    result.push(name);\n                }\n            }\n        }\n\n        this._enabledAttributes = result;\n\n        return result;\n    },\n\n    getBufferChunks: function (renderer) {\n        var cache = this._cache;\n        cache.use(renderer.__uid__);\n        var isAttributesDirty = cache.isDirty('attributes');\n        var isIndicesDirty = cache.isDirty('indices');\n        if (isAttributesDirty || isIndicesDirty) {\n            this._updateBuffer(renderer.gl, isAttributesDirty, isIndicesDirty);\n            var enabledAttributes = this.getEnabledAttributes();\n            for (var i = 0; i < enabledAttributes.length; i++) {\n                cache.fresh(makeAttrKey(enabledAttributes[i]));\n            }\n            cache.fresh('attributes');\n            cache.fresh('indices');\n        }\n        cache.fresh('any');\n        return cache.get('chunks');\n    },\n\n    _updateBuffer: function (_gl, isAttributesDirty, isIndicesDirty) {\n        var cache = this._cache;\n        var chunks = cache.get('chunks');\n        var firstUpdate = false;\n        if (!chunks) {\n            chunks = [];\n            // Intialize\n            chunks[0] = {\n                attributeBuffers: [],\n                indicesBuffer: null\n            };\n            cache.put('chunks', chunks);\n            firstUpdate = true;\n        }\n\n        var chunk = chunks[0];\n        var attributeBuffers = chunk.attributeBuffers;\n        var indicesBuffer = chunk.indicesBuffer;\n\n        if (isAttributesDirty || firstUpdate) {\n            var attributeList = this.getEnabledAttributes();\n\n            var attributeBufferMap = {};\n            if (!firstUpdate) {\n                for (var i = 0; i < attributeBuffers.length; i++) {\n                    attributeBufferMap[attributeBuffers[i].name] = attributeBuffers[i];\n                }\n            }\n            // FIXME If some attributes removed\n            for (var k = 0; k < attributeList.length; k++) {\n                var name = attributeList[k];\n                var attribute = this.attributes[name];\n\n                var bufferInfo;\n\n                if (!firstUpdate) {\n                    bufferInfo = attributeBufferMap[name];\n                }\n                var buffer;\n                if (bufferInfo) {\n                    buffer = bufferInfo.buffer;\n                }\n                else {\n                    buffer = _gl.createBuffer();\n                }\n                if (cache.isDirty(makeAttrKey(name))) {\n                    // Only update when they are dirty.\n                    // TODO: Use BufferSubData?\n                    _gl.bindBuffer(_gl.ARRAY_BUFFER, buffer);\n                    _gl.bufferData(_gl.ARRAY_BUFFER, attribute.value, this.dynamic ? _gl.DYNAMIC_DRAW : _gl.STATIC_DRAW);\n                }\n\n                attributeBuffers[k] = new AttributeBuffer(name, attribute.type, buffer, attribute.size, attribute.semantic);\n            }\n            // Remove unused attributes buffers.\n            // PENDING\n            for (var i = k; i < attributeBuffers.length; i++) {\n                _gl.deleteBuffer(attributeBuffers[i].buffer);\n            }\n            attributeBuffers.length = k;\n\n        }\n\n        if (this.isUseIndices() && (isIndicesDirty || firstUpdate)) {\n            if (!indicesBuffer) {\n                indicesBuffer = new IndicesBuffer(_gl.createBuffer());\n                chunk.indicesBuffer = indicesBuffer;\n            }\n            indicesBuffer.count = this.indices.length;\n            _gl.bindBuffer(_gl.ELEMENT_ARRAY_BUFFER, indicesBuffer.buffer);\n            _gl.bufferData(_gl.ELEMENT_ARRAY_BUFFER, this.indices, this.dynamic ? _gl.DYNAMIC_DRAW : _gl.STATIC_DRAW);\n        }\n    },\n\n    /**\n     * Dispose geometry data in GL context.\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n        var chunks = cache.get('chunks');\n        if (chunks) {\n            for (var c = 0; c < chunks.length; c++) {\n                var chunk = chunks[c];\n\n                for (var k = 0; k < chunk.attributeBuffers.length; k++) {\n                    var attribs = chunk.attributeBuffers[k];\n                    renderer.gl.deleteBuffer(attribs.buffer);\n                }\n\n                if (chunk.indicesBuffer) {\n                    renderer.gl.deleteBuffer(chunk.indicesBuffer.buffer);\n                }\n            }\n        }\n        if (this.__vaoCache) {\n            var vaoExt = renderer.getGLExtension('OES_vertex_array_object');\n            for (var id in this.__vaoCache) {\n                var vao = this.__vaoCache[id].vao;\n                if (vao) {\n                    vaoExt.deleteVertexArrayOES(vao);\n                }\n            }\n        }\n        this.__vaoCache = {};\n        cache.deleteContext(renderer.__uid__);\n    }\n\n});\n\nif (Object.defineProperty) {\n    /**\n     * @name clay.GeometryBase#vertexCount\n     * @type {number}\n     * @readOnly\n     */\n    Object.defineProperty(GeometryBase.prototype, 'vertexCount', {\n\n        enumerable: false,\n\n        get: function () {\n\n            var mainAttribute = this.attributes[this.mainAttribute];\n\n            if (!mainAttribute) {\n                mainAttribute = this.attributes[this._attributeList[0]];\n            }\n\n            if (!mainAttribute || !mainAttribute.value) {\n                return 0;\n            }\n            return mainAttribute.value.length / mainAttribute.size;\n        }\n    });\n    /**\n     * @name clay.GeometryBase#triangleCount\n     * @type {number}\n     * @readOnly\n     */\n    Object.defineProperty(GeometryBase.prototype, 'triangleCount', {\n\n        enumerable: false,\n\n        get: function () {\n            var indices = this.indices;\n            if (!indices) {\n                return 0;\n            }\n            else {\n                return indices.length / 3;\n            }\n        }\n    });\n}\n\nGeometryBase.STATIC_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].STATIC_DRAW;\nGeometryBase.DYNAMIC_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DYNAMIC_DRAW;\nGeometryBase.STREAM_DRAW = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].STREAM_DRAW;\n\nGeometryBase.AttributeBuffer = AttributeBuffer;\nGeometryBase.IndicesBuffer = IndicesBuffer;\n\nGeometryBase.Attribute = Attribute;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GeometryBase);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNzkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0dlb21ldHJ5QmFzZS5qcz9hNzQ4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4vY29yZS9CYXNlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgQ2FjaGUgZnJvbSAnLi9jb3JlL0NhY2hlJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5cbmZ1bmN0aW9uIGdldEFycmF5Q3RvckJ5VHlwZSAodHlwZSkge1xuICAgIHJldHVybiAoe1xuICAgICAgICAnYnl0ZSc6IHZlbmRvci5JbnQ4QXJyYXksXG4gICAgICAgICd1Ynl0ZSc6IHZlbmRvci5VaW50OEFycmF5LFxuICAgICAgICAnc2hvcnQnOiB2ZW5kb3IuSW50MTZBcnJheSxcbiAgICAgICAgJ3VzaG9ydCc6IHZlbmRvci5VaW50MTZBcnJheVxuICAgIH0pW3R5cGVdIHx8IHZlbmRvci5GbG9hdDMyQXJyYXk7XG59XG5cbmZ1bmN0aW9uIG1ha2VBdHRyS2V5KGF0dHJOYW1lKSB7XG4gICAgcmV0dXJuICdhdHRyXycgKyBhdHRyTmFtZTtcbn1cbi8qKlxuICogR2VvbWV0cnlCYXNlIGF0dHJpYnV0ZVxuICogQGFsaWFzIGNsYXkuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIEF0dHJpYnV0ZShuYW1lLCB0eXBlLCBzaXplLCBzZW1hbnRpYykge1xuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIC8qKlxuICAgICAqIEF0dHJpYnV0ZSB0eXBlXG4gICAgICogUG9zc2libGUgdmFsdWVzOlxuICAgICAqICArIGAnYnl0ZSdgXG4gICAgICogICsgYCd1Ynl0ZSdgXG4gICAgICogICsgYCdzaG9ydCdgXG4gICAgICogICsgYCd1c2hvcnQnYFxuICAgICAqICArIGAnZmxvYXQnYCBNb3N0IGNvbW1vbmx5IHVzZWQuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIC8qKlxuICAgICAqIFNpemUgb2YgYXR0cmlidXRlIGNvbXBvbmVudC4gMSAtIDQuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIC8qKlxuICAgICAqIFNlbWFudGljIG9mIHRoaXMgYXR0cmlidXRlLlxuICAgICAqIFBvc3NpYmxlIHZhbHVlczpcbiAgICAgKiAgKyBgJ1BPU0lUSU9OJ2BcbiAgICAgKiAgKyBgJ05PUk1BTCdgXG4gICAgICogICsgYCdCSU5PUk1BTCdgXG4gICAgICogICsgYCdUQU5HRU5UJ2BcbiAgICAgKiAgKyBgJ1RFWENPT1JEJ2BcbiAgICAgKiAgKyBgJ1RFWENPT1JEXzAnYFxuICAgICAqICArIGAnVEVYQ09PUkRfMSdgXG4gICAgICogICsgYCdDT0xPUidgXG4gICAgICogICsgYCdKT0lOVCdgXG4gICAgICogICsgYCdXRUlHSFQnYFxuICAgICAqXG4gICAgICogSW4gc2hhZGVyLCBhdHRyaWJ1dGUgd2l0aCBzYW1lIHNlbWFudGljIHdpbGwgYmUgYXV0b21hdGljYWxseSBtYXBwZWQuIEZvciBleGFtcGxlOlxuICAgICAqIGBgYGdsc2xcbiAgICAgKiBhdHRyaWJ1dGUgdmVjMyBwb3M6IFBPU0lUSU9OXG4gICAgICogYGBgXG4gICAgICogd2lsbCB1c2UgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB3aXRoIHNlbWFudGljIFBPU0lUSU9OIGluIGdlb21ldHJ5LCBubyBtYXR0ZXIgd2hhdCBuYW1lIGl0IHVzZWQuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0aGlzLnNlbWFudGljID0gc2VtYW50aWMgfHwgJyc7XG5cbiAgICAvKipcbiAgICAgKiBWYWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgICAqIEB0eXBlIHtUeXBlZEFycmF5fVxuICAgICAqL1xuICAgIHRoaXMudmFsdWUgPSBudWxsO1xuXG4gICAgLy8gSW5pdCBnZXR0ZXIgc2V0dGVyXG4gICAgc3dpdGNoIChzaXplKSB7XG4gICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGlkeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZhbHVlW2lkeF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoaWR4LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVbaWR4XSA9IHZhbHVlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIENvcHkgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0XG4gICAgICAgICAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZhbHVlW3RhcmdldF0gPSB0aGlzLnZhbHVlW3RhcmdldF07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGlkeCwgb3V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgb3V0WzBdID0gYXJyW2lkeCAqIDJdO1xuICAgICAgICAgICAgICAgIG91dFsxXSA9IGFycltpZHggKiAyICsgMV07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dDtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnNldCA9IGZ1bmN0aW9uIChpZHgsIHZhbCkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIGFycltpZHggKiAyXSA9IHZhbFswXTtcbiAgICAgICAgICAgICAgICBhcnJbaWR4ICogMiArIDFdID0gdmFsWzFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29weSA9IGZ1bmN0aW9uICh0YXJnZXQsIHNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHZhciBhcnIgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgIHNvdXJjZSAqPSAyO1xuICAgICAgICAgICAgICAgIHRhcmdldCAqPSAyO1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXRdID0gYXJyW3NvdXJjZV07XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldCArIDFdID0gYXJyW3NvdXJjZSArIDFdO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLmdldCA9IGZ1bmN0aW9uIChpZHgsIG91dCkge1xuICAgICAgICAgICAgICAgIHZhciBpZHgzID0gaWR4ICogMztcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBvdXRbMF0gPSBhcnJbaWR4M107XG4gICAgICAgICAgICAgICAgb3V0WzFdID0gYXJyW2lkeDMgKyAxXTtcbiAgICAgICAgICAgICAgICBvdXRbMl0gPSBhcnJbaWR4MyArIDJdO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5zZXQgPSBmdW5jdGlvbiAoaWR4LCB2YWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgaWR4MyA9IGlkeCAqIDM7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgYXJyW2lkeDNdID0gdmFsWzBdO1xuICAgICAgICAgICAgICAgIGFycltpZHgzICsgMV0gPSB2YWxbMV07XG4gICAgICAgICAgICAgICAgYXJyW2lkeDMgKyAyXSA9IHZhbFsyXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBzb3VyY2UgKj0gMztcbiAgICAgICAgICAgICAgICB0YXJnZXQgKj0gMztcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0XSA9IGFycltzb3VyY2VdO1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXQgKyAxXSA9IGFycltzb3VyY2UgKyAxXTtcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0ICsgMl0gPSBhcnJbc291cmNlICsgMl07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24gKGlkeCwgb3V0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIGlkeDQgPSBpZHggKiA0O1xuICAgICAgICAgICAgICAgIG91dFswXSA9IGFycltpZHg0XTtcbiAgICAgICAgICAgICAgICBvdXRbMV0gPSBhcnJbaWR4NCArIDFdO1xuICAgICAgICAgICAgICAgIG91dFsyXSA9IGFycltpZHg0ICsgMl07XG4gICAgICAgICAgICAgICAgb3V0WzNdID0gYXJyW2lkeDQgKyAzXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24gKGlkeCwgdmFsKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIGlkeDQgPSBpZHggKiA0O1xuICAgICAgICAgICAgICAgIGFycltpZHg0XSA9IHZhbFswXTtcbiAgICAgICAgICAgICAgICBhcnJbaWR4NCArIDFdID0gdmFsWzFdO1xuICAgICAgICAgICAgICAgIGFycltpZHg0ICsgMl0gPSB2YWxbMl07XG4gICAgICAgICAgICAgICAgYXJyW2lkeDQgKyAzXSA9IHZhbFszXTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmNvcHkgPSBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgICAgICBzb3VyY2UgKj0gNDtcbiAgICAgICAgICAgICAgICB0YXJnZXQgKj0gNDtcbiAgICAgICAgICAgICAgICAvLyBjb3B5V2l0aGluIGlzIGV4dHJlbWVseSBzbG93XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldF0gPSBhcnJbc291cmNlXTtcbiAgICAgICAgICAgICAgICBhcnJbdGFyZ2V0ICsgMV0gPSBhcnJbc291cmNlICsgMV07XG4gICAgICAgICAgICAgICAgYXJyW3RhcmdldCArIDJdID0gYXJyW3NvdXJjZSArIDJdO1xuICAgICAgICAgICAgICAgIGFyclt0YXJnZXQgKyAzXSA9IGFycltzb3VyY2UgKyAzXTtcbiAgICAgICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFNldCBpdGVtIHZhbHVlIGF0IGdpdmUgaW5kZXguIFNlY29uZCBwYXJhbWV0ZXIgdmFsIGlzIG51bWJlciBpZiBzaXplIGlzIDFcbiAqIEBmdW5jdGlvblxuICogQG5hbWUgY2xheS5HZW9tZXRyeUJhc2UuQXR0cmlidXRlI3NldFxuICogQHBhcmFtIHtudW1iZXJ9IGlkeFxuICogQHBhcmFtIHtudW1iZXJbXXxudW1iZXJ9IHZhbFxuICogQGV4YW1wbGVcbiAqIGdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKS5zZXQoMCwgWzEsIDEsIDFdKTtcbiAqL1xuXG4vKipcbiAqIEdldCBpdGVtIHZhbHVlIGF0IGdpdmUgaW5kZXguIFNlY29uZCBwYXJhbWV0ZXIgb3V0IGlzIG5vIG5lZWQgaWYgc2l6ZSBpcyAxXG4gKiBAZnVuY3Rpb25cbiAqIEBuYW1lIGNsYXkuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZSNzZXRcbiAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAqIEBwYXJhbSB7bnVtYmVyW119IFtvdXRdXG4gKiBAZXhhbXBsZVxuICogZ2VvbWV0cnkuZ2V0QXR0cmlidXRlKCdwb3NpdGlvbicpLmdldCgwLCBvdXQpO1xuICovXG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhdHRyaWJ1dGUgd2l0aCBnaXZlbiB2ZXJ0ZXggY291bnRcbiAqIEBwYXJhbSB7bnVtYmVyfSBuVmVydGV4XG4gKi9cbkF0dHJpYnV0ZS5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uIChuVmVydGV4KSB7XG4gICAgaWYgKCF0aGlzLnZhbHVlIHx8IHRoaXMudmFsdWUubGVuZ3RoICE9PSBuVmVydGV4ICogdGhpcy5zaXplKSB7XG4gICAgICAgIHZhciBBcnJheUNvbnN0cnVjdG9yID0gZ2V0QXJyYXlDdG9yQnlUeXBlKHRoaXMudHlwZSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBuZXcgQXJyYXlDb25zdHJ1Y3RvcihuVmVydGV4ICogdGhpcy5zaXplKTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEluaXRpYWxpemUgYXR0cmlidXRlIHdpdGggZ2l2ZW4gYXJyYXkuIFdoaWNoIGNhbiBiZSAxIGRpbWVuc2lvbmFsIG9yIDIgZGltZW5zaW9uYWxcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gKiBAZXhhbXBsZVxuICogIGdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKS5mcm9tQXJyYXkoXG4gKiAgICAgIFstMSwgMCwgMCwgMSwgMCwgMCwgMCwgMSwgMF1cbiAqICApO1xuICogIGdlb21ldHJ5LmdldEF0dHJpYnV0ZSgncG9zaXRpb24nKS5mcm9tQXJyYXkoXG4gKiAgICAgIFsgWy0xLCAwLCAwXSwgWzEsIDAsIDBdLCBbMCwgMSwgMF0gXVxuICogICk7XG4gKi9cbkF0dHJpYnV0ZS5wcm90b3R5cGUuZnJvbUFycmF5ID0gZnVuY3Rpb24gKGFycmF5KSB7XG4gICAgdmFyIEFycmF5Q29uc3RydWN0b3IgPSBnZXRBcnJheUN0b3JCeVR5cGUodGhpcy50eXBlKTtcbiAgICB2YXIgdmFsdWU7XG4gICAgLy8gQ29udmVydCAyZCBhcnJheSB0byBmbGF0XG4gICAgaWYgKGFycmF5WzBdICYmIChhcnJheVswXS5sZW5ndGgpKSB7XG4gICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7XG4gICAgICAgIHZhbHVlID0gbmV3IEFycmF5Q29uc3RydWN0b3IoYXJyYXkubGVuZ3RoICogc2l6ZSk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2l6ZTsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVbbisrXSA9IGFycmF5W2ldW2pdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB2YWx1ZSA9IG5ldyBBcnJheUNvbnN0cnVjdG9yKGFycmF5KTtcbiAgICB9XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xufTtcblxuQXR0cmlidXRlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKGNvcHlWYWx1ZSkge1xuICAgIHZhciByZXQgPSBuZXcgQXR0cmlidXRlKHRoaXMubmFtZSwgdGhpcy50eXBlLCB0aGlzLnNpemUsIHRoaXMuc2VtYW50aWMpO1xuICAgIC8vIEZJWE1FXG4gICAgaWYgKGNvcHlWYWx1ZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3RvZG8nKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbmZ1bmN0aW9uIEF0dHJpYnV0ZUJ1ZmZlcihuYW1lLCB0eXBlLCBidWZmZXIsIHNpemUsIHNlbWFudGljKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnR5cGUgPSB0eXBlO1xuICAgIHRoaXMuYnVmZmVyID0gYnVmZmVyO1xuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgdGhpcy5zZW1hbnRpYyA9IHNlbWFudGljO1xuXG4gICAgLy8gVG8gYmUgc2V0IGluIG1lc2hcbiAgICAvLyBzeW1ib2wgaW4gdGhlIHNoYWRlclxuICAgIHRoaXMuc3ltYm9sID0gJyc7XG5cbiAgICAvLyBOZWVkcyByZW1vdmUgZmxhZ1xuICAgIHRoaXMubmVlZHNSZW1vdmUgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gSW5kaWNlc0J1ZmZlcihidWZmZXIpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLmNvdW50ID0gMDtcbn1cblxuLyoqXG4gKiBCYXNlIG9mIGFsbCBnZW9tZXRyeS4gVXNlIHtAbGluayBjbGF5Lkdlb21ldHJ5fSBmb3IgY29tbW9uIDNEIHVzYWdlLlxuICogQGNvbnN0cnVjdG9yIGNsYXkuR2VvbWV0cnlCYXNlXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgR2VvbWV0cnlCYXNlID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuR2VvbWV0cnlCYXNlIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBdHRyaWJ1dGVzIG9mIGdlb21ldHJ5LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0LjxzdHJpbmcsIGNsYXkuR2VvbWV0cnlCYXNlLkF0dHJpYnV0ZT59XG4gICAgICAgICAqL1xuICAgICAgICBhdHRyaWJ1dGVzOiB7fSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5kaWNlcyBvZiBnZW9tZXRyeS5cbiAgICAgICAgICogQHR5cGUge1VpbnQxNkFycmF5fFVpbnQzMkFycmF5fVxuICAgICAgICAgKi9cbiAgICAgICAgaW5kaWNlczogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSXMgdmVydGljZXMgZGF0YSBkeW5hbWljYWxseSB1cGRhdGVkLlxuICAgICAgICAgKiBBdHRyaWJ1dGVzIHZhbHVlIGNhbid0IGJlIGNoYW5nZWQgYWZ0ZXIgZmlyc3QgcmVuZGVyIGlmIGR5YW5taWMgaXMgZmFsc2UuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZHluYW1pYzogdHJ1ZSxcblxuICAgICAgICBfZW5hYmxlZEF0dHJpYnV0ZXM6IG51bGwsXG5cbiAgICAgICAgLy8gUEVORElOR1xuICAgICAgICAvLyBJbml0IGl0IGhlcmUgdG8gYXZvaWQgZGVvcHRpbWl6YXRpb24gd2hlbiBpdCdzIGFzc2lnbmVkIGluIGFwcGxpY2F0aW9uIGR5bmFtaWNhbGx5XG4gICAgICAgIF9fdXNlZDogMFxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gVXNlIGNhY2hlXG4gICAgdGhpcy5fY2FjaGUgPSBuZXcgQ2FjaGUoKTtcblxuICAgIHRoaXMuX2F0dHJpYnV0ZUxpc3QgPSBPYmplY3Qua2V5cyh0aGlzLmF0dHJpYnV0ZXMpO1xuXG4gICAgdGhpcy5fX3Zhb0NhY2hlID0ge307XG59LFxuLyoqIEBsZW5kcyBjbGF5Lkdlb21ldHJ5QmFzZS5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBNYWluIGF0dHJpYnV0ZSB3aWxsIGJlIHVzZWQgdG8gY291bnQgdmVydGV4IG51bWJlclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgbWFpbkF0dHJpYnV0ZTogJycsXG4gICAgLyoqXG4gICAgICogVXNlciBkZWZpbmVkIHBpY2tpbmcgYWxnb3JpdGhtIGluc3RlYWQgb2YgZGVmYXVsdFxuICAgICAqIHRyaWFuZ2xlIHJheSBpbnRlcnNlY3Rpb25cbiAgICAgKiB4LCB5IGFyZSBOREMuXG4gICAgICogYGBgdHlwZXNjcmlwdFxuICAgICAqICh4LCB5LCByZW5kZXJlciwgY2FtZXJhLCByZW5kZXJhYmxlLCBvdXQpID0+IGJvb2xlYW5cbiAgICAgKiBgYGBcbiAgICAgKiBAdHlwZSB7P0Z1bmN0aW9ufVxuICAgICAqL1xuICAgIHBpY2s6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBVc2VyIGRlZmluZWQgcmF5IHBpY2tpbmcgYWxnb3JpdGhtIGluc3RlYWQgb2YgZGVmYXVsdFxuICAgICAqIHRyaWFuZ2xlIHJheSBpbnRlcnNlY3Rpb25cbiAgICAgKiBgYGB0eXBlc2NyaXB0XG4gICAgICogKHJheTogY2xheS5SYXksIHJlbmRlcmFibGU6IGNsYXkuUmVuZGVyYWJsZSwgb3V0OiBBcnJheSkgPT4gYm9vbGVhblxuICAgICAqIGBgYFxuICAgICAqIEB0eXBlIHs/RnVuY3Rpb259XG4gICAgICovXG4gICAgcGlja0J5UmF5OiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogTWFyayBhdHRyaWJ1dGVzIGFuZCBpbmRpY2VzIGluIGdlb21ldHJ5IG5lZWRzIHRvIHVwZGF0ZS5cbiAgICAgKiBVc3VhbGx5IGNhbGxlZCBhZnRlciB5b3UgY2hhbmdlIHRoZSBkYXRhIGluIGF0dHJpYnV0ZXMuXG4gICAgICovXG4gICAgZGlydHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGVuYWJsZWRBdHRyaWJ1dGVzID0gdGhpcy5nZXRFbmFibGVkQXR0cmlidXRlcygpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZWRBdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmRpcnR5QXR0cmlidXRlKGVuYWJsZWRBdHRyaWJ1dGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpcnR5SW5kaWNlcygpO1xuICAgICAgICB0aGlzLl9lbmFibGVkQXR0cmlidXRlcyA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5fY2FjaGUuZGlydHlBbGwoJ2FueScpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogTWFyayB0aGUgaW5kaWNlcyBuZWVkcyB0byB1cGRhdGUuXG4gICAgICovXG4gICAgZGlydHlJbmRpY2VzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlLmRpcnR5QWxsKCdpbmRpY2VzJyk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBNYXJrIHRoZSBhdHRyaWJ1dGVzIG5lZWRzIHRvIHVwZGF0ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW2F0dHJOYW1lXVxuICAgICAqL1xuICAgIGRpcnR5QXR0cmlidXRlOiBmdW5jdGlvbiAoYXR0ck5hbWUpIHtcbiAgICAgICAgdGhpcy5fY2FjaGUuZGlydHlBbGwobWFrZUF0dHJLZXkoYXR0ck5hbWUpKTtcbiAgICAgICAgdGhpcy5fY2FjaGUuZGlydHlBbGwoJ2F0dHJpYnV0ZXMnKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCBpbmRpY2VzIG9mIHRyaWFuZ2xlIGF0IGdpdmVuIGluZGV4LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpZHhcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBvdXRcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48bnVtYmVyPn1cbiAgICAgKi9cbiAgICBnZXRUcmlhbmdsZUluZGljZXM6IGZ1bmN0aW9uIChpZHgsIG91dCkge1xuICAgICAgICBpZiAoaWR4IDwgdGhpcy50cmlhbmdsZUNvdW50ICYmIGlkeCA+PSAwKSB7XG4gICAgICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgICAgIG91dCA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICAgICAgICBvdXRbMF0gPSBpbmRpY2VzW2lkeCAqIDNdO1xuICAgICAgICAgICAgb3V0WzFdID0gaW5kaWNlc1tpZHggKiAzICsgMV07XG4gICAgICAgICAgICBvdXRbMl0gPSBpbmRpY2VzW2lkeCAqIDMgKyAyXTtcbiAgICAgICAgICAgIHJldHVybiBvdXQ7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IGluZGljZXMgb2YgdHJpYW5nbGUgYXQgZ2l2ZW4gaW5kZXguXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGlkeFxuICAgICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGFyclxuICAgICAqL1xuICAgIHNldFRyaWFuZ2xlSW5kaWNlczogZnVuY3Rpb24gKGlkeCwgYXJyKSB7XG4gICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICBpbmRpY2VzW2lkeCAqIDNdID0gYXJyWzBdO1xuICAgICAgICBpbmRpY2VzW2lkeCAqIDMgKyAxXSA9IGFyclsxXTtcbiAgICAgICAgaW5kaWNlc1tpZHggKiAzICsgMl0gPSBhcnJbMl07XG4gICAgfSxcblxuICAgIGlzVXNlSW5kaWNlczogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmluZGljZXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEluaXRpYWxpemUgaW5kaWNlcyBmcm9tIGFuIGFycmF5LlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5XG4gICAgICovXG4gICAgaW5pdEluZGljZXNGcm9tQXJyYXk6IGZ1bmN0aW9uIChhcnJheSkge1xuICAgICAgICB2YXIgdmFsdWU7XG4gICAgICAgIHZhciBBcnJheUNvbnN0cnVjdG9yID0gdGhpcy52ZXJ0ZXhDb3VudCA+IDB4ZmZmZlxuICAgICAgICAgICAgPyB2ZW5kb3IuVWludDMyQXJyYXkgOiB2ZW5kb3IuVWludDE2QXJyYXk7XG4gICAgICAgIC8vIENvbnZlcnQgMmQgYXJyYXkgdG8gZmxhdFxuICAgICAgICBpZiAoYXJyYXlbMF0gJiYgKGFycmF5WzBdLmxlbmd0aCkpIHtcbiAgICAgICAgICAgIHZhciBuID0gMDtcbiAgICAgICAgICAgIHZhciBzaXplID0gMztcblxuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQXJyYXlDb25zdHJ1Y3RvcihhcnJheS5sZW5ndGggKiBzaXplKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZVtuKytdID0gYXJyYXlbaV1bal07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgPSBuZXcgQXJyYXlDb25zdHJ1Y3RvcihhcnJheSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmluZGljZXMgPSB2YWx1ZTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhIG5ldyBhdHRyaWJ1dGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHNpemVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3NlbWFudGljXVxuICAgICAqL1xuICAgIGNyZWF0ZUF0dHJpYnV0ZTogZnVuY3Rpb24gKG5hbWUsIHR5cGUsIHNpemUsIHNlbWFudGljKSB7XG4gICAgICAgIHZhciBhdHRyaWIgPSBuZXcgQXR0cmlidXRlKG5hbWUsIHR5cGUsIHNpemUsIHNlbWFudGljKTtcbiAgICAgICAgaWYgKHRoaXMuYXR0cmlidXRlc1tuYW1lXSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzW25hbWVdID0gYXR0cmliO1xuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVMaXN0LnB1c2gobmFtZSk7XG4gICAgICAgIHJldHVybiBhdHRyaWI7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYXR0cmlidXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKi9cbiAgICByZW1vdmVBdHRyaWJ1dGU6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVMaXN0ID0gdGhpcy5fYXR0cmlidXRlTGlzdDtcbiAgICAgICAgdmFyIGlkeCA9IGF0dHJpYnV0ZUxpc3QuaW5kZXhPZihuYW1lKTtcbiAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVMaXN0LnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGF0dHJpYnV0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICogQHJldHVybiB7Y2xheS5HZW9tZXRyeUJhc2UuQXR0cmlidXRlfVxuICAgICAqL1xuICAgIGdldEF0dHJpYnV0ZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGVuYWJsZWQgYXR0cmlidXRlcyBuYW1lIGxpc3RcbiAgICAgKiBBdHRyaWJ1dGUgd2hpY2ggaGFzIHRoZSBzYW1lIHZlcnRleCBudW1iZXIgd2l0aCBwb3NpdGlvbiBpcyB0cmVhdGVkIGFzIGEgZW5hYmxlZCBhdHRyaWJ1dGVcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmdbXX1cbiAgICAgKi9cbiAgICBnZXRFbmFibGVkQXR0cmlidXRlczogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW5hYmxlZEF0dHJpYnV0ZXMgPSB0aGlzLl9lbmFibGVkQXR0cmlidXRlcztcbiAgICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSB0aGlzLl9hdHRyaWJ1dGVMaXN0O1xuICAgICAgICAvLyBDYWNoZVxuICAgICAgICBpZiAoZW5hYmxlZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmFibGVkQXR0cmlidXRlcztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIG5WZXJ0ZXggPSB0aGlzLnZlcnRleENvdW50O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5hbWUgPSBhdHRyaWJ1dGVMaXN0W2ldO1xuICAgICAgICAgICAgdmFyIGF0dHJpYiA9IHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgICAgIGlmIChhdHRyaWIudmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cmliLnZhbHVlLmxlbmd0aCA9PT0gblZlcnRleCAqIGF0dHJpYi5zaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2VuYWJsZWRBdHRyaWJ1dGVzID0gcmVzdWx0O1xuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSxcblxuICAgIGdldEJ1ZmZlckNodW5rczogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICBjYWNoZS51c2UocmVuZGVyZXIuX191aWRfXyk7XG4gICAgICAgIHZhciBpc0F0dHJpYnV0ZXNEaXJ0eSA9IGNhY2hlLmlzRGlydHkoJ2F0dHJpYnV0ZXMnKTtcbiAgICAgICAgdmFyIGlzSW5kaWNlc0RpcnR5ID0gY2FjaGUuaXNEaXJ0eSgnaW5kaWNlcycpO1xuICAgICAgICBpZiAoaXNBdHRyaWJ1dGVzRGlydHkgfHwgaXNJbmRpY2VzRGlydHkpIHtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUJ1ZmZlcihyZW5kZXJlci5nbCwgaXNBdHRyaWJ1dGVzRGlydHksIGlzSW5kaWNlc0RpcnR5KTtcbiAgICAgICAgICAgIHZhciBlbmFibGVkQXR0cmlidXRlcyA9IHRoaXMuZ2V0RW5hYmxlZEF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZW5hYmxlZEF0dHJpYnV0ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjYWNoZS5mcmVzaChtYWtlQXR0cktleShlbmFibGVkQXR0cmlidXRlc1tpXSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FjaGUuZnJlc2goJ2F0dHJpYnV0ZXMnKTtcbiAgICAgICAgICAgIGNhY2hlLmZyZXNoKCdpbmRpY2VzJyk7XG4gICAgICAgIH1cbiAgICAgICAgY2FjaGUuZnJlc2goJ2FueScpO1xuICAgICAgICByZXR1cm4gY2FjaGUuZ2V0KCdjaHVua3MnKTtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZUJ1ZmZlcjogZnVuY3Rpb24gKF9nbCwgaXNBdHRyaWJ1dGVzRGlydHksIGlzSW5kaWNlc0RpcnR5KSB7XG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuICAgICAgICB2YXIgY2h1bmtzID0gY2FjaGUuZ2V0KCdjaHVua3MnKTtcbiAgICAgICAgdmFyIGZpcnN0VXBkYXRlID0gZmFsc2U7XG4gICAgICAgIGlmICghY2h1bmtzKSB7XG4gICAgICAgICAgICBjaHVua3MgPSBbXTtcbiAgICAgICAgICAgIC8vIEludGlhbGl6ZVxuICAgICAgICAgICAgY2h1bmtzWzBdID0ge1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUJ1ZmZlcnM6IFtdLFxuICAgICAgICAgICAgICAgIGluZGljZXNCdWZmZXI6IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjYWNoZS5wdXQoJ2NodW5rcycsIGNodW5rcyk7XG4gICAgICAgICAgICBmaXJzdFVwZGF0ZSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2h1bmsgPSBjaHVua3NbMF07XG4gICAgICAgIHZhciBhdHRyaWJ1dGVCdWZmZXJzID0gY2h1bmsuYXR0cmlidXRlQnVmZmVycztcbiAgICAgICAgdmFyIGluZGljZXNCdWZmZXIgPSBjaHVuay5pbmRpY2VzQnVmZmVyO1xuXG4gICAgICAgIGlmIChpc0F0dHJpYnV0ZXNEaXJ0eSB8fCBmaXJzdFVwZGF0ZSkge1xuICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZUxpc3QgPSB0aGlzLmdldEVuYWJsZWRBdHRyaWJ1dGVzKCk7XG5cbiAgICAgICAgICAgIHZhciBhdHRyaWJ1dGVCdWZmZXJNYXAgPSB7fTtcbiAgICAgICAgICAgIGlmICghZmlyc3RVcGRhdGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYnV0ZUJ1ZmZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlQnVmZmVyTWFwW2F0dHJpYnV0ZUJ1ZmZlcnNbaV0ubmFtZV0gPSBhdHRyaWJ1dGVCdWZmZXJzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEZJWE1FIElmIHNvbWUgYXR0cmlidXRlcyByZW1vdmVkXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IGF0dHJpYnV0ZUxpc3QubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZUxpc3Rba107XG4gICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlc1tuYW1lXTtcblxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJJbmZvO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFmaXJzdFVwZGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBidWZmZXJJbmZvID0gYXR0cmlidXRlQnVmZmVyTWFwW25hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyO1xuICAgICAgICAgICAgICAgIGlmIChidWZmZXJJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGJ1ZmZlckluZm8uYnVmZmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyID0gX2dsLmNyZWF0ZUJ1ZmZlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoY2FjaGUuaXNEaXJ0eShtYWtlQXR0cktleShuYW1lKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgd2hlbiB0aGV5IGFyZSBkaXJ0eS5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogVXNlIEJ1ZmZlclN1YkRhdGE/XG4gICAgICAgICAgICAgICAgICAgIF9nbC5iaW5kQnVmZmVyKF9nbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlcik7XG4gICAgICAgICAgICAgICAgICAgIF9nbC5idWZmZXJEYXRhKF9nbC5BUlJBWV9CVUZGRVIsIGF0dHJpYnV0ZS52YWx1ZSwgdGhpcy5keW5hbWljID8gX2dsLkRZTkFNSUNfRFJBVyA6IF9nbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlQnVmZmVyc1trXSA9IG5ldyBBdHRyaWJ1dGVCdWZmZXIobmFtZSwgYXR0cmlidXRlLnR5cGUsIGJ1ZmZlciwgYXR0cmlidXRlLnNpemUsIGF0dHJpYnV0ZS5zZW1hbnRpYyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZW1vdmUgdW51c2VkIGF0dHJpYnV0ZXMgYnVmZmVycy5cbiAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBrOyBpIDwgYXR0cmlidXRlQnVmZmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIF9nbC5kZWxldGVCdWZmZXIoYXR0cmlidXRlQnVmZmVyc1tpXS5idWZmZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlQnVmZmVycy5sZW5ndGggPSBrO1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5pc1VzZUluZGljZXMoKSAmJiAoaXNJbmRpY2VzRGlydHkgfHwgZmlyc3RVcGRhdGUpKSB7XG4gICAgICAgICAgICBpZiAoIWluZGljZXNCdWZmZXIpIHtcbiAgICAgICAgICAgICAgICBpbmRpY2VzQnVmZmVyID0gbmV3IEluZGljZXNCdWZmZXIoX2dsLmNyZWF0ZUJ1ZmZlcigpKTtcbiAgICAgICAgICAgICAgICBjaHVuay5pbmRpY2VzQnVmZmVyID0gaW5kaWNlc0J1ZmZlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGluZGljZXNCdWZmZXIuY291bnQgPSB0aGlzLmluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgX2dsLmJpbmRCdWZmZXIoX2dsLkVMRU1FTlRfQVJSQVlfQlVGRkVSLCBpbmRpY2VzQnVmZmVyLmJ1ZmZlcik7XG4gICAgICAgICAgICBfZ2wuYnVmZmVyRGF0YShfZ2wuRUxFTUVOVF9BUlJBWV9CVUZGRVIsIHRoaXMuaW5kaWNlcywgdGhpcy5keW5hbWljID8gX2dsLkRZTkFNSUNfRFJBVyA6IF9nbC5TVEFUSUNfRFJBVyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBnZW9tZXRyeSBkYXRhIGluIEdMIGNvbnRleHQuXG4gICAgICogQHBhcmFtIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuXG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuXG4gICAgICAgIGNhY2hlLnVzZShyZW5kZXJlci5fX3VpZF9fKTtcbiAgICAgICAgdmFyIGNodW5rcyA9IGNhY2hlLmdldCgnY2h1bmtzJyk7XG4gICAgICAgIGlmIChjaHVua3MpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgY2h1bmtzLmxlbmd0aDsgYysrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNodW5rID0gY2h1bmtzW2NdO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBjaHVuay5hdHRyaWJ1dGVCdWZmZXJzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJzID0gY2h1bmsuYXR0cmlidXRlQnVmZmVyc1trXTtcbiAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIuZ2wuZGVsZXRlQnVmZmVyKGF0dHJpYnMuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsuaW5kaWNlc0J1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJlci5nbC5kZWxldGVCdWZmZXIoY2h1bmsuaW5kaWNlc0J1ZmZlci5idWZmZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fX3Zhb0NhY2hlKSB7XG4gICAgICAgICAgICB2YXIgdmFvRXh0ID0gcmVuZGVyZXIuZ2V0R0xFeHRlbnNpb24oJ09FU192ZXJ0ZXhfYXJyYXlfb2JqZWN0Jyk7XG4gICAgICAgICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLl9fdmFvQ2FjaGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgdmFvID0gdGhpcy5fX3Zhb0NhY2hlW2lkXS52YW87XG4gICAgICAgICAgICAgICAgaWYgKHZhbykge1xuICAgICAgICAgICAgICAgICAgICB2YW9FeHQuZGVsZXRlVmVydGV4QXJyYXlPRVModmFvKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX3Zhb0NhY2hlID0ge307XG4gICAgICAgIGNhY2hlLmRlbGV0ZUNvbnRleHQocmVuZGVyZXIuX191aWRfXyk7XG4gICAgfVxuXG59KTtcblxuaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkge1xuICAgIC8qKlxuICAgICAqIEBuYW1lIGNsYXkuR2VvbWV0cnlCYXNlI3ZlcnRleENvdW50XG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKiBAcmVhZE9ubHlcbiAgICAgKi9cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VvbWV0cnlCYXNlLnByb3RvdHlwZSwgJ3ZlcnRleENvdW50Jywge1xuXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICB2YXIgbWFpbkF0dHJpYnV0ZSA9IHRoaXMuYXR0cmlidXRlc1t0aGlzLm1haW5BdHRyaWJ1dGVdO1xuXG4gICAgICAgICAgICBpZiAoIW1haW5BdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBtYWluQXR0cmlidXRlID0gdGhpcy5hdHRyaWJ1dGVzW3RoaXMuX2F0dHJpYnV0ZUxpc3RbMF1dO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW1haW5BdHRyaWJ1dGUgfHwgIW1haW5BdHRyaWJ1dGUudmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtYWluQXR0cmlidXRlLnZhbHVlLmxlbmd0aCAvIG1haW5BdHRyaWJ1dGUuc2l6ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIC8qKlxuICAgICAqIEBuYW1lIGNsYXkuR2VvbWV0cnlCYXNlI3RyaWFuZ2xlQ291bnRcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEByZWFkT25seVxuICAgICAqL1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShHZW9tZXRyeUJhc2UucHJvdG90eXBlLCAndHJpYW5nbGVDb3VudCcsIHtcblxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbmRpY2VzID0gdGhpcy5pbmRpY2VzO1xuICAgICAgICAgICAgaWYgKCFpbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5kaWNlcy5sZW5ndGggLyAzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbkdlb21ldHJ5QmFzZS5TVEFUSUNfRFJBVyA9IGdsZW51bS5TVEFUSUNfRFJBVztcbkdlb21ldHJ5QmFzZS5EWU5BTUlDX0RSQVcgPSBnbGVudW0uRFlOQU1JQ19EUkFXO1xuR2VvbWV0cnlCYXNlLlNUUkVBTV9EUkFXID0gZ2xlbnVtLlNUUkVBTV9EUkFXO1xuXG5HZW9tZXRyeUJhc2UuQXR0cmlidXRlQnVmZmVyID0gQXR0cmlidXRlQnVmZmVyO1xuR2VvbWV0cnlCYXNlLkluZGljZXNCdWZmZXIgPSBJbmRpY2VzQnVmZmVyO1xuXG5HZW9tZXRyeUJhc2UuQXR0cmlidXRlID0gQXR0cmlidXRlO1xuXG5leHBvcnQgZGVmYXVsdCBHZW9tZXRyeUJhc2U7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvR2VvbWV0cnlCYXNlLmpzXG4vLyBtb2R1bGUgaWQgPSA3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///79\n");

/***/ }),
/* 80 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n\n\n/**\n * @constructor clay.geometry.ParametricSurface\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {Object} [generator]\n * @param {Function} generator.x\n * @param {Function} generator.y\n * @param {Function} generator.z\n * @param {Array} [generator.u=[0, 1, 0.05]]\n * @param {Array} [generator.v=[0, 1, 0.05]]\n */\nvar ParametricSurface = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.ParametricSurface# */\n{\n    dynamic: false,\n    /**\n     * @type {Object}\n     */\n    generator: null\n\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.ParametricSurface.prototype */\n{\n    /**\n     * Build parametric surface geometry\n     */\n    build: function () {\n        var generator = this.generator;\n\n        if (!generator || !generator.x || !generator.y || !generator.z) {\n            throw new Error('Invalid generator');\n        }\n        var xFunc = generator.x;\n        var yFunc = generator.y;\n        var zFunc = generator.z;\n        var uRange = generator.u || [0, 1, 0.05];\n        var vRange = generator.v || [0, 1, 0.05];\n\n        var uNum = Math.floor((uRange[1] - uRange[0] + uRange[2]) / uRange[2]);\n        var vNum = Math.floor((vRange[1] - vRange[0] + vRange[2]) / vRange[2]);\n\n        if (!isFinite(uNum) || !isFinite(vNum)) {\n            throw new Error('Infinite generator');\n        }\n\n        var vertexNum = uNum * vNum;\n        this.attributes.position.init(vertexNum);\n        this.attributes.texcoord0.init(vertexNum);\n\n        var pos = [];\n        var texcoord = [];\n        var nVertex = 0;\n        for (var j = 0; j < vNum; j++) {\n            for (var i = 0; i < uNum; i++) {\n                var u = i * uRange[2] + uRange[0];\n                var v = j * vRange[2] + vRange[0];\n                pos[0] = xFunc(u, v);\n                pos[1] = yFunc(u, v);\n                pos[2] = zFunc(u, v);\n\n                texcoord[0] = i / (uNum - 1);\n                texcoord[1] = j / (vNum - 1);\n\n                this.attributes.position.set(nVertex, pos);\n                this.attributes.texcoord0.set(nVertex, texcoord);\n                nVertex++;\n            }\n        }\n\n        var IndicesCtor = vertexNum > 0xffff ? Uint32Array : Uint16Array;\n        var nIndices = (uNum - 1) * (vNum - 1) * 6;\n        var indices = this.indices = new IndicesCtor(nIndices);\n\n        var n = 0;\n        for (var j = 0; j < vNum - 1; j++) {\n            for (var i = 0; i < uNum - 1; i++) {\n                var i2 = j * uNum + i;\n                var i1 = (j * uNum + i + 1);\n                var i4 = (j + 1) * uNum + i + 1;\n                var i3 = (j + 1) * uNum + i;\n\n                indices[n++] = i1;\n                indices[n++] = i2;\n                indices[n++] = i4;\n\n                indices[n++] = i2;\n                indices[n++] = i3;\n                indices[n++] = i4;\n            }\n        }\n\n        this.generateVertexNormals();\n        this.updateBoundingBox();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ParametricSurface);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L1BhcmFtZXRyaWNTdXJmYWNlLmpzPzk4OGYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5nZW9tZXRyeS5QYXJhbWV0cmljU3VyZmFjZVxuICogQGV4dGVuZHMgY2xheS5HZW9tZXRyeVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRdXG4gKiBAcGFyYW0ge09iamVjdH0gW2dlbmVyYXRvcl1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdlbmVyYXRvci54XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZW5lcmF0b3IueVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2VuZXJhdG9yLnpcbiAqIEBwYXJhbSB7QXJyYXl9IFtnZW5lcmF0b3IudT1bMCwgMSwgMC4wNV1dXG4gKiBAcGFyYW0ge0FycmF5fSBbZ2VuZXJhdG9yLnY9WzAsIDEsIDAuMDVdXVxuICovXG52YXIgUGFyYW1ldHJpY1N1cmZhY2UgPSBHZW9tZXRyeS5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuUGFyYW1ldHJpY1N1cmZhY2UjICovXG57XG4gICAgZHluYW1pYzogZmFsc2UsXG4gICAgLyoqXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBnZW5lcmF0b3I6IG51bGxcblxufSwgZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5idWlsZCgpO1xufSxcbi8qKiBAbGVuZHMgY2xheS5nZW9tZXRyeS5QYXJhbWV0cmljU3VyZmFjZS5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBCdWlsZCBwYXJhbWV0cmljIHN1cmZhY2UgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBidWlsZDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZ2VuZXJhdG9yID0gdGhpcy5nZW5lcmF0b3I7XG5cbiAgICAgICAgaWYgKCFnZW5lcmF0b3IgfHwgIWdlbmVyYXRvci54IHx8ICFnZW5lcmF0b3IueSB8fCAhZ2VuZXJhdG9yLnopIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBnZW5lcmF0b3InKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgeEZ1bmMgPSBnZW5lcmF0b3IueDtcbiAgICAgICAgdmFyIHlGdW5jID0gZ2VuZXJhdG9yLnk7XG4gICAgICAgIHZhciB6RnVuYyA9IGdlbmVyYXRvci56O1xuICAgICAgICB2YXIgdVJhbmdlID0gZ2VuZXJhdG9yLnUgfHwgWzAsIDEsIDAuMDVdO1xuICAgICAgICB2YXIgdlJhbmdlID0gZ2VuZXJhdG9yLnYgfHwgWzAsIDEsIDAuMDVdO1xuXG4gICAgICAgIHZhciB1TnVtID0gTWF0aC5mbG9vcigodVJhbmdlWzFdIC0gdVJhbmdlWzBdICsgdVJhbmdlWzJdKSAvIHVSYW5nZVsyXSk7XG4gICAgICAgIHZhciB2TnVtID0gTWF0aC5mbG9vcigodlJhbmdlWzFdIC0gdlJhbmdlWzBdICsgdlJhbmdlWzJdKSAvIHZSYW5nZVsyXSk7XG5cbiAgICAgICAgaWYgKCFpc0Zpbml0ZSh1TnVtKSB8fCAhaXNGaW5pdGUodk51bSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5maW5pdGUgZ2VuZXJhdG9yJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdmVydGV4TnVtID0gdU51bSAqIHZOdW07XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5pbml0KHZlcnRleE51bSk7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy50ZXhjb29yZDAuaW5pdCh2ZXJ0ZXhOdW0pO1xuXG4gICAgICAgIHZhciBwb3MgPSBbXTtcbiAgICAgICAgdmFyIHRleGNvb3JkID0gW107XG4gICAgICAgIHZhciBuVmVydGV4ID0gMDtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB2TnVtOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdU51bTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHUgPSBpICogdVJhbmdlWzJdICsgdVJhbmdlWzBdO1xuICAgICAgICAgICAgICAgIHZhciB2ID0gaiAqIHZSYW5nZVsyXSArIHZSYW5nZVswXTtcbiAgICAgICAgICAgICAgICBwb3NbMF0gPSB4RnVuYyh1LCB2KTtcbiAgICAgICAgICAgICAgICBwb3NbMV0gPSB5RnVuYyh1LCB2KTtcbiAgICAgICAgICAgICAgICBwb3NbMl0gPSB6RnVuYyh1LCB2KTtcblxuICAgICAgICAgICAgICAgIHRleGNvb3JkWzBdID0gaSAvICh1TnVtIC0gMSk7XG4gICAgICAgICAgICAgICAgdGV4Y29vcmRbMV0gPSBqIC8gKHZOdW0gLSAxKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi5zZXQoblZlcnRleCwgcG9zKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF0dHJpYnV0ZXMudGV4Y29vcmQwLnNldChuVmVydGV4LCB0ZXhjb29yZCk7XG4gICAgICAgICAgICAgICAgblZlcnRleCsrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIEluZGljZXNDdG9yID0gdmVydGV4TnVtID4gMHhmZmZmID8gVWludDMyQXJyYXkgOiBVaW50MTZBcnJheTtcbiAgICAgICAgdmFyIG5JbmRpY2VzID0gKHVOdW0gLSAxKSAqICh2TnVtIC0gMSkgKiA2O1xuICAgICAgICB2YXIgaW5kaWNlcyA9IHRoaXMuaW5kaWNlcyA9IG5ldyBJbmRpY2VzQ3RvcihuSW5kaWNlcyk7XG5cbiAgICAgICAgdmFyIG4gPSAwO1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHZOdW0gLSAxOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdU51bSAtIDE7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBpMiA9IGogKiB1TnVtICsgaTtcbiAgICAgICAgICAgICAgICB2YXIgaTEgPSAoaiAqIHVOdW0gKyBpICsgMSk7XG4gICAgICAgICAgICAgICAgdmFyIGk0ID0gKGogKyAxKSAqIHVOdW0gKyBpICsgMTtcbiAgICAgICAgICAgICAgICB2YXIgaTMgPSAoaiArIDEpICogdU51bSArIGk7XG5cbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMTtcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpMjtcbiAgICAgICAgICAgICAgICBpbmRpY2VzW24rK10gPSBpNDtcblxuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGkyO1xuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGkzO1xuICAgICAgICAgICAgICAgIGluZGljZXNbbisrXSA9IGk0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5nZW5lcmF0ZVZlcnRleE5vcm1hbHMoKTtcbiAgICAgICAgdGhpcy51cGRhdGVCb3VuZGluZ0JveCgpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBQYXJhbWV0cmljU3VyZmFjZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nZW9tZXRyeS9QYXJhbWV0cmljU3VyZmFjZS5qc1xuLy8gbW9kdWxlIGlkID0gODBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///80\n");

/***/ }),
/* 81 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__ = __webpack_require__(82);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Skeleton__ = __webpack_require__(84);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__animation_TrackClip__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__animation_SamplerTrack__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__shader_builtin__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__Shader__ = __webpack_require__(6);\n/**\n * glTF Loader\n * Specification https://github.com/KhronosGroup/glTF/blob/master/specification/README.md\n *\n * TODO Morph targets\n */\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Import builtin shader\n\n\n\nvar semanticAttributeMap = {\n    'NORMAL': 'normal',\n    'POSITION': 'position',\n    'TEXCOORD_0': 'texcoord0',\n    'TEXCOORD_1': 'texcoord1',\n    'WEIGHTS_0': 'weight',\n    'JOINTS_0': 'joint',\n    'COLOR_0': 'color'\n};\n\nvar ARRAY_CTOR_MAP = {\n    5120: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int8Array,\n    5121: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array,\n    5122: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int16Array,\n    5123: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array,\n    5125: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array,\n    5126: __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array\n};\nvar SIZE_MAP = {\n    SCALAR: 1,\n    VEC2: 2,\n    VEC3: 3,\n    VEC4: 4,\n    MAT2: 4,\n    MAT3: 9,\n    MAT4: 16\n};\n\nfunction getAccessorData(json, lib, accessorIdx, isIndices) {\n    var accessorInfo = json.accessors[accessorIdx];\n\n    var buffer = lib.bufferViews[accessorInfo.bufferView];\n    var byteOffset = accessorInfo.byteOffset || 0;\n    var ArrayCtor = ARRAY_CTOR_MAP[accessorInfo.componentType] || __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array;\n\n    var size = SIZE_MAP[accessorInfo.type];\n    if (size == null && isIndices) {\n        size = 1;\n    }\n    var arr = new ArrayCtor(buffer, byteOffset, size * accessorInfo.count);\n\n    var quantizeExtension = accessorInfo.extensions && accessorInfo.extensions['WEB3D_quantized_attributes'];\n    if (quantizeExtension) {\n        var decodedArr = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array(size * accessorInfo.count);\n        var decodeMatrix = quantizeExtension.decodeMatrix;\n        var decodeOffset;\n        var decodeScale;\n        var decodeOffset = new Array(size);\n        var decodeScale = new Array(size);\n        for (var k = 0; k < size; k++) {\n            decodeOffset[k] = decodeMatrix[size * (size + 1) + k];\n            decodeScale[k] = decodeMatrix[k * (size + 1) + k];\n        }\n        for (var i = 0; i < accessorInfo.count; i++) {\n            for (var k = 0; k < size; k++) {\n                decodedArr[i * size + k] = arr[i * size + k] * decodeScale[k] + decodeOffset[k];\n            }\n        }\n\n        arr = decodedArr;\n    }\n    return arr;\n}\n\nfunction base64ToBinary(input, charStart) {\n    var chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n    var lookup = new Uint8Array(130);\n    for (var i = 0; i < chars.length; i++) {\n        lookup[chars.charCodeAt(i)] = i;\n    }\n    // Ignore\n    var len = input.length - charStart;\n    if (input.charAt(len - 1) === '=') { len--; }\n    if (input.charAt(len - 1) === '=') { len--; }\n\n    var uarray = new Uint8Array((len / 4) * 3);\n\n    for (var i = 0, j = charStart; i < uarray.length;) {\n        var c1 = lookup[input.charCodeAt(j++)];\n        var c2 = lookup[input.charCodeAt(j++)];\n        var c3 = lookup[input.charCodeAt(j++)];\n        var c4 = lookup[input.charCodeAt(j++)];\n\n        uarray[i++] = (c1 << 2) | (c2 >> 4);\n        uarray[i++] = ((c2 & 15) << 4) | (c3 >> 2);\n        uarray[i++] = ((c3 & 3) << 6) | c4;\n    }\n\n    return uarray.buffer;\n}\n\n\n/**\n * @typedef {Object} clay.loader.GLTF.Result\n * @property {Object} json\n * @property {clay.Scene} scene\n * @property {clay.Node} rootNode\n * @property {clay.Camera[]} cameras\n * @property {clay.Texture[]} textures\n * @property {clay.Material[]} materials\n * @property {clay.Skeleton[]} skeletons\n * @property {clay.Mesh[]} meshes\n * @property {clay.animation.TrackClip[]} clips\n * @property {clay.Node[]} nodes\n */\n\n/**\n * @constructor clay.loader.GLTF\n * @extends clay.core.Base\n */\nvar GLTFLoader = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.loader.GLTF# */ {\n    /**\n     *\n     * @type {clay.Node}\n     */\n    rootNode: null,\n    /**\n     * Root path for uri parsing.\n     * @type {string}\n     */\n    rootPath: null,\n\n    /**\n     * Root path for texture uri parsing. Defaultly use the rootPath\n     * @type {string}\n     */\n    textureRootPath: null,\n\n    /**\n     * Root path for buffer uri parsing. Defaultly use the rootPath\n     * @type {string}\n     */\n    bufferRootPath: null,\n\n    /**\n     * Shader used when creating the materials.\n     * @type {string|clay.Shader}\n     * @default 'clay.standard'\n     */\n    shader: 'clay.standard',\n\n    /**\n     * If use {@link clay.StandardMaterial}\n     * @type {string}\n     */\n    useStandardMaterial: false,\n\n    /**\n     * If loading the cameras.\n     * @type {boolean}\n     */\n    includeCamera: true,\n\n    /**\n     * If loading the animations.\n     * @type {boolean}\n     */\n    includeAnimation: true,\n    /**\n     * If loading the meshes\n     * @type {boolean}\n     */\n    includeMesh: true,\n    /**\n     * If loading the textures.\n     * @type {boolean}\n     */\n    includeTexture: true,\n\n    /**\n     * @type {string}\n     */\n    crossOrigin: '',\n    /**\n     * @type {boolean}\n     * @see https://github.com/KhronosGroup/glTF/issues/674\n     */\n    textureFlipY: false,\n\n    /**\n     * If convert texture to power-of-two\n     * @type {boolean}\n     */\n    textureConvertToPOT: false,\n\n    shaderLibrary: null\n},\nfunction () {\n    if (!this.shaderLibrary) {\n        this.shaderLibrary = __WEBPACK_IMPORTED_MODULE_10__shader_library__[\"a\" /* default */].createLibrary();\n    }\n},\n/** @lends clay.loader.GLTF.prototype */\n{\n    /**\n     * @param {string} url\n     */\n    load: function (url) {\n        var self = this;\n        var isBinary = url.endsWith('.glb');\n\n        if (this.rootPath == null) {\n            this.rootPath = url.slice(0, url.lastIndexOf('/'));\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: url,\n            onprogress: function (percent, loaded, total) {\n                self.trigger('progress', percent, loaded, total);\n            },\n            onerror: function (e) {\n                self.trigger('error', e);\n            },\n            responseType: isBinary ? 'arraybuffer' : 'text',\n            onload: function (data) {\n                if (isBinary) {\n                    self.parseBinary(data);\n                }\n                else {\n                    if (typeof data === 'string') {\n                        data = JSON.parse(data);\n                    }\n                    self.parse(data);\n                }\n            }\n        });\n    },\n\n    /**\n     * Parse glTF binary\n     * @param {ArrayBuffer} buffer\n     * @return {clay.loader.GLTF.Result}\n     */\n    parseBinary: function (buffer) {\n        var header = new Uint32Array(buffer, 0, 4);\n        if (header[0] !== 0x46546C67) {\n            this.trigger('error', 'Invalid glTF binary format: Invalid header');\n            return;\n        }\n        if (header[0] < 2) {\n            this.trigger('error', 'Only glTF2.0 is supported.');\n            return;\n        }\n\n        var dataView = new DataView(buffer, 12);\n\n        var json;\n        var buffers = [];\n        // Read chunks\n        for (var i = 0; i < dataView.byteLength;) {\n            var chunkLength = dataView.getUint32(i, true);\n            i += 4;\n            var chunkType = dataView.getUint32(i, true);\n            i += 4;\n\n            // json\n            if (chunkType === 0x4E4F534A) {\n                var arr = new Uint8Array(buffer, i + 12, chunkLength);\n                // TODO, for the browser not support TextDecoder.\n                var decoder = new TextDecoder();\n                var str = decoder.decode(arr);\n                try {\n                    json = JSON.parse(str);\n                }\n                catch (e) {\n                    this.trigger('error', 'JSON Parse error:' + e.toString());\n                    return;\n                }\n            }\n            else if (chunkType === 0x004E4942) {\n                buffers.push(buffer.slice(i + 12, i + 12 + chunkLength));\n            }\n\n            i += chunkLength;\n        }\n        if (!json) {\n            this.trigger('error', 'Invalid glTF binary format: Can\\'t find JSON.');\n            return;\n        }\n\n        return this.parse(json, buffers);\n    },\n\n    /**\n     * @param {Object} json\n     * @param {ArrayBuffer[]} [buffer]\n     * @return {clay.loader.GLTF.Result}\n     */\n    parse: function (json, buffers) {\n        var self = this;\n\n        var lib = {\n            json: json,\n            buffers: [],\n            bufferViews: [],\n            materials: [],\n            textures: [],\n            meshes: [],\n            joints: [],\n            skeletons: [],\n            cameras: [],\n            nodes: [],\n            clips: []\n        };\n        // Mount on the root node if given\n        var rootNode = this.rootNode || new __WEBPACK_IMPORTED_MODULE_3__Scene__[\"a\" /* default */]();\n\n        var loading = 0;\n        function checkLoad() {\n            loading--;\n            if (loading === 0) {\n                afterLoadBuffer();\n            }\n        }\n        // If already load buffers\n        if (buffers) {\n            lib.buffers = buffers.slice();\n            afterLoadBuffer(true);\n        }\n        else {\n            // Load buffers\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.buffers, function (bufferInfo, idx) {\n                loading++;\n                var path = bufferInfo.uri;\n\n                self._loadBuffers(path, function (buffer) {\n                    lib.buffers[idx] = buffer;\n                    checkLoad();\n                }, checkLoad);\n            });\n        }\n\n        function getResult() {\n            return {\n                json: json,\n                scene: self.rootNode ? null : rootNode,\n                rootNode: self.rootNode ? rootNode : null,\n                cameras: lib.cameras,\n                textures: lib.textures,\n                materials: lib.materials,\n                skeletons: lib.skeletons,\n                meshes: lib.instancedMeshes,\n                clips: lib.clips,\n                nodes: lib.nodes\n            };\n        }\n\n        function afterLoadBuffer(immediately) {\n            // Buffer not load complete.\n            if (lib.buffers.length !== json.buffers.length) {\n                setTimeout(function () {\n                    self.trigger('error', 'Buffer not load complete.');\n                });\n                return;\n            }\n\n            json.bufferViews.forEach(function (bufferViewInfo, idx) {\n                // PENDING Performance\n                lib.bufferViews[idx] = lib.buffers[bufferViewInfo.buffer]\n                    .slice(bufferViewInfo.byteOffset || 0, (bufferViewInfo.byteOffset || 0) + (bufferViewInfo.byteLength || 0));\n            });\n            lib.buffers = null;\n            if (self.includeMesh) {\n                if (self.includeTexture) {\n                    self._parseTextures(json, lib);\n                }\n                self._parseMaterials(json, lib);\n                self._parseMeshes(json, lib);\n            }\n            self._parseNodes(json, lib);\n\n            // Only support one scene.\n            if (json.scenes) {\n                var sceneInfo = json.scenes[json.scene || 0]; // Default use the first scene.\n                if (sceneInfo) {\n                    for (var i = 0; i < sceneInfo.nodes.length; i++) {\n                        var node = lib.nodes[sceneInfo.nodes[i]];\n                        node.update();\n                        rootNode.add(node);\n                    }\n                }\n            }\n\n            if (self.includeMesh) {\n                self._parseSkins(json, lib);\n            }\n\n            if (self.includeAnimation) {\n                self._parseAnimations(json, lib);\n            }\n            if (immediately) {\n                setTimeout(function () {\n                    self.trigger('success', getResult());\n                });\n            }\n            else {\n                self.trigger('success', getResult());\n            }\n        }\n\n        return getResult();\n    },\n\n    /**\n     * Binary file path resolver. User can override it\n     * @param {string} path\n     */\n    resolveBufferPath: function (path) {\n        if (path && path.match(/^data:(.*?)base64,/)) {\n            return path;\n        }\n\n        var rootPath = this.bufferRootPath;\n        if (rootPath == null) {\n            rootPath = this.rootPath;\n        }\n        return __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].relative2absolute(path, rootPath);\n    },\n\n    /**\n     * Texture file path resolver. User can override it\n     * @param {string} path\n     */\n    resolveTexturePath: function (path) {\n        if (path && path.match(/^data:(.*?)base64,/)) {\n            return path;\n        }\n\n        var rootPath = this.textureRootPath;\n        if (rootPath == null) {\n            rootPath = this.rootPath;\n        }\n        return __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].relative2absolute(path, rootPath);\n    },\n\n    /**\n     * Buffer loader\n     * @param {string}\n     * @param {Function} onsuccess\n     * @param {Function} onerror\n     */\n    loadBuffer: function (path, onsuccess, onerror) {\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].request.get({\n            url: path,\n            responseType: 'arraybuffer',\n            onload: function (buffer) {\n                onsuccess && onsuccess(buffer);\n            },\n            onerror: function (buffer) {\n                onerror && onerror(buffer);\n            }\n        });\n    },\n\n    _getShader: function () {\n        if (typeof this.shader === 'string') {\n            return this.shaderLibrary.get(this.shader);\n        }\n        else if (this.shader instanceof __WEBPACK_IMPORTED_MODULE_21__Shader__[\"a\" /* default */]) {\n            return this.shader;\n        }\n    },\n\n    _loadBuffers: function (path, onsuccess, onerror) {\n        var base64Prefix = 'data:application/octet-stream;base64,';\n        var strStart = path.substr(0, base64Prefix.length);\n        if (strStart === base64Prefix) {\n            onsuccess(\n                base64ToBinary(path, base64Prefix.length)\n            );\n        }\n        else {\n            this.loadBuffer(\n                this.resolveBufferPath(path),\n                onsuccess,\n                onerror\n            );\n        }\n    },\n\n    // https://github.com/KhronosGroup/glTF/issues/100\n    // https://github.com/KhronosGroup/glTF/issues/193\n    _parseSkins: function (json, lib) {\n\n        // Create skeletons and joints\n        var haveInvBindMatrices = false;\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.skins, function (skinInfo, idx) {\n            var skeleton = new __WEBPACK_IMPORTED_MODULE_11__Skeleton__[\"a\" /* default */]({\n                name: skinInfo.name\n            });\n            for (var i = 0; i < skinInfo.joints.length; i++) {\n                var nodeIdx = skinInfo.joints[i];\n                var node = lib.nodes[nodeIdx];\n                var joint = new __WEBPACK_IMPORTED_MODULE_12__Joint__[\"a\" /* default */]({\n                    name: node.name,\n                    node: node,\n                    index: skeleton.joints.length\n                });\n                skeleton.joints.push(joint);\n            }\n            skeleton.relativeRootNode = lib.nodes[skinInfo.skeleton] || this.rootNode;\n            if (skinInfo.inverseBindMatrices) {\n                haveInvBindMatrices = true;\n                var IBMInfo = json.accessors[skinInfo.inverseBindMatrices];\n                var buffer = lib.bufferViews[IBMInfo.bufferView];\n\n                var offset = IBMInfo.byteOffset || 0;\n                var size = IBMInfo.count * 16;\n\n                var array = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Float32Array(buffer, offset, size);\n\n                skeleton.setJointMatricesArray(array);\n            }\n            else {\n                skeleton.updateJointMatrices();\n            }\n            lib.skeletons[idx] = skeleton;\n        }, this);\n\n        function enableSkinningForMesh(mesh, skeleton, jointIndices) {\n            mesh.skeleton = skeleton;\n            mesh.joints = jointIndices;\n\n            if (!skeleton.boundingBox) {\n                skeleton.updateJointsBoundingBoxes(mesh.geometry);\n            }\n        }\n\n        function getJointIndex(joint) {\n            return joint.index;\n        }\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, nodeIdx) {\n            if (nodeInfo.skin != null) {\n                var skinIdx = nodeInfo.skin;\n                var skeleton = lib.skeletons[skinIdx];\n\n                var node = lib.nodes[nodeIdx];\n                var jointIndices = skeleton.joints.map(getJointIndex);\n                if (node instanceof __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]) {\n                    enableSkinningForMesh(node, skeleton, jointIndices);\n                }\n                else {\n                    // Mesh have multiple primitives\n                    var children = node.children();\n                    for (var i = 0; i < children.length; i++) {\n                        enableSkinningForMesh(children[i], skeleton, jointIndices);\n                    }\n                }\n            }\n        }, this);\n    },\n\n    _parseTextures: function (json, lib) {\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.textures, function (textureInfo, idx){\n            // samplers is optional\n            var samplerInfo = (json.samplers && json.samplers[textureInfo.sampler]) || {};\n            var parameters = {};\n            ['wrapS', 'wrapT', 'magFilter', 'minFilter'].forEach(function (name) {\n                var value = samplerInfo[name];\n                if (value != null) {\n                    parameters[name] = value;\n                }\n            });\n            __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].defaults(parameters, {\n                wrapS: __WEBPACK_IMPORTED_MODULE_8__Texture__[\"a\" /* default */].REPEAT,\n                wrapT: __WEBPACK_IMPORTED_MODULE_8__Texture__[\"a\" /* default */].REPEAT,\n                flipY: this.textureFlipY,\n                convertToPOT: this.textureConvertToPOT\n            });\n\n            var target = textureInfo.target || __WEBPACK_IMPORTED_MODULE_15__core_glenum__[\"a\" /* default */].TEXTURE_2D;\n            var format = textureInfo.format;\n            if (format != null) {\n                parameters.format = format;\n            }\n\n            if (target === __WEBPACK_IMPORTED_MODULE_15__core_glenum__[\"a\" /* default */].TEXTURE_2D) {\n                var texture = new __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */](parameters);\n                var imageInfo = json.images[textureInfo.source];\n                var uri;\n                if (imageInfo.uri) {\n                    uri = this.resolveTexturePath(imageInfo.uri);\n                }\n                else if (imageInfo.bufferView != null) {\n                    uri = URL.createObjectURL(new Blob([lib.bufferViews[imageInfo.bufferView]], {\n                        type: imageInfo.mimeType\n                    }));\n                }\n                if (uri) {\n                    texture.load(uri, this.crossOrigin);\n                    lib.textures[idx] = texture;\n                }\n            }\n        }, this);\n    },\n\n    _KHRCommonMaterialToStandard: function (materialInfo, lib) {\n        var uniforms = {};\n        var commonMaterialInfo = materialInfo.extensions['KHR_materials_common'];\n        uniforms = commonMaterialInfo.values || {};\n\n        if (typeof uniforms.diffuse === 'number') {\n            uniforms.diffuse = lib.textures[uniforms.diffuse] || null;\n        }\n        if (typeof uniforms.emission === 'number') {\n            uniforms.emission = lib.textures[uniforms.emission] || null;\n        }\n\n        var enabledTextures = [];\n        if (uniforms['diffuse'] instanceof __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */]) {\n            enabledTextures.push('diffuseMap');\n        }\n        if (materialInfo.normalTexture) {\n            enabledTextures.push('normalMap');\n        }\n        if (uniforms['emission'] instanceof __WEBPACK_IMPORTED_MODULE_9__Texture2D__[\"a\" /* default */]) {\n            enabledTextures.push('emissiveMap');\n        }\n        var material;\n        var isStandardMaterial = this.useStandardMaterial;\n        if (isStandardMaterial) {\n            material = new __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */]({\n                name: materialInfo.name,\n                doubleSided: materialInfo.doubleSided\n            });\n        }\n        else {\n            material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                name: materialInfo.name,\n                shader: this._getShader()\n            });\n\n            material.define('fragment', 'USE_ROUGHNESS');\n            material.define('fragment', 'USE_METALNESS');\n\n            if (materialInfo.doubleSided) {\n                material.define('fragment', 'DOUBLE_SIDED');\n            }\n        }\n\n        if (uniforms.transparent) {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        var diffuseProp = uniforms['diffuse'];\n        if (diffuseProp) {\n            // Color\n            if (Array.isArray(diffuseProp)) {\n                diffuseProp = diffuseProp.slice(0, 3);\n                isStandardMaterial ? (material.color = diffuseProp)\n                    : material.set('color', diffuseProp);\n            }\n            else { // Texture\n                isStandardMaterial ? (material.diffuseMap = diffuseProp)\n                    : material.set('diffuseMap', diffuseProp);\n            }\n        }\n        var emissionProp = uniforms['emission'];\n        if (emissionProp != null) {\n            // Color\n            if (Array.isArray(emissionProp)) {\n                emissionProp = emissionProp.slice(0, 3);\n                isStandardMaterial ? (material.emission = emissionProp)\n                    : material.set('emission', emissionProp);\n            }\n            else { // Texture\n                isStandardMaterial ? (material.emissiveMap = emissionProp)\n                    : material.set('emissiveMap', emissionProp);\n            }\n        }\n        if (materialInfo.normalTexture != null) {\n            // TODO texCoord\n            var normalTextureIndex = materialInfo.normalTexture.index;\n            if (isStandardMaterial) {\n                material.normalMap = lib.textures[normalTextureIndex] || null;\n            }\n            else {\n                material.set('normalMap', lib.textures[normalTextureIndex] || null);\n            }\n        }\n        if (uniforms['shininess'] != null) {\n            var glossiness = Math.log(uniforms['shininess']) / Math.log(8192);\n            // Uniform glossiness\n            material.set('glossiness', glossiness);\n            material.set('roughness', 1 - glossiness);\n        }\n        else {\n            material.set('glossiness', 0.3);\n            material.set('roughness', 0.3);\n        }\n        if (uniforms['specular'] != null) {\n            material.set('specularColor', uniforms['specular'].slice(0, 3));\n        }\n        if (uniforms['transparency'] != null) {\n            material.set('alpha', uniforms['transparency']);\n        }\n\n        return material;\n    },\n\n    _pbrMetallicRoughnessToStandard: function (materialInfo, metallicRoughnessMatInfo, lib) {\n        var alphaTest = materialInfo.alphaMode === 'MASK';\n\n        var isStandardMaterial = this.useStandardMaterial;\n        var material;\n        var diffuseMap, roughnessMap, metalnessMap, normalMap, emissiveMap, occlusionMap;\n        var enabledTextures = [];\n\n        /**\n         * The scalar multiplier applied to each normal vector of the normal texture.\n         *\n         * @type {number}\n         *\n         * XXX This value is ignored if `materialInfo.normalTexture` is not specified.\n         */\n        var normalScale = 1.0;\n\n        // TODO texCoord\n        if (metallicRoughnessMatInfo.baseColorTexture) {\n            diffuseMap = lib.textures[metallicRoughnessMatInfo.baseColorTexture.index] || null;\n            diffuseMap && enabledTextures.push('diffuseMap');\n        }\n        if (metallicRoughnessMatInfo.metallicRoughnessTexture) {\n            roughnessMap = metalnessMap = lib.textures[metallicRoughnessMatInfo.metallicRoughnessTexture.index] || null;\n            roughnessMap && enabledTextures.push('metalnessMap', 'roughnessMap');\n        }\n        if (materialInfo.normalTexture) {\n\n            normalMap = lib.textures[materialInfo.normalTexture.index] || null;\n            normalMap && enabledTextures.push('normalMap');\n\n            if (typeof materialInfo.normalTexture.scale === 'number') {\n                normalScale = materialInfo.normalTexture.scale;\n            }\n\n        }\n        if (materialInfo.emissiveTexture) {\n            emissiveMap = lib.textures[materialInfo.emissiveTexture.index] || null;\n            emissiveMap && enabledTextures.push('emissiveMap');\n        }\n        if (materialInfo.occlusionTexture) {\n            occlusionMap = lib.textures[materialInfo.occlusionTexture.index] || null;\n            occlusionMap && enabledTextures.push('occlusionMap');\n        }\n        var baseColor = metallicRoughnessMatInfo.baseColorFactor || [1, 1, 1, 1];\n\n        var commonProperties = {\n            diffuseMap: diffuseMap || null,\n            roughnessMap: roughnessMap || null,\n            metalnessMap: metalnessMap || null,\n            normalMap: normalMap || null,\n            occlusionMap: occlusionMap || null,\n            emissiveMap: emissiveMap || null,\n            color: baseColor.slice(0, 3),\n            alpha: baseColor[3],\n            metalness: metallicRoughnessMatInfo.metallicFactor || 0,\n            roughness: metallicRoughnessMatInfo.roughnessFactor || 0,\n            emission: materialInfo.emissiveFactor || [0, 0, 0],\n            emissionIntensity: 1,\n            alphaCutoff: materialInfo.alphaCutoff || 0,\n            normalScale: normalScale\n        };\n        if (commonProperties.roughnessMap) {\n            // In glTF metallicFactor will do multiply, which is different from StandardMaterial.\n            // So simply ignore it\n            commonProperties.metalness = 0.5;\n            commonProperties.roughness = 0.5;\n        }\n        if (isStandardMaterial) {\n            material = new __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].extend({\n                name: materialInfo.name,\n                alphaTest: alphaTest,\n                doubleSided: materialInfo.doubleSided,\n                // G channel\n                roughnessChannel: 1,\n                // B Channel\n                metalnessChannel: 2\n            }, commonProperties));\n        }\n        else {\n\n            material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                name: materialInfo.name,\n                shader: this._getShader()\n            });\n\n            material.define('fragment', 'USE_ROUGHNESS');\n            material.define('fragment', 'USE_METALNESS');\n            material.define('fragment', 'ROUGHNESS_CHANNEL', 1);\n            material.define('fragment', 'METALNESS_CHANNEL', 2);\n\n            material.define('fragment', 'DIFFUSEMAP_ALPHA_ALPHA');\n\n            if (alphaTest) {\n                material.define('fragment', 'ALPHA_TEST');\n            }\n            if (materialInfo.doubleSided) {\n                material.define('fragment', 'DOUBLE_SIDED');\n            }\n\n            material.set(commonProperties);\n        }\n\n        if (materialInfo.alphaMode === 'BLEND') {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        return material;\n    },\n\n    _pbrSpecularGlossinessToStandard: function (materialInfo, specularGlossinessMatInfo, lib) {\n        var alphaTest = materialInfo.alphaMode === 'MASK';\n\n        if (this.useStandardMaterial) {\n            console.error('StandardMaterial doesn\\'t support specular glossiness workflow yet');\n        }\n\n        var material;\n        var diffuseMap, glossinessMap, specularMap, normalMap, emissiveMap, occlusionMap;\n        var enabledTextures = [];\n        // TODO texCoord\n        if (specularGlossinessMatInfo.diffuseTexture) {\n            diffuseMap = lib.textures[specularGlossinessMatInfo.diffuseTexture.index] || null;\n            diffuseMap && enabledTextures.push('diffuseMap');\n        }\n        if (specularGlossinessMatInfo.specularGlossinessTexture) {\n            glossinessMap = specularMap = lib.textures[specularGlossinessMatInfo.specularGlossinessTexture.index] || null;\n            glossinessMap && enabledTextures.push('specularMap', 'glossinessMap');\n        }\n        if (materialInfo.normalTexture) {\n            normalMap = lib.textures[materialInfo.normalTexture.index] || null;\n            normalMap && enabledTextures.push('normalMap');\n        }\n        if (materialInfo.emissiveTexture) {\n            emissiveMap = lib.textures[materialInfo.emissiveTexture.index] || null;\n            emissiveMap && enabledTextures.push('emissiveMap');\n        }\n        if (materialInfo.occlusionTexture) {\n            occlusionMap = lib.textures[materialInfo.occlusionTexture.index] || null;\n            occlusionMap && enabledTextures.push('occlusionMap');\n        }\n        var diffuseColor = specularGlossinessMatInfo.diffuseFactor || [1, 1, 1, 1];\n\n        var commonProperties = {\n            diffuseMap: diffuseMap || null,\n            glossinessMap: glossinessMap || null,\n            specularMap: specularMap || null,\n            normalMap: normalMap || null,\n            emissiveMap: emissiveMap || null,\n            occlusionMap: occlusionMap || null,\n            color: diffuseColor.slice(0, 3),\n            alpha: diffuseColor[3],\n            specularColor: specularGlossinessMatInfo.specularFactor || [1, 1, 1],\n            glossiness: specularGlossinessMatInfo.glossinessFactor || 0,\n            emission: materialInfo.emissiveFactor || [0, 0, 0],\n            emissionIntensity: 1,\n            alphaCutoff: materialInfo.alphaCutoff == null ? 0.9 : materialInfo.alphaCutoff\n        };\n        if (commonProperties.glossinessMap) {\n            // Ignore specularFactor\n            commonProperties.glossiness = 0.5;\n        }\n        if (commonProperties.specularMap) {\n            // Ignore specularFactor\n            commonProperties.specularColor = [1, 1, 1];\n        }\n\n        material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n            name: materialInfo.name,\n            shader: this._getShader()\n        });\n\n        material.define('fragment', 'GLOSSINESS_CHANNEL', 3);\n        material.define('fragment', 'DIFFUSEMAP_ALPHA_ALPHA');\n\n        if (alphaTest) {\n            material.define('fragment', 'ALPHA_TEST');\n        }\n        if (materialInfo.doubleSided) {\n            material.define('fragment', 'DOUBLE_SIDED');\n        }\n\n        material.set(commonProperties);\n\n        if (materialInfo.alphaMode === 'BLEND') {\n            material.depthMask = false;\n            material.depthTest = true;\n            material.transparent = true;\n        }\n\n        return material;\n    },\n\n    _parseMaterials: function (json, lib) {\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.materials, function (materialInfo, idx) {\n            if (materialInfo.extensions && materialInfo.extensions['KHR_materials_common']) {\n                lib.materials[idx] = this._KHRCommonMaterialToStandard(materialInfo, lib);\n            }\n            else if (materialInfo.extensions && materialInfo.extensions['KHR_materials_pbrSpecularGlossiness']) {\n                lib.materials[idx] = this._pbrSpecularGlossinessToStandard(materialInfo, materialInfo.extensions['KHR_materials_pbrSpecularGlossiness'], lib);\n            }\n            else {\n                lib.materials[idx] = this._pbrMetallicRoughnessToStandard(materialInfo, materialInfo.pbrMetallicRoughness || {}, lib);\n            }\n        }, this);\n    },\n\n    _parseMeshes: function (json, lib) {\n        var self = this;\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.meshes, function (meshInfo, idx) {\n            lib.meshes[idx] = [];\n            // Geometry\n            for (var pp = 0; pp < meshInfo.primitives.length; pp++) {\n                var primitiveInfo = meshInfo.primitives[pp];\n                var geometry = new __WEBPACK_IMPORTED_MODULE_19__Geometry__[\"a\" /* default */]({\n                    dynamic: false,\n                    // PENDIGN\n                    name: meshInfo.name,\n                    boundingBox: new __WEBPACK_IMPORTED_MODULE_16__math_BoundingBox__[\"a\" /* default */]()\n                });\n                // Parse attributes\n                var semantics = Object.keys(primitiveInfo.attributes);\n                for (var ss = 0; ss < semantics.length; ss++) {\n                    var semantic = semantics[ss];\n                    var accessorIdx = primitiveInfo.attributes[semantic];\n                    var attributeInfo = json.accessors[accessorIdx];\n                    var attributeName = semanticAttributeMap[semantic];\n                    if (!attributeName) {\n                        continue;\n                    }\n                    var size = SIZE_MAP[attributeInfo.type];\n                    var attributeArray = getAccessorData(json, lib, accessorIdx);\n                    // WebGL attribute buffer not support uint32.\n                    // Direct use Float32Array may also have issue.\n                    if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array) {\n                        attributeArray = new Float32Array(attributeArray);\n                    }\n                    if (semantic === 'WEIGHTS_0' && size === 4) {\n                        // Weight data in QTEK has only 3 component, the last component can be evaluated since it is normalized\n                        var weightArray = new attributeArray.constructor(attributeInfo.count * 3);\n                        for (var i = 0; i < attributeInfo.count; i++) {\n                            var i4 = i * 4, i3 = i * 3;\n                            var w1 = attributeArray[i4], w2 = attributeArray[i4 + 1], w3 = attributeArray[i4 + 2], w4 = attributeArray[i4 + 3];\n                            var wSum = w1 + w2 + w3 + w4;\n                            weightArray[i3] = w1 / wSum;\n                            weightArray[i3 + 1] = w2 / wSum;\n                            weightArray[i3 + 2] = w3 / wSum;\n                        }\n                        geometry.attributes[attributeName].value = weightArray;\n                    }\n                    else if (semantic === 'COLOR_0' && size === 3) {\n                        var colorArray = new attributeArray.constructor(attributeInfo.count * 4);\n                        for (var i = 0; i < attributeInfo.count; i++) {\n                            var i4 = i * 4, i3 = i * 3;\n                            colorArray[i4] = attributeArray[i3];\n                            colorArray[i4 + 1] = attributeArray[i3 + 1];\n                            colorArray[i4 + 2] = attributeArray[i3 + 2];\n                            colorArray[i4 + 3] = 1;\n                        }\n                        geometry.attributes[attributeName].value = colorArray;\n                    }\n                    else {\n                        geometry.attributes[attributeName].value = attributeArray;\n                    }\n\n                    var attributeType = 'float';\n                    if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array) {\n                        attributeType = 'ushort';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int16Array) {\n                        attributeType = 'short';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array) {\n                        attributeType = 'ubyte';\n                    }\n                    else if (attributeArray instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Int8Array) {\n                        attributeType = 'byte';\n                    }\n                    geometry.attributes[attributeName].type = attributeType;\n\n                    if (semantic === 'POSITION') {\n                        // Bounding Box\n                        var min = attributeInfo.min;\n                        var max = attributeInfo.max;\n                        if (min) {\n                            geometry.boundingBox.min.set(min[0], min[1], min[2]);\n                        }\n                        if (max) {\n                            geometry.boundingBox.max.set(max[0], max[1], max[2]);\n                        }\n                    }\n                }\n\n                // Parse indices\n                if (primitiveInfo.indices != null) {\n                    geometry.indices = getAccessorData(json, lib, primitiveInfo.indices, true);\n                    if (geometry.vertexCount <= 0xffff && geometry.indices instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint32Array) {\n                        geometry.indices = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array(geometry.indices);\n                    }\n                    if(geometry.indices instanceof __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint8Array) {\n                        geometry.indices = new __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].Uint16Array(geometry.indices);\n                    }\n                }\n\n                var material = lib.materials[primitiveInfo.material];\n                var materialInfo = (json.materials || [])[primitiveInfo.material];\n                // Use default material\n                if (!material) {\n                    material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                        shader: self._getShader()\n                    });\n                }\n                var mesh = new __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]({\n                    geometry: geometry,\n                    material: material,\n                    mode: [__WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].POINTS, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINES, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINE_LOOP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].LINE_STRIP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLES, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLE_STRIP, __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLE_FAN][primitiveInfo.mode] || __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */].TRIANGLES,\n                    ignoreGBuffer: material.transparent\n                });\n                if (materialInfo != null) {\n                    mesh.culling = !materialInfo.doubleSided;\n                }\n                if (!mesh.geometry.attributes.normal.value) {\n                    mesh.geometry.generateVertexNormals();\n                }\n                if (((material instanceof __WEBPACK_IMPORTED_MODULE_5__StandardMaterial__[\"a\" /* default */]) && material.normalMap)\n                    || (material.isTextureEnabled('normalMap'))\n                ) {\n                    if (!mesh.geometry.attributes.tangent.value) {\n                        mesh.geometry.generateTangents();\n                    }\n                }\n                if (mesh.geometry.attributes.color.value) {\n                    mesh.material.define('VERTEX_COLOR');\n                }\n\n                mesh.name = GLTFLoader.generateMeshName(json.meshes, idx, pp);\n\n                lib.meshes[idx].push(mesh);\n            }\n        }, this);\n    },\n\n    _instanceCamera: function (json, nodeInfo) {\n        var cameraInfo = json.cameras[nodeInfo.camera];\n\n        if (cameraInfo.type === 'perspective') {\n            var perspectiveInfo = cameraInfo.perspective || {};\n            return new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]({\n                name: nodeInfo.name,\n                aspect: perspectiveInfo.aspectRatio,\n                fov: perspectiveInfo.yfov / Math.PI * 180,\n                far: perspectiveInfo.zfar,\n                near: perspectiveInfo.znear\n            });\n        }\n        else {\n            var orthographicInfo = cameraInfo.orthographic || {};\n            return new __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__[\"a\" /* default */]({\n                name: nodeInfo.name,\n                top: orthographicInfo.ymag,\n                right: orthographicInfo.xmag,\n                left: -orthographicInfo.xmag,\n                bottom: -orthographicInfo.ymag,\n                near: orthographicInfo.znear,\n                far: orthographicInfo.zfar\n            });\n        }\n    },\n\n    _parseNodes: function (json, lib) {\n\n        function instanceMesh(mesh) {\n            return new __WEBPACK_IMPORTED_MODULE_6__Mesh__[\"a\" /* default */]({\n                name: mesh.name,\n                geometry: mesh.geometry,\n                material: mesh.material,\n                culling: mesh.culling,\n                mode: mesh.mode\n            });\n        }\n\n        lib.instancedMeshes = [];\n\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, idx) {\n            var node;\n            if (nodeInfo.camera != null && this.includeCamera) {\n                node = this._instanceCamera(json, nodeInfo);\n                lib.cameras.push(node);\n            }\n            else if (nodeInfo.mesh != null && this.includeMesh) {\n                var primitives = lib.meshes[nodeInfo.mesh];\n                if (primitives) {\n                    if (primitives.length === 1) {\n                        // Replace the node with mesh directly\n                        node = instanceMesh(primitives[0]);\n                        node.setName(nodeInfo.name);\n                        lib.instancedMeshes.push(node);\n                    }\n                    else {\n                        node = new __WEBPACK_IMPORTED_MODULE_7__Node__[\"a\" /* default */]();\n                        node.setName(nodeInfo.name);\n                        for (var j = 0; j < primitives.length; j++) {\n                            var newMesh = instanceMesh(primitives[j]);\n                            node.add(newMesh);\n                            lib.instancedMeshes.push(newMesh);\n                        }\n                    }\n                }\n            }\n            else {\n                node = new __WEBPACK_IMPORTED_MODULE_7__Node__[\"a\" /* default */]();\n                // PENDING Dulplicate name.\n                node.setName(nodeInfo.name);\n            }\n            if (nodeInfo.matrix) {\n                node.localTransform.setArray(nodeInfo.matrix);\n                node.decomposeLocalTransform();\n            }\n            else {\n                if (nodeInfo.translation) {\n                    node.position.setArray(nodeInfo.translation);\n                }\n                if (nodeInfo.rotation) {\n                    node.rotation.setArray(nodeInfo.rotation);\n                }\n                if (nodeInfo.scale) {\n                    node.scale.setArray(nodeInfo.scale);\n                }\n            }\n\n            lib.nodes[idx] = node;\n        }, this);\n\n        // Build hierarchy\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.nodes, function (nodeInfo, idx) {\n            var node = lib.nodes[idx];\n            if (nodeInfo.children) {\n                for (var i = 0; i < nodeInfo.children.length; i++) {\n                    var childIdx = nodeInfo.children[i];\n                    var child = lib.nodes[childIdx];\n                    node.add(child);\n                }\n            }\n        });\n        },\n\n    _parseAnimations: function (json, lib) {\n        function checkChannelPath(channelInfo) {\n            if (channelInfo.path === 'weights') {\n                console.warn('GLTFLoader not support morph targets yet.');\n                return false;\n            }\n            return true;\n        }\n\n        function getChannelHash(channelInfo, animationInfo) {\n            return channelInfo.target.node + '_' + animationInfo.samplers[channelInfo.sampler].input;\n        }\n\n        var timeAccessorMultiplied = {};\n        __WEBPACK_IMPORTED_MODULE_1__core_util__[\"a\" /* default */].each(json.animations, function (animationInfo, idx) {\n            var channels = animationInfo.channels.filter(checkChannelPath);\n\n            if (!channels.length) {\n                return;\n            }\n            var tracks = {};\n            for (var i = 0; i < channels.length; i++) {\n                var channelInfo = channels[i];\n                var channelHash = getChannelHash(channelInfo, animationInfo);\n\n                var targetNode = lib.nodes[channelInfo.target.node];\n                var track = tracks[channelHash];\n                var samplerInfo = animationInfo.samplers[channelInfo.sampler];\n\n                if (!track) {\n                    track = tracks[channelHash] = new __WEBPACK_IMPORTED_MODULE_18__animation_SamplerTrack__[\"a\" /* default */]({\n                        name: targetNode ? targetNode.name : '',\n                        target: targetNode\n                    });\n                    track.targetNodeIndex = channelInfo.target.node;\n                    track.channels.time = getAccessorData(json, lib, samplerInfo.input);\n                    var frameLen = track.channels.time.length;\n                    if (!timeAccessorMultiplied[samplerInfo.input]) {\n                        for (var k = 0; k < frameLen; k++) {\n                            track.channels.time[k] *= 1000;\n                        }\n                        timeAccessorMultiplied[samplerInfo.input] = true;\n                    }\n                }\n\n                var interpolation = samplerInfo.interpolation || 'LINEAR';\n                if (interpolation !== 'LINEAR') {\n                    console.warn('GLTFLoader only support LINEAR interpolation.');\n                }\n\n                var path = channelInfo.target.path;\n                if (path === 'translation') {\n                    path = 'position';\n                }\n\n                track.channels[path] = getAccessorData(json, lib, samplerInfo.output);\n            }\n            var tracksList = [];\n            for (var hash in tracks) {\n                tracksList.push(tracks[hash]);\n            }\n            var clip = new __WEBPACK_IMPORTED_MODULE_17__animation_TrackClip__[\"a\" /* default */]({\n                name: animationInfo.name,\n                loop: true,\n                tracks: tracksList\n            });\n            lib.clips.push(clip);\n        }, this);\n\n\n        // PENDING\n        var maxLife = lib.clips.reduce(function (maxTime, clip) {\n            return Math.max(maxTime, clip.life);\n        }, 0);\n        lib.clips.forEach(function (clip) {\n            clip.life = maxLife;\n        });\n\n        return lib.clips;\n    }\n});\n\nGLTFLoader.generateMeshName = function (meshes, idx, primitiveIdx) {\n    var meshInfo = meshes[idx];\n    var meshName = meshInfo.name || ('mesh_' + idx);\n    return primitiveIdx === 0 ? meshName : (meshName + '$' + primitiveIdx);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLTFLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xvYWRlci9HTFRGLmpzPzdmMTciXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBnbFRGIExvYWRlclxuICogU3BlY2lmaWNhdGlvbiBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvYmxvYi9tYXN0ZXIvc3BlY2lmaWNhdGlvbi9SRUFETUUubWRcbiAqXG4gKiBUT0RPIE1vcnBoIHRhcmdldHNcbiAqL1xuaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCB1dGlsIGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcblxuaW1wb3J0IFNjZW5lIGZyb20gJy4uL1NjZW5lJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgU3RhbmRhcmRNYXRlcmlhbCBmcm9tICcuLi9TdGFuZGFyZE1hdGVyaWFsJztcbmltcG9ydCBNZXNoIGZyb20gJy4uL01lc2gnO1xuaW1wb3J0IE5vZGUgZnJvbSAnLi4vTm9kZSc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuLi9UZXh0dXJlJztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi4vVGV4dHVyZTJEJztcbmltcG9ydCBzaGFkZXJMaWJyYXJ5IGZyb20gJy4uL3NoYWRlci9saWJyYXJ5JztcbmltcG9ydCBTa2VsZXRvbiBmcm9tICcuLi9Ta2VsZXRvbic7XG5pbXBvcnQgSm9pbnQgZnJvbSAnLi4vSm9pbnQnO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5pbXBvcnQgT3J0aG9ncmFwaGljQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9PcnRob2dyYXBoaWMnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuLi9jb3JlL2dsZW51bSc7XG5cbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcblxuaW1wb3J0IFRyYWNrQ2xpcCBmcm9tICcuLi9hbmltYXRpb24vVHJhY2tDbGlwJztcbmltcG9ydCBTYW1wbGVyVHJhY2sgZnJvbSAnLi4vYW5pbWF0aW9uL1NhbXBsZXJUcmFjayc7XG5cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5cbi8vIEltcG9ydCBidWlsdGluIHNoYWRlclxuaW1wb3J0ICcuLi9zaGFkZXIvYnVpbHRpbic7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5cbnZhciBzZW1hbnRpY0F0dHJpYnV0ZU1hcCA9IHtcbiAgICAnTk9STUFMJzogJ25vcm1hbCcsXG4gICAgJ1BPU0lUSU9OJzogJ3Bvc2l0aW9uJyxcbiAgICAnVEVYQ09PUkRfMCc6ICd0ZXhjb29yZDAnLFxuICAgICdURVhDT09SRF8xJzogJ3RleGNvb3JkMScsXG4gICAgJ1dFSUdIVFNfMCc6ICd3ZWlnaHQnLFxuICAgICdKT0lOVFNfMCc6ICdqb2ludCcsXG4gICAgJ0NPTE9SXzAnOiAnY29sb3InXG59O1xuXG52YXIgQVJSQVlfQ1RPUl9NQVAgPSB7XG4gICAgNTEyMDogdmVuZG9yLkludDhBcnJheSxcbiAgICA1MTIxOiB2ZW5kb3IuVWludDhBcnJheSxcbiAgICA1MTIyOiB2ZW5kb3IuSW50MTZBcnJheSxcbiAgICA1MTIzOiB2ZW5kb3IuVWludDE2QXJyYXksXG4gICAgNTEyNTogdmVuZG9yLlVpbnQzMkFycmF5LFxuICAgIDUxMjY6IHZlbmRvci5GbG9hdDMyQXJyYXlcbn07XG52YXIgU0laRV9NQVAgPSB7XG4gICAgU0NBTEFSOiAxLFxuICAgIFZFQzI6IDIsXG4gICAgVkVDMzogMyxcbiAgICBWRUM0OiA0LFxuICAgIE1BVDI6IDQsXG4gICAgTUFUMzogOSxcbiAgICBNQVQ0OiAxNlxufTtcblxuZnVuY3Rpb24gZ2V0QWNjZXNzb3JEYXRhKGpzb24sIGxpYiwgYWNjZXNzb3JJZHgsIGlzSW5kaWNlcykge1xuICAgIHZhciBhY2Nlc3NvckluZm8gPSBqc29uLmFjY2Vzc29yc1thY2Nlc3NvcklkeF07XG5cbiAgICB2YXIgYnVmZmVyID0gbGliLmJ1ZmZlclZpZXdzW2FjY2Vzc29ySW5mby5idWZmZXJWaWV3XTtcbiAgICB2YXIgYnl0ZU9mZnNldCA9IGFjY2Vzc29ySW5mby5ieXRlT2Zmc2V0IHx8IDA7XG4gICAgdmFyIEFycmF5Q3RvciA9IEFSUkFZX0NUT1JfTUFQW2FjY2Vzc29ySW5mby5jb21wb25lbnRUeXBlXSB8fCB2ZW5kb3IuRmxvYXQzMkFycmF5O1xuXG4gICAgdmFyIHNpemUgPSBTSVpFX01BUFthY2Nlc3NvckluZm8udHlwZV07XG4gICAgaWYgKHNpemUgPT0gbnVsbCAmJiBpc0luZGljZXMpIHtcbiAgICAgICAgc2l6ZSA9IDE7XG4gICAgfVxuICAgIHZhciBhcnIgPSBuZXcgQXJyYXlDdG9yKGJ1ZmZlciwgYnl0ZU9mZnNldCwgc2l6ZSAqIGFjY2Vzc29ySW5mby5jb3VudCk7XG5cbiAgICB2YXIgcXVhbnRpemVFeHRlbnNpb24gPSBhY2Nlc3NvckluZm8uZXh0ZW5zaW9ucyAmJiBhY2Nlc3NvckluZm8uZXh0ZW5zaW9uc1snV0VCM0RfcXVhbnRpemVkX2F0dHJpYnV0ZXMnXTtcbiAgICBpZiAocXVhbnRpemVFeHRlbnNpb24pIHtcbiAgICAgICAgdmFyIGRlY29kZWRBcnIgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheShzaXplICogYWNjZXNzb3JJbmZvLmNvdW50KTtcbiAgICAgICAgdmFyIGRlY29kZU1hdHJpeCA9IHF1YW50aXplRXh0ZW5zaW9uLmRlY29kZU1hdHJpeDtcbiAgICAgICAgdmFyIGRlY29kZU9mZnNldDtcbiAgICAgICAgdmFyIGRlY29kZVNjYWxlO1xuICAgICAgICB2YXIgZGVjb2RlT2Zmc2V0ID0gbmV3IEFycmF5KHNpemUpO1xuICAgICAgICB2YXIgZGVjb2RlU2NhbGUgPSBuZXcgQXJyYXkoc2l6ZSk7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2l6ZTsgaysrKSB7XG4gICAgICAgICAgICBkZWNvZGVPZmZzZXRba10gPSBkZWNvZGVNYXRyaXhbc2l6ZSAqIChzaXplICsgMSkgKyBrXTtcbiAgICAgICAgICAgIGRlY29kZVNjYWxlW2tdID0gZGVjb2RlTWF0cml4W2sgKiAoc2l6ZSArIDEpICsga107XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhY2Nlc3NvckluZm8uY291bnQ7IGkrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBzaXplOyBrKyspIHtcbiAgICAgICAgICAgICAgICBkZWNvZGVkQXJyW2kgKiBzaXplICsga10gPSBhcnJbaSAqIHNpemUgKyBrXSAqIGRlY29kZVNjYWxlW2tdICsgZGVjb2RlT2Zmc2V0W2tdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgYXJyID0gZGVjb2RlZEFycjtcbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CaW5hcnkoaW5wdXQsIGNoYXJTdGFydCkge1xuICAgIHZhciBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJztcbiAgICB2YXIgbG9va3VwID0gbmV3IFVpbnQ4QXJyYXkoMTMwKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7XG4gICAgfVxuICAgIC8vIElnbm9yZVxuICAgIHZhciBsZW4gPSBpbnB1dC5sZW5ndGggLSBjaGFyU3RhcnQ7XG4gICAgaWYgKGlucHV0LmNoYXJBdChsZW4gLSAxKSA9PT0gJz0nKSB7IGxlbi0tOyB9XG4gICAgaWYgKGlucHV0LmNoYXJBdChsZW4gLSAxKSA9PT0gJz0nKSB7IGxlbi0tOyB9XG5cbiAgICB2YXIgdWFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoKGxlbiAvIDQpICogMyk7XG5cbiAgICBmb3IgKHZhciBpID0gMCwgaiA9IGNoYXJTdGFydDsgaSA8IHVhcnJheS5sZW5ndGg7KSB7XG4gICAgICAgIHZhciBjMSA9IGxvb2t1cFtpbnB1dC5jaGFyQ29kZUF0KGorKyldO1xuICAgICAgICB2YXIgYzIgPSBsb29rdXBbaW5wdXQuY2hhckNvZGVBdChqKyspXTtcbiAgICAgICAgdmFyIGMzID0gbG9va3VwW2lucHV0LmNoYXJDb2RlQXQoaisrKV07XG4gICAgICAgIHZhciBjNCA9IGxvb2t1cFtpbnB1dC5jaGFyQ29kZUF0KGorKyldO1xuXG4gICAgICAgIHVhcnJheVtpKytdID0gKGMxIDw8IDIpIHwgKGMyID4+IDQpO1xuICAgICAgICB1YXJyYXlbaSsrXSA9ICgoYzIgJiAxNSkgPDwgNCkgfCAoYzMgPj4gMik7XG4gICAgICAgIHVhcnJheVtpKytdID0gKChjMyAmIDMpIDw8IDYpIHwgYzQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVhcnJheS5idWZmZXI7XG59XG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBjbGF5LmxvYWRlci5HTFRGLlJlc3VsdFxuICogQHByb3BlcnR5IHtPYmplY3R9IGpzb25cbiAqIEBwcm9wZXJ0eSB7Y2xheS5TY2VuZX0gc2NlbmVcbiAqIEBwcm9wZXJ0eSB7Y2xheS5Ob2RlfSByb290Tm9kZVxuICogQHByb3BlcnR5IHtjbGF5LkNhbWVyYVtdfSBjYW1lcmFzXG4gKiBAcHJvcGVydHkge2NsYXkuVGV4dHVyZVtdfSB0ZXh0dXJlc1xuICogQHByb3BlcnR5IHtjbGF5Lk1hdGVyaWFsW119IG1hdGVyaWFsc1xuICogQHByb3BlcnR5IHtjbGF5LlNrZWxldG9uW119IHNrZWxldG9uc1xuICogQHByb3BlcnR5IHtjbGF5Lk1lc2hbXX0gbWVzaGVzXG4gKiBAcHJvcGVydHkge2NsYXkuYW5pbWF0aW9uLlRyYWNrQ2xpcFtdfSBjbGlwc1xuICogQHByb3BlcnR5IHtjbGF5Lk5vZGVbXX0gbm9kZXNcbiAqL1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxvYWRlci5HTFRGXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgR0xURkxvYWRlciA9IEJhc2UuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5sb2FkZXIuR0xURiMgKi8ge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHR5cGUge2NsYXkuTm9kZX1cbiAgICAgKi9cbiAgICByb290Tm9kZTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBSb290IHBhdGggZm9yIHVyaSBwYXJzaW5nLlxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgcm9vdFBhdGg6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBSb290IHBhdGggZm9yIHRleHR1cmUgdXJpIHBhcnNpbmcuIERlZmF1bHRseSB1c2UgdGhlIHJvb3RQYXRoXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0ZXh0dXJlUm9vdFBhdGg6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBSb290IHBhdGggZm9yIGJ1ZmZlciB1cmkgcGFyc2luZy4gRGVmYXVsdGx5IHVzZSB0aGUgcm9vdFBhdGhcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGJ1ZmZlclJvb3RQYXRoOiBudWxsLFxuXG4gICAgLyoqXG4gICAgICogU2hhZGVyIHVzZWQgd2hlbiBjcmVhdGluZyB0aGUgbWF0ZXJpYWxzLlxuICAgICAqIEB0eXBlIHtzdHJpbmd8Y2xheS5TaGFkZXJ9XG4gICAgICogQGRlZmF1bHQgJ2NsYXkuc3RhbmRhcmQnXG4gICAgICovXG4gICAgc2hhZGVyOiAnY2xheS5zdGFuZGFyZCcsXG5cbiAgICAvKipcbiAgICAgKiBJZiB1c2Uge0BsaW5rIGNsYXkuU3RhbmRhcmRNYXRlcmlhbH1cbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHVzZVN0YW5kYXJkTWF0ZXJpYWw6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogSWYgbG9hZGluZyB0aGUgY2FtZXJhcy5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbmNsdWRlQ2FtZXJhOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogSWYgbG9hZGluZyB0aGUgYW5pbWF0aW9ucy5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBpbmNsdWRlQW5pbWF0aW9uOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIElmIGxvYWRpbmcgdGhlIG1lc2hlc1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGluY2x1ZGVNZXNoOiB0cnVlLFxuICAgIC8qKlxuICAgICAqIElmIGxvYWRpbmcgdGhlIHRleHR1cmVzLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGluY2x1ZGVUZXh0dXJlOiB0cnVlLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBjcm9zc09yaWdpbjogJycsXG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQHNlZSBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvaXNzdWVzLzY3NFxuICAgICAqL1xuICAgIHRleHR1cmVGbGlwWTogZmFsc2UsXG5cbiAgICAvKipcbiAgICAgKiBJZiBjb252ZXJ0IHRleHR1cmUgdG8gcG93ZXItb2YtdHdvXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgdGV4dHVyZUNvbnZlcnRUb1BPVDogZmFsc2UsXG5cbiAgICBzaGFkZXJMaWJyYXJ5OiBudWxsXG59LFxuZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5zaGFkZXJMaWJyYXJ5KSB7XG4gICAgICAgIHRoaXMuc2hhZGVyTGlicmFyeSA9IHNoYWRlckxpYnJhcnkuY3JlYXRlTGlicmFyeSgpO1xuICAgIH1cbn0sXG4vKiogQGxlbmRzIGNsYXkubG9hZGVyLkdMVEYucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHVybFxuICAgICAqL1xuICAgIGxvYWQ6IGZ1bmN0aW9uICh1cmwpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgaXNCaW5hcnkgPSB1cmwuZW5kc1dpdGgoJy5nbGInKTtcblxuICAgICAgICBpZiAodGhpcy5yb290UGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJvb3RQYXRoID0gdXJsLnNsaWNlKDAsIHVybC5sYXN0SW5kZXhPZignLycpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZlbmRvci5yZXF1ZXN0LmdldCh7XG4gICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgIG9ucHJvZ3Jlc3M6IGZ1bmN0aW9uIChwZXJjZW50LCBsb2FkZWQsIHRvdGFsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdwcm9ncmVzcycsIHBlcmNlbnQsIGxvYWRlZCwgdG90YWwpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdlcnJvcicsIGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogaXNCaW5hcnkgPyAnYXJyYXlidWZmZXInIDogJ3RleHQnLFxuICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChpc0JpbmFyeSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhcnNlQmluYXJ5KGRhdGEpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBQYXJzZSBnbFRGIGJpbmFyeVxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJ9IGJ1ZmZlclxuICAgICAqIEByZXR1cm4ge2NsYXkubG9hZGVyLkdMVEYuUmVzdWx0fVxuICAgICAqL1xuICAgIHBhcnNlQmluYXJ5OiBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBuZXcgVWludDMyQXJyYXkoYnVmZmVyLCAwLCA0KTtcbiAgICAgICAgaWYgKGhlYWRlclswXSAhPT0gMHg0NjU0NkM2Nykge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsICdJbnZhbGlkIGdsVEYgYmluYXJ5IGZvcm1hdDogSW52YWxpZCBoZWFkZXInKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVhZGVyWzBdIDwgMikge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsICdPbmx5IGdsVEYyLjAgaXMgc3VwcG9ydGVkLicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlciwgMTIpO1xuXG4gICAgICAgIHZhciBqc29uO1xuICAgICAgICB2YXIgYnVmZmVycyA9IFtdO1xuICAgICAgICAvLyBSZWFkIGNodW5rc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGFWaWV3LmJ5dGVMZW5ndGg7KSB7XG4gICAgICAgICAgICB2YXIgY2h1bmtMZW5ndGggPSBkYXRhVmlldy5nZXRVaW50MzIoaSwgdHJ1ZSk7XG4gICAgICAgICAgICBpICs9IDQ7XG4gICAgICAgICAgICB2YXIgY2h1bmtUeXBlID0gZGF0YVZpZXcuZ2V0VWludDMyKGksIHRydWUpO1xuICAgICAgICAgICAgaSArPSA0O1xuXG4gICAgICAgICAgICAvLyBqc29uXG4gICAgICAgICAgICBpZiAoY2h1bmtUeXBlID09PSAweDRFNEY1MzRBKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlciwgaSArIDEyLCBjaHVua0xlbmd0aCk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETywgZm9yIHRoZSBicm93c2VyIG5vdCBzdXBwb3J0IFRleHREZWNvZGVyLlxuICAgICAgICAgICAgICAgIHZhciBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gICAgICAgICAgICAgICAgdmFyIHN0ciA9IGRlY29kZXIuZGVjb2RlKGFycik7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAganNvbiA9IEpTT04ucGFyc2Uoc3RyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCdlcnJvcicsICdKU09OIFBhcnNlIGVycm9yOicgKyBlLnRvU3RyaW5nKCkpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2h1bmtUeXBlID09PSAweDAwNEU0OTQyKSB7XG4gICAgICAgICAgICAgICAgYnVmZmVycy5wdXNoKGJ1ZmZlci5zbGljZShpICsgMTIsIGkgKyAxMiArIGNodW5rTGVuZ3RoKSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGkgKz0gY2h1bmtMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFqc29uKSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2Vycm9yJywgJ0ludmFsaWQgZ2xURiBiaW5hcnkgZm9ybWF0OiBDYW5cXCd0IGZpbmQgSlNPTi4nKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlKGpzb24sIGJ1ZmZlcnMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdH0ganNvblxuICAgICAqIEBwYXJhbSB7QXJyYXlCdWZmZXJbXX0gW2J1ZmZlcl1cbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxvYWRlci5HTFRGLlJlc3VsdH1cbiAgICAgKi9cbiAgICBwYXJzZTogZnVuY3Rpb24gKGpzb24sIGJ1ZmZlcnMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHZhciBsaWIgPSB7XG4gICAgICAgICAgICBqc29uOiBqc29uLFxuICAgICAgICAgICAgYnVmZmVyczogW10sXG4gICAgICAgICAgICBidWZmZXJWaWV3czogW10sXG4gICAgICAgICAgICBtYXRlcmlhbHM6IFtdLFxuICAgICAgICAgICAgdGV4dHVyZXM6IFtdLFxuICAgICAgICAgICAgbWVzaGVzOiBbXSxcbiAgICAgICAgICAgIGpvaW50czogW10sXG4gICAgICAgICAgICBza2VsZXRvbnM6IFtdLFxuICAgICAgICAgICAgY2FtZXJhczogW10sXG4gICAgICAgICAgICBub2RlczogW10sXG4gICAgICAgICAgICBjbGlwczogW11cbiAgICAgICAgfTtcbiAgICAgICAgLy8gTW91bnQgb24gdGhlIHJvb3Qgbm9kZSBpZiBnaXZlblxuICAgICAgICB2YXIgcm9vdE5vZGUgPSB0aGlzLnJvb3ROb2RlIHx8IG5ldyBTY2VuZSgpO1xuXG4gICAgICAgIHZhciBsb2FkaW5nID0gMDtcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tMb2FkKCkge1xuICAgICAgICAgICAgbG9hZGluZy0tO1xuICAgICAgICAgICAgaWYgKGxvYWRpbmcgPT09IDApIHtcbiAgICAgICAgICAgICAgICBhZnRlckxvYWRCdWZmZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBJZiBhbHJlYWR5IGxvYWQgYnVmZmVyc1xuICAgICAgICBpZiAoYnVmZmVycykge1xuICAgICAgICAgICAgbGliLmJ1ZmZlcnMgPSBidWZmZXJzLnNsaWNlKCk7XG4gICAgICAgICAgICBhZnRlckxvYWRCdWZmZXIodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBMb2FkIGJ1ZmZlcnNcbiAgICAgICAgICAgIHV0aWwuZWFjaChqc29uLmJ1ZmZlcnMsIGZ1bmN0aW9uIChidWZmZXJJbmZvLCBpZHgpIHtcbiAgICAgICAgICAgICAgICBsb2FkaW5nKys7XG4gICAgICAgICAgICAgICAgdmFyIHBhdGggPSBidWZmZXJJbmZvLnVyaTtcblxuICAgICAgICAgICAgICAgIHNlbGYuX2xvYWRCdWZmZXJzKHBhdGgsIGZ1bmN0aW9uIChidWZmZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgbGliLmJ1ZmZlcnNbaWR4XSA9IGJ1ZmZlcjtcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tMb2FkKCk7XG4gICAgICAgICAgICAgICAgfSwgY2hlY2tMb2FkKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0UmVzdWx0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBqc29uOiBqc29uLFxuICAgICAgICAgICAgICAgIHNjZW5lOiBzZWxmLnJvb3ROb2RlID8gbnVsbCA6IHJvb3ROb2RlLFxuICAgICAgICAgICAgICAgIHJvb3ROb2RlOiBzZWxmLnJvb3ROb2RlID8gcm9vdE5vZGUgOiBudWxsLFxuICAgICAgICAgICAgICAgIGNhbWVyYXM6IGxpYi5jYW1lcmFzLFxuICAgICAgICAgICAgICAgIHRleHR1cmVzOiBsaWIudGV4dHVyZXMsXG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxzOiBsaWIubWF0ZXJpYWxzLFxuICAgICAgICAgICAgICAgIHNrZWxldG9uczogbGliLnNrZWxldG9ucyxcbiAgICAgICAgICAgICAgICBtZXNoZXM6IGxpYi5pbnN0YW5jZWRNZXNoZXMsXG4gICAgICAgICAgICAgICAgY2xpcHM6IGxpYi5jbGlwcyxcbiAgICAgICAgICAgICAgICBub2RlczogbGliLm5vZGVzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWZ0ZXJMb2FkQnVmZmVyKGltbWVkaWF0ZWx5KSB7XG4gICAgICAgICAgICAvLyBCdWZmZXIgbm90IGxvYWQgY29tcGxldGUuXG4gICAgICAgICAgICBpZiAobGliLmJ1ZmZlcnMubGVuZ3RoICE9PSBqc29uLmJ1ZmZlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcignZXJyb3InLCAnQnVmZmVyIG5vdCBsb2FkIGNvbXBsZXRlLicpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAganNvbi5idWZmZXJWaWV3cy5mb3JFYWNoKGZ1bmN0aW9uIChidWZmZXJWaWV3SW5mbywgaWR4KSB7XG4gICAgICAgICAgICAgICAgLy8gUEVORElORyBQZXJmb3JtYW5jZVxuICAgICAgICAgICAgICAgIGxpYi5idWZmZXJWaWV3c1tpZHhdID0gbGliLmJ1ZmZlcnNbYnVmZmVyVmlld0luZm8uYnVmZmVyXVxuICAgICAgICAgICAgICAgICAgICAuc2xpY2UoYnVmZmVyVmlld0luZm8uYnl0ZU9mZnNldCB8fCAwLCAoYnVmZmVyVmlld0luZm8uYnl0ZU9mZnNldCB8fCAwKSArIChidWZmZXJWaWV3SW5mby5ieXRlTGVuZ3RoIHx8IDApKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGliLmJ1ZmZlcnMgPSBudWxsO1xuICAgICAgICAgICAgaWYgKHNlbGYuaW5jbHVkZU1lc2gpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5pbmNsdWRlVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLl9wYXJzZVRleHR1cmVzKGpzb24sIGxpYik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYuX3BhcnNlTWF0ZXJpYWxzKGpzb24sIGxpYik7XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFyc2VNZXNoZXMoanNvbiwgbGliKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlbGYuX3BhcnNlTm9kZXMoanNvbiwgbGliKTtcblxuICAgICAgICAgICAgLy8gT25seSBzdXBwb3J0IG9uZSBzY2VuZS5cbiAgICAgICAgICAgIGlmIChqc29uLnNjZW5lcykge1xuICAgICAgICAgICAgICAgIHZhciBzY2VuZUluZm8gPSBqc29uLnNjZW5lc1tqc29uLnNjZW5lIHx8IDBdOyAvLyBEZWZhdWx0IHVzZSB0aGUgZmlyc3Qgc2NlbmUuXG4gICAgICAgICAgICAgICAgaWYgKHNjZW5lSW5mbykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjZW5lSW5mby5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vZGUgPSBsaWIubm9kZXNbc2NlbmVJbmZvLm5vZGVzW2ldXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUudXBkYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290Tm9kZS5hZGQobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWxmLmluY2x1ZGVNZXNoKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFyc2VTa2lucyhqc29uLCBsaWIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2VsZi5pbmNsdWRlQW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFyc2VBbmltYXRpb25zKGpzb24sIGxpYik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW1tZWRpYXRlbHkpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzdWNjZXNzJywgZ2V0UmVzdWx0KCkpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdzdWNjZXNzJywgZ2V0UmVzdWx0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdldFJlc3VsdCgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBCaW5hcnkgZmlsZSBwYXRoIHJlc29sdmVyLiBVc2VyIGNhbiBvdmVycmlkZSBpdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXG4gICAgICovXG4gICAgcmVzb2x2ZUJ1ZmZlclBhdGg6IGZ1bmN0aW9uIChwYXRoKSB7XG4gICAgICAgIGlmIChwYXRoICYmIHBhdGgubWF0Y2goL15kYXRhOiguKj8pYmFzZTY0LC8pKSB7XG4gICAgICAgICAgICByZXR1cm4gcGF0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByb290UGF0aCA9IHRoaXMuYnVmZmVyUm9vdFBhdGg7XG4gICAgICAgIGlmIChyb290UGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByb290UGF0aCA9IHRoaXMucm9vdFBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwucmVsYXRpdmUyYWJzb2x1dGUocGF0aCwgcm9vdFBhdGgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUZXh0dXJlIGZpbGUgcGF0aCByZXNvbHZlci4gVXNlciBjYW4gb3ZlcnJpZGUgaXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxuICAgICAqL1xuICAgIHJlc29sdmVUZXh0dXJlUGF0aDogZnVuY3Rpb24gKHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGggJiYgcGF0aC5tYXRjaCgvXmRhdGE6KC4qPyliYXNlNjQsLykpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXRoO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJvb3RQYXRoID0gdGhpcy50ZXh0dXJlUm9vdFBhdGg7XG4gICAgICAgIGlmIChyb290UGF0aCA9PSBudWxsKSB7XG4gICAgICAgICAgICByb290UGF0aCA9IHRoaXMucm9vdFBhdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHV0aWwucmVsYXRpdmUyYWJzb2x1dGUocGF0aCwgcm9vdFBhdGgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBCdWZmZXIgbG9hZGVyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9XG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25zdWNjZXNzXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gb25lcnJvclxuICAgICAqL1xuICAgIGxvYWRCdWZmZXI6IGZ1bmN0aW9uIChwYXRoLCBvbnN1Y2Nlc3MsIG9uZXJyb3IpIHtcbiAgICAgICAgdmVuZG9yLnJlcXVlc3QuZ2V0KHtcbiAgICAgICAgICAgIHVybDogcGF0aCxcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJyxcbiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKGJ1ZmZlcikge1xuICAgICAgICAgICAgICAgIG9uc3VjY2VzcyAmJiBvbnN1Y2Nlc3MoYnVmZmVyKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbiAoYnVmZmVyKSB7XG4gICAgICAgICAgICAgICAgb25lcnJvciAmJiBvbmVycm9yKGJ1ZmZlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBfZ2V0U2hhZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5zaGFkZXIgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaGFkZXJMaWJyYXJ5LmdldCh0aGlzLnNoYWRlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5zaGFkZXIgaW5zdGFuY2VvZiBTaGFkZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNoYWRlcjtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfbG9hZEJ1ZmZlcnM6IGZ1bmN0aW9uIChwYXRoLCBvbnN1Y2Nlc3MsIG9uZXJyb3IpIHtcbiAgICAgICAgdmFyIGJhc2U2NFByZWZpeCA9ICdkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsJztcbiAgICAgICAgdmFyIHN0clN0YXJ0ID0gcGF0aC5zdWJzdHIoMCwgYmFzZTY0UHJlZml4Lmxlbmd0aCk7XG4gICAgICAgIGlmIChzdHJTdGFydCA9PT0gYmFzZTY0UHJlZml4KSB7XG4gICAgICAgICAgICBvbnN1Y2Nlc3MoXG4gICAgICAgICAgICAgICAgYmFzZTY0VG9CaW5hcnkocGF0aCwgYmFzZTY0UHJlZml4Lmxlbmd0aClcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRCdWZmZXIoXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlQnVmZmVyUGF0aChwYXRoKSxcbiAgICAgICAgICAgICAgICBvbnN1Y2Nlc3MsXG4gICAgICAgICAgICAgICAgb25lcnJvclxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vS2hyb25vc0dyb3VwL2dsVEYvaXNzdWVzLzEwMFxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9LaHJvbm9zR3JvdXAvZ2xURi9pc3N1ZXMvMTkzXG4gICAgX3BhcnNlU2tpbnM6IGZ1bmN0aW9uIChqc29uLCBsaWIpIHtcblxuICAgICAgICAvLyBDcmVhdGUgc2tlbGV0b25zIGFuZCBqb2ludHNcbiAgICAgICAgdmFyIGhhdmVJbnZCaW5kTWF0cmljZXMgPSBmYWxzZTtcbiAgICAgICAgdXRpbC5lYWNoKGpzb24uc2tpbnMsIGZ1bmN0aW9uIChza2luSW5mbywgaWR4KSB7XG4gICAgICAgICAgICB2YXIgc2tlbGV0b24gPSBuZXcgU2tlbGV0b24oe1xuICAgICAgICAgICAgICAgIG5hbWU6IHNraW5JbmZvLm5hbWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBza2luSW5mby5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZUlkeCA9IHNraW5JbmZvLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGxpYi5ub2Rlc1tub2RlSWR4XTtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSBuZXcgSm9pbnQoe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBub2RlLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIG5vZGU6IG5vZGUsXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiBza2VsZXRvbi5qb2ludHMubGVuZ3RoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc2tlbGV0b24uam9pbnRzLnB1c2goam9pbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2tlbGV0b24ucmVsYXRpdmVSb290Tm9kZSA9IGxpYi5ub2Rlc1tza2luSW5mby5za2VsZXRvbl0gfHwgdGhpcy5yb290Tm9kZTtcbiAgICAgICAgICAgIGlmIChza2luSW5mby5pbnZlcnNlQmluZE1hdHJpY2VzKSB7XG4gICAgICAgICAgICAgICAgaGF2ZUludkJpbmRNYXRyaWNlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIElCTUluZm8gPSBqc29uLmFjY2Vzc29yc1tza2luSW5mby5pbnZlcnNlQmluZE1hdHJpY2VzXTtcbiAgICAgICAgICAgICAgICB2YXIgYnVmZmVyID0gbGliLmJ1ZmZlclZpZXdzW0lCTUluZm8uYnVmZmVyVmlld107XG5cbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gSUJNSW5mby5ieXRlT2Zmc2V0IHx8IDA7XG4gICAgICAgICAgICAgICAgdmFyIHNpemUgPSBJQk1JbmZvLmNvdW50ICogMTY7XG5cbiAgICAgICAgICAgICAgICB2YXIgYXJyYXkgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheShidWZmZXIsIG9mZnNldCwgc2l6ZSk7XG5cbiAgICAgICAgICAgICAgICBza2VsZXRvbi5zZXRKb2ludE1hdHJpY2VzQXJyYXkoYXJyYXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc2tlbGV0b24udXBkYXRlSm9pbnRNYXRyaWNlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGliLnNrZWxldG9uc1tpZHhdID0gc2tlbGV0b247XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGVuYWJsZVNraW5uaW5nRm9yTWVzaChtZXNoLCBza2VsZXRvbiwgam9pbnRJbmRpY2VzKSB7XG4gICAgICAgICAgICBtZXNoLnNrZWxldG9uID0gc2tlbGV0b247XG4gICAgICAgICAgICBtZXNoLmpvaW50cyA9IGpvaW50SW5kaWNlcztcblxuICAgICAgICAgICAgaWYgKCFza2VsZXRvbi5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgICAgIHNrZWxldG9uLnVwZGF0ZUpvaW50c0JvdW5kaW5nQm94ZXMobWVzaC5nZW9tZXRyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBnZXRKb2ludEluZGV4KGpvaW50KSB7XG4gICAgICAgICAgICByZXR1cm4gam9pbnQuaW5kZXg7XG4gICAgICAgIH1cblxuICAgICAgICB1dGlsLmVhY2goanNvbi5ub2RlcywgZnVuY3Rpb24gKG5vZGVJbmZvLCBub2RlSWR4KSB7XG4gICAgICAgICAgICBpZiAobm9kZUluZm8uc2tpbiAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNraW5JZHggPSBub2RlSW5mby5za2luO1xuICAgICAgICAgICAgICAgIHZhciBza2VsZXRvbiA9IGxpYi5za2VsZXRvbnNbc2tpbklkeF07XG5cbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGxpYi5ub2Rlc1tub2RlSWR4XTtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnRJbmRpY2VzID0gc2tlbGV0b24uam9pbnRzLm1hcChnZXRKb2ludEluZGV4KTtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlU2tpbm5pbmdGb3JNZXNoKG5vZGUsIHNrZWxldG9uLCBqb2ludEluZGljZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gTWVzaCBoYXZlIG11bHRpcGxlIHByaW1pdGl2ZXNcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gbm9kZS5jaGlsZHJlbigpO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbmFibGVTa2lubmluZ0Zvck1lc2goY2hpbGRyZW5baV0sIHNrZWxldG9uLCBqb2ludEluZGljZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgX3BhcnNlVGV4dHVyZXM6IGZ1bmN0aW9uIChqc29uLCBsaWIpIHtcbiAgICAgICAgdXRpbC5lYWNoKGpzb24udGV4dHVyZXMsIGZ1bmN0aW9uICh0ZXh0dXJlSW5mbywgaWR4KXtcbiAgICAgICAgICAgIC8vIHNhbXBsZXJzIGlzIG9wdGlvbmFsXG4gICAgICAgICAgICB2YXIgc2FtcGxlckluZm8gPSAoanNvbi5zYW1wbGVycyAmJiBqc29uLnNhbXBsZXJzW3RleHR1cmVJbmZvLnNhbXBsZXJdKSB8fCB7fTtcbiAgICAgICAgICAgIHZhciBwYXJhbWV0ZXJzID0ge307XG4gICAgICAgICAgICBbJ3dyYXBTJywgJ3dyYXBUJywgJ21hZ0ZpbHRlcicsICdtaW5GaWx0ZXInXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gc2FtcGxlckluZm9bbmFtZV07XG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyc1tuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdXRpbC5kZWZhdWx0cyhwYXJhbWV0ZXJzLCB7XG4gICAgICAgICAgICAgICAgd3JhcFM6IFRleHR1cmUuUkVQRUFULFxuICAgICAgICAgICAgICAgIHdyYXBUOiBUZXh0dXJlLlJFUEVBVCxcbiAgICAgICAgICAgICAgICBmbGlwWTogdGhpcy50ZXh0dXJlRmxpcFksXG4gICAgICAgICAgICAgICAgY29udmVydFRvUE9UOiB0aGlzLnRleHR1cmVDb252ZXJ0VG9QT1RcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGV4dHVyZUluZm8udGFyZ2V0IHx8IGdsZW51bS5URVhUVVJFXzJEO1xuICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHRleHR1cmVJbmZvLmZvcm1hdDtcbiAgICAgICAgICAgIGlmIChmb3JtYXQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMuZm9ybWF0ID0gZm9ybWF0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSBnbGVudW0uVEVYVFVSRV8yRCkge1xuICAgICAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gbmV3IFRleHR1cmUyRChwYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICB2YXIgaW1hZ2VJbmZvID0ganNvbi5pbWFnZXNbdGV4dHVyZUluZm8uc291cmNlXTtcbiAgICAgICAgICAgICAgICB2YXIgdXJpO1xuICAgICAgICAgICAgICAgIGlmIChpbWFnZUluZm8udXJpKSB7XG4gICAgICAgICAgICAgICAgICAgIHVyaSA9IHRoaXMucmVzb2x2ZVRleHR1cmVQYXRoKGltYWdlSW5mby51cmkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChpbWFnZUluZm8uYnVmZmVyVmlldyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHVyaSA9IFVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoW2xpYi5idWZmZXJWaWV3c1tpbWFnZUluZm8uYnVmZmVyVmlld11dLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBpbWFnZUluZm8ubWltZVR5cGVcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodXJpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRleHR1cmUubG9hZCh1cmksIHRoaXMuY3Jvc3NPcmlnaW4pO1xuICAgICAgICAgICAgICAgICAgICBsaWIudGV4dHVyZXNbaWR4XSA9IHRleHR1cmU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgX0tIUkNvbW1vbk1hdGVyaWFsVG9TdGFuZGFyZDogZnVuY3Rpb24gKG1hdGVyaWFsSW5mbywgbGliKSB7XG4gICAgICAgIHZhciB1bmlmb3JtcyA9IHt9O1xuICAgICAgICB2YXIgY29tbW9uTWF0ZXJpYWxJbmZvID0gbWF0ZXJpYWxJbmZvLmV4dGVuc2lvbnNbJ0tIUl9tYXRlcmlhbHNfY29tbW9uJ107XG4gICAgICAgIHVuaWZvcm1zID0gY29tbW9uTWF0ZXJpYWxJbmZvLnZhbHVlcyB8fCB7fTtcblxuICAgICAgICBpZiAodHlwZW9mIHVuaWZvcm1zLmRpZmZ1c2UgPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB1bmlmb3Jtcy5kaWZmdXNlID0gbGliLnRleHR1cmVzW3VuaWZvcm1zLmRpZmZ1c2VdIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiB1bmlmb3Jtcy5lbWlzc2lvbiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHVuaWZvcm1zLmVtaXNzaW9uID0gbGliLnRleHR1cmVzW3VuaWZvcm1zLmVtaXNzaW9uXSB8fCBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVuYWJsZWRUZXh0dXJlcyA9IFtdO1xuICAgICAgICBpZiAodW5pZm9ybXNbJ2RpZmZ1c2UnXSBpbnN0YW5jZW9mIFRleHR1cmUyRCkge1xuICAgICAgICAgICAgZW5hYmxlZFRleHR1cmVzLnB1c2goJ2RpZmZ1c2VNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUpIHtcbiAgICAgICAgICAgIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdub3JtYWxNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodW5pZm9ybXNbJ2VtaXNzaW9uJ10gaW5zdGFuY2VvZiBUZXh0dXJlMkQpIHtcbiAgICAgICAgICAgIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdlbWlzc2l2ZU1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXRlcmlhbDtcbiAgICAgICAgdmFyIGlzU3RhbmRhcmRNYXRlcmlhbCA9IHRoaXMudXNlU3RhbmRhcmRNYXRlcmlhbDtcbiAgICAgICAgaWYgKGlzU3RhbmRhcmRNYXRlcmlhbCkge1xuICAgICAgICAgICAgbWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWF0ZXJpYWxJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgZG91YmxlU2lkZWQ6IG1hdGVyaWFsSW5mby5kb3VibGVTaWRlZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgbmFtZTogbWF0ZXJpYWxJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgc2hhZGVyOiB0aGlzLl9nZXRTaGFkZXIoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1JPVUdITkVTUycpO1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfTUVUQUxORVNTJyk7XG5cbiAgICAgICAgICAgIGlmIChtYXRlcmlhbEluZm8uZG91YmxlU2lkZWQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVuaWZvcm1zLnRyYW5zcGFyZW50KSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZXB0aE1hc2sgPSBmYWxzZTtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlcHRoVGVzdCA9IHRydWU7XG4gICAgICAgICAgICBtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlmZnVzZVByb3AgPSB1bmlmb3Jtc1snZGlmZnVzZSddO1xuICAgICAgICBpZiAoZGlmZnVzZVByb3ApIHtcbiAgICAgICAgICAgIC8vIENvbG9yXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShkaWZmdXNlUHJvcCkpIHtcbiAgICAgICAgICAgICAgICBkaWZmdXNlUHJvcCA9IGRpZmZ1c2VQcm9wLnNsaWNlKDAsIDMpO1xuICAgICAgICAgICAgICAgIGlzU3RhbmRhcmRNYXRlcmlhbCA/IChtYXRlcmlhbC5jb2xvciA9IGRpZmZ1c2VQcm9wKVxuICAgICAgICAgICAgICAgICAgICA6IG1hdGVyaWFsLnNldCgnY29sb3InLCBkaWZmdXNlUHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gVGV4dHVyZVxuICAgICAgICAgICAgICAgIGlzU3RhbmRhcmRNYXRlcmlhbCA/IChtYXRlcmlhbC5kaWZmdXNlTWFwID0gZGlmZnVzZVByb3ApXG4gICAgICAgICAgICAgICAgICAgIDogbWF0ZXJpYWwuc2V0KCdkaWZmdXNlTWFwJywgZGlmZnVzZVByb3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBlbWlzc2lvblByb3AgPSB1bmlmb3Jtc1snZW1pc3Npb24nXTtcbiAgICAgICAgaWYgKGVtaXNzaW9uUHJvcCAhPSBudWxsKSB7XG4gICAgICAgICAgICAvLyBDb2xvclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW1pc3Npb25Qcm9wKSkge1xuICAgICAgICAgICAgICAgIGVtaXNzaW9uUHJvcCA9IGVtaXNzaW9uUHJvcC5zbGljZSgwLCAzKTtcbiAgICAgICAgICAgICAgICBpc1N0YW5kYXJkTWF0ZXJpYWwgPyAobWF0ZXJpYWwuZW1pc3Npb24gPSBlbWlzc2lvblByb3ApXG4gICAgICAgICAgICAgICAgICAgIDogbWF0ZXJpYWwuc2V0KCdlbWlzc2lvbicsIGVtaXNzaW9uUHJvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHsgLy8gVGV4dHVyZVxuICAgICAgICAgICAgICAgIGlzU3RhbmRhcmRNYXRlcmlhbCA/IChtYXRlcmlhbC5lbWlzc2l2ZU1hcCA9IGVtaXNzaW9uUHJvcClcbiAgICAgICAgICAgICAgICAgICAgOiBtYXRlcmlhbC5zZXQoJ2VtaXNzaXZlTWFwJywgZW1pc3Npb25Qcm9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgLy8gVE9ETyB0ZXhDb29yZFxuICAgICAgICAgICAgdmFyIG5vcm1hbFRleHR1cmVJbmRleCA9IG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlLmluZGV4O1xuICAgICAgICAgICAgaWYgKGlzU3RhbmRhcmRNYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLm5vcm1hbE1hcCA9IGxpYi50ZXh0dXJlc1tub3JtYWxUZXh0dXJlSW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXQoJ25vcm1hbE1hcCcsIGxpYi50ZXh0dXJlc1tub3JtYWxUZXh0dXJlSW5kZXhdIHx8IG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmlmb3Jtc1snc2hpbmluZXNzJ10gIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFyIGdsb3NzaW5lc3MgPSBNYXRoLmxvZyh1bmlmb3Jtc1snc2hpbmluZXNzJ10pIC8gTWF0aC5sb2coODE5Mik7XG4gICAgICAgICAgICAvLyBVbmlmb3JtIGdsb3NzaW5lc3NcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldCgnZ2xvc3NpbmVzcycsIGdsb3NzaW5lc3MpO1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdyb3VnaG5lc3MnLCAxIC0gZ2xvc3NpbmVzcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXQoJ2dsb3NzaW5lc3MnLCAwLjMpO1xuICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdyb3VnaG5lc3MnLCAwLjMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1bmlmb3Jtc1snc3BlY3VsYXInXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXQoJ3NwZWN1bGFyQ29sb3InLCB1bmlmb3Jtc1snc3BlY3VsYXInXS5zbGljZSgwLCAzKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVuaWZvcm1zWyd0cmFuc3BhcmVuY3knXSAhPSBudWxsKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5zZXQoJ2FscGhhJywgdW5pZm9ybXNbJ3RyYW5zcGFyZW5jeSddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBtYXRlcmlhbDtcbiAgICB9LFxuXG4gICAgX3Bick1ldGFsbGljUm91Z2huZXNzVG9TdGFuZGFyZDogZnVuY3Rpb24gKG1hdGVyaWFsSW5mbywgbWV0YWxsaWNSb3VnaG5lc3NNYXRJbmZvLCBsaWIpIHtcbiAgICAgICAgdmFyIGFscGhhVGVzdCA9IG1hdGVyaWFsSW5mby5hbHBoYU1vZGUgPT09ICdNQVNLJztcblxuICAgICAgICB2YXIgaXNTdGFuZGFyZE1hdGVyaWFsID0gdGhpcy51c2VTdGFuZGFyZE1hdGVyaWFsO1xuICAgICAgICB2YXIgbWF0ZXJpYWw7XG4gICAgICAgIHZhciBkaWZmdXNlTWFwLCByb3VnaG5lc3NNYXAsIG1ldGFsbmVzc01hcCwgbm9ybWFsTWFwLCBlbWlzc2l2ZU1hcCwgb2NjbHVzaW9uTWFwO1xuICAgICAgICB2YXIgZW5hYmxlZFRleHR1cmVzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBzY2FsYXIgbXVsdGlwbGllciBhcHBsaWVkIHRvIGVhY2ggbm9ybWFsIHZlY3RvciBvZiB0aGUgbm9ybWFsIHRleHR1cmUuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqXG4gICAgICAgICAqIFhYWCBUaGlzIHZhbHVlIGlzIGlnbm9yZWQgaWYgYG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlYCBpcyBub3Qgc3BlY2lmaWVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdmFyIG5vcm1hbFNjYWxlID0gMS4wO1xuXG4gICAgICAgIC8vIFRPRE8gdGV4Q29vcmRcbiAgICAgICAgaWYgKG1ldGFsbGljUm91Z2huZXNzTWF0SW5mby5iYXNlQ29sb3JUZXh0dXJlKSB7XG4gICAgICAgICAgICBkaWZmdXNlTWFwID0gbGliLnRleHR1cmVzW21ldGFsbGljUm91Z2huZXNzTWF0SW5mby5iYXNlQ29sb3JUZXh0dXJlLmluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgZGlmZnVzZU1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnZGlmZnVzZU1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtZXRhbGxpY1JvdWdobmVzc01hdEluZm8ubWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlKSB7XG4gICAgICAgICAgICByb3VnaG5lc3NNYXAgPSBtZXRhbG5lc3NNYXAgPSBsaWIudGV4dHVyZXNbbWV0YWxsaWNSb3VnaG5lc3NNYXRJbmZvLm1ldGFsbGljUm91Z2huZXNzVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIHJvdWdobmVzc01hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnbWV0YWxuZXNzTWFwJywgJ3JvdWdobmVzc01hcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRlcmlhbEluZm8ubm9ybWFsVGV4dHVyZSkge1xuXG4gICAgICAgICAgICBub3JtYWxNYXAgPSBsaWIudGV4dHVyZXNbbWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBub3JtYWxNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ25vcm1hbE1hcCcpO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1hdGVyaWFsSW5mby5ub3JtYWxUZXh0dXJlLnNjYWxlID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgICAgIG5vcm1hbFNjYWxlID0gbWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUuc2NhbGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmVtaXNzaXZlVGV4dHVyZSkge1xuICAgICAgICAgICAgZW1pc3NpdmVNYXAgPSBsaWIudGV4dHVyZXNbbWF0ZXJpYWxJbmZvLmVtaXNzaXZlVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIGVtaXNzaXZlTWFwICYmIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdlbWlzc2l2ZU1hcCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChtYXRlcmlhbEluZm8ub2NjbHVzaW9uVGV4dHVyZSkge1xuICAgICAgICAgICAgb2NjbHVzaW9uTWFwID0gbGliLnRleHR1cmVzW21hdGVyaWFsSW5mby5vY2NsdXNpb25UZXh0dXJlLmluZGV4XSB8fCBudWxsO1xuICAgICAgICAgICAgb2NjbHVzaW9uTWFwICYmIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdvY2NsdXNpb25NYXAnKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYmFzZUNvbG9yID0gbWV0YWxsaWNSb3VnaG5lc3NNYXRJbmZvLmJhc2VDb2xvckZhY3RvciB8fCBbMSwgMSwgMSwgMV07XG5cbiAgICAgICAgdmFyIGNvbW1vblByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBkaWZmdXNlTWFwOiBkaWZmdXNlTWFwIHx8IG51bGwsXG4gICAgICAgICAgICByb3VnaG5lc3NNYXA6IHJvdWdobmVzc01hcCB8fCBudWxsLFxuICAgICAgICAgICAgbWV0YWxuZXNzTWFwOiBtZXRhbG5lc3NNYXAgfHwgbnVsbCxcbiAgICAgICAgICAgIG5vcm1hbE1hcDogbm9ybWFsTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBvY2NsdXNpb25NYXA6IG9jY2x1c2lvbk1hcCB8fCBudWxsLFxuICAgICAgICAgICAgZW1pc3NpdmVNYXA6IGVtaXNzaXZlTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBjb2xvcjogYmFzZUNvbG9yLnNsaWNlKDAsIDMpLFxuICAgICAgICAgICAgYWxwaGE6IGJhc2VDb2xvclszXSxcbiAgICAgICAgICAgIG1ldGFsbmVzczogbWV0YWxsaWNSb3VnaG5lc3NNYXRJbmZvLm1ldGFsbGljRmFjdG9yIHx8IDAsXG4gICAgICAgICAgICByb3VnaG5lc3M6IG1ldGFsbGljUm91Z2huZXNzTWF0SW5mby5yb3VnaG5lc3NGYWN0b3IgfHwgMCxcbiAgICAgICAgICAgIGVtaXNzaW9uOiBtYXRlcmlhbEluZm8uZW1pc3NpdmVGYWN0b3IgfHwgWzAsIDAsIDBdLFxuICAgICAgICAgICAgZW1pc3Npb25JbnRlbnNpdHk6IDEsXG4gICAgICAgICAgICBhbHBoYUN1dG9mZjogbWF0ZXJpYWxJbmZvLmFscGhhQ3V0b2ZmIHx8IDAsXG4gICAgICAgICAgICBub3JtYWxTY2FsZTogbm9ybWFsU2NhbGVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGNvbW1vblByb3BlcnRpZXMucm91Z2huZXNzTWFwKSB7XG4gICAgICAgICAgICAvLyBJbiBnbFRGIG1ldGFsbGljRmFjdG9yIHdpbGwgZG8gbXVsdGlwbHksIHdoaWNoIGlzIGRpZmZlcmVudCBmcm9tIFN0YW5kYXJkTWF0ZXJpYWwuXG4gICAgICAgICAgICAvLyBTbyBzaW1wbHkgaWdub3JlIGl0XG4gICAgICAgICAgICBjb21tb25Qcm9wZXJ0aWVzLm1ldGFsbmVzcyA9IDAuNTtcbiAgICAgICAgICAgIGNvbW1vblByb3BlcnRpZXMucm91Z2huZXNzID0gMC41O1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1N0YW5kYXJkTWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IFN0YW5kYXJkTWF0ZXJpYWwodXRpbC5leHRlbmQoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1hdGVyaWFsSW5mby5uYW1lLFxuICAgICAgICAgICAgICAgIGFscGhhVGVzdDogYWxwaGFUZXN0LFxuICAgICAgICAgICAgICAgIGRvdWJsZVNpZGVkOiBtYXRlcmlhbEluZm8uZG91YmxlU2lkZWQsXG4gICAgICAgICAgICAgICAgLy8gRyBjaGFubmVsXG4gICAgICAgICAgICAgICAgcm91Z2huZXNzQ2hhbm5lbDogMSxcbiAgICAgICAgICAgICAgICAvLyBCIENoYW5uZWxcbiAgICAgICAgICAgICAgICBtZXRhbG5lc3NDaGFubmVsOiAyXG4gICAgICAgICAgICB9LCBjb21tb25Qcm9wZXJ0aWVzKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG5cbiAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBtYXRlcmlhbEluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICBzaGFkZXI6IHRoaXMuX2dldFNoYWRlcigpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfUk9VR0hORVNTJyk7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9NRVRBTE5FU1MnKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnUk9VR0hORVNTX0NIQU5ORUwnLCAxKTtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnTUVUQUxORVNTX0NIQU5ORUwnLCAyKTtcblxuICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdESUZGVVNFTUFQX0FMUEhBX0FMUEhBJyk7XG5cbiAgICAgICAgICAgIGlmIChhbHBoYVRlc3QpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0FMUEhBX1RFU1QnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtYXRlcmlhbEluZm8uZG91YmxlU2lkZWQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBtYXRlcmlhbC5zZXQoY29tbW9uUHJvcGVydGllcyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmFscGhhTW9kZSA9PT0gJ0JMRU5EJykge1xuICAgICAgICAgICAgbWF0ZXJpYWwuZGVwdGhNYXNrID0gZmFsc2U7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZXB0aFRlc3QgPSB0cnVlO1xuICAgICAgICAgICAgbWF0ZXJpYWwudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1hdGVyaWFsO1xuICAgIH0sXG5cbiAgICBfcGJyU3BlY3VsYXJHbG9zc2luZXNzVG9TdGFuZGFyZDogZnVuY3Rpb24gKG1hdGVyaWFsSW5mbywgc3BlY3VsYXJHbG9zc2luZXNzTWF0SW5mbywgbGliKSB7XG4gICAgICAgIHZhciBhbHBoYVRlc3QgPSBtYXRlcmlhbEluZm8uYWxwaGFNb2RlID09PSAnTUFTSyc7XG5cbiAgICAgICAgaWYgKHRoaXMudXNlU3RhbmRhcmRNYXRlcmlhbCkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignU3RhbmRhcmRNYXRlcmlhbCBkb2VzblxcJ3Qgc3VwcG9ydCBzcGVjdWxhciBnbG9zc2luZXNzIHdvcmtmbG93IHlldCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1hdGVyaWFsO1xuICAgICAgICB2YXIgZGlmZnVzZU1hcCwgZ2xvc3NpbmVzc01hcCwgc3BlY3VsYXJNYXAsIG5vcm1hbE1hcCwgZW1pc3NpdmVNYXAsIG9jY2x1c2lvbk1hcDtcbiAgICAgICAgdmFyIGVuYWJsZWRUZXh0dXJlcyA9IFtdO1xuICAgICAgICAvLyBUT0RPIHRleENvb3JkXG4gICAgICAgIGlmIChzcGVjdWxhckdsb3NzaW5lc3NNYXRJbmZvLmRpZmZ1c2VUZXh0dXJlKSB7XG4gICAgICAgICAgICBkaWZmdXNlTWFwID0gbGliLnRleHR1cmVzW3NwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uZGlmZnVzZVRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBkaWZmdXNlTWFwICYmIGVuYWJsZWRUZXh0dXJlcy5wdXNoKCdkaWZmdXNlTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSkge1xuICAgICAgICAgICAgZ2xvc3NpbmVzc01hcCA9IHNwZWN1bGFyTWFwID0gbGliLnRleHR1cmVzW3NwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIGdsb3NzaW5lc3NNYXAgJiYgZW5hYmxlZFRleHR1cmVzLnB1c2goJ3NwZWN1bGFyTWFwJywgJ2dsb3NzaW5lc3NNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm5vcm1hbFRleHR1cmUpIHtcbiAgICAgICAgICAgIG5vcm1hbE1hcCA9IGxpYi50ZXh0dXJlc1ttYXRlcmlhbEluZm8ubm9ybWFsVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIG5vcm1hbE1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnbm9ybWFsTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5lbWlzc2l2ZVRleHR1cmUpIHtcbiAgICAgICAgICAgIGVtaXNzaXZlTWFwID0gbGliLnRleHR1cmVzW21hdGVyaWFsSW5mby5lbWlzc2l2ZVRleHR1cmUuaW5kZXhdIHx8IG51bGw7XG4gICAgICAgICAgICBlbWlzc2l2ZU1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnZW1pc3NpdmVNYXAnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLm9jY2x1c2lvblRleHR1cmUpIHtcbiAgICAgICAgICAgIG9jY2x1c2lvbk1hcCA9IGxpYi50ZXh0dXJlc1ttYXRlcmlhbEluZm8ub2NjbHVzaW9uVGV4dHVyZS5pbmRleF0gfHwgbnVsbDtcbiAgICAgICAgICAgIG9jY2x1c2lvbk1hcCAmJiBlbmFibGVkVGV4dHVyZXMucHVzaCgnb2NjbHVzaW9uTWFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRpZmZ1c2VDb2xvciA9IHNwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uZGlmZnVzZUZhY3RvciB8fCBbMSwgMSwgMSwgMV07XG5cbiAgICAgICAgdmFyIGNvbW1vblByb3BlcnRpZXMgPSB7XG4gICAgICAgICAgICBkaWZmdXNlTWFwOiBkaWZmdXNlTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBnbG9zc2luZXNzTWFwOiBnbG9zc2luZXNzTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBzcGVjdWxhck1hcDogc3BlY3VsYXJNYXAgfHwgbnVsbCxcbiAgICAgICAgICAgIG5vcm1hbE1hcDogbm9ybWFsTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBlbWlzc2l2ZU1hcDogZW1pc3NpdmVNYXAgfHwgbnVsbCxcbiAgICAgICAgICAgIG9jY2x1c2lvbk1hcDogb2NjbHVzaW9uTWFwIHx8IG51bGwsXG4gICAgICAgICAgICBjb2xvcjogZGlmZnVzZUNvbG9yLnNsaWNlKDAsIDMpLFxuICAgICAgICAgICAgYWxwaGE6IGRpZmZ1c2VDb2xvclszXSxcbiAgICAgICAgICAgIHNwZWN1bGFyQ29sb3I6IHNwZWN1bGFyR2xvc3NpbmVzc01hdEluZm8uc3BlY3VsYXJGYWN0b3IgfHwgWzEsIDEsIDFdLFxuICAgICAgICAgICAgZ2xvc3NpbmVzczogc3BlY3VsYXJHbG9zc2luZXNzTWF0SW5mby5nbG9zc2luZXNzRmFjdG9yIHx8IDAsXG4gICAgICAgICAgICBlbWlzc2lvbjogbWF0ZXJpYWxJbmZvLmVtaXNzaXZlRmFjdG9yIHx8IFswLCAwLCAwXSxcbiAgICAgICAgICAgIGVtaXNzaW9uSW50ZW5zaXR5OiAxLFxuICAgICAgICAgICAgYWxwaGFDdXRvZmY6IG1hdGVyaWFsSW5mby5hbHBoYUN1dG9mZiA9PSBudWxsID8gMC45IDogbWF0ZXJpYWxJbmZvLmFscGhhQ3V0b2ZmXG4gICAgICAgIH07XG4gICAgICAgIGlmIChjb21tb25Qcm9wZXJ0aWVzLmdsb3NzaW5lc3NNYXApIHtcbiAgICAgICAgICAgIC8vIElnbm9yZSBzcGVjdWxhckZhY3RvclxuICAgICAgICAgICAgY29tbW9uUHJvcGVydGllcy5nbG9zc2luZXNzID0gMC41O1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb21tb25Qcm9wZXJ0aWVzLnNwZWN1bGFyTWFwKSB7XG4gICAgICAgICAgICAvLyBJZ25vcmUgc3BlY3VsYXJGYWN0b3JcbiAgICAgICAgICAgIGNvbW1vblByb3BlcnRpZXMuc3BlY3VsYXJDb2xvciA9IFsxLCAxLCAxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIG5hbWU6IG1hdGVyaWFsSW5mby5uYW1lLFxuICAgICAgICAgICAgc2hhZGVyOiB0aGlzLl9nZXRTaGFkZXIoKVxuICAgICAgICB9KTtcblxuICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0dMT1NTSU5FU1NfQ0hBTk5FTCcsIDMpO1xuICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RJRkZVU0VNQVBfQUxQSEFfQUxQSEEnKTtcblxuICAgICAgICBpZiAoYWxwaGFUZXN0KSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0FMUEhBX1RFU1QnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobWF0ZXJpYWxJbmZvLmRvdWJsZVNpZGVkKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgbWF0ZXJpYWwuc2V0KGNvbW1vblByb3BlcnRpZXMpO1xuXG4gICAgICAgIGlmIChtYXRlcmlhbEluZm8uYWxwaGFNb2RlID09PSAnQkxFTkQnKSB7XG4gICAgICAgICAgICBtYXRlcmlhbC5kZXB0aE1hc2sgPSBmYWxzZTtcbiAgICAgICAgICAgIG1hdGVyaWFsLmRlcHRoVGVzdCA9IHRydWU7XG4gICAgICAgICAgICBtYXRlcmlhbC50cmFuc3BhcmVudCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgfSxcblxuICAgIF9wYXJzZU1hdGVyaWFsczogZnVuY3Rpb24gKGpzb24sIGxpYikge1xuICAgICAgICB1dGlsLmVhY2goanNvbi5tYXRlcmlhbHMsIGZ1bmN0aW9uIChtYXRlcmlhbEluZm8sIGlkeCkge1xuICAgICAgICAgICAgaWYgKG1hdGVyaWFsSW5mby5leHRlbnNpb25zICYmIG1hdGVyaWFsSW5mby5leHRlbnNpb25zWydLSFJfbWF0ZXJpYWxzX2NvbW1vbiddKSB7XG4gICAgICAgICAgICAgICAgbGliLm1hdGVyaWFsc1tpZHhdID0gdGhpcy5fS0hSQ29tbW9uTWF0ZXJpYWxUb1N0YW5kYXJkKG1hdGVyaWFsSW5mbywgbGliKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG1hdGVyaWFsSW5mby5leHRlbnNpb25zICYmIG1hdGVyaWFsSW5mby5leHRlbnNpb25zWydLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcyddKSB7XG4gICAgICAgICAgICAgICAgbGliLm1hdGVyaWFsc1tpZHhdID0gdGhpcy5fcGJyU3BlY3VsYXJHbG9zc2luZXNzVG9TdGFuZGFyZChtYXRlcmlhbEluZm8sIG1hdGVyaWFsSW5mby5leHRlbnNpb25zWydLSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcyddLCBsaWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGliLm1hdGVyaWFsc1tpZHhdID0gdGhpcy5fcGJyTWV0YWxsaWNSb3VnaG5lc3NUb1N0YW5kYXJkKG1hdGVyaWFsSW5mbywgbWF0ZXJpYWxJbmZvLnBick1ldGFsbGljUm91Z2huZXNzIHx8IHt9LCBsaWIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgX3BhcnNlTWVzaGVzOiBmdW5jdGlvbiAoanNvbiwgbGliKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICB1dGlsLmVhY2goanNvbi5tZXNoZXMsIGZ1bmN0aW9uIChtZXNoSW5mbywgaWR4KSB7XG4gICAgICAgICAgICBsaWIubWVzaGVzW2lkeF0gPSBbXTtcbiAgICAgICAgICAgIC8vIEdlb21ldHJ5XG4gICAgICAgICAgICBmb3IgKHZhciBwcCA9IDA7IHBwIDwgbWVzaEluZm8ucHJpbWl0aXZlcy5sZW5ndGg7IHBwKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJpbWl0aXZlSW5mbyA9IG1lc2hJbmZvLnByaW1pdGl2ZXNbcHBdO1xuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgICAgICAgICAgICAgICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAvLyBQRU5ESUdOXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IG1lc2hJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kaW5nQm94OiBuZXcgQm91bmRpbmdCb3goKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIC8vIFBhcnNlIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWNzID0gT2JqZWN0LmtleXMocHJpbWl0aXZlSW5mby5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBzcyA9IDA7IHNzIDwgc2VtYW50aWNzLmxlbmd0aDsgc3MrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VtYW50aWMgPSBzZW1hbnRpY3Nbc3NdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYWNjZXNzb3JJZHggPSBwcmltaXRpdmVJbmZvLmF0dHJpYnV0ZXNbc2VtYW50aWNdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlSW5mbyA9IGpzb24uYWNjZXNzb3JzW2FjY2Vzc29ySWR4XTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZU5hbWUgPSBzZW1hbnRpY0F0dHJpYnV0ZU1hcFtzZW1hbnRpY107XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXR0cmlidXRlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHNpemUgPSBTSVpFX01BUFthdHRyaWJ1dGVJbmZvLnR5cGVdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXR0cmlidXRlQXJyYXkgPSBnZXRBY2Nlc3NvckRhdGEoanNvbiwgbGliLCBhY2Nlc3NvcklkeCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFdlYkdMIGF0dHJpYnV0ZSBidWZmZXIgbm90IHN1cHBvcnQgdWludDMyLlxuICAgICAgICAgICAgICAgICAgICAvLyBEaXJlY3QgdXNlIEZsb2F0MzJBcnJheSBtYXkgYWxzbyBoYXZlIGlzc3VlLlxuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlQXJyYXkgaW5zdGFuY2VvZiB2ZW5kb3IuVWludDMyQXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZUFycmF5ID0gbmV3IEZsb2F0MzJBcnJheShhdHRyaWJ1dGVBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbWFudGljID09PSAnV0VJR0hUU18wJyAmJiBzaXplID09PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWlnaHQgZGF0YSBpbiBRVEVLIGhhcyBvbmx5IDMgY29tcG9uZW50LCB0aGUgbGFzdCBjb21wb25lbnQgY2FuIGJlIGV2YWx1YXRlZCBzaW5jZSBpdCBpcyBub3JtYWxpemVkXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgd2VpZ2h0QXJyYXkgPSBuZXcgYXR0cmlidXRlQXJyYXkuY29uc3RydWN0b3IoYXR0cmlidXRlSW5mby5jb3VudCAqIDMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVJbmZvLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTQgPSBpICogNCwgaTMgPSBpICogMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdzEgPSBhdHRyaWJ1dGVBcnJheVtpNF0sIHcyID0gYXR0cmlidXRlQXJyYXlbaTQgKyAxXSwgdzMgPSBhdHRyaWJ1dGVBcnJheVtpNCArIDJdLCB3NCA9IGF0dHJpYnV0ZUFycmF5W2k0ICsgM107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHdTdW0gPSB3MSArIHcyICsgdzMgKyB3NDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRBcnJheVtpM10gPSB3MSAvIHdTdW07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0QXJyYXlbaTMgKyAxXSA9IHcyIC8gd1N1bTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3ZWlnaHRBcnJheVtpMyArIDJdID0gdzMgLyB3U3VtO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS52YWx1ZSA9IHdlaWdodEFycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHNlbWFudGljID09PSAnQ09MT1JfMCcgJiYgc2l6ZSA9PT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbG9yQXJyYXkgPSBuZXcgYXR0cmlidXRlQXJyYXkuY29uc3RydWN0b3IoYXR0cmlidXRlSW5mby5jb3VudCAqIDQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRyaWJ1dGVJbmZvLmNvdW50OyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaTQgPSBpICogNCwgaTMgPSBpICogMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckFycmF5W2k0XSA9IGF0dHJpYnV0ZUFycmF5W2kzXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvckFycmF5W2k0ICsgMV0gPSBhdHRyaWJ1dGVBcnJheVtpMyArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQXJyYXlbaTQgKyAyXSA9IGF0dHJpYnV0ZUFycmF5W2kzICsgMl07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JBcnJheVtpNCArIDNdID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbYXR0cmlidXRlTmFtZV0udmFsdWUgPSBjb2xvckFycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS52YWx1ZSA9IGF0dHJpYnV0ZUFycmF5O1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZVR5cGUgPSAnZmxvYXQnO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cmlidXRlQXJyYXkgaW5zdGFuY2VvZiB2ZW5kb3IuVWludDE2QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZVR5cGUgPSAndXNob3J0JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhdHRyaWJ1dGVBcnJheSBpbnN0YW5jZW9mIHZlbmRvci5JbnQxNkFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVUeXBlID0gJ3Nob3J0JztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhdHRyaWJ1dGVBcnJheSBpbnN0YW5jZW9mIHZlbmRvci5VaW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVUeXBlID0gJ3VieXRlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhdHRyaWJ1dGVBcnJheSBpbnN0YW5jZW9mIHZlbmRvci5JbnQ4QXJyYXkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZVR5cGUgPSAnYnl0ZSc7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYXR0cmlidXRlc1thdHRyaWJ1dGVOYW1lXS50eXBlID0gYXR0cmlidXRlVHlwZTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VtYW50aWMgPT09ICdQT1NJVElPTicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJvdW5kaW5nIEJveFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IGF0dHJpYnV0ZUluZm8ubWluO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IGF0dHJpYnV0ZUluZm8ubWF4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5LmJvdW5kaW5nQm94Lm1pbi5zZXQobWluWzBdLCBtaW5bMV0sIG1pblsyXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuYm91bmRpbmdCb3gubWF4LnNldChtYXhbMF0sIG1heFsxXSwgbWF4WzJdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIFBhcnNlIGluZGljZXNcbiAgICAgICAgICAgICAgICBpZiAocHJpbWl0aXZlSW5mby5pbmRpY2VzICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlcyA9IGdldEFjY2Vzc29yRGF0YShqc29uLCBsaWIsIHByaW1pdGl2ZUluZm8uaW5kaWNlcywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChnZW9tZXRyeS52ZXJ0ZXhDb3VudCA8PSAweGZmZmYgJiYgZ2VvbWV0cnkuaW5kaWNlcyBpbnN0YW5jZW9mIHZlbmRvci5VaW50MzJBcnJheSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlcyA9IG5ldyB2ZW5kb3IuVWludDE2QXJyYXkoZ2VvbWV0cnkuaW5kaWNlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYoZ2VvbWV0cnkuaW5kaWNlcyBpbnN0YW5jZW9mIHZlbmRvci5VaW50OEFycmF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5pbmRpY2VzID0gbmV3IHZlbmRvci5VaW50MTZBcnJheShnZW9tZXRyeS5pbmRpY2VzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IGxpYi5tYXRlcmlhbHNbcHJpbWl0aXZlSW5mby5tYXRlcmlhbF07XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsSW5mbyA9IChqc29uLm1hdGVyaWFscyB8fCBbXSlbcHJpbWl0aXZlSW5mby5tYXRlcmlhbF07XG4gICAgICAgICAgICAgICAgLy8gVXNlIGRlZmF1bHQgbWF0ZXJpYWxcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRlcjogc2VsZi5fZ2V0U2hhZGVyKClcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBtZXNoID0gbmV3IE1lc2goe1xuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogW01lc2guUE9JTlRTLCBNZXNoLkxJTkVTLCBNZXNoLkxJTkVfTE9PUCwgTWVzaC5MSU5FX1NUUklQLCBNZXNoLlRSSUFOR0xFUywgTWVzaC5UUklBTkdMRV9TVFJJUCwgTWVzaC5UUklBTkdMRV9GQU5dW3ByaW1pdGl2ZUluZm8ubW9kZV0gfHwgTWVzaC5UUklBTkdMRVMsXG4gICAgICAgICAgICAgICAgICAgIGlnbm9yZUdCdWZmZXI6IG1hdGVyaWFsLnRyYW5zcGFyZW50XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsSW5mbyAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc2guY3VsbGluZyA9ICFtYXRlcmlhbEluZm8uZG91YmxlU2lkZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghbWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmdlbmVyYXRlVmVydGV4Tm9ybWFscygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoKChtYXRlcmlhbCBpbnN0YW5jZW9mIFN0YW5kYXJkTWF0ZXJpYWwpICYmIG1hdGVyaWFsLm5vcm1hbE1hcClcbiAgICAgICAgICAgICAgICAgICAgfHwgKG1hdGVyaWFsLmlzVGV4dHVyZUVuYWJsZWQoJ25vcm1hbE1hcCcpKVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIW1lc2guZ2VvbWV0cnkuYXR0cmlidXRlcy50YW5nZW50LnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNoLmdlb21ldHJ5LmdlbmVyYXRlVGFuZ2VudHMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLmNvbG9yLnZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuZGVmaW5lKCdWRVJURVhfQ09MT1InKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtZXNoLm5hbWUgPSBHTFRGTG9hZGVyLmdlbmVyYXRlTWVzaE5hbWUoanNvbi5tZXNoZXMsIGlkeCwgcHApO1xuXG4gICAgICAgICAgICAgICAgbGliLm1lc2hlc1tpZHhdLnB1c2gobWVzaCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH0sXG5cbiAgICBfaW5zdGFuY2VDYW1lcmE6IGZ1bmN0aW9uIChqc29uLCBub2RlSW5mbykge1xuICAgICAgICB2YXIgY2FtZXJhSW5mbyA9IGpzb24uY2FtZXJhc1tub2RlSW5mby5jYW1lcmFdO1xuXG4gICAgICAgIGlmIChjYW1lcmFJbmZvLnR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHtcbiAgICAgICAgICAgIHZhciBwZXJzcGVjdGl2ZUluZm8gPSBjYW1lcmFJbmZvLnBlcnNwZWN0aXZlIHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSh7XG4gICAgICAgICAgICAgICAgbmFtZTogbm9kZUluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICBhc3BlY3Q6IHBlcnNwZWN0aXZlSW5mby5hc3BlY3RSYXRpbyxcbiAgICAgICAgICAgICAgICBmb3Y6IHBlcnNwZWN0aXZlSW5mby55Zm92IC8gTWF0aC5QSSAqIDE4MCxcbiAgICAgICAgICAgICAgICBmYXI6IHBlcnNwZWN0aXZlSW5mby56ZmFyLFxuICAgICAgICAgICAgICAgIG5lYXI6IHBlcnNwZWN0aXZlSW5mby56bmVhclxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2YXIgb3J0aG9ncmFwaGljSW5mbyA9IGNhbWVyYUluZm8ub3J0aG9ncmFwaGljIHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcnRob2dyYXBoaWNDYW1lcmEoe1xuICAgICAgICAgICAgICAgIG5hbWU6IG5vZGVJbmZvLm5hbWUsXG4gICAgICAgICAgICAgICAgdG9wOiBvcnRob2dyYXBoaWNJbmZvLnltYWcsXG4gICAgICAgICAgICAgICAgcmlnaHQ6IG9ydGhvZ3JhcGhpY0luZm8ueG1hZyxcbiAgICAgICAgICAgICAgICBsZWZ0OiAtb3J0aG9ncmFwaGljSW5mby54bWFnLFxuICAgICAgICAgICAgICAgIGJvdHRvbTogLW9ydGhvZ3JhcGhpY0luZm8ueW1hZyxcbiAgICAgICAgICAgICAgICBuZWFyOiBvcnRob2dyYXBoaWNJbmZvLnpuZWFyLFxuICAgICAgICAgICAgICAgIGZhcjogb3J0aG9ncmFwaGljSW5mby56ZmFyXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfcGFyc2VOb2RlczogZnVuY3Rpb24gKGpzb24sIGxpYikge1xuXG4gICAgICAgIGZ1bmN0aW9uIGluc3RhbmNlTWVzaChtZXNoKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IE1lc2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IG1lc2gubmFtZSxcbiAgICAgICAgICAgICAgICBnZW9tZXRyeTogbWVzaC5nZW9tZXRyeSxcbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogbWVzaC5tYXRlcmlhbCxcbiAgICAgICAgICAgICAgICBjdWxsaW5nOiBtZXNoLmN1bGxpbmcsXG4gICAgICAgICAgICAgICAgbW9kZTogbWVzaC5tb2RlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxpYi5pbnN0YW5jZWRNZXNoZXMgPSBbXTtcblxuICAgICAgICB1dGlsLmVhY2goanNvbi5ub2RlcywgZnVuY3Rpb24gKG5vZGVJbmZvLCBpZHgpIHtcbiAgICAgICAgICAgIHZhciBub2RlO1xuICAgICAgICAgICAgaWYgKG5vZGVJbmZvLmNhbWVyYSAhPSBudWxsICYmIHRoaXMuaW5jbHVkZUNhbWVyYSkge1xuICAgICAgICAgICAgICAgIG5vZGUgPSB0aGlzLl9pbnN0YW5jZUNhbWVyYShqc29uLCBub2RlSW5mbyk7XG4gICAgICAgICAgICAgICAgbGliLmNhbWVyYXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGVJbmZvLm1lc2ggIT0gbnVsbCAmJiB0aGlzLmluY2x1ZGVNZXNoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByaW1pdGl2ZXMgPSBsaWIubWVzaGVzW25vZGVJbmZvLm1lc2hdO1xuICAgICAgICAgICAgICAgIGlmIChwcmltaXRpdmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmltaXRpdmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVwbGFjZSB0aGUgbm9kZSB3aXRoIG1lc2ggZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUgPSBpbnN0YW5jZU1lc2gocHJpbWl0aXZlc1swXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNldE5hbWUobm9kZUluZm8ubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWIuaW5zdGFuY2VkTWVzaGVzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gbmV3IE5vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuc2V0TmFtZShub2RlSW5mby5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgcHJpbWl0aXZlcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdNZXNoID0gaW5zdGFuY2VNZXNoKHByaW1pdGl2ZXNbal0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkKG5ld01lc2gpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpYi5pbnN0YW5jZWRNZXNoZXMucHVzaChuZXdNZXNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgTm9kZSgpO1xuICAgICAgICAgICAgICAgIC8vIFBFTkRJTkcgRHVscGxpY2F0ZSBuYW1lLlxuICAgICAgICAgICAgICAgIG5vZGUuc2V0TmFtZShub2RlSW5mby5uYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlSW5mby5tYXRyaXgpIHtcbiAgICAgICAgICAgICAgICBub2RlLmxvY2FsVHJhbnNmb3JtLnNldEFycmF5KG5vZGVJbmZvLm1hdHJpeCk7XG4gICAgICAgICAgICAgICAgbm9kZS5kZWNvbXBvc2VMb2NhbFRyYW5zZm9ybSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG5vZGVJbmZvLnRyYW5zbGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUucG9zaXRpb24uc2V0QXJyYXkobm9kZUluZm8udHJhbnNsYXRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm9kZUluZm8ucm90YXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZS5yb3RhdGlvbi5zZXRBcnJheShub2RlSW5mby5yb3RhdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub2RlSW5mby5zY2FsZSkge1xuICAgICAgICAgICAgICAgICAgICBub2RlLnNjYWxlLnNldEFycmF5KG5vZGVJbmZvLnNjYWxlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxpYi5ub2Rlc1tpZHhdID0gbm9kZTtcbiAgICAgICAgfSwgdGhpcyk7XG5cbiAgICAgICAgLy8gQnVpbGQgaGllcmFyY2h5XG4gICAgICAgIHV0aWwuZWFjaChqc29uLm5vZGVzLCBmdW5jdGlvbiAobm9kZUluZm8sIGlkeCkge1xuICAgICAgICAgICAgdmFyIG5vZGUgPSBsaWIubm9kZXNbaWR4XTtcbiAgICAgICAgICAgIGlmIChub2RlSW5mby5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZUluZm8uY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNoaWxkSWR4ID0gbm9kZUluZm8uY2hpbGRyZW5baV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBjaGlsZCA9IGxpYi5ub2Rlc1tjaGlsZElkeF07XG4gICAgICAgICAgICAgICAgICAgIG5vZGUuYWRkKGNoaWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgX3BhcnNlQW5pbWF0aW9uczogZnVuY3Rpb24gKGpzb24sIGxpYikge1xuICAgICAgICBmdW5jdGlvbiBjaGVja0NoYW5uZWxQYXRoKGNoYW5uZWxJbmZvKSB7XG4gICAgICAgICAgICBpZiAoY2hhbm5lbEluZm8ucGF0aCA9PT0gJ3dlaWdodHMnKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdHTFRGTG9hZGVyIG5vdCBzdXBwb3J0IG1vcnBoIHRhcmdldHMgeWV0LicpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0Q2hhbm5lbEhhc2goY2hhbm5lbEluZm8sIGFuaW1hdGlvbkluZm8pIHtcbiAgICAgICAgICAgIHJldHVybiBjaGFubmVsSW5mby50YXJnZXQubm9kZSArICdfJyArIGFuaW1hdGlvbkluZm8uc2FtcGxlcnNbY2hhbm5lbEluZm8uc2FtcGxlcl0uaW5wdXQ7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdGltZUFjY2Vzc29yTXVsdGlwbGllZCA9IHt9O1xuICAgICAgICB1dGlsLmVhY2goanNvbi5hbmltYXRpb25zLCBmdW5jdGlvbiAoYW5pbWF0aW9uSW5mbywgaWR4KSB7XG4gICAgICAgICAgICB2YXIgY2hhbm5lbHMgPSBhbmltYXRpb25JbmZvLmNoYW5uZWxzLmZpbHRlcihjaGVja0NoYW5uZWxQYXRoKTtcblxuICAgICAgICAgICAgaWYgKCFjaGFubmVscy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdHJhY2tzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYW5uZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5uZWxJbmZvID0gY2hhbm5lbHNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGNoYW5uZWxIYXNoID0gZ2V0Q2hhbm5lbEhhc2goY2hhbm5lbEluZm8sIGFuaW1hdGlvbkluZm8pO1xuXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldE5vZGUgPSBsaWIubm9kZXNbY2hhbm5lbEluZm8udGFyZ2V0Lm5vZGVdO1xuICAgICAgICAgICAgICAgIHZhciB0cmFjayA9IHRyYWNrc1tjaGFubmVsSGFzaF07XG4gICAgICAgICAgICAgICAgdmFyIHNhbXBsZXJJbmZvID0gYW5pbWF0aW9uSW5mby5zYW1wbGVyc1tjaGFubmVsSW5mby5zYW1wbGVyXTtcblxuICAgICAgICAgICAgICAgIGlmICghdHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgdHJhY2sgPSB0cmFja3NbY2hhbm5lbEhhc2hdID0gbmV3IFNhbXBsZXJUcmFjayh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0YXJnZXROb2RlID8gdGFyZ2V0Tm9kZS5uYW1lIDogJycsXG4gICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldE5vZGVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRyYWNrLnRhcmdldE5vZGVJbmRleCA9IGNoYW5uZWxJbmZvLnRhcmdldC5ub2RlO1xuICAgICAgICAgICAgICAgICAgICB0cmFjay5jaGFubmVscy50aW1lID0gZ2V0QWNjZXNzb3JEYXRhKGpzb24sIGxpYiwgc2FtcGxlckluZm8uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWVMZW4gPSB0cmFjay5jaGFubmVscy50aW1lLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aW1lQWNjZXNzb3JNdWx0aXBsaWVkW3NhbXBsZXJJbmZvLmlucHV0XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBmcmFtZUxlbjsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhY2suY2hhbm5lbHMudGltZVtrXSAqPSAxMDAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZUFjY2Vzc29yTXVsdGlwbGllZFtzYW1wbGVySW5mby5pbnB1dF0gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGludGVycG9sYXRpb24gPSBzYW1wbGVySW5mby5pbnRlcnBvbGF0aW9uIHx8ICdMSU5FQVInO1xuICAgICAgICAgICAgICAgIGlmIChpbnRlcnBvbGF0aW9uICE9PSAnTElORUFSJykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0dMVEZMb2FkZXIgb25seSBzdXBwb3J0IExJTkVBUiBpbnRlcnBvbGF0aW9uLicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwYXRoID0gY2hhbm5lbEluZm8udGFyZ2V0LnBhdGg7XG4gICAgICAgICAgICAgICAgaWYgKHBhdGggPT09ICd0cmFuc2xhdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9ICdwb3NpdGlvbic7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJhY2suY2hhbm5lbHNbcGF0aF0gPSBnZXRBY2Nlc3NvckRhdGEoanNvbiwgbGliLCBzYW1wbGVySW5mby5vdXRwdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHRyYWNrc0xpc3QgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGhhc2ggaW4gdHJhY2tzKSB7XG4gICAgICAgICAgICAgICAgdHJhY2tzTGlzdC5wdXNoKHRyYWNrc1toYXNoXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgY2xpcCA9IG5ldyBUcmFja0NsaXAoe1xuICAgICAgICAgICAgICAgIG5hbWU6IGFuaW1hdGlvbkluZm8ubmFtZSxcbiAgICAgICAgICAgICAgICBsb29wOiB0cnVlLFxuICAgICAgICAgICAgICAgIHRyYWNrczogdHJhY2tzTGlzdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsaWIuY2xpcHMucHVzaChjbGlwKTtcbiAgICAgICAgfSwgdGhpcyk7XG5cblxuICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgIHZhciBtYXhMaWZlID0gbGliLmNsaXBzLnJlZHVjZShmdW5jdGlvbiAobWF4VGltZSwgY2xpcCkge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1heFRpbWUsIGNsaXAubGlmZSk7XG4gICAgICAgIH0sIDApO1xuICAgICAgICBsaWIuY2xpcHMuZm9yRWFjaChmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICAgICAgY2xpcC5saWZlID0gbWF4TGlmZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGxpYi5jbGlwcztcbiAgICB9XG59KTtcblxuR0xURkxvYWRlci5nZW5lcmF0ZU1lc2hOYW1lID0gZnVuY3Rpb24gKG1lc2hlcywgaWR4LCBwcmltaXRpdmVJZHgpIHtcbiAgICB2YXIgbWVzaEluZm8gPSBtZXNoZXNbaWR4XTtcbiAgICB2YXIgbWVzaE5hbWUgPSBtZXNoSW5mby5uYW1lIHx8ICgnbWVzaF8nICsgaWR4KTtcbiAgICByZXR1cm4gcHJpbWl0aXZlSWR4ID09PSAwID8gbWVzaE5hbWUgOiAobWVzaE5hbWUgKyAnJCcgKyBwcmltaXRpdmVJZHgpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgR0xURkxvYWRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9sb2FkZXIvR0xURi5qc1xuLy8gbW9kdWxlIGlkID0gODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///81\n");

/***/ }),
/* 82 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__shader_source_standard_glsl_js__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_util__ = __webpack_require__(11);\n\n\n\n\n\n\n// Import standard shader\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__shader_source_standard_glsl_js__[\"a\" /* default */]);\n\nvar TEXTURE_PROPERTIES = ['diffuseMap', 'normalMap', 'roughnessMap', 'metalnessMap', 'emissiveMap', 'environmentMap', 'brdfLookup', 'ssaoMap', 'aoMap'];\nvar SIMPLE_PROPERTIES = ['color', 'emission', 'emissionIntensity', 'alpha', 'roughness', 'metalness', 'uvRepeat', 'uvOffset', 'aoIntensity', 'alphaCutoff', 'normalScale'];\nvar PROPERTIES_CHANGE_SHADER = ['linear', 'encodeRGBM', 'decodeRGBM', 'doubleSided', 'alphaTest', 'roughnessChannel', 'metalnessChannel', 'environmentMapPrefiltered'];\n\nvar NUM_DEFINE_MAP = {\n    'roughnessChannel': 'ROUGHNESS_CHANNEL',\n    'metalnessChannel': 'METALNESS_CHANNEL'\n};\nvar BOOL_DEFINE_MAP = {\n    'linear': 'SRGB_DECODE',\n    'encodeRGBM': 'RGBM_ENCODE',\n    'decodeRGBM': 'RGBM_DECODE',\n    'doubleSided': 'DOUBLE_SIDED',\n    'alphaTest': 'ALPHA_TEST',\n    'environmentMapPrefiltered': 'ENVIRONMENTMAP_PREFILTER'\n};\n\n\nvar standardShader;\n/**\n * Standard material without custom shader.\n * @constructor clay.StandardMaterial\n * @extends clay.Base\n * @example\n * var mat = new clay.StandardMaterial({\n *     color: [1, 1, 1],\n *     diffuseMap: diffuseTexture\n * });\n * mat.roughness = 1;\n */\nvar StandardMaterial = __WEBPACK_IMPORTED_MODULE_0__Material__[\"a\" /* default */].extend(function () {\n    if (!standardShader) {\n        standardShader = new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.standardMR.fragment'));\n    }\n    return /** @lends clay.StandardMaterial# */ {\n        shader: standardShader\n    };\n}, function (option) {\n    // PENDING\n    __WEBPACK_IMPORTED_MODULE_3__core_util__[\"a\" /* default */].extend(this, option);\n    // Extend after shader is created.\n    __WEBPACK_IMPORTED_MODULE_3__core_util__[\"a\" /* default */].defaults(this, /** @lends clay.StandardMaterial# */  {\n        /**\n         * @type {Array.<number>}\n         * @default [1, 1, 1]\n         */\n        color: [1, 1, 1],\n\n        /**\n         * @type {Array.<number>}\n         * @default [0, 0, 0]\n         */\n        emission: [0, 0, 0],\n\n        /**\n         * @type {number}\n         * @default 0\n         */\n        emissionIntensity: 0,\n\n        /**\n         * @type {number}\n         * @default 0.5\n         */\n        roughness: 0.5,\n\n        /**\n         * @type {number}\n         * @default 0\n         */\n        metalness: 0,\n\n        /**\n         * @type {number}\n         * @default 1\n         */\n        alpha: 1,\n\n        /**\n         * @type {boolean}\n         */\n        alphaTest: false,\n\n        /**\n         * Cutoff threshold for alpha test\n         * @type {number}\n         */\n        alphaCutoff: 0.9,\n\n        /**\n         * Scalar multiplier applied to each normal vector of normal texture.\n         *\n         * @type {number}\n         *\n         * XXX This value is considered only if a normal texture is specified.\n         */\n        normalScale: 1.0,\n\n        /**\n         * @type {boolean}\n         */\n        // TODO Must disable culling.\n        doubleSided: false,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        diffuseMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        normalMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        roughnessMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        metalnessMap: null,\n        /**\n         * @type {clay.Texture2D}\n         */\n        emissiveMap: null,\n\n        /**\n         * @type {clay.TextureCube}\n         */\n        environmentMap: null,\n\n        /**\n         * @type {clay.BoundingBox}\n         */\n        environmentBox: null,\n        /**\n         * BRDF Lookup is generated by clay.util.cubemap.integrateBrdf\n         * @type {clay.Texture2D}\n         */\n        brdfLookup: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        ssaoMap: null,\n\n        /**\n         * @type {clay.Texture2D}\n         */\n        aoMap: null,\n\n        /**\n         * @type {Array.<number>}\n         * @default [1, 1]\n         */\n        uvRepeat: [1, 1],\n\n        /**\n         * @type {Array.<number>}\n         * @default [0, 0]\n         */\n        uvOffset: [0, 0],\n\n        /**\n         * @type {number}\n         * @default 1\n         */\n        aoIntensity: 1,\n\n        /**\n         * @type {boolean}\n         */\n        environmentMapPrefiltered: false,\n\n        /**\n         * @type {boolean}\n         */\n        linear: false,\n\n        /**\n         * @type {boolean}\n         */\n        encodeRGBM: false,\n\n        /**\n         * @type {boolean}\n         */\n        decodeRGBM: false,\n\n        /**\n         * @type {Number}\n         */\n        roughnessChannel: 0,\n        /**\n         * @type {Number}\n         */\n        metalnessChannel: 1\n    });\n}, {\n    clone: function () {\n        var material = new StandardMaterial({\n            name: this.name\n        });\n        TEXTURE_PROPERTIES.forEach(function (propName) {\n            if (this[propName]) {\n                material[propName] = this[propName];\n            }\n        }, this);\n        SIMPLE_PROPERTIES.concat(PROPERTIES_CHANGE_SHADER).forEach(function (propName) {\n            material[propName] = this[propName];\n        }, this);\n        return material;\n    }\n});\n\nSIMPLE_PROPERTIES.forEach(function (propName) {\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this.get(propName);\n        },\n        set: function (value) {\n            this.setUniform(propName, value);\n        }\n    });\n});\n\nTEXTURE_PROPERTIES.forEach(function (propName) {\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this.get(propName);\n        },\n        set: function (value) {\n            this.setUniform(propName, value);\n        }\n    });\n});\n\nPROPERTIES_CHANGE_SHADER.forEach(function (propName) {\n    var privateKey = '_' + propName;\n    Object.defineProperty(StandardMaterial.prototype, propName, {\n        get: function () {\n            return this[privateKey];\n        },\n        set: function (value) {\n            this[privateKey] = value;\n            if (propName in NUM_DEFINE_MAP) {\n                var defineName = NUM_DEFINE_MAP[propName];\n                this.define('fragment', defineName, value);\n            }\n            else {\n                var defineName = BOOL_DEFINE_MAP[propName];\n                value ? this.define('fragment', defineName) : this.undefine('fragment', defineName);\n            }\n        }\n    });\n});\n\nObject.defineProperty(StandardMaterial.prototype, 'environmentBox', {\n    get: function () {\n        var envBox = this._environmentBox;\n        if (envBox) {\n            envBox.min.setArray(this.get('environmentBoxMin'));\n            envBox.max.setArray(this.get('environmentBoxMax'));\n        }\n        return envBox;\n    },\n\n    set: function (value) {\n        this._environmentBox = value;\n\n        var uniforms = this.uniforms = this.uniforms || {};\n        uniforms['environmentBoxMin'] = uniforms['environmentBoxMin'] || {\n            value: null\n        };\n        uniforms['environmentBoxMax'] = uniforms['environmentBoxMax'] || {\n            value: null\n        };\n\n        // TODO Can't detect operation like box.min = new Vector()\n        if (value) {\n            this.setUniform('environmentBoxMin', value.min.array);\n            this.setUniform('environmentBoxMax', value.max.array);\n        }\n\n        if (value) {\n            this.define('fragment', 'PARALLAX_CORRECTED');\n        }\n        else {\n            this.undefine('fragment', 'PARALLAX_CORRECTED');\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (StandardMaterial);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1N0YW5kYXJkTWF0ZXJpYWwuanM/NzYxMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5cbmltcG9ydCBTaGFkZXIgZnJvbSAnLi9TaGFkZXInO1xuaW1wb3J0IHN0YW5kYXJkRXNzbCBmcm9tICcuL3NoYWRlci9zb3VyY2Uvc3RhbmRhcmQuZ2xzbC5qcyc7XG5pbXBvcnQgdXRpbCBmcm9tICcuL2NvcmUvdXRpbCc7XG5cbi8vIEltcG9ydCBzdGFuZGFyZCBzaGFkZXJcblNoYWRlclsnaW1wb3J0J10oc3RhbmRhcmRFc3NsKTtcblxudmFyIFRFWFRVUkVfUFJPUEVSVElFUyA9IFsnZGlmZnVzZU1hcCcsICdub3JtYWxNYXAnLCAncm91Z2huZXNzTWFwJywgJ21ldGFsbmVzc01hcCcsICdlbWlzc2l2ZU1hcCcsICdlbnZpcm9ubWVudE1hcCcsICdicmRmTG9va3VwJywgJ3NzYW9NYXAnLCAnYW9NYXAnXTtcbnZhciBTSU1QTEVfUFJPUEVSVElFUyA9IFsnY29sb3InLCAnZW1pc3Npb24nLCAnZW1pc3Npb25JbnRlbnNpdHknLCAnYWxwaGEnLCAncm91Z2huZXNzJywgJ21ldGFsbmVzcycsICd1dlJlcGVhdCcsICd1dk9mZnNldCcsICdhb0ludGVuc2l0eScsICdhbHBoYUN1dG9mZicsICdub3JtYWxTY2FsZSddO1xudmFyIFBST1BFUlRJRVNfQ0hBTkdFX1NIQURFUiA9IFsnbGluZWFyJywgJ2VuY29kZVJHQk0nLCAnZGVjb2RlUkdCTScsICdkb3VibGVTaWRlZCcsICdhbHBoYVRlc3QnLCAncm91Z2huZXNzQ2hhbm5lbCcsICdtZXRhbG5lc3NDaGFubmVsJywgJ2Vudmlyb25tZW50TWFwUHJlZmlsdGVyZWQnXTtcblxudmFyIE5VTV9ERUZJTkVfTUFQID0ge1xuICAgICdyb3VnaG5lc3NDaGFubmVsJzogJ1JPVUdITkVTU19DSEFOTkVMJyxcbiAgICAnbWV0YWxuZXNzQ2hhbm5lbCc6ICdNRVRBTE5FU1NfQ0hBTk5FTCdcbn07XG52YXIgQk9PTF9ERUZJTkVfTUFQID0ge1xuICAgICdsaW5lYXInOiAnU1JHQl9ERUNPREUnLFxuICAgICdlbmNvZGVSR0JNJzogJ1JHQk1fRU5DT0RFJyxcbiAgICAnZGVjb2RlUkdCTSc6ICdSR0JNX0RFQ09ERScsXG4gICAgJ2RvdWJsZVNpZGVkJzogJ0RPVUJMRV9TSURFRCcsXG4gICAgJ2FscGhhVGVzdCc6ICdBTFBIQV9URVNUJyxcbiAgICAnZW52aXJvbm1lbnRNYXBQcmVmaWx0ZXJlZCc6ICdFTlZJUk9OTUVOVE1BUF9QUkVGSUxURVInXG59O1xuXG5cbnZhciBzdGFuZGFyZFNoYWRlcjtcbi8qKlxuICogU3RhbmRhcmQgbWF0ZXJpYWwgd2l0aG91dCBjdXN0b20gc2hhZGVyLlxuICogQGNvbnN0cnVjdG9yIGNsYXkuU3RhbmRhcmRNYXRlcmlhbFxuICogQGV4dGVuZHMgY2xheS5CYXNlXG4gKiBAZXhhbXBsZVxuICogdmFyIG1hdCA9IG5ldyBjbGF5LlN0YW5kYXJkTWF0ZXJpYWwoe1xuICogICAgIGNvbG9yOiBbMSwgMSwgMV0sXG4gKiAgICAgZGlmZnVzZU1hcDogZGlmZnVzZVRleHR1cmVcbiAqIH0pO1xuICogbWF0LnJvdWdobmVzcyA9IDE7XG4gKi9cbnZhciBTdGFuZGFyZE1hdGVyaWFsID0gTWF0ZXJpYWwuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIXN0YW5kYXJkU2hhZGVyKSB7XG4gICAgICAgIHN0YW5kYXJkU2hhZGVyID0gbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkTVIudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmRNUi5mcmFnbWVudCcpKTtcbiAgICB9XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5TdGFuZGFyZE1hdGVyaWFsIyAqLyB7XG4gICAgICAgIHNoYWRlcjogc3RhbmRhcmRTaGFkZXJcbiAgICB9O1xufSwgZnVuY3Rpb24gKG9wdGlvbikge1xuICAgIC8vIFBFTkRJTkdcbiAgICB1dGlsLmV4dGVuZCh0aGlzLCBvcHRpb24pO1xuICAgIC8vIEV4dGVuZCBhZnRlciBzaGFkZXIgaXMgY3JlYXRlZC5cbiAgICB1dGlsLmRlZmF1bHRzKHRoaXMsIC8qKiBAbGVuZHMgY2xheS5TdGFuZGFyZE1hdGVyaWFsIyAqLyAge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5LjxudW1iZXI+fVxuICAgICAgICAgKiBAZGVmYXVsdCBbMSwgMSwgMV1cbiAgICAgICAgICovXG4gICAgICAgIGNvbG9yOiBbMSwgMSwgMV0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48bnVtYmVyPn1cbiAgICAgICAgICogQGRlZmF1bHQgWzAsIDAsIDBdXG4gICAgICAgICAqL1xuICAgICAgICBlbWlzc2lvbjogWzAsIDAsIDBdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwXG4gICAgICAgICAqL1xuICAgICAgICBlbWlzc2lvbkludGVuc2l0eTogMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMC41XG4gICAgICAgICAqL1xuICAgICAgICByb3VnaG5lc3M6IDAuNSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICogQGRlZmF1bHQgMFxuICAgICAgICAgKi9cbiAgICAgICAgbWV0YWxuZXNzOiAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAxXG4gICAgICAgICAqL1xuICAgICAgICBhbHBoYTogMSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBhbHBoYVRlc3Q6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDdXRvZmYgdGhyZXNob2xkIGZvciBhbHBoYSB0ZXN0XG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBhbHBoYUN1dG9mZjogMC45LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY2FsYXIgbXVsdGlwbGllciBhcHBsaWVkIHRvIGVhY2ggbm9ybWFsIHZlY3RvciBvZiBub3JtYWwgdGV4dHVyZS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICpcbiAgICAgICAgICogWFhYIFRoaXMgdmFsdWUgaXMgY29uc2lkZXJlZCBvbmx5IGlmIGEgbm9ybWFsIHRleHR1cmUgaXMgc3BlY2lmaWVkLlxuICAgICAgICAgKi9cbiAgICAgICAgbm9ybWFsU2NhbGU6IDEuMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICAvLyBUT0RPIE11c3QgZGlzYWJsZSBjdWxsaW5nLlxuICAgICAgICBkb3VibGVTaWRlZDogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIGRpZmZ1c2VNYXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIG5vcm1hbE1hcDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZTJEfVxuICAgICAgICAgKi9cbiAgICAgICAgcm91Z2huZXNzTWFwOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBtZXRhbG5lc3NNYXA6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICBlbWlzc2l2ZU1hcDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGV4dHVyZUN1YmV9XG4gICAgICAgICAqL1xuICAgICAgICBlbnZpcm9ubWVudE1hcDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICAgICAqL1xuICAgICAgICBlbnZpcm9ubWVudEJveDogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJSREYgTG9va3VwIGlzIGdlbmVyYXRlZCBieSBjbGF5LnV0aWwuY3ViZW1hcC5pbnRlZ3JhdGVCcmRmXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIGJyZGZMb29rdXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIHNzYW9NYXA6IG51bGwsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlRleHR1cmUyRH1cbiAgICAgICAgICovXG4gICAgICAgIGFvTWFwOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPG51bWJlcj59XG4gICAgICAgICAqIEBkZWZhdWx0IFsxLCAxXVxuICAgICAgICAgKi9cbiAgICAgICAgdXZSZXBlYXQ6IFsxLCAxXSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5LjxudW1iZXI+fVxuICAgICAgICAgKiBAZGVmYXVsdCBbMCwgMF1cbiAgICAgICAgICovXG4gICAgICAgIHV2T2Zmc2V0OiBbMCwgMF0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqIEBkZWZhdWx0IDFcbiAgICAgICAgICovXG4gICAgICAgIGFvSW50ZW5zaXR5OiAxLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGVudmlyb25tZW50TWFwUHJlZmlsdGVyZWQ6IGZhbHNlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGxpbmVhcjogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZW5jb2RlUkdCTTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZGVjb2RlUkdCTTogZmFsc2UsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICByb3VnaG5lc3NDaGFubmVsOiAwLFxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIG1ldGFsbmVzc0NoYW5uZWw6IDFcbiAgICB9KTtcbn0sIHtcbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWVcbiAgICAgICAgfSk7XG4gICAgICAgIFRFWFRVUkVfUFJPUEVSVElFUy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICAgICAgaWYgKHRoaXNbcHJvcE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWxbcHJvcE5hbWVdID0gdGhpc1twcm9wTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICBTSU1QTEVfUFJPUEVSVElFUy5jb25jYXQoUFJPUEVSVElFU19DSEFOR0VfU0hBREVSKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgICAgICAgICAgbWF0ZXJpYWxbcHJvcE5hbWVdID0gdGhpc1twcm9wTmFtZV07XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgICByZXR1cm4gbWF0ZXJpYWw7XG4gICAgfVxufSk7XG5cblNJTVBMRV9QUk9QRVJUSUVTLmZvckVhY2goZnVuY3Rpb24gKHByb3BOYW1lKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0YW5kYXJkTWF0ZXJpYWwucHJvdG90eXBlLCBwcm9wTmFtZSwge1xuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldChwcm9wTmFtZSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnNldFVuaWZvcm0ocHJvcE5hbWUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cblRFWFRVUkVfUFJPUEVSVElFUy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wTmFtZSkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSwgcHJvcE5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXQocHJvcE5hbWUpO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKHByb3BOYW1lLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pO1xuXG5QUk9QRVJUSUVTX0NIQU5HRV9TSEFERVIuZm9yRWFjaChmdW5jdGlvbiAocHJvcE5hbWUpIHtcbiAgICB2YXIgcHJpdmF0ZUtleSA9ICdfJyArIHByb3BOYW1lO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSwgcHJvcE5hbWUsIHtcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpc1twcml2YXRlS2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXNbcHJpdmF0ZUtleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIGlmIChwcm9wTmFtZSBpbiBOVU1fREVGSU5FX01BUCkge1xuICAgICAgICAgICAgICAgIHZhciBkZWZpbmVOYW1lID0gTlVNX0RFRklORV9NQVBbcHJvcE5hbWVdO1xuICAgICAgICAgICAgICAgIHRoaXMuZGVmaW5lKCdmcmFnbWVudCcsIGRlZmluZU5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBkZWZpbmVOYW1lID0gQk9PTF9ERUZJTkVfTUFQW3Byb3BOYW1lXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA/IHRoaXMuZGVmaW5lKCdmcmFnbWVudCcsIGRlZmluZU5hbWUpIDogdGhpcy51bmRlZmluZSgnZnJhZ21lbnQnLCBkZWZpbmVOYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdGFuZGFyZE1hdGVyaWFsLnByb3RvdHlwZSwgJ2Vudmlyb25tZW50Qm94Jywge1xuICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZW52Qm94ID0gdGhpcy5fZW52aXJvbm1lbnRCb3g7XG4gICAgICAgIGlmIChlbnZCb3gpIHtcbiAgICAgICAgICAgIGVudkJveC5taW4uc2V0QXJyYXkodGhpcy5nZXQoJ2Vudmlyb25tZW50Qm94TWluJykpO1xuICAgICAgICAgICAgZW52Qm94Lm1heC5zZXRBcnJheSh0aGlzLmdldCgnZW52aXJvbm1lbnRCb3hNYXgnKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVudkJveDtcbiAgICB9LFxuXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZW52aXJvbm1lbnRCb3ggPSB2YWx1ZTtcblxuICAgICAgICB2YXIgdW5pZm9ybXMgPSB0aGlzLnVuaWZvcm1zID0gdGhpcy51bmlmb3JtcyB8fCB7fTtcbiAgICAgICAgdW5pZm9ybXNbJ2Vudmlyb25tZW50Qm94TWluJ10gPSB1bmlmb3Jtc1snZW52aXJvbm1lbnRCb3hNaW4nXSB8fCB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9O1xuICAgICAgICB1bmlmb3Jtc1snZW52aXJvbm1lbnRCb3hNYXgnXSA9IHVuaWZvcm1zWydlbnZpcm9ubWVudEJveE1heCddIHx8IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gVE9ETyBDYW4ndCBkZXRlY3Qgb3BlcmF0aW9uIGxpa2UgYm94Lm1pbiA9IG5ldyBWZWN0b3IoKVxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0VW5pZm9ybSgnZW52aXJvbm1lbnRCb3hNaW4nLCB2YWx1ZS5taW4uYXJyYXkpO1xuICAgICAgICAgICAgdGhpcy5zZXRVbmlmb3JtKCdlbnZpcm9ubWVudEJveE1heCcsIHZhbHVlLm1heC5hcnJheSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmaW5lKCdmcmFnbWVudCcsICdQQVJBTExBWF9DT1JSRUNURUQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1BBUkFMTEFYX0NPUlJFQ1RFRCcpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFN0YW5kYXJkTWF0ZXJpYWw7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvU3RhbmRhcmRNYXRlcmlhbC5qc1xuLy8gbW9kdWxlIGlkID0gODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///82\n");

/***/ }),
/* 83 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.standard.chunk.varying\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nvarying vec3 v_Barycentric;\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\n#endif\\n#if defined(AOMAP_ENABLED)\\nvarying vec2 v_Texcoord2;\\n#endif\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\n@end\\n@export clay.standard.chunk.light_header\\n#ifdef AMBIENT_LIGHT_COUNT\\n@import clay.header.ambient_light\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n@import clay.header.ambient_sh_light\\n#endif\\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\\n@import clay.header.ambient_cubemap_light\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n@import clay.header.point_light\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n@import clay.header.directional_light\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n@import clay.header.spot_light\\n#endif\\n@end\\n@export clay.standard.vertex\\n#define SHADER_NAME standard\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\\nuniform vec2 uvOffset = vec2(0.0, 0.0);\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\n#if defined(AOMAP_ENABLED)\\nattribute vec2 texcoord2 : TEXCOORD_1;\\n#endif\\nattribute vec3 normal : NORMAL;\\nattribute vec4 tangent : TANGENT;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\n#endif\\nattribute vec3 barycentric;\\n@import clay.standard.chunk.varying\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n vec4 skinnedNormal = vec4(normal, 0.0);\\n vec4 skinnedTangent = vec4(tangent.xyz, 0.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n skinnedNormal = skinMatrixWS * skinnedNormal;\\n skinnedTangent = skinMatrixWS * skinnedTangent;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n skinnedNormal = instanceMat * skinnedNormal;\\n skinnedTangent = instanceMat * skinnedTangent;\\n#endif\\n gl_Position = worldViewProjection * skinnedPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_WorldPosition = (world * skinnedPosition).xyz;\\n v_Barycentric = barycentric;\\n v_Normal = normalize((worldInverseTranspose * skinnedNormal).xyz);\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\n v_Tangent = normalize((worldInverseTranspose * skinnedTangent).xyz);\\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\\n#endif\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n#if defined(AOMAP_ENABLED)\\n v_Texcoord2 = texcoord2;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.standard.fragment\\n#define PI 3.14159265358979\\n#define GLOSSINESS_CHANNEL 0\\n#define ROUGHNESS_CHANNEL 0\\n#define METALNESS_CHANNEL 1\\n#define DIFFUSEMAP_ALPHA_ALPHA\\n@import clay.standard.chunk.varying\\nuniform mat4 viewInverse : VIEWINVERSE;\\n#ifdef NORMALMAP_ENABLED\\nuniform sampler2D normalMap;\\n#endif\\nuniform float normalScale: 1.0;\\n#ifdef DIFFUSEMAP_ENABLED\\nuniform sampler2D diffuseMap;\\n#endif\\n#ifdef SPECULARMAP_ENABLED\\nuniform sampler2D specularMap;\\n#endif\\n#ifdef USE_ROUGHNESS\\nuniform float roughness : 0.5;\\n #ifdef ROUGHNESSMAP_ENABLED\\nuniform sampler2D roughnessMap;\\n #endif\\n#else\\nuniform float glossiness: 0.5;\\n #ifdef GLOSSINESSMAP_ENABLED\\nuniform sampler2D glossinessMap;\\n #endif\\n#endif\\n#ifdef METALNESSMAP_ENABLED\\nuniform sampler2D metalnessMap;\\n#endif\\n#ifdef OCCLUSIONMAP_ENABLED\\nuniform sampler2D occlusionMap;\\n#endif\\n#ifdef ENVIRONMENTMAP_ENABLED\\nuniform samplerCube environmentMap;\\n #ifdef PARALLAX_CORRECTED\\nuniform vec3 environmentBoxMin;\\nuniform vec3 environmentBoxMax;\\n #endif\\n#endif\\n#ifdef BRDFLOOKUP_ENABLED\\nuniform sampler2D brdfLookup;\\n#endif\\n#ifdef EMISSIVEMAP_ENABLED\\nuniform sampler2D emissiveMap;\\n#endif\\n#ifdef SSAOMAP_ENABLED\\nuniform sampler2D ssaoMap;\\nuniform vec4 viewport : VIEWPORT;\\n#endif\\n#ifdef AOMAP_ENABLED\\nuniform sampler2D aoMap;\\nuniform float aoIntensity;\\n#endif\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\n#ifdef USE_METALNESS\\nuniform float metalness : 0.0;\\n#else\\nuniform vec3 specularColor : [0.1, 0.1, 0.1];\\n#endif\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float emissionIntensity: 1;\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\n#ifdef ENVIRONMENTMAP_PREFILTER\\nuniform float maxMipmapLevel: 5;\\n#endif\\n@import clay.standard.chunk.light_header\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.calculate_attenuation\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.plugin.compute_shadow_map\\n@import clay.util.parallax_correct\\n@import clay.util.ACES\\nfloat G_Smith(float g, float ndv, float ndl)\\n{\\n float roughness = 1.0 - g;\\n float k = roughness * roughness / 2.0;\\n float G1V = ndv / (ndv * (1.0 - k) + k);\\n float G1L = ndl / (ndl * (1.0 - k) + k);\\n return G1L * G1V;\\n}\\nvec3 F_Schlick(float ndv, vec3 spec) {\\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\\n}\\nfloat D_Phong(float g, float ndh) {\\n float a = pow(8192.0, g);\\n return (a + 2.0) / 8.0 * pow(ndh, a);\\n}\\nfloat D_GGX(float g, float ndh) {\\n float r = 1.0 - g;\\n float a = r * r;\\n float tmp = ndh * ndh * (a - 1.0) + 1.0;\\n return a / (PI * tmp * tmp);\\n}\\n#ifdef PARALLAXOCCLUSIONMAP_ENABLED\\nuniform float parallaxOcclusionScale : 0.02;\\nuniform float parallaxMaxLayers : 20;\\nuniform float parallaxMinLayers : 5;\\nuniform sampler2D parallaxOcclusionMap;\\nmat3 transpose(in mat3 inMat)\\n{\\n vec3 i0 = inMat[0];\\n vec3 i1 = inMat[1];\\n vec3 i2 = inMat[2];\\n return mat3(\\n vec3(i0.x, i1.x, i2.x),\\n vec3(i0.y, i1.y, i2.y),\\n vec3(i0.z, i1.z, i2.z)\\n );\\n}\\nvec2 parallaxUv(vec2 uv, vec3 viewDir)\\n{\\n float numLayers = mix(parallaxMaxLayers, parallaxMinLayers, abs(dot(vec3(0.0, 0.0, 1.0), viewDir)));\\n float layerHeight = 1.0 / numLayers;\\n float curLayerHeight = 0.0;\\n vec2 deltaUv = viewDir.xy * parallaxOcclusionScale / (viewDir.z * numLayers);\\n vec2 curUv = uv;\\n float height = 1.0 - texture2D(parallaxOcclusionMap, curUv).r;\\n for (int i = 0; i < 30; i++) {\\n curLayerHeight += layerHeight;\\n curUv -= deltaUv;\\n height = 1.0 - texture2D(parallaxOcclusionMap, curUv).r;\\n if (height < curLayerHeight) {\\n break;\\n }\\n }\\n vec2 prevUv = curUv + deltaUv;\\n float next = height - curLayerHeight;\\n float prev = 1.0 - texture2D(parallaxOcclusionMap, prevUv).r - curLayerHeight + layerHeight;\\n return mix(curUv, prevUv, next / (next - prev));\\n}\\n#endif\\nvoid main() {\\n vec4 albedoColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n albedoColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n albedoColor = sRGBToLinear(albedoColor);\\n#endif\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(eyePos - v_WorldPosition);\\n vec2 uv = v_Texcoord;\\n#if defined(PARALLAXOCCLUSIONMAP_ENABLED) || defined(NORMALMAP_ENABLED)\\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\\n#endif\\n#ifdef PARALLAXOCCLUSIONMAP_ENABLED\\n uv = parallaxUv(v_Texcoord, normalize(transpose(tbn) * -V));\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 texel = texture2D(diffuseMap, uv);\\n #ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n #endif\\n albedoColor.rgb *= texel.rgb;\\n #ifdef DIFFUSEMAP_ALPHA_ALPHA\\n albedoColor.a *= texel.a;\\n #endif\\n#endif\\n#ifdef USE_METALNESS\\n float m = metalness;\\n #ifdef METALNESSMAP_ENABLED\\n float m2 = texture2D(metalnessMap, uv)[METALNESS_CHANNEL];\\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n vec3 baseColor = albedoColor.rgb;\\n albedoColor.rgb = baseColor * (1.0 - m);\\n vec3 spec = mix(vec3(0.04), baseColor, m);\\n#else\\n vec3 spec = specularColor;\\n#endif\\n#ifdef USE_ROUGHNESS\\n float g = clamp(1.0 - roughness, 0.0, 1.0);\\n #ifdef ROUGHNESSMAP_ENABLED\\n float g2 = 1.0 - texture2D(roughnessMap, uv)[ROUGHNESS_CHANNEL];\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n#else\\n float g = glossiness;\\n #ifdef GLOSSINESSMAP_ENABLED\\n float g2 = texture2D(glossinessMap, uv)[GLOSSINESS_CHANNEL];\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n #endif\\n#endif\\n#ifdef SPECULARMAP_ENABLED\\n spec *= sRGBToLinear(texture2D(specularMap, uv)).rgb;\\n#endif\\n vec3 N = v_Normal;\\n#ifdef DOUBLE_SIDED\\n if (dot(N, V) < 0.0) {\\n N = -N;\\n }\\n#endif\\n#ifdef NORMALMAP_ENABLED\\n if (dot(v_Tangent, v_Tangent) > 0.0) {\\n vec3 normalTexel = texture2D(normalMap, uv).xyz;\\n if (dot(normalTexel, normalTexel) > 0.0) { N = (normalTexel * 2.0 - 1.0);\\n N = normalize(N * vec3(normalScale, normalScale, 1.0));\\n tbn[1] = -tbn[1];\\n N = normalize(tbn * N);\\n }\\n }\\n#endif\\n vec3 diffuseTerm = vec3(0.0, 0.0, 0.0);\\n vec3 specularTerm = vec3(0.0, 0.0, 0.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n vec3 fresnelTerm = F_Schlick(ndv, spec);\\n#ifdef AMBIENT_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseTerm += ambientLightColor[_idx_];\\n }}\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseTerm += calcAmbientSHLight(_idx_, N) * ambientSHLightColor[_idx_];\\n }}\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsPoint[POINT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfPointLights(v_WorldPosition, shadowContribsPoint);\\n }\\n#endif\\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_COUNT; _idx_++)\\n {{\\n vec3 lightPosition = pointLightPosition[_idx_];\\n vec3 lc = pointLightColor[_idx_];\\n float range = pointLightRange[_idx_];\\n vec3 L = lightPosition - v_WorldPosition;\\n float dist = length(L);\\n float attenuation = lightAttenuation(dist, range);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n if(shadowEnabled)\\n {\\n shadowContrib = shadowContribsPoint[_idx_];\\n }\\n#endif\\n vec3 li = lc * ndl * attenuation * shadowContrib;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }}\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\\n }\\n#endif\\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\\n {{\\n vec3 L = -normalize(directionalLightDirection[_idx_]);\\n vec3 lc = directionalLightColor[_idx_];\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n if(shadowEnabled)\\n {\\n shadowContrib = shadowContribsDir[_idx_];\\n }\\n#endif\\n vec3 li = lc * ndl * shadowContrib;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }}\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsSpot[SPOT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfSpotLights(v_WorldPosition, shadowContribsSpot);\\n }\\n#endif\\n for(int i = 0; i < SPOT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = spotLightPosition[i];\\n vec3 spotLightDirection = -normalize(spotLightDirection[i]);\\n vec3 lc = spotLightColor[i];\\n float range = spotLightRange[i];\\n float a = spotLightUmbraAngleCosine[i];\\n float b = spotLightPenumbraAngleCosine[i];\\n float falloffFactor = spotLightFalloffFactor[i];\\n vec3 L = lightPosition - v_WorldPosition;\\n float dist = length(L);\\n float attenuation = lightAttenuation(dist, range);\\n L /= dist;\\n float c = dot(spotLightDirection, L);\\n float falloff;\\n falloff = clamp((c - a) /(b - a), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n if (shadowEnabled)\\n {\\n shadowContrib = shadowContribsSpot[i];\\n }\\n#endif\\n vec3 li = lc * attenuation * (1.0 - falloff) * shadowContrib * ndl;\\n diffuseTerm += li;\\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\\n }\\n#endif\\n vec4 outColor = albedoColor;\\n outColor.rgb *= max(diffuseTerm, vec3(0.0));\\n outColor.rgb += max(specularTerm, vec3(0.0));\\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\\n vec3 L = reflect(-V, N);\\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\\n float bias2 = rough2 * 5.0;\\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\\n vec3 envWeight2 = spec * brdfParam2.x + brdfParam2.y;\\n vec3 envTexel2;\\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\\n {{\\n #ifdef SUPPORT_TEXTURE_LOD\\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\\n #else\\n envTexel2 = RGBMDecode(textureCube(ambientCubemapLightCubemap[_idx_], L), 8.12);\\n #endif\\n outColor.rgb += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2;\\n }}\\n#endif\\n#ifdef ENVIRONMENTMAP_ENABLED\\n vec3 envWeight = g * fresnelTerm;\\n vec3 L = reflect(-V, N);\\n #ifdef PARALLAX_CORRECTED\\n L = parallaxCorrect(L, v_WorldPosition, environmentBoxMin, environmentBoxMax);\\n#endif\\n #ifdef ENVIRONMENTMAP_PREFILTER\\n float rough = clamp(1.0 - g, 0.0, 1.0);\\n float bias = rough * maxMipmapLevel;\\n #ifdef SUPPORT_TEXTURE_LOD\\n vec3 envTexel = decodeHDR(textureCubeLodEXT(environmentMap, L, bias)).rgb;\\n #else\\n vec3 envTexel = decodeHDR(textureCube(environmentMap, L)).rgb;\\n #endif\\n #ifdef BRDFLOOKUP_ENABLED\\n vec2 brdfParam = texture2D(brdfLookup, vec2(rough, ndv)).xy;\\n envWeight = spec * brdfParam.x + brdfParam.y;\\n #endif\\n #else\\n vec3 envTexel = textureCube(environmentMap, L).xyz;\\n #endif\\n outColor.rgb += envTexel * envWeight;\\n#endif\\n float aoFactor = 1.0;\\n#ifdef SSAOMAP_ENABLED\\n aoFactor = min(texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r, aoFactor);\\n#endif\\n#ifdef AOMAP_ENABLED\\n aoFactor = min(1.0 - clamp((1.0 - texture2D(aoMap, v_Texcoord2).r) * aoIntensity, 0.0, 1.0), aoFactor);\\n#endif\\n#ifdef OCCLUSIONMAP_ENABLED\\n aoFactor = min(1.0 - clamp((1.0 - texture2D(occlusionMap, v_Texcoord).r), 0.0, 1.0), aoFactor);\\n#endif\\n outColor.rgb *= aoFactor;\\n vec3 lEmission = emission;\\n#ifdef EMISSIVEMAP_ENABLED\\n lEmission *= texture2D(emissiveMap, uv).rgb;\\n#endif\\n outColor.rgb += lEmission * emissionIntensity;\\n if(lineWidth > 0.)\\n {\\n outColor.rgb = mix(outColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (outColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n outColor.rgb = ACESToneMapping(outColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n outColor = linearTosRGB(outColor);\\n#endif\\n gl_FragColor = encodeHDR(outColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\\n@export clay.standardMR.vertex\\n@import clay.standard.vertex\\n@end\\n@export clay.standardMR.fragment\\n#define USE_METALNESS\\n#define USE_ROUGHNESS\\n@import clay.standard.fragment\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2Uvc3RhbmRhcmQuZ2xzbC5qcz9iYzBlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuQGV4cG9ydCBjbGF5LnN0YW5kYXJkLmNodW5rLnZhcnlpbmdcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52YXJ5aW5nIHZlYzMgdl9Ob3JtYWw7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzMgdl9CYXJ5Y2VudHJpYztcXG4jaWYgZGVmaW5lZChQQVJBTExBWE9DQ0xVU0lPTk1BUF9FTkFCTEVEKSB8fCBkZWZpbmVkKE5PUk1BTE1BUF9FTkFCTEVEKVxcbnZhcnlpbmcgdmVjMyB2X1RhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZfQml0YW5nZW50O1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKEFPTUFQX0VOQUJMRUQpXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQyO1xcbiNlbmRpZlxcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG52YXJ5aW5nIHZlYzQgdl9Db2xvcjtcXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnN0YW5kYXJkLmNodW5rLmxpZ2h0X2hlYWRlclxcbiNpZmRlZiBBTUJJRU5UX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5hbWJpZW50X2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfU0hfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLmFtYmllbnRfc2hfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgQU1CSUVOVF9DVUJFTUFQX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5hbWJpZW50X2N1YmVtYXBfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgUE9JTlRfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLnBvaW50X2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIERJUkVDVElPTkFMX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5kaXJlY3Rpb25hbF9saWdodFxcbiNlbmRpZlxcbiNpZmRlZiBTUE9UX0xJR0hUX0NPVU5UXFxuQGltcG9ydCBjbGF5LmhlYWRlci5zcG90X2xpZ2h0XFxuI2VuZGlmXFxuQGVuZFxcbkBleHBvcnQgY2xheS5zdGFuZGFyZC52ZXJ0ZXhcXG4jZGVmaW5lIFNIQURFUl9OQU1FIHN0YW5kYXJkXFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbnVuaWZvcm0gbWF0NCB3b3JsZEludmVyc2VUcmFuc3Bvc2UgOiBXT1JMRElOVkVSU0VUUkFOU1BPU0U7XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxudW5pZm9ybSB2ZWMyIHV2UmVwZWF0ID0gdmVjMigxLjAsIDEuMCk7XFxudW5pZm9ybSB2ZWMyIHV2T2Zmc2V0ID0gdmVjMigwLjAsIDAuMCk7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZCA6IFRFWENPT1JEXzA7XFxuI2lmIGRlZmluZWQoQU9NQVBfRU5BQkxFRClcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZDIgOiBURVhDT09SRF8xO1xcbiNlbmRpZlxcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbCA6IE5PUk1BTDtcXG5hdHRyaWJ1dGUgdmVjNCB0YW5nZW50IDogVEFOR0VOVDtcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuYXR0cmlidXRlIHZlYzQgYV9Db2xvciA6IENPTE9SO1xcbiNlbmRpZlxcbmF0dHJpYnV0ZSB2ZWMzIGJhcnljZW50cmljO1xcbkBpbXBvcnQgY2xheS5zdGFuZGFyZC5jaHVuay52YXJ5aW5nXFxuQGltcG9ydCBjbGF5LmNodW5rLnNraW5uaW5nX2hlYWRlclxcbkBpbXBvcnQgY2xheS5jaHVuay5pbnN0YW5jaW5nX2hlYWRlclxcbkBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX3ZlcnRleF9oZWFkZXJcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCBza2lubmVkUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiB2ZWM0IHNraW5uZWROb3JtYWwgPSB2ZWM0KG5vcm1hbCwgMC4wKTtcXG4gdmVjNCBza2lubmVkVGFuZ2VudCA9IHZlYzQodGFuZ2VudC54eXosIDAuMCk7XFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSBza2luTWF0cml4V1MgKiBza2lubmVkUG9zaXRpb247XFxuIHNraW5uZWROb3JtYWwgPSBza2luTWF0cml4V1MgKiBza2lubmVkTm9ybWFsO1xcbiBza2lubmVkVGFuZ2VudCA9IHNraW5NYXRyaXhXUyAqIHNraW5uZWRUYW5nZW50O1xcbiNlbmRpZlxcbiNpZmRlZiBJTlNUQU5DSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5pbnN0YW5jaW5nX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSBpbnN0YW5jZU1hdCAqIHNraW5uZWRQb3NpdGlvbjtcXG4gc2tpbm5lZE5vcm1hbCA9IGluc3RhbmNlTWF0ICogc2tpbm5lZE5vcm1hbDtcXG4gc2tpbm5lZFRhbmdlbnQgPSBpbnN0YW5jZU1hdCAqIHNraW5uZWRUYW5nZW50O1xcbiNlbmRpZlxcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiBza2lubmVkUG9zaXRpb247XFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZCAqIHV2UmVwZWF0ICsgdXZPZmZzZXQ7XFxuIHZfV29ybGRQb3NpdGlvbiA9ICh3b3JsZCAqIHNraW5uZWRQb3NpdGlvbikueHl6O1xcbiB2X0JhcnljZW50cmljID0gYmFyeWNlbnRyaWM7XFxuIHZfTm9ybWFsID0gbm9ybWFsaXplKCh3b3JsZEludmVyc2VUcmFuc3Bvc2UgKiBza2lubmVkTm9ybWFsKS54eXopO1xcbiNpZiBkZWZpbmVkKFBBUkFMTEFYT0NDTFVTSU9OTUFQX0VOQUJMRUQpIHx8IGRlZmluZWQoTk9STUFMTUFQX0VOQUJMRUQpXFxuIHZfVGFuZ2VudCA9IG5vcm1hbGl6ZSgod29ybGRJbnZlcnNlVHJhbnNwb3NlICogc2tpbm5lZFRhbmdlbnQpLnh5eik7XFxuIHZfQml0YW5nZW50ID0gbm9ybWFsaXplKGNyb3NzKHZfTm9ybWFsLCB2X1RhbmdlbnQpICogdGFuZ2VudC53KTtcXG4jZW5kaWZcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuIHZfQ29sb3IgPSBhX0NvbG9yO1xcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKEFPTUFQX0VOQUJMRUQpXFxuIHZfVGV4Y29vcmQyID0gdGV4Y29vcmQyO1xcbiNlbmRpZlxcbiBAaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfbWFpblxcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnN0YW5kYXJkLmZyYWdtZW50XFxuI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU4OTc5XFxuI2RlZmluZSBHTE9TU0lORVNTX0NIQU5ORUwgMFxcbiNkZWZpbmUgUk9VR0hORVNTX0NIQU5ORUwgMFxcbiNkZWZpbmUgTUVUQUxORVNTX0NIQU5ORUwgMVxcbiNkZWZpbmUgRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxcbkBpbXBvcnQgY2xheS5zdGFuZGFyZC5jaHVuay52YXJ5aW5nXFxudW5pZm9ybSBtYXQ0IHZpZXdJbnZlcnNlIDogVklFV0lOVkVSU0U7XFxuI2lmZGVmIE5PUk1BTE1BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsTWFwO1xcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgbm9ybWFsU2NhbGU6IDEuMDtcXG4jaWZkZWYgRElGRlVTRU1BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgZGlmZnVzZU1hcDtcXG4jZW5kaWZcXG4jaWZkZWYgU1BFQ1VMQVJNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNwZWN1bGFyTWFwO1xcbiNlbmRpZlxcbiNpZmRlZiBVU0VfUk9VR0hORVNTXFxudW5pZm9ybSBmbG9hdCByb3VnaG5lc3MgOiAwLjU7XFxuICNpZmRlZiBST1VHSE5FU1NNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIHJvdWdobmVzc01hcDtcXG4gI2VuZGlmXFxuI2Vsc2VcXG51bmlmb3JtIGZsb2F0IGdsb3NzaW5lc3M6IDAuNTtcXG4gI2lmZGVmIEdMT1NTSU5FU1NNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGdsb3NzaW5lc3NNYXA7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBNRVRBTE5FU1NNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIG1ldGFsbmVzc01hcDtcXG4jZW5kaWZcXG4jaWZkZWYgT0NDTFVTSU9OTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBvY2NsdXNpb25NYXA7XFxuI2VuZGlmXFxuI2lmZGVmIEVOVklST05NRU5UTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGVudmlyb25tZW50TWFwO1xcbiAjaWZkZWYgUEFSQUxMQVhfQ09SUkVDVEVEXFxudW5pZm9ybSB2ZWMzIGVudmlyb25tZW50Qm94TWluO1xcbnVuaWZvcm0gdmVjMyBlbnZpcm9ubWVudEJveE1heDtcXG4gI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIEJSREZMT09LVVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGJyZGZMb29rdXA7XFxuI2VuZGlmXFxuI2lmZGVmIEVNSVNTSVZFTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBlbWlzc2l2ZU1hcDtcXG4jZW5kaWZcXG4jaWZkZWYgU1NBT01BUF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgc3Nhb01hcDtcXG51bmlmb3JtIHZlYzQgdmlld3BvcnQgOiBWSUVXUE9SVDtcXG4jZW5kaWZcXG4jaWZkZWYgQU9NQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGFvTWFwO1xcbnVuaWZvcm0gZmxvYXQgYW9JbnRlbnNpdHk7XFxuI2VuZGlmXFxudW5pZm9ybSB2ZWMzIGNvbG9yIDogWzEuMCwgMS4wLCAxLjBdO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGEgOiAxLjA7XFxuI2lmZGVmIEFMUEhBX1RFU1RcXG51bmlmb3JtIGZsb2F0IGFscGhhQ3V0b2ZmOiAwLjk7XFxuI2VuZGlmXFxuI2lmZGVmIFVTRV9NRVRBTE5FU1NcXG51bmlmb3JtIGZsb2F0IG1ldGFsbmVzcyA6IDAuMDtcXG4jZWxzZVxcbnVuaWZvcm0gdmVjMyBzcGVjdWxhckNvbG9yIDogWzAuMSwgMC4xLCAwLjFdO1xcbiNlbmRpZlxcbnVuaWZvcm0gdmVjMyBlbWlzc2lvbiA6IFswLjAsIDAuMCwgMC4wXTtcXG51bmlmb3JtIGZsb2F0IGVtaXNzaW9uSW50ZW5zaXR5OiAxO1xcbnVuaWZvcm0gZmxvYXQgbGluZVdpZHRoIDogMC4wO1xcbnVuaWZvcm0gdmVjNCBsaW5lQ29sb3IgOiBbMC4wLCAwLjAsIDAuMCwgMC42XTtcXG4jaWZkZWYgRU5WSVJPTk1FTlRNQVBfUFJFRklMVEVSXFxudW5pZm9ybSBmbG9hdCBtYXhNaXBtYXBMZXZlbDogNTtcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkuc3RhbmRhcmQuY2h1bmsubGlnaHRfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwuY2FsY3VsYXRlX2F0dGVudWF0aW9uXFxuQGltcG9ydCBjbGF5LnV0aWwuZWRnZV9mYWN0b3JcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnV0aWwuc3JnYlxcbkBpbXBvcnQgY2xheS5wbHVnaW4uY29tcHV0ZV9zaGFkb3dfbWFwXFxuQGltcG9ydCBjbGF5LnV0aWwucGFyYWxsYXhfY29ycmVjdFxcbkBpbXBvcnQgY2xheS51dGlsLkFDRVNcXG5mbG9hdCBHX1NtaXRoKGZsb2F0IGcsIGZsb2F0IG5kdiwgZmxvYXQgbmRsKVxcbntcXG4gZmxvYXQgcm91Z2huZXNzID0gMS4wIC0gZztcXG4gZmxvYXQgayA9IHJvdWdobmVzcyAqIHJvdWdobmVzcyAvIDIuMDtcXG4gZmxvYXQgRzFWID0gbmR2IC8gKG5kdiAqICgxLjAgLSBrKSArIGspO1xcbiBmbG9hdCBHMUwgPSBuZGwgLyAobmRsICogKDEuMCAtIGspICsgayk7XFxuIHJldHVybiBHMUwgKiBHMVY7XFxufVxcbnZlYzMgRl9TY2hsaWNrKGZsb2F0IG5kdiwgdmVjMyBzcGVjKSB7XFxuIHJldHVybiBzcGVjICsgKDEuMCAtIHNwZWMpICogcG93KDEuMCAtIG5kdiwgNS4wKTtcXG59XFxuZmxvYXQgRF9QaG9uZyhmbG9hdCBnLCBmbG9hdCBuZGgpIHtcXG4gZmxvYXQgYSA9IHBvdyg4MTkyLjAsIGcpO1xcbiByZXR1cm4gKGEgKyAyLjApIC8gOC4wICogcG93KG5kaCwgYSk7XFxufVxcbmZsb2F0IERfR0dYKGZsb2F0IGcsIGZsb2F0IG5kaCkge1xcbiBmbG9hdCByID0gMS4wIC0gZztcXG4gZmxvYXQgYSA9IHIgKiByO1xcbiBmbG9hdCB0bXAgPSBuZGggKiBuZGggKiAoYSAtIDEuMCkgKyAxLjA7XFxuIHJldHVybiBhIC8gKFBJICogdG1wICogdG1wKTtcXG59XFxuI2lmZGVmIFBBUkFMTEFYT0NDTFVTSU9OTUFQX0VOQUJMRURcXG51bmlmb3JtIGZsb2F0IHBhcmFsbGF4T2NjbHVzaW9uU2NhbGUgOiAwLjAyO1xcbnVuaWZvcm0gZmxvYXQgcGFyYWxsYXhNYXhMYXllcnMgOiAyMDtcXG51bmlmb3JtIGZsb2F0IHBhcmFsbGF4TWluTGF5ZXJzIDogNTtcXG51bmlmb3JtIHNhbXBsZXIyRCBwYXJhbGxheE9jY2x1c2lvbk1hcDtcXG5tYXQzIHRyYW5zcG9zZShpbiBtYXQzIGluTWF0KVxcbntcXG4gdmVjMyBpMCA9IGluTWF0WzBdO1xcbiB2ZWMzIGkxID0gaW5NYXRbMV07XFxuIHZlYzMgaTIgPSBpbk1hdFsyXTtcXG4gcmV0dXJuIG1hdDMoXFxuIHZlYzMoaTAueCwgaTEueCwgaTIueCksXFxuIHZlYzMoaTAueSwgaTEueSwgaTIueSksXFxuIHZlYzMoaTAueiwgaTEueiwgaTIueilcXG4gKTtcXG59XFxudmVjMiBwYXJhbGxheFV2KHZlYzIgdXYsIHZlYzMgdmlld0RpcilcXG57XFxuIGZsb2F0IG51bUxheWVycyA9IG1peChwYXJhbGxheE1heExheWVycywgcGFyYWxsYXhNaW5MYXllcnMsIGFicyhkb3QodmVjMygwLjAsIDAuMCwgMS4wKSwgdmlld0RpcikpKTtcXG4gZmxvYXQgbGF5ZXJIZWlnaHQgPSAxLjAgLyBudW1MYXllcnM7XFxuIGZsb2F0IGN1ckxheWVySGVpZ2h0ID0gMC4wO1xcbiB2ZWMyIGRlbHRhVXYgPSB2aWV3RGlyLnh5ICogcGFyYWxsYXhPY2NsdXNpb25TY2FsZSAvICh2aWV3RGlyLnogKiBudW1MYXllcnMpO1xcbiB2ZWMyIGN1clV2ID0gdXY7XFxuIGZsb2F0IGhlaWdodCA9IDEuMCAtIHRleHR1cmUyRChwYXJhbGxheE9jY2x1c2lvbk1hcCwgY3VyVXYpLnI7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgMzA7IGkrKykge1xcbiBjdXJMYXllckhlaWdodCArPSBsYXllckhlaWdodDtcXG4gY3VyVXYgLT0gZGVsdGFVdjtcXG4gaGVpZ2h0ID0gMS4wIC0gdGV4dHVyZTJEKHBhcmFsbGF4T2NjbHVzaW9uTWFwLCBjdXJVdikucjtcXG4gaWYgKGhlaWdodCA8IGN1ckxheWVySGVpZ2h0KSB7XFxuIGJyZWFrO1xcbiB9XFxuIH1cXG4gdmVjMiBwcmV2VXYgPSBjdXJVdiArIGRlbHRhVXY7XFxuIGZsb2F0IG5leHQgPSBoZWlnaHQgLSBjdXJMYXllckhlaWdodDtcXG4gZmxvYXQgcHJldiA9IDEuMCAtIHRleHR1cmUyRChwYXJhbGxheE9jY2x1c2lvbk1hcCwgcHJldlV2KS5yIC0gY3VyTGF5ZXJIZWlnaHQgKyBsYXllckhlaWdodDtcXG4gcmV0dXJuIG1peChjdXJVdiwgcHJldlV2LCBuZXh0IC8gKG5leHQgLSBwcmV2KSk7XFxufVxcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHtcXG4gdmVjNCBhbGJlZG9Db2xvciA9IHZlYzQoY29sb3IsIGFscGhhKTtcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuIGFsYmVkb0NvbG9yICo9IHZfQ29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfREVDT0RFXFxuIGFsYmVkb0NvbG9yID0gc1JHQlRvTGluZWFyKGFsYmVkb0NvbG9yKTtcXG4jZW5kaWZcXG4gdmVjMyBleWVQb3MgPSB2aWV3SW52ZXJzZVszXS54eXo7XFxuIHZlYzMgViA9IG5vcm1hbGl6ZShleWVQb3MgLSB2X1dvcmxkUG9zaXRpb24pO1xcbiB2ZWMyIHV2ID0gdl9UZXhjb29yZDtcXG4jaWYgZGVmaW5lZChQQVJBTExBWE9DQ0xVU0lPTk1BUF9FTkFCTEVEKSB8fCBkZWZpbmVkKE5PUk1BTE1BUF9FTkFCTEVEKVxcbiBtYXQzIHRibiA9IG1hdDModl9UYW5nZW50LCB2X0JpdGFuZ2VudCwgdl9Ob3JtYWwpO1xcbiNlbmRpZlxcbiNpZmRlZiBQQVJBTExBWE9DQ0xVU0lPTk1BUF9FTkFCTEVEXFxuIHV2ID0gcGFyYWxsYXhVdih2X1RleGNvb3JkLCBub3JtYWxpemUodHJhbnNwb3NlKHRibikgKiAtVikpO1xcbiNlbmRpZlxcbiNpZmRlZiBESUZGVVNFTUFQX0VOQUJMRURcXG4gdmVjNCB0ZXhlbCA9IHRleHR1cmUyRChkaWZmdXNlTWFwLCB1dik7XFxuICNpZmRlZiBTUkdCX0RFQ09ERVxcbiB0ZXhlbCA9IHNSR0JUb0xpbmVhcih0ZXhlbCk7XFxuICNlbmRpZlxcbiBhbGJlZG9Db2xvci5yZ2IgKj0gdGV4ZWwucmdiO1xcbiAjaWZkZWYgRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxcbiBhbGJlZG9Db2xvci5hICo9IHRleGVsLmE7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBVU0VfTUVUQUxORVNTXFxuIGZsb2F0IG0gPSBtZXRhbG5lc3M7XFxuICNpZmRlZiBNRVRBTE5FU1NNQVBfRU5BQkxFRFxcbiBmbG9hdCBtMiA9IHRleHR1cmUyRChtZXRhbG5lc3NNYXAsIHV2KVtNRVRBTE5FU1NfQ0hBTk5FTF07XFxuIG0gPSBjbGFtcChtMiArIChtIC0gMC41KSAqIDIuMCwgMC4wLCAxLjApO1xcbiAjZW5kaWZcXG4gdmVjMyBiYXNlQ29sb3IgPSBhbGJlZG9Db2xvci5yZ2I7XFxuIGFsYmVkb0NvbG9yLnJnYiA9IGJhc2VDb2xvciAqICgxLjAgLSBtKTtcXG4gdmVjMyBzcGVjID0gbWl4KHZlYzMoMC4wNCksIGJhc2VDb2xvciwgbSk7XFxuI2Vsc2VcXG4gdmVjMyBzcGVjID0gc3BlY3VsYXJDb2xvcjtcXG4jZW5kaWZcXG4jaWZkZWYgVVNFX1JPVUdITkVTU1xcbiBmbG9hdCBnID0gY2xhbXAoMS4wIC0gcm91Z2huZXNzLCAwLjAsIDEuMCk7XFxuICNpZmRlZiBST1VHSE5FU1NNQVBfRU5BQkxFRFxcbiBmbG9hdCBnMiA9IDEuMCAtIHRleHR1cmUyRChyb3VnaG5lc3NNYXAsIHV2KVtST1VHSE5FU1NfQ0hBTk5FTF07XFxuIGcgPSBjbGFtcChnMiArIChnIC0gMC41KSAqIDIuMCwgMC4wLCAxLjApO1xcbiAjZW5kaWZcXG4jZWxzZVxcbiBmbG9hdCBnID0gZ2xvc3NpbmVzcztcXG4gI2lmZGVmIEdMT1NTSU5FU1NNQVBfRU5BQkxFRFxcbiBmbG9hdCBnMiA9IHRleHR1cmUyRChnbG9zc2luZXNzTWFwLCB1dilbR0xPU1NJTkVTU19DSEFOTkVMXTtcXG4gZyA9IGNsYW1wKGcyICsgKGcgLSAwLjUpICogMi4wLCAwLjAsIDEuMCk7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZmRlZiBTUEVDVUxBUk1BUF9FTkFCTEVEXFxuIHNwZWMgKj0gc1JHQlRvTGluZWFyKHRleHR1cmUyRChzcGVjdWxhck1hcCwgdXYpKS5yZ2I7XFxuI2VuZGlmXFxuIHZlYzMgTiA9IHZfTm9ybWFsO1xcbiNpZmRlZiBET1VCTEVfU0lERURcXG4gaWYgKGRvdChOLCBWKSA8IDAuMCkge1xcbiBOID0gLU47XFxuIH1cXG4jZW5kaWZcXG4jaWZkZWYgTk9STUFMTUFQX0VOQUJMRURcXG4gaWYgKGRvdCh2X1RhbmdlbnQsIHZfVGFuZ2VudCkgPiAwLjApIHtcXG4gdmVjMyBub3JtYWxUZXhlbCA9IHRleHR1cmUyRChub3JtYWxNYXAsIHV2KS54eXo7XFxuIGlmIChkb3Qobm9ybWFsVGV4ZWwsIG5vcm1hbFRleGVsKSA+IDAuMCkgeyBOID0gKG5vcm1hbFRleGVsICogMi4wIC0gMS4wKTtcXG4gTiA9IG5vcm1hbGl6ZShOICogdmVjMyhub3JtYWxTY2FsZSwgbm9ybWFsU2NhbGUsIDEuMCkpO1xcbiB0Ym5bMV0gPSAtdGJuWzFdO1xcbiBOID0gbm9ybWFsaXplKHRibiAqIE4pO1xcbiB9XFxuIH1cXG4jZW5kaWZcXG4gdmVjMyBkaWZmdXNlVGVybSA9IHZlYzMoMC4wLCAwLjAsIDAuMCk7XFxuIHZlYzMgc3BlY3VsYXJUZXJtID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG4gZmxvYXQgbmR2ID0gY2xhbXAoZG90KE4sIFYpLCAwLjAsIDEuMCk7XFxuIHZlYzMgZnJlc25lbFRlcm0gPSBGX1NjaGxpY2sobmR2LCBzcGVjKTtcXG4jaWZkZWYgQU1CSUVOVF9MSUdIVF9DT1VOVFxcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBBTUJJRU5UX0xJR0hUX0NPVU5UOyBfaWR4XysrKVxcbiB7e1xcbiBkaWZmdXNlVGVybSArPSBhbWJpZW50TGlnaHRDb2xvcltfaWR4X107XFxuIH19XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfU0hfTElHSFRfQ09VTlRcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgQU1CSUVOVF9TSF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge3tcXG4gZGlmZnVzZVRlcm0gKz0gY2FsY0FtYmllbnRTSExpZ2h0KF9pZHhfLCBOKSAqIGFtYmllbnRTSExpZ2h0Q29sb3JbX2lkeF9dO1xcbiB9fVxcbiNlbmRpZlxcbiNpZmRlZiBQT0lOVF9MSUdIVF9DT1VOVFxcbiNpZiBkZWZpbmVkKFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gZmxvYXQgc2hhZG93Q29udHJpYnNQb2ludFtQT0lOVF9MSUdIVF9DT1VOVF07XFxuIGlmKHNoYWRvd0VuYWJsZWQpXFxuIHtcXG4gY29tcHV0ZVNoYWRvd09mUG9pbnRMaWdodHModl9Xb3JsZFBvc2l0aW9uLCBzaGFkb3dDb250cmlic1BvaW50KTtcXG4gfVxcbiNlbmRpZlxcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBQT0lOVF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge3tcXG4gdmVjMyBsaWdodFBvc2l0aW9uID0gcG9pbnRMaWdodFBvc2l0aW9uW19pZHhfXTtcXG4gdmVjMyBsYyA9IHBvaW50TGlnaHRDb2xvcltfaWR4X107XFxuIGZsb2F0IHJhbmdlID0gcG9pbnRMaWdodFJhbmdlW19pZHhfXTtcXG4gdmVjMyBMID0gbGlnaHRQb3NpdGlvbiAtIHZfV29ybGRQb3NpdGlvbjtcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChMKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIHJhbmdlKTtcXG4gTCAvPSBkaXN0O1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IHNoYWRvd0NvbnRyaWIgPSAxLjA7XFxuI2lmIGRlZmluZWQoUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZihzaGFkb3dFbmFibGVkKVxcbiB7XFxuIHNoYWRvd0NvbnRyaWIgPSBzaGFkb3dDb250cmlic1BvaW50W19pZHhfXTtcXG4gfVxcbiNlbmRpZlxcbiB2ZWMzIGxpID0gbGMgKiBuZGwgKiBhdHRlbnVhdGlvbiAqIHNoYWRvd0NvbnRyaWI7XFxuIGRpZmZ1c2VUZXJtICs9IGxpO1xcbiBzcGVjdWxhclRlcm0gKz0gbGkgKiBmcmVzbmVsVGVybSAqIERfUGhvbmcoZywgbmRoKTtcXG4gfX1cXG4jZW5kaWZcXG4jaWZkZWYgRElSRUNUSU9OQUxfTElHSFRfQ09VTlRcXG4jaWYgZGVmaW5lZChESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWJzRGlyW0RJUkVDVElPTkFMX0xJR0hUX0NPVU5UXTtcXG4gaWYoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBjb21wdXRlU2hhZG93T2ZEaXJlY3Rpb25hbExpZ2h0cyh2X1dvcmxkUG9zaXRpb24sIHNoYWRvd0NvbnRyaWJzRGlyKTtcXG4gfVxcbiNlbmRpZlxcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVDsgX2lkeF8rKylcXG4ge3tcXG4gdmVjMyBMID0gLW5vcm1hbGl6ZShkaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uW19pZHhfXSk7XFxuIHZlYzMgbGMgPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbX2lkeF9dO1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IHNoYWRvd0NvbnRyaWIgPSAxLjA7XFxuI2lmIGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZihzaGFkb3dFbmFibGVkKVxcbiB7XFxuIHNoYWRvd0NvbnRyaWIgPSBzaGFkb3dDb250cmlic0RpcltfaWR4X107XFxuIH1cXG4jZW5kaWZcXG4gdmVjMyBsaSA9IGxjICogbmRsICogc2hhZG93Q29udHJpYjtcXG4gZGlmZnVzZVRlcm0gKz0gbGk7XFxuIHNwZWN1bGFyVGVybSArPSBsaSAqIGZyZXNuZWxUZXJtICogRF9QaG9uZyhnLCBuZGgpO1xcbiB9fVxcbiNlbmRpZlxcbiNpZmRlZiBTUE9UX0xJR0hUX0NPVU5UXFxuI2lmIGRlZmluZWQoU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWJzU3BvdFtTUE9UX0xJR0hUX0NPVU5UXTtcXG4gaWYoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBjb21wdXRlU2hhZG93T2ZTcG90TGlnaHRzKHZfV29ybGRQb3NpdGlvbiwgc2hhZG93Q29udHJpYnNTcG90KTtcXG4gfVxcbiNlbmRpZlxcbiBmb3IoaW50IGkgPSAwOyBpIDwgU1BPVF9MSUdIVF9DT1VOVDsgaSsrKVxcbiB7XFxuIHZlYzMgbGlnaHRQb3NpdGlvbiA9IHNwb3RMaWdodFBvc2l0aW9uW2ldO1xcbiB2ZWMzIHNwb3RMaWdodERpcmVjdGlvbiA9IC1ub3JtYWxpemUoc3BvdExpZ2h0RGlyZWN0aW9uW2ldKTtcXG4gdmVjMyBsYyA9IHNwb3RMaWdodENvbG9yW2ldO1xcbiBmbG9hdCByYW5nZSA9IHNwb3RMaWdodFJhbmdlW2ldO1xcbiBmbG9hdCBhID0gc3BvdExpZ2h0VW1icmFBbmdsZUNvc2luZVtpXTtcXG4gZmxvYXQgYiA9IHNwb3RMaWdodFBlbnVtYnJhQW5nbGVDb3NpbmVbaV07XFxuIGZsb2F0IGZhbGxvZmZGYWN0b3IgPSBzcG90TGlnaHRGYWxsb2ZmRmFjdG9yW2ldO1xcbiB2ZWMzIEwgPSBsaWdodFBvc2l0aW9uIC0gdl9Xb3JsZFBvc2l0aW9uO1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKEwpO1xcbiBmbG9hdCBhdHRlbnVhdGlvbiA9IGxpZ2h0QXR0ZW51YXRpb24oZGlzdCwgcmFuZ2UpO1xcbiBMIC89IGRpc3Q7XFxuIGZsb2F0IGMgPSBkb3Qoc3BvdExpZ2h0RGlyZWN0aW9uLCBMKTtcXG4gZmxvYXQgZmFsbG9mZjtcXG4gZmFsbG9mZiA9IGNsYW1wKChjIC0gYSkgLyhiIC0gYSksIDAuMCwgMS4wKTtcXG4gZmFsbG9mZiA9IHBvdyhmYWxsb2ZmLCBmYWxsb2ZmRmFjdG9yKTtcXG4gdmVjMyBIID0gbm9ybWFsaXplKEwgKyBWKTtcXG4gZmxvYXQgbmRsID0gY2xhbXAoZG90KE4sIEwpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kaCA9IGNsYW1wKGRvdChOLCBIKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gMS4wO1xcbiNpZiBkZWZpbmVkKFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZiAoc2hhZG93RW5hYmxlZClcXG4ge1xcbiBzaGFkb3dDb250cmliID0gc2hhZG93Q29udHJpYnNTcG90W2ldO1xcbiB9XFxuI2VuZGlmXFxuIHZlYzMgbGkgPSBsYyAqIGF0dGVudWF0aW9uICogKDEuMCAtIGZhbGxvZmYpICogc2hhZG93Q29udHJpYiAqIG5kbDtcXG4gZGlmZnVzZVRlcm0gKz0gbGk7XFxuIHNwZWN1bGFyVGVybSArPSBsaSAqIGZyZXNuZWxUZXJtICogRF9QaG9uZyhnLCBuZGgpO1xcbiB9XFxuI2VuZGlmXFxuIHZlYzQgb3V0Q29sb3IgPSBhbGJlZG9Db2xvcjtcXG4gb3V0Q29sb3IucmdiICo9IG1heChkaWZmdXNlVGVybSwgdmVjMygwLjApKTtcXG4gb3V0Q29sb3IucmdiICs9IG1heChzcGVjdWxhclRlcm0sIHZlYzMoMC4wKSk7XFxuI2lmZGVmIEFNQklFTlRfQ1VCRU1BUF9MSUdIVF9DT1VOVFxcbiB2ZWMzIEwgPSByZWZsZWN0KC1WLCBOKTtcXG4gZmxvYXQgcm91Z2gyID0gY2xhbXAoMS4wIC0gZywgMC4wLCAxLjApO1xcbiBmbG9hdCBiaWFzMiA9IHJvdWdoMiAqIDUuMDtcXG4gdmVjMiBicmRmUGFyYW0yID0gdGV4dHVyZTJEKGFtYmllbnRDdWJlbWFwTGlnaHRCUkRGTG9va3VwWzBdLCB2ZWMyKHJvdWdoMiwgbmR2KSkueHk7XFxuIHZlYzMgZW52V2VpZ2h0MiA9IHNwZWMgKiBicmRmUGFyYW0yLnggKyBicmRmUGFyYW0yLnk7XFxuIHZlYzMgZW52VGV4ZWwyO1xcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBBTUJJRU5UX0NVQkVNQVBfTElHSFRfQ09VTlQ7IF9pZHhfKyspXFxuIHt7XFxuICNpZmRlZiBTVVBQT1JUX1RFWFRVUkVfTE9EXFxuIGVudlRleGVsMiA9IFJHQk1EZWNvZGUodGV4dHVyZUN1YmVMb2RFWFQoYW1iaWVudEN1YmVtYXBMaWdodEN1YmVtYXBbX2lkeF9dLCBMLCBiaWFzMiksIDguMTIpO1xcbiAjZWxzZVxcbiBlbnZUZXhlbDIgPSBSR0JNRGVjb2RlKHRleHR1cmVDdWJlKGFtYmllbnRDdWJlbWFwTGlnaHRDdWJlbWFwW19pZHhfXSwgTCksIDguMTIpO1xcbiAjZW5kaWZcXG4gb3V0Q29sb3IucmdiICs9IGFtYmllbnRDdWJlbWFwTGlnaHRDb2xvcltfaWR4X10gKiBlbnZUZXhlbDIgKiBlbnZXZWlnaHQyO1xcbiB9fVxcbiNlbmRpZlxcbiNpZmRlZiBFTlZJUk9OTUVOVE1BUF9FTkFCTEVEXFxuIHZlYzMgZW52V2VpZ2h0ID0gZyAqIGZyZXNuZWxUZXJtO1xcbiB2ZWMzIEwgPSByZWZsZWN0KC1WLCBOKTtcXG4gI2lmZGVmIFBBUkFMTEFYX0NPUlJFQ1RFRFxcbiBMID0gcGFyYWxsYXhDb3JyZWN0KEwsIHZfV29ybGRQb3NpdGlvbiwgZW52aXJvbm1lbnRCb3hNaW4sIGVudmlyb25tZW50Qm94TWF4KTtcXG4jZW5kaWZcXG4gI2lmZGVmIEVOVklST05NRU5UTUFQX1BSRUZJTFRFUlxcbiBmbG9hdCByb3VnaCA9IGNsYW1wKDEuMCAtIGcsIDAuMCwgMS4wKTtcXG4gZmxvYXQgYmlhcyA9IHJvdWdoICogbWF4TWlwbWFwTGV2ZWw7XFxuICNpZmRlZiBTVVBQT1JUX1RFWFRVUkVfTE9EXFxuIHZlYzMgZW52VGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZUN1YmVMb2RFWFQoZW52aXJvbm1lbnRNYXAsIEwsIGJpYXMpKS5yZ2I7XFxuICNlbHNlXFxuIHZlYzMgZW52VGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZUN1YmUoZW52aXJvbm1lbnRNYXAsIEwpKS5yZ2I7XFxuICNlbmRpZlxcbiAjaWZkZWYgQlJERkxPT0tVUF9FTkFCTEVEXFxuIHZlYzIgYnJkZlBhcmFtID0gdGV4dHVyZTJEKGJyZGZMb29rdXAsIHZlYzIocm91Z2gsIG5kdikpLnh5O1xcbiBlbnZXZWlnaHQgPSBzcGVjICogYnJkZlBhcmFtLnggKyBicmRmUGFyYW0ueTtcXG4gI2VuZGlmXFxuICNlbHNlXFxuIHZlYzMgZW52VGV4ZWwgPSB0ZXh0dXJlQ3ViZShlbnZpcm9ubWVudE1hcCwgTCkueHl6O1xcbiAjZW5kaWZcXG4gb3V0Q29sb3IucmdiICs9IGVudlRleGVsICogZW52V2VpZ2h0O1xcbiNlbmRpZlxcbiBmbG9hdCBhb0ZhY3RvciA9IDEuMDtcXG4jaWZkZWYgU1NBT01BUF9FTkFCTEVEXFxuIGFvRmFjdG9yID0gbWluKHRleHR1cmUyRChzc2FvTWFwLCAoZ2xfRnJhZ0Nvb3JkLnh5IC0gdmlld3BvcnQueHkpIC8gdmlld3BvcnQuencpLnIsIGFvRmFjdG9yKTtcXG4jZW5kaWZcXG4jaWZkZWYgQU9NQVBfRU5BQkxFRFxcbiBhb0ZhY3RvciA9IG1pbigxLjAgLSBjbGFtcCgoMS4wIC0gdGV4dHVyZTJEKGFvTWFwLCB2X1RleGNvb3JkMikucikgKiBhb0ludGVuc2l0eSwgMC4wLCAxLjApLCBhb0ZhY3Rvcik7XFxuI2VuZGlmXFxuI2lmZGVmIE9DQ0xVU0lPTk1BUF9FTkFCTEVEXFxuIGFvRmFjdG9yID0gbWluKDEuMCAtIGNsYW1wKCgxLjAgLSB0ZXh0dXJlMkQob2NjbHVzaW9uTWFwLCB2X1RleGNvb3JkKS5yKSwgMC4wLCAxLjApLCBhb0ZhY3Rvcik7XFxuI2VuZGlmXFxuIG91dENvbG9yLnJnYiAqPSBhb0ZhY3RvcjtcXG4gdmVjMyBsRW1pc3Npb24gPSBlbWlzc2lvbjtcXG4jaWZkZWYgRU1JU1NJVkVNQVBfRU5BQkxFRFxcbiBsRW1pc3Npb24gKj0gdGV4dHVyZTJEKGVtaXNzaXZlTWFwLCB1dikucmdiO1xcbiNlbmRpZlxcbiBvdXRDb2xvci5yZ2IgKz0gbEVtaXNzaW9uICogZW1pc3Npb25JbnRlbnNpdHk7XFxuIGlmKGxpbmVXaWR0aCA+IDAuKVxcbiB7XFxuIG91dENvbG9yLnJnYiA9IG1peChvdXRDb2xvci5yZ2IsIGxpbmVDb2xvci5yZ2IsICgxLjAgLSBlZGdlRmFjdG9yKGxpbmVXaWR0aCkpICogbGluZUNvbG9yLmEpO1xcbiB9XFxuI2lmZGVmIEFMUEhBX1RFU1RcXG4gaWYgKG91dENvbG9yLmEgPCBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIFRPTkVNQVBQSU5HXFxuIG91dENvbG9yLnJnYiA9IEFDRVNUb25lTWFwcGluZyhvdXRDb2xvci5yZ2IpO1xcbiNlbmRpZlxcbiNpZmRlZiBTUkdCX0VOQ09ERVxcbiBvdXRDb2xvciA9IGxpbmVhclRvc1JHQihvdXRDb2xvcik7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihvdXRDb2xvcik7XFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX2ZyYWdtZW50X21haW5cXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zdGFuZGFyZE1SLnZlcnRleFxcbkBpbXBvcnQgY2xheS5zdGFuZGFyZC52ZXJ0ZXhcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnN0YW5kYXJkTVIuZnJhZ21lbnRcXG4jZGVmaW5lIFVTRV9NRVRBTE5FU1NcXG4jZGVmaW5lIFVTRV9ST1VHSE5FU1NcXG5AaW1wb3J0IGNsYXkuc3RhbmRhcmQuZnJhZ21lbnRcXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9zdGFuZGFyZC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSA4M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///83\n");

/***/ }),
/* 84 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Joint__ = __webpack_require__(58);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__glmatrix_quat__ = __webpack_require__(27);\n\n\n\n\n\n\n\n\n\n\n\n\nvar tmpBoundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\nvar tmpMat4 = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n\n/**\n * @constructor clay.Skeleton\n */\nvar Skeleton = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.Skeleton# */{\n\n        /**\n         * Relative root node that not affect transform of joint.\n         * @type {clay.Node}\n         */\n        relativeRootNode: null,\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * joints\n         * @type {Array.<clay.Joint>}\n         */\n        joints: [],\n\n        /**\n         * bounding box with bound geometry.\n         * @type {clay.BoundingBox}\n         */\n        boundingBox: null,\n\n        _clips: [],\n\n        // Matrix to joint space (relative to root joint)\n        _invBindPoseMatricesArray: null,\n\n        // Use subarray instead of copy back each time computing matrix\n        // http://jsperf.com/subarray-vs-copy-for-array-transform/5\n        _jointMatricesSubArrays: [],\n\n        // jointMatrix * currentPoseMatrix\n        // worldTransform is relative to the root bone\n        // still in model space not world space\n        _skinMatricesArray: null,\n\n        _skinMatricesSubArrays: [],\n\n        _subSkinMatricesArray: {}\n    };\n},\n/** @lends clay.Skeleton.prototype */\n{\n\n    /**\n     * Add a skinning clip and create a map between clip and skeleton\n     * @param {clay.animation.SkinningClip} clip\n     * @param {Object} [mapRule] Map between joint name in skeleton and joint name in clip\n     */\n    addClip: function (clip, mapRule) {\n        // Clip have been exists in\n        for (var i = 0; i < this._clips.length; i++) {\n            if (this._clips[i].clip === clip) {\n                return;\n            }\n        }\n        // Map the joint index in skeleton to joint pose index in clip\n        var maps = [];\n        for (var i = 0; i < this.joints.length; i++) {\n            maps[i] = -1;\n        }\n        // Create avatar\n        for (var i = 0; i < clip.tracks.length; i++) {\n            for (var j = 0; j < this.joints.length; j++) {\n                var joint = this.joints[j];\n                var track = clip.tracks[i];\n                var jointName = joint.name;\n                if (mapRule) {\n                    jointName = mapRule[jointName];\n                }\n                if (track.name === jointName) {\n                    maps[j] = i;\n                    break;\n                }\n            }\n        }\n\n        this._clips.push({\n            maps: maps,\n            clip: clip\n        });\n\n        return this._clips.length - 1;\n    },\n\n    /**\n     * @param {clay.animation.SkinningClip} clip\n     */\n    removeClip: function (clip) {\n        var idx = -1;\n        for (var i = 0; i < this._clips.length; i++) {\n            if (this._clips[i].clip === clip) {\n                idx = i;\n                break;\n            }\n        }\n        if (idx > 0) {\n            this._clips.splice(idx, 1);\n        }\n    },\n    /**\n     * Remove all clips\n     */\n    removeClipsAll: function () {\n        this._clips = [];\n    },\n\n    /**\n     * Get clip by index\n     * @param  {number} index\n     */\n    getClip: function (index) {\n        if (this._clips[index]) {\n            return this._clips[index].clip;\n        }\n    },\n\n    /**\n     * @return {number}\n     */\n    getClipNumber: function () {\n        return this._clips.length;\n    },\n\n    /**\n     * Calculate joint matrices from node transform\n     * @function\n     */\n    updateJointMatrices: (function () {\n\n        var m4 = __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].create();\n\n        return function () {\n            this._invBindPoseMatricesArray = new Float32Array(this.joints.length * 16);\n            this._skinMatricesArray = new Float32Array(this.joints.length * 16);\n\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].copy(m4, joint.node.worldTransform.array);\n                __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].invert(m4, m4);\n\n                var offset = i * 16;\n                for (var j = 0; j < 16; j++) {\n                    this._invBindPoseMatricesArray[offset + j] = m4[j];\n                }\n            }\n\n            this.updateMatricesSubArrays();\n        };\n    })(),\n\n    /**\n     * Update boundingBox of each joint bound to geometry.\n     * ASSUME skeleton and geometry joints are matched.\n     * @param {clay.Geometry} geometry\n     */\n    updateJointsBoundingBoxes: function (geometry) {\n        var attributes = geometry.attributes;\n        var positionAttr = attributes.position;\n        var jointAttr = attributes.joint;\n        var weightAttr = attributes.weight;\n\n        var jointsBoundingBoxes = [];\n        for (var i = 0; i < this.joints.length; i++) {\n            jointsBoundingBoxes[i] = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n            jointsBoundingBoxes[i].__updated = false;\n        }\n\n        var vtxJoint = [];\n        var vtxPos = [];\n        var vtxWeight = [];\n        var maxJointIdx = 0;\n        for (var i = 0; i < geometry.vertexCount; i++) {\n            jointAttr.get(i, vtxJoint);\n            positionAttr.get(i, vtxPos);\n            weightAttr.get(i, vtxWeight);\n\n            for (var k = 0; k < 4; k++) {\n                if (vtxWeight[k] > 0.01) {\n                    var jointIdx = vtxJoint[k];\n                    maxJointIdx = Math.max(maxJointIdx, jointIdx);\n\n                    var min = jointsBoundingBoxes[jointIdx].min.array;\n                    var max = jointsBoundingBoxes[jointIdx].max.array;\n\n                    jointsBoundingBoxes[jointIdx].__updated = true;\n\n                    min = __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].min(min, min, vtxPos);\n                    max = __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].max(max, max, vtxPos);\n                }\n            }\n        }\n\n        this._jointsBoundingBoxes = jointsBoundingBoxes;\n\n        this.boundingBox = new __WEBPACK_IMPORTED_MODULE_4__math_BoundingBox__[\"a\" /* default */]();\n\n        if (maxJointIdx < this.joints.length - 1) {\n            console.warn('Geometry joints and skeleton joints don\\'t match');\n        }\n    },\n\n    setJointMatricesArray: function (arr) {\n        this._invBindPoseMatricesArray = arr;\n        this._skinMatricesArray = new Float32Array(arr.length);\n        this.updateMatricesSubArrays();\n    },\n\n    updateMatricesSubArrays: function () {\n        for (var i = 0; i < this.joints.length; i++) {\n            this._jointMatricesSubArrays[i] = this._invBindPoseMatricesArray.subarray(i * 16, (i+1) * 16);\n            this._skinMatricesSubArrays[i] = this._skinMatricesArray.subarray(i * 16, (i+1) * 16);\n        }\n    },\n\n    /**\n     * Update skinning matrices\n     */\n    update: function () {\n\n        this._setPose();\n\n        var jointsBoundingBoxes = this._jointsBoundingBoxes;\n\n        for (var i = 0; i < this.joints.length; i++) {\n            var joint = this.joints[i];\n            __WEBPACK_IMPORTED_MODULE_6__glmatrix_mat4__[\"a\" /* default */].multiply(\n                this._skinMatricesSubArrays[i],\n                joint.node.worldTransform.array,\n                this._jointMatricesSubArrays[i]\n            );\n        }\n        if (this.boundingBox) {\n            this.boundingBox.min.set(Infinity, Infinity, Infinity);\n            this.boundingBox.max.set(-Infinity, -Infinity, -Infinity);\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                var bbox = jointsBoundingBoxes[i];\n                if (bbox.__updated) {\n                    tmpBoundingBox.copy(bbox);\n                    tmpMat4.array = this._skinMatricesSubArrays[i];\n                    tmpBoundingBox.applyTransform(tmpMat4);\n\n                    this.boundingBox.union(tmpBoundingBox);\n                }\n            }\n        }\n    },\n\n    getSubSkinMatrices: function (meshId, joints) {\n        var subArray = this._subSkinMatricesArray[meshId];\n        if (!subArray) {\n            subArray\n                = this._subSkinMatricesArray[meshId]\n                = new Float32Array(joints.length * 16);\n        }\n        var cursor = 0;\n        for (var i = 0; i < joints.length; i++) {\n            var idx = joints[i];\n            for (var j = 0; j < 16; j++) {\n                subArray[cursor++] = this._skinMatricesArray[idx * 16 + j];\n            }\n        }\n        return subArray;\n    },\n\n    getSubSkinMatricesTexture: function (meshId, joints) {\n        var skinMatrices = this.getSubSkinMatrices(meshId, joints);\n        var size;\n        var numJoints = this.joints.length;\n        if (numJoints > 256) {\n            size = 64;\n        }\n        else if (numJoints > 64) {\n            size = 32;\n        }\n        else if (numJoints > 16) {\n            size = 16;\n        }\n        else {\n            size = 8;\n        }\n\n        var texture = this._skinMatricesTexture = this._skinMatricesTexture || new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n            type: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].FLOAT,\n            minFilter: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].NEAREST,\n            magFilter: __WEBPACK_IMPORTED_MODULE_3__Texture__[\"a\" /* default */].NEAREST,\n            useMipmap: false,\n            flipY: false\n        });\n        texture.width = size;\n        texture.height = size;\n\n        if (!texture.pixels || texture.pixels.length !== size * size * 4) {\n            texture.pixels = new Float32Array(size * size * 4);\n        }\n        texture.pixels.set(skinMatrices);\n        texture.dirty();\n\n        return texture;\n    },\n\n    getSkinMatricesTexture: function () {\n\n\n        return this._skinMatricesTexture;\n    },\n\n    _setPose: function () {\n        if (this._clips[0]) {\n            var clip = this._clips[0].clip;\n            var maps = this._clips[0].maps;\n\n            for (var i = 0; i < this.joints.length; i++) {\n                var joint = this.joints[i];\n                if (maps[i] === -1) {\n                    continue;\n                }\n                var pose = clip.tracks[maps[i]];\n\n                // Not update if there is no data.\n                // PENDING If sync pose.position, pose.rotation, pose.scale\n                if (pose.channels.position) {\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].copy(joint.node.position.array, pose.position);\n                }\n                if (pose.channels.rotation) {\n                    __WEBPACK_IMPORTED_MODULE_8__glmatrix_quat__[\"a\" /* default */].copy(joint.node.rotation.array, pose.rotation);\n                }\n                if (pose.channels.scale) {\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].copy(joint.node.scale.array, pose.scale);\n                }\n\n                joint.node.position._dirty = true;\n                joint.node.rotation._dirty = true;\n                joint.node.scale._dirty = true;\n            }\n        }\n    },\n\n    clone: function (clonedNodesMap) {\n        var skeleton = new Skeleton();\n        skeleton.name = this.name;\n\n        for (var i = 0; i < this.joints.length; i++) {\n            var newJoint = new __WEBPACK_IMPORTED_MODULE_1__Joint__[\"a\" /* default */]();\n            var joint = this.joints[i];\n            newJoint.name = joint.name;\n            newJoint.index = joint.index;\n\n            if (clonedNodesMap) {\n                var newNode = clonedNodesMap[joint.node.__uid__];\n\n                if (!newNode) {\n                    // PENDING\n                    console.warn('Can\\'t find node');\n                }\n\n                newJoint.node = newNode || joint.node;\n            }\n            else {\n                newJoint.node = joint.node;\n            }\n\n            skeleton.joints.push(newJoint);\n        }\n\n        if (this._invBindPoseMatricesArray) {\n            var len = this._invBindPoseMatricesArray.length;\n            skeleton._invBindPoseMatricesArray = new Float32Array(len);\n            for (var i = 0; i < len; i++) {\n                skeleton._invBindPoseMatricesArray[i] = this._invBindPoseMatricesArray[i];\n            }\n\n            skeleton._skinMatricesArray = new Float32Array(len);\n\n            skeleton.updateMatricesSubArrays();\n        }\n\n        skeleton._jointsBoundingBoxe = (this._jointsBoundingBoxes || []).map(function (bbox) {\n            return bbox.clone();\n        });\n\n        skeleton.update();\n\n        return skeleton;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Skeleton);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1NrZWxldG9uLmpzPzgyMzEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IEpvaW50IGZyb20gJy4vSm9pbnQnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZSBmcm9tICcuL1RleHR1cmUnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuL21hdGgvTWF0cml4NCc7XG5cbmltcG9ydCBtYXQ0IGZyb20gJy4vZ2xtYXRyaXgvbWF0NCc7XG5pbXBvcnQgdmVjMyBmcm9tICcuL2dsbWF0cml4L3ZlYzMnO1xuaW1wb3J0IHF1YXQgZnJvbSAnLi9nbG1hdHJpeC9xdWF0JztcblxuXG52YXIgdG1wQm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbnZhciB0bXBNYXQ0ID0gbmV3IE1hdHJpeDQoKTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5Ta2VsZXRvblxuICovXG52YXIgU2tlbGV0b24gPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5Ta2VsZXRvbiMgKi97XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbGF0aXZlIHJvb3Qgbm9kZSB0aGF0IG5vdCBhZmZlY3QgdHJhbnNmb3JtIG9mIGpvaW50LlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAgICAgKi9cbiAgICAgICAgcmVsYXRpdmVSb290Tm9kZTogbnVsbCxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBuYW1lOiAnJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogam9pbnRzXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48Y2xheS5Kb2ludD59XG4gICAgICAgICAqL1xuICAgICAgICBqb2ludHM6IFtdLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBib3VuZGluZyBib3ggd2l0aCBib3VuZCBnZW9tZXRyeS5cbiAgICAgICAgICogQHR5cGUge2NsYXkuQm91bmRpbmdCb3h9XG4gICAgICAgICAqL1xuICAgICAgICBib3VuZGluZ0JveDogbnVsbCxcblxuICAgICAgICBfY2xpcHM6IFtdLFxuXG4gICAgICAgIC8vIE1hdHJpeCB0byBqb2ludCBzcGFjZSAocmVsYXRpdmUgdG8gcm9vdCBqb2ludClcbiAgICAgICAgX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheTogbnVsbCxcblxuICAgICAgICAvLyBVc2Ugc3ViYXJyYXkgaW5zdGVhZCBvZiBjb3B5IGJhY2sgZWFjaCB0aW1lIGNvbXB1dGluZyBtYXRyaXhcbiAgICAgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vc3ViYXJyYXktdnMtY29weS1mb3ItYXJyYXktdHJhbnNmb3JtLzVcbiAgICAgICAgX2pvaW50TWF0cmljZXNTdWJBcnJheXM6IFtdLFxuXG4gICAgICAgIC8vIGpvaW50TWF0cml4ICogY3VycmVudFBvc2VNYXRyaXhcbiAgICAgICAgLy8gd29ybGRUcmFuc2Zvcm0gaXMgcmVsYXRpdmUgdG8gdGhlIHJvb3QgYm9uZVxuICAgICAgICAvLyBzdGlsbCBpbiBtb2RlbCBzcGFjZSBub3Qgd29ybGQgc3BhY2VcbiAgICAgICAgX3NraW5NYXRyaWNlc0FycmF5OiBudWxsLFxuXG4gICAgICAgIF9za2luTWF0cmljZXNTdWJBcnJheXM6IFtdLFxuXG4gICAgICAgIF9zdWJTa2luTWF0cmljZXNBcnJheToge31cbiAgICB9O1xufSxcbi8qKiBAbGVuZHMgY2xheS5Ta2VsZXRvbi5wcm90b3R5cGUgKi9cbntcblxuICAgIC8qKlxuICAgICAqIEFkZCBhIHNraW5uaW5nIGNsaXAgYW5kIGNyZWF0ZSBhIG1hcCBiZXR3ZWVuIGNsaXAgYW5kIHNrZWxldG9uXG4gICAgICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5Ta2lubmluZ0NsaXB9IGNsaXBcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW21hcFJ1bGVdIE1hcCBiZXR3ZWVuIGpvaW50IG5hbWUgaW4gc2tlbGV0b24gYW5kIGpvaW50IG5hbWUgaW4gY2xpcFxuICAgICAqL1xuICAgIGFkZENsaXA6IGZ1bmN0aW9uIChjbGlwLCBtYXBSdWxlKSB7XG4gICAgICAgIC8vIENsaXAgaGF2ZSBiZWVuIGV4aXN0cyBpblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2NsaXBzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY2xpcHNbaV0uY2xpcCA9PT0gY2xpcCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBNYXAgdGhlIGpvaW50IGluZGV4IGluIHNrZWxldG9uIHRvIGpvaW50IHBvc2UgaW5kZXggaW4gY2xpcFxuICAgICAgICB2YXIgbWFwcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBtYXBzW2ldID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ3JlYXRlIGF2YXRhclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNsaXAudHJhY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50ID0gdGhpcy5qb2ludHNbal07XG4gICAgICAgICAgICAgICAgdmFyIHRyYWNrID0gY2xpcC50cmFja3NbaV07XG4gICAgICAgICAgICAgICAgdmFyIGpvaW50TmFtZSA9IGpvaW50Lm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKG1hcFJ1bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgam9pbnROYW1lID0gbWFwUnVsZVtqb2ludE5hbWVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHJhY2submFtZSA9PT0gam9pbnROYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hcHNbal0gPSBpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jbGlwcy5wdXNoKHtcbiAgICAgICAgICAgIG1hcHM6IG1hcHMsXG4gICAgICAgICAgICBjbGlwOiBjbGlwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLl9jbGlwcy5sZW5ndGggLSAxO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLlNraW5uaW5nQ2xpcH0gY2xpcFxuICAgICAqL1xuICAgIHJlbW92ZUNsaXA6IGZ1bmN0aW9uIChjbGlwKSB7XG4gICAgICAgIHZhciBpZHggPSAtMTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jbGlwcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NsaXBzW2ldLmNsaXAgPT09IGNsaXApIHtcbiAgICAgICAgICAgICAgICBpZHggPSBpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9jbGlwcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGFsbCBjbGlwc1xuICAgICAqL1xuICAgIHJlbW92ZUNsaXBzQWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2NsaXBzID0gW107XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBjbGlwIGJ5IGluZGV4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSBpbmRleFxuICAgICAqL1xuICAgIGdldENsaXA6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICBpZiAodGhpcy5fY2xpcHNbaW5kZXhdKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY2xpcHNbaW5kZXhdLmNsaXA7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGdldENsaXBOdW1iZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NsaXBzLmxlbmd0aDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIGpvaW50IG1hdHJpY2VzIGZyb20gbm9kZSB0cmFuc2Zvcm1cbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKi9cbiAgICB1cGRhdGVKb2ludE1hdHJpY2VzOiAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBtNCA9IG1hdDQuY3JlYXRlKCk7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5qb2ludHMubGVuZ3RoICogMTYpO1xuICAgICAgICAgICAgdGhpcy5fc2tpbk1hdHJpY2VzQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuam9pbnRzLmxlbmd0aCAqIDE2KTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBqb2ludCA9IHRoaXMuam9pbnRzW2ldO1xuICAgICAgICAgICAgICAgIG1hdDQuY29weShtNCwgam9pbnQubm9kZS53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG4gICAgICAgICAgICAgICAgbWF0NC5pbnZlcnQobTQsIG00KTtcblxuICAgICAgICAgICAgICAgIHZhciBvZmZzZXQgPSBpICogMTY7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAxNjsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheVtvZmZzZXQgKyBqXSA9IG00W2pdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVNYXRyaWNlc1N1YkFycmF5cygpO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGUgYm91bmRpbmdCb3ggb2YgZWFjaCBqb2ludCBib3VuZCB0byBnZW9tZXRyeS5cbiAgICAgKiBBU1NVTUUgc2tlbGV0b24gYW5kIGdlb21ldHJ5IGpvaW50cyBhcmUgbWF0Y2hlZC5cbiAgICAgKiBAcGFyYW0ge2NsYXkuR2VvbWV0cnl9IGdlb21ldHJ5XG4gICAgICovXG4gICAgdXBkYXRlSm9pbnRzQm91bmRpbmdCb3hlczogZnVuY3Rpb24gKGdlb21ldHJ5KSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVzID0gZ2VvbWV0cnkuYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHBvc2l0aW9uQXR0ciA9IGF0dHJpYnV0ZXMucG9zaXRpb247XG4gICAgICAgIHZhciBqb2ludEF0dHIgPSBhdHRyaWJ1dGVzLmpvaW50O1xuICAgICAgICB2YXIgd2VpZ2h0QXR0ciA9IGF0dHJpYnV0ZXMud2VpZ2h0O1xuXG4gICAgICAgIHZhciBqb2ludHNCb3VuZGluZ0JveGVzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGpvaW50c0JvdW5kaW5nQm94ZXNbaV0gPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgIGpvaW50c0JvdW5kaW5nQm94ZXNbaV0uX191cGRhdGVkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdnR4Sm9pbnQgPSBbXTtcbiAgICAgICAgdmFyIHZ0eFBvcyA9IFtdO1xuICAgICAgICB2YXIgdnR4V2VpZ2h0ID0gW107XG4gICAgICAgIHZhciBtYXhKb2ludElkeCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VvbWV0cnkudmVydGV4Q291bnQ7IGkrKykge1xuICAgICAgICAgICAgam9pbnRBdHRyLmdldChpLCB2dHhKb2ludCk7XG4gICAgICAgICAgICBwb3NpdGlvbkF0dHIuZ2V0KGksIHZ0eFBvcyk7XG4gICAgICAgICAgICB3ZWlnaHRBdHRyLmdldChpLCB2dHhXZWlnaHQpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDQ7IGsrKykge1xuICAgICAgICAgICAgICAgIGlmICh2dHhXZWlnaHRba10gPiAwLjAxKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqb2ludElkeCA9IHZ0eEpvaW50W2tdO1xuICAgICAgICAgICAgICAgICAgICBtYXhKb2ludElkeCA9IE1hdGgubWF4KG1heEpvaW50SWR4LCBqb2ludElkeCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIG1pbiA9IGpvaW50c0JvdW5kaW5nQm94ZXNbam9pbnRJZHhdLm1pbi5hcnJheTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1heCA9IGpvaW50c0JvdW5kaW5nQm94ZXNbam9pbnRJZHhdLm1heC5hcnJheTtcblxuICAgICAgICAgICAgICAgICAgICBqb2ludHNCb3VuZGluZ0JveGVzW2pvaW50SWR4XS5fX3VwZGF0ZWQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IHZlYzMubWluKG1pbiwgbWluLCB2dHhQb3MpO1xuICAgICAgICAgICAgICAgICAgICBtYXggPSB2ZWMzLm1heChtYXgsIG1heCwgdnR4UG9zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9qb2ludHNCb3VuZGluZ0JveGVzID0gam9pbnRzQm91bmRpbmdCb3hlcztcblxuICAgICAgICB0aGlzLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KCk7XG5cbiAgICAgICAgaWYgKG1heEpvaW50SWR4IDwgdGhpcy5qb2ludHMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdHZW9tZXRyeSBqb2ludHMgYW5kIHNrZWxldG9uIGpvaW50cyBkb25cXCd0IG1hdGNoJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgc2V0Sm9pbnRNYXRyaWNlc0FycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIHRoaXMuX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheSA9IGFycjtcbiAgICAgICAgdGhpcy5fc2tpbk1hdHJpY2VzQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KGFyci5sZW5ndGgpO1xuICAgICAgICB0aGlzLnVwZGF0ZU1hdHJpY2VzU3ViQXJyYXlzKCk7XG4gICAgfSxcblxuICAgIHVwZGF0ZU1hdHJpY2VzU3ViQXJyYXlzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX2pvaW50TWF0cmljZXNTdWJBcnJheXNbaV0gPSB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXkuc3ViYXJyYXkoaSAqIDE2LCAoaSsxKSAqIDE2KTtcbiAgICAgICAgICAgIHRoaXMuX3NraW5NYXRyaWNlc1N1YkFycmF5c1tpXSA9IHRoaXMuX3NraW5NYXRyaWNlc0FycmF5LnN1YmFycmF5KGkgKiAxNiwgKGkrMSkgKiAxNik7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHNraW5uaW5nIG1hdHJpY2VzXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgdGhpcy5fc2V0UG9zZSgpO1xuXG4gICAgICAgIHZhciBqb2ludHNCb3VuZGluZ0JveGVzID0gdGhpcy5fam9pbnRzQm91bmRpbmdCb3hlcztcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tpXTtcbiAgICAgICAgICAgIG1hdDQubXVsdGlwbHkoXG4gICAgICAgICAgICAgICAgdGhpcy5fc2tpbk1hdHJpY2VzU3ViQXJyYXlzW2ldLFxuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUud29ybGRUcmFuc2Zvcm0uYXJyYXksXG4gICAgICAgICAgICAgICAgdGhpcy5fam9pbnRNYXRyaWNlc1N1YkFycmF5c1tpXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5taW4uc2V0KEluZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHkpO1xuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveC5tYXguc2V0KC1JbmZpbml0eSwgLUluZmluaXR5LCAtSW5maW5pdHkpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBqb2ludCA9IHRoaXMuam9pbnRzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBiYm94ID0gam9pbnRzQm91bmRpbmdCb3hlc1tpXTtcbiAgICAgICAgICAgICAgICBpZiAoYmJveC5fX3VwZGF0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdG1wQm91bmRpbmdCb3guY29weShiYm94KTtcbiAgICAgICAgICAgICAgICAgICAgdG1wTWF0NC5hcnJheSA9IHRoaXMuX3NraW5NYXRyaWNlc1N1YkFycmF5c1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdG1wQm91bmRpbmdCb3guYXBwbHlUcmFuc2Zvcm0odG1wTWF0NCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveC51bmlvbih0bXBCb3VuZGluZ0JveCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGdldFN1YlNraW5NYXRyaWNlczogZnVuY3Rpb24gKG1lc2hJZCwgam9pbnRzKSB7XG4gICAgICAgIHZhciBzdWJBcnJheSA9IHRoaXMuX3N1YlNraW5NYXRyaWNlc0FycmF5W21lc2hJZF07XG4gICAgICAgIGlmICghc3ViQXJyYXkpIHtcbiAgICAgICAgICAgIHN1YkFycmF5XG4gICAgICAgICAgICAgICAgPSB0aGlzLl9zdWJTa2luTWF0cmljZXNBcnJheVttZXNoSWRdXG4gICAgICAgICAgICAgICAgPSBuZXcgRmxvYXQzMkFycmF5KGpvaW50cy5sZW5ndGggKiAxNik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnNvciA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gam9pbnRzW2ldO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAxNjsgaisrKSB7XG4gICAgICAgICAgICAgICAgc3ViQXJyYXlbY3Vyc29yKytdID0gdGhpcy5fc2tpbk1hdHJpY2VzQXJyYXlbaWR4ICogMTYgKyBqXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc3ViQXJyYXk7XG4gICAgfSxcblxuICAgIGdldFN1YlNraW5NYXRyaWNlc1RleHR1cmU6IGZ1bmN0aW9uIChtZXNoSWQsIGpvaW50cykge1xuICAgICAgICB2YXIgc2tpbk1hdHJpY2VzID0gdGhpcy5nZXRTdWJTa2luTWF0cmljZXMobWVzaElkLCBqb2ludHMpO1xuICAgICAgICB2YXIgc2l6ZTtcbiAgICAgICAgdmFyIG51bUpvaW50cyA9IHRoaXMuam9pbnRzLmxlbmd0aDtcbiAgICAgICAgaWYgKG51bUpvaW50cyA+IDI1Nikge1xuICAgICAgICAgICAgc2l6ZSA9IDY0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKG51bUpvaW50cyA+IDY0KSB7XG4gICAgICAgICAgICBzaXplID0gMzI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAobnVtSm9pbnRzID4gMTYpIHtcbiAgICAgICAgICAgIHNpemUgPSAxNjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNpemUgPSA4O1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl9za2luTWF0cmljZXNUZXh0dXJlID0gdGhpcy5fc2tpbk1hdHJpY2VzVGV4dHVyZSB8fCBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuRkxPQVQsXG4gICAgICAgICAgICBtaW5GaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICAgICAgdXNlTWlwbWFwOiBmYWxzZSxcbiAgICAgICAgICAgIGZsaXBZOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dHVyZS53aWR0aCA9IHNpemU7XG4gICAgICAgIHRleHR1cmUuaGVpZ2h0ID0gc2l6ZTtcblxuICAgICAgICBpZiAoIXRleHR1cmUucGl4ZWxzIHx8IHRleHR1cmUucGl4ZWxzLmxlbmd0aCAhPT0gc2l6ZSAqIHNpemUgKiA0KSB7XG4gICAgICAgICAgICB0ZXh0dXJlLnBpeGVscyA9IG5ldyBGbG9hdDMyQXJyYXkoc2l6ZSAqIHNpemUgKiA0KTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0dXJlLnBpeGVscy5zZXQoc2tpbk1hdHJpY2VzKTtcbiAgICAgICAgdGV4dHVyZS5kaXJ0eSgpO1xuXG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH0sXG5cbiAgICBnZXRTa2luTWF0cmljZXNUZXh0dXJlOiBmdW5jdGlvbiAoKSB7XG5cblxuICAgICAgICByZXR1cm4gdGhpcy5fc2tpbk1hdHJpY2VzVGV4dHVyZTtcbiAgICB9LFxuXG4gICAgX3NldFBvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2NsaXBzWzBdKSB7XG4gICAgICAgICAgICB2YXIgY2xpcCA9IHRoaXMuX2NsaXBzWzBdLmNsaXA7XG4gICAgICAgICAgICB2YXIgbWFwcyA9IHRoaXMuX2NsaXBzWzBdLm1hcHM7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5qb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tpXTtcbiAgICAgICAgICAgICAgICBpZiAobWFwc1tpXSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwb3NlID0gY2xpcC50cmFja3NbbWFwc1tpXV07XG5cbiAgICAgICAgICAgICAgICAvLyBOb3QgdXBkYXRlIGlmIHRoZXJlIGlzIG5vIGRhdGEuXG4gICAgICAgICAgICAgICAgLy8gUEVORElORyBJZiBzeW5jIHBvc2UucG9zaXRpb24sIHBvc2Uucm90YXRpb24sIHBvc2Uuc2NhbGVcbiAgICAgICAgICAgICAgICBpZiAocG9zZS5jaGFubmVscy5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLmNvcHkoam9pbnQubm9kZS5wb3NpdGlvbi5hcnJheSwgcG9zZS5wb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3NlLmNoYW5uZWxzLnJvdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1YXQuY29weShqb2ludC5ub2RlLnJvdGF0aW9uLmFycmF5LCBwb3NlLnJvdGF0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBvc2UuY2hhbm5lbHMuc2NhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmVjMy5jb3B5KGpvaW50Lm5vZGUuc2NhbGUuYXJyYXksIHBvc2Uuc2NhbGUpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGpvaW50Lm5vZGUucG9zaXRpb24uX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBqb2ludC5ub2RlLnJvdGF0aW9uLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgICAgICAgICAgam9pbnQubm9kZS5zY2FsZS5fZGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGNsb25lOiBmdW5jdGlvbiAoY2xvbmVkTm9kZXNNYXApIHtcbiAgICAgICAgdmFyIHNrZWxldG9uID0gbmV3IFNrZWxldG9uKCk7XG4gICAgICAgIHNrZWxldG9uLm5hbWUgPSB0aGlzLm5hbWU7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG5ld0pvaW50ID0gbmV3IEpvaW50KCk7XG4gICAgICAgICAgICB2YXIgam9pbnQgPSB0aGlzLmpvaW50c1tpXTtcbiAgICAgICAgICAgIG5ld0pvaW50Lm5hbWUgPSBqb2ludC5uYW1lO1xuICAgICAgICAgICAgbmV3Sm9pbnQuaW5kZXggPSBqb2ludC5pbmRleDtcblxuICAgICAgICAgICAgaWYgKGNsb25lZE5vZGVzTWFwKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5ld05vZGUgPSBjbG9uZWROb2Rlc01hcFtqb2ludC5ub2RlLl9fdWlkX19dO1xuXG4gICAgICAgICAgICAgICAgaWYgKCFuZXdOb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdDYW5cXCd0IGZpbmQgbm9kZScpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG5ld0pvaW50Lm5vZGUgPSBuZXdOb2RlIHx8IGpvaW50Lm5vZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXdKb2ludC5ub2RlID0gam9pbnQubm9kZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgc2tlbGV0b24uam9pbnRzLnB1c2gobmV3Sm9pbnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheSkge1xuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMuX2ludkJpbmRQb3NlTWF0cmljZXNBcnJheS5sZW5ndGg7XG4gICAgICAgICAgICBza2VsZXRvbi5faW52QmluZFBvc2VNYXRyaWNlc0FycmF5ID0gbmV3IEZsb2F0MzJBcnJheShsZW4pO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHNrZWxldG9uLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXlbaV0gPSB0aGlzLl9pbnZCaW5kUG9zZU1hdHJpY2VzQXJyYXlbaV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNrZWxldG9uLl9za2luTWF0cmljZXNBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkobGVuKTtcblxuICAgICAgICAgICAgc2tlbGV0b24udXBkYXRlTWF0cmljZXNTdWJBcnJheXMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNrZWxldG9uLl9qb2ludHNCb3VuZGluZ0JveGUgPSAodGhpcy5fam9pbnRzQm91bmRpbmdCb3hlcyB8fCBbXSkubWFwKGZ1bmN0aW9uIChiYm94KSB7XG4gICAgICAgICAgICByZXR1cm4gYmJveC5jbG9uZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICBza2VsZXRvbi51cGRhdGUoKTtcblxuICAgICAgICByZXR1cm4gc2tlbGV0b247XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNrZWxldG9uO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL1NrZWxldG9uLmpzXG4vLyBtb2R1bGUgaWQgPSA4NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///84\n");

/***/ }),
/* 85 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__source_header_light__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__source_util_glsl_js__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__source_basic_glsl_js__ = __webpack_require__(134);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__source_lambert_glsl_js__ = __webpack_require__(135);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__source_standard_glsl_js__ = __webpack_require__(83);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__source_wireframe_glsl_js__ = __webpack_require__(136);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__source_skybox_glsl_js__ = __webpack_require__(87);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__library__ = __webpack_require__(57);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Shader__ = __webpack_require__(6);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_0__source_header_light__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_1__source_util_glsl_js__[\"a\" /* default */]);\n\n// Some build in shaders\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_2__source_basic_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_3__source_lambert_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_4__source_standard_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_5__source_wireframe_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_6__source_skybox_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_7__source_prez_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.basic', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.basic.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.basic.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.lambert', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.lambert.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.lambert.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.wireframe', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.wireframe.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.wireframe.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.skybox', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.skybox.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.skybox.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.prez', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.prez.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.standard', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standard.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standard.fragment'));\n__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */].template('clay.standardMR', __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_9__Shader__[\"a\" /* default */].source('clay.standardMR.fragment'));\n\n// TODO Must export a module and be used in the other modules. Or it will be tree shaked\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_8__library__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9idWlsdGluLmpzP2EwMzciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGxpZ2h0RXNzbCBmcm9tICcuL3NvdXJjZS9oZWFkZXIvbGlnaHQnO1xuaW1wb3J0IHV0aWxFc3NsIGZyb20gJy4vc291cmNlL3V0aWwuZ2xzbC5qcyc7XG5cbmltcG9ydCBiYXNpY0Vzc2wgZnJvbSAnLi9zb3VyY2UvYmFzaWMuZ2xzbC5qcyc7XG5pbXBvcnQgbGFtYmVydEVzc2wgZnJvbSAnLi9zb3VyY2UvbGFtYmVydC5nbHNsLmpzJztcbmltcG9ydCBzdGFuZGFyZEVzc2wgZnJvbSAnLi9zb3VyY2Uvc3RhbmRhcmQuZ2xzbC5qcyc7XG5pbXBvcnQgd2lyZWZyYW1lRXNzbCBmcm9tICcuL3NvdXJjZS93aXJlZnJhbWUuZ2xzbC5qcyc7XG5pbXBvcnQgc2t5Ym94RXNzbCBmcm9tICcuL3NvdXJjZS9za3lib3guZ2xzbC5qcyc7XG5pbXBvcnQgcHJlekVzc2wgZnJvbSAnLi9zb3VyY2UvcHJlei5nbHNsLmpzJztcblxuaW1wb3J0IGxpYnJhcnkgZnJvbSAnLi9saWJyYXJ5JztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcblxuXG5TaGFkZXJbJ2ltcG9ydCddKGxpZ2h0RXNzbCk7XG5TaGFkZXJbJ2ltcG9ydCddKHV0aWxFc3NsKTtcblxuLy8gU29tZSBidWlsZCBpbiBzaGFkZXJzXG5TaGFkZXJbJ2ltcG9ydCddKGJhc2ljRXNzbCk7XG5TaGFkZXJbJ2ltcG9ydCddKGxhbWJlcnRFc3NsKTtcblNoYWRlclsnaW1wb3J0J10oc3RhbmRhcmRFc3NsKTtcblNoYWRlclsnaW1wb3J0J10od2lyZWZyYW1lRXNzbCk7XG5TaGFkZXJbJ2ltcG9ydCddKHNreWJveEVzc2wpO1xuU2hhZGVyWydpbXBvcnQnXShwcmV6RXNzbCk7XG5cbmxpYnJhcnkudGVtcGxhdGUoJ2NsYXkuYmFzaWMnLCBTaGFkZXIuc291cmNlKCdjbGF5LmJhc2ljLnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LmJhc2ljLmZyYWdtZW50JykpO1xubGlicmFyeS50ZW1wbGF0ZSgnY2xheS5sYW1iZXJ0JywgU2hhZGVyLnNvdXJjZSgnY2xheS5sYW1iZXJ0LnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LmxhbWJlcnQuZnJhZ21lbnQnKSk7XG5saWJyYXJ5LnRlbXBsYXRlKCdjbGF5LndpcmVmcmFtZScsIFNoYWRlci5zb3VyY2UoJ2NsYXkud2lyZWZyYW1lLnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LndpcmVmcmFtZS5mcmFnbWVudCcpKTtcbmxpYnJhcnkudGVtcGxhdGUoJ2NsYXkuc2t5Ym94JywgU2hhZGVyLnNvdXJjZSgnY2xheS5za3lib3gudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkuc2t5Ym94LmZyYWdtZW50JykpO1xubGlicmFyeS50ZW1wbGF0ZSgnY2xheS5wcmV6JywgU2hhZGVyLnNvdXJjZSgnY2xheS5wcmV6LnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnByZXouZnJhZ21lbnQnKSk7XG5saWJyYXJ5LnRlbXBsYXRlKCdjbGF5LnN0YW5kYXJkJywgU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZC52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZC5mcmFnbWVudCcpKTtcbmxpYnJhcnkudGVtcGxhdGUoJ2NsYXkuc3RhbmRhcmRNUicsIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmRNUi52ZXJ0ZXgnKSwgU2hhZGVyLnNvdXJjZSgnY2xheS5zdGFuZGFyZE1SLmZyYWdtZW50JykpO1xuXG4vLyBUT0RPIE11c3QgZXhwb3J0IGEgbW9kdWxlIGFuZCBiZSB1c2VkIGluIHRoZSBvdGhlciBtb2R1bGVzLiBPciBpdCB3aWxsIGJlIHRyZWUgc2hha2VkXG5leHBvcnQgZGVmYXVsdCBsaWJyYXJ5O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvYnVpbHRpbi5qc1xuLy8gbW9kdWxlIGlkID0gODVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///85\n");

/***/ }),
/* 86 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.util.rand\\nhighp float rand(vec2 uv) {\\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\\n return fract(sin(sn) * c);\\n}\\n@end\\n@export clay.util.calculate_attenuation\\nuniform float attenuationFactor : 5.0;\\nfloat lightAttenuation(float dist, float range)\\n{\\n float attenuation = 1.0;\\n attenuation = dist*dist/(range*range+1.0);\\n float att_s = attenuationFactor;\\n attenuation = 1.0/(attenuation*att_s+1.0);\\n att_s = 1.0/(att_s+1.0);\\n attenuation = attenuation - att_s;\\n attenuation /= 1.0 - att_s;\\n return clamp(attenuation, 0.0, 1.0);\\n}\\n@end\\n@export clay.util.edge_factor\\n#ifdef SUPPORT_STANDARD_DERIVATIVES\\nfloat edgeFactor(float width)\\n{\\n vec3 d = fwidth(v_Barycentric);\\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\\n return min(min(a3.x, a3.y), a3.z);\\n}\\n#else\\nfloat edgeFactor(float width)\\n{\\n return 1.0;\\n}\\n#endif\\n@end\\n@export clay.util.encode_float\\nvec4 encodeFloat(const in float depth)\\n{\\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\\n vec4 res = fract(depth * bitShifts);\\n res -= res.xxyz * bit_mask;\\n return res;\\n}\\n@end\\n@export clay.util.decode_float\\nfloat decodeFloat(const in vec4 color)\\n{\\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\\n return dot(color, bitShifts);\\n}\\n@end\\n@export clay.util.float\\n@import clay.util.encode_float\\n@import clay.util.decode_float\\n@end\\n@export clay.util.rgbm_decode\\nvec3 RGBMDecode(vec4 rgbm, float range) {\\n return range * rgbm.rgb * rgbm.a;\\n}\\n@end\\n@export clay.util.rgbm_encode\\nvec4 RGBMEncode(vec3 color, float range) {\\n if (dot(color, color) == 0.0) {\\n return vec4(0.0);\\n }\\n vec4 rgbm;\\n color /= range;\\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\\n rgbm.rgb = color / rgbm.a;\\n return rgbm;\\n}\\n@end\\n@export clay.util.rgbm\\n@import clay.util.rgbm_decode\\n@import clay.util.rgbm_encode\\nvec4 decodeHDR(vec4 color)\\n{\\n#if defined(RGBM_DECODE) || defined(RGBM)\\n return vec4(RGBMDecode(color, 8.12), 1.0);\\n#else\\n return color;\\n#endif\\n}\\nvec4 encodeHDR(vec4 color)\\n{\\n#if defined(RGBM_ENCODE) || defined(RGBM)\\n return RGBMEncode(color.xyz, 8.12);\\n#else\\n return color;\\n#endif\\n}\\n@end\\n@export clay.util.srgb\\nvec4 sRGBToLinear(in vec4 value) {\\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\\n}\\nvec4 linearTosRGB(in vec4 value) {\\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\\n}\\n@end\\n@export clay.chunk.skinning_header\\n#ifdef SKINNING\\nattribute vec3 weight : WEIGHT;\\nattribute vec4 joint : JOINT;\\n#ifdef USE_SKIN_MATRICES_TEXTURE\\nuniform sampler2D skinMatricesTexture : ignore;\\nuniform float skinMatricesTextureSize: ignore;\\nmat4 getSkinMatrix(sampler2D tex, float idx) {\\n float j = idx * 4.0;\\n float x = mod(j, skinMatricesTextureSize);\\n float y = floor(j / skinMatricesTextureSize) + 0.5;\\n vec2 scale = vec2(skinMatricesTextureSize);\\n return mat4(\\n texture2D(tex, vec2(x + 0.5, y) / scale),\\n texture2D(tex, vec2(x + 1.5, y) / scale),\\n texture2D(tex, vec2(x + 2.5, y) / scale),\\n texture2D(tex, vec2(x + 3.5, y) / scale)\\n );\\n}\\nmat4 getSkinMatrix(float idx) {\\n return getSkinMatrix(skinMatricesTexture, idx);\\n}\\n#else\\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\\nmat4 getSkinMatrix(float idx) {\\n return skinMatrix[int(idx)];\\n}\\n#endif\\n#endif\\n@end\\n@export clay.chunk.skin_matrix\\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\\nif (weight.y > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\\n}\\nif (weight.z > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\\n}\\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\\nif (weightW > 1e-4)\\n{\\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\\n}\\n@end\\n@export clay.chunk.instancing_header\\n#ifdef INSTANCING\\nattribute vec4 instanceMat1;\\nattribute vec4 instanceMat2;\\nattribute vec4 instanceMat3;\\n#endif\\n@end\\n@export clay.chunk.instancing_matrix\\nmat4 instanceMat = mat4(\\n vec4(instanceMat1.xyz, 0.0),\\n vec4(instanceMat2.xyz, 0.0),\\n vec4(instanceMat3.xyz, 0.0),\\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\\n);\\n@end\\n@export clay.util.parallax_correct\\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\\n vec3 first = (boxMax - pos) / dir;\\n vec3 second = (boxMin - pos) / dir;\\n vec3 further = max(first, second);\\n float dist = min(further.x, min(further.y, further.z));\\n vec3 fixedPos = pos + dir * dist;\\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\\n return normalize(fixedPos - boxCenter);\\n}\\n@end\\n@export clay.util.clamp_sample\\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\\n{\\n#ifdef STEREO\\n float eye = step(0.5, coord.x) * 0.5;\\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\\n#else\\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\\n#endif\\n return texture2D(texture, coordClamped);\\n}\\n@end\\n@export clay.util.ACES\\nvec3 ACESToneMapping(vec3 color)\\n{\\n const float A = 2.51;\\n const float B = 0.03;\\n const float C = 2.43;\\n const float D = 0.59;\\n const float E = 0.14;\\n return (color * (A * color + B)) / (color * (C * color + D) + E);\\n}\\n@end\\n@export clay.util.logdepth_vertex_header\\n#ifdef LOG_DEPTH\\n#ifdef SUPPORT_FRAG_DEPTH\\nvarying float v_FragDepth;\\n#else\\nuniform float logDepthBufFC: LOG_DEPTH_BUFFER_FC;\\n#endif\\n#endif\\n@end\\n@export clay.util.logdepth_vertex_main\\n#ifdef LOG_DEPTH\\n #ifdef SUPPORT_FRAG_DEPTH\\n v_FragDepth = 1.0 + gl_Position.w;\\n #else\\n gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC - 1.0;\\n gl_Position.z *= gl_Position.w;\\n #endif\\n#endif\\n@end\\n@export clay.util.logdepth_fragment_header\\n#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)\\nvarying float v_FragDepth;\\nuniform float logDepthBufFC : LOG_DEPTH_BUFFER_FC;\\n#endif\\n@end\\n@export clay.util.logdepth_fragment_main\\n#if defined(LOG_DEPTH) && defined(SUPPORT_FRAG_DEPTH)\\n gl_FragDepthEXT = log2(v_FragDepth) * logDepthBufFC * 0.5;\\n#endif\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvdXRpbC5nbHNsLmpzP2YwZjkiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJcXG5AZXhwb3J0IGNsYXkudXRpbC5yYW5kXFxuaGlnaHAgZmxvYXQgcmFuZCh2ZWMyIHV2KSB7XFxuIGNvbnN0IGhpZ2hwIGZsb2F0IGEgPSAxMi45ODk4LCBiID0gNzguMjMzLCBjID0gNDM3NTguNTQ1MztcXG4gaGlnaHAgZmxvYXQgZHQgPSBkb3QodXYueHksIHZlYzIoYSxiKSksIHNuID0gbW9kKGR0LCAzLjE0MTU5MjY1MzU4OTc5Myk7XFxuIHJldHVybiBmcmFjdChzaW4oc24pICogYyk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5jYWxjdWxhdGVfYXR0ZW51YXRpb25cXG51bmlmb3JtIGZsb2F0IGF0dGVudWF0aW9uRmFjdG9yIDogNS4wO1xcbmZsb2F0IGxpZ2h0QXR0ZW51YXRpb24oZmxvYXQgZGlzdCwgZmxvYXQgcmFuZ2UpXFxue1xcbiBmbG9hdCBhdHRlbnVhdGlvbiA9IDEuMDtcXG4gYXR0ZW51YXRpb24gPSBkaXN0KmRpc3QvKHJhbmdlKnJhbmdlKzEuMCk7XFxuIGZsb2F0IGF0dF9zID0gYXR0ZW51YXRpb25GYWN0b3I7XFxuIGF0dGVudWF0aW9uID0gMS4wLyhhdHRlbnVhdGlvbiphdHRfcysxLjApO1xcbiBhdHRfcyA9IDEuMC8oYXR0X3MrMS4wKTtcXG4gYXR0ZW51YXRpb24gPSBhdHRlbnVhdGlvbiAtIGF0dF9zO1xcbiBhdHRlbnVhdGlvbiAvPSAxLjAgLSBhdHRfcztcXG4gcmV0dXJuIGNsYW1wKGF0dGVudWF0aW9uLCAwLjAsIDEuMCk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5lZGdlX2ZhY3RvclxcbiNpZmRlZiBTVVBQT1JUX1NUQU5EQVJEX0RFUklWQVRJVkVTXFxuZmxvYXQgZWRnZUZhY3RvcihmbG9hdCB3aWR0aClcXG57XFxuIHZlYzMgZCA9IGZ3aWR0aCh2X0JhcnljZW50cmljKTtcXG4gdmVjMyBhMyA9IHNtb290aHN0ZXAodmVjMygwLjApLCBkICogd2lkdGgsIHZfQmFyeWNlbnRyaWMpO1xcbiByZXR1cm4gbWluKG1pbihhMy54LCBhMy55KSwgYTMueik7XFxufVxcbiNlbHNlXFxuZmxvYXQgZWRnZUZhY3RvcihmbG9hdCB3aWR0aClcXG57XFxuIHJldHVybiAxLjA7XFxufVxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5lbmNvZGVfZmxvYXRcXG52ZWM0IGVuY29kZUZsb2F0KGNvbnN0IGluIGZsb2F0IGRlcHRoKVxcbntcXG4gY29uc3QgdmVjNCBiaXRTaGlmdHMgPSB2ZWM0KDI1Ni4wKjI1Ni4wKjI1Ni4wLCAyNTYuMCoyNTYuMCwgMjU2LjAsIDEuMCk7XFxuIGNvbnN0IHZlYzQgYml0X21hc2sgPSB2ZWM0KDAuMCwgMS4wLzI1Ni4wLCAxLjAvMjU2LjAsIDEuMC8yNTYuMCk7XFxuIHZlYzQgcmVzID0gZnJhY3QoZGVwdGggKiBiaXRTaGlmdHMpO1xcbiByZXMgLT0gcmVzLnh4eXogKiBiaXRfbWFzaztcXG4gcmV0dXJuIHJlcztcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLmRlY29kZV9mbG9hdFxcbmZsb2F0IGRlY29kZUZsb2F0KGNvbnN0IGluIHZlYzQgY29sb3IpXFxue1xcbiBjb25zdCB2ZWM0IGJpdFNoaWZ0cyA9IHZlYzQoMS4wLygyNTYuMCoyNTYuMCoyNTYuMCksIDEuMC8oMjU2LjAqMjU2LjApLCAxLjAvMjU2LjAsIDEuMCk7XFxuIHJldHVybiBkb3QoY29sb3IsIGJpdFNoaWZ0cyk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5mbG9hdFxcbkBpbXBvcnQgY2xheS51dGlsLmVuY29kZV9mbG9hdFxcbkBpbXBvcnQgY2xheS51dGlsLmRlY29kZV9mbG9hdFxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5yZ2JtX2RlY29kZVxcbnZlYzMgUkdCTURlY29kZSh2ZWM0IHJnYm0sIGZsb2F0IHJhbmdlKSB7XFxuIHJldHVybiByYW5nZSAqIHJnYm0ucmdiICogcmdibS5hO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwucmdibV9lbmNvZGVcXG52ZWM0IFJHQk1FbmNvZGUodmVjMyBjb2xvciwgZmxvYXQgcmFuZ2UpIHtcXG4gaWYgKGRvdChjb2xvciwgY29sb3IpID09IDAuMCkge1xcbiByZXR1cm4gdmVjNCgwLjApO1xcbiB9XFxuIHZlYzQgcmdibTtcXG4gY29sb3IgLz0gcmFuZ2U7XFxuIHJnYm0uYSA9IGNsYW1wKG1heChtYXgoY29sb3IuciwgY29sb3IuZyksIG1heChjb2xvci5iLCAxZS02KSksIDAuMCwgMS4wKTtcXG4gcmdibS5hID0gY2VpbChyZ2JtLmEgKiAyNTUuMCkgLyAyNTUuMDtcXG4gcmdibS5yZ2IgPSBjb2xvciAvIHJnYm0uYTtcXG4gcmV0dXJuIHJnYm07XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnV0aWwucmdibV9kZWNvZGVcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtX2VuY29kZVxcbnZlYzQgZGVjb2RlSERSKHZlYzQgY29sb3IpXFxue1xcbiNpZiBkZWZpbmVkKFJHQk1fREVDT0RFKSB8fCBkZWZpbmVkKFJHQk0pXFxuIHJldHVybiB2ZWM0KFJHQk1EZWNvZGUoY29sb3IsIDguMTIpLCAxLjApO1xcbiNlbHNlXFxuIHJldHVybiBjb2xvcjtcXG4jZW5kaWZcXG59XFxudmVjNCBlbmNvZGVIRFIodmVjNCBjb2xvcilcXG57XFxuI2lmIGRlZmluZWQoUkdCTV9FTkNPREUpIHx8IGRlZmluZWQoUkdCTSlcXG4gcmV0dXJuIFJHQk1FbmNvZGUoY29sb3IueHl6LCA4LjEyKTtcXG4jZWxzZVxcbiByZXR1cm4gY29sb3I7XFxuI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5zcmdiXFxudmVjNCBzUkdCVG9MaW5lYXIoaW4gdmVjNCB2YWx1ZSkge1xcbiByZXR1cm4gdmVjNChtaXgocG93KHZhbHVlLnJnYiAqIDAuOTQ3ODY3Mjk4NiArIHZlYzMoMC4wNTIxMzI3MDE0KSwgdmVjMygyLjQpKSwgdmFsdWUucmdiICogMC4wNzczOTkzODA4LCB2ZWMzKGxlc3NUaGFuRXF1YWwodmFsdWUucmdiLCB2ZWMzKDAuMDQwNDUpKSkpLCB2YWx1ZS53KTtcXG59XFxudmVjNCBsaW5lYXJUb3NSR0IoaW4gdmVjNCB2YWx1ZSkge1xcbiByZXR1cm4gdmVjNChtaXgocG93KHZhbHVlLnJnYiwgdmVjMygwLjQxNjY2KSkgKiAxLjA1NSAtIHZlYzMoMC4wNTUpLCB2YWx1ZS5yZ2IgKiAxMi45MiwgdmVjMyhsZXNzVGhhbkVxdWFsKHZhbHVlLnJnYiwgdmVjMygwLjAwMzEzMDgpKSkpLCB2YWx1ZS53KTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG4jaWZkZWYgU0tJTk5JTkdcXG5hdHRyaWJ1dGUgdmVjMyB3ZWlnaHQgOiBXRUlHSFQ7XFxuYXR0cmlidXRlIHZlYzQgam9pbnQgOiBKT0lOVDtcXG4jaWZkZWYgVVNFX1NLSU5fTUFUUklDRVNfVEVYVFVSRVxcbnVuaWZvcm0gc2FtcGxlcjJEIHNraW5NYXRyaWNlc1RleHR1cmUgOiBpZ25vcmU7XFxudW5pZm9ybSBmbG9hdCBza2luTWF0cmljZXNUZXh0dXJlU2l6ZTogaWdub3JlO1xcbm1hdDQgZ2V0U2tpbk1hdHJpeChzYW1wbGVyMkQgdGV4LCBmbG9hdCBpZHgpIHtcXG4gZmxvYXQgaiA9IGlkeCAqIDQuMDtcXG4gZmxvYXQgeCA9IG1vZChqLCBza2luTWF0cmljZXNUZXh0dXJlU2l6ZSk7XFxuIGZsb2F0IHkgPSBmbG9vcihqIC8gc2tpbk1hdHJpY2VzVGV4dHVyZVNpemUpICsgMC41O1xcbiB2ZWMyIHNjYWxlID0gdmVjMihza2luTWF0cmljZXNUZXh0dXJlU2l6ZSk7XFxuIHJldHVybiBtYXQ0KFxcbiB0ZXh0dXJlMkQodGV4LCB2ZWMyKHggKyAwLjUsIHkpIC8gc2NhbGUpLFxcbiB0ZXh0dXJlMkQodGV4LCB2ZWMyKHggKyAxLjUsIHkpIC8gc2NhbGUpLFxcbiB0ZXh0dXJlMkQodGV4LCB2ZWMyKHggKyAyLjUsIHkpIC8gc2NhbGUpLFxcbiB0ZXh0dXJlMkQodGV4LCB2ZWMyKHggKyAzLjUsIHkpIC8gc2NhbGUpXFxuICk7XFxufVxcbm1hdDQgZ2V0U2tpbk1hdHJpeChmbG9hdCBpZHgpIHtcXG4gcmV0dXJuIGdldFNraW5NYXRyaXgoc2tpbk1hdHJpY2VzVGV4dHVyZSwgaWR4KTtcXG59XFxuI2Vsc2VcXG51bmlmb3JtIG1hdDQgc2tpbk1hdHJpeFtKT0lOVF9DT1VOVF0gOiBTS0lOX01BVFJJWDtcXG5tYXQ0IGdldFNraW5NYXRyaXgoZmxvYXQgaWR4KSB7XFxuIHJldHVybiBza2luTWF0cml4W2ludChpZHgpXTtcXG59XFxuI2VuZGlmXFxuI2VuZGlmXFxuQGVuZFxcbkBleHBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbm1hdDQgc2tpbk1hdHJpeFdTID0gZ2V0U2tpbk1hdHJpeChqb2ludC54KSAqIHdlaWdodC54O1xcbmlmICh3ZWlnaHQueSA+IDFlLTQpXFxue1xcbiBza2luTWF0cml4V1MgKz0gZ2V0U2tpbk1hdHJpeChqb2ludC55KSAqIHdlaWdodC55O1xcbn1cXG5pZiAod2VpZ2h0LnogPiAxZS00KVxcbntcXG4gc2tpbk1hdHJpeFdTICs9IGdldFNraW5NYXRyaXgoam9pbnQueikgKiB3ZWlnaHQuejtcXG59XFxuZmxvYXQgd2VpZ2h0VyA9IDEuMC13ZWlnaHQueC13ZWlnaHQueS13ZWlnaHQuejtcXG5pZiAod2VpZ2h0VyA+IDFlLTQpXFxue1xcbiBza2luTWF0cml4V1MgKz0gZ2V0U2tpbk1hdHJpeChqb2ludC53KSAqIHdlaWdodFc7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbmF0dHJpYnV0ZSB2ZWM0IGluc3RhbmNlTWF0MTtcXG5hdHRyaWJ1dGUgdmVjNCBpbnN0YW5jZU1hdDI7XFxuYXR0cmlidXRlIHZlYzQgaW5zdGFuY2VNYXQzO1xcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG5tYXQ0IGluc3RhbmNlTWF0ID0gbWF0NChcXG4gdmVjNChpbnN0YW5jZU1hdDEueHl6LCAwLjApLFxcbiB2ZWM0KGluc3RhbmNlTWF0Mi54eXosIDAuMCksXFxuIHZlYzQoaW5zdGFuY2VNYXQzLnh5eiwgMC4wKSxcXG4gdmVjNChpbnN0YW5jZU1hdDEudywgaW5zdGFuY2VNYXQyLncsIGluc3RhbmNlTWF0My53LCAxLjApXFxuKTtcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwucGFyYWxsYXhfY29ycmVjdFxcbnZlYzMgcGFyYWxsYXhDb3JyZWN0KGluIHZlYzMgZGlyLCBpbiB2ZWMzIHBvcywgaW4gdmVjMyBib3hNaW4sIGluIHZlYzMgYm94TWF4KSB7XFxuIHZlYzMgZmlyc3QgPSAoYm94TWF4IC0gcG9zKSAvIGRpcjtcXG4gdmVjMyBzZWNvbmQgPSAoYm94TWluIC0gcG9zKSAvIGRpcjtcXG4gdmVjMyBmdXJ0aGVyID0gbWF4KGZpcnN0LCBzZWNvbmQpO1xcbiBmbG9hdCBkaXN0ID0gbWluKGZ1cnRoZXIueCwgbWluKGZ1cnRoZXIueSwgZnVydGhlci56KSk7XFxuIHZlYzMgZml4ZWRQb3MgPSBwb3MgKyBkaXIgKiBkaXN0O1xcbiB2ZWMzIGJveENlbnRlciA9IChib3hNYXggKyBib3hNaW4pICogMC41O1xcbiByZXR1cm4gbm9ybWFsaXplKGZpeGVkUG9zIC0gYm94Q2VudGVyKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS51dGlsLmNsYW1wX3NhbXBsZVxcbnZlYzQgY2xhbXBTYW1wbGUoY29uc3QgaW4gc2FtcGxlcjJEIHRleHR1cmUsIGNvbnN0IGluIHZlYzIgY29vcmQpXFxue1xcbiNpZmRlZiBTVEVSRU9cXG4gZmxvYXQgZXllID0gc3RlcCgwLjUsIGNvb3JkLngpICogMC41O1xcbiB2ZWMyIGNvb3JkQ2xhbXBlZCA9IGNsYW1wKGNvb3JkLCB2ZWMyKGV5ZSwgMC4wKSwgdmVjMigwLjUgKyBleWUsIDEuMCkpO1xcbiNlbHNlXFxuIHZlYzIgY29vcmRDbGFtcGVkID0gY2xhbXAoY29vcmQsIHZlYzIoMC4wKSwgdmVjMigxLjApKTtcXG4jZW5kaWZcXG4gcmV0dXJuIHRleHR1cmUyRCh0ZXh0dXJlLCBjb29yZENsYW1wZWQpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwuQUNFU1xcbnZlYzMgQUNFU1RvbmVNYXBwaW5nKHZlYzMgY29sb3IpXFxue1xcbiBjb25zdCBmbG9hdCBBID0gMi41MTtcXG4gY29uc3QgZmxvYXQgQiA9IDAuMDM7XFxuIGNvbnN0IGZsb2F0IEMgPSAyLjQzO1xcbiBjb25zdCBmbG9hdCBEID0gMC41OTtcXG4gY29uc3QgZmxvYXQgRSA9IDAuMTQ7XFxuIHJldHVybiAoY29sb3IgKiAoQSAqIGNvbG9yICsgQikpIC8gKGNvbG9yICogKEMgKiBjb2xvciArIEQpICsgRSk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfaGVhZGVyXFxuI2lmZGVmIExPR19ERVBUSFxcbiNpZmRlZiBTVVBQT1JUX0ZSQUdfREVQVEhcXG52YXJ5aW5nIGZsb2F0IHZfRnJhZ0RlcHRoO1xcbiNlbHNlXFxudW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDOiBMT0dfREVQVEhfQlVGRkVSX0ZDO1xcbiNlbmRpZlxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfbWFpblxcbiNpZmRlZiBMT0dfREVQVEhcXG4gI2lmZGVmIFNVUFBPUlRfRlJBR19ERVBUSFxcbiB2X0ZyYWdEZXB0aCA9IDEuMCArIGdsX1Bvc2l0aW9uLnc7XFxuICNlbHNlXFxuIGdsX1Bvc2l0aW9uLnogPSBsb2cyKG1heCgxZS02LCBnbF9Qb3NpdGlvbi53ICsgMS4wKSkgKiBsb2dEZXB0aEJ1ZkZDIC0gMS4wO1xcbiBnbF9Qb3NpdGlvbi56ICo9IGdsX1Bvc2l0aW9uLnc7XFxuICNlbmRpZlxcbiNlbmRpZlxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudXRpbC5sb2dkZXB0aF9mcmFnbWVudF9oZWFkZXJcXG4jaWYgZGVmaW5lZChMT0dfREVQVEgpICYmIGRlZmluZWQoU1VQUE9SVF9GUkFHX0RFUFRIKVxcbnZhcnlpbmcgZmxvYXQgdl9GcmFnRGVwdGg7XFxudW5pZm9ybSBmbG9hdCBsb2dEZXB0aEJ1ZkZDIDogTE9HX0RFUFRIX0JVRkZFUl9GQztcXG4jZW5kaWZcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfbWFpblxcbiNpZiBkZWZpbmVkKExPR19ERVBUSCkgJiYgZGVmaW5lZChTVVBQT1JUX0ZSQUdfREVQVEgpXFxuIGdsX0ZyYWdEZXB0aEVYVCA9IGxvZzIodl9GcmFnRGVwdGgpICogbG9nRGVwdGhCdWZGQyAqIDAuNTtcXG4jZW5kaWZcXG5AZW5kXFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS91dGlsLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///86\n");

/***/ }),
/* 87 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.skybox.vertex\\n#define SHADER_NAME skybox\\nuniform mat4 world : WORLD;\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nvarying vec3 v_WorldPosition;\\nvoid main()\\n{\\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n}\\n@end\\n@export clay.skybox.fragment\\n#define PI 3.1415926\\nuniform mat4 viewInverse : VIEWINVERSE;\\n#ifdef EQUIRECTANGULAR\\nuniform sampler2D environmentMap;\\n#else\\nuniform samplerCube environmentMap;\\n#endif\\nuniform float lod: 0.0;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.util.ACES\\nvoid main()\\n{\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(v_WorldPosition - eyePos);\\n#ifdef EQUIRECTANGULAR\\n float phi = acos(V.y);\\n float theta = atan(-V.x, V.z) + PI * 0.5;\\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\\n#else\\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\\n #else\\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\\n #endif\\n#endif\\n#ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n#endif\\n#ifdef TONEMAPPING\\n texel.rgb = ACESToneMapping(texel.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n texel = linearTosRGB(texel);\\n#endif\\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2Uvc2t5Ym94Lmdsc2wuanM/NzMzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5za3lib3gudmVydGV4XFxuI2RlZmluZSBTSEFERVJfTkFNRSBza3lib3hcXG51bmlmb3JtIG1hdDQgd29ybGQgOiBXT1JMRDtcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2X1dvcmxkUG9zaXRpb24gPSAod29ybGQgKiB2ZWM0KHBvc2l0aW9uLCAxLjApKS54eXo7XFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuc2t5Ym94LmZyYWdtZW50XFxuI2RlZmluZSBQSSAzLjE0MTU5MjZcXG51bmlmb3JtIG1hdDQgdmlld0ludmVyc2UgOiBWSUVXSU5WRVJTRTtcXG4jaWZkZWYgRVFVSVJFQ1RBTkdVTEFSXFxudW5pZm9ybSBzYW1wbGVyMkQgZW52aXJvbm1lbnRNYXA7XFxuI2Vsc2VcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGVudmlyb25tZW50TWFwO1xcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgbG9kOiAwLjA7XFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnV0aWwuc3JnYlxcbkBpbXBvcnQgY2xheS51dGlsLkFDRVNcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMyBleWVQb3MgPSB2aWV3SW52ZXJzZVszXS54eXo7XFxuIHZlYzMgViA9IG5vcm1hbGl6ZSh2X1dvcmxkUG9zaXRpb24gLSBleWVQb3MpO1xcbiNpZmRlZiBFUVVJUkVDVEFOR1VMQVJcXG4gZmxvYXQgcGhpID0gYWNvcyhWLnkpO1xcbiBmbG9hdCB0aGV0YSA9IGF0YW4oLVYueCwgVi56KSArIFBJICogMC41O1xcbiB2ZWMyIHV2ID0gdmVjMih0aGV0YSAvIDIuMCAvIFBJLCBwaGkgLyBQSSk7XFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKGVudmlyb25tZW50TWFwLCBmcmFjdCh1dikpKTtcXG4jZWxzZVxcbiAjaWYgZGVmaW5lZChMT0QpIHx8IGRlZmluZWQoU1VQUE9SVF9URVhUVVJFX0xPRClcXG4gdmVjNCB0ZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlQ3ViZUxvZEVYVChlbnZpcm9ubWVudE1hcCwgViwgbG9kKSk7XFxuICNlbHNlXFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZUN1YmUoZW52aXJvbm1lbnRNYXAsIFYpKTtcXG4gI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfREVDT0RFXFxuIHRleGVsID0gc1JHQlRvTGluZWFyKHRleGVsKTtcXG4jZW5kaWZcXG4jaWZkZWYgVE9ORU1BUFBJTkdcXG4gdGV4ZWwucmdiID0gQUNFU1RvbmVNYXBwaW5nKHRleGVsLnJnYik7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfRU5DT0RFXFxuIHRleGVsID0gbGluZWFyVG9zUkdCKHRleGVsKTtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHZlYzQodGV4ZWwucmdiLCAxLjApKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2Uvc2t5Ym94Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDg3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///87\n");

/***/ }),
/* 88 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Directional\n * @extends clay.Light\n *\n * @example\n *     var light = new clay.light.Directional({\n *         intensity: 0.5,\n *         color: [1.0, 0.0, 0.0]\n *     });\n *     light.position.set(10, 10, 10);\n *     light.lookAt(clay.Vector3.ZERO);\n *     scene.add(light);\n */\nvar DirectionalLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/** @lends clay.light.Directional# */ {\n    /**\n     * @type {number}\n     */\n    shadowBias: 0.001,\n    /**\n     * @type {number}\n     */\n    shadowSlopeScale: 2.0,\n    /**\n     * Shadow cascade.\n     * Use PSSM technique when it is larger than 1 and have a unique directional light in scene.\n     * @type {number}\n     */\n    shadowCascade: 1,\n\n    /**\n     * Available when shadowCascade is larger than 1 and have a unique directional light in scene.\n     * @type {number}\n     */\n    cascadeSplitLogFactor: 0.2\n}, {\n\n    type: 'DIRECTIONAL_LIGHT',\n\n    uniformTemplates: {\n        directionalLightDirection: {\n            type: '3f',\n            value: function (instance) {\n                instance.__dir = instance.__dir || new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                // Direction is target to eye\n                return instance.__dir.copy(instance.worldTransform.z).normalize().negate().array;\n            }\n        },\n        directionalLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Directional}\n     * @memberOf clay.light.Directional.prototype\n     */\n    clone: function () {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.shadowBias = this.shadowBias;\n        light.shadowSlopeScale = this.shadowSlopeScale;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (DirectionalLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0RpcmVjdGlvbmFsLmpzPzMyYjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuRGlyZWN0aW9uYWxcbiAqIEBleHRlbmRzIGNsYXkuTGlnaHRcbiAqXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBsaWdodCA9IG5ldyBjbGF5LmxpZ2h0LkRpcmVjdGlvbmFsKHtcbiAqICAgICAgICAgaW50ZW5zaXR5OiAwLjUsXG4gKiAgICAgICAgIGNvbG9yOiBbMS4wLCAwLjAsIDAuMF1cbiAqICAgICB9KTtcbiAqICAgICBsaWdodC5wb3NpdGlvbi5zZXQoMTAsIDEwLCAxMCk7XG4gKiAgICAgbGlnaHQubG9va0F0KGNsYXkuVmVjdG9yMy5aRVJPKTtcbiAqICAgICBzY2VuZS5hZGQobGlnaHQpO1xuICovXG52YXIgRGlyZWN0aW9uYWxMaWdodCA9IExpZ2h0LmV4dGVuZCgvKiogQGxlbmRzIGNsYXkubGlnaHQuRGlyZWN0aW9uYWwjICovIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNoYWRvd0JpYXM6IDAuMDAxLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2hhZG93U2xvcGVTY2FsZTogMi4wLFxuICAgIC8qKlxuICAgICAqIFNoYWRvdyBjYXNjYWRlLlxuICAgICAqIFVzZSBQU1NNIHRlY2huaXF1ZSB3aGVuIGl0IGlzIGxhcmdlciB0aGFuIDEgYW5kIGhhdmUgYSB1bmlxdWUgZGlyZWN0aW9uYWwgbGlnaHQgaW4gc2NlbmUuXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzaGFkb3dDYXNjYWRlOiAxLFxuXG4gICAgLyoqXG4gICAgICogQXZhaWxhYmxlIHdoZW4gc2hhZG93Q2FzY2FkZSBpcyBsYXJnZXIgdGhhbiAxIGFuZCBoYXZlIGEgdW5pcXVlIGRpcmVjdGlvbmFsIGxpZ2h0IGluIHNjZW5lLlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgY2FzY2FkZVNwbGl0TG9nRmFjdG9yOiAwLjJcbn0sIHtcblxuICAgIHR5cGU6ICdESVJFQ1RJT05BTF9MSUdIVCcsXG5cbiAgICB1bmlmb3JtVGVtcGxhdGVzOiB7XG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgaW5zdGFuY2UuX19kaXIgPSBpbnN0YW5jZS5fX2RpciB8fCBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIC8vIERpcmVjdGlvbiBpcyB0YXJnZXQgdG8gZXllXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLl9fZGlyLmNvcHkoaW5zdGFuY2Uud29ybGRUcmFuc2Zvcm0ueikubm9ybWFsaXplKCkubmVnYXRlKCkuYXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRpcmVjdGlvbmFsTGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBpbnN0YW5jZS5jb2xvcjtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZW5zaXR5ID0gaW5zdGFuY2UuaW50ZW5zaXR5O1xuICAgICAgICAgICAgICAgIHJldHVybiBbY29sb3JbMF0gKiBpbnRlbnNpdHksIGNvbG9yWzFdICogaW50ZW5zaXR5LCBjb2xvclsyXSAqIGludGVuc2l0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkubGlnaHQuRGlyZWN0aW9uYWx9XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuRGlyZWN0aW9uYWwucHJvdG90eXBlXG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0ID0gTGlnaHQucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7XG4gICAgICAgIGxpZ2h0LnNoYWRvd0JpYXMgPSB0aGlzLnNoYWRvd0JpYXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvd1Nsb3BlU2NhbGUgPSB0aGlzLnNoYWRvd1Nsb3BlU2NhbGU7XG4gICAgICAgIHJldHVybiBsaWdodDtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRGlyZWN0aW9uYWxMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9saWdodC9EaXJlY3Rpb25hbC5qc1xuLy8gbW9kdWxlIGlkID0gODhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///88\n");

/***/ }),
/* 89 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Point\n * @extends clay.Light\n */\nvar PointLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/** @lends clay.light.Point# */ {\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    castShadow: false\n}, {\n\n    type: 'POINT_LIGHT',\n\n    uniformTemplates: {\n        pointLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        pointLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n        pointLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Point}\n     * @memberOf clay.light.Point.prototype\n     */\n    clone: function() {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.range = this.range;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PointLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiODkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L1BvaW50LmpzPzYwNmQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5saWdodC5Qb2ludFxuICogQGV4dGVuZHMgY2xheS5MaWdodFxuICovXG52YXIgUG9pbnRMaWdodCA9IExpZ2h0LmV4dGVuZCgvKiogQGxlbmRzIGNsYXkubGlnaHQuUG9pbnQjICovIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHJhbmdlOiAxMDAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNhc3RTaGFkb3c6IGZhbHNlXG59LCB7XG5cbiAgICB0eXBlOiAnUE9JTlRfTElHSFQnLFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBwb2ludExpZ2h0UG9zaXRpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0V29ybGRQb3NpdGlvbigpLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBwb2ludExpZ2h0UmFuZ2U6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UucmFuZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHBvaW50TGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2xvciA9IGluc3RhbmNlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHZhciBpbnRlbnNpdHkgPSBpbnN0YW5jZS5pbnRlbnNpdHk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFtjb2xvclswXSAqIGludGVuc2l0eSwgY29sb3JbMV0gKiBpbnRlbnNpdHksIGNvbG9yWzJdICogaW50ZW5zaXR5XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5saWdodC5Qb2ludH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5saWdodC5Qb2ludC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBsaWdodCA9IExpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgICBsaWdodC5yYW5nZSA9IHRoaXMucmFuZ2U7XG4gICAgICAgIHJldHVybiBsaWdodDtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgUG9pbnRMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9saWdodC9Qb2ludC5qc1xuLy8gbW9kdWxlIGlkID0gODlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///89\n");

/***/ }),
/* 90 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Spot\n * @extends clay.Light\n */\nvar SpotLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(/**@lends clay.light.Spot */ {\n    /**\n     * @type {number}\n     */\n    range: 20,\n    /**\n     * @type {number}\n     */\n    umbraAngle: 30,\n    /**\n     * @type {number}\n     */\n    penumbraAngle: 45,\n    /**\n     * @type {number}\n     */\n    falloffFactor: 2.0,\n    /**\n     * @type {number}\n     */\n    shadowBias: 0.001,\n    /**\n     * @type {number}\n     */\n    shadowSlopeScale: 2.0\n}, {\n\n    type: 'SPOT_LIGHT',\n\n    uniformTemplates: {\n        spotLightPosition: {\n            type: '3f',\n            value: function (instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        spotLightRange: {\n            type: '1f',\n            value: function (instance) {\n                return instance.range;\n            }\n        },\n        spotLightUmbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.umbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightPenumbraAngleCosine: {\n            type: '1f',\n            value: function (instance) {\n                return Math.cos(instance.penumbraAngle * Math.PI / 180);\n            }\n        },\n        spotLightFalloffFactor: {\n            type: '1f',\n            value: function (instance) {\n                return instance.falloffFactor;\n            }\n        },\n        spotLightDirection: {\n            type: '3f',\n            value: function (instance) {\n                instance.__dir = instance.__dir || new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                // Direction is target to eye\n                return instance.__dir.copy(instance.worldTransform.z).negate().array;\n            }\n        },\n        spotLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        }\n    },\n    /**\n     * @return {clay.light.Spot}\n     * @memberOf clay.light.Spot.prototype\n     */\n    clone: function () {\n        var light = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].prototype.clone.call(this);\n        light.range = this.range;\n        light.umbraAngle = this.umbraAngle;\n        light.penumbraAngle = this.penumbraAngle;\n        light.falloffFactor = this.falloffFactor;\n        light.shadowBias = this.shadowBias;\n        light.shadowSlopeScale = this.shadowSlopeScale;\n        return light;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SpotLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L1Nwb3QuanM/MzFhNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGlnaHQgZnJvbSAnLi4vTGlnaHQnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5saWdodC5TcG90XG4gKiBAZXh0ZW5kcyBjbGF5LkxpZ2h0XG4gKi9cbnZhciBTcG90TGlnaHQgPSBMaWdodC5leHRlbmQoLyoqQGxlbmRzIGNsYXkubGlnaHQuU3BvdCAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYW5nZTogMjAsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB1bWJyYUFuZ2xlOiAzMCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHBlbnVtYnJhQW5nbGU6IDQ1LFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgZmFsbG9mZkZhY3RvcjogMi4wLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc2hhZG93QmlhczogMC4wMDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzaGFkb3dTbG9wZVNjYWxlOiAyLjBcbn0sIHtcblxuICAgIHR5cGU6ICdTUE9UX0xJR0hUJyxcblxuICAgIHVuaWZvcm1UZW1wbGF0ZXM6IHtcbiAgICAgICAgc3BvdExpZ2h0UG9zaXRpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BvdExpZ2h0UmFuZ2U6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzcG90TGlnaHRVbWJyYUFuZ2xlQ29zaW5lOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLmNvcyhpbnN0YW5jZS51bWJyYUFuZ2xlICogTWF0aC5QSSAvIDE4MCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNwb3RMaWdodFBlbnVtYnJhQW5nbGVDb3NpbmU6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguY29zKGluc3RhbmNlLnBlbnVtYnJhQW5nbGUgKiBNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BvdExpZ2h0RmFsbG9mZkZhY3Rvcjoge1xuICAgICAgICAgICAgdHlwZTogJzFmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZmFsbG9mZkZhY3RvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BvdExpZ2h0RGlyZWN0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIGluc3RhbmNlLl9fZGlyID0gaW5zdGFuY2UuX19kaXIgfHwgbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAvLyBEaXJlY3Rpb24gaXMgdGFyZ2V0IHRvIGV5ZVxuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5fX2Rpci5jb3B5KGluc3RhbmNlLndvcmxkVHJhbnNmb3JtLnopLm5lZ2F0ZSgpLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzcG90TGlnaHRDb2xvcjoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBpbnN0YW5jZS5jb2xvcjtcbiAgICAgICAgICAgICAgICB2YXIgaW50ZW5zaXR5ID0gaW5zdGFuY2UuaW50ZW5zaXR5O1xuICAgICAgICAgICAgICAgIHJldHVybiBbY29sb3JbMF0gKiBpbnRlbnNpdHksIGNvbG9yWzFdICogaW50ZW5zaXR5LCBjb2xvclsyXSAqIGludGVuc2l0eV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkubGlnaHQuU3BvdH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5saWdodC5TcG90LnByb3RvdHlwZVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBsaWdodCA9IExpZ2h0LnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgICAgICBsaWdodC5yYW5nZSA9IHRoaXMucmFuZ2U7XG4gICAgICAgIGxpZ2h0LnVtYnJhQW5nbGUgPSB0aGlzLnVtYnJhQW5nbGU7XG4gICAgICAgIGxpZ2h0LnBlbnVtYnJhQW5nbGUgPSB0aGlzLnBlbnVtYnJhQW5nbGU7XG4gICAgICAgIGxpZ2h0LmZhbGxvZmZGYWN0b3IgPSB0aGlzLmZhbGxvZmZGYWN0b3I7XG4gICAgICAgIGxpZ2h0LnNoYWRvd0JpYXMgPSB0aGlzLnNoYWRvd0JpYXM7XG4gICAgICAgIGxpZ2h0LnNoYWRvd1Nsb3BlU2NhbGUgPSB0aGlzLnNoYWRvd1Nsb3BlU2NhbGU7XG4gICAgICAgIHJldHVybiBsaWdodDtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgU3BvdExpZ2h0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L1Nwb3QuanNcbi8vIG1vZHVsZSBpZCA9IDkwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///90\n");

/***/ }),
/* 91 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Ambient\n * @extends clay.Light\n */\nvar AmbientLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    castShadow: false\n\n}, {\n\n    type: 'AMBIENT_LIGHT',\n\n    uniformTemplates: {\n        ambientLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.Ambient}\n     * @memberOf clay.light.Ambient.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0FtYmllbnQuanM/MmZlZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGlnaHQgZnJvbSAnLi4vTGlnaHQnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LkFtYmllbnRcbiAqIEBleHRlbmRzIGNsYXkuTGlnaHRcbiAqL1xudmFyIEFtYmllbnRMaWdodCA9IExpZ2h0LmV4dGVuZCh7XG5cbiAgICBjYXN0U2hhZG93OiBmYWxzZVxuXG59LCB7XG5cbiAgICB0eXBlOiAnQU1CSUVOVF9MSUdIVCcsXG5cbiAgICB1bmlmb3JtVGVtcGxhdGVzOiB7XG4gICAgICAgIGFtYmllbnRMaWdodENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdKmludGVuc2l0eSwgY29sb3JbMV0qaW50ZW5zaXR5LCBjb2xvclsyXSppbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBuYW1lIGNsb25lXG4gICAgICogQHJldHVybiB7Y2xheS5saWdodC5BbWJpZW50fVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmxpZ2h0LkFtYmllbnQucHJvdG90eXBlXG4gICAgICovXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgQW1iaWVudExpZ2h0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0FtYmllbnQuanNcbi8vIG1vZHVsZSBpZCA9IDkxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///91\n");

/***/ }),
/* 92 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_cubemap__ = __webpack_require__(93);\n// https://docs.unrealengine.com/latest/INT/Engine/Rendering/LightingAndShadows/AmbientCubemap/\n\n\n\n/**\n * Ambient cubemap light provides specular parts of Image Based Lighting.\n * Which is a basic requirement for Physically Based Rendering\n * @constructor clay.light.AmbientCubemap\n * @extends clay.Light\n */\nvar AmbientCubemapLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    /**\n     * @type {clay.TextureCube}\n     * @memberOf clay.light.AmbientCubemap#\n     */\n    cubemap: null,\n\n    // TODO\n    // range: 100,\n\n    castShadow: false,\n\n    _normalDistribution: null,\n    _brdfLookup: null\n\n}, /** @lends clay.light.AmbientCubemap# */ {\n\n    type: 'AMBIENT_CUBEMAP_LIGHT',\n\n    /**\n     * Do prefitering the cubemap\n     * @param {clay.Renderer} renderer\n     * @param {number} [size=32]\n     */\n    prefilter: function (renderer, size) {\n        if (!renderer.getGLExtension('EXT_shader_texture_lod')) {\n            console.warn('Device not support textureCubeLodEXT');\n            return;\n        }\n        if (!this._brdfLookup) {\n            this._normalDistribution = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].generateNormalDistribution();\n            this._brdfLookup = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].integrateBRDF(renderer, this._normalDistribution);\n        }\n        var cubemap = this.cubemap;\n        if (cubemap.__prefiltered) {\n            return;\n        }\n\n        var result = __WEBPACK_IMPORTED_MODULE_1__util_cubemap__[\"a\" /* default */].prefilterEnvironmentMap(\n            renderer, cubemap, {\n                encodeRGBM: true,\n                width: size,\n                height: size\n            }, this._normalDistribution, this._brdfLookup\n        );\n        this.cubemap = result.environmentMap;\n        this.cubemap.__prefiltered = true;\n\n        cubemap.dispose(renderer);\n    },\n\n    getBRDFLookup: function () {\n        return this._brdfLookup;\n    },\n\n    uniformTemplates: {\n        ambientCubemapLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        },\n\n        ambientCubemapLightCubemap: {\n            type: 't',\n            value: function (instance) {\n                return instance.cubemap;\n            }\n        },\n\n        ambientCubemapLightBRDFLookup: {\n            type: 't',\n            value: function (instance) {\n                return instance._brdfLookup;\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.AmbientCubemap}\n     * @memberOf clay.light.AmbientCubemap.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientCubemapLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0FtYmllbnRDdWJlbWFwLmpzP2IyY2UiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gaHR0cHM6Ly9kb2NzLnVucmVhbGVuZ2luZS5jb20vbGF0ZXN0L0lOVC9FbmdpbmUvUmVuZGVyaW5nL0xpZ2h0aW5nQW5kU2hhZG93cy9BbWJpZW50Q3ViZW1hcC9cbmltcG9ydCBMaWdodCBmcm9tICcuLi9MaWdodCc7XG5pbXBvcnQgY3ViZW1hcFV0aWwgZnJvbSAnLi4vdXRpbC9jdWJlbWFwJztcblxuLyoqXG4gKiBBbWJpZW50IGN1YmVtYXAgbGlnaHQgcHJvdmlkZXMgc3BlY3VsYXIgcGFydHMgb2YgSW1hZ2UgQmFzZWQgTGlnaHRpbmcuXG4gKiBXaGljaCBpcyBhIGJhc2ljIHJlcXVpcmVtZW50IGZvciBQaHlzaWNhbGx5IEJhc2VkIFJlbmRlcmluZ1xuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuQW1iaWVudEN1YmVtYXBcbiAqIEBleHRlbmRzIGNsYXkuTGlnaHRcbiAqL1xudmFyIEFtYmllbnRDdWJlbWFwTGlnaHQgPSBMaWdodC5leHRlbmQoe1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVGV4dHVyZUN1YmV9XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuQW1iaWVudEN1YmVtYXAjXG4gICAgICovXG4gICAgY3ViZW1hcDogbnVsbCxcblxuICAgIC8vIFRPRE9cbiAgICAvLyByYW5nZTogMTAwLFxuXG4gICAgY2FzdFNoYWRvdzogZmFsc2UsXG5cbiAgICBfbm9ybWFsRGlzdHJpYnV0aW9uOiBudWxsLFxuICAgIF9icmRmTG9va3VwOiBudWxsXG5cbn0sIC8qKiBAbGVuZHMgY2xheS5saWdodC5BbWJpZW50Q3ViZW1hcCMgKi8ge1xuXG4gICAgdHlwZTogJ0FNQklFTlRfQ1VCRU1BUF9MSUdIVCcsXG5cbiAgICAvKipcbiAgICAgKiBEbyBwcmVmaXRlcmluZyB0aGUgY3ViZW1hcFxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3NpemU9MzJdXG4gICAgICovXG4gICAgcHJlZmlsdGVyOiBmdW5jdGlvbiAocmVuZGVyZXIsIHNpemUpIHtcbiAgICAgICAgaWYgKCFyZW5kZXJlci5nZXRHTEV4dGVuc2lvbignRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCcpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0RldmljZSBub3Qgc3VwcG9ydCB0ZXh0dXJlQ3ViZUxvZEVYVCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5fYnJkZkxvb2t1cCkge1xuICAgICAgICAgICAgdGhpcy5fbm9ybWFsRGlzdHJpYnV0aW9uID0gY3ViZW1hcFV0aWwuZ2VuZXJhdGVOb3JtYWxEaXN0cmlidXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuX2JyZGZMb29rdXAgPSBjdWJlbWFwVXRpbC5pbnRlZ3JhdGVCUkRGKHJlbmRlcmVyLCB0aGlzLl9ub3JtYWxEaXN0cmlidXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjdWJlbWFwID0gdGhpcy5jdWJlbWFwO1xuICAgICAgICBpZiAoY3ViZW1hcC5fX3ByZWZpbHRlcmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzdWx0ID0gY3ViZW1hcFV0aWwucHJlZmlsdGVyRW52aXJvbm1lbnRNYXAoXG4gICAgICAgICAgICByZW5kZXJlciwgY3ViZW1hcCwge1xuICAgICAgICAgICAgICAgIGVuY29kZVJHQk06IHRydWUsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHNpemUsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBzaXplXG4gICAgICAgICAgICB9LCB0aGlzLl9ub3JtYWxEaXN0cmlidXRpb24sIHRoaXMuX2JyZGZMb29rdXBcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5jdWJlbWFwID0gcmVzdWx0LmVudmlyb25tZW50TWFwO1xuICAgICAgICB0aGlzLmN1YmVtYXAuX19wcmVmaWx0ZXJlZCA9IHRydWU7XG5cbiAgICAgICAgY3ViZW1hcC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB9LFxuXG4gICAgZ2V0QlJERkxvb2t1cDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnJkZkxvb2t1cDtcbiAgICB9LFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBhbWJpZW50Q3ViZW1hcExpZ2h0Q29sb3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdKmludGVuc2l0eSwgY29sb3JbMV0qaW50ZW5zaXR5LCBjb2xvclsyXSppbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFtYmllbnRDdWJlbWFwTGlnaHRDdWJlbWFwOiB7XG4gICAgICAgICAgICB0eXBlOiAndCcsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmN1YmVtYXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgYW1iaWVudEN1YmVtYXBMaWdodEJSREZMb29rdXA6IHtcbiAgICAgICAgICAgIHR5cGU6ICd0JyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuX2JyZGZMb29rdXA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQGZ1bmN0aW9uXG4gICAgICogQG5hbWUgY2xvbmVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmxpZ2h0LkFtYmllbnRDdWJlbWFwfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LmxpZ2h0LkFtYmllbnRDdWJlbWFwLnByb3RvdHlwZVxuICAgICAqL1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFtYmllbnRDdWJlbWFwTGlnaHQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbGlnaHQvQW1iaWVudEN1YmVtYXAuanNcbi8vIG1vZHVsZSBpZCA9IDkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///92\n");

/***/ }),
/* 93 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__shader_integrateBRDF_glsl_js__ = __webpack_require__(138);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__shader_prefilter_glsl_js__ = __webpack_require__(139);\n// Cubemap prefilter utility\n// http://www.unrealengine.com/files/downloads/2013SiggraphPresentationsNotes.pdf\n// http://http.developer.nvidia.com/GPUGems3/gpugems3_ch20.html\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar cubemapUtil = {};\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n// TODO Downsample\n/**\n * @name clay.util.cubemap.prefilterEnvironmentMap\n * @param  {clay.Renderer} renderer\n * @param  {clay.Texture} envMap\n * @param  {Object} [textureOpts]\n * @param  {number} [textureOpts.width=64]\n * @param  {number} [textureOpts.height=64]\n * @param  {number} [textureOpts.type]\n * @param  {boolean} [textureOpts.encodeRGBM=false]\n * @param  {boolean} [textureOpts.decodeRGBM=false]\n * @param  {clay.Texture2D} [normalDistribution]\n * @param  {clay.Texture2D} [brdfLookup]\n */\ncubemapUtil.prefilterEnvironmentMap = function (\n    renderer, envMap, textureOpts, normalDistribution, brdfLookup\n) {\n    // Not create other renderer, it is easy having issue of cross reference of resources like framebuffer\n    // PENDING preserveDrawingBuffer?\n    if (!brdfLookup || !normalDistribution) {\n        normalDistribution = cubemapUtil.generateNormalDistribution();\n        brdfLookup = cubemapUtil.integrateBRDF(renderer, normalDistribution);\n    }\n    textureOpts = textureOpts || {};\n\n    var width = textureOpts.width || 64;\n    var height = textureOpts.height || 64;\n\n    var textureType = textureOpts.type || envMap.type;\n\n    // Use same type with given envMap\n    var prefilteredCubeMap = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]({\n        width: width,\n        height: height,\n        type: textureType,\n        flipY: false,\n        mipmaps: []\n    });\n\n    if (!prefilteredCubeMap.isPowerOfTwo()) {\n        console.warn('Width and height must be power of two to enable mipmap.');\n    }\n\n    var size = Math.min(width, height);\n    var mipmapNum = Math.log(size) / Math.log(2) + 1;\n\n    var prefilterMaterial = new __WEBPACK_IMPORTED_MODULE_5__Material__[\"a\" /* default */]({\n        shader: new __WEBPACK_IMPORTED_MODULE_6__Shader__[\"a\" /* default */]({\n            vertex: __WEBPACK_IMPORTED_MODULE_6__Shader__[\"a\" /* default */].source('clay.skybox.vertex'),\n            fragment: __WEBPACK_IMPORTED_MODULE_13__shader_prefilter_glsl_js__[\"a\" /* default */]\n        })\n    });\n    prefilterMaterial.set('normalDistribution', normalDistribution);\n\n    textureOpts.encodeRGBM && prefilterMaterial.define('fragment', 'RGBM_ENCODE');\n    textureOpts.decodeRGBM && prefilterMaterial.define('fragment', 'RGBM_DECODE');\n\n    var dummyScene = new __WEBPACK_IMPORTED_MODULE_8__Scene__[\"a\" /* default */]();\n    var skyEnv;\n\n    if (envMap.textureType === 'texture2D') {\n        // Convert panorama to cubemap\n        var envCubemap = new __WEBPACK_IMPORTED_MODULE_1__TextureCube__[\"a\" /* default */]({\n            width: width,\n            height: height,\n            // FIXME FLOAT type will cause GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT error on iOS\n            type: textureType === __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT ?\n                __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT : textureType\n        });\n        __WEBPACK_IMPORTED_MODULE_11__texture__[\"a\" /* default */].panoramaToCubeMap(renderer, envMap, envCubemap, {\n            // PENDING encodeRGBM so it can be decoded as RGBM\n            encodeRGBM: textureOpts.decodeRGBM\n        });\n        envMap = envCubemap;\n    }\n    skyEnv = new __WEBPACK_IMPORTED_MODULE_7__plugin_Skybox__[\"a\" /* default */]({\n        scene: dummyScene,\n        material: prefilterMaterial\n    });\n    skyEnv.material.set('environmentMap', envMap);\n\n    var envMapPass = new __WEBPACK_IMPORTED_MODULE_9__prePass_EnvironmentMap__[\"a\" /* default */]({\n        texture: prefilteredCubeMap\n    });\n\n    // Force to be UNSIGNED_BYTE\n    if (textureOpts.encodeRGBM) {\n        textureType = prefilteredCubeMap.type = __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_BYTE;\n    }\n\n    var renderTargetTmp = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: width,\n        height: height,\n        type: textureType\n    });\n    var frameBuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]({\n        depthBuffer: false\n    });\n    var ArrayCtor = __WEBPACK_IMPORTED_MODULE_10__core_vendor__[\"a\" /* default */][textureType === __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_BYTE ? 'Uint8Array' : 'Float32Array'];\n    for (var i = 0; i < mipmapNum; i++) {\n        // console.time('prefilter');\n        prefilteredCubeMap.mipmaps[i] = {\n            pixels: {}\n        };\n        skyEnv.material.set('roughness', i / (mipmapNum - 1));\n\n        // Tweak fov\n        // http://the-witness.net/news/2012/02/seamless-cube-map-filtering/\n        var n = renderTargetTmp.width;\n        var fov = 2 * Math.atan(n / (n - 0.5)) / Math.PI * 180;\n\n        for (var j = 0; j < targets.length; j++) {\n            var pixels = new ArrayCtor(renderTargetTmp.width * renderTargetTmp.height * 4);\n            frameBuffer.attach(renderTargetTmp);\n            frameBuffer.bind(renderer);\n\n            var camera = envMapPass.getCamera(targets[j]);\n            camera.fov = fov;\n            renderer.render(dummyScene, camera);\n            renderer.gl.readPixels(\n                0, 0, renderTargetTmp.width, renderTargetTmp.height,\n                __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].RGBA, textureType, pixels\n            );\n\n            // var canvas = document.createElement('canvas');\n            // var ctx = canvas.getContext('2d');\n            // canvas.width = renderTargetTmp.width;\n            // canvas.height = renderTargetTmp.height;\n            // var imageData = ctx.createImageData(renderTargetTmp.width, renderTargetTmp.height);\n            // for (var k = 0; k < pixels.length; k++) {\n            //     imageData.data[k] = pixels[k];\n            // }\n            // ctx.putImageData(imageData, 0, 0);\n            // document.body.appendChild(canvas);\n\n            frameBuffer.unbind(renderer);\n            prefilteredCubeMap.mipmaps[i].pixels[targets[j]] = pixels;\n        }\n\n        renderTargetTmp.width /= 2;\n        renderTargetTmp.height /= 2;\n        renderTargetTmp.dirty();\n        // console.timeEnd('prefilter');\n    }\n\n    frameBuffer.dispose(renderer);\n    renderTargetTmp.dispose(renderer);\n    skyEnv.dispose(renderer);\n    // Remove gpu resource allucated in renderer\n    normalDistribution.dispose(renderer);\n\n    // renderer.dispose();\n\n    return {\n        environmentMap: prefilteredCubeMap,\n        brdfLookup: brdfLookup,\n        normalDistribution: normalDistribution,\n        maxMipmapLevel: mipmapNum\n    };\n};\n\ncubemapUtil.integrateBRDF = function (renderer, normalDistribution) {\n    normalDistribution = normalDistribution || cubemapUtil.generateNormalDistribution();\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */]({\n        depthBuffer: false\n    });\n    var pass = new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_12__shader_integrateBRDF_glsl_js__[\"a\" /* default */]\n    });\n\n    var texture = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: 512,\n        height: 256,\n        type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        useMipmap: false\n    });\n    pass.setUniform('normalDistribution', normalDistribution);\n    pass.setUniform('viewportSize', [512, 256]);\n    pass.attachOutput(texture);\n    pass.render(renderer, framebuffer);\n\n    // FIXME Only chrome and firefox can readPixels with float type.\n    // framebuffer.bind(renderer);\n    // var pixels = new Float32Array(512 * 256 * 4);\n    // renderer.gl.readPixels(\n    //     0, 0, texture.width, texture.height,\n    //     Texture.RGBA, Texture.FLOAT, pixels\n    // );\n    // texture.pixels = pixels;\n    // texture.flipY = false;\n    // texture.dirty();\n    // framebuffer.unbind(renderer);\n\n    framebuffer.dispose(renderer);\n\n    return texture;\n};\n\ncubemapUtil.generateNormalDistribution = function (roughnessLevels, sampleSize) {\n\n    // http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\n    // GLSL not support bit operation, use lookup instead\n    // V -> i / N, U -> roughness\n    var roughnessLevels = roughnessLevels || 256;\n    var sampleSize = sampleSize || 1024;\n\n    var normalDistribution = new __WEBPACK_IMPORTED_MODULE_0__Texture2D__[\"a\" /* default */]({\n        width: roughnessLevels,\n        height: sampleSize,\n        type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT,\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        useMipmap: false\n    });\n    var pixels = new Float32Array(sampleSize * roughnessLevels * 4);\n    var tmp = [];\n\n    // function sortFunc(a, b) {\n    //     return Math.abs(b) - Math.abs(a);\n    // }\n    for (var j = 0; j < roughnessLevels; j++) {\n        var roughness = j / roughnessLevels;\n        var a = roughness * roughness;\n\n        for (var i = 0; i < sampleSize; i++) {\n            // http://holger.dammertz.org/stuff/notes_HammersleyOnHemisphere.html\n            // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators\n            // http://stackoverflow.com/questions/1908492/unsigned-integer-in-javascript\n            // http://stackoverflow.com/questions/1822350/what-is-the-javascript-operator-and-how-do-you-use-it\n            var y = (i << 16 | i >>> 16) >>> 0;\n            y = ((y & 1431655765) << 1 | (y & 2863311530) >>> 1) >>> 0;\n            y = ((y & 858993459) << 2 | (y & 3435973836) >>> 2) >>> 0;\n            y = ((y & 252645135) << 4 | (y & 4042322160) >>> 4) >>> 0;\n            y = (((y & 16711935) << 8 | (y & 4278255360) >>> 8) >>> 0) / 4294967296;\n\n            // CDF\n            var cosTheta = Math.sqrt((1 - y) / (1 + (a * a - 1.0) * y));\n            tmp[i] = cosTheta;\n        }\n\n        for (var i = 0; i < sampleSize; i++) {\n            var offset = (i * roughnessLevels + j) * 4;\n            var cosTheta = tmp[i];\n            var sinTheta = Math.sqrt(1.0 - cosTheta * cosTheta);\n            var x = i / sampleSize;\n            var phi = 2.0 * Math.PI * x;\n            pixels[offset] = sinTheta * Math.cos(phi);\n            pixels[offset + 1] = cosTheta;\n            pixels[offset + 2] = sinTheta * Math.sin(phi);\n            pixels[offset + 3] = 1.0;\n        }\n    }\n    normalDistribution.pixels = pixels;\n\n    return normalDistribution;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (cubemapUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvY3ViZW1hcC5qcz9iYjIzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEN1YmVtYXAgcHJlZmlsdGVyIHV0aWxpdHlcbi8vIGh0dHA6Ly93d3cudW5yZWFsZW5naW5lLmNvbS9maWxlcy9kb3dubG9hZHMvMjAxM1NpZ2dyYXBoUHJlc2VudGF0aW9uc05vdGVzLnBkZlxuLy8gaHR0cDovL2h0dHAuZGV2ZWxvcGVyLm52aWRpYS5jb20vR1BVR2VtczMvZ3B1Z2VtczNfY2gyMC5odG1sXG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi4vVGV4dHVyZUN1YmUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IFBhc3MgZnJvbSAnLi4vY29tcG9zaXRvci9QYXNzJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgU2t5Ym94IGZyb20gJy4uL3BsdWdpbi9Ta3lib3gnO1xuaW1wb3J0IFNjZW5lIGZyb20gJy4uL1NjZW5lJztcbmltcG9ydCBFbnZpcm9ubWVudE1hcFBhc3MgZnJvbSAnLi4vcHJlUGFzcy9FbnZpcm9ubWVudE1hcCc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcbmltcG9ydCB0ZXh0dXJlVXRpbCBmcm9tICcuL3RleHR1cmUnO1xuXG5pbXBvcnQgaW50ZWdyYXRlQlJERlNoYWRlckNvZGUgZnJvbSAnLi9zaGFkZXIvaW50ZWdyYXRlQlJERi5nbHNsLmpzJztcbmltcG9ydCBwcmVmaWx0ZXJGcmFnQ29kZSBmcm9tICcuL3NoYWRlci9wcmVmaWx0ZXIuZ2xzbC5qcyc7XG5cbnZhciBjdWJlbWFwVXRpbCA9IHt9O1xuXG52YXIgdGFyZ2V0cyA9IFsncHgnLCAnbngnLCAncHknLCAnbnknLCAncHonLCAnbnonXTtcblxuLy8gVE9ETyBEb3duc2FtcGxlXG4vKipcbiAqIEBuYW1lIGNsYXkudXRpbC5jdWJlbWFwLnByZWZpbHRlckVudmlyb25tZW50TWFwXG4gKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICogQHBhcmFtICB7Y2xheS5UZXh0dXJlfSBlbnZNYXBcbiAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmVPcHRzXVxuICogQHBhcmFtICB7bnVtYmVyfSBbdGV4dHVyZU9wdHMud2lkdGg9NjRdXG4gKiBAcGFyYW0gIHtudW1iZXJ9IFt0ZXh0dXJlT3B0cy5oZWlnaHQ9NjRdXG4gKiBAcGFyYW0gIHtudW1iZXJ9IFt0ZXh0dXJlT3B0cy50eXBlXVxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3RleHR1cmVPcHRzLmVuY29kZVJHQk09ZmFsc2VdXG4gKiBAcGFyYW0gIHtib29sZWFufSBbdGV4dHVyZU9wdHMuZGVjb2RlUkdCTT1mYWxzZV1cbiAqIEBwYXJhbSAge2NsYXkuVGV4dHVyZTJEfSBbbm9ybWFsRGlzdHJpYnV0aW9uXVxuICogQHBhcmFtICB7Y2xheS5UZXh0dXJlMkR9IFticmRmTG9va3VwXVxuICovXG5jdWJlbWFwVXRpbC5wcmVmaWx0ZXJFbnZpcm9ubWVudE1hcCA9IGZ1bmN0aW9uIChcbiAgICByZW5kZXJlciwgZW52TWFwLCB0ZXh0dXJlT3B0cywgbm9ybWFsRGlzdHJpYnV0aW9uLCBicmRmTG9va3VwXG4pIHtcbiAgICAvLyBOb3QgY3JlYXRlIG90aGVyIHJlbmRlcmVyLCBpdCBpcyBlYXN5IGhhdmluZyBpc3N1ZSBvZiBjcm9zcyByZWZlcmVuY2Ugb2YgcmVzb3VyY2VzIGxpa2UgZnJhbWVidWZmZXJcbiAgICAvLyBQRU5ESU5HIHByZXNlcnZlRHJhd2luZ0J1ZmZlcj9cbiAgICBpZiAoIWJyZGZMb29rdXAgfHwgIW5vcm1hbERpc3RyaWJ1dGlvbikge1xuICAgICAgICBub3JtYWxEaXN0cmlidXRpb24gPSBjdWJlbWFwVXRpbC5nZW5lcmF0ZU5vcm1hbERpc3RyaWJ1dGlvbigpO1xuICAgICAgICBicmRmTG9va3VwID0gY3ViZW1hcFV0aWwuaW50ZWdyYXRlQlJERihyZW5kZXJlciwgbm9ybWFsRGlzdHJpYnV0aW9uKTtcbiAgICB9XG4gICAgdGV4dHVyZU9wdHMgPSB0ZXh0dXJlT3B0cyB8fCB7fTtcblxuICAgIHZhciB3aWR0aCA9IHRleHR1cmVPcHRzLndpZHRoIHx8IDY0O1xuICAgIHZhciBoZWlnaHQgPSB0ZXh0dXJlT3B0cy5oZWlnaHQgfHwgNjQ7XG5cbiAgICB2YXIgdGV4dHVyZVR5cGUgPSB0ZXh0dXJlT3B0cy50eXBlIHx8IGVudk1hcC50eXBlO1xuXG4gICAgLy8gVXNlIHNhbWUgdHlwZSB3aXRoIGdpdmVuIGVudk1hcFxuICAgIHZhciBwcmVmaWx0ZXJlZEN1YmVNYXAgPSBuZXcgVGV4dHVyZUN1YmUoe1xuICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICB0eXBlOiB0ZXh0dXJlVHlwZSxcbiAgICAgICAgZmxpcFk6IGZhbHNlLFxuICAgICAgICBtaXBtYXBzOiBbXVxuICAgIH0pO1xuXG4gICAgaWYgKCFwcmVmaWx0ZXJlZEN1YmVNYXAuaXNQb3dlck9mVHdvKCkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdXaWR0aCBhbmQgaGVpZ2h0IG11c3QgYmUgcG93ZXIgb2YgdHdvIHRvIGVuYWJsZSBtaXBtYXAuJyk7XG4gICAgfVxuXG4gICAgdmFyIHNpemUgPSBNYXRoLm1pbih3aWR0aCwgaGVpZ2h0KTtcbiAgICB2YXIgbWlwbWFwTnVtID0gTWF0aC5sb2coc2l6ZSkgLyBNYXRoLmxvZygyKSArIDE7XG5cbiAgICB2YXIgcHJlZmlsdGVyTWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICBzaGFkZXI6IG5ldyBTaGFkZXIoe1xuICAgICAgICAgICAgdmVydGV4OiBTaGFkZXIuc291cmNlKCdjbGF5LnNreWJveC52ZXJ0ZXgnKSxcbiAgICAgICAgICAgIGZyYWdtZW50OiBwcmVmaWx0ZXJGcmFnQ29kZVxuICAgICAgICB9KVxuICAgIH0pO1xuICAgIHByZWZpbHRlck1hdGVyaWFsLnNldCgnbm9ybWFsRGlzdHJpYnV0aW9uJywgbm9ybWFsRGlzdHJpYnV0aW9uKTtcblxuICAgIHRleHR1cmVPcHRzLmVuY29kZVJHQk0gJiYgcHJlZmlsdGVyTWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdSR0JNX0VOQ09ERScpO1xuICAgIHRleHR1cmVPcHRzLmRlY29kZVJHQk0gJiYgcHJlZmlsdGVyTWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdSR0JNX0RFQ09ERScpO1xuXG4gICAgdmFyIGR1bW15U2NlbmUgPSBuZXcgU2NlbmUoKTtcbiAgICB2YXIgc2t5RW52O1xuXG4gICAgaWYgKGVudk1hcC50ZXh0dXJlVHlwZSA9PT0gJ3RleHR1cmUyRCcpIHtcbiAgICAgICAgLy8gQ29udmVydCBwYW5vcmFtYSB0byBjdWJlbWFwXG4gICAgICAgIHZhciBlbnZDdWJlbWFwID0gbmV3IFRleHR1cmVDdWJlKHtcbiAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0LFxuICAgICAgICAgICAgLy8gRklYTUUgRkxPQVQgdHlwZSB3aWxsIGNhdXNlIEdMX0ZSQU1FQlVGRkVSX0lOQ09NUExFVEVfQVRUQUNITUVOVCBlcnJvciBvbiBpT1NcbiAgICAgICAgICAgIHR5cGU6IHRleHR1cmVUeXBlID09PSBUZXh0dXJlLkZMT0FUID9cbiAgICAgICAgICAgICAgICBUZXh0dXJlLkhBTEZfRkxPQVQgOiB0ZXh0dXJlVHlwZVxuICAgICAgICB9KTtcbiAgICAgICAgdGV4dHVyZVV0aWwucGFub3JhbWFUb0N1YmVNYXAocmVuZGVyZXIsIGVudk1hcCwgZW52Q3ViZW1hcCwge1xuICAgICAgICAgICAgLy8gUEVORElORyBlbmNvZGVSR0JNIHNvIGl0IGNhbiBiZSBkZWNvZGVkIGFzIFJHQk1cbiAgICAgICAgICAgIGVuY29kZVJHQk06IHRleHR1cmVPcHRzLmRlY29kZVJHQk1cbiAgICAgICAgfSk7XG4gICAgICAgIGVudk1hcCA9IGVudkN1YmVtYXA7XG4gICAgfVxuICAgIHNreUVudiA9IG5ldyBTa3lib3goe1xuICAgICAgICBzY2VuZTogZHVtbXlTY2VuZSxcbiAgICAgICAgbWF0ZXJpYWw6IHByZWZpbHRlck1hdGVyaWFsXG4gICAgfSk7XG4gICAgc2t5RW52Lm1hdGVyaWFsLnNldCgnZW52aXJvbm1lbnRNYXAnLCBlbnZNYXApO1xuXG4gICAgdmFyIGVudk1hcFBhc3MgPSBuZXcgRW52aXJvbm1lbnRNYXBQYXNzKHtcbiAgICAgICAgdGV4dHVyZTogcHJlZmlsdGVyZWRDdWJlTWFwXG4gICAgfSk7XG5cbiAgICAvLyBGb3JjZSB0byBiZSBVTlNJR05FRF9CWVRFXG4gICAgaWYgKHRleHR1cmVPcHRzLmVuY29kZVJHQk0pIHtcbiAgICAgICAgdGV4dHVyZVR5cGUgPSBwcmVmaWx0ZXJlZEN1YmVNYXAudHlwZSA9IFRleHR1cmUuVU5TSUdORURfQllURTtcbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyVGFyZ2V0VG1wID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgIHR5cGU6IHRleHR1cmVUeXBlXG4gICAgfSk7XG4gICAgdmFyIGZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKHtcbiAgICAgICAgZGVwdGhCdWZmZXI6IGZhbHNlXG4gICAgfSk7XG4gICAgdmFyIEFycmF5Q3RvciA9IHZlbmRvclt0ZXh0dXJlVHlwZSA9PT0gVGV4dHVyZS5VTlNJR05FRF9CWVRFID8gJ1VpbnQ4QXJyYXknIDogJ0Zsb2F0MzJBcnJheSddO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWlwbWFwTnVtOyBpKyspIHtcbiAgICAgICAgLy8gY29uc29sZS50aW1lKCdwcmVmaWx0ZXInKTtcbiAgICAgICAgcHJlZmlsdGVyZWRDdWJlTWFwLm1pcG1hcHNbaV0gPSB7XG4gICAgICAgICAgICBwaXhlbHM6IHt9XG4gICAgICAgIH07XG4gICAgICAgIHNreUVudi5tYXRlcmlhbC5zZXQoJ3JvdWdobmVzcycsIGkgLyAobWlwbWFwTnVtIC0gMSkpO1xuXG4gICAgICAgIC8vIFR3ZWFrIGZvdlxuICAgICAgICAvLyBodHRwOi8vdGhlLXdpdG5lc3MubmV0L25ld3MvMjAxMi8wMi9zZWFtbGVzcy1jdWJlLW1hcC1maWx0ZXJpbmcvXG4gICAgICAgIHZhciBuID0gcmVuZGVyVGFyZ2V0VG1wLndpZHRoO1xuICAgICAgICB2YXIgZm92ID0gMiAqIE1hdGguYXRhbihuIC8gKG4gLSAwLjUpKSAvIE1hdGguUEkgKiAxODA7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0YXJnZXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgcGl4ZWxzID0gbmV3IEFycmF5Q3RvcihyZW5kZXJUYXJnZXRUbXAud2lkdGggKiByZW5kZXJUYXJnZXRUbXAuaGVpZ2h0ICogNCk7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5hdHRhY2gocmVuZGVyVGFyZ2V0VG1wKTtcbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gZW52TWFwUGFzcy5nZXRDYW1lcmEodGFyZ2V0c1tqXSk7XG4gICAgICAgICAgICBjYW1lcmEuZm92ID0gZm92O1xuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyKGR1bW15U2NlbmUsIGNhbWVyYSk7XG4gICAgICAgICAgICByZW5kZXJlci5nbC5yZWFkUGl4ZWxzKFxuICAgICAgICAgICAgICAgIDAsIDAsIHJlbmRlclRhcmdldFRtcC53aWR0aCwgcmVuZGVyVGFyZ2V0VG1wLmhlaWdodCxcbiAgICAgICAgICAgICAgICBUZXh0dXJlLlJHQkEsIHRleHR1cmVUeXBlLCBwaXhlbHNcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgICAgIC8vIHZhciBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgIC8vIGNhbnZhcy53aWR0aCA9IHJlbmRlclRhcmdldFRtcC53aWR0aDtcbiAgICAgICAgICAgIC8vIGNhbnZhcy5oZWlnaHQgPSByZW5kZXJUYXJnZXRUbXAuaGVpZ2h0O1xuICAgICAgICAgICAgLy8gdmFyIGltYWdlRGF0YSA9IGN0eC5jcmVhdGVJbWFnZURhdGEocmVuZGVyVGFyZ2V0VG1wLndpZHRoLCByZW5kZXJUYXJnZXRUbXAuaGVpZ2h0KTtcbiAgICAgICAgICAgIC8vIGZvciAodmFyIGsgPSAwOyBrIDwgcGl4ZWxzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAvLyAgICAgaW1hZ2VEYXRhLmRhdGFba10gPSBwaXhlbHNba107XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvLyBjdHgucHV0SW1hZ2VEYXRhKGltYWdlRGF0YSwgMCwgMCk7XG4gICAgICAgICAgICAvLyBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG5cbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgICAgICAgICBwcmVmaWx0ZXJlZEN1YmVNYXAubWlwbWFwc1tpXS5waXhlbHNbdGFyZ2V0c1tqXV0gPSBwaXhlbHM7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJUYXJnZXRUbXAud2lkdGggLz0gMjtcbiAgICAgICAgcmVuZGVyVGFyZ2V0VG1wLmhlaWdodCAvPSAyO1xuICAgICAgICByZW5kZXJUYXJnZXRUbXAuZGlydHkoKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdwcmVmaWx0ZXInKTtcbiAgICB9XG5cbiAgICBmcmFtZUJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICByZW5kZXJUYXJnZXRUbXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgc2t5RW52LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIC8vIFJlbW92ZSBncHUgcmVzb3VyY2UgYWxsdWNhdGVkIGluIHJlbmRlcmVyXG4gICAgbm9ybWFsRGlzdHJpYnV0aW9uLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgLy8gcmVuZGVyZXIuZGlzcG9zZSgpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW52aXJvbm1lbnRNYXA6IHByZWZpbHRlcmVkQ3ViZU1hcCxcbiAgICAgICAgYnJkZkxvb2t1cDogYnJkZkxvb2t1cCxcbiAgICAgICAgbm9ybWFsRGlzdHJpYnV0aW9uOiBub3JtYWxEaXN0cmlidXRpb24sXG4gICAgICAgIG1heE1pcG1hcExldmVsOiBtaXBtYXBOdW1cbiAgICB9O1xufTtcblxuY3ViZW1hcFV0aWwuaW50ZWdyYXRlQlJERiA9IGZ1bmN0aW9uIChyZW5kZXJlciwgbm9ybWFsRGlzdHJpYnV0aW9uKSB7XG4gICAgbm9ybWFsRGlzdHJpYnV0aW9uID0gbm9ybWFsRGlzdHJpYnV0aW9uIHx8IGN1YmVtYXBVdGlsLmdlbmVyYXRlTm9ybWFsRGlzdHJpYnV0aW9uKCk7XG4gICAgdmFyIGZyYW1lYnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKHtcbiAgICAgICAgZGVwdGhCdWZmZXI6IGZhbHNlXG4gICAgfSk7XG4gICAgdmFyIHBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBpbnRlZ3JhdGVCUkRGU2hhZGVyQ29kZVxuICAgIH0pO1xuXG4gICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgd2lkdGg6IDUxMixcbiAgICAgICAgaGVpZ2h0OiAyNTYsXG4gICAgICAgIHR5cGU6IFRleHR1cmUuSEFMRl9GTE9BVCxcbiAgICAgICAgd3JhcFM6IFRleHR1cmUuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgd3JhcFQ6IFRleHR1cmUuQ0xBTVBfVE9fRURHRSxcbiAgICAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICB1c2VNaXBtYXA6IGZhbHNlXG4gICAgfSk7XG4gICAgcGFzcy5zZXRVbmlmb3JtKCdub3JtYWxEaXN0cmlidXRpb24nLCBub3JtYWxEaXN0cmlidXRpb24pO1xuICAgIHBhc3Muc2V0VW5pZm9ybSgndmlld3BvcnRTaXplJywgWzUxMiwgMjU2XSk7XG4gICAgcGFzcy5hdHRhY2hPdXRwdXQodGV4dHVyZSk7XG4gICAgcGFzcy5yZW5kZXIocmVuZGVyZXIsIGZyYW1lYnVmZmVyKTtcblxuICAgIC8vIEZJWE1FIE9ubHkgY2hyb21lIGFuZCBmaXJlZm94IGNhbiByZWFkUGl4ZWxzIHdpdGggZmxvYXQgdHlwZS5cbiAgICAvLyBmcmFtZWJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAvLyB2YXIgcGl4ZWxzID0gbmV3IEZsb2F0MzJBcnJheSg1MTIgKiAyNTYgKiA0KTtcbiAgICAvLyByZW5kZXJlci5nbC5yZWFkUGl4ZWxzKFxuICAgIC8vICAgICAwLCAwLCB0ZXh0dXJlLndpZHRoLCB0ZXh0dXJlLmhlaWdodCxcbiAgICAvLyAgICAgVGV4dHVyZS5SR0JBLCBUZXh0dXJlLkZMT0FULCBwaXhlbHNcbiAgICAvLyApO1xuICAgIC8vIHRleHR1cmUucGl4ZWxzID0gcGl4ZWxzO1xuICAgIC8vIHRleHR1cmUuZmxpcFkgPSBmYWxzZTtcbiAgICAvLyB0ZXh0dXJlLmRpcnR5KCk7XG4gICAgLy8gZnJhbWVidWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgIGZyYW1lYnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgcmV0dXJuIHRleHR1cmU7XG59O1xuXG5jdWJlbWFwVXRpbC5nZW5lcmF0ZU5vcm1hbERpc3RyaWJ1dGlvbiA9IGZ1bmN0aW9uIChyb3VnaG5lc3NMZXZlbHMsIHNhbXBsZVNpemUpIHtcblxuICAgIC8vIGh0dHA6Ly9ob2xnZXIuZGFtbWVydHoub3JnL3N0dWZmL25vdGVzX0hhbW1lcnNsZXlPbkhlbWlzcGhlcmUuaHRtbFxuICAgIC8vIEdMU0wgbm90IHN1cHBvcnQgYml0IG9wZXJhdGlvbiwgdXNlIGxvb2t1cCBpbnN0ZWFkXG4gICAgLy8gViAtPiBpIC8gTiwgVSAtPiByb3VnaG5lc3NcbiAgICB2YXIgcm91Z2huZXNzTGV2ZWxzID0gcm91Z2huZXNzTGV2ZWxzIHx8IDI1NjtcbiAgICB2YXIgc2FtcGxlU2l6ZSA9IHNhbXBsZVNpemUgfHwgMTAyNDtcblxuICAgIHZhciBub3JtYWxEaXN0cmlidXRpb24gPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgd2lkdGg6IHJvdWdobmVzc0xldmVscyxcbiAgICAgICAgaGVpZ2h0OiBzYW1wbGVTaXplLFxuICAgICAgICB0eXBlOiBUZXh0dXJlLkZMT0FULFxuICAgICAgICBtaW5GaWx0ZXI6IFRleHR1cmUuTkVBUkVTVCxcbiAgICAgICAgbWFnRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgIHdyYXBTOiBUZXh0dXJlLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIHdyYXBUOiBUZXh0dXJlLkNMQU1QX1RPX0VER0UsXG4gICAgICAgIHVzZU1pcG1hcDogZmFsc2VcbiAgICB9KTtcbiAgICB2YXIgcGl4ZWxzID0gbmV3IEZsb2F0MzJBcnJheShzYW1wbGVTaXplICogcm91Z2huZXNzTGV2ZWxzICogNCk7XG4gICAgdmFyIHRtcCA9IFtdO1xuXG4gICAgLy8gZnVuY3Rpb24gc29ydEZ1bmMoYSwgYikge1xuICAgIC8vICAgICByZXR1cm4gTWF0aC5hYnMoYikgLSBNYXRoLmFicyhhKTtcbiAgICAvLyB9XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCByb3VnaG5lc3NMZXZlbHM7IGorKykge1xuICAgICAgICB2YXIgcm91Z2huZXNzID0gaiAvIHJvdWdobmVzc0xldmVscztcbiAgICAgICAgdmFyIGEgPSByb3VnaG5lc3MgKiByb3VnaG5lc3M7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzYW1wbGVTaXplOyBpKyspIHtcbiAgICAgICAgICAgIC8vIGh0dHA6Ly9ob2xnZXIuZGFtbWVydHoub3JnL3N0dWZmL25vdGVzX0hhbW1lcnNsZXlPbkhlbWlzcGhlcmUuaHRtbFxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvT3BlcmF0b3JzL0JpdHdpc2VfT3BlcmF0b3JzXG4gICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE5MDg0OTIvdW5zaWduZWQtaW50ZWdlci1pbi1qYXZhc2NyaXB0XG4gICAgICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE4MjIzNTAvd2hhdC1pcy10aGUtamF2YXNjcmlwdC1vcGVyYXRvci1hbmQtaG93LWRvLXlvdS11c2UtaXRcbiAgICAgICAgICAgIHZhciB5ID0gKGkgPDwgMTYgfCBpID4+PiAxNikgPj4+IDA7XG4gICAgICAgICAgICB5ID0gKCh5ICYgMTQzMTY1NTc2NSkgPDwgMSB8ICh5ICYgMjg2MzMxMTUzMCkgPj4+IDEpID4+PiAwO1xuICAgICAgICAgICAgeSA9ICgoeSAmIDg1ODk5MzQ1OSkgPDwgMiB8ICh5ICYgMzQzNTk3MzgzNikgPj4+IDIpID4+PiAwO1xuICAgICAgICAgICAgeSA9ICgoeSAmIDI1MjY0NTEzNSkgPDwgNCB8ICh5ICYgNDA0MjMyMjE2MCkgPj4+IDQpID4+PiAwO1xuICAgICAgICAgICAgeSA9ICgoKHkgJiAxNjcxMTkzNSkgPDwgOCB8ICh5ICYgNDI3ODI1NTM2MCkgPj4+IDgpID4+PiAwKSAvIDQyOTQ5NjcyOTY7XG5cbiAgICAgICAgICAgIC8vIENERlxuICAgICAgICAgICAgdmFyIGNvc1RoZXRhID0gTWF0aC5zcXJ0KCgxIC0geSkgLyAoMSArIChhICogYSAtIDEuMCkgKiB5KSk7XG4gICAgICAgICAgICB0bXBbaV0gPSBjb3NUaGV0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2FtcGxlU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0ID0gKGkgKiByb3VnaG5lc3NMZXZlbHMgKyBqKSAqIDQ7XG4gICAgICAgICAgICB2YXIgY29zVGhldGEgPSB0bXBbaV07XG4gICAgICAgICAgICB2YXIgc2luVGhldGEgPSBNYXRoLnNxcnQoMS4wIC0gY29zVGhldGEgKiBjb3NUaGV0YSk7XG4gICAgICAgICAgICB2YXIgeCA9IGkgLyBzYW1wbGVTaXplO1xuICAgICAgICAgICAgdmFyIHBoaSA9IDIuMCAqIE1hdGguUEkgKiB4O1xuICAgICAgICAgICAgcGl4ZWxzW29mZnNldF0gPSBzaW5UaGV0YSAqIE1hdGguY29zKHBoaSk7XG4gICAgICAgICAgICBwaXhlbHNbb2Zmc2V0ICsgMV0gPSBjb3NUaGV0YTtcbiAgICAgICAgICAgIHBpeGVsc1tvZmZzZXQgKyAyXSA9IHNpblRoZXRhICogTWF0aC5zaW4ocGhpKTtcbiAgICAgICAgICAgIHBpeGVsc1tvZmZzZXQgKyAzXSA9IDEuMDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBub3JtYWxEaXN0cmlidXRpb24ucGl4ZWxzID0gcGl4ZWxzO1xuXG4gICAgcmV0dXJuIG5vcm1hbERpc3RyaWJ1dGlvbjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGN1YmVtYXBVdGlsO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvY3ViZW1hcC5qc1xuLy8gbW9kdWxlIGlkID0gOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///93\n");

/***/ }),
/* 94 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TextureCube__ = __webpack_require__(23);\n\n\n\n\n// http://msdn.microsoft.com/en-us/library/windows/desktop/bb943991(v=vs.85).aspx\n// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\nvar DDS_MAGIC = 0x20534444;\n\nvar DDSD_CAPS = 0x1;\nvar DDSD_HEIGHT = 0x2;\nvar DDSD_WIDTH = 0x4;\nvar DDSD_PITCH = 0x8;\nvar DDSD_PIXELFORMAT = 0x1000;\nvar DDSD_MIPMAPCOUNT = 0x20000;\nvar DDSD_LINEARSIZE = 0x80000;\nvar DDSD_DEPTH = 0x800000;\n\nvar DDSCAPS_COMPLEX = 0x8;\nvar DDSCAPS_MIPMAP = 0x400000;\nvar DDSCAPS_TEXTURE = 0x1000;\n\nvar DDSCAPS2_CUBEMAP = 0x200;\nvar DDSCAPS2_CUBEMAP_POSITIVEX = 0x400;\nvar DDSCAPS2_CUBEMAP_NEGATIVEX = 0x800;\nvar DDSCAPS2_CUBEMAP_POSITIVEY = 0x1000;\nvar DDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000;\nvar DDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000;\nvar DDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000;\nvar DDSCAPS2_VOLUME = 0x200000;\n\nvar DDPF_ALPHAPIXELS = 0x1;\nvar DDPF_ALPHA = 0x2;\nvar DDPF_FOURCC = 0x4;\nvar DDPF_RGB = 0x40;\nvar DDPF_YUV = 0x200;\nvar DDPF_LUMINANCE = 0x20000;\n\nfunction fourCCToInt32(value) {\n    return value.charCodeAt(0) +\n        (value.charCodeAt(1) << 8) +\n        (value.charCodeAt(2) << 16) +\n        (value.charCodeAt(3) << 24);\n}\n\nfunction int32ToFourCC(value) {\n    return String.fromCharCode(\n        value & 0xff,\n        (value >> 8) & 0xff,\n        (value >> 16) & 0xff,\n        (value >> 24) & 0xff\n    );\n}\n\nvar headerLengthInt = 31; // The header length in 32 bit ints\n\nvar FOURCC_DXT1 = fourCCToInt32('DXT1');\nvar FOURCC_DXT3 = fourCCToInt32('DXT3');\nvar FOURCC_DXT5 = fourCCToInt32('DXT5');\n// Offsets into the header array\nvar off_magic = 0;\n\nvar off_size = 1;\nvar off_flags = 2;\nvar off_height = 3;\nvar off_width = 4;\n\nvar off_mipmapCount = 7;\n\nvar off_pfFlags = 20;\nvar off_pfFourCC = 21;\n\nvar off_caps = 27;\nvar off_caps2 = 28;\nvar off_caps3 = 29;\nvar off_caps4 = 30;\n\nvar ret = {\n    parse: function(arraybuffer, out) {\n        var header = new Int32Array(arraybuffer, 0, headerLengthInt);\n        if (header[off_magic] !== DDS_MAGIC) {\n            return null;\n        }\n        if (!header(off_pfFlags) & DDPF_FOURCC) {\n            return null;\n        }\n\n        var fourCC = header(off_pfFourCC);\n        var width = header[off_width];\n        var height = header[off_height];\n        var isCubeMap = header[off_caps2] & DDSCAPS2_CUBEMAP;\n        var hasMipmap = header[off_flags] & DDSD_MIPMAPCOUNT;\n        var blockBytes, internalFormat;\n        switch(fourCC) {\n            case FOURCC_DXT1:\n                blockBytes = 8;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGB_S3TC_DXT1_EXT;\n                break;\n            case FOURCC_DXT3:\n                blockBytes = 16;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT3_EXT;\n                break;\n            case FOURCC_DXT5:\n                blockBytes = 16;\n                internalFormat = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].COMPRESSED_RGBA_S3TC_DXT5_EXT;\n                break;\n            default:\n                return null;\n        }\n        var dataOffset = header[off_size] + 4;\n        // TODO: Suppose all face are existed\n        var faceNumber = isCubeMap ? 6 : 1;\n        var mipmapCount = 1;\n        if (hasMipmap) {\n            mipmapCount = Math.max(1, header[off_mipmapCount]);\n        }\n\n        var textures = [];\n        for (var f = 0; f < faceNumber; f++) {\n            var _width = width;\n            var _height = height;\n            textures[f] = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n                width: _width,\n                height: _height,\n                format: internalFormat\n            });\n            var mipmaps = [];\n            for (var i = 0; i < mipmapCount; i++) {\n                var dataLength = Math.max(4, _width) / 4 * Math.max(4, _height) / 4 * blockBytes;\n                var byteArray = new Uint8Array(arraybuffer, dataOffset, dataLength);\n\n                dataOffset += dataLength;\n                _width *= 0.5;\n                _height *= 0.5;\n                mipmaps[i] = byteArray;\n            }\n            textures[f].pixels = mipmaps[0];\n            if (hasMipmap) {\n                textures[f].mipmaps = mipmaps;\n            }\n        }\n        // TODO\n        // return isCubeMap ? textures : textures[0];\n        if (out) {\n            out.width = textures[0].width;\n            out.height = textures[0].height;\n            out.format = textures[0].format;\n            out.pixels = textures[0].pixels;\n            out.mipmaps = textures[0].mipmaps;\n        }\n        else {\n            return textures[0];\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ret);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvZGRzLmpzPzkwZjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi4vVGV4dHVyZUN1YmUnO1xuXG4vLyBodHRwOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvd2luZG93cy9kZXNrdG9wL2JiOTQzOTkxKHY9dnMuODUpLmFzcHhcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS90b2ppL3dlYmdsLXRleHR1cmUtdXRpbHMvYmxvYi9tYXN0ZXIvdGV4dHVyZS11dGlsL2Rkcy5qc1xudmFyIEREU19NQUdJQyA9IDB4MjA1MzQ0NDQ7XG5cbnZhciBERFNEX0NBUFMgPSAweDE7XG52YXIgRERTRF9IRUlHSFQgPSAweDI7XG52YXIgRERTRF9XSURUSCA9IDB4NDtcbnZhciBERFNEX1BJVENIID0gMHg4O1xudmFyIEREU0RfUElYRUxGT1JNQVQgPSAweDEwMDA7XG52YXIgRERTRF9NSVBNQVBDT1VOVCA9IDB4MjAwMDA7XG52YXIgRERTRF9MSU5FQVJTSVpFID0gMHg4MDAwMDtcbnZhciBERFNEX0RFUFRIID0gMHg4MDAwMDA7XG5cbnZhciBERFNDQVBTX0NPTVBMRVggPSAweDg7XG52YXIgRERTQ0FQU19NSVBNQVAgPSAweDQwMDAwMDtcbnZhciBERFNDQVBTX1RFWFRVUkUgPSAweDEwMDA7XG5cbnZhciBERFNDQVBTMl9DVUJFTUFQID0gMHgyMDA7XG52YXIgRERTQ0FQUzJfQ1VCRU1BUF9QT1NJVElWRVggPSAweDQwMDtcbnZhciBERFNDQVBTMl9DVUJFTUFQX05FR0FUSVZFWCA9IDB4ODAwO1xudmFyIEREU0NBUFMyX0NVQkVNQVBfUE9TSVRJVkVZID0gMHgxMDAwO1xudmFyIEREU0NBUFMyX0NVQkVNQVBfTkVHQVRJVkVZID0gMHgyMDAwO1xudmFyIEREU0NBUFMyX0NVQkVNQVBfUE9TSVRJVkVaID0gMHg0MDAwO1xudmFyIEREU0NBUFMyX0NVQkVNQVBfTkVHQVRJVkVaID0gMHg4MDAwO1xudmFyIEREU0NBUFMyX1ZPTFVNRSA9IDB4MjAwMDAwO1xuXG52YXIgRERQRl9BTFBIQVBJWEVMUyA9IDB4MTtcbnZhciBERFBGX0FMUEhBID0gMHgyO1xudmFyIEREUEZfRk9VUkNDID0gMHg0O1xudmFyIEREUEZfUkdCID0gMHg0MDtcbnZhciBERFBGX1lVViA9IDB4MjAwO1xudmFyIEREUEZfTFVNSU5BTkNFID0gMHgyMDAwMDtcblxuZnVuY3Rpb24gZm91ckNDVG9JbnQzMih2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZS5jaGFyQ29kZUF0KDApICtcbiAgICAgICAgKHZhbHVlLmNoYXJDb2RlQXQoMSkgPDwgOCkgK1xuICAgICAgICAodmFsdWUuY2hhckNvZGVBdCgyKSA8PCAxNikgK1xuICAgICAgICAodmFsdWUuY2hhckNvZGVBdCgzKSA8PCAyNCk7XG59XG5cbmZ1bmN0aW9uIGludDMyVG9Gb3VyQ0ModmFsdWUpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAgICAgdmFsdWUgJiAweGZmLFxuICAgICAgICAodmFsdWUgPj4gOCkgJiAweGZmLFxuICAgICAgICAodmFsdWUgPj4gMTYpICYgMHhmZixcbiAgICAgICAgKHZhbHVlID4+IDI0KSAmIDB4ZmZcbiAgICApO1xufVxuXG52YXIgaGVhZGVyTGVuZ3RoSW50ID0gMzE7IC8vIFRoZSBoZWFkZXIgbGVuZ3RoIGluIDMyIGJpdCBpbnRzXG5cbnZhciBGT1VSQ0NfRFhUMSA9IGZvdXJDQ1RvSW50MzIoJ0RYVDEnKTtcbnZhciBGT1VSQ0NfRFhUMyA9IGZvdXJDQ1RvSW50MzIoJ0RYVDMnKTtcbnZhciBGT1VSQ0NfRFhUNSA9IGZvdXJDQ1RvSW50MzIoJ0RYVDUnKTtcbi8vIE9mZnNldHMgaW50byB0aGUgaGVhZGVyIGFycmF5XG52YXIgb2ZmX21hZ2ljID0gMDtcblxudmFyIG9mZl9zaXplID0gMTtcbnZhciBvZmZfZmxhZ3MgPSAyO1xudmFyIG9mZl9oZWlnaHQgPSAzO1xudmFyIG9mZl93aWR0aCA9IDQ7XG5cbnZhciBvZmZfbWlwbWFwQ291bnQgPSA3O1xuXG52YXIgb2ZmX3BmRmxhZ3MgPSAyMDtcbnZhciBvZmZfcGZGb3VyQ0MgPSAyMTtcblxudmFyIG9mZl9jYXBzID0gMjc7XG52YXIgb2ZmX2NhcHMyID0gMjg7XG52YXIgb2ZmX2NhcHMzID0gMjk7XG52YXIgb2ZmX2NhcHM0ID0gMzA7XG5cbnZhciByZXQgPSB7XG4gICAgcGFyc2U6IGZ1bmN0aW9uKGFycmF5YnVmZmVyLCBvdXQpIHtcbiAgICAgICAgdmFyIGhlYWRlciA9IG5ldyBJbnQzMkFycmF5KGFycmF5YnVmZmVyLCAwLCBoZWFkZXJMZW5ndGhJbnQpO1xuICAgICAgICBpZiAoaGVhZGVyW29mZl9tYWdpY10gIT09IEREU19NQUdJQykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFoZWFkZXIob2ZmX3BmRmxhZ3MpICYgRERQRl9GT1VSQ0MpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZvdXJDQyA9IGhlYWRlcihvZmZfcGZGb3VyQ0MpO1xuICAgICAgICB2YXIgd2lkdGggPSBoZWFkZXJbb2ZmX3dpZHRoXTtcbiAgICAgICAgdmFyIGhlaWdodCA9IGhlYWRlcltvZmZfaGVpZ2h0XTtcbiAgICAgICAgdmFyIGlzQ3ViZU1hcCA9IGhlYWRlcltvZmZfY2FwczJdICYgRERTQ0FQUzJfQ1VCRU1BUDtcbiAgICAgICAgdmFyIGhhc01pcG1hcCA9IGhlYWRlcltvZmZfZmxhZ3NdICYgRERTRF9NSVBNQVBDT1VOVDtcbiAgICAgICAgdmFyIGJsb2NrQnl0ZXMsIGludGVybmFsRm9ybWF0O1xuICAgICAgICBzd2l0Y2goZm91ckNDKSB7XG4gICAgICAgICAgICBjYXNlIEZPVVJDQ19EWFQxOlxuICAgICAgICAgICAgICAgIGJsb2NrQnl0ZXMgPSA4O1xuICAgICAgICAgICAgICAgIGludGVybmFsRm9ybWF0ID0gVGV4dHVyZS5DT01QUkVTU0VEX1JHQl9TM1RDX0RYVDFfRVhUO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGT1VSQ0NfRFhUMzpcbiAgICAgICAgICAgICAgICBibG9ja0J5dGVzID0gMTY7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxGb3JtYXQgPSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDNfRVhUO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBGT1VSQ0NfRFhUNTpcbiAgICAgICAgICAgICAgICBibG9ja0J5dGVzID0gMTY7XG4gICAgICAgICAgICAgICAgaW50ZXJuYWxGb3JtYXQgPSBUZXh0dXJlLkNPTVBSRVNTRURfUkdCQV9TM1RDX0RYVDVfRVhUO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YU9mZnNldCA9IGhlYWRlcltvZmZfc2l6ZV0gKyA0O1xuICAgICAgICAvLyBUT0RPOiBTdXBwb3NlIGFsbCBmYWNlIGFyZSBleGlzdGVkXG4gICAgICAgIHZhciBmYWNlTnVtYmVyID0gaXNDdWJlTWFwID8gNiA6IDE7XG4gICAgICAgIHZhciBtaXBtYXBDb3VudCA9IDE7XG4gICAgICAgIGlmIChoYXNNaXBtYXApIHtcbiAgICAgICAgICAgIG1pcG1hcENvdW50ID0gTWF0aC5tYXgoMSwgaGVhZGVyW29mZl9taXBtYXBDb3VudF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHRleHR1cmVzID0gW107XG4gICAgICAgIGZvciAodmFyIGYgPSAwOyBmIDwgZmFjZU51bWJlcjsgZisrKSB7XG4gICAgICAgICAgICB2YXIgX3dpZHRoID0gd2lkdGg7XG4gICAgICAgICAgICB2YXIgX2hlaWdodCA9IGhlaWdodDtcbiAgICAgICAgICAgIHRleHR1cmVzW2ZdID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICAgICAgd2lkdGg6IF93aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IF9oZWlnaHQsXG4gICAgICAgICAgICAgICAgZm9ybWF0OiBpbnRlcm5hbEZvcm1hdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgbWlwbWFwcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtaXBtYXBDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFMZW5ndGggPSBNYXRoLm1heCg0LCBfd2lkdGgpIC8gNCAqIE1hdGgubWF4KDQsIF9oZWlnaHQpIC8gNCAqIGJsb2NrQnl0ZXM7XG4gICAgICAgICAgICAgICAgdmFyIGJ5dGVBcnJheSA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyLCBkYXRhT2Zmc2V0LCBkYXRhTGVuZ3RoKTtcblxuICAgICAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gZGF0YUxlbmd0aDtcbiAgICAgICAgICAgICAgICBfd2lkdGggKj0gMC41O1xuICAgICAgICAgICAgICAgIF9oZWlnaHQgKj0gMC41O1xuICAgICAgICAgICAgICAgIG1pcG1hcHNbaV0gPSBieXRlQXJyYXk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ZXh0dXJlc1tmXS5waXhlbHMgPSBtaXBtYXBzWzBdO1xuICAgICAgICAgICAgaWYgKGhhc01pcG1hcCkge1xuICAgICAgICAgICAgICAgIHRleHR1cmVzW2ZdLm1pcG1hcHMgPSBtaXBtYXBzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgLy8gcmV0dXJuIGlzQ3ViZU1hcCA/IHRleHR1cmVzIDogdGV4dHVyZXNbMF07XG4gICAgICAgIGlmIChvdXQpIHtcbiAgICAgICAgICAgIG91dC53aWR0aCA9IHRleHR1cmVzWzBdLndpZHRoO1xuICAgICAgICAgICAgb3V0LmhlaWdodCA9IHRleHR1cmVzWzBdLmhlaWdodDtcbiAgICAgICAgICAgIG91dC5mb3JtYXQgPSB0ZXh0dXJlc1swXS5mb3JtYXQ7XG4gICAgICAgICAgICBvdXQucGl4ZWxzID0gdGV4dHVyZXNbMF0ucGl4ZWxzO1xuICAgICAgICAgICAgb3V0Lm1pcG1hcHMgPSB0ZXh0dXJlc1swXS5taXBtYXBzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRleHR1cmVzWzBdO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgcmV0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvZGRzLmpzXG4vLyBtb2R1bGUgaWQgPSA5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///94\n");

/***/ }),
/* 95 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n\n\nvar toChar = String.fromCharCode;\n\nvar MINELEN = 8;\nvar MAXELEN = 0x7fff;\nfunction rgbe2float(rgbe, buffer, offset, exposure) {\n    if (rgbe[3] > 0) {\n        var f = Math.pow(2.0, rgbe[3] - 128 - 8 + exposure);\n        buffer[offset + 0] = rgbe[0] * f;\n        buffer[offset + 1] = rgbe[1] * f;\n        buffer[offset + 2] = rgbe[2] * f;\n    }\n    else {\n        buffer[offset + 0] = 0;\n        buffer[offset + 1] = 0;\n        buffer[offset + 2] = 0;\n    }\n    buffer[offset + 3] = 1.0;\n    return buffer;\n}\n\nfunction uint82string(array, offset, size) {\n    var str = '';\n    for (var i = offset; i < size; i++) {\n        str += toChar(array[i]);\n    }\n    return str;\n}\n\nfunction copyrgbe(s, t) {\n    t[0] = s[0];\n    t[1] = s[1];\n    t[2] = s[2];\n    t[3] = s[3];\n}\n\n// TODO : check\nfunction oldReadColors(scan, buffer, offset, xmax) {\n    var rshift = 0, x = 0, len = xmax;\n    while (len > 0) {\n        scan[x][0] = buffer[offset++];\n        scan[x][1] = buffer[offset++];\n        scan[x][2] = buffer[offset++];\n        scan[x][3] = buffer[offset++];\n        if (scan[x][0] === 1 && scan[x][1] === 1 && scan[x][2] === 1) {\n            // exp is count of repeated pixels\n            for (var i = (scan[x][3] << rshift) >>> 0; i > 0; i--) {\n                copyrgbe(scan[x-1], scan[x]);\n                x++;\n                len--;\n            }\n            rshift += 8;\n        } else {\n            x++;\n            len--;\n            rshift = 0;\n        }\n    }\n    return offset;\n}\n\nfunction readColors(scan, buffer, offset, xmax) {\n    if ((xmax < MINELEN) | (xmax > MAXELEN)) {\n        return oldReadColors(scan, buffer, offset, xmax);\n    }\n    var i = buffer[offset++];\n    if (i != 2) {\n        return oldReadColors(scan, buffer, offset - 1, xmax);\n    }\n    scan[0][1] = buffer[offset++];\n    scan[0][2] = buffer[offset++];\n\n    i = buffer[offset++];\n    if ((((scan[0][2] << 8) >>> 0) | i) >>> 0 !== xmax) {\n        return null;\n    }\n    for (var i = 0; i < 4; i++) {\n        for (var x = 0; x < xmax;) {\n            var code = buffer[offset++];\n            if (code > 128) {\n                code = (code & 127) >>> 0;\n                var val = buffer[offset++];\n                while (code--) {\n                    scan[x++][i] = val;\n                }\n            } else {\n                while (code--) {\n                    scan[x++][i] = buffer[offset++];\n                }\n            }\n        }\n    }\n    return offset;\n}\n\n\nvar ret = {\n    // http://www.graphics.cornell.edu/~bjw/rgbe.html\n    // Blender source\n    // http://radsite.lbl.gov/radiance/refer/Notes/picture_format.html\n    parseRGBE: function(arrayBuffer, texture, exposure) {\n        if (exposure == null) {\n            exposure = 0;\n        }\n        var data = new Uint8Array(arrayBuffer);\n        var size = data.length;\n        if (uint82string(data, 0, 2) !== '#?') {\n            return;\n        }\n        // find empty line, next line is resolution info\n        for (var i = 2; i < size; i++) {\n            if (toChar(data[i]) === '\\n' && toChar(data[i+1]) === '\\n') {\n                break;\n            }\n        }\n        if (i >= size) { // not found\n            return;\n        }\n        // find resolution info line\n        i += 2;\n        var str = '';\n        for (; i < size; i++) {\n            var _char = toChar(data[i]);\n            if (_char === '\\n') {\n                break;\n            }\n            str += _char;\n        }\n        // -Y M +X N\n        var tmp = str.split(' ');\n        var height = parseInt(tmp[1]);\n        var width = parseInt(tmp[3]);\n        if (!width || !height) {\n            return;\n        }\n\n        // read and decode actual data\n        var offset = i+1;\n        var scanline = [];\n        // memzero\n        for (var x = 0; x < width; x++) {\n            scanline[x] = [];\n            for (var j = 0; j < 4; j++) {\n                scanline[x][j] = 0;\n            }\n        }\n        var pixels = new Float32Array(width * height * 4);\n        var offset2 = 0;\n        for (var y = 0; y < height; y++) {\n            var offset = readColors(scanline, data, offset, width);\n            if (!offset) {\n                return null;\n            }\n            for (var x = 0; x < width; x++) {\n                rgbe2float(scanline[x], pixels, offset2, exposure);\n                offset2 += 4;\n            }\n        }\n\n        if (!texture) {\n            texture = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]();\n        }\n        texture.width = width;\n        texture.height = height;\n        texture.pixels = pixels;\n        // HALF_FLOAT can't use Float32Array\n        texture.type = __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT;\n        return texture;\n    },\n\n    parseRGBEFromPNG: function(png) {\n\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ret);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvaGRyLmpzP2I5YTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG52YXIgdG9DaGFyID0gU3RyaW5nLmZyb21DaGFyQ29kZTtcblxudmFyIE1JTkVMRU4gPSA4O1xudmFyIE1BWEVMRU4gPSAweDdmZmY7XG5mdW5jdGlvbiByZ2JlMmZsb2F0KHJnYmUsIGJ1ZmZlciwgb2Zmc2V0LCBleHBvc3VyZSkge1xuICAgIGlmIChyZ2JlWzNdID4gMCkge1xuICAgICAgICB2YXIgZiA9IE1hdGgucG93KDIuMCwgcmdiZVszXSAtIDEyOCAtIDggKyBleHBvc3VyZSk7XG4gICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAwXSA9IHJnYmVbMF0gKiBmO1xuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSByZ2JlWzFdICogZjtcbiAgICAgICAgYnVmZmVyW29mZnNldCArIDJdID0gcmdiZVsyXSAqIGY7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMF0gPSAwO1xuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAwO1xuICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMl0gPSAwO1xuICAgIH1cbiAgICBidWZmZXJbb2Zmc2V0ICsgM10gPSAxLjA7XG4gICAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZnVuY3Rpb24gdWludDgyc3RyaW5nKGFycmF5LCBvZmZzZXQsIHNpemUpIHtcbiAgICB2YXIgc3RyID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IG9mZnNldDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICBzdHIgKz0gdG9DaGFyKGFycmF5W2ldKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gY29weXJnYmUocywgdCkge1xuICAgIHRbMF0gPSBzWzBdO1xuICAgIHRbMV0gPSBzWzFdO1xuICAgIHRbMl0gPSBzWzJdO1xuICAgIHRbM10gPSBzWzNdO1xufVxuXG4vLyBUT0RPIDogY2hlY2tcbmZ1bmN0aW9uIG9sZFJlYWRDb2xvcnMoc2NhbiwgYnVmZmVyLCBvZmZzZXQsIHhtYXgpIHtcbiAgICB2YXIgcnNoaWZ0ID0gMCwgeCA9IDAsIGxlbiA9IHhtYXg7XG4gICAgd2hpbGUgKGxlbiA+IDApIHtcbiAgICAgICAgc2Nhblt4XVswXSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgIHNjYW5beF1bMV0gPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgICAgICBzY2FuW3hdWzJdID0gYnVmZmVyW29mZnNldCsrXTtcbiAgICAgICAgc2Nhblt4XVszXSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgIGlmIChzY2FuW3hdWzBdID09PSAxICYmIHNjYW5beF1bMV0gPT09IDEgJiYgc2Nhblt4XVsyXSA9PT0gMSkge1xuICAgICAgICAgICAgLy8gZXhwIGlzIGNvdW50IG9mIHJlcGVhdGVkIHBpeGVsc1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IChzY2FuW3hdWzNdIDw8IHJzaGlmdCkgPj4+IDA7IGkgPiAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICBjb3B5cmdiZShzY2FuW3gtMV0sIHNjYW5beF0pO1xuICAgICAgICAgICAgICAgIHgrKztcbiAgICAgICAgICAgICAgICBsZW4tLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJzaGlmdCArPSA4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgeCsrO1xuICAgICAgICAgICAgbGVuLS07XG4gICAgICAgICAgICByc2hpZnQgPSAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRDb2xvcnMoc2NhbiwgYnVmZmVyLCBvZmZzZXQsIHhtYXgpIHtcbiAgICBpZiAoKHhtYXggPCBNSU5FTEVOKSB8ICh4bWF4ID4gTUFYRUxFTikpIHtcbiAgICAgICAgcmV0dXJuIG9sZFJlYWRDb2xvcnMoc2NhbiwgYnVmZmVyLCBvZmZzZXQsIHhtYXgpO1xuICAgIH1cbiAgICB2YXIgaSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgaWYgKGkgIT0gMikge1xuICAgICAgICByZXR1cm4gb2xkUmVhZENvbG9ycyhzY2FuLCBidWZmZXIsIG9mZnNldCAtIDEsIHhtYXgpO1xuICAgIH1cbiAgICBzY2FuWzBdWzFdID0gYnVmZmVyW29mZnNldCsrXTtcbiAgICBzY2FuWzBdWzJdID0gYnVmZmVyW29mZnNldCsrXTtcblxuICAgIGkgPSBidWZmZXJbb2Zmc2V0KytdO1xuICAgIGlmICgoKChzY2FuWzBdWzJdIDw8IDgpID4+PiAwKSB8IGkpID4+PiAwICE9PSB4bWF4KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHhtYXg7KSB7XG4gICAgICAgICAgICB2YXIgY29kZSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgICBpZiAoY29kZSA+IDEyOCkge1xuICAgICAgICAgICAgICAgIGNvZGUgPSAoY29kZSAmIDEyNykgPj4+IDA7XG4gICAgICAgICAgICAgICAgdmFyIHZhbCA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgICAgICAgd2hpbGUgKGNvZGUtLSkge1xuICAgICAgICAgICAgICAgICAgICBzY2FuW3grK11baV0gPSB2YWw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB3aGlsZSAoY29kZS0tKSB7XG4gICAgICAgICAgICAgICAgICAgIHNjYW5beCsrXVtpXSA9IGJ1ZmZlcltvZmZzZXQrK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvZmZzZXQ7XG59XG5cblxudmFyIHJldCA9IHtcbiAgICAvLyBodHRwOi8vd3d3LmdyYXBoaWNzLmNvcm5lbGwuZWR1L35iancvcmdiZS5odG1sXG4gICAgLy8gQmxlbmRlciBzb3VyY2VcbiAgICAvLyBodHRwOi8vcmFkc2l0ZS5sYmwuZ292L3JhZGlhbmNlL3JlZmVyL05vdGVzL3BpY3R1cmVfZm9ybWF0Lmh0bWxcbiAgICBwYXJzZVJHQkU6IGZ1bmN0aW9uKGFycmF5QnVmZmVyLCB0ZXh0dXJlLCBleHBvc3VyZSkge1xuICAgICAgICBpZiAoZXhwb3N1cmUgPT0gbnVsbCkge1xuICAgICAgICAgICAgZXhwb3N1cmUgPSAwO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlCdWZmZXIpO1xuICAgICAgICB2YXIgc2l6ZSA9IGRhdGEubGVuZ3RoO1xuICAgICAgICBpZiAodWludDgyc3RyaW5nKGRhdGEsIDAsIDIpICE9PSAnIz8nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmluZCBlbXB0eSBsaW5lLCBuZXh0IGxpbmUgaXMgcmVzb2x1dGlvbiBpbmZvXG4gICAgICAgIGZvciAodmFyIGkgPSAyOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodG9DaGFyKGRhdGFbaV0pID09PSAnXFxuJyAmJiB0b0NoYXIoZGF0YVtpKzFdKSA9PT0gJ1xcbicpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoaSA+PSBzaXplKSB7IC8vIG5vdCBmb3VuZFxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIGZpbmQgcmVzb2x1dGlvbiBpbmZvIGxpbmVcbiAgICAgICAgaSArPSAyO1xuICAgICAgICB2YXIgc3RyID0gJyc7XG4gICAgICAgIGZvciAoOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgX2NoYXIgPSB0b0NoYXIoZGF0YVtpXSk7XG4gICAgICAgICAgICBpZiAoX2NoYXIgPT09ICdcXG4nKSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzdHIgKz0gX2NoYXI7XG4gICAgICAgIH1cbiAgICAgICAgLy8gLVkgTSArWCBOXG4gICAgICAgIHZhciB0bXAgPSBzdHIuc3BsaXQoJyAnKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IHBhcnNlSW50KHRtcFsxXSk7XG4gICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KHRtcFszXSk7XG4gICAgICAgIGlmICghd2lkdGggfHwgIWhlaWdodCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVhZCBhbmQgZGVjb2RlIGFjdHVhbCBkYXRhXG4gICAgICAgIHZhciBvZmZzZXQgPSBpKzE7XG4gICAgICAgIHZhciBzY2FubGluZSA9IFtdO1xuICAgICAgICAvLyBtZW16ZXJvXG4gICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgc2NhbmxpbmVbeF0gPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNDsgaisrKSB7XG4gICAgICAgICAgICAgICAgc2NhbmxpbmVbeF1bal0gPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBwaXhlbHMgPSBuZXcgRmxvYXQzMkFycmF5KHdpZHRoICogaGVpZ2h0ICogNCk7XG4gICAgICAgIHZhciBvZmZzZXQyID0gMDtcbiAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBoZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHJlYWRDb2xvcnMoc2NhbmxpbmUsIGRhdGEsIG9mZnNldCwgd2lkdGgpO1xuICAgICAgICAgICAgaWYgKCFvZmZzZXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykge1xuICAgICAgICAgICAgICAgIHJnYmUyZmxvYXQoc2NhbmxpbmVbeF0sIHBpeGVscywgb2Zmc2V0MiwgZXhwb3N1cmUpO1xuICAgICAgICAgICAgICAgIG9mZnNldDIgKz0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICAgICAgdGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoKTtcbiAgICAgICAgfVxuICAgICAgICB0ZXh0dXJlLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRleHR1cmUuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0ZXh0dXJlLnBpeGVscyA9IHBpeGVscztcbiAgICAgICAgLy8gSEFMRl9GTE9BVCBjYW4ndCB1c2UgRmxvYXQzMkFycmF5XG4gICAgICAgIHRleHR1cmUudHlwZSA9IFRleHR1cmUuRkxPQVQ7XG4gICAgICAgIHJldHVybiB0ZXh0dXJlO1xuICAgIH0sXG5cbiAgICBwYXJzZVJHQkVGcm9tUE5HOiBmdW5jdGlvbihwbmcpIHtcblxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJldDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL2hkci5qc1xuLy8gbW9kdWxlIGlkID0gOTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///95\n");

/***/ }),
/* 96 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n\n\n\n/**\n * Spherical Harmonic Ambient Light\n * @constructor clay.light.AmbientSH\n * @extends clay.Light\n */\nvar AmbientSHLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend({\n\n    castShadow: false,\n\n    /**\n     * Spherical Harmonic Coefficients\n     * @type {Array.<number>}\n     * @memberOf clay.light.AmbientSH#\n     */\n    coefficients: [],\n\n}, function () {\n    this._coefficientsTmpArr = new __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n}, {\n\n    type: 'AMBIENT_SH_LIGHT',\n\n    uniformTemplates: {\n        ambientSHLightColor: {\n            type: '3f',\n            value: function (instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0] * intensity, color[1] * intensity, color[2] * intensity];\n            }\n        },\n\n        ambientSHLightCoefficients: {\n            type: '3f',\n            value: function (instance) {\n                var coefficientsTmpArr = instance._coefficientsTmpArr;\n                for (var i = 0; i < instance.coefficients.length; i++) {\n                    coefficientsTmpArr[i] = instance.coefficients[i];\n                }\n                return coefficientsTmpArr;\n            }\n        }\n    }\n    /**\n     * @function\n     * @name clone\n     * @return {clay.light.Ambient}\n     * @memberOf clay.light.Ambient.prototype\n     */\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (AmbientSHLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0FtYmllbnRTSC5qcz82NjJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBMaWdodCBmcm9tICcuLi9MaWdodCc7XG5pbXBvcnQgdmVuZG9yIGZyb20gJy4uL2NvcmUvdmVuZG9yJztcblxuLyoqXG4gKiBTcGhlcmljYWwgSGFybW9uaWMgQW1iaWVudCBMaWdodFxuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuQW1iaWVudFNIXG4gKiBAZXh0ZW5kcyBjbGF5LkxpZ2h0XG4gKi9cbnZhciBBbWJpZW50U0hMaWdodCA9IExpZ2h0LmV4dGVuZCh7XG5cbiAgICBjYXN0U2hhZG93OiBmYWxzZSxcblxuICAgIC8qKlxuICAgICAqIFNwaGVyaWNhbCBIYXJtb25pYyBDb2VmZmljaWVudHNcbiAgICAgKiBAdHlwZSB7QXJyYXkuPG51bWJlcj59XG4gICAgICogQG1lbWJlck9mIGNsYXkubGlnaHQuQW1iaWVudFNII1xuICAgICAqL1xuICAgIGNvZWZmaWNpZW50czogW10sXG5cbn0sIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jb2VmZmljaWVudHNUbXBBcnIgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheSg5ICogMyk7XG59LCB7XG5cbiAgICB0eXBlOiAnQU1CSUVOVF9TSF9MSUdIVCcsXG5cbiAgICB1bmlmb3JtVGVtcGxhdGVzOiB7XG4gICAgICAgIGFtYmllbnRTSExpZ2h0Q29sb3I6IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdICogaW50ZW5zaXR5LCBjb2xvclsxXSAqIGludGVuc2l0eSwgY29sb3JbMl0gKiBpbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHZhciBjb2VmZmljaWVudHNUbXBBcnIgPSBpbnN0YW5jZS5fY29lZmZpY2llbnRzVG1wQXJyO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5zdGFuY2UuY29lZmZpY2llbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZWZmaWNpZW50c1RtcEFycltpXSA9IGluc3RhbmNlLmNvZWZmaWNpZW50c1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZWZmaWNpZW50c1RtcEFycjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZnVuY3Rpb25cbiAgICAgKiBAbmFtZSBjbG9uZVxuICAgICAqIEByZXR1cm4ge2NsYXkubGlnaHQuQW1iaWVudH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5saWdodC5BbWJpZW50LnByb3RvdHlwZVxuICAgICAqL1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFtYmllbnRTSExpZ2h0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L0FtYmllbnRTSC5qc1xuLy8gbW9kdWxlIGlkID0gOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///96\n");

/***/ }),
/* 97 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Frustum__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__compositor_TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__shader_source_shadowmap_glsl_js__ = __webpack_require__(140);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n\n__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_18__shader_source_shadowmap_glsl_js__[\"a\" /* default */]);\n\nfunction getDepthMaterialUniform(renderable, depthMaterial, symbol) {\n    if (symbol === 'alphaMap') {\n        return renderable.material.get('diffuseMap');\n    }\n    else if (symbol === 'alphaCutoff') {\n        if (renderable.material.isDefined('fragment', 'ALPHA_TEST')\n            && renderable.material.get('diffuseMap')\n        ) {\n            var alphaCutoff = renderable.material.get('alphaCutoff');\n            return alphaCutoff || 0;\n        }\n        return 0;\n    }\n    else if (symbol === 'uvRepeat') {\n        return renderable.material.get('uvRepeat');\n    }\n    else if (symbol === 'uvOffset') {\n        return renderable.material.get('uvOffset');\n    }\n    else {\n        return depthMaterial.get(symbol);\n    }\n}\n\nfunction isDepthMaterialChanged(renderable, prevRenderable) {\n    var matA = renderable.material;\n    var matB = prevRenderable.material;\n    return matA.get('diffuseMap') !== matB.get('diffuseMap')\n        || (matA.get('alphaCutoff') || 0) !== (matB.get('alphaCutoff') || 0);\n}\n\n/**\n * Pass rendering shadow map.\n *\n * @constructor clay.prePass.ShadowMap\n * @extends clay.core.Base\n * @example\n *     var shadowMapPass = new clay.prePass.ShadowMap({\n *         softShadow: clay.prePass.ShadowMap.VSM\n *     });\n *     ...\n *     animation.on('frame', function (frameTime) {\n *         shadowMapPass.render(renderer, scene, camera);\n *         renderer.render(scene, camera);\n *     });\n */\nvar ShadowMapPass = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.prePass.ShadowMap# */ {\n        /**\n         * Soft shadow technique.\n         * Can be {@link clay.prePass.ShadowMap.PCF} or {@link clay.prePass.ShadowMap.VSM}\n         * @type {number}\n         */\n        softShadow: ShadowMapPass.PCF,\n\n        /**\n         * Soft shadow blur size\n         * @type {number}\n         */\n        shadowBlur: 1.0,\n\n        lightFrustumBias: 'auto',\n\n        kernelPCF: new Float32Array([\n            1, 0,\n            1, 1,\n            -1, 1,\n            0, 1,\n            -1, 0,\n            -1, -1,\n            1, -1,\n            0, -1\n        ]),\n\n        precision: 'highp',\n\n        _lastRenderNotCastShadow: false,\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_9__FrameBuffer__[\"a\" /* default */](),\n\n        _textures: {},\n        _shadowMapNumber: {\n            'POINT_LIGHT': 0,\n            'DIRECTIONAL_LIGHT': 0,\n            'SPOT_LIGHT': 0\n        },\n\n        _depthMaterials: {},\n        _distanceMaterials: {},\n\n        _receivers: [],\n        _lightsCastShadow: [],\n\n        _lightCameras: {},\n        _lightMaterials: {},\n\n        _texturePool: new __WEBPACK_IMPORTED_MODULE_16__compositor_TexturePool__[\"a\" /* default */]()\n    };\n}, function () {\n    // Gaussian filter pass for VSM\n    this._gaussianPassH = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.compositor.gaussian_blur')\n    });\n    this._gaussianPassV = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.compositor.gaussian_blur')\n    });\n    this._gaussianPassH.setUniform('blurSize', this.shadowBlur);\n    this._gaussianPassH.setUniform('blurDir', 0.0);\n    this._gaussianPassV.setUniform('blurSize', this.shadowBlur);\n    this._gaussianPassV.setUniform('blurDir', 1.0);\n\n    this._outputDepthPass = new __WEBPACK_IMPORTED_MODULE_15__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source('clay.sm.debug_depth')\n    });\n}, {\n    /**\n     * Render scene to shadow textures\n     * @param  {clay.Renderer} renderer\n     * @param  {clay.Scene} scene\n     * @param  {clay.Camera} sceneCamera\n     * @param  {boolean} [notUpdateScene=false]\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    render: function (renderer, scene, sceneCamera, notUpdateScene) {\n        if (!sceneCamera) {\n            sceneCamera = scene.getMainCamera();\n        }\n        this.trigger('beforerender', this, renderer, scene, sceneCamera);\n        this._renderShadowPass(renderer, scene, sceneCamera, notUpdateScene);\n        this.trigger('afterrender', this, renderer, scene, sceneCamera);\n    },\n\n    /**\n     * Debug rendering of shadow textures\n     * @param  {clay.Renderer} renderer\n     * @param  {number} size\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    renderDebug: function (renderer, size) {\n        renderer.saveClear();\n        var viewport = renderer.viewport;\n        var x = 0, y = 0;\n        var width = size || viewport.width / 4;\n        var height = width;\n        if (this.softShadow === ShadowMapPass.VSM) {\n            this._outputDepthPass.material.define('fragment', 'USE_VSM');\n        }\n        else {\n            this._outputDepthPass.material.undefine('fragment', 'USE_VSM');\n        }\n        for (var name in this._textures) {\n            var texture = this._textures[name];\n            renderer.setViewport(x, y, width * texture.width / texture.height, height);\n            this._outputDepthPass.setUniform('depthMap', texture);\n            this._outputDepthPass.render(renderer);\n            x += width * texture.width / texture.height;\n        }\n        renderer.setViewport(viewport);\n        renderer.restoreClear();\n    },\n\n    _updateReceivers: function (renderer, mesh) {\n        if (mesh.receiveShadow) {\n            this._receivers.push(mesh);\n            mesh.material.set('shadowEnabled', 1);\n\n            mesh.material.set('pcfKernel', this.kernelPCF);\n        }\n        else {\n            mesh.material.set('shadowEnabled', 0);\n        }\n\n        if (this.softShadow === ShadowMapPass.VSM) {\n            mesh.material.define('fragment', 'USE_VSM');\n            mesh.material.undefine('fragment', 'PCF_KERNEL_SIZE');\n        }\n        else {\n            mesh.material.undefine('fragment', 'USE_VSM');\n            var kernelPCF = this.kernelPCF;\n            if (kernelPCF && kernelPCF.length) {\n                mesh.material.define('fragment', 'PCF_KERNEL_SIZE', kernelPCF.length / 2);\n            }\n            else {\n                mesh.material.undefine('fragment', 'PCF_KERNEL_SIZE');\n            }\n        }\n    },\n\n    _update: function (renderer, scene) {\n        var self = this;\n        scene.traverse(function (renderable) {\n            if (renderable.isRenderable()) {\n                self._updateReceivers(renderer, renderable);\n            }\n        });\n\n        for (var i = 0; i < scene.lights.length; i++) {\n            var light = scene.lights[i];\n            if (light.castShadow && !light.invisible) {\n                this._lightsCastShadow.push(light);\n            }\n        }\n    },\n\n    _renderShadowPass: function (renderer, scene, sceneCamera, notUpdateScene) {\n        // reset\n        for (var name in this._shadowMapNumber) {\n            this._shadowMapNumber[name] = 0;\n        }\n        this._lightsCastShadow.length = 0;\n        this._receivers.length = 0;\n\n        var _gl = renderer.gl;\n\n        if (!notUpdateScene) {\n            scene.update();\n        }\n        if (sceneCamera) {\n            sceneCamera.update();\n        }\n\n        scene.updateLights();\n        this._update(renderer, scene);\n\n        // Needs to update the receivers again if shadows come from 1 to 0.\n        if (!this._lightsCastShadow.length && this._lastRenderNotCastShadow) {\n            return;\n        }\n\n        this._lastRenderNotCastShadow = this._lightsCastShadow === 0;\n\n        _gl.enable(_gl.DEPTH_TEST);\n        _gl.depthMask(true);\n        _gl.disable(_gl.BLEND);\n\n        // Clear with high-z, so the part not rendered will not been shadowed\n        // TODO\n        // TODO restore\n        _gl.clearColor(1.0, 1.0, 1.0, 1.0);\n\n        // Shadow uniforms\n        var spotLightShadowMaps = [];\n        var spotLightMatrices = [];\n        var directionalLightShadowMaps = [];\n        var directionalLightMatrices = [];\n        var shadowCascadeClips = [];\n        var pointLightShadowMaps = [];\n\n        var dirLightHasCascade;\n        // Create textures for shadow map\n        for (var i = 0; i < this._lightsCastShadow.length; i++) {\n            var light = this._lightsCastShadow[i];\n            if (light.type === 'DIRECTIONAL_LIGHT') {\n\n                if (dirLightHasCascade) {\n                    console.warn('Only one direectional light supported with shadow cascade');\n                    continue;\n                }\n                if (light.shadowCascade > 4) {\n                    console.warn('Support at most 4 cascade');\n                    continue;\n                }\n                if (light.shadowCascade > 1) {\n                    dirLightHasCascade = light;\n                }\n\n                this.renderDirectionalLightShadow(\n                    renderer,\n                    scene,\n                    sceneCamera,\n                    light,\n                    shadowCascadeClips,\n                    directionalLightMatrices,\n                    directionalLightShadowMaps\n                );\n            }\n            else if (light.type === 'SPOT_LIGHT') {\n                this.renderSpotLightShadow(\n                    renderer,\n                    scene,\n                    light,\n                    spotLightMatrices,\n                    spotLightShadowMaps\n                );\n            }\n            else if (light.type === 'POINT_LIGHT') {\n                this.renderPointLightShadow(\n                    renderer,\n                    scene,\n                    light,\n                    pointLightShadowMaps\n                );\n            }\n\n            this._shadowMapNumber[light.type]++;\n        }\n\n        for (var lightType in this._shadowMapNumber) {\n            var number = this._shadowMapNumber[lightType];\n            var key = lightType + '_SHADOWMAP_COUNT';\n            for (var i = 0; i < this._receivers.length; i++) {\n                var mesh = this._receivers[i];\n                var material = mesh.material;\n                if (material.fragmentDefines[key] !== number) {\n                    if (number > 0) {\n                        material.define('fragment', key, number);\n                    }\n                    else if (material.isDefined('fragment', key)) {\n                        material.undefine('fragment', key);\n                    }\n                }\n            }\n        }\n        for (var i = 0; i < this._receivers.length; i++) {\n            var mesh = this._receivers[i];\n            var material = mesh.material;\n            if (dirLightHasCascade) {\n                material.define('fragment', 'SHADOW_CASCADE', dirLightHasCascade.shadowCascade);\n            }\n            else {\n                material.undefine('fragment', 'SHADOW_CASCADE');\n            }\n        }\n\n        var shadowUniforms = scene.shadowUniforms;\n\n        function getSize(texture) {\n            return texture.height;\n        }\n        if (directionalLightShadowMaps.length > 0) {\n            var directionalLightShadowMapSizes = directionalLightShadowMaps.map(getSize);\n            shadowUniforms.directionalLightShadowMaps = { value: directionalLightShadowMaps, type: 'tv' };\n            shadowUniforms.directionalLightMatrices = { value: directionalLightMatrices, type: 'm4v' };\n            shadowUniforms.directionalLightShadowMapSizes = { value: directionalLightShadowMapSizes, type: '1fv' };\n            if (dirLightHasCascade) {\n                var shadowCascadeClipsNear = shadowCascadeClips.slice();\n                var shadowCascadeClipsFar = shadowCascadeClips.slice();\n                shadowCascadeClipsNear.pop();\n                shadowCascadeClipsFar.shift();\n\n                // Iterate from far to near\n                shadowCascadeClipsNear.reverse();\n                shadowCascadeClipsFar.reverse();\n                // directionalLightShadowMaps.reverse();\n                directionalLightMatrices.reverse();\n                shadowUniforms.shadowCascadeClipsNear = { value: shadowCascadeClipsNear, type: '1fv' };\n                shadowUniforms.shadowCascadeClipsFar = { value: shadowCascadeClipsFar, type: '1fv' };\n            }\n        }\n\n        if (spotLightShadowMaps.length > 0) {\n            var spotLightShadowMapSizes = spotLightShadowMaps.map(getSize);\n            var shadowUniforms = scene.shadowUniforms;\n            shadowUniforms.spotLightShadowMaps = { value: spotLightShadowMaps, type: 'tv' };\n            shadowUniforms.spotLightMatrices = { value: spotLightMatrices, type: 'm4v' };\n            shadowUniforms.spotLightShadowMapSizes = { value: spotLightShadowMapSizes, type: '1fv' };\n        }\n\n        if (pointLightShadowMaps.length > 0) {\n            shadowUniforms.pointLightShadowMaps = { value: pointLightShadowMaps, type: 'tv' };\n        }\n    },\n\n    renderDirectionalLightShadow: (function () {\n\n        var splitFrustum = new __WEBPACK_IMPORTED_MODULE_4__math_Frustum__[\"a\" /* default */]();\n        var splitProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var cropBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var cropMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightViewMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightViewProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var lightProjMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n\n        return function (renderer, scene, sceneCamera, light, shadowCascadeClips, directionalLightMatrices, directionalLightShadowMaps) {\n\n            var defaultShadowMaterial = this._getDepthMaterial(light);\n            var passConfig = {\n                getMaterial: function (renderable) {\n                    return renderable.shadowDepthMaterial || defaultShadowMaterial;\n                },\n                isMaterialChanged: isDepthMaterialChanged,\n                getUniform: getDepthMaterialUniform,\n                ifRender: function (renderable) {\n                    return renderable.castShadow;\n                },\n                sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n            };\n\n            // First frame\n            if (!scene.viewBoundingBoxLastFrame.isFinite()) {\n                var boundingBox = scene.getBoundingBox();\n                scene.viewBoundingBoxLastFrame\n                    .copy(boundingBox).applyTransform(sceneCamera.viewMatrix);\n            }\n            // Considering moving speed since the bounding box is from last frame\n            // TODO: add a bias\n            var clippedFar = Math.min(-scene.viewBoundingBoxLastFrame.min.z, sceneCamera.far);\n            var clippedNear = Math.max(-scene.viewBoundingBoxLastFrame.max.z, sceneCamera.near);\n\n            var lightCamera = this._getDirectionalLightCamera(light, scene, sceneCamera);\n\n            var lvpMat4Arr = lightViewProjMatrix.array;\n            lightProjMatrix.copy(lightCamera.projectionMatrix);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].invert(lightViewMatrix.array, lightCamera.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].multiply(lightViewMatrix.array, lightViewMatrix.array, sceneCamera.worldTransform.array);\n            __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].multiply(lvpMat4Arr, lightProjMatrix.array, lightViewMatrix.array);\n\n            var clipPlanes = [];\n            var isPerspective = sceneCamera instanceof __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */];\n\n            var scaleZ = (sceneCamera.near + sceneCamera.far) / (sceneCamera.near - sceneCamera.far);\n            var offsetZ = 2 * sceneCamera.near * sceneCamera.far / (sceneCamera.near - sceneCamera.far);\n            for (var i = 0; i <= light.shadowCascade; i++) {\n                var clog = clippedNear * Math.pow(clippedFar / clippedNear, i / light.shadowCascade);\n                var cuni = clippedNear + (clippedFar - clippedNear) * i / light.shadowCascade;\n                var c = clog * light.cascadeSplitLogFactor + cuni * (1 - light.cascadeSplitLogFactor);\n                clipPlanes.push(c);\n                shadowCascadeClips.push(-(-c * scaleZ + offsetZ) / -c);\n            }\n            var texture = this._getTexture(light, light.shadowCascade);\n            directionalLightShadowMaps.push(texture);\n\n            var viewport = renderer.viewport;\n\n            var _gl = renderer.gl;\n            this._frameBuffer.attach(texture);\n            this._frameBuffer.bind(renderer);\n            _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n            for (var i = 0; i < light.shadowCascade; i++) {\n                // Get the splitted frustum\n                var nearPlane = clipPlanes[i];\n                var farPlane = clipPlanes[i + 1];\n                if (isPerspective) {\n                    __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].perspective(splitProjMatrix.array, sceneCamera.fov / 180 * Math.PI, sceneCamera.aspect, nearPlane, farPlane);\n                }\n                else {\n                    __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].ortho(\n                        splitProjMatrix.array,\n                        sceneCamera.left, sceneCamera.right, sceneCamera.bottom, sceneCamera.top,\n                        nearPlane, farPlane\n                    );\n                }\n                splitFrustum.setFromProjection(splitProjMatrix);\n                splitFrustum.getTransformedBoundingBox(cropBBox, lightViewMatrix);\n                cropBBox.applyProjection(lightProjMatrix);\n                var _min = cropBBox.min.array;\n                var _max = cropBBox.max.array;\n                _min[0] = Math.max(_min[0], -1);\n                _min[1] = Math.max(_min[1], -1);\n                _max[0] = Math.min(_max[0], 1);\n                _max[1] = Math.min(_max[1], 1);\n                cropMatrix.ortho(_min[0], _max[0], _min[1], _max[1], 1, -1);\n                lightCamera.projectionMatrix.multiplyLeft(cropMatrix);\n\n                var shadowSize = light.shadowResolution || 512;\n\n                // Reversed, left to right => far to near\n                renderer.setViewport((light.shadowCascade - i - 1) * shadowSize, 0, shadowSize, shadowSize, 1);\n\n                var renderList = scene.updateRenderList(lightCamera);\n                renderer.renderPass(renderList.opaque, lightCamera, passConfig);\n\n                // Filter for VSM\n                if (this.softShadow === ShadowMapPass.VSM) {\n                    this._gaussianFilter(renderer, texture, texture.width);\n                }\n\n                var matrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n                matrix.copy(lightCamera.viewMatrix)\n                    .multiplyLeft(lightCamera.projectionMatrix);\n\n                directionalLightMatrices.push(matrix.array);\n\n                lightCamera.projectionMatrix.copy(lightProjMatrix);\n            }\n\n            this._frameBuffer.unbind(renderer);\n\n            renderer.setViewport(viewport);\n        };\n    })(),\n\n    renderSpotLightShadow: function (renderer, scene, light, spotLightMatrices, spotLightShadowMaps) {\n\n        var texture = this._getTexture(light);\n        var lightCamera = this._getSpotLightCamera(light);\n        var _gl = renderer.gl;\n\n        this._frameBuffer.attach(texture);\n        this._frameBuffer.bind(renderer);\n\n        _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n        var defaultShadowMaterial = this._getDepthMaterial(light);\n        var passConfig = {\n            getMaterial: function (renderable) {\n                return renderable.shadowDepthMaterial || defaultShadowMaterial;\n            },\n            isMaterialChanged: isDepthMaterialChanged,\n            getUniform: getDepthMaterialUniform,\n            ifRender: function (renderable) {\n                return renderable.castShadow;\n            },\n            sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n        };\n\n        var renderList = scene.updateRenderList(lightCamera);\n        renderer.renderPass(renderList.opaque, lightCamera, passConfig);\n\n        this._frameBuffer.unbind(renderer);\n\n        // Filter for VSM\n        if (this.softShadow === ShadowMapPass.VSM) {\n            this._gaussianFilter(renderer, texture, texture.width);\n        }\n\n        var matrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        matrix.copy(lightCamera.worldTransform)\n            .invert()\n            .multiplyLeft(lightCamera.projectionMatrix);\n\n        spotLightShadowMaps.push(texture);\n        spotLightMatrices.push(matrix.array);\n    },\n\n    renderPointLightShadow: function (renderer, scene, light, pointLightShadowMaps) {\n        var texture = this._getTexture(light);\n        var _gl = renderer.gl;\n        pointLightShadowMaps.push(texture);\n\n        var defaultShadowMaterial = this._getDepthMaterial(light);\n        var passConfig = {\n            getMaterial: function (renderable) {\n                return renderable.shadowDepthMaterial || defaultShadowMaterial;\n            },\n            getUniform: getDepthMaterialUniform,\n            sortCompare: __WEBPACK_IMPORTED_MODULE_6__Renderer__[\"a\" /* default */].opaqueSortCompare\n        };\n\n        var renderListEachSide = {\n            px: [], py: [], pz: [], nx: [], ny: [], nz: []\n        };\n        var bbox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var lightWorldPosition = light.getWorldPosition().array;\n        var lightBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var range = light.range;\n        lightBBox.min.setArray(lightWorldPosition);\n        lightBBox.max.setArray(lightWorldPosition);\n        var extent = new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */](range, range, range);\n        lightBBox.max.add(extent);\n        lightBBox.min.sub(extent);\n\n        var targetsNeedRender = { px: false, py: false, pz: false, nx: false, ny: false, nz: false };\n        scene.traverse(function (renderable) {\n            if (renderable.isRenderable() && renderable.castShadow) {\n                var geometry = renderable.geometry;\n                if (!geometry.boundingBox) {\n                    for (var i = 0; i < targets.length; i++) {\n                        renderListEachSide[targets[i]].push(renderable);\n                    }\n                    return;\n                }\n                bbox.transformFrom(geometry.boundingBox, renderable.worldTransform);\n                if (!bbox.intersectBoundingBox(lightBBox)) {\n                    return;\n                }\n\n                bbox.updateVertices();\n                for (var i = 0; i < targets.length; i++) {\n                    targetsNeedRender[targets[i]] = false;\n                }\n                for (var i = 0; i < 8; i++) {\n                    var vtx = bbox.vertices[i];\n                    var x = vtx[0] - lightWorldPosition[0];\n                    var y = vtx[1] - lightWorldPosition[1];\n                    var z = vtx[2] - lightWorldPosition[2];\n                    var absx = Math.abs(x);\n                    var absy = Math.abs(y);\n                    var absz = Math.abs(z);\n                    if (absx > absy) {\n                        if (absx > absz) {\n                            targetsNeedRender[x > 0 ? 'px' : 'nx'] = true;\n                        }\n                        else {\n                            targetsNeedRender[z > 0 ? 'pz' : 'nz'] = true;\n                        }\n                    }\n                    else {\n                        if (absy > absz) {\n                            targetsNeedRender[y > 0 ? 'py' : 'ny'] = true;\n                        }\n                        else {\n                            targetsNeedRender[z > 0 ? 'pz' : 'nz'] = true;\n                        }\n                    }\n                }\n                for (var i = 0; i < targets.length; i++) {\n                    if (targetsNeedRender[targets[i]]) {\n                        renderListEachSide[targets[i]].push(renderable);\n                    }\n                }\n            }\n        });\n\n        for (var i = 0; i < 6; i++) {\n            var target = targets[i];\n            var camera = this._getPointLightCamera(light, target);\n\n            this._frameBuffer.attach(texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i);\n            this._frameBuffer.bind(renderer);\n            _gl.clear(_gl.COLOR_BUFFER_BIT | _gl.DEPTH_BUFFER_BIT);\n\n            renderer.renderPass(renderListEachSide[target], camera, passConfig);\n        }\n\n        this._frameBuffer.unbind(renderer);\n    },\n\n    _getDepthMaterial: function (light) {\n        var shadowMaterial = this._lightMaterials[light.__uid__];\n        var isPointLight = light.type === 'POINT_LIGHT';\n        if (!shadowMaterial) {\n            var shaderPrefix = isPointLight ? 'clay.sm.distance.' : 'clay.sm.depth.';\n            shadowMaterial = new __WEBPACK_IMPORTED_MODULE_8__Material__[\"a\" /* default */]({\n                precision: this.precision,\n                shader: new __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source(shaderPrefix + 'vertex'), __WEBPACK_IMPORTED_MODULE_7__Shader__[\"a\" /* default */].source(shaderPrefix + 'fragment'))\n            });\n\n            this._lightMaterials[light.__uid__] = shadowMaterial;\n        }\n        if (light.shadowSlopeScale != null) {\n            shadowMaterial.setUniform('slopeScale', light.shadowSlopeScale);\n        }\n        if (light.shadowBias != null) {\n            shadowMaterial.setUniform('bias', light.shadowBias);\n        }\n        if (this.softShadow === ShadowMapPass.VSM) {\n            shadowMaterial.define('fragment', 'USE_VSM');\n        }\n        else {\n            shadowMaterial.undefine('fragment', 'USE_VSM');\n        }\n\n        if (isPointLight) {\n            shadowMaterial.set('lightPosition', light.getWorldPosition().array);\n            shadowMaterial.set('range', light.range);\n        }\n\n        return shadowMaterial;\n    },\n\n    _gaussianFilter: function (renderer, texture, size) {\n        var parameter = {\n            width: size,\n            height: size,\n            type: __WEBPACK_IMPORTED_MODULE_10__Texture__[\"a\" /* default */].FLOAT\n        };\n        var tmpTexture = this._texturePool.get(parameter);\n\n        this._frameBuffer.attach(tmpTexture);\n        this._frameBuffer.bind(renderer);\n        this._gaussianPassH.setUniform('texture', texture);\n        this._gaussianPassH.setUniform('textureWidth', size);\n        this._gaussianPassH.render(renderer);\n\n        this._frameBuffer.attach(texture);\n        this._gaussianPassV.setUniform('texture', tmpTexture);\n        this._gaussianPassV.setUniform('textureHeight', size);\n        this._gaussianPassV.render(renderer);\n        this._frameBuffer.unbind(renderer);\n\n        this._texturePool.put(tmpTexture);\n    },\n\n    _getTexture: function (light, cascade) {\n        var key = light.__uid__;\n        var texture = this._textures[key];\n        var resolution = light.shadowResolution || 512;\n        cascade = cascade || 1;\n        if (!texture) {\n            if (light.type === 'POINT_LIGHT') {\n                texture = new __WEBPACK_IMPORTED_MODULE_12__TextureCube__[\"a\" /* default */]();\n            }\n            else {\n                texture = new __WEBPACK_IMPORTED_MODULE_11__Texture2D__[\"a\" /* default */]();\n            }\n            // At most 4 cascade\n            // TODO share with height ?\n            texture.width = resolution * cascade;\n            texture.height = resolution;\n            if (this.softShadow === ShadowMapPass.VSM) {\n                texture.type = __WEBPACK_IMPORTED_MODULE_10__Texture__[\"a\" /* default */].FLOAT;\n                texture.anisotropic = 4;\n            }\n            else {\n                texture.minFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n                texture.magFilter = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].NEAREST;\n                texture.useMipmap = false;\n            }\n            this._textures[key] = texture;\n        }\n\n        return texture;\n    },\n\n    _getPointLightCamera: function (light, target) {\n        if (!this._lightCameras.point) {\n            this._lightCameras.point = {\n                px: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                nx: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                py: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                ny: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                pz: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */](),\n                nz: new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]()\n            };\n        }\n        var camera = this._lightCameras.point[target];\n\n        camera.far = light.range;\n        camera.fov = 90;\n        camera.position.set(0, 0, 0);\n        switch (target) {\n            case 'px':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_X, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'nx':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_X, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'py':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Y, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Z);\n                break;\n            case 'ny':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Z);\n                break;\n            case 'pz':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].POSITIVE_Z, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n            case 'nz':\n                camera.lookAt(__WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Z, __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */].NEGATIVE_Y);\n                break;\n        }\n        light.getWorldPosition(camera.position);\n        camera.update();\n\n        return camera;\n    },\n\n    _getDirectionalLightCamera: (function () {\n        var lightViewMatrix = new __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */]();\n        var sceneViewBoundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        var lightViewBBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n        // Camera of directional light will be adjusted\n        // to contain the view frustum and scene bounding box as tightly as possible\n        return function (light, scene, sceneCamera) {\n            if (!this._lightCameras.directional) {\n                this._lightCameras.directional = new __WEBPACK_IMPORTED_MODULE_14__camera_Orthographic__[\"a\" /* default */]();\n            }\n            var camera = this._lightCameras.directional;\n\n            sceneViewBoundingBox.copy(scene.viewBoundingBoxLastFrame);\n            sceneViewBoundingBox.intersection(sceneCamera.frustum.boundingBox);\n            // Move to the center of frustum(in world space)\n            camera.position\n                .copy(sceneViewBoundingBox.min)\n                .add(sceneViewBoundingBox.max)\n                .scale(0.5)\n                .transformMat4(sceneCamera.worldTransform);\n            camera.rotation.copy(light.rotation);\n            camera.scale.copy(light.scale);\n            camera.updateWorldTransform();\n\n            // Transform to light view space\n            __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */].invert(lightViewMatrix, camera.worldTransform);\n            __WEBPACK_IMPORTED_MODULE_5__math_Matrix4__[\"a\" /* default */].multiply(lightViewMatrix, lightViewMatrix, sceneCamera.worldTransform);\n\n            lightViewBBox.copy(sceneViewBoundingBox).applyTransform(lightViewMatrix);\n\n            var min = lightViewBBox.min.array;\n            var max = lightViewBBox.max.array;\n\n            // Move camera to adjust the near to 0\n            camera.position.set((min[0] + max[0]) / 2, (min[1] + max[1]) / 2, max[2])\n                .transformMat4(camera.worldTransform);\n            camera.near = 0;\n            camera.far = -min[2] + max[2];\n            // Make sure receivers not in the frustum will stil receive the shadow.\n            if (isNaN(this.lightFrustumBias)) {\n                camera.far *= 4;\n            }\n            else {\n                camera.far += this.lightFrustumBias;\n            }\n            camera.left = min[0];\n            camera.right = max[0];\n            camera.top = max[1];\n            camera.bottom = min[1];\n            camera.update(true);\n\n            return camera;\n        };\n    })(),\n\n    _getSpotLightCamera: function (light) {\n        if (!this._lightCameras.spot) {\n            this._lightCameras.spot = new __WEBPACK_IMPORTED_MODULE_13__camera_Perspective__[\"a\" /* default */]();\n        }\n        var camera = this._lightCameras.spot;\n        // Update properties\n        camera.fov = light.penumbraAngle * 2;\n        camera.far = light.range;\n        camera.worldTransform.copy(light.worldTransform);\n        camera.updateProjectionMatrix();\n        __WEBPACK_IMPORTED_MODULE_17__glmatrix_mat4__[\"a\" /* default */].invert(camera.viewMatrix.array, camera.worldTransform.array);\n\n        return camera;\n    },\n\n    /**\n     * @param  {clay.Renderer|WebGLRenderingContext} [renderer]\n     * @memberOf clay.prePass.ShadowMap.prototype\n     */\n    // PENDING Renderer or WebGLRenderingContext\n    dispose: function (renderer) {\n        var _gl = renderer.gl || renderer;\n\n        if (this._frameBuffer) {\n            this._frameBuffer.dispose(_gl);\n        }\n\n        for (var name in this._textures) {\n            this._textures[name].dispose(_gl);\n        }\n\n        this._texturePool.clear(renderer.gl);\n\n        this._depthMaterials = {};\n        this._distanceMaterials = {};\n        this._textures = {};\n        this._lightCameras = {};\n        this._shadowMapNumber = {\n            'POINT_LIGHT': 0,\n            'DIRECTIONAL_LIGHT': 0,\n            'SPOT_LIGHT': 0\n        };\n        this._meshMaterials = {};\n\n        for (var i = 0; i < this._receivers.length; i++) {\n            var mesh = this._receivers[i];\n            // Mesh may be disposed\n            if (mesh.material) {\n                var material = mesh.material;\n                material.undefine('fragment', 'POINT_LIGHT_SHADOW_COUNT');\n                material.undefine('fragment', 'DIRECTIONAL_LIGHT_SHADOW_COUNT');\n                material.undefine('fragment', 'AMBIENT_LIGHT_SHADOW_COUNT');\n                material.set('shadowEnabled', 0);\n            }\n        }\n\n        this._receivers = [];\n        this._lightsCastShadow = [];\n    }\n});\n\n/**\n * @name clay.prePass.ShadowMap.VSM\n * @type {number}\n */\nShadowMapPass.VSM = 1;\n\n/**\n * @name clay.prePass.ShadowMap.PCF\n * @type {number}\n */\nShadowMapPass.PCF = 2;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ShadowMapPass);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3ByZVBhc3MvU2hhZG93TWFwLmpzPzNiNWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi4vY29yZS9nbGVudW0nO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCBCb3VuZGluZ0JveCBmcm9tICcuLi9tYXRoL0JvdW5kaW5nQm94JztcbmltcG9ydCBGcnVzdHVtIGZyb20gJy4uL21hdGgvRnJ1c3R1bSc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuLi9tYXRoL01hdHJpeDQnO1xuaW1wb3J0IFJlbmRlcmVyIGZyb20gJy4uL1JlbmRlcmVyJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgVGV4dHVyZTJEIGZyb20gJy4uL1RleHR1cmUyRCc7XG5pbXBvcnQgVGV4dHVyZUN1YmUgZnJvbSAnLi4vVGV4dHVyZUN1YmUnO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5pbXBvcnQgT3J0aG9DYW1lcmEgZnJvbSAnLi4vY2FtZXJhL09ydGhvZ3JhcGhpYyc7XG5cbmltcG9ydCBQYXNzIGZyb20gJy4uL2NvbXBvc2l0b3IvUGFzcyc7XG5pbXBvcnQgVGV4dHVyZVBvb2wgZnJvbSAnLi4vY29tcG9zaXRvci9UZXh0dXJlUG9vbCc7XG5cbmltcG9ydCBtYXQ0IGZyb20gJy4uL2dsbWF0cml4L21hdDQnO1xuXG52YXIgdGFyZ2V0cyA9IFsncHgnLCAnbngnLCAncHknLCAnbnknLCAncHonLCAnbnonXTtcblxuaW1wb3J0IHNoYWRvd21hcEVzc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9zaGFkb3dtYXAuZ2xzbC5qcyc7XG5TaGFkZXJbJ2ltcG9ydCddKHNoYWRvd21hcEVzc2wpO1xuXG5mdW5jdGlvbiBnZXREZXB0aE1hdGVyaWFsVW5pZm9ybShyZW5kZXJhYmxlLCBkZXB0aE1hdGVyaWFsLCBzeW1ib2wpIHtcbiAgICBpZiAoc3ltYm9sID09PSAnYWxwaGFNYXAnKSB7XG4gICAgICAgIHJldHVybiByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgnZGlmZnVzZU1hcCcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdhbHBoYUN1dG9mZicpIHtcbiAgICAgICAgaWYgKHJlbmRlcmFibGUubWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJylcbiAgICAgICAgICAgICYmIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCdkaWZmdXNlTWFwJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgICB2YXIgYWxwaGFDdXRvZmYgPSByZW5kZXJhYmxlLm1hdGVyaWFsLmdldCgnYWxwaGFDdXRvZmYnKTtcbiAgICAgICAgICAgIHJldHVybiBhbHBoYUN1dG9mZiB8fCAwO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmIChzeW1ib2wgPT09ICd1dlJlcGVhdCcpIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCd1dlJlcGVhdCcpO1xuICAgIH1cbiAgICBlbHNlIGlmIChzeW1ib2wgPT09ICd1dk9mZnNldCcpIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUubWF0ZXJpYWwuZ2V0KCd1dk9mZnNldCcpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlcHRoTWF0ZXJpYWwuZ2V0KHN5bWJvbCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0RlcHRoTWF0ZXJpYWxDaGFuZ2VkKHJlbmRlcmFibGUsIHByZXZSZW5kZXJhYmxlKSB7XG4gICAgdmFyIG1hdEEgPSByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgIHZhciBtYXRCID0gcHJldlJlbmRlcmFibGUubWF0ZXJpYWw7XG4gICAgcmV0dXJuIG1hdEEuZ2V0KCdkaWZmdXNlTWFwJykgIT09IG1hdEIuZ2V0KCdkaWZmdXNlTWFwJylcbiAgICAgICAgfHwgKG1hdEEuZ2V0KCdhbHBoYUN1dG9mZicpIHx8IDApICE9PSAobWF0Qi5nZXQoJ2FscGhhQ3V0b2ZmJykgfHwgMCk7XG59XG5cbi8qKlxuICogUGFzcyByZW5kZXJpbmcgc2hhZG93IG1hcC5cbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5wcmVQYXNzLlNoYWRvd01hcFxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqIEBleGFtcGxlXG4gKiAgICAgdmFyIHNoYWRvd01hcFBhc3MgPSBuZXcgY2xheS5wcmVQYXNzLlNoYWRvd01hcCh7XG4gKiAgICAgICAgIHNvZnRTaGFkb3c6IGNsYXkucHJlUGFzcy5TaGFkb3dNYXAuVlNNXG4gKiAgICAgfSk7XG4gKiAgICAgLi4uXG4gKiAgICAgYW5pbWF0aW9uLm9uKCdmcmFtZScsIGZ1bmN0aW9uIChmcmFtZVRpbWUpIHtcbiAqICAgICAgICAgc2hhZG93TWFwUGFzcy5yZW5kZXIocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuICogICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gKiAgICAgfSk7XG4gKi9cbnZhciBTaGFkb3dNYXBQYXNzID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkucHJlUGFzcy5TaGFkb3dNYXAjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNvZnQgc2hhZG93IHRlY2huaXF1ZS5cbiAgICAgICAgICogQ2FuIGJlIHtAbGluayBjbGF5LnByZVBhc3MuU2hhZG93TWFwLlBDRn0gb3Ige0BsaW5rIGNsYXkucHJlUGFzcy5TaGFkb3dNYXAuVlNNfVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc29mdFNoYWRvdzogU2hhZG93TWFwUGFzcy5QQ0YsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNvZnQgc2hhZG93IGJsdXIgc2l6ZVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc2hhZG93Qmx1cjogMS4wLFxuXG4gICAgICAgIGxpZ2h0RnJ1c3R1bUJpYXM6ICdhdXRvJyxcblxuICAgICAgICBrZXJuZWxQQ0Y6IG5ldyBGbG9hdDMyQXJyYXkoW1xuICAgICAgICAgICAgMSwgMCxcbiAgICAgICAgICAgIDEsIDEsXG4gICAgICAgICAgICAtMSwgMSxcbiAgICAgICAgICAgIDAsIDEsXG4gICAgICAgICAgICAtMSwgMCxcbiAgICAgICAgICAgIC0xLCAtMSxcbiAgICAgICAgICAgIDEsIC0xLFxuICAgICAgICAgICAgMCwgLTFcbiAgICAgICAgXSksXG5cbiAgICAgICAgcHJlY2lzaW9uOiAnaGlnaHAnLFxuXG4gICAgICAgIF9sYXN0UmVuZGVyTm90Q2FzdFNoYWRvdzogZmFsc2UsXG5cbiAgICAgICAgX2ZyYW1lQnVmZmVyOiBuZXcgRnJhbWVCdWZmZXIoKSxcblxuICAgICAgICBfdGV4dHVyZXM6IHt9LFxuICAgICAgICBfc2hhZG93TWFwTnVtYmVyOiB7XG4gICAgICAgICAgICAnUE9JTlRfTElHSFQnOiAwLFxuICAgICAgICAgICAgJ0RJUkVDVElPTkFMX0xJR0hUJzogMCxcbiAgICAgICAgICAgICdTUE9UX0xJR0hUJzogMFxuICAgICAgICB9LFxuXG4gICAgICAgIF9kZXB0aE1hdGVyaWFsczoge30sXG4gICAgICAgIF9kaXN0YW5jZU1hdGVyaWFsczoge30sXG5cbiAgICAgICAgX3JlY2VpdmVyczogW10sXG4gICAgICAgIF9saWdodHNDYXN0U2hhZG93OiBbXSxcblxuICAgICAgICBfbGlnaHRDYW1lcmFzOiB7fSxcbiAgICAgICAgX2xpZ2h0TWF0ZXJpYWxzOiB7fSxcblxuICAgICAgICBfdGV4dHVyZVBvb2w6IG5ldyBUZXh0dXJlUG9vbCgpXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBHYXVzc2lhbiBmaWx0ZXIgcGFzcyBmb3IgVlNNXG4gICAgdGhpcy5fZ2F1c3NpYW5QYXNzSCA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyJylcbiAgICB9KTtcbiAgICB0aGlzLl9nYXVzc2lhblBhc3NWID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS5jb21wb3NpdG9yLmdhdXNzaWFuX2JsdXInKVxuICAgIH0pO1xuICAgIHRoaXMuX2dhdXNzaWFuUGFzc0guc2V0VW5pZm9ybSgnYmx1clNpemUnLCB0aGlzLnNoYWRvd0JsdXIpO1xuICAgIHRoaXMuX2dhdXNzaWFuUGFzc0guc2V0VW5pZm9ybSgnYmx1ckRpcicsIDAuMCk7XG4gICAgdGhpcy5fZ2F1c3NpYW5QYXNzVi5zZXRVbmlmb3JtKCdibHVyU2l6ZScsIHRoaXMuc2hhZG93Qmx1cik7XG4gICAgdGhpcy5fZ2F1c3NpYW5QYXNzVi5zZXRVbmlmb3JtKCdibHVyRGlyJywgMS4wKTtcblxuICAgIHRoaXMuX291dHB1dERlcHRoUGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2NsYXkuc20uZGVidWdfZGVwdGgnKVxuICAgIH0pO1xufSwge1xuICAgIC8qKlxuICAgICAqIFJlbmRlciBzY2VuZSB0byBzaGFkb3cgdGV4dHVyZXNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSAge2NsYXkuU2NlbmV9IHNjZW5lXG4gICAgICogQHBhcmFtICB7Y2xheS5DYW1lcmF9IHNjZW5lQ2FtZXJhXG4gICAgICogQHBhcmFtICB7Ym9vbGVhbn0gW25vdFVwZGF0ZVNjZW5lPWZhbHNlXVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnByZVBhc3MuU2hhZG93TWFwLnByb3RvdHlwZVxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgc2NlbmVDYW1lcmEsIG5vdFVwZGF0ZVNjZW5lKSB7XG4gICAgICAgIGlmICghc2NlbmVDYW1lcmEpIHtcbiAgICAgICAgICAgIHNjZW5lQ2FtZXJhID0gc2NlbmUuZ2V0TWFpbkNhbWVyYSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlcmVuZGVyJywgdGhpcywgcmVuZGVyZXIsIHNjZW5lLCBzY2VuZUNhbWVyYSk7XG4gICAgICAgIHRoaXMuX3JlbmRlclNoYWRvd1Bhc3MocmVuZGVyZXIsIHNjZW5lLCBzY2VuZUNhbWVyYSwgbm90VXBkYXRlU2NlbmUpO1xuICAgICAgICB0aGlzLnRyaWdnZXIoJ2FmdGVycmVuZGVyJywgdGhpcywgcmVuZGVyZXIsIHNjZW5lLCBzY2VuZUNhbWVyYSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERlYnVnIHJlbmRlcmluZyBvZiBzaGFkb3cgdGV4dHVyZXNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc2l6ZVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LnByZVBhc3MuU2hhZG93TWFwLnByb3RvdHlwZVxuICAgICAqL1xuICAgIHJlbmRlckRlYnVnOiBmdW5jdGlvbiAocmVuZGVyZXIsIHNpemUpIHtcbiAgICAgICAgcmVuZGVyZXIuc2F2ZUNsZWFyKCk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHJlbmRlcmVyLnZpZXdwb3J0O1xuICAgICAgICB2YXIgeCA9IDAsIHkgPSAwO1xuICAgICAgICB2YXIgd2lkdGggPSBzaXplIHx8IHZpZXdwb3J0LndpZHRoIC8gNDtcbiAgICAgICAgdmFyIGhlaWdodCA9IHdpZHRoO1xuICAgICAgICBpZiAodGhpcy5zb2Z0U2hhZG93ID09PSBTaGFkb3dNYXBQYXNzLlZTTSkge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0RGVwdGhQYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1ZTTScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0RGVwdGhQYXNzLm1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfVlNNJyk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLl90ZXh0dXJlcykge1xuICAgICAgICAgICAgdmFyIHRleHR1cmUgPSB0aGlzLl90ZXh0dXJlc1tuYW1lXTtcbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KHgsIHksIHdpZHRoICogdGV4dHVyZS53aWR0aCAvIHRleHR1cmUuaGVpZ2h0LCBoZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0RGVwdGhQYXNzLnNldFVuaWZvcm0oJ2RlcHRoTWFwJywgdGV4dHVyZSk7XG4gICAgICAgICAgICB0aGlzLl9vdXRwdXREZXB0aFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIHggKz0gd2lkdGggKiB0ZXh0dXJlLndpZHRoIC8gdGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyZXIuc2V0Vmlld3BvcnQodmlld3BvcnQpO1xuICAgICAgICByZW5kZXJlci5yZXN0b3JlQ2xlYXIoKTtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZVJlY2VpdmVyczogZnVuY3Rpb24gKHJlbmRlcmVyLCBtZXNoKSB7XG4gICAgICAgIGlmIChtZXNoLnJlY2VpdmVTaGFkb3cpIHtcbiAgICAgICAgICAgIHRoaXMuX3JlY2VpdmVycy5wdXNoKG1lc2gpO1xuICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC5zZXQoJ3NoYWRvd0VuYWJsZWQnLCAxKTtcblxuICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC5zZXQoJ3BjZktlcm5lbCcsIHRoaXMua2VybmVsUENGKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwuc2V0KCdzaGFkb3dFbmFibGVkJywgMCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5zb2Z0U2hhZG93ID09PSBTaGFkb3dNYXBQYXNzLlZTTSkge1xuICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9WU00nKTtcbiAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1BDRl9LRVJORUxfU0laRScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnVVNFX1ZTTScpO1xuICAgICAgICAgICAgdmFyIGtlcm5lbFBDRiA9IHRoaXMua2VybmVsUENGO1xuICAgICAgICAgICAgaWYgKGtlcm5lbFBDRiAmJiBrZXJuZWxQQ0YubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbWVzaC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1BDRl9LRVJORUxfU0laRScsIGtlcm5lbFBDRi5sZW5ndGggLyAyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1lc2gubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1BDRl9LRVJORUxfU0laRScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF91cGRhdGU6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBzY2VuZS50cmF2ZXJzZShmdW5jdGlvbiAocmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgaWYgKHJlbmRlcmFibGUuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl91cGRhdGVSZWNlaXZlcnMocmVuZGVyZXIsIHJlbmRlcmFibGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gc2NlbmUubGlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmNhc3RTaGFkb3cgJiYgIWxpZ2h0LmludmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX2xpZ2h0c0Nhc3RTaGFkb3cucHVzaChsaWdodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3JlbmRlclNoYWRvd1Bhc3M6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIHNjZW5lQ2FtZXJhLCBub3RVcGRhdGVTY2VuZSkge1xuICAgICAgICAvLyByZXNldFxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX3NoYWRvd01hcE51bWJlcikge1xuICAgICAgICAgICAgdGhpcy5fc2hhZG93TWFwTnVtYmVyW25hbWVdID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9saWdodHNDYXN0U2hhZG93Lmxlbmd0aCA9IDA7XG4gICAgICAgIHRoaXMuX3JlY2VpdmVycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICBpZiAoIW5vdFVwZGF0ZVNjZW5lKSB7XG4gICAgICAgICAgICBzY2VuZS51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2NlbmVDYW1lcmEpIHtcbiAgICAgICAgICAgIHNjZW5lQ2FtZXJhLnVwZGF0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgc2NlbmUudXBkYXRlTGlnaHRzKCk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZShyZW5kZXJlciwgc2NlbmUpO1xuXG4gICAgICAgIC8vIE5lZWRzIHRvIHVwZGF0ZSB0aGUgcmVjZWl2ZXJzIGFnYWluIGlmIHNoYWRvd3MgY29tZSBmcm9tIDEgdG8gMC5cbiAgICAgICAgaWYgKCF0aGlzLl9saWdodHNDYXN0U2hhZG93Lmxlbmd0aCAmJiB0aGlzLl9sYXN0UmVuZGVyTm90Q2FzdFNoYWRvdykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbGFzdFJlbmRlck5vdENhc3RTaGFkb3cgPSB0aGlzLl9saWdodHNDYXN0U2hhZG93ID09PSAwO1xuXG4gICAgICAgIF9nbC5lbmFibGUoX2dsLkRFUFRIX1RFU1QpO1xuICAgICAgICBfZ2wuZGVwdGhNYXNrKHRydWUpO1xuICAgICAgICBfZ2wuZGlzYWJsZShfZ2wuQkxFTkQpO1xuXG4gICAgICAgIC8vIENsZWFyIHdpdGggaGlnaC16LCBzbyB0aGUgcGFydCBub3QgcmVuZGVyZWQgd2lsbCBub3QgYmVlbiBzaGFkb3dlZFxuICAgICAgICAvLyBUT0RPXG4gICAgICAgIC8vIFRPRE8gcmVzdG9yZVxuICAgICAgICBfZ2wuY2xlYXJDb2xvcigxLjAsIDEuMCwgMS4wLCAxLjApO1xuXG4gICAgICAgIC8vIFNoYWRvdyB1bmlmb3Jtc1xuICAgICAgICB2YXIgc3BvdExpZ2h0U2hhZG93TWFwcyA9IFtdO1xuICAgICAgICB2YXIgc3BvdExpZ2h0TWF0cmljZXMgPSBbXTtcbiAgICAgICAgdmFyIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzID0gW107XG4gICAgICAgIHZhciBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMgPSBbXTtcbiAgICAgICAgdmFyIHNoYWRvd0Nhc2NhZGVDbGlwcyA9IFtdO1xuICAgICAgICB2YXIgcG9pbnRMaWdodFNoYWRvd01hcHMgPSBbXTtcblxuICAgICAgICB2YXIgZGlyTGlnaHRIYXNDYXNjYWRlO1xuICAgICAgICAvLyBDcmVhdGUgdGV4dHVyZXMgZm9yIHNoYWRvdyBtYXBcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9saWdodHNDYXN0U2hhZG93Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbGlnaHQgPSB0aGlzLl9saWdodHNDYXN0U2hhZG93W2ldO1xuICAgICAgICAgICAgaWYgKGxpZ2h0LnR5cGUgPT09ICdESVJFQ1RJT05BTF9MSUdIVCcpIHtcblxuICAgICAgICAgICAgICAgIGlmIChkaXJMaWdodEhhc0Nhc2NhZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdPbmx5IG9uZSBkaXJlZWN0aW9uYWwgbGlnaHQgc3VwcG9ydGVkIHdpdGggc2hhZG93IGNhc2NhZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaWdodC5zaGFkb3dDYXNjYWRlID4gNCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1N1cHBvcnQgYXQgbW9zdCA0IGNhc2NhZGUnKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChsaWdodC5zaGFkb3dDYXNjYWRlID4gMSkge1xuICAgICAgICAgICAgICAgICAgICBkaXJMaWdodEhhc0Nhc2NhZGUgPSBsaWdodDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckRpcmVjdGlvbmFsTGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICBzY2VuZSxcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVDYW1lcmEsXG4gICAgICAgICAgICAgICAgICAgIGxpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBzaGFkb3dDYXNjYWRlQ2xpcHMsXG4gICAgICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlcyxcbiAgICAgICAgICAgICAgICAgICAgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAobGlnaHQudHlwZSA9PT0gJ1NQT1RfTElHSFQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTcG90TGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICBzY2VuZSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHNwb3RMaWdodE1hdHJpY2VzLFxuICAgICAgICAgICAgICAgICAgICBzcG90TGlnaHRTaGFkb3dNYXBzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGxpZ2h0LnR5cGUgPT09ICdQT0lOVF9MSUdIVCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclBvaW50TGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLFxuICAgICAgICAgICAgICAgICAgICBzY2VuZSxcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHBvaW50TGlnaHRTaGFkb3dNYXBzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc2hhZG93TWFwTnVtYmVyW2xpZ2h0LnR5cGVdKys7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBsaWdodFR5cGUgaW4gdGhpcy5fc2hhZG93TWFwTnVtYmVyKSB7XG4gICAgICAgICAgICB2YXIgbnVtYmVyID0gdGhpcy5fc2hhZG93TWFwTnVtYmVyW2xpZ2h0VHlwZV07XG4gICAgICAgICAgICB2YXIga2V5ID0gbGlnaHRUeXBlICsgJ19TSEFET1dNQVBfQ09VTlQnO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9yZWNlaXZlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzaCA9IHRoaXMuX3JlY2VpdmVyc1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgICAgICAgICAgICAgIGlmIChtYXRlcmlhbC5mcmFnbWVudERlZmluZXNba2V5XSAhPT0gbnVtYmVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudW1iZXIgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50Jywga2V5LCBudW1iZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKG1hdGVyaWFsLmlzRGVmaW5lZCgnZnJhZ21lbnQnLCBrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCBrZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fcmVjZWl2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbWVzaCA9IHRoaXMuX3JlY2VpdmVyc1tpXTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IG1lc2gubWF0ZXJpYWw7XG4gICAgICAgICAgICBpZiAoZGlyTGlnaHRIYXNDYXNjYWRlKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdTSEFET1dfQ0FTQ0FERScsIGRpckxpZ2h0SGFzQ2FzY2FkZS5zaGFkb3dDYXNjYWRlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdTSEFET1dfQ0FTQ0FERScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNoYWRvd1VuaWZvcm1zID0gc2NlbmUuc2hhZG93VW5pZm9ybXM7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0U2l6ZSh0ZXh0dXJlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXMgPSBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcy5tYXAoZ2V0U2l6ZSk7XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5kaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcyA9IHsgdmFsdWU6IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzLCB0eXBlOiAndHYnIH07XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5kaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMgPSB7IHZhbHVlOiBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMsIHR5cGU6ICdtNHYnIH07XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5kaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXMgPSB7IHZhbHVlOiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXMsIHR5cGU6ICcxZnYnIH07XG4gICAgICAgICAgICBpZiAoZGlyTGlnaHRIYXNDYXNjYWRlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNoYWRvd0Nhc2NhZGVDbGlwc05lYXIgPSBzaGFkb3dDYXNjYWRlQ2xpcHMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgc2hhZG93Q2FzY2FkZUNsaXBzRmFyID0gc2hhZG93Q2FzY2FkZUNsaXBzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgc2hhZG93Q2FzY2FkZUNsaXBzTmVhci5wb3AoKTtcbiAgICAgICAgICAgICAgICBzaGFkb3dDYXNjYWRlQ2xpcHNGYXIuc2hpZnQoKTtcblxuICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgZnJvbSBmYXIgdG8gbmVhclxuICAgICAgICAgICAgICAgIHNoYWRvd0Nhc2NhZGVDbGlwc05lYXIucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIHNoYWRvd0Nhc2NhZGVDbGlwc0Zhci5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgLy8gZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHMucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlcy5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuc2hhZG93Q2FzY2FkZUNsaXBzTmVhciA9IHsgdmFsdWU6IHNoYWRvd0Nhc2NhZGVDbGlwc05lYXIsIHR5cGU6ICcxZnYnIH07XG4gICAgICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuc2hhZG93Q2FzY2FkZUNsaXBzRmFyID0geyB2YWx1ZTogc2hhZG93Q2FzY2FkZUNsaXBzRmFyLCB0eXBlOiAnMWZ2JyB9O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHNwb3RMaWdodFNoYWRvd01hcHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIHNwb3RMaWdodFNoYWRvd01hcFNpemVzID0gc3BvdExpZ2h0U2hhZG93TWFwcy5tYXAoZ2V0U2l6ZSk7XG4gICAgICAgICAgICB2YXIgc2hhZG93VW5pZm9ybXMgPSBzY2VuZS5zaGFkb3dVbmlmb3JtcztcbiAgICAgICAgICAgIHNoYWRvd1VuaWZvcm1zLnNwb3RMaWdodFNoYWRvd01hcHMgPSB7IHZhbHVlOiBzcG90TGlnaHRTaGFkb3dNYXBzLCB0eXBlOiAndHYnIH07XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5zcG90TGlnaHRNYXRyaWNlcyA9IHsgdmFsdWU6IHNwb3RMaWdodE1hdHJpY2VzLCB0eXBlOiAnbTR2JyB9O1xuICAgICAgICAgICAgc2hhZG93VW5pZm9ybXMuc3BvdExpZ2h0U2hhZG93TWFwU2l6ZXMgPSB7IHZhbHVlOiBzcG90TGlnaHRTaGFkb3dNYXBTaXplcywgdHlwZTogJzFmdicgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb2ludExpZ2h0U2hhZG93TWFwcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBzaGFkb3dVbmlmb3Jtcy5wb2ludExpZ2h0U2hhZG93TWFwcyA9IHsgdmFsdWU6IHBvaW50TGlnaHRTaGFkb3dNYXBzLCB0eXBlOiAndHYnIH07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyRGlyZWN0aW9uYWxMaWdodFNoYWRvdzogKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB2YXIgc3BsaXRGcnVzdHVtID0gbmV3IEZydXN0dW0oKTtcbiAgICAgICAgdmFyIHNwbGl0UHJvak1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHZhciBjcm9wQkJveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB2YXIgY3JvcE1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHZhciBsaWdodFZpZXdNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgbGlnaHRWaWV3UHJvak1hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHZhciBsaWdodFByb2pNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBzY2VuZUNhbWVyYSwgbGlnaHQsIHNoYWRvd0Nhc2NhZGVDbGlwcywgZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzLCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcykge1xuXG4gICAgICAgICAgICB2YXIgZGVmYXVsdFNoYWRvd01hdGVyaWFsID0gdGhpcy5fZ2V0RGVwdGhNYXRlcmlhbChsaWdodCk7XG4gICAgICAgICAgICB2YXIgcGFzc0NvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuc2hhZG93RGVwdGhNYXRlcmlhbCB8fCBkZWZhdWx0U2hhZG93TWF0ZXJpYWw7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBpc01hdGVyaWFsQ2hhbmdlZDogaXNEZXB0aE1hdGVyaWFsQ2hhbmdlZCxcbiAgICAgICAgICAgICAgICBnZXRVbmlmb3JtOiBnZXREZXB0aE1hdGVyaWFsVW5pZm9ybSxcbiAgICAgICAgICAgICAgICBpZlJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuY2FzdFNoYWRvdztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNvcnRDb21wYXJlOiBSZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gRmlyc3QgZnJhbWVcbiAgICAgICAgICAgIGlmICghc2NlbmUudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lLmlzRmluaXRlKCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgYm91bmRpbmdCb3ggPSBzY2VuZS5nZXRCb3VuZGluZ0JveCgpO1xuICAgICAgICAgICAgICAgIHNjZW5lLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZVxuICAgICAgICAgICAgICAgICAgICAuY29weShib3VuZGluZ0JveCkuYXBwbHlUcmFuc2Zvcm0oc2NlbmVDYW1lcmEudmlld01hdHJpeCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDb25zaWRlcmluZyBtb3Zpbmcgc3BlZWQgc2luY2UgdGhlIGJvdW5kaW5nIGJveCBpcyBmcm9tIGxhc3QgZnJhbWVcbiAgICAgICAgICAgIC8vIFRPRE86IGFkZCBhIGJpYXNcbiAgICAgICAgICAgIHZhciBjbGlwcGVkRmFyID0gTWF0aC5taW4oLXNjZW5lLnZpZXdCb3VuZGluZ0JveExhc3RGcmFtZS5taW4ueiwgc2NlbmVDYW1lcmEuZmFyKTtcbiAgICAgICAgICAgIHZhciBjbGlwcGVkTmVhciA9IE1hdGgubWF4KC1zY2VuZS52aWV3Qm91bmRpbmdCb3hMYXN0RnJhbWUubWF4LnosIHNjZW5lQ2FtZXJhLm5lYXIpO1xuXG4gICAgICAgICAgICB2YXIgbGlnaHRDYW1lcmEgPSB0aGlzLl9nZXREaXJlY3Rpb25hbExpZ2h0Q2FtZXJhKGxpZ2h0LCBzY2VuZSwgc2NlbmVDYW1lcmEpO1xuXG4gICAgICAgICAgICB2YXIgbHZwTWF0NEFyciA9IGxpZ2h0Vmlld1Byb2pNYXRyaXguYXJyYXk7XG4gICAgICAgICAgICBsaWdodFByb2pNYXRyaXguY29weShsaWdodENhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgICAgIG1hdDQuaW52ZXJ0KGxpZ2h0Vmlld01hdHJpeC5hcnJheSwgbGlnaHRDYW1lcmEud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgbWF0NC5tdWx0aXBseShsaWdodFZpZXdNYXRyaXguYXJyYXksIGxpZ2h0Vmlld01hdHJpeC5hcnJheSwgc2NlbmVDYW1lcmEud29ybGRUcmFuc2Zvcm0uYXJyYXkpO1xuICAgICAgICAgICAgbWF0NC5tdWx0aXBseShsdnBNYXQ0QXJyLCBsaWdodFByb2pNYXRyaXguYXJyYXksIGxpZ2h0Vmlld01hdHJpeC5hcnJheSk7XG5cbiAgICAgICAgICAgIHZhciBjbGlwUGxhbmVzID0gW107XG4gICAgICAgICAgICB2YXIgaXNQZXJzcGVjdGl2ZSA9IHNjZW5lQ2FtZXJhIGluc3RhbmNlb2YgUGVyc3BlY3RpdmVDYW1lcmE7XG5cbiAgICAgICAgICAgIHZhciBzY2FsZVogPSAoc2NlbmVDYW1lcmEubmVhciArIHNjZW5lQ2FtZXJhLmZhcikgLyAoc2NlbmVDYW1lcmEubmVhciAtIHNjZW5lQ2FtZXJhLmZhcik7XG4gICAgICAgICAgICB2YXIgb2Zmc2V0WiA9IDIgKiBzY2VuZUNhbWVyYS5uZWFyICogc2NlbmVDYW1lcmEuZmFyIC8gKHNjZW5lQ2FtZXJhLm5lYXIgLSBzY2VuZUNhbWVyYS5mYXIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPD0gbGlnaHQuc2hhZG93Q2FzY2FkZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNsb2cgPSBjbGlwcGVkTmVhciAqIE1hdGgucG93KGNsaXBwZWRGYXIgLyBjbGlwcGVkTmVhciwgaSAvIGxpZ2h0LnNoYWRvd0Nhc2NhZGUpO1xuICAgICAgICAgICAgICAgIHZhciBjdW5pID0gY2xpcHBlZE5lYXIgKyAoY2xpcHBlZEZhciAtIGNsaXBwZWROZWFyKSAqIGkgLyBsaWdodC5zaGFkb3dDYXNjYWRlO1xuICAgICAgICAgICAgICAgIHZhciBjID0gY2xvZyAqIGxpZ2h0LmNhc2NhZGVTcGxpdExvZ0ZhY3RvciArIGN1bmkgKiAoMSAtIGxpZ2h0LmNhc2NhZGVTcGxpdExvZ0ZhY3Rvcik7XG4gICAgICAgICAgICAgICAgY2xpcFBsYW5lcy5wdXNoKGMpO1xuICAgICAgICAgICAgICAgIHNoYWRvd0Nhc2NhZGVDbGlwcy5wdXNoKC0oLWMgKiBzY2FsZVogKyBvZmZzZXRaKSAvIC1jKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5fZ2V0VGV4dHVyZShsaWdodCwgbGlnaHQuc2hhZG93Q2FzY2FkZSk7XG4gICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwcy5wdXNoKHRleHR1cmUpO1xuXG4gICAgICAgICAgICB2YXIgdmlld3BvcnQgPSByZW5kZXJlci52aWV3cG9ydDtcblxuICAgICAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKHRleHR1cmUpO1xuICAgICAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgICAgICBfZ2wuY2xlYXIoX2dsLkNPTE9SX0JVRkZFUl9CSVQgfCBfZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlnaHQuc2hhZG93Q2FzY2FkZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgLy8gR2V0IHRoZSBzcGxpdHRlZCBmcnVzdHVtXG4gICAgICAgICAgICAgICAgdmFyIG5lYXJQbGFuZSA9IGNsaXBQbGFuZXNbaV07XG4gICAgICAgICAgICAgICAgdmFyIGZhclBsYW5lID0gY2xpcFBsYW5lc1tpICsgMV07XG4gICAgICAgICAgICAgICAgaWYgKGlzUGVyc3BlY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF0NC5wZXJzcGVjdGl2ZShzcGxpdFByb2pNYXRyaXguYXJyYXksIHNjZW5lQ2FtZXJhLmZvdiAvIDE4MCAqIE1hdGguUEksIHNjZW5lQ2FtZXJhLmFzcGVjdCwgbmVhclBsYW5lLCBmYXJQbGFuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtYXQ0Lm9ydGhvKFxuICAgICAgICAgICAgICAgICAgICAgICAgc3BsaXRQcm9qTWF0cml4LmFycmF5LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmVDYW1lcmEubGVmdCwgc2NlbmVDYW1lcmEucmlnaHQsIHNjZW5lQ2FtZXJhLmJvdHRvbSwgc2NlbmVDYW1lcmEudG9wLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVhclBsYW5lLCBmYXJQbGFuZVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBzcGxpdEZydXN0dW0uc2V0RnJvbVByb2plY3Rpb24oc3BsaXRQcm9qTWF0cml4KTtcbiAgICAgICAgICAgICAgICBzcGxpdEZydXN0dW0uZ2V0VHJhbnNmb3JtZWRCb3VuZGluZ0JveChjcm9wQkJveCwgbGlnaHRWaWV3TWF0cml4KTtcbiAgICAgICAgICAgICAgICBjcm9wQkJveC5hcHBseVByb2plY3Rpb24obGlnaHRQcm9qTWF0cml4KTtcbiAgICAgICAgICAgICAgICB2YXIgX21pbiA9IGNyb3BCQm94Lm1pbi5hcnJheTtcbiAgICAgICAgICAgICAgICB2YXIgX21heCA9IGNyb3BCQm94Lm1heC5hcnJheTtcbiAgICAgICAgICAgICAgICBfbWluWzBdID0gTWF0aC5tYXgoX21pblswXSwgLTEpO1xuICAgICAgICAgICAgICAgIF9taW5bMV0gPSBNYXRoLm1heChfbWluWzFdLCAtMSk7XG4gICAgICAgICAgICAgICAgX21heFswXSA9IE1hdGgubWluKF9tYXhbMF0sIDEpO1xuICAgICAgICAgICAgICAgIF9tYXhbMV0gPSBNYXRoLm1pbihfbWF4WzFdLCAxKTtcbiAgICAgICAgICAgICAgICBjcm9wTWF0cml4Lm9ydGhvKF9taW5bMF0sIF9tYXhbMF0sIF9taW5bMV0sIF9tYXhbMV0sIDEsIC0xKTtcbiAgICAgICAgICAgICAgICBsaWdodENhbWVyYS5wcm9qZWN0aW9uTWF0cml4Lm11bHRpcGx5TGVmdChjcm9wTWF0cml4KTtcblxuICAgICAgICAgICAgICAgIHZhciBzaGFkb3dTaXplID0gbGlnaHQuc2hhZG93UmVzb2x1dGlvbiB8fCA1MTI7XG5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnNlZCwgbGVmdCB0byByaWdodCA9PiBmYXIgdG8gbmVhclxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KChsaWdodC5zaGFkb3dDYXNjYWRlIC0gaSAtIDEpICogc2hhZG93U2l6ZSwgMCwgc2hhZG93U2l6ZSwgc2hhZG93U2l6ZSwgMSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyTGlzdCA9IHNjZW5lLnVwZGF0ZVJlbmRlckxpc3QobGlnaHRDYW1lcmEpO1xuICAgICAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MocmVuZGVyTGlzdC5vcGFxdWUsIGxpZ2h0Q2FtZXJhLCBwYXNzQ29uZmlnKTtcblxuICAgICAgICAgICAgICAgIC8vIEZpbHRlciBmb3IgVlNNXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc29mdFNoYWRvdyA9PT0gU2hhZG93TWFwUGFzcy5WU00pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2F1c3NpYW5GaWx0ZXIocmVuZGVyZXIsIHRleHR1cmUsIHRleHR1cmUud2lkdGgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBtYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICAgICAgICAgIG1hdHJpeC5jb3B5KGxpZ2h0Q2FtZXJhLnZpZXdNYXRyaXgpXG4gICAgICAgICAgICAgICAgICAgIC5tdWx0aXBseUxlZnQobGlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICAgICAgICAgICAgICBkaXJlY3Rpb25hbExpZ2h0TWF0cmljZXMucHVzaChtYXRyaXguYXJyYXkpO1xuXG4gICAgICAgICAgICAgICAgbGlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5jb3B5KGxpZ2h0UHJvak1hdHJpeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIHJlbmRlcmVyLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgfTtcbiAgICB9KSgpLFxuXG4gICAgcmVuZGVyU3BvdExpZ2h0U2hhZG93OiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBsaWdodCwgc3BvdExpZ2h0TWF0cmljZXMsIHNwb3RMaWdodFNoYWRvd01hcHMpIHtcblxuICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX2dldFRleHR1cmUobGlnaHQpO1xuICAgICAgICB2YXIgbGlnaHRDYW1lcmEgPSB0aGlzLl9nZXRTcG90TGlnaHRDYW1lcmEobGlnaHQpO1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKHRleHR1cmUpO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICBfZ2wuY2xlYXIoX2dsLkNPTE9SX0JVRkZFUl9CSVQgfCBfZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgdmFyIGRlZmF1bHRTaGFkb3dNYXRlcmlhbCA9IHRoaXMuX2dldERlcHRoTWF0ZXJpYWwobGlnaHQpO1xuICAgICAgICB2YXIgcGFzc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIGdldE1hdGVyaWFsOiBmdW5jdGlvbiAocmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLnNoYWRvd0RlcHRoTWF0ZXJpYWwgfHwgZGVmYXVsdFNoYWRvd01hdGVyaWFsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlzTWF0ZXJpYWxDaGFuZ2VkOiBpc0RlcHRoTWF0ZXJpYWxDaGFuZ2VkLFxuICAgICAgICAgICAgZ2V0VW5pZm9ybTogZ2V0RGVwdGhNYXRlcmlhbFVuaWZvcm0sXG4gICAgICAgICAgICBpZlJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5jYXN0U2hhZG93O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNvcnRDb21wYXJlOiBSZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciByZW5kZXJMaXN0ID0gc2NlbmUudXBkYXRlUmVuZGVyTGlzdChsaWdodENhbWVyYSk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MocmVuZGVyTGlzdC5vcGFxdWUsIGxpZ2h0Q2FtZXJhLCBwYXNzQ29uZmlnKTtcblxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgIC8vIEZpbHRlciBmb3IgVlNNXG4gICAgICAgIGlmICh0aGlzLnNvZnRTaGFkb3cgPT09IFNoYWRvd01hcFBhc3MuVlNNKSB7XG4gICAgICAgICAgICB0aGlzLl9nYXVzc2lhbkZpbHRlcihyZW5kZXJlciwgdGV4dHVyZSwgdGV4dHVyZS53aWR0aCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgbWF0cml4LmNvcHkobGlnaHRDYW1lcmEud29ybGRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAuaW52ZXJ0KClcbiAgICAgICAgICAgIC5tdWx0aXBseUxlZnQobGlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICAgICAgc3BvdExpZ2h0U2hhZG93TWFwcy5wdXNoKHRleHR1cmUpO1xuICAgICAgICBzcG90TGlnaHRNYXRyaWNlcy5wdXNoKG1hdHJpeC5hcnJheSk7XG4gICAgfSxcblxuICAgIHJlbmRlclBvaW50TGlnaHRTaGFkb3c6IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGxpZ2h0LCBwb2ludExpZ2h0U2hhZG93TWFwcykge1xuICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX2dldFRleHR1cmUobGlnaHQpO1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHBvaW50TGlnaHRTaGFkb3dNYXBzLnB1c2godGV4dHVyZSk7XG5cbiAgICAgICAgdmFyIGRlZmF1bHRTaGFkb3dNYXRlcmlhbCA9IHRoaXMuX2dldERlcHRoTWF0ZXJpYWwobGlnaHQpO1xuICAgICAgICB2YXIgcGFzc0NvbmZpZyA9IHtcbiAgICAgICAgICAgIGdldE1hdGVyaWFsOiBmdW5jdGlvbiAocmVuZGVyYWJsZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJhYmxlLnNoYWRvd0RlcHRoTWF0ZXJpYWwgfHwgZGVmYXVsdFNoYWRvd01hdGVyaWFsO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGdldFVuaWZvcm06IGdldERlcHRoTWF0ZXJpYWxVbmlmb3JtLFxuICAgICAgICAgICAgc29ydENvbXBhcmU6IFJlbmRlcmVyLm9wYXF1ZVNvcnRDb21wYXJlXG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIHJlbmRlckxpc3RFYWNoU2lkZSA9IHtcbiAgICAgICAgICAgIHB4OiBbXSwgcHk6IFtdLCBwejogW10sIG54OiBbXSwgbnk6IFtdLCBuejogW11cbiAgICAgICAgfTtcbiAgICAgICAgdmFyIGJib3ggPSBuZXcgQm91bmRpbmdCb3goKTtcbiAgICAgICAgdmFyIGxpZ2h0V29ybGRQb3NpdGlvbiA9IGxpZ2h0LmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcbiAgICAgICAgdmFyIGxpZ2h0QkJveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB2YXIgcmFuZ2UgPSBsaWdodC5yYW5nZTtcbiAgICAgICAgbGlnaHRCQm94Lm1pbi5zZXRBcnJheShsaWdodFdvcmxkUG9zaXRpb24pO1xuICAgICAgICBsaWdodEJCb3gubWF4LnNldEFycmF5KGxpZ2h0V29ybGRQb3NpdGlvbik7XG4gICAgICAgIHZhciBleHRlbnQgPSBuZXcgVmVjdG9yMyhyYW5nZSwgcmFuZ2UsIHJhbmdlKTtcbiAgICAgICAgbGlnaHRCQm94Lm1heC5hZGQoZXh0ZW50KTtcbiAgICAgICAgbGlnaHRCQm94Lm1pbi5zdWIoZXh0ZW50KTtcblxuICAgICAgICB2YXIgdGFyZ2V0c05lZWRSZW5kZXIgPSB7IHB4OiBmYWxzZSwgcHk6IGZhbHNlLCBwejogZmFsc2UsIG54OiBmYWxzZSwgbnk6IGZhbHNlLCBuejogZmFsc2UgfTtcbiAgICAgICAgc2NlbmUudHJhdmVyc2UoZnVuY3Rpb24gKHJlbmRlcmFibGUpIHtcbiAgICAgICAgICAgIGlmIChyZW5kZXJhYmxlLmlzUmVuZGVyYWJsZSgpICYmIHJlbmRlcmFibGUuY2FzdFNoYWRvdykge1xuICAgICAgICAgICAgICAgIHZhciBnZW9tZXRyeSA9IHJlbmRlcmFibGUuZ2VvbWV0cnk7XG4gICAgICAgICAgICAgICAgaWYgKCFnZW9tZXRyeS5ib3VuZGluZ0JveCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhcmdldHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckxpc3RFYWNoU2lkZVt0YXJnZXRzW2ldXS5wdXNoKHJlbmRlcmFibGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYmJveC50cmFuc2Zvcm1Gcm9tKGdlb21ldHJ5LmJvdW5kaW5nQm94LCByZW5kZXJhYmxlLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgICAgICBpZiAoIWJib3guaW50ZXJzZWN0Qm91bmRpbmdCb3gobGlnaHRCQm94KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgYmJveC51cGRhdGVWZXJ0aWNlcygpO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTmVlZFJlbmRlclt0YXJnZXRzW2ldXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdnR4ID0gYmJveC52ZXJ0aWNlc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHggPSB2dHhbMF0gLSBsaWdodFdvcmxkUG9zaXRpb25bMF07XG4gICAgICAgICAgICAgICAgICAgIHZhciB5ID0gdnR4WzFdIC0gbGlnaHRXb3JsZFBvc2l0aW9uWzFdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgeiA9IHZ0eFsyXSAtIGxpZ2h0V29ybGRQb3NpdGlvblsyXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFic3ggPSBNYXRoLmFicyh4KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFic3kgPSBNYXRoLmFicyh5KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFic3ogPSBNYXRoLmFicyh6KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFic3ggPiBhYnN5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzeCA+IGFic3opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTmVlZFJlbmRlclt4ID4gMCA/ICdweCcgOiAnbngnXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTmVlZFJlbmRlclt6ID4gMCA/ICdweicgOiAnbnonXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWJzeSA+IGFic3opIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTmVlZFJlbmRlclt5ID4gMCA/ICdweScgOiAnbnknXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXRzTmVlZFJlbmRlclt6ID4gMCA/ICdweicgOiAnbnonXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YXJnZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRzTmVlZFJlbmRlclt0YXJnZXRzW2ldXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyTGlzdEVhY2hTaWRlW3RhcmdldHNbaV1dLnB1c2gocmVuZGVyYWJsZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFyZ2V0ID0gdGFyZ2V0c1tpXTtcbiAgICAgICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLl9nZXRQb2ludExpZ2h0Q2FtZXJhKGxpZ2h0LCB0YXJnZXQpO1xuXG4gICAgICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZSwgX2dsLkNPTE9SX0FUVEFDSE1FTlQwLCBfZ2wuVEVYVFVSRV9DVUJFX01BUF9QT1NJVElWRV9YICsgaSk7XG4gICAgICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIF9nbC5jbGVhcihfZ2wuQ09MT1JfQlVGRkVSX0JJVCB8IF9nbC5ERVBUSF9CVUZGRVJfQklUKTtcblxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyUGFzcyhyZW5kZXJMaXN0RWFjaFNpZGVbdGFyZ2V0XSwgY2FtZXJhLCBwYXNzQ29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgfSxcblxuICAgIF9nZXREZXB0aE1hdGVyaWFsOiBmdW5jdGlvbiAobGlnaHQpIHtcbiAgICAgICAgdmFyIHNoYWRvd01hdGVyaWFsID0gdGhpcy5fbGlnaHRNYXRlcmlhbHNbbGlnaHQuX191aWRfX107XG4gICAgICAgIHZhciBpc1BvaW50TGlnaHQgPSBsaWdodC50eXBlID09PSAnUE9JTlRfTElHSFQnO1xuICAgICAgICBpZiAoIXNoYWRvd01hdGVyaWFsKSB7XG4gICAgICAgICAgICB2YXIgc2hhZGVyUHJlZml4ID0gaXNQb2ludExpZ2h0ID8gJ2NsYXkuc20uZGlzdGFuY2UuJyA6ICdjbGF5LnNtLmRlcHRoLic7XG4gICAgICAgICAgICBzaGFkb3dNYXRlcmlhbCA9IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICAgICAgcHJlY2lzaW9uOiB0aGlzLnByZWNpc2lvbixcbiAgICAgICAgICAgICAgICBzaGFkZXI6IG5ldyBTaGFkZXIoU2hhZGVyLnNvdXJjZShzaGFkZXJQcmVmaXggKyAndmVydGV4JyksIFNoYWRlci5zb3VyY2Uoc2hhZGVyUHJlZml4ICsgJ2ZyYWdtZW50JykpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fbGlnaHRNYXRlcmlhbHNbbGlnaHQuX191aWRfX10gPSBzaGFkb3dNYXRlcmlhbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobGlnaHQuc2hhZG93U2xvcGVTY2FsZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBzaGFkb3dNYXRlcmlhbC5zZXRVbmlmb3JtKCdzbG9wZVNjYWxlJywgbGlnaHQuc2hhZG93U2xvcGVTY2FsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxpZ2h0LnNoYWRvd0JpYXMgIT0gbnVsbCkge1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwuc2V0VW5pZm9ybSgnYmlhcycsIGxpZ2h0LnNoYWRvd0JpYXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNvZnRTaGFkb3cgPT09IFNoYWRvd01hcFBhc3MuVlNNKSB7XG4gICAgICAgICAgICBzaGFkb3dNYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1VTRV9WU00nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNoYWRvd01hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdVU0VfVlNNJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNQb2ludExpZ2h0KSB7XG4gICAgICAgICAgICBzaGFkb3dNYXRlcmlhbC5zZXQoJ2xpZ2h0UG9zaXRpb24nLCBsaWdodC5nZXRXb3JsZFBvc2l0aW9uKCkuYXJyYXkpO1xuICAgICAgICAgICAgc2hhZG93TWF0ZXJpYWwuc2V0KCdyYW5nZScsIGxpZ2h0LnJhbmdlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzaGFkb3dNYXRlcmlhbDtcbiAgICB9LFxuXG4gICAgX2dhdXNzaWFuRmlsdGVyOiBmdW5jdGlvbiAocmVuZGVyZXIsIHRleHR1cmUsIHNpemUpIHtcbiAgICAgICAgdmFyIHBhcmFtZXRlciA9IHtcbiAgICAgICAgICAgIHdpZHRoOiBzaXplLFxuICAgICAgICAgICAgaGVpZ2h0OiBzaXplLFxuICAgICAgICAgICAgdHlwZTogVGV4dHVyZS5GTE9BVFxuICAgICAgICB9O1xuICAgICAgICB2YXIgdG1wVGV4dHVyZSA9IHRoaXMuX3RleHR1cmVQb29sLmdldChwYXJhbWV0ZXIpO1xuXG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmF0dGFjaCh0bXBUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2dhdXNzaWFuUGFzc0guc2V0VW5pZm9ybSgndGV4dHVyZScsIHRleHR1cmUpO1xuICAgICAgICB0aGlzLl9nYXVzc2lhblBhc3NILnNldFVuaWZvcm0oJ3RleHR1cmVXaWR0aCcsIHNpemUpO1xuICAgICAgICB0aGlzLl9nYXVzc2lhblBhc3NILnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYXR0YWNoKHRleHR1cmUpO1xuICAgICAgICB0aGlzLl9nYXVzc2lhblBhc3NWLnNldFVuaWZvcm0oJ3RleHR1cmUnLCB0bXBUZXh0dXJlKTtcbiAgICAgICAgdGhpcy5fZ2F1c3NpYW5QYXNzVi5zZXRVbmlmb3JtKCd0ZXh0dXJlSGVpZ2h0Jywgc2l6ZSk7XG4gICAgICAgIHRoaXMuX2dhdXNzaWFuUGFzc1YucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLl90ZXh0dXJlUG9vbC5wdXQodG1wVGV4dHVyZSk7XG4gICAgfSxcblxuICAgIF9nZXRUZXh0dXJlOiBmdW5jdGlvbiAobGlnaHQsIGNhc2NhZGUpIHtcbiAgICAgICAgdmFyIGtleSA9IGxpZ2h0Ll9fdWlkX187XG4gICAgICAgIHZhciB0ZXh0dXJlID0gdGhpcy5fdGV4dHVyZXNba2V5XTtcbiAgICAgICAgdmFyIHJlc29sdXRpb24gPSBsaWdodC5zaGFkb3dSZXNvbHV0aW9uIHx8IDUxMjtcbiAgICAgICAgY2FzY2FkZSA9IGNhc2NhZGUgfHwgMTtcbiAgICAgICAgaWYgKCF0ZXh0dXJlKSB7XG4gICAgICAgICAgICBpZiAobGlnaHQudHlwZSA9PT0gJ1BPSU5UX0xJR0hUJykge1xuICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZUN1YmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBBdCBtb3N0IDQgY2FzY2FkZVxuICAgICAgICAgICAgLy8gVE9ETyBzaGFyZSB3aXRoIGhlaWdodCA/XG4gICAgICAgICAgICB0ZXh0dXJlLndpZHRoID0gcmVzb2x1dGlvbiAqIGNhc2NhZGU7XG4gICAgICAgICAgICB0ZXh0dXJlLmhlaWdodCA9IHJlc29sdXRpb247XG4gICAgICAgICAgICBpZiAodGhpcy5zb2Z0U2hhZG93ID09PSBTaGFkb3dNYXBQYXNzLlZTTSkge1xuICAgICAgICAgICAgICAgIHRleHR1cmUudHlwZSA9IFRleHR1cmUuRkxPQVQ7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS5hbmlzb3Ryb3BpYyA9IDQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLm1pbkZpbHRlciA9IGdsZW51bS5ORUFSRVNUO1xuICAgICAgICAgICAgICAgIHRleHR1cmUubWFnRmlsdGVyID0gZ2xlbnVtLk5FQVJFU1Q7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS51c2VNaXBtYXAgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3RleHR1cmVzW2tleV0gPSB0ZXh0dXJlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gICAgfSxcblxuICAgIF9nZXRQb2ludExpZ2h0Q2FtZXJhOiBmdW5jdGlvbiAobGlnaHQsIHRhcmdldCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xpZ2h0Q2FtZXJhcy5wb2ludCkge1xuICAgICAgICAgICAgdGhpcy5fbGlnaHRDYW1lcmFzLnBvaW50ID0ge1xuICAgICAgICAgICAgICAgIHB4OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKSxcbiAgICAgICAgICAgICAgICBueDogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCksXG4gICAgICAgICAgICAgICAgcHk6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpLFxuICAgICAgICAgICAgICAgIG55OiBuZXcgUGVyc3BlY3RpdmVDYW1lcmEoKSxcbiAgICAgICAgICAgICAgICBwejogbmV3IFBlcnNwZWN0aXZlQ2FtZXJhKCksXG4gICAgICAgICAgICAgICAgbno6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLl9saWdodENhbWVyYXMucG9pbnRbdGFyZ2V0XTtcblxuICAgICAgICBjYW1lcmEuZmFyID0gbGlnaHQucmFuZ2U7XG4gICAgICAgIGNhbWVyYS5mb3YgPSA5MDtcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCAwKTtcbiAgICAgICAgc3dpdGNoICh0YXJnZXQpIHtcbiAgICAgICAgICAgIGNhc2UgJ3B4JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuUE9TSVRJVkVfWCwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ254JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuTkVHQVRJVkVfWCwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3B5JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuUE9TSVRJVkVfWSwgVmVjdG9yMy5QT1NJVElWRV9aKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ255JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuTkVHQVRJVkVfWSwgVmVjdG9yMy5ORUdBVElWRV9aKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3B6JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuUE9TSVRJVkVfWiwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ256JzpcbiAgICAgICAgICAgICAgICBjYW1lcmEubG9va0F0KFZlY3RvcjMuTkVHQVRJVkVfWiwgVmVjdG9yMy5ORUdBVElWRV9ZKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsaWdodC5nZXRXb3JsZFBvc2l0aW9uKGNhbWVyYS5wb3NpdGlvbik7XG4gICAgICAgIGNhbWVyYS51cGRhdGUoKTtcblxuICAgICAgICByZXR1cm4gY2FtZXJhO1xuICAgIH0sXG5cbiAgICBfZ2V0RGlyZWN0aW9uYWxMaWdodENhbWVyYTogKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGxpZ2h0Vmlld01hdHJpeCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHZhciBzY2VuZVZpZXdCb3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICB2YXIgbGlnaHRWaWV3QkJveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuICAgICAgICAvLyBDYW1lcmEgb2YgZGlyZWN0aW9uYWwgbGlnaHQgd2lsbCBiZSBhZGp1c3RlZFxuICAgICAgICAvLyB0byBjb250YWluIHRoZSB2aWV3IGZydXN0dW0gYW5kIHNjZW5lIGJvdW5kaW5nIGJveCBhcyB0aWdodGx5IGFzIHBvc3NpYmxlXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAobGlnaHQsIHNjZW5lLCBzY2VuZUNhbWVyYSkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9saWdodENhbWVyYXMuZGlyZWN0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9saWdodENhbWVyYXMuZGlyZWN0aW9uYWwgPSBuZXcgT3J0aG9DYW1lcmEoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLl9saWdodENhbWVyYXMuZGlyZWN0aW9uYWw7XG5cbiAgICAgICAgICAgIHNjZW5lVmlld0JvdW5kaW5nQm94LmNvcHkoc2NlbmUudmlld0JvdW5kaW5nQm94TGFzdEZyYW1lKTtcbiAgICAgICAgICAgIHNjZW5lVmlld0JvdW5kaW5nQm94LmludGVyc2VjdGlvbihzY2VuZUNhbWVyYS5mcnVzdHVtLmJvdW5kaW5nQm94KTtcbiAgICAgICAgICAgIC8vIE1vdmUgdG8gdGhlIGNlbnRlciBvZiBmcnVzdHVtKGluIHdvcmxkIHNwYWNlKVxuICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uXG4gICAgICAgICAgICAgICAgLmNvcHkoc2NlbmVWaWV3Qm91bmRpbmdCb3gubWluKVxuICAgICAgICAgICAgICAgIC5hZGQoc2NlbmVWaWV3Qm91bmRpbmdCb3gubWF4KVxuICAgICAgICAgICAgICAgIC5zY2FsZSgwLjUpXG4gICAgICAgICAgICAgICAgLnRyYW5zZm9ybU1hdDQoc2NlbmVDYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgY2FtZXJhLnJvdGF0aW9uLmNvcHkobGlnaHQucm90YXRpb24pO1xuICAgICAgICAgICAgY2FtZXJhLnNjYWxlLmNvcHkobGlnaHQuc2NhbGUpO1xuICAgICAgICAgICAgY2FtZXJhLnVwZGF0ZVdvcmxkVHJhbnNmb3JtKCk7XG5cbiAgICAgICAgICAgIC8vIFRyYW5zZm9ybSB0byBsaWdodCB2aWV3IHNwYWNlXG4gICAgICAgICAgICBNYXRyaXg0LmludmVydChsaWdodFZpZXdNYXRyaXgsIGNhbWVyYS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KGxpZ2h0Vmlld01hdHJpeCwgbGlnaHRWaWV3TWF0cml4LCBzY2VuZUNhbWVyYS53b3JsZFRyYW5zZm9ybSk7XG5cbiAgICAgICAgICAgIGxpZ2h0Vmlld0JCb3guY29weShzY2VuZVZpZXdCb3VuZGluZ0JveCkuYXBwbHlUcmFuc2Zvcm0obGlnaHRWaWV3TWF0cml4KTtcblxuICAgICAgICAgICAgdmFyIG1pbiA9IGxpZ2h0Vmlld0JCb3gubWluLmFycmF5O1xuICAgICAgICAgICAgdmFyIG1heCA9IGxpZ2h0Vmlld0JCb3gubWF4LmFycmF5O1xuXG4gICAgICAgICAgICAvLyBNb3ZlIGNhbWVyYSB0byBhZGp1c3QgdGhlIG5lYXIgdG8gMFxuICAgICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgobWluWzBdICsgbWF4WzBdKSAvIDIsIChtaW5bMV0gKyBtYXhbMV0pIC8gMiwgbWF4WzJdKVxuICAgICAgICAgICAgICAgIC50cmFuc2Zvcm1NYXQ0KGNhbWVyYS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICBjYW1lcmEubmVhciA9IDA7XG4gICAgICAgICAgICBjYW1lcmEuZmFyID0gLW1pblsyXSArIG1heFsyXTtcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSByZWNlaXZlcnMgbm90IGluIHRoZSBmcnVzdHVtIHdpbGwgc3RpbCByZWNlaXZlIHRoZSBzaGFkb3cuXG4gICAgICAgICAgICBpZiAoaXNOYU4odGhpcy5saWdodEZydXN0dW1CaWFzKSkge1xuICAgICAgICAgICAgICAgIGNhbWVyYS5mYXIgKj0gNDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNhbWVyYS5mYXIgKz0gdGhpcy5saWdodEZydXN0dW1CaWFzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FtZXJhLmxlZnQgPSBtaW5bMF07XG4gICAgICAgICAgICBjYW1lcmEucmlnaHQgPSBtYXhbMF07XG4gICAgICAgICAgICBjYW1lcmEudG9wID0gbWF4WzFdO1xuICAgICAgICAgICAgY2FtZXJhLmJvdHRvbSA9IG1pblsxXTtcbiAgICAgICAgICAgIGNhbWVyYS51cGRhdGUodHJ1ZSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjYW1lcmE7XG4gICAgICAgIH07XG4gICAgfSkoKSxcblxuICAgIF9nZXRTcG90TGlnaHRDYW1lcmE6IGZ1bmN0aW9uIChsaWdodCkge1xuICAgICAgICBpZiAoIXRoaXMuX2xpZ2h0Q2FtZXJhcy5zcG90KSB7XG4gICAgICAgICAgICB0aGlzLl9saWdodENhbWVyYXMuc3BvdCA9IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBjYW1lcmEgPSB0aGlzLl9saWdodENhbWVyYXMuc3BvdDtcbiAgICAgICAgLy8gVXBkYXRlIHByb3BlcnRpZXNcbiAgICAgICAgY2FtZXJhLmZvdiA9IGxpZ2h0LnBlbnVtYnJhQW5nbGUgKiAyO1xuICAgICAgICBjYW1lcmEuZmFyID0gbGlnaHQucmFuZ2U7XG4gICAgICAgIGNhbWVyYS53b3JsZFRyYW5zZm9ybS5jb3B5KGxpZ2h0LndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgY2FtZXJhLnVwZGF0ZVByb2plY3Rpb25NYXRyaXgoKTtcbiAgICAgICAgbWF0NC5pbnZlcnQoY2FtZXJhLnZpZXdNYXRyaXguYXJyYXksIGNhbWVyYS53b3JsZFRyYW5zZm9ybS5hcnJheSk7XG5cbiAgICAgICAgcmV0dXJuIGNhbWVyYTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcnxXZWJHTFJlbmRlcmluZ0NvbnRleHR9IFtyZW5kZXJlcl1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5wcmVQYXNzLlNoYWRvd01hcC5wcm90b3R5cGVcbiAgICAgKi9cbiAgICAvLyBQRU5ESU5HIFJlbmRlcmVyIG9yIFdlYkdMUmVuZGVyaW5nQ29udGV4dFxuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2wgfHwgcmVuZGVyZXI7XG5cbiAgICAgICAgaWYgKHRoaXMuX2ZyYW1lQnVmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5kaXNwb3NlKF9nbCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHRoaXMuX3RleHR1cmVzKSB7XG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlc1tuYW1lXS5kaXNwb3NlKF9nbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl90ZXh0dXJlUG9vbC5jbGVhcihyZW5kZXJlci5nbCk7XG5cbiAgICAgICAgdGhpcy5fZGVwdGhNYXRlcmlhbHMgPSB7fTtcbiAgICAgICAgdGhpcy5fZGlzdGFuY2VNYXRlcmlhbHMgPSB7fTtcbiAgICAgICAgdGhpcy5fdGV4dHVyZXMgPSB7fTtcbiAgICAgICAgdGhpcy5fbGlnaHRDYW1lcmFzID0ge307XG4gICAgICAgIHRoaXMuX3NoYWRvd01hcE51bWJlciA9IHtcbiAgICAgICAgICAgICdQT0lOVF9MSUdIVCc6IDAsXG4gICAgICAgICAgICAnRElSRUNUSU9OQUxfTElHSFQnOiAwLFxuICAgICAgICAgICAgJ1NQT1RfTElHSFQnOiAwXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuX21lc2hNYXRlcmlhbHMgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3JlY2VpdmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIG1lc2ggPSB0aGlzLl9yZWNlaXZlcnNbaV07XG4gICAgICAgICAgICAvLyBNZXNoIG1heSBiZSBkaXNwb3NlZFxuICAgICAgICAgICAgaWYgKG1lc2gubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWF0ZXJpYWwgPSBtZXNoLm1hdGVyaWFsO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnVuZGVmaW5lKCdmcmFnbWVudCcsICdQT0lOVF9MSUdIVF9TSEFET1dfQ09VTlQnKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCAnRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XX0NPVU5UJyk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ0FNQklFTlRfTElHSFRfU0hBRE9XX0NPVU5UJyk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdzaGFkb3dFbmFibGVkJywgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZWNlaXZlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5fbGlnaHRzQ2FzdFNoYWRvdyA9IFtdO1xuICAgIH1cbn0pO1xuXG4vKipcbiAqIEBuYW1lIGNsYXkucHJlUGFzcy5TaGFkb3dNYXAuVlNNXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5TaGFkb3dNYXBQYXNzLlZTTSA9IDE7XG5cbi8qKlxuICogQG5hbWUgY2xheS5wcmVQYXNzLlNoYWRvd01hcC5QQ0ZcbiAqIEB0eXBlIHtudW1iZXJ9XG4gKi9cblNoYWRvd01hcFBhc3MuUENGID0gMjtcblxuZXhwb3J0IGRlZmF1bHQgU2hhZG93TWFwUGFzcztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wcmVQYXNzL1NoYWRvd01hcC5qc1xuLy8gbW9kdWxlIGlkID0gOTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///97\n");

/***/ }),
/* 98 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Ray__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n\n\n\n\n\n/**\n * @constructor clay.picking.RayPicking\n * @extends clay.core.Base\n */\nvar RayPicking = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.picking.RayPicking# */{\n    /**\n     * Target scene\n     * @type {clay.Scene}\n     */\n    scene: null,\n    /**\n     * Target camera\n     * @type {clay.Camera}\n     */\n    camera: null,\n    /**\n     * Target renderer\n     * @type {clay.Renderer}\n     */\n    renderer: null\n}, function () {\n    this._ray = new __WEBPACK_IMPORTED_MODULE_1__math_Ray__[\"a\" /* default */]();\n    this._ndc = new __WEBPACK_IMPORTED_MODULE_2__math_Vector2__[\"a\" /* default */]();\n},\n/** @lends clay.picking.RayPicking.prototype */\n{\n\n    /**\n     * Pick the nearest intersection object in the scene\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @param  {boolean} [forcePickAll=false] ignore ignorePicking\n     * @return {clay.picking.RayPicking~Intersection}\n     */\n    pick: function (x, y, forcePickAll) {\n        var out = this.pickAll(x, y, [], forcePickAll);\n        return out[0] || null;\n    },\n\n    /**\n     * Pick all intersection objects, wich will be sorted from near to far\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @param  {Array} [output]\n     * @param  {boolean} [forcePickAll=false] ignore ignorePicking\n     * @return {Array.<clay.picking.RayPicking~Intersection>}\n     */\n    pickAll: function (x, y, output, forcePickAll) {\n        this.renderer.screenToNDC(x, y, this._ndc);\n        this.camera.castRay(this._ndc, this._ray);\n\n        output = output || [];\n\n        this._intersectNode(this.scene, output, forcePickAll || false);\n\n        output.sort(this._intersectionCompareFunc);\n\n        return output;\n    },\n\n    _intersectNode: function (node, out, forcePickAll) {\n        if ((node instanceof __WEBPACK_IMPORTED_MODULE_5__Renderable__[\"a\" /* default */]) && node.isRenderable()) {\n            if ((!node.ignorePicking || forcePickAll)\n                && (\n                    // Only triangle mesh support ray picking\n                    (node.mode === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].TRIANGLES && node.geometry.isUseIndices())\n                    // Or if geometry has it's own pickByRay, pick, implementation\n                    || node.geometry.pickByRay\n                    || node.geometry.pick\n                )\n            ) {\n                this._intersectRenderable(node, out);\n            }\n        }\n        for (var i = 0; i < node._children.length; i++) {\n            this._intersectNode(node._children[i], out, forcePickAll);\n        }\n    },\n\n    _intersectRenderable: (function () {\n\n        var v1 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var v2 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var v3 = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var ray = new __WEBPACK_IMPORTED_MODULE_1__math_Ray__[\"a\" /* default */]();\n        var worldInverse = new __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__[\"a\" /* default */]();\n\n        return function (renderable, out) {\n\n            var isSkinnedMesh = renderable.isSkinnedMesh();\n            ray.copy(this._ray);\n            __WEBPACK_IMPORTED_MODULE_4__math_Matrix4__[\"a\" /* default */].invert(worldInverse, renderable.worldTransform);\n\n            // Skinned mesh will ignore the world transform.\n            if (!isSkinnedMesh) {\n                ray.applyTransform(worldInverse);\n            }\n\n            var geometry = renderable.geometry;\n\n            var bbox = isSkinnedMesh ? renderable.skeleton.boundingBox : geometry.boundingBox;\n\n            if (bbox && !ray.intersectBoundingBox(bbox)) {\n                return;\n            }\n            // Use user defined picking algorithm\n            if (geometry.pick) {\n                geometry.pick(\n                    this._ndc.x, this._ndc.y,\n                    this.renderer,\n                    this.camera,\n                    renderable, out\n                );\n                return;\n            }\n            // Use user defined ray picking algorithm\n            else if (geometry.pickByRay) {\n                geometry.pickByRay(ray, renderable, out);\n                return;\n            }\n\n            var cullBack = (renderable.cullFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].BACK && renderable.frontFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].CCW)\n                        || (renderable.cullFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].FRONT && renderable.frontFace === __WEBPACK_IMPORTED_MODULE_6__core_glenum__[\"a\" /* default */].CW);\n\n            var point;\n            var indices = geometry.indices;\n            var positionAttr = geometry.attributes.position;\n            var weightAttr = geometry.attributes.weight;\n            var jointAttr = geometry.attributes.joint;\n            var skinMatricesArray;\n            var skinMatrices = [];\n            // Check if valid.\n            if (!positionAttr || !positionAttr.value || !indices) {\n                return;\n            }\n            if (isSkinnedMesh) {\n                skinMatricesArray = renderable.skeleton.getSubSkinMatrices(renderable.__uid__, renderable.joints);\n                for (var i = 0; i < renderable.joints.length; i++) {\n                    skinMatrices[i] = skinMatrices[i] || [];\n                    for (var k = 0; k < 16; k++) {\n                        skinMatrices[i][k] = skinMatricesArray[i * 16 + k];\n                    }\n                }\n                var pos = [];\n                var weight = [];\n                var joint = [];\n                var skinnedPos = [];\n                var tmp = [];\n                var skinnedPositionAttr = geometry.attributes.skinnedPosition;\n                if (!skinnedPositionAttr || !skinnedPositionAttr.value) {\n                    geometry.createAttribute('skinnedPosition', 'f', 3);\n                    skinnedPositionAttr = geometry.attributes.skinnedPosition;\n                    skinnedPositionAttr.init(geometry.vertexCount);\n                }\n                for (var i = 0; i < geometry.vertexCount; i++) {\n                    positionAttr.get(i, pos);\n                    weightAttr.get(i, weight);\n                    jointAttr.get(i, joint);\n                    weight[3] = 1 - weight[0] - weight[1] - weight[2];\n                    __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].set(skinnedPos, 0, 0, 0);\n                    for (var k = 0; k < 4; k++) {\n                        if (joint[k] >= 0 && weight[k] > 1e-4) {\n                            __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].transformMat4(tmp, pos, skinMatrices[joint[k]]);\n                            __WEBPACK_IMPORTED_MODULE_7__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(skinnedPos, skinnedPos, tmp, weight[k]);\n                        }\n                    }\n                    skinnedPositionAttr.set(i, skinnedPos);\n                }\n            }\n\n            for (var i = 0; i < indices.length; i += 3) {\n                var i1 = indices[i];\n                var i2 = indices[i + 1];\n                var i3 = indices[i + 2];\n                var finalPosAttr = isSkinnedMesh\n                    ? geometry.attributes.skinnedPosition\n                    : positionAttr;\n                finalPosAttr.get(i1, v1.array);\n                finalPosAttr.get(i2, v2.array);\n                finalPosAttr.get(i3, v3.array);\n\n                if (cullBack) {\n                    point = ray.intersectTriangle(v1, v2, v3, renderable.culling);\n                }\n                else {\n                    point = ray.intersectTriangle(v1, v3, v2, renderable.culling);\n                }\n                if (point) {\n                    var pointW = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n                    if (!isSkinnedMesh) {\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].transformMat4(pointW, point, renderable.worldTransform);\n                    }\n                    else {\n                        // TODO point maybe not right.\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].copy(pointW, point);\n                    }\n                    out.push(new RayPicking.Intersection(\n                        point, pointW, renderable, [i1, i2, i3], i / 3,\n                        __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */].dist(pointW, this._ray.origin)\n                    ));\n                }\n            }\n        };\n    })(),\n\n    _intersectionCompareFunc: function (a, b) {\n        return a.distance - b.distance;\n    }\n});\n\n/**\n * @constructor clay.picking.RayPicking~Intersection\n * @param {clay.Vector3} point\n * @param {clay.Vector3} pointWorld\n * @param {clay.Node} target\n * @param {Array.<number>} triangle\n * @param {number} triangleIndex\n * @param {number} distance\n */\nRayPicking.Intersection = function (point, pointWorld, target, triangle, triangleIndex, distance) {\n    /**\n     * Intersection point in local transform coordinates\n     * @type {clay.Vector3}\n     */\n    this.point = point;\n    /**\n     * Intersection point in world transform coordinates\n     * @type {clay.Vector3}\n     */\n    this.pointWorld = pointWorld;\n    /**\n     * Intersection scene node\n     * @type {clay.Node}\n     */\n    this.target = target;\n    /**\n     * Intersection triangle, which is an array of vertex index\n     * @type {Array.<number>}\n     */\n    this.triangle = triangle;\n    /**\n     * Index of intersection triangle.\n     */\n    this.triangleIndex = triangleIndex;\n    /**\n     * Distance from intersection point to ray origin\n     * @type {number}\n     */\n    this.distance = distance;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RayPicking);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BpY2tpbmcvUmF5UGlja2luZy5qcz82MzRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgUmF5IGZyb20gJy4uL21hdGgvUmF5JztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uL21hdGgvVmVjdG9yMic7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi4vbWF0aC9NYXRyaXg0JztcbmltcG9ydCBSZW5kZXJhYmxlIGZyb20gJy4uL1JlbmRlcmFibGUnO1xuaW1wb3J0IGdsZW51bSBmcm9tICcuLi9jb3JlL2dsZW51bSc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5waWNraW5nLlJheVBpY2tpbmdcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBSYXlQaWNraW5nID0gQmFzZS5leHRlbmQoLyoqIEBsZW5kcyBjbGF5LnBpY2tpbmcuUmF5UGlja2luZyMgKi97XG4gICAgLyoqXG4gICAgICogVGFyZ2V0IHNjZW5lXG4gICAgICogQHR5cGUge2NsYXkuU2NlbmV9XG4gICAgICovXG4gICAgc2NlbmU6IG51bGwsXG4gICAgLyoqXG4gICAgICogVGFyZ2V0IGNhbWVyYVxuICAgICAqIEB0eXBlIHtjbGF5LkNhbWVyYX1cbiAgICAgKi9cbiAgICBjYW1lcmE6IG51bGwsXG4gICAgLyoqXG4gICAgICogVGFyZ2V0IHJlbmRlcmVyXG4gICAgICogQHR5cGUge2NsYXkuUmVuZGVyZXJ9XG4gICAgICovXG4gICAgcmVuZGVyZXI6IG51bGxcbn0sIGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yYXkgPSBuZXcgUmF5KCk7XG4gICAgdGhpcy5fbmRjID0gbmV3IFZlY3RvcjIoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkucGlja2luZy5SYXlQaWNraW5nLnByb3RvdHlwZSAqL1xue1xuXG4gICAgLyoqXG4gICAgICogUGljayB0aGUgbmVhcmVzdCBpbnRlcnNlY3Rpb24gb2JqZWN0IGluIHRoZSBzY2VuZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBNb3VzZSBwb3NpdGlvbiB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IE1vdXNlIHBvc2l0aW9uIHlcbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbZm9yY2VQaWNrQWxsPWZhbHNlXSBpZ25vcmUgaWdub3JlUGlja2luZ1xuICAgICAqIEByZXR1cm4ge2NsYXkucGlja2luZy5SYXlQaWNraW5nfkludGVyc2VjdGlvbn1cbiAgICAgKi9cbiAgICBwaWNrOiBmdW5jdGlvbiAoeCwgeSwgZm9yY2VQaWNrQWxsKSB7XG4gICAgICAgIHZhciBvdXQgPSB0aGlzLnBpY2tBbGwoeCwgeSwgW10sIGZvcmNlUGlja0FsbCk7XG4gICAgICAgIHJldHVybiBvdXRbMF0gfHwgbnVsbDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUGljayBhbGwgaW50ZXJzZWN0aW9uIG9iamVjdHMsIHdpY2ggd2lsbCBiZSBzb3J0ZWQgZnJvbSBuZWFyIHRvIGZhclxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBNb3VzZSBwb3NpdGlvbiB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IE1vdXNlIHBvc2l0aW9uIHlcbiAgICAgKiBAcGFyYW0gIHtBcnJheX0gW291dHB1dF1cbiAgICAgKiBAcGFyYW0gIHtib29sZWFufSBbZm9yY2VQaWNrQWxsPWZhbHNlXSBpZ25vcmUgaWdub3JlUGlja2luZ1xuICAgICAqIEByZXR1cm4ge0FycmF5LjxjbGF5LnBpY2tpbmcuUmF5UGlja2luZ35JbnRlcnNlY3Rpb24+fVxuICAgICAqL1xuICAgIHBpY2tBbGw6IGZ1bmN0aW9uICh4LCB5LCBvdXRwdXQsIGZvcmNlUGlja0FsbCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNjcmVlblRvTkRDKHgsIHksIHRoaXMuX25kYyk7XG4gICAgICAgIHRoaXMuY2FtZXJhLmNhc3RSYXkodGhpcy5fbmRjLCB0aGlzLl9yYXkpO1xuXG4gICAgICAgIG91dHB1dCA9IG91dHB1dCB8fCBbXTtcblxuICAgICAgICB0aGlzLl9pbnRlcnNlY3ROb2RlKHRoaXMuc2NlbmUsIG91dHB1dCwgZm9yY2VQaWNrQWxsIHx8IGZhbHNlKTtcblxuICAgICAgICBvdXRwdXQuc29ydCh0aGlzLl9pbnRlcnNlY3Rpb25Db21wYXJlRnVuYyk7XG5cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9LFxuXG4gICAgX2ludGVyc2VjdE5vZGU6IGZ1bmN0aW9uIChub2RlLCBvdXQsIGZvcmNlUGlja0FsbCkge1xuICAgICAgICBpZiAoKG5vZGUgaW5zdGFuY2VvZiBSZW5kZXJhYmxlKSAmJiBub2RlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICBpZiAoKCFub2RlLmlnbm9yZVBpY2tpbmcgfHwgZm9yY2VQaWNrQWxsKVxuICAgICAgICAgICAgICAgICYmIChcbiAgICAgICAgICAgICAgICAgICAgLy8gT25seSB0cmlhbmdsZSBtZXNoIHN1cHBvcnQgcmF5IHBpY2tpbmdcbiAgICAgICAgICAgICAgICAgICAgKG5vZGUubW9kZSA9PT0gZ2xlbnVtLlRSSUFOR0xFUyAmJiBub2RlLmdlb21ldHJ5LmlzVXNlSW5kaWNlcygpKVxuICAgICAgICAgICAgICAgICAgICAvLyBPciBpZiBnZW9tZXRyeSBoYXMgaXQncyBvd24gcGlja0J5UmF5LCBwaWNrLCBpbXBsZW1lbnRhdGlvblxuICAgICAgICAgICAgICAgICAgICB8fCBub2RlLmdlb21ldHJ5LnBpY2tCeVJheVxuICAgICAgICAgICAgICAgICAgICB8fCBub2RlLmdlb21ldHJ5LnBpY2tcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbnRlcnNlY3RSZW5kZXJhYmxlKG5vZGUsIG91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5faW50ZXJzZWN0Tm9kZShub2RlLl9jaGlsZHJlbltpXSwgb3V0LCBmb3JjZVBpY2tBbGwpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9pbnRlcnNlY3RSZW5kZXJhYmxlOiAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciB2MSA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHZhciB2MiA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHZhciB2MyA9IG5ldyBWZWN0b3IzKCk7XG4gICAgICAgIHZhciByYXkgPSBuZXcgUmF5KCk7XG4gICAgICAgIHZhciB3b3JsZEludmVyc2UgPSBuZXcgTWF0cml4NCgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAocmVuZGVyYWJsZSwgb3V0KSB7XG5cbiAgICAgICAgICAgIHZhciBpc1NraW5uZWRNZXNoID0gcmVuZGVyYWJsZS5pc1NraW5uZWRNZXNoKCk7XG4gICAgICAgICAgICByYXkuY29weSh0aGlzLl9yYXkpO1xuICAgICAgICAgICAgTWF0cml4NC5pbnZlcnQod29ybGRJbnZlcnNlLCByZW5kZXJhYmxlLndvcmxkVHJhbnNmb3JtKTtcblxuICAgICAgICAgICAgLy8gU2tpbm5lZCBtZXNoIHdpbGwgaWdub3JlIHRoZSB3b3JsZCB0cmFuc2Zvcm0uXG4gICAgICAgICAgICBpZiAoIWlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgICAgICAgICByYXkuYXBwbHlUcmFuc2Zvcm0od29ybGRJbnZlcnNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gcmVuZGVyYWJsZS5nZW9tZXRyeTtcblxuICAgICAgICAgICAgdmFyIGJib3ggPSBpc1NraW5uZWRNZXNoID8gcmVuZGVyYWJsZS5za2VsZXRvbi5ib3VuZGluZ0JveCA6IGdlb21ldHJ5LmJvdW5kaW5nQm94O1xuXG4gICAgICAgICAgICBpZiAoYmJveCAmJiAhcmF5LmludGVyc2VjdEJvdW5kaW5nQm94KGJib3gpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gVXNlIHVzZXIgZGVmaW5lZCBwaWNraW5nIGFsZ29yaXRobVxuICAgICAgICAgICAgaWYgKGdlb21ldHJ5LnBpY2spIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5waWNrKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9uZGMueCwgdGhpcy5fbmRjLnksXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyZXIsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FtZXJhLFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJhYmxlLCBvdXRcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVzZSB1c2VyIGRlZmluZWQgcmF5IHBpY2tpbmcgYWxnb3JpdGhtXG4gICAgICAgICAgICBlbHNlIGlmIChnZW9tZXRyeS5waWNrQnlSYXkpIHtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5waWNrQnlSYXkocmF5LCByZW5kZXJhYmxlLCBvdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGN1bGxCYWNrID0gKHJlbmRlcmFibGUuY3VsbEZhY2UgPT09IGdsZW51bS5CQUNLICYmIHJlbmRlcmFibGUuZnJvbnRGYWNlID09PSBnbGVudW0uQ0NXKVxuICAgICAgICAgICAgICAgICAgICAgICAgfHwgKHJlbmRlcmFibGUuY3VsbEZhY2UgPT09IGdsZW51bS5GUk9OVCAmJiByZW5kZXJhYmxlLmZyb250RmFjZSA9PT0gZ2xlbnVtLkNXKTtcblxuICAgICAgICAgICAgdmFyIHBvaW50O1xuICAgICAgICAgICAgdmFyIGluZGljZXMgPSBnZW9tZXRyeS5pbmRpY2VzO1xuICAgICAgICAgICAgdmFyIHBvc2l0aW9uQXR0ciA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb247XG4gICAgICAgICAgICB2YXIgd2VpZ2h0QXR0ciA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMud2VpZ2h0O1xuICAgICAgICAgICAgdmFyIGpvaW50QXR0ciA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMuam9pbnQ7XG4gICAgICAgICAgICB2YXIgc2tpbk1hdHJpY2VzQXJyYXk7XG4gICAgICAgICAgICB2YXIgc2tpbk1hdHJpY2VzID0gW107XG4gICAgICAgICAgICAvLyBDaGVjayBpZiB2YWxpZC5cbiAgICAgICAgICAgIGlmICghcG9zaXRpb25BdHRyIHx8ICFwb3NpdGlvbkF0dHIudmFsdWUgfHwgIWluZGljZXMpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNTa2lubmVkTWVzaCkge1xuICAgICAgICAgICAgICAgIHNraW5NYXRyaWNlc0FycmF5ID0gcmVuZGVyYWJsZS5za2VsZXRvbi5nZXRTdWJTa2luTWF0cmljZXMocmVuZGVyYWJsZS5fX3VpZF9fLCByZW5kZXJhYmxlLmpvaW50cyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZW5kZXJhYmxlLmpvaW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBza2luTWF0cmljZXNbaV0gPSBza2luTWF0cmljZXNbaV0gfHwgW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgMTY7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2tpbk1hdHJpY2VzW2ldW2tdID0gc2tpbk1hdHJpY2VzQXJyYXlbaSAqIDE2ICsga107XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciB3ZWlnaHQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgam9pbnQgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpbm5lZFBvcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciB0bXAgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgc2tpbm5lZFBvc2l0aW9uQXR0ciA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMuc2tpbm5lZFBvc2l0aW9uO1xuICAgICAgICAgICAgICAgIGlmICghc2tpbm5lZFBvc2l0aW9uQXR0ciB8fCAhc2tpbm5lZFBvc2l0aW9uQXR0ci52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5jcmVhdGVBdHRyaWJ1dGUoJ3NraW5uZWRQb3NpdGlvbicsICdmJywgMyk7XG4gICAgICAgICAgICAgICAgICAgIHNraW5uZWRQb3NpdGlvbkF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnNraW5uZWRQb3NpdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZFBvc2l0aW9uQXR0ci5pbml0KGdlb21ldHJ5LnZlcnRleENvdW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBnZW9tZXRyeS52ZXJ0ZXhDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uQXR0ci5nZXQoaSwgcG9zKTtcbiAgICAgICAgICAgICAgICAgICAgd2VpZ2h0QXR0ci5nZXQoaSwgd2VpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgam9pbnRBdHRyLmdldChpLCBqb2ludCk7XG4gICAgICAgICAgICAgICAgICAgIHdlaWdodFszXSA9IDEgLSB3ZWlnaHRbMF0gLSB3ZWlnaHRbMV0gLSB3ZWlnaHRbMl07XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuc2V0KHNraW5uZWRQb3MsIDAsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IDQ7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50W2tdID49IDAgJiYgd2VpZ2h0W2tdID4gMWUtNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlYzMudHJhbnNmb3JtTWF0NCh0bXAsIHBvcywgc2tpbk1hdHJpY2VzW2pvaW50W2tdXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVjMy5zY2FsZUFuZEFkZChza2lubmVkUG9zLCBza2lubmVkUG9zLCB0bXAsIHdlaWdodFtrXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2tpbm5lZFBvc2l0aW9uQXR0ci5zZXQoaSwgc2tpbm5lZFBvcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGluZGljZXMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgICAgICAgICB2YXIgaTEgPSBpbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBpMiA9IGluZGljZXNbaSArIDFdO1xuICAgICAgICAgICAgICAgIHZhciBpMyA9IGluZGljZXNbaSArIDJdO1xuICAgICAgICAgICAgICAgIHZhciBmaW5hbFBvc0F0dHIgPSBpc1NraW5uZWRNZXNoXG4gICAgICAgICAgICAgICAgICAgID8gZ2VvbWV0cnkuYXR0cmlidXRlcy5za2lubmVkUG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgOiBwb3NpdGlvbkF0dHI7XG4gICAgICAgICAgICAgICAgZmluYWxQb3NBdHRyLmdldChpMSwgdjEuYXJyYXkpO1xuICAgICAgICAgICAgICAgIGZpbmFsUG9zQXR0ci5nZXQoaTIsIHYyLmFycmF5KTtcbiAgICAgICAgICAgICAgICBmaW5hbFBvc0F0dHIuZ2V0KGkzLCB2My5hcnJheSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoY3VsbEJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnQgPSByYXkuaW50ZXJzZWN0VHJpYW5nbGUodjEsIHYyLCB2MywgcmVuZGVyYWJsZS5jdWxsaW5nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ID0gcmF5LmludGVyc2VjdFRyaWFuZ2xlKHYxLCB2MywgdjIsIHJlbmRlcmFibGUuY3VsbGluZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb2ludCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRXID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc1NraW5uZWRNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBWZWN0b3IzLnRyYW5zZm9ybU1hdDQocG9pbnRXLCBwb2ludCwgcmVuZGVyYWJsZS53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIHBvaW50IG1heWJlIG5vdCByaWdodC5cbiAgICAgICAgICAgICAgICAgICAgICAgIFZlY3RvcjMuY29weShwb2ludFcsIHBvaW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXQucHVzaChuZXcgUmF5UGlja2luZy5JbnRlcnNlY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludCwgcG9pbnRXLCByZW5kZXJhYmxlLCBbaTEsIGkyLCBpM10sIGkgLyAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgVmVjdG9yMy5kaXN0KHBvaW50VywgdGhpcy5fcmF5Lm9yaWdpbilcbiAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICBfaW50ZXJzZWN0aW9uQ29tcGFyZUZ1bmM6IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICAgIHJldHVybiBhLmRpc3RhbmNlIC0gYi5kaXN0YW5jZTtcbiAgICB9XG59KTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5waWNraW5nLlJheVBpY2tpbmd+SW50ZXJzZWN0aW9uXG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yM30gcG9pbnRcbiAqIEBwYXJhbSB7Y2xheS5WZWN0b3IzfSBwb2ludFdvcmxkXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSB0cmlhbmdsZVxuICogQHBhcmFtIHtudW1iZXJ9IHRyaWFuZ2xlSW5kZXhcbiAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZVxuICovXG5SYXlQaWNraW5nLkludGVyc2VjdGlvbiA9IGZ1bmN0aW9uIChwb2ludCwgcG9pbnRXb3JsZCwgdGFyZ2V0LCB0cmlhbmdsZSwgdHJpYW5nbGVJbmRleCwgZGlzdGFuY2UpIHtcbiAgICAvKipcbiAgICAgKiBJbnRlcnNlY3Rpb24gcG9pbnQgaW4gbG9jYWwgdHJhbnNmb3JtIGNvb3JkaW5hdGVzXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLnBvaW50ID0gcG9pbnQ7XG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0aW9uIHBvaW50IGluIHdvcmxkIHRyYW5zZm9ybSBjb29yZGluYXRlc1xuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5wb2ludFdvcmxkID0gcG9pbnRXb3JsZDtcbiAgICAvKipcbiAgICAgKiBJbnRlcnNlY3Rpb24gc2NlbmUgbm9kZVxuICAgICAqIEB0eXBlIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgLyoqXG4gICAgICogSW50ZXJzZWN0aW9uIHRyaWFuZ2xlLCB3aGljaCBpcyBhbiBhcnJheSBvZiB2ZXJ0ZXggaW5kZXhcbiAgICAgKiBAdHlwZSB7QXJyYXkuPG51bWJlcj59XG4gICAgICovXG4gICAgdGhpcy50cmlhbmdsZSA9IHRyaWFuZ2xlO1xuICAgIC8qKlxuICAgICAqIEluZGV4IG9mIGludGVyc2VjdGlvbiB0cmlhbmdsZS5cbiAgICAgKi9cbiAgICB0aGlzLnRyaWFuZ2xlSW5kZXggPSB0cmlhbmdsZUluZGV4O1xuICAgIC8qKlxuICAgICAqIERpc3RhbmNlIGZyb20gaW50ZXJzZWN0aW9uIHBvaW50IHRvIHJheSBvcmlnaW5cbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJheVBpY2tpbmc7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGlja2luZy9SYXlQaWNraW5nLmpzXG4vLyBtb2R1bGUgaWQgPSA5OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///98\n");

/***/ }),
/* 99 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__plugin_Skybox__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__plugin_Skydome__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__prePass_EnvironmentMap__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_projectEnvMap_glsl_js__ = __webpack_require__(141);\n// Spherical Harmonic Helpers\n\n\n\n\n\n\n\n\n\n\nvar sh = {};\n\n\n\nvar targets = ['px', 'nx', 'py', 'ny', 'pz', 'nz'];\n\n// Project on gpu, but needs browser to support readPixels as Float32Array.\nfunction projectEnvironmentMapGPU(renderer, envMap) {\n    var shTexture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n        width: 9,\n        height: 1,\n        type: __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT\n    });\n    var pass = new __WEBPACK_IMPORTED_MODULE_3__compositor_Pass__[\"a\" /* default */]({\n        fragment: __WEBPACK_IMPORTED_MODULE_10__shader_projectEnvMap_glsl_js__[\"a\" /* default */]\n    });\n    pass.material.define('fragment', 'TEXTURE_SIZE', envMap.width);\n    pass.setUniform('environmentMap', envMap);\n\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n    framebuffer.attach(shTexture);\n    pass.render(renderer, framebuffer);\n\n    framebuffer.bind(renderer);\n    // TODO Only chrome and firefox support Float32Array\n    var pixels = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 4);\n    renderer.gl.readPixels(0, 0, 9, 1, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].RGBA, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].FLOAT, pixels);\n\n    var coeff = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n    for (var i = 0; i < 9; i++) {\n        coeff[i * 3] = pixels[i * 4];\n        coeff[i * 3 + 1] = pixels[i * 4 + 1];\n        coeff[i * 3 + 2] = pixels[i * 4 + 2];\n    }\n    framebuffer.unbind(renderer);\n\n    framebuffer.dispose(renderer);\n    pass.dispose(renderer);\n    return coeff;\n}\n\nfunction harmonics(normal, index){\n    var x = normal[0];\n    var y = normal[1];\n    var z = normal[2];\n\n    if (index === 0) {\n        return 1.0;\n    }\n    else if (index === 1) {\n        return x;\n    }\n    else if (index === 2) {\n        return y;\n    }\n    else if (index === 3) {\n        return z;\n    }\n    else if (index === 4) {\n        return x * z;\n    }\n    else if (index === 5) {\n        return y * z;\n    }\n    else if (index === 6) {\n        return x * y;\n    }\n    else if (index === 7) {\n        return 3.0 * z * z - 1.0;\n    }\n    else {\n        return x * x - y * y;\n    }\n}\n\nvar normalTransform = {\n    px: [2, 1, 0, -1, -1, 1],\n    nx: [2, 1, 0, 1, -1, -1],\n    py: [0, 2, 1, 1, -1, -1],\n    ny: [0, 2, 1, 1, 1, 1],\n    pz: [0, 1, 2, -1, -1, -1],\n    nz: [0, 1, 2, 1, -1, 1]\n};\n\n// Project on cpu.\nfunction projectEnvironmentMapCPU(renderer, cubePixels, width, height) {\n    var coeff = new __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].Float32Array(9 * 3);\n    var normal = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    var texel = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    var fetchNormal = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n    for (var m = 0; m < 9; m++) {\n        var result = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n        for (var k = 0; k < targets.length; k++) {\n            var pixels = cubePixels[targets[k]];\n\n            var sideResult = __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].create();\n            var divider = 0;\n            var i = 0;\n            var transform = normalTransform[targets[k]];\n            for (var y = 0; y < height; y++) {\n                for (var x = 0; x < width; x++) {\n\n                    normal[0] = x / (width - 1.0) * 2.0 - 1.0;\n                    // TODO Flip y?\n                    normal[1] = y / (height - 1.0) * 2.0 - 1.0;\n                    normal[2] = -1.0;\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].normalize(normal, normal);\n\n                    fetchNormal[0] = normal[transform[0]] * transform[3];\n                    fetchNormal[1] = normal[transform[1]] * transform[4];\n                    fetchNormal[2] = normal[transform[2]] * transform[5];\n\n                    texel[0] = pixels[i++] / 255;\n                    texel[1] = pixels[i++] / 255;\n                    texel[2] = pixels[i++] / 255;\n                    // RGBM Decode\n                    var scale = pixels[i++] / 255 * 8.12;\n                    texel[0] *= scale;\n                    texel[1] *= scale;\n                    texel[2] *= scale;\n\n                    __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(sideResult, sideResult, texel, harmonics(fetchNormal, m) * -normal[2]);\n                    // -normal.z equals cos(theta) of Lambertian\n                    divider += -normal[2];\n                }\n            }\n            __WEBPACK_IMPORTED_MODULE_9__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(result, result, sideResult, 1 / divider);\n        }\n\n        coeff[m * 3] = result[0] / 6.0;\n        coeff[m * 3 + 1] = result[1] / 6.0;\n        coeff[m * 3 + 2] = result[2] / 6.0;\n    }\n    return coeff;\n}\n\n/**\n * @param  {clay.Renderer} renderer\n * @param  {clay.Texture} envMap\n * @param  {Object} [textureOpts]\n * @param  {Object} [textureOpts.lod]\n * @param  {boolean} [textureOpts.decodeRGBM]\n */\nsh.projectEnvironmentMap = function (renderer, envMap, opts) {\n\n    // TODO sRGB\n\n    opts = opts || {};\n    opts.lod = opts.lod || 0;\n\n    var skybox;\n    var dummyScene = new __WEBPACK_IMPORTED_MODULE_8__Scene__[\"a\" /* default */]();\n    var size = 64;\n    if (envMap.textureType === 'texture2D') {\n        skybox = new __WEBPACK_IMPORTED_MODULE_6__plugin_Skydome__[\"a\" /* default */]({\n            scene: dummyScene,\n            environmentMap: envMap\n        });\n    }\n    else {\n        size = (envMap.image && envMap.image.px) ? envMap.image.px.width : envMap.width;\n        skybox = new __WEBPACK_IMPORTED_MODULE_5__plugin_Skybox__[\"a\" /* default */]({\n            scene: dummyScene,\n            environmentMap: envMap\n        });\n    }\n    // Convert to rgbm\n    var width = Math.ceil(size / Math.pow(2, opts.lod));\n    var height = Math.ceil(size / Math.pow(2, opts.lod));\n    var rgbmTexture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n        width: width,\n        height: height\n    });\n    var framebuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n    skybox.material.define('fragment', 'RGBM_ENCODE');\n    if (opts.decodeRGBM) {\n        skybox.material.define('fragment', 'RGBM_DECODE');\n    }\n    skybox.material.set('lod', opts.lod);\n    var envMapPass = new __WEBPACK_IMPORTED_MODULE_7__prePass_EnvironmentMap__[\"a\" /* default */]({\n        texture: rgbmTexture\n    });\n    var cubePixels = {};\n    for (var i = 0; i < targets.length; i++) {\n        cubePixels[targets[i]] = new Uint8Array(width * height * 4);\n        var camera = envMapPass.getCamera(targets[i]);\n        camera.fov = 90;\n        framebuffer.attach(rgbmTexture);\n        framebuffer.bind(renderer);\n        renderer.render(dummyScene, camera);\n        renderer.gl.readPixels(\n            0, 0, width, height,\n            __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].RGBA, __WEBPACK_IMPORTED_MODULE_0__Texture__[\"a\" /* default */].UNSIGNED_BYTE, cubePixels[targets[i]]\n        );\n        framebuffer.unbind(renderer);\n    }\n\n    skybox.dispose(renderer);\n    framebuffer.dispose(renderer);\n    rgbmTexture.dispose(renderer);\n\n    return projectEnvironmentMapCPU(renderer, cubePixels, width, height);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (sh);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3V0aWwvc2guanM/NDQ0MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTcGhlcmljYWwgSGFybW9uaWMgSGVscGVyc1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFBhc3MgZnJvbSAnLi4vY29tcG9zaXRvci9QYXNzJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuaW1wb3J0IFNreWJveCBmcm9tICcuLi9wbHVnaW4vU2t5Ym94JztcbmltcG9ydCBTa3lkb21lIGZyb20gJy4uL3BsdWdpbi9Ta3lkb21lJztcbmltcG9ydCBFbnZpcm9ubWVudE1hcFBhc3MgZnJvbSAnLi4vcHJlUGFzcy9FbnZpcm9ubWVudE1hcCc7XG5pbXBvcnQgU2NlbmUgZnJvbSAnLi4vU2NlbmUnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG52YXIgc2ggPSB7fTtcblxuaW1wb3J0IHByb2plY3RFbnZNYXBTaGFkZXJDb2RlIGZyb20gJy4vc2hhZGVyL3Byb2plY3RFbnZNYXAuZ2xzbC5qcyc7XG5cbnZhciB0YXJnZXRzID0gWydweCcsICdueCcsICdweScsICdueScsICdweicsICdueiddO1xuXG4vLyBQcm9qZWN0IG9uIGdwdSwgYnV0IG5lZWRzIGJyb3dzZXIgdG8gc3VwcG9ydCByZWFkUGl4ZWxzIGFzIEZsb2F0MzJBcnJheS5cbmZ1bmN0aW9uIHByb2plY3RFbnZpcm9ubWVudE1hcEdQVShyZW5kZXJlciwgZW52TWFwKSB7XG4gICAgdmFyIHNoVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB3aWR0aDogOSxcbiAgICAgICAgaGVpZ2h0OiAxLFxuICAgICAgICB0eXBlOiBUZXh0dXJlLkZMT0FUXG4gICAgfSk7XG4gICAgdmFyIHBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBwcm9qZWN0RW52TWFwU2hhZGVyQ29kZVxuICAgIH0pO1xuICAgIHBhc3MubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdURVhUVVJFX1NJWkUnLCBlbnZNYXAud2lkdGgpO1xuICAgIHBhc3Muc2V0VW5pZm9ybSgnZW52aXJvbm1lbnRNYXAnLCBlbnZNYXApO1xuXG4gICAgdmFyIGZyYW1lYnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKCk7XG4gICAgZnJhbWVidWZmZXIuYXR0YWNoKHNoVGV4dHVyZSk7XG4gICAgcGFzcy5yZW5kZXIocmVuZGVyZXIsIGZyYW1lYnVmZmVyKTtcblxuICAgIGZyYW1lYnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgIC8vIFRPRE8gT25seSBjaHJvbWUgYW5kIGZpcmVmb3ggc3VwcG9ydCBGbG9hdDMyQXJyYXlcbiAgICB2YXIgcGl4ZWxzID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoOSAqIDQpO1xuICAgIHJlbmRlcmVyLmdsLnJlYWRQaXhlbHMoMCwgMCwgOSwgMSwgVGV4dHVyZS5SR0JBLCBUZXh0dXJlLkZMT0FULCBwaXhlbHMpO1xuXG4gICAgdmFyIGNvZWZmID0gbmV3IHZlbmRvci5GbG9hdDMyQXJyYXkoOSAqIDMpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgOTsgaSsrKSB7XG4gICAgICAgIGNvZWZmW2kgKiAzXSA9IHBpeGVsc1tpICogNF07XG4gICAgICAgIGNvZWZmW2kgKiAzICsgMV0gPSBwaXhlbHNbaSAqIDQgKyAxXTtcbiAgICAgICAgY29lZmZbaSAqIDMgKyAyXSA9IHBpeGVsc1tpICogNCArIDJdO1xuICAgIH1cbiAgICBmcmFtZWJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgZnJhbWVidWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgcGFzcy5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICByZXR1cm4gY29lZmY7XG59XG5cbmZ1bmN0aW9uIGhhcm1vbmljcyhub3JtYWwsIGluZGV4KXtcbiAgICB2YXIgeCA9IG5vcm1hbFswXTtcbiAgICB2YXIgeSA9IG5vcm1hbFsxXTtcbiAgICB2YXIgeiA9IG5vcm1hbFsyXTtcblxuICAgIGlmIChpbmRleCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gMS4wO1xuICAgIH1cbiAgICBlbHNlIGlmIChpbmRleCA9PT0gMSkge1xuICAgICAgICByZXR1cm4geDtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5kZXggPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIHk7XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID09PSAzKSB7XG4gICAgICAgIHJldHVybiB6O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbmRleCA9PT0gNCkge1xuICAgICAgICByZXR1cm4geCAqIHo7XG4gICAgfVxuICAgIGVsc2UgaWYgKGluZGV4ID09PSA1KSB7XG4gICAgICAgIHJldHVybiB5ICogejtcbiAgICB9XG4gICAgZWxzZSBpZiAoaW5kZXggPT09IDYpIHtcbiAgICAgICAgcmV0dXJuIHggKiB5O1xuICAgIH1cbiAgICBlbHNlIGlmIChpbmRleCA9PT0gNykge1xuICAgICAgICByZXR1cm4gMy4wICogeiAqIHogLSAxLjA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4geCAqIHggLSB5ICogeTtcbiAgICB9XG59XG5cbnZhciBub3JtYWxUcmFuc2Zvcm0gPSB7XG4gICAgcHg6IFsyLCAxLCAwLCAtMSwgLTEsIDFdLFxuICAgIG54OiBbMiwgMSwgMCwgMSwgLTEsIC0xXSxcbiAgICBweTogWzAsIDIsIDEsIDEsIC0xLCAtMV0sXG4gICAgbnk6IFswLCAyLCAxLCAxLCAxLCAxXSxcbiAgICBwejogWzAsIDEsIDIsIC0xLCAtMSwgLTFdLFxuICAgIG56OiBbMCwgMSwgMiwgMSwgLTEsIDFdXG59O1xuXG4vLyBQcm9qZWN0IG9uIGNwdS5cbmZ1bmN0aW9uIHByb2plY3RFbnZpcm9ubWVudE1hcENQVShyZW5kZXJlciwgY3ViZVBpeGVscywgd2lkdGgsIGhlaWdodCkge1xuICAgIHZhciBjb2VmZiA9IG5ldyB2ZW5kb3IuRmxvYXQzMkFycmF5KDkgKiAzKTtcbiAgICB2YXIgbm9ybWFsID0gdmVjMy5jcmVhdGUoKTtcbiAgICB2YXIgdGV4ZWwgPSB2ZWMzLmNyZWF0ZSgpO1xuICAgIHZhciBmZXRjaE5vcm1hbCA9IHZlYzMuY3JlYXRlKCk7XG4gICAgZm9yICh2YXIgbSA9IDA7IG0gPCA5OyBtKyspIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IHZlYzMuY3JlYXRlKCk7XG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdGFyZ2V0cy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgdmFyIHBpeGVscyA9IGN1YmVQaXhlbHNbdGFyZ2V0c1trXV07XG5cbiAgICAgICAgICAgIHZhciBzaWRlUmVzdWx0ID0gdmVjMy5jcmVhdGUoKTtcbiAgICAgICAgICAgIHZhciBkaXZpZGVyID0gMDtcbiAgICAgICAgICAgIHZhciBpID0gMDtcbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBub3JtYWxUcmFuc2Zvcm1bdGFyZ2V0c1trXV07XG4gICAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbm9ybWFsWzBdID0geCAvICh3aWR0aCAtIDEuMCkgKiAyLjAgLSAxLjA7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gRmxpcCB5P1xuICAgICAgICAgICAgICAgICAgICBub3JtYWxbMV0gPSB5IC8gKGhlaWdodCAtIDEuMCkgKiAyLjAgLSAxLjA7XG4gICAgICAgICAgICAgICAgICAgIG5vcm1hbFsyXSA9IC0xLjA7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMubm9ybWFsaXplKG5vcm1hbCwgbm9ybWFsKTtcblxuICAgICAgICAgICAgICAgICAgICBmZXRjaE5vcm1hbFswXSA9IG5vcm1hbFt0cmFuc2Zvcm1bMF1dICogdHJhbnNmb3JtWzNdO1xuICAgICAgICAgICAgICAgICAgICBmZXRjaE5vcm1hbFsxXSA9IG5vcm1hbFt0cmFuc2Zvcm1bMV1dICogdHJhbnNmb3JtWzRdO1xuICAgICAgICAgICAgICAgICAgICBmZXRjaE5vcm1hbFsyXSA9IG5vcm1hbFt0cmFuc2Zvcm1bMl1dICogdHJhbnNmb3JtWzVdO1xuXG4gICAgICAgICAgICAgICAgICAgIHRleGVsWzBdID0gcGl4ZWxzW2krK10gLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIHRleGVsWzFdID0gcGl4ZWxzW2krK10gLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIHRleGVsWzJdID0gcGl4ZWxzW2krK10gLyAyNTU7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJHQk0gRGVjb2RlXG4gICAgICAgICAgICAgICAgICAgIHZhciBzY2FsZSA9IHBpeGVsc1tpKytdIC8gMjU1ICogOC4xMjtcbiAgICAgICAgICAgICAgICAgICAgdGV4ZWxbMF0gKj0gc2NhbGU7XG4gICAgICAgICAgICAgICAgICAgIHRleGVsWzFdICo9IHNjYWxlO1xuICAgICAgICAgICAgICAgICAgICB0ZXhlbFsyXSAqPSBzY2FsZTtcblxuICAgICAgICAgICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKHNpZGVSZXN1bHQsIHNpZGVSZXN1bHQsIHRleGVsLCBoYXJtb25pY3MoZmV0Y2hOb3JtYWwsIG0pICogLW5vcm1hbFsyXSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIC1ub3JtYWwueiBlcXVhbHMgY29zKHRoZXRhKSBvZiBMYW1iZXJ0aWFuXG4gICAgICAgICAgICAgICAgICAgIGRpdmlkZXIgKz0gLW5vcm1hbFsyXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2ZWMzLnNjYWxlQW5kQWRkKHJlc3VsdCwgcmVzdWx0LCBzaWRlUmVzdWx0LCAxIC8gZGl2aWRlcik7XG4gICAgICAgIH1cblxuICAgICAgICBjb2VmZlttICogM10gPSByZXN1bHRbMF0gLyA2LjA7XG4gICAgICAgIGNvZWZmW20gKiAzICsgMV0gPSByZXN1bHRbMV0gLyA2LjA7XG4gICAgICAgIGNvZWZmW20gKiAzICsgMl0gPSByZXN1bHRbMl0gLyA2LjA7XG4gICAgfVxuICAgIHJldHVybiBjb2VmZjtcbn1cblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICogQHBhcmFtICB7Y2xheS5UZXh0dXJlfSBlbnZNYXBcbiAqIEBwYXJhbSAge09iamVjdH0gW3RleHR1cmVPcHRzXVxuICogQHBhcmFtICB7T2JqZWN0fSBbdGV4dHVyZU9wdHMubG9kXVxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3RleHR1cmVPcHRzLmRlY29kZVJHQk1dXG4gKi9cbnNoLnByb2plY3RFbnZpcm9ubWVudE1hcCA9IGZ1bmN0aW9uIChyZW5kZXJlciwgZW52TWFwLCBvcHRzKSB7XG5cbiAgICAvLyBUT0RPIHNSR0JcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIG9wdHMubG9kID0gb3B0cy5sb2QgfHwgMDtcblxuICAgIHZhciBza3lib3g7XG4gICAgdmFyIGR1bW15U2NlbmUgPSBuZXcgU2NlbmUoKTtcbiAgICB2YXIgc2l6ZSA9IDY0O1xuICAgIGlmIChlbnZNYXAudGV4dHVyZVR5cGUgPT09ICd0ZXh0dXJlMkQnKSB7XG4gICAgICAgIHNreWJveCA9IG5ldyBTa3lkb21lKHtcbiAgICAgICAgICAgIHNjZW5lOiBkdW1teVNjZW5lLFxuICAgICAgICAgICAgZW52aXJvbm1lbnRNYXA6IGVudk1hcFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHNpemUgPSAoZW52TWFwLmltYWdlICYmIGVudk1hcC5pbWFnZS5weCkgPyBlbnZNYXAuaW1hZ2UucHgud2lkdGggOiBlbnZNYXAud2lkdGg7XG4gICAgICAgIHNreWJveCA9IG5ldyBTa3lib3goe1xuICAgICAgICAgICAgc2NlbmU6IGR1bW15U2NlbmUsXG4gICAgICAgICAgICBlbnZpcm9ubWVudE1hcDogZW52TWFwXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDb252ZXJ0IHRvIHJnYm1cbiAgICB2YXIgd2lkdGggPSBNYXRoLmNlaWwoc2l6ZSAvIE1hdGgucG93KDIsIG9wdHMubG9kKSk7XG4gICAgdmFyIGhlaWdodCA9IE1hdGguY2VpbChzaXplIC8gTWF0aC5wb3coMiwgb3B0cy5sb2QpKTtcbiAgICB2YXIgcmdibVRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH0pO1xuICAgIHZhciBmcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuICAgIHNreWJveC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1JHQk1fRU5DT0RFJyk7XG4gICAgaWYgKG9wdHMuZGVjb2RlUkdCTSkge1xuICAgICAgICBza3lib3gubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdSR0JNX0RFQ09ERScpO1xuICAgIH1cbiAgICBza3lib3gubWF0ZXJpYWwuc2V0KCdsb2QnLCBvcHRzLmxvZCk7XG4gICAgdmFyIGVudk1hcFBhc3MgPSBuZXcgRW52aXJvbm1lbnRNYXBQYXNzKHtcbiAgICAgICAgdGV4dHVyZTogcmdibVRleHR1cmVcbiAgICB9KTtcbiAgICB2YXIgY3ViZVBpeGVscyA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjdWJlUGl4ZWxzW3RhcmdldHNbaV1dID0gbmV3IFVpbnQ4QXJyYXkod2lkdGggKiBoZWlnaHQgKiA0KTtcbiAgICAgICAgdmFyIGNhbWVyYSA9IGVudk1hcFBhc3MuZ2V0Q2FtZXJhKHRhcmdldHNbaV0pO1xuICAgICAgICBjYW1lcmEuZm92ID0gOTA7XG4gICAgICAgIGZyYW1lYnVmZmVyLmF0dGFjaChyZ2JtVGV4dHVyZSk7XG4gICAgICAgIGZyYW1lYnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoZHVtbXlTY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgcmVuZGVyZXIuZ2wucmVhZFBpeGVscyhcbiAgICAgICAgICAgIDAsIDAsIHdpZHRoLCBoZWlnaHQsXG4gICAgICAgICAgICBUZXh0dXJlLlJHQkEsIFRleHR1cmUuVU5TSUdORURfQllURSwgY3ViZVBpeGVsc1t0YXJnZXRzW2ldXVxuICAgICAgICApO1xuICAgICAgICBmcmFtZWJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgIH1cblxuICAgIHNreWJveC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICBmcmFtZWJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICByZ2JtVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgIHJldHVybiBwcm9qZWN0RW52aXJvbm1lbnRNYXBDUFUocmVuZGVyZXIsIGN1YmVQaXhlbHMsIHdpZHRoLCBoZWlnaHQpO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgc2g7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC9zaC5qc1xuLy8gbW9kdWxlIGlkID0gOTlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///99\n");

/***/ }),
/* 100 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_util__ = __webpack_require__(11);\n\n\n\n\n/**\n * @constructor\n * @alias clay.async.Task\n * @mixes clay.core.mixin.notifier\n */\nfunction Task() {\n    this._fullfilled = false;\n    this._rejected = false;\n};\n/**\n * Task successed\n * @param {} data\n */\nTask.prototype.resolve = function(data) {\n    this._fullfilled = true;\n    this._rejected = false;\n    this.trigger('success', data);\n};\n/**\n * Task failed\n * @param {} err\n */\nTask.prototype.reject = function(err) {\n    this._rejected = true;\n    this._fullfilled = false;\n    this.trigger('error', err);\n};\n/**\n * If task successed\n * @return {boolean}\n */\nTask.prototype.isFullfilled = function() {\n    return this._fullfilled;\n};\n/**\n * If task failed\n * @return {boolean}\n */\nTask.prototype.isRejected = function() {\n    return this._rejected;\n};\n/**\n * If task finished, either successed or failed\n * @return {boolean}\n */\nTask.prototype.isSettled = function() {\n    return this._fullfilled || this._rejected;\n};\n\n__WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].extend(Task.prototype, __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__[\"a\" /* default */]);\n\nfunction makeRequestTask(url, responseType) {\n    var task = new Task();\n    __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].request.get({\n        url: url,\n        responseType: responseType,\n        onload: function(res) {\n            task.resolve(res);\n        },\n        onerror: function(error) {\n            task.reject(error);\n        }\n    });\n    return task;\n}\n/**\n * Make a vendor.request task\n * @param  {string|object|object[]|string[]} url\n * @param  {string} [responseType]\n * @example\n *     var task = Task.makeRequestTask('./a.json');\n *     var task = Task.makeRequestTask({\n *         url: 'b.bin',\n *         responseType: 'arraybuffer'\n *     });\n *     var tasks = Task.makeRequestTask(['./a.json', './b.json']);\n *     var tasks = Task.makeRequestTask([\n *         {url: 'a.json'},\n *         {url: 'b.bin', responseType: 'arraybuffer'}\n *     ]);\n * @return {clay.async.Task|clay.async.Task[]}\n */\nTask.makeRequestTask = function(url, responseType) {\n    if (typeof url === 'string') {\n        return makeRequestTask(url, responseType);\n    }\n    else if (url.url) {   //  Configure object\n        var obj = url;\n        return makeRequestTask(obj.url, obj.responseType);\n    }\n    else if (Array.isArray(url)) {  // Url list\n        var urlList = url;\n        var tasks = [];\n        urlList.forEach(function(obj) {\n            var url, responseType;\n            if (typeof obj === 'string') {\n                url = obj;\n            }\n            else if (Object(obj) === obj) {\n                url = obj.url;\n                responseType = obj.responseType;\n            }\n            tasks.push(makeRequestTask(url, responseType));\n        });\n        return tasks;\n    }\n};\n/**\n * @return {clay.async.Task}\n */\nTask.makeTask = function() {\n    return new Task();\n};\n\n__WEBPACK_IMPORTED_MODULE_2__core_util__[\"a\" /* default */].extend(Task.prototype, __WEBPACK_IMPORTED_MODULE_0__core_mixin_notifier__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Task);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hc3luYy9UYXNrLmpzPzI1Y2YiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG5vdGlmaWVyIGZyb20gJy4uL2NvcmUvbWl4aW4vbm90aWZpZXInO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgdXRpbCAgZnJvbSAnLi4vY29yZS91dGlsJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFzeW5jLlRhc2tcbiAqIEBtaXhlcyBjbGF5LmNvcmUubWl4aW4ubm90aWZpZXJcbiAqL1xuZnVuY3Rpb24gVGFzaygpIHtcbiAgICB0aGlzLl9mdWxsZmlsbGVkID0gZmFsc2U7XG4gICAgdGhpcy5fcmVqZWN0ZWQgPSBmYWxzZTtcbn07XG4vKipcbiAqIFRhc2sgc3VjY2Vzc2VkXG4gKiBAcGFyYW0ge30gZGF0YVxuICovXG5UYXNrLnByb3RvdHlwZS5yZXNvbHZlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgIHRoaXMuX2Z1bGxmaWxsZWQgPSB0cnVlO1xuICAgIHRoaXMuX3JlamVjdGVkID0gZmFsc2U7XG4gICAgdGhpcy50cmlnZ2VyKCdzdWNjZXNzJywgZGF0YSk7XG59O1xuLyoqXG4gKiBUYXNrIGZhaWxlZFxuICogQHBhcmFtIHt9IGVyclxuICovXG5UYXNrLnByb3RvdHlwZS5yZWplY3QgPSBmdW5jdGlvbihlcnIpIHtcbiAgICB0aGlzLl9yZWplY3RlZCA9IHRydWU7XG4gICAgdGhpcy5fZnVsbGZpbGxlZCA9IGZhbHNlO1xuICAgIHRoaXMudHJpZ2dlcignZXJyb3InLCBlcnIpO1xufTtcbi8qKlxuICogSWYgdGFzayBzdWNjZXNzZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cblRhc2sucHJvdG90eXBlLmlzRnVsbGZpbGxlZCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl9mdWxsZmlsbGVkO1xufTtcbi8qKlxuICogSWYgdGFzayBmYWlsZWRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cblRhc2sucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVqZWN0ZWQ7XG59O1xuLyoqXG4gKiBJZiB0YXNrIGZpbmlzaGVkLCBlaXRoZXIgc3VjY2Vzc2VkIG9yIGZhaWxlZFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuVGFzay5wcm90b3R5cGUuaXNTZXR0bGVkID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX2Z1bGxmaWxsZWQgfHwgdGhpcy5fcmVqZWN0ZWQ7XG59O1xuXG51dGlsLmV4dGVuZChUYXNrLnByb3RvdHlwZSwgbm90aWZpZXIpO1xuXG5mdW5jdGlvbiBtYWtlUmVxdWVzdFRhc2sodXJsLCByZXNwb25zZVR5cGUpIHtcbiAgICB2YXIgdGFzayA9IG5ldyBUYXNrKCk7XG4gICAgdmVuZG9yLnJlcXVlc3QuZ2V0KHtcbiAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgIHJlc3BvbnNlVHlwZTogcmVzcG9uc2VUeXBlLFxuICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlcykge1xuICAgICAgICAgICAgdGFzay5yZXNvbHZlKHJlcyk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICB0YXNrLnJlamVjdChlcnJvcik7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gdGFzaztcbn1cbi8qKlxuICogTWFrZSBhIHZlbmRvci5yZXF1ZXN0IHRhc2tcbiAqIEBwYXJhbSAge3N0cmluZ3xvYmplY3R8b2JqZWN0W118c3RyaW5nW119IHVybFxuICogQHBhcmFtICB7c3RyaW5nfSBbcmVzcG9uc2VUeXBlXVxuICogQGV4YW1wbGVcbiAqICAgICB2YXIgdGFzayA9IFRhc2subWFrZVJlcXVlc3RUYXNrKCcuL2EuanNvbicpO1xuICogICAgIHZhciB0YXNrID0gVGFzay5tYWtlUmVxdWVzdFRhc2soe1xuICogICAgICAgICB1cmw6ICdiLmJpbicsXG4gKiAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ1xuICogICAgIH0pO1xuICogICAgIHZhciB0YXNrcyA9IFRhc2subWFrZVJlcXVlc3RUYXNrKFsnLi9hLmpzb24nLCAnLi9iLmpzb24nXSk7XG4gKiAgICAgdmFyIHRhc2tzID0gVGFzay5tYWtlUmVxdWVzdFRhc2soW1xuICogICAgICAgICB7dXJsOiAnYS5qc29uJ30sXG4gKiAgICAgICAgIHt1cmw6ICdiLmJpbicsIHJlc3BvbnNlVHlwZTogJ2FycmF5YnVmZmVyJ31cbiAqICAgICBdKTtcbiAqIEByZXR1cm4ge2NsYXkuYXN5bmMuVGFza3xjbGF5LmFzeW5jLlRhc2tbXX1cbiAqL1xuVGFzay5tYWtlUmVxdWVzdFRhc2sgPSBmdW5jdGlvbih1cmwsIHJlc3BvbnNlVHlwZSkge1xuICAgIGlmICh0eXBlb2YgdXJsID09PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gbWFrZVJlcXVlc3RUYXNrKHVybCwgcmVzcG9uc2VUeXBlKTtcbiAgICB9XG4gICAgZWxzZSBpZiAodXJsLnVybCkgeyAgIC8vICBDb25maWd1cmUgb2JqZWN0XG4gICAgICAgIHZhciBvYmogPSB1cmw7XG4gICAgICAgIHJldHVybiBtYWtlUmVxdWVzdFRhc2sob2JqLnVybCwgb2JqLnJlc3BvbnNlVHlwZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodXJsKSkgeyAgLy8gVXJsIGxpc3RcbiAgICAgICAgdmFyIHVybExpc3QgPSB1cmw7XG4gICAgICAgIHZhciB0YXNrcyA9IFtdO1xuICAgICAgICB1cmxMaXN0LmZvckVhY2goZnVuY3Rpb24ob2JqKSB7XG4gICAgICAgICAgICB2YXIgdXJsLCByZXNwb25zZVR5cGU7XG4gICAgICAgICAgICBpZiAodHlwZW9mIG9iaiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB1cmwgPSBvYmo7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChPYmplY3Qob2JqKSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgdXJsID0gb2JqLnVybDtcbiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGUgPSBvYmoucmVzcG9uc2VUeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGFza3MucHVzaChtYWtlUmVxdWVzdFRhc2sodXJsLCByZXNwb25zZVR5cGUpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0YXNrcztcbiAgICB9XG59O1xuLyoqXG4gKiBAcmV0dXJuIHtjbGF5LmFzeW5jLlRhc2t9XG4gKi9cblRhc2subWFrZVRhc2sgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRhc2soKTtcbn07XG5cbnV0aWwuZXh0ZW5kKFRhc2sucHJvdG90eXBlLCBub3RpZmllcik7XG5cbmV4cG9ydCBkZWZhdWx0IFRhc2s7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvYXN5bmMvVGFzay5qc1xuLy8gbW9kdWxlIGlkID0gMTAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///100\n");

/***/ }),
/* 101 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Graph__ = __webpack_require__(102);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__TexturePool__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n/**\n * Compositor provide graph based post processing\n *\n * @constructor clay.compositor.Compositor\n * @extends clay.compositor.Graph\n *\n */\nvar Compositor = __WEBPACK_IMPORTED_MODULE_0__Graph__[\"a\" /* default */].extend(function() {\n    return {\n        // Output node\n        _outputs: [],\n\n        _texturePool: new __WEBPACK_IMPORTED_MODULE_1__TexturePool__[\"a\" /* default */](),\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__[\"a\" /* default */]({\n            depthBuffer: false\n        })\n    };\n},\n/** @lends clay.compositor.Compositor.prototype */\n{\n    addNode: function(node) {\n        __WEBPACK_IMPORTED_MODULE_0__Graph__[\"a\" /* default */].prototype.addNode.call(this, node);\n        node._compositor = this;\n    },\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    render: function(renderer, frameBuffer) {\n        if (this._dirty) {\n            this.update();\n            this._dirty = false;\n\n            this._outputs.length = 0;\n            for (var i = 0; i < this.nodes.length; i++) {\n                if (!this.nodes[i].outputs) {\n                    this._outputs.push(this.nodes[i]);\n                }\n            }\n        }\n\n        for (var i = 0; i < this.nodes.length; i++) {\n            // Update the reference number of each output texture\n            this.nodes[i].beforeFrame();\n        }\n\n        for (var i = 0; i < this._outputs.length; i++) {\n            this._outputs[i].updateReference();\n        }\n\n        for (var i = 0; i < this._outputs.length; i++) {\n            this._outputs[i].render(renderer, frameBuffer);\n        }\n\n        for (var i = 0; i < this.nodes.length; i++) {\n            // Clear up\n            this.nodes[i].afterFrame();\n        }\n    },\n\n    allocateTexture: function (parameters) {\n        return this._texturePool.get(parameters);\n    },\n\n    releaseTexture: function (parameters) {\n        this._texturePool.put(parameters);\n    },\n\n    getFrameBuffer: function () {\n        return this._frameBuffer;\n    },\n\n    /**\n     * Dispose compositor\n     * @param {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._texturePool.clear(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Compositor);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL0NvbXBvc2l0b3IuanM/NDI3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR3JhcGggZnJvbSAnLi9HcmFwaCc7XG5pbXBvcnQgVGV4dHVyZVBvb2wgZnJvbSAnLi9UZXh0dXJlUG9vbCc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuXG4vKipcbiAqIENvbXBvc2l0b3IgcHJvdmlkZSBncmFwaCBiYXNlZCBwb3N0IHByb2Nlc3NpbmdcbiAqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JcbiAqIEBleHRlbmRzIGNsYXkuY29tcG9zaXRvci5HcmFwaFxuICpcbiAqL1xudmFyIENvbXBvc2l0b3IgPSBHcmFwaC5leHRlbmQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgLy8gT3V0cHV0IG5vZGVcbiAgICAgICAgX291dHB1dHM6IFtdLFxuXG4gICAgICAgIF90ZXh0dXJlUG9vbDogbmV3IFRleHR1cmVQb29sKCksXG5cbiAgICAgICAgX2ZyYW1lQnVmZmVyOiBuZXcgRnJhbWVCdWZmZXIoe1xuICAgICAgICAgICAgZGVwdGhCdWZmZXI6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yLnByb3RvdHlwZSAqL1xue1xuICAgIGFkZE5vZGU6IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgR3JhcGgucHJvdG90eXBlLmFkZE5vZGUuY2FsbCh0aGlzLCBub2RlKTtcbiAgICAgICAgbm9kZS5fY29tcG9zaXRvciA9IHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24ocmVuZGVyZXIsIGZyYW1lQnVmZmVyKSB7XG4gICAgICAgIGlmICh0aGlzLl9kaXJ0eSkge1xuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIHRoaXMuX291dHB1dHMubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5ub2Rlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ub2Rlc1tpXS5vdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dHMucHVzaCh0aGlzLm5vZGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgcmVmZXJlbmNlIG51bWJlciBvZiBlYWNoIG91dHB1dCB0ZXh0dXJlXG4gICAgICAgICAgICB0aGlzLm5vZGVzW2ldLmJlZm9yZUZyYW1lKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX291dHB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dHNbaV0udXBkYXRlUmVmZXJlbmNlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX291dHB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dHNbaV0ucmVuZGVyKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIENsZWFyIHVwXG4gICAgICAgICAgICB0aGlzLm5vZGVzW2ldLmFmdGVyRnJhbWUoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBhbGxvY2F0ZVRleHR1cmU6IGZ1bmN0aW9uIChwYXJhbWV0ZXJzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlUG9vbC5nZXQocGFyYW1ldGVycyk7XG4gICAgfSxcblxuICAgIHJlbGVhc2VUZXh0dXJlOiBmdW5jdGlvbiAocGFyYW1ldGVycykge1xuICAgICAgICB0aGlzLl90ZXh0dXJlUG9vbC5wdXQocGFyYW1ldGVycyk7XG4gICAgfSxcblxuICAgIGdldEZyYW1lQnVmZmVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZUJ1ZmZlcjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGlzcG9zZSBjb21wb3NpdG9yXG4gICAgICogQHBhcmFtIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLl90ZXh0dXJlUG9vbC5jbGVhcihyZW5kZXJlcik7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBvc2l0b3I7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9Db21wb3NpdG9yLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///101\n");

/***/ }),
/* 102 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__CompositorNode__ = __webpack_require__(35);\n\n\n\n/**\n * @constructor clay.compositor.Graph\n * @extends clay.core.Base\n */\nvar Graph = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.Graph# */ {\n        /**\n         * @type {Array.<clay.compositor.CompositorNode>}\n         */\n        nodes: []\n    };\n},\n/** @lends clay.compositor.Graph.prototype */\n{\n\n    /**\n     * Mark to update\n     */\n    dirty: function () {\n        this._dirty = true;\n    },\n    /**\n     * @param {clay.compositor.CompositorNode} node\n     */\n    addNode: function (node) {\n\n        if (this.nodes.indexOf(node) >= 0) {\n            return;\n        }\n\n        this.nodes.push(node);\n\n        this._dirty = true;\n    },\n    /**\n     * @param  {clay.compositor.CompositorNode|string} node\n     */\n    removeNode: function (node) {\n        if (typeof node === 'string') {\n            node = this.getNodeByName(node);\n        }\n        var idx = this.nodes.indexOf(node);\n        if (idx >= 0) {\n            this.nodes.splice(idx, 1);\n            this._dirty = true;\n        }\n    },\n    /**\n     * @param {string} name\n     * @return {clay.compositor.CompositorNode}\n     */\n    getNodeByName: function (name) {\n        for (var i = 0; i < this.nodes.length; i++) {\n            if (this.nodes[i].name === name) {\n                return this.nodes[i];\n            }\n        }\n    },\n    /**\n     * Update links of graph\n     */\n    update: function () {\n        for (var i = 0; i < this.nodes.length; i++) {\n            this.nodes[i].clear();\n        }\n        // Traverse all the nodes and build the graph\n        for (var i = 0; i < this.nodes.length; i++) {\n            var node = this.nodes[i];\n\n            if (!node.inputs) {\n                continue;\n            }\n            for (var inputName in node.inputs) {\n                if (!node.inputs[inputName]) {\n                    continue;\n                }\n                if (node.pass && !node.pass.material.isUniformEnabled(inputName)) {\n                    console.warn('Pin '  + node.name + '.' + inputName + ' not used.');\n                    continue;\n                }\n                var fromPinInfo = node.inputs[inputName];\n\n                var fromPin = this.findPin(fromPinInfo);\n                if (fromPin) {\n                    node.link(inputName, fromPin.node, fromPin.pin);\n                }\n                else {\n                    if (typeof fromPinInfo === 'string') {\n                        console.warn('Node ' + fromPinInfo + ' not exist');\n                    }\n                    else {\n                        console.warn('Pin of ' + fromPinInfo.node + '.' + fromPinInfo.pin + ' not exist');\n                    }\n                }\n            }\n        }\n    },\n\n    findPin: function (input) {\n        var node;\n        // Try to take input as a directly a node\n        if (typeof input === 'string' || input instanceof __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */]) {\n            input = {\n                node: input\n            };\n        }\n\n        if (typeof input.node === 'string') {\n            for (var i = 0; i < this.nodes.length; i++) {\n                var tmp = this.nodes[i];\n                if (tmp.name === input.node) {\n                    node = tmp;\n                }\n            }\n        }\n        else {\n            node = input.node;\n        }\n        if (node) {\n            var inputPin = input.pin;\n            if (!inputPin) {\n                // Use first pin defaultly\n                if (node.outputs) {\n                    inputPin = Object.keys(node.outputs)[0];\n                }\n            }\n            if (node.outputs[inputPin]) {\n                return {\n                    node: node,\n                    pin: inputPin\n                };\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Graph);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL0dyYXBoLmpzPzNhZWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBHcmFwaE5vZGUgZnJvbSAnLi9Db21wb3NpdG9yTm9kZSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuY29tcG9zaXRvci5HcmFwaFxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEdyYXBoID0gQmFzZS5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5HcmFwaCMgKi8ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5LjxjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGU+fVxuICAgICAgICAgKi9cbiAgICAgICAgbm9kZXM6IFtdXG4gICAgfTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5HcmFwaC5wcm90b3R5cGUgKi9cbntcblxuICAgIC8qKlxuICAgICAqIE1hcmsgdG8gdXBkYXRlXG4gICAgICovXG4gICAgZGlydHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGV9IG5vZGVcbiAgICAgKi9cbiAgICBhZGROb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuXG4gICAgICAgIGlmICh0aGlzLm5vZGVzLmluZGV4T2Yobm9kZSkgPj0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ub2Rlcy5wdXNoKG5vZGUpO1xuXG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZXxzdHJpbmd9IG5vZGVcbiAgICAgKi9cbiAgICByZW1vdmVOb2RlOiBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBub2RlID0gdGhpcy5nZXROb2RlQnlOYW1lKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZHggPSB0aGlzLm5vZGVzLmluZGV4T2Yobm9kZSk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5ub2Rlcy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmNvbXBvc2l0b3IuQ29tcG9zaXRvck5vZGV9XG4gICAgICovXG4gICAgZ2V0Tm9kZUJ5TmFtZTogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ub2Rlc1tpXS5uYW1lID09PSBuYW1lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubm9kZXNbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBsaW5rcyBvZiBncmFwaFxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubm9kZXNbaV0uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmF2ZXJzZSBhbGwgdGhlIG5vZGVzIGFuZCBidWlsZCB0aGUgZ3JhcGhcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZXNbaV07XG5cbiAgICAgICAgICAgIGlmICghbm9kZS5pbnB1dHMpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGlucHV0TmFtZSBpbiBub2RlLmlucHV0cykge1xuICAgICAgICAgICAgICAgIGlmICghbm9kZS5pbnB1dHNbaW5wdXROYW1lXSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vZGUucGFzcyAmJiAhbm9kZS5wYXNzLm1hdGVyaWFsLmlzVW5pZm9ybUVuYWJsZWQoaW5wdXROYW1lKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1BpbiAnICArIG5vZGUubmFtZSArICcuJyArIGlucHV0TmFtZSArICcgbm90IHVzZWQuJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgZnJvbVBpbkluZm8gPSBub2RlLmlucHV0c1tpbnB1dE5hbWVdO1xuXG4gICAgICAgICAgICAgICAgdmFyIGZyb21QaW4gPSB0aGlzLmZpbmRQaW4oZnJvbVBpbkluZm8pO1xuICAgICAgICAgICAgICAgIGlmIChmcm9tUGluKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUubGluayhpbnB1dE5hbWUsIGZyb21QaW4ubm9kZSwgZnJvbVBpbi5waW4pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmcm9tUGluSW5mbyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTm9kZSAnICsgZnJvbVBpbkluZm8gKyAnIG5vdCBleGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdQaW4gb2YgJyArIGZyb21QaW5JbmZvLm5vZGUgKyAnLicgKyBmcm9tUGluSW5mby5waW4gKyAnIG5vdCBleGlzdCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIGZpbmRQaW46IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgLy8gVHJ5IHRvIHRha2UgaW5wdXQgYXMgYSBkaXJlY3RseSBhIG5vZGVcbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ3N0cmluZycgfHwgaW5wdXQgaW5zdGFuY2VvZiBHcmFwaE5vZGUpIHtcbiAgICAgICAgICAgIGlucHV0ID0ge1xuICAgICAgICAgICAgICAgIG5vZGU6IGlucHV0XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbnB1dC5ub2RlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRtcCA9IHRoaXMubm9kZXNbaV07XG4gICAgICAgICAgICAgICAgaWYgKHRtcC5uYW1lID09PSBpbnB1dC5ub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSB0bXA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbm9kZSA9IGlucHV0Lm5vZGU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHZhciBpbnB1dFBpbiA9IGlucHV0LnBpbjtcbiAgICAgICAgICAgIGlmICghaW5wdXRQaW4pIHtcbiAgICAgICAgICAgICAgICAvLyBVc2UgZmlyc3QgcGluIGRlZmF1bHRseVxuICAgICAgICAgICAgICAgIGlmIChub2RlLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRQaW4gPSBPYmplY3Qua2V5cyhub2RlLm91dHB1dHMpWzBdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLm91dHB1dHNbaW5wdXRQaW5dKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZTogbm9kZSxcbiAgICAgICAgICAgICAgICAgICAgcGluOiBpbnB1dFBpblxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgR3JhcGg7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9HcmFwaC5qc1xuLy8gbW9kdWxlIGlkID0gMTAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///102\n");

/***/ }),
/* 103 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CompositorNode__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_glenum__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__ = __webpack_require__(18);\n\n\n\n\n/**\n * @constructor clay.compositor.SceneNode\n * @extends clay.compositor.CompositorNode\n */\nvar SceneNode = __WEBPACK_IMPORTED_MODULE_0__CompositorNode__[\"a\" /* default */].extend(\n/** @lends clay.compositor.SceneNode# */\n{\n    name: 'scene',\n    /**\n     * @type {clay.Scene}\n     */\n    scene: null,\n    /**\n     * @type {clay.Camera}\n     */\n    camera: null,\n    /**\n     * @type {boolean}\n     */\n    autoUpdateScene: true,\n    /**\n     * @type {boolean}\n     */\n    preZ: false\n\n}, function() {\n    this.frameBuffer = new __WEBPACK_IMPORTED_MODULE_2__FrameBuffer__[\"a\" /* default */]();\n}, {\n    render: function(renderer) {\n\n        this._rendering = true;\n        var _gl = renderer.gl;\n\n        this.trigger('beforerender');\n\n        var renderInfo;\n\n        if (!this.outputs) {\n\n            renderInfo = renderer.render(this.scene, this.camera, !this.autoUpdateScene, this.preZ);\n\n        }\n        else {\n\n            var frameBuffer = this.frameBuffer;\n            for (var name in this.outputs) {\n                var parameters = this.updateParameter(name, renderer);\n                var outputInfo = this.outputs[name];\n                var texture = this._compositor.allocateTexture(parameters);\n                this._outputTextures[name] = texture;\n\n                var attachment = outputInfo.attachment || _gl.COLOR_ATTACHMENT0;\n                if (typeof(attachment) == 'string') {\n                    attachment = _gl[attachment];\n                }\n                frameBuffer.attach(texture, attachment);\n            }\n            frameBuffer.bind(renderer);\n\n            // MRT Support in chrome\n            // https://www.khronos.org/registry/webgl/sdk/tests/conformance/extensions/ext-draw-buffers.html\n            var ext = renderer.getGLExtension('EXT_draw_buffers');\n            if (ext) {\n                var bufs = [];\n                for (var attachment in this.outputs) {\n                    attachment = parseInt(attachment);\n                    if (attachment >= _gl.COLOR_ATTACHMENT0 && attachment <= _gl.COLOR_ATTACHMENT0 + 8) {\n                        bufs.push(attachment);\n                    }\n                }\n                ext.drawBuffersEXT(bufs);\n            }\n\n            // Always clear\n            // PENDING\n            renderer.saveClear();\n            renderer.clearBit = __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].DEPTH_BUFFER_BIT | __WEBPACK_IMPORTED_MODULE_1__core_glenum__[\"a\" /* default */].COLOR_BUFFER_BIT;\n            renderInfo = renderer.render(this.scene, this.camera, !this.autoUpdateScene, this.preZ);\n            renderer.restoreClear();\n\n            frameBuffer.unbind(renderer);\n        }\n\n        this.trigger('afterrender', renderInfo);\n\n        this._rendering = false;\n        this._rendered = true;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SceneNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL1NjZW5lTm9kZS5qcz9jYjJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBDb21wb3NpdG9yTm9kZSBmcm9tICcuL0NvbXBvc2l0b3JOb2RlJztcbmltcG9ydCBnbGVudW0gZnJvbSAnLi4vY29yZS9nbGVudW0nO1xuaW1wb3J0IEZyYW1lQnVmZmVyIGZyb20gJy4uL0ZyYW1lQnVmZmVyJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5jb21wb3NpdG9yLlNjZW5lTm9kZVxuICogQGV4dGVuZHMgY2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlXG4gKi9cbnZhciBTY2VuZU5vZGUgPSBDb21wb3NpdG9yTm9kZS5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkuY29tcG9zaXRvci5TY2VuZU5vZGUjICovXG57XG4gICAgbmFtZTogJ3NjZW5lJyxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5TY2VuZX1cbiAgICAgKi9cbiAgICBzY2VuZTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5DYW1lcmF9XG4gICAgICovXG4gICAgY2FtZXJhOiBudWxsLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGF1dG9VcGRhdGVTY2VuZTogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBwcmVaOiBmYWxzZVxuXG59LCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKCk7XG59LCB7XG4gICAgcmVuZGVyOiBmdW5jdGlvbihyZW5kZXJlcikge1xuXG4gICAgICAgIHRoaXMuX3JlbmRlcmluZyA9IHRydWU7XG4gICAgICAgIHZhciBfZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ2JlZm9yZXJlbmRlcicpO1xuXG4gICAgICAgIHZhciByZW5kZXJJbmZvO1xuXG4gICAgICAgIGlmICghdGhpcy5vdXRwdXRzKSB7XG5cbiAgICAgICAgICAgIHJlbmRlckluZm8gPSByZW5kZXJlci5yZW5kZXIodGhpcy5zY2VuZSwgdGhpcy5jYW1lcmEsICF0aGlzLmF1dG9VcGRhdGVTY2VuZSwgdGhpcy5wcmVaKTtcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICB2YXIgZnJhbWVCdWZmZXIgPSB0aGlzLmZyYW1lQnVmZmVyO1xuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHRoaXMudXBkYXRlUGFyYW1ldGVyKG5hbWUsIHJlbmRlcmVyKTtcbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tuYW1lXTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX2NvbXBvc2l0b3IuYWxsb2NhdGVUZXh0dXJlKHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFRleHR1cmVzW25hbWVdID0gdGV4dHVyZTtcblxuICAgICAgICAgICAgICAgIHZhciBhdHRhY2htZW50ID0gb3V0cHV0SW5mby5hdHRhY2htZW50IHx8IF9nbC5DT0xPUl9BVFRBQ0hNRU5UMDtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKGF0dGFjaG1lbnQpID09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dGFjaG1lbnQgPSBfZ2xbYXR0YWNobWVudF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaCh0ZXh0dXJlLCBhdHRhY2htZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICAvLyBNUlQgU3VwcG9ydCBpbiBjaHJvbWVcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vd3d3Lmtocm9ub3Mub3JnL3JlZ2lzdHJ5L3dlYmdsL3Nkay90ZXN0cy9jb25mb3JtYW5jZS9leHRlbnNpb25zL2V4dC1kcmF3LWJ1ZmZlcnMuaHRtbFxuICAgICAgICAgICAgdmFyIGV4dCA9IHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKCdFWFRfZHJhd19idWZmZXJzJyk7XG4gICAgICAgICAgICBpZiAoZXh0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGJ1ZnMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBhdHRhY2htZW50IGluIHRoaXMub3V0cHV0cykge1xuICAgICAgICAgICAgICAgICAgICBhdHRhY2htZW50ID0gcGFyc2VJbnQoYXR0YWNobWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdHRhY2htZW50ID49IF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCAmJiBhdHRhY2htZW50IDw9IF9nbC5DT0xPUl9BVFRBQ0hNRU5UMCArIDgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZnMucHVzaChhdHRhY2htZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleHQuZHJhd0J1ZmZlcnNFWFQoYnVmcyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFsd2F5cyBjbGVhclxuICAgICAgICAgICAgLy8gUEVORElOR1xuICAgICAgICAgICAgcmVuZGVyZXIuc2F2ZUNsZWFyKCk7XG4gICAgICAgICAgICByZW5kZXJlci5jbGVhckJpdCA9IGdsZW51bS5ERVBUSF9CVUZGRVJfQklUIHwgZ2xlbnVtLkNPTE9SX0JVRkZFUl9CSVQ7XG4gICAgICAgICAgICByZW5kZXJJbmZvID0gcmVuZGVyZXIucmVuZGVyKHRoaXMuc2NlbmUsIHRoaXMuY2FtZXJhLCAhdGhpcy5hdXRvVXBkYXRlU2NlbmUsIHRoaXMucHJlWik7XG4gICAgICAgICAgICByZW5kZXJlci5yZXN0b3JlQ2xlYXIoKTtcblxuICAgICAgICAgICAgZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJyZW5kZXInLCByZW5kZXJJbmZvKTtcblxuICAgICAgICB0aGlzLl9yZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTY2VuZU5vZGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9TY2VuZU5vZGUuanNcbi8vIG1vZHVsZSBpZCA9IDEwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///103\n");

/***/ }),
/* 104 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__CompositorNode__ = __webpack_require__(35);\n\n\n/**\n * @constructor clay.compositor.TextureNode\n * @extends clay.compositor.CompositorNode\n */\nvar TextureNode = __WEBPACK_IMPORTED_MODULE_0__CompositorNode__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.compositor.TextureNode# */ {\n        /**\n         * @type {clay.Texture2D}\n         */\n        texture: null,\n\n        // Texture node must have output without parameters\n        outputs: {\n            color: {}\n        }\n    };\n}, function () {\n}, {\n\n    getOutput: function (renderer, name) {\n        return this.texture;\n    },\n\n    // Do nothing\n    beforeFrame: function () {},\n    afterFrame: function () {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL1RleHR1cmVOb2RlLmpzP2Q1MTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENvbXBvc2l0b3JOb2RlIGZyb20gJy4vQ29tcG9zaXRvck5vZGUnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNvbXBvc2l0b3IuVGV4dHVyZU5vZGVcbiAqIEBleHRlbmRzIGNsYXkuY29tcG9zaXRvci5Db21wb3NpdG9yTm9kZVxuICovXG52YXIgVGV4dHVyZU5vZGUgPSBDb21wb3NpdG9yTm9kZS5leHRlbmQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLlRleHR1cmVOb2RlIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICAgICAqL1xuICAgICAgICB0ZXh0dXJlOiBudWxsLFxuXG4gICAgICAgIC8vIFRleHR1cmUgbm9kZSBtdXN0IGhhdmUgb3V0cHV0IHdpdGhvdXQgcGFyYW1ldGVyc1xuICAgICAgICBvdXRwdXRzOiB7XG4gICAgICAgICAgICBjb2xvcjoge31cbiAgICAgICAgfVxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG59LCB7XG5cbiAgICBnZXRPdXRwdXQ6IGZ1bmN0aW9uIChyZW5kZXJlciwgbmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0dXJlO1xuICAgIH0sXG5cbiAgICAvLyBEbyBub3RoaW5nXG4gICAgYmVmb3JlRnJhbWU6IGZ1bmN0aW9uICgpIHt9LFxuICAgIGFmdGVyRnJhbWU6IGZ1bmN0aW9uICgpIHt9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgVGV4dHVyZU5vZGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvY29tcG9zaXRvci9UZXh0dXJlTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///104\n");

/***/ }),
/* 105 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__CompositorNode__ = __webpack_require__(35);\n// TODO Shader library\n\n\n\n// TODO curlnoise demo wrong\n\n// PENDING\n// Use topological sort ?\n\n/**\n * Filter node\n *\n * @constructor clay.compositor.FilterNode\n * @extends clay.compositor.CompositorNode\n *\n * @example\n    var node = new clay.compositor.FilterNode({\n        name: 'fxaa',\n        shader: clay.Shader.source('clay.compositor.fxaa'),\n        inputs: {\n            texture: {\n                    node: 'scene',\n                    pin: 'color'\n            }\n        },\n        // Multiple outputs is preserved for MRT support in WebGL2.0\n        outputs: {\n            color: {\n                attachment: clay.FrameBuffer.COLOR_ATTACHMENT0\n                parameters: {\n                    format: clay.Texture.RGBA,\n                    width: 512,\n                    height: 512\n                },\n                // Node will keep the RTT rendered in last frame\n                keepLastFrame: true,\n                // Force the node output the RTT rendered in last frame\n                outputLastFrame: true\n            }\n        }\n    });\n    *\n    */\nvar FilterNode = __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.compositor.FilterNode# */ {\n        /**\n         * @type {string}\n         */\n        name: '',\n\n        /**\n         * @type {Object}\n         */\n        inputs: {},\n\n        /**\n         * @type {Object}\n         */\n        outputs: null,\n\n        /**\n         * @type {string}\n         */\n        shader: '',\n\n        /**\n         * Input links, will be updated by the graph\n         * @example:\n         *     inputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        inputLinks: {},\n\n        /**\n         * Output links, will be updated by the graph\n         * @example:\n         *     outputName: {\n         *         node: someNode,\n         *         pin: 'xxxx'\n         *     }\n         * @type {Object}\n         */\n        outputLinks: {},\n\n        /**\n         * @type {clay.compositor.Pass}\n         */\n        pass: null,\n\n        // Save the output texture of previous frame\n        // Will be used when there exist a circular reference\n        _prevOutputTextures: {},\n        _outputTextures: {},\n\n        // Example: { name: 2 }\n        _outputReferences: {},\n\n        _rendering: false,\n        // If rendered in this frame\n        _rendered: false,\n\n        _compositor: null\n    };\n}, function () {\n\n    var pass = new __WEBPACK_IMPORTED_MODULE_0__Pass__[\"a\" /* default */]({\n        fragment: this.shader\n    });\n    this.pass = pass;\n},\n/** @lends clay.compositor.FilterNode.prototype */\n{\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    render: function (renderer, frameBuffer) {\n        this.trigger('beforerender', renderer);\n\n        this._rendering = true;\n\n        var _gl = renderer.gl;\n\n        for (var inputName in this.inputLinks) {\n            var link = this.inputLinks[inputName];\n            var inputTexture = link.node.getOutput(renderer, link.pin);\n            this.pass.setUniform(inputName, inputTexture);\n        }\n        // Output\n        if (!this.outputs) {\n            this.pass.outputs = null;\n\n            this._compositor.getFrameBuffer().unbind(renderer);\n\n            this.pass.render(renderer, frameBuffer);\n        }\n        else {\n            this.pass.outputs = {};\n\n            var attachedTextures = {};\n            for (var name in this.outputs) {\n                var parameters = this.updateParameter(name, renderer);\n                if (isNaN(parameters.width)) {\n                    this.updateParameter(name, renderer);\n                }\n                var outputInfo = this.outputs[name];\n                var texture = this._compositor.allocateTexture(parameters);\n                this._outputTextures[name] = texture;\n                var attachment = outputInfo.attachment || _gl.COLOR_ATTACHMENT0;\n                if (typeof(attachment) === 'string') {\n                    attachment = _gl[attachment];\n                }\n                attachedTextures[attachment] = texture;\n            }\n            this._compositor.getFrameBuffer().bind(renderer);\n\n            for (var attachment in attachedTextures) {\n                // FIXME attachment changes in different nodes\n                this._compositor.getFrameBuffer().attach(\n                    attachedTextures[attachment], attachment\n                );\n            }\n\n            this.pass.render(renderer);\n\n            // Because the data of texture is changed over time,\n            // Here update the mipmaps of texture each time after rendered;\n            this._compositor.getFrameBuffer().updateMipmap(renderer);\n        }\n\n        for (var inputName in this.inputLinks) {\n            var link = this.inputLinks[inputName];\n            link.node.removeReference(link.pin);\n        }\n\n        this._rendering = false;\n        this._rendered = true;\n\n        this.trigger('afterrender', renderer);\n    },\n\n    // TODO Remove parameter function callback\n    updateParameter: function (outputName, renderer) {\n        var outputInfo = this.outputs[outputName];\n        var parameters = outputInfo.parameters;\n        var parametersCopy = outputInfo._parametersCopy;\n        if (!parametersCopy) {\n            parametersCopy = outputInfo._parametersCopy = {};\n        }\n        if (parameters) {\n            for (var key in parameters) {\n                if (key !== 'width' && key !== 'height') {\n                    parametersCopy[key] = parameters[key];\n                }\n            }\n        }\n        var width, height;\n        if (typeof parameters.width === 'function') {\n            width = parameters.width.call(this, renderer);\n        }\n        else {\n            width = parameters.width;\n        }\n        if (typeof parameters.height === 'function') {\n            height = parameters.height.call(this, renderer);\n        }\n        else {\n            height = parameters.height;\n        }\n        width = Math.ceil(width);\n        height = Math.ceil(height);\n        if (\n            parametersCopy.width !== width\n            || parametersCopy.height !== height\n        ) {\n            if (this._outputTextures[outputName]) {\n                this._outputTextures[outputName].dispose(renderer);\n            }\n        }\n        parametersCopy.width = width;\n        parametersCopy.height = height;\n\n        return parametersCopy;\n    },\n\n    /**\n     * Set parameter\n     * @param {string} name\n     * @param {} value\n     */\n    setParameter: function (name, value) {\n        this.pass.setUniform(name, value);\n    },\n    /**\n     * Get parameter value\n     * @param  {string} name\n     * @return {}\n     */\n    getParameter: function (name) {\n        return this.pass.getUniform(name);\n    },\n    /**\n     * Set parameters\n     * @param {Object} obj\n     */\n    setParameters: function (obj) {\n        for (var name in obj) {\n            this.setParameter(name, obj[name]);\n        }\n    },\n    // /**\n    //  * Set shader code\n    //  * @param {string} shaderStr\n    //  */\n    // setShader: function (shaderStr) {\n    //     var material = this.pass.material;\n    //     material.shader.setFragment(shaderStr);\n    //     material.attachShader(material.shader, true);\n    // },\n    /**\n     * Proxy of pass.material.define('fragment', xxx);\n     * @param  {string} symbol\n     * @param  {number} [val]\n     */\n    define: function (symbol, val) {\n        this.pass.material.define('fragment', symbol, val);\n    },\n\n    /**\n     * Proxy of pass.material.undefine('fragment', xxx)\n     * @param  {string} symbol\n     */\n    undefine: function (symbol) {\n        this.pass.material.undefine('fragment', symbol);\n    },\n\n    removeReference: function (outputName) {\n        this._outputReferences[outputName]--;\n        if (this._outputReferences[outputName] === 0) {\n            var outputInfo = this.outputs[outputName];\n            if (outputInfo.keepLastFrame) {\n                if (this._prevOutputTextures[outputName]) {\n                    this._compositor.releaseTexture(this._prevOutputTextures[outputName]);\n                }\n                this._prevOutputTextures[outputName] = this._outputTextures[outputName];\n            }\n            else {\n                // Output of this node have alreay been used by all other nodes\n                // Put the texture back to the pool.\n                this._compositor.releaseTexture(this._outputTextures[outputName]);\n            }\n        }\n    },\n\n    clear: function () {\n        __WEBPACK_IMPORTED_MODULE_1__CompositorNode__[\"a\" /* default */].prototype.clear.call(this);\n\n        // Default disable all texture\n        this.pass.material.disableTexturesAll();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FilterNode);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL0ZpbHRlck5vZGUuanM/MDY4YyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPIFNoYWRlciBsaWJyYXJ5XG5pbXBvcnQgUGFzcyBmcm9tICcuL1Bhc3MnO1xuaW1wb3J0IENvbXBvc2l0b3JOb2RlIGZyb20gJy4vQ29tcG9zaXRvck5vZGUnO1xuXG4vLyBUT0RPIGN1cmxub2lzZSBkZW1vIHdyb25nXG5cbi8vIFBFTkRJTkdcbi8vIFVzZSB0b3BvbG9naWNhbCBzb3J0ID9cblxuLyoqXG4gKiBGaWx0ZXIgbm9kZVxuICpcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmNvbXBvc2l0b3IuRmlsdGVyTm9kZVxuICogQGV4dGVuZHMgY2xheS5jb21wb3NpdG9yLkNvbXBvc2l0b3JOb2RlXG4gKlxuICogQGV4YW1wbGVcbiAgICB2YXIgbm9kZSA9IG5ldyBjbGF5LmNvbXBvc2l0b3IuRmlsdGVyTm9kZSh7XG4gICAgICAgIG5hbWU6ICdmeGFhJyxcbiAgICAgICAgc2hhZGVyOiBjbGF5LlNoYWRlci5zb3VyY2UoJ2NsYXkuY29tcG9zaXRvci5meGFhJyksXG4gICAgICAgIGlucHV0czoge1xuICAgICAgICAgICAgdGV4dHVyZToge1xuICAgICAgICAgICAgICAgICAgICBub2RlOiAnc2NlbmUnLFxuICAgICAgICAgICAgICAgICAgICBwaW46ICdjb2xvcidcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLy8gTXVsdGlwbGUgb3V0cHV0cyBpcyBwcmVzZXJ2ZWQgZm9yIE1SVCBzdXBwb3J0IGluIFdlYkdMMi4wXG4gICAgICAgIG91dHB1dHM6IHtcbiAgICAgICAgICAgIGNvbG9yOiB7XG4gICAgICAgICAgICAgICAgYXR0YWNobWVudDogY2xheS5GcmFtZUJ1ZmZlci5DT0xPUl9BVFRBQ0hNRU5UMFxuICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBjbGF5LlRleHR1cmUuUkdCQSxcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUxMixcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiA1MTJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIC8vIE5vZGUgd2lsbCBrZWVwIHRoZSBSVFQgcmVuZGVyZWQgaW4gbGFzdCBmcmFtZVxuICAgICAgICAgICAgICAgIGtlZXBMYXN0RnJhbWU6IHRydWUsXG4gICAgICAgICAgICAgICAgLy8gRm9yY2UgdGhlIG5vZGUgb3V0cHV0IHRoZSBSVFQgcmVuZGVyZWQgaW4gbGFzdCBmcmFtZVxuICAgICAgICAgICAgICAgIG91dHB1dExhc3RGcmFtZTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgKlxuICAgICovXG52YXIgRmlsdGVyTm9kZSA9IENvbXBvc2l0b3JOb2RlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIC8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLkZpbHRlck5vZGUjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICBuYW1lOiAnJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIGlucHV0czoge30sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICBvdXRwdXRzOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgc2hhZGVyOiAnJyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW5wdXQgbGlua3MsIHdpbGwgYmUgdXBkYXRlZCBieSB0aGUgZ3JhcGhcbiAgICAgICAgICogQGV4YW1wbGU6XG4gICAgICAgICAqICAgICBpbnB1dE5hbWU6IHtcbiAgICAgICAgICogICAgICAgICBub2RlOiBzb21lTm9kZSxcbiAgICAgICAgICogICAgICAgICBwaW46ICd4eHh4J1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgaW5wdXRMaW5rczoge30sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE91dHB1dCBsaW5rcywgd2lsbCBiZSB1cGRhdGVkIGJ5IHRoZSBncmFwaFxuICAgICAgICAgKiBAZXhhbXBsZTpcbiAgICAgICAgICogICAgIG91dHB1dE5hbWU6IHtcbiAgICAgICAgICogICAgICAgICBub2RlOiBzb21lTm9kZSxcbiAgICAgICAgICogICAgICAgICBwaW46ICd4eHh4J1xuICAgICAgICAgKiAgICAgfVxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgb3V0cHV0TGlua3M6IHt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5jb21wb3NpdG9yLlBhc3N9XG4gICAgICAgICAqL1xuICAgICAgICBwYXNzOiBudWxsLFxuXG4gICAgICAgIC8vIFNhdmUgdGhlIG91dHB1dCB0ZXh0dXJlIG9mIHByZXZpb3VzIGZyYW1lXG4gICAgICAgIC8vIFdpbGwgYmUgdXNlZCB3aGVuIHRoZXJlIGV4aXN0IGEgY2lyY3VsYXIgcmVmZXJlbmNlXG4gICAgICAgIF9wcmV2T3V0cHV0VGV4dHVyZXM6IHt9LFxuICAgICAgICBfb3V0cHV0VGV4dHVyZXM6IHt9LFxuXG4gICAgICAgIC8vIEV4YW1wbGU6IHsgbmFtZTogMiB9XG4gICAgICAgIF9vdXRwdXRSZWZlcmVuY2VzOiB7fSxcblxuICAgICAgICBfcmVuZGVyaW5nOiBmYWxzZSxcbiAgICAgICAgLy8gSWYgcmVuZGVyZWQgaW4gdGhpcyBmcmFtZVxuICAgICAgICBfcmVuZGVyZWQ6IGZhbHNlLFxuXG4gICAgICAgIF9jb21wb3NpdG9yOiBudWxsXG4gICAgfTtcbn0sIGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBwYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogdGhpcy5zaGFkZXJcbiAgICB9KTtcbiAgICB0aGlzLnBhc3MgPSBwYXNzO1xufSxcbi8qKiBAbGVuZHMgY2xheS5jb21wb3NpdG9yLkZpbHRlck5vZGUucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICByZW5kZXI6IGZ1bmN0aW9uIChyZW5kZXJlciwgZnJhbWVCdWZmZXIpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdiZWZvcmVyZW5kZXInLCByZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fcmVuZGVyaW5nID0gdHJ1ZTtcblxuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgZm9yICh2YXIgaW5wdXROYW1lIGluIHRoaXMuaW5wdXRMaW5rcykge1xuICAgICAgICAgICAgdmFyIGxpbmsgPSB0aGlzLmlucHV0TGlua3NbaW5wdXROYW1lXTtcbiAgICAgICAgICAgIHZhciBpbnB1dFRleHR1cmUgPSBsaW5rLm5vZGUuZ2V0T3V0cHV0KHJlbmRlcmVyLCBsaW5rLnBpbik7XG4gICAgICAgICAgICB0aGlzLnBhc3Muc2V0VW5pZm9ybShpbnB1dE5hbWUsIGlucHV0VGV4dHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gT3V0cHV0XG4gICAgICAgIGlmICghdGhpcy5vdXRwdXRzKSB7XG4gICAgICAgICAgICB0aGlzLnBhc3Mub3V0cHV0cyA9IG51bGw7XG5cbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZ2V0RnJhbWVCdWZmZXIoKS51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgICAgICB0aGlzLnBhc3MucmVuZGVyKHJlbmRlcmVyLCBmcmFtZUJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhc3Mub3V0cHV0cyA9IHt9O1xuXG4gICAgICAgICAgICB2YXIgYXR0YWNoZWRUZXh0dXJlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgbmFtZSBpbiB0aGlzLm91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVycyA9IHRoaXMudXBkYXRlUGFyYW1ldGVyKG5hbWUsIHJlbmRlcmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4ocGFyYW1ldGVycy53aWR0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQYXJhbWV0ZXIobmFtZSwgcmVuZGVyZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tuYW1lXTtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZSA9IHRoaXMuX2NvbXBvc2l0b3IuYWxsb2NhdGVUZXh0dXJlKHBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFRleHR1cmVzW25hbWVdID0gdGV4dHVyZTtcbiAgICAgICAgICAgICAgICB2YXIgYXR0YWNobWVudCA9IG91dHB1dEluZm8uYXR0YWNobWVudCB8fCBfZ2wuQ09MT1JfQVRUQUNITUVOVDA7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZihhdHRhY2htZW50KSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNobWVudCA9IF9nbFthdHRhY2htZW50XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYXR0YWNoZWRUZXh0dXJlc1thdHRhY2htZW50XSA9IHRleHR1cmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLmdldEZyYW1lQnVmZmVyKCkuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGF0dGFjaG1lbnQgaW4gYXR0YWNoZWRUZXh0dXJlcykge1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FIGF0dGFjaG1lbnQgY2hhbmdlcyBpbiBkaWZmZXJlbnQgbm9kZXNcbiAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLmdldEZyYW1lQnVmZmVyKCkuYXR0YWNoKFxuICAgICAgICAgICAgICAgICAgICBhdHRhY2hlZFRleHR1cmVzW2F0dGFjaG1lbnRdLCBhdHRhY2htZW50XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wYXNzLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICAgICAgICAgIC8vIEJlY2F1c2UgdGhlIGRhdGEgb2YgdGV4dHVyZSBpcyBjaGFuZ2VkIG92ZXIgdGltZSxcbiAgICAgICAgICAgIC8vIEhlcmUgdXBkYXRlIHRoZSBtaXBtYXBzIG9mIHRleHR1cmUgZWFjaCB0aW1lIGFmdGVyIHJlbmRlcmVkO1xuICAgICAgICAgICAgdGhpcy5fY29tcG9zaXRvci5nZXRGcmFtZUJ1ZmZlcigpLnVwZGF0ZU1pcG1hcChyZW5kZXJlcik7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpbnB1dE5hbWUgaW4gdGhpcy5pbnB1dExpbmtzKSB7XG4gICAgICAgICAgICB2YXIgbGluayA9IHRoaXMuaW5wdXRMaW5rc1tpbnB1dE5hbWVdO1xuICAgICAgICAgICAgbGluay5ub2RlLnJlbW92ZVJlZmVyZW5jZShsaW5rLnBpbik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZW5kZXJpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYWZ0ZXJyZW5kZXInLCByZW5kZXJlcik7XG4gICAgfSxcblxuICAgIC8vIFRPRE8gUmVtb3ZlIHBhcmFtZXRlciBmdW5jdGlvbiBjYWxsYmFja1xuICAgIHVwZGF0ZVBhcmFtZXRlcjogZnVuY3Rpb24gKG91dHB1dE5hbWUsIHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBvdXRwdXRJbmZvID0gdGhpcy5vdXRwdXRzW291dHB1dE5hbWVdO1xuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IG91dHB1dEluZm8ucGFyYW1ldGVycztcbiAgICAgICAgdmFyIHBhcmFtZXRlcnNDb3B5ID0gb3V0cHV0SW5mby5fcGFyYW1ldGVyc0NvcHk7XG4gICAgICAgIGlmICghcGFyYW1ldGVyc0NvcHkpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlcnNDb3B5ID0gb3V0cHV0SW5mby5fcGFyYW1ldGVyc0NvcHkgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFyYW1ldGVycykge1xuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtZXRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ICE9PSAnd2lkdGgnICYmIGtleSAhPT0gJ2hlaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyc0NvcHlba2V5XSA9IHBhcmFtZXRlcnNba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoLCBoZWlnaHQ7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1ldGVycy53aWR0aCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgd2lkdGggPSBwYXJhbWV0ZXJzLndpZHRoLmNhbGwodGhpcywgcmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgd2lkdGggPSBwYXJhbWV0ZXJzLndpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW1ldGVycy5oZWlnaHQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGhlaWdodCA9IHBhcmFtZXRlcnMuaGVpZ2h0LmNhbGwodGhpcywgcmVuZGVyZXIpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgaGVpZ2h0ID0gcGFyYW1ldGVycy5oZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgd2lkdGggPSBNYXRoLmNlaWwod2lkdGgpO1xuICAgICAgICBoZWlnaHQgPSBNYXRoLmNlaWwoaGVpZ2h0KTtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcGFyYW1ldGVyc0NvcHkud2lkdGggIT09IHdpZHRoXG4gICAgICAgICAgICB8fCBwYXJhbWV0ZXJzQ29weS5oZWlnaHQgIT09IGhlaWdodFxuICAgICAgICApIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9vdXRwdXRUZXh0dXJlc1tvdXRwdXROYW1lXSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHBhcmFtZXRlcnNDb3B5LndpZHRoID0gd2lkdGg7XG4gICAgICAgIHBhcmFtZXRlcnNDb3B5LmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICByZXR1cm4gcGFyYW1ldGVyc0NvcHk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBwYXJhbWV0ZXJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7fSB2YWx1ZVxuICAgICAqL1xuICAgIHNldFBhcmFtZXRlcjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgIHRoaXMucGFzcy5zZXRVbmlmb3JtKG5hbWUsIHZhbHVlKTtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIEdldCBwYXJhbWV0ZXIgdmFsdWVcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt9XG4gICAgICovXG4gICAgZ2V0UGFyYW1ldGVyOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXNzLmdldFVuaWZvcm0obmFtZSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTZXQgcGFyYW1ldGVyc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAgICAgKi9cbiAgICBzZXRQYXJhbWV0ZXJzOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgIGZvciAodmFyIG5hbWUgaW4gb2JqKSB7XG4gICAgICAgICAgICB0aGlzLnNldFBhcmFtZXRlcihuYW1lLCBvYmpbbmFtZV0pO1xuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyAvKipcbiAgICAvLyAgKiBTZXQgc2hhZGVyIGNvZGVcbiAgICAvLyAgKiBAcGFyYW0ge3N0cmluZ30gc2hhZGVyU3RyXG4gICAgLy8gICovXG4gICAgLy8gc2V0U2hhZGVyOiBmdW5jdGlvbiAoc2hhZGVyU3RyKSB7XG4gICAgLy8gICAgIHZhciBtYXRlcmlhbCA9IHRoaXMucGFzcy5tYXRlcmlhbDtcbiAgICAvLyAgICAgbWF0ZXJpYWwuc2hhZGVyLnNldEZyYWdtZW50KHNoYWRlclN0cik7XG4gICAgLy8gICAgIG1hdGVyaWFsLmF0dGFjaFNoYWRlcihtYXRlcmlhbC5zaGFkZXIsIHRydWUpO1xuICAgIC8vIH0sXG4gICAgLyoqXG4gICAgICogUHJveHkgb2YgcGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgeHh4KTtcbiAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IHN5bWJvbFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gW3ZhbF1cbiAgICAgKi9cbiAgICBkZWZpbmU6IGZ1bmN0aW9uIChzeW1ib2wsIHZhbCkge1xuICAgICAgICB0aGlzLnBhc3MubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsIHN5bWJvbCwgdmFsKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUHJveHkgb2YgcGFzcy5tYXRlcmlhbC51bmRlZmluZSgnZnJhZ21lbnQnLCB4eHgpXG4gICAgICogQHBhcmFtICB7c3RyaW5nfSBzeW1ib2xcbiAgICAgKi9cbiAgICB1bmRlZmluZTogZnVuY3Rpb24gKHN5bWJvbCkge1xuICAgICAgICB0aGlzLnBhc3MubWF0ZXJpYWwudW5kZWZpbmUoJ2ZyYWdtZW50Jywgc3ltYm9sKTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbiAob3V0cHV0TmFtZSkge1xuICAgICAgICB0aGlzLl9vdXRwdXRSZWZlcmVuY2VzW291dHB1dE5hbWVdLS07XG4gICAgICAgIGlmICh0aGlzLl9vdXRwdXRSZWZlcmVuY2VzW291dHB1dE5hbWVdID09PSAwKSB7XG4gICAgICAgICAgICB2YXIgb3V0cHV0SW5mbyA9IHRoaXMub3V0cHV0c1tvdXRwdXROYW1lXTtcbiAgICAgICAgICAgIGlmIChvdXRwdXRJbmZvLmtlZXBMYXN0RnJhbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5fcHJldk91dHB1dFRleHR1cmVzW291dHB1dE5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IucmVsZWFzZVRleHR1cmUodGhpcy5fcHJldk91dHB1dFRleHR1cmVzW291dHB1dE5hbWVdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcHJldk91dHB1dFRleHR1cmVzW291dHB1dE5hbWVdID0gdGhpcy5fb3V0cHV0VGV4dHVyZXNbb3V0cHV0TmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdXRwdXQgb2YgdGhpcyBub2RlIGhhdmUgYWxyZWF5IGJlZW4gdXNlZCBieSBhbGwgb3RoZXIgbm9kZXNcbiAgICAgICAgICAgICAgICAvLyBQdXQgdGhlIHRleHR1cmUgYmFjayB0byB0aGUgcG9vbC5cbiAgICAgICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlbGVhc2VUZXh0dXJlKHRoaXMuX291dHB1dFRleHR1cmVzW291dHB1dE5hbWVdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICBDb21wb3NpdG9yTm9kZS5wcm90b3R5cGUuY2xlYXIuY2FsbCh0aGlzKTtcblxuICAgICAgICAvLyBEZWZhdWx0IGRpc2FibGUgYWxsIHRleHR1cmVcbiAgICAgICAgdGhpcy5wYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlc0FsbCgpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBGaWx0ZXJOb2RlO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvRmlsdGVyTm9kZS5qc1xuLy8gbW9kdWxlIGlkID0gMTA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///105\n");

/***/ }),
/* 106 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = register;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__source_compositor_coloradjust_glsl_js__ = __webpack_require__(144);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__source_compositor_blur_glsl_js__ = __webpack_require__(145);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__source_compositor_lum_glsl_js__ = __webpack_require__(146);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__source_compositor_lut_glsl_js__ = __webpack_require__(147);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__source_compositor_vignette_glsl_js__ = __webpack_require__(148);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__source_compositor_output_glsl_js__ = __webpack_require__(149);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__source_compositor_bright_glsl_js__ = __webpack_require__(150);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__source_compositor_downsample_glsl_js__ = __webpack_require__(151);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__source_compositor_upsample_glsl_js__ = __webpack_require__(152);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__source_compositor_hdr_glsl_js__ = __webpack_require__(153);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__source_compositor_lensflare_glsl_js__ = __webpack_require__(154);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__source_compositor_blend_glsl_js__ = __webpack_require__(155);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__source_compositor_fxaa_glsl_js__ = __webpack_require__(156);\n\n\n\n\n\n\n\n\n\n\n\n\n\n// import fxaa3Essl from './source/compositor/fxaa3.glsl.js';\n\n// TODO Must export a module and be used in the other modules. Or it will be tree shaked\nfunction register(Shader) {\n    // Some build in shaders\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_0__source_compositor_coloradjust_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_1__source_compositor_blur_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_2__source_compositor_lum_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_3__source_compositor_lut_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_4__source_compositor_vignette_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_5__source_compositor_output_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_6__source_compositor_bright_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_7__source_compositor_downsample_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_8__source_compositor_upsample_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_9__source_compositor_hdr_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_10__source_compositor_lensflare_glsl_js__[\"a\" /* default */]);\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_11__source_compositor_blend_glsl_js__[\"a\" /* default */]);\n\n    Shader['import'](__WEBPACK_IMPORTED_MODULE_12__source_compositor_fxaa_glsl_js__[\"a\" /* default */]);\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvcmVnaXN0ZXJCdWlsdGluQ29tcG9zaXRvci5qcz9lN2Q0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcmFkanVzdEVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9jb2xvcmFkanVzdC5nbHNsLmpzJztcbmltcG9ydCBibHVyRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2JsdXIuZ2xzbC5qcyc7XG5pbXBvcnQgbHVtRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2x1bS5nbHNsLmpzJztcbmltcG9ydCBsdXRFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvbHV0Lmdsc2wuanMnO1xuaW1wb3J0IHZpZ2VudHRlRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL3ZpZ25ldHRlLmdsc2wuanMnO1xuaW1wb3J0IG91dHB1dEVzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9vdXRwdXQuZ2xzbC5qcyc7XG5pbXBvcnQgYnJpZ2h0RXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2JyaWdodC5nbHNsLmpzJztcbmltcG9ydCBkb3duc2FtcGxlRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2Rvd25zYW1wbGUuZ2xzbC5qcyc7XG5pbXBvcnQgdXBzYW1wbGVFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvdXBzYW1wbGUuZ2xzbC5qcyc7XG5pbXBvcnQgaGRyRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2hkci5nbHNsLmpzJztcbmltcG9ydCBsZW5zZmxhcmVFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvbGVuc2ZsYXJlLmdsc2wuanMnO1xuaW1wb3J0IGJsZW5kRXNzbCBmcm9tICcuL3NvdXJjZS9jb21wb3NpdG9yL2JsZW5kLmdsc2wuanMnO1xuaW1wb3J0IGZ4YWFFc3NsIGZyb20gJy4vc291cmNlL2NvbXBvc2l0b3IvZnhhYS5nbHNsLmpzJztcbi8vIGltcG9ydCBmeGFhM0Vzc2wgZnJvbSAnLi9zb3VyY2UvY29tcG9zaXRvci9meGFhMy5nbHNsLmpzJztcblxuLy8gVE9ETyBNdXN0IGV4cG9ydCBhIG1vZHVsZSBhbmQgYmUgdXNlZCBpbiB0aGUgb3RoZXIgbW9kdWxlcy4gT3IgaXQgd2lsbCBiZSB0cmVlIHNoYWtlZFxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVnaXN0ZXIoU2hhZGVyKSB7XG4gICAgLy8gU29tZSBidWlsZCBpbiBzaGFkZXJzXG4gICAgU2hhZGVyWydpbXBvcnQnXShjb2xvcmFkanVzdEVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10oYmx1ckVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10obHVtRXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXShsdXRFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKHZpZ2VudHRlRXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXShvdXRwdXRFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGJyaWdodEVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10oZG93bnNhbXBsZUVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10odXBzYW1wbGVFc3NsKTtcbiAgICBTaGFkZXJbJ2ltcG9ydCddKGhkckVzc2wpO1xuICAgIFNoYWRlclsnaW1wb3J0J10obGVuc2ZsYXJlRXNzbCk7XG4gICAgU2hhZGVyWydpbXBvcnQnXShibGVuZEVzc2wpO1xuXG4gICAgU2hhZGVyWydpbXBvcnQnXShmeGFhRXNzbCk7XG5cbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3JlZ2lzdGVyQnVpbHRpbkNvbXBvc2l0b3IuanNcbi8vIG1vZHVsZSBpZCA9IDEwNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///106\n");

/***/ }),
/* 107 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__shader_source_deferred_gbuffer_glsl_js__ = __webpack_require__(157);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__shader_source_deferred_chunk_glsl_js__ = __webpack_require__(158);\n\n\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_9__shader_source_deferred_gbuffer_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_10__shader_source_deferred_chunk_glsl_js__[\"a\" /* default */]);\n\nfunction createFillCanvas(color) {\n    var canvas = document.createElement('canvas');\n    canvas.width = canvas.height = 1;\n    var ctx = canvas.getContext('2d');\n    ctx.fillStyle = color || '#000';\n    ctx.fillRect(0, 0, 1, 1);\n\n    return canvas;\n}\n\n// TODO specularColor\n// TODO Performance improvement\nfunction getGetUniformHook1(defaultNormalMap, defaultRoughnessMap, defaultDiffuseMap) {\n\n    return function (renderable, gBufferMat, symbol) {\n        var standardMaterial = renderable.material;\n        if (symbol === 'doubleSided') {\n            return standardMaterial.isDefined('fragment', 'DOUBLE_SIDED');\n        }\n        else if (symbol === 'uvRepeat' || symbol === 'uvOffset' || symbol === 'alpha') {\n            return standardMaterial.get(symbol);\n        }\n        else if (symbol === 'normalMap') {\n            return standardMaterial.get(symbol) || defaultNormalMap;\n        }\n        else if (symbol === 'diffuseMap') {\n            return standardMaterial.get(symbol) || defaultDiffuseMap;\n        }\n        else if (symbol === 'alphaCutoff') {\n            // TODO DIFFUSEMAP_ALPHA_ALPHA\n            if (standardMaterial.isDefined('fragment', 'ALPHA_TEST')) {\n                var alphaCutoff = standardMaterial.get('alphaCutoff');\n                return alphaCutoff || 0;\n            }\n            return 0;\n        }\n        else {\n            var useRoughnessWorkflow = standardMaterial.isDefined('fragment', 'USE_ROUGHNESS');\n            var roughGlossMap = useRoughnessWorkflow ? standardMaterial.get('roughnessMap') : standardMaterial.get('glossinessMap');\n            switch (symbol) {\n                case 'glossiness':\n                    return useRoughnessWorkflow ? (1.0 - standardMaterial.get('roughness')) : standardMaterial.get('glossiness');\n                case 'roughGlossMap':\n                    return roughGlossMap;\n                case 'useRoughGlossMap':\n                    return !!roughGlossMap;\n                case 'useRoughness':\n                    return useRoughnessWorkflow;\n                case 'roughGlossChannel':\n                    return useRoughnessWorkflow\n                        ? standardMaterial.getDefine('fragment', 'ROUGHNESS_CHANNEL')\n                        : standardMaterial.getDefine('fragment', 'GLOSSINESS_CHANNEL');\n            }\n        }\n    };\n}\n\nfunction getGetUniformHook2(defaultDiffuseMap, defaultMetalnessMap) {\n    return function (renderable, gBufferMat, symbol) {\n        var standardMaterial = renderable.material;\n        switch (symbol) {\n            case 'color':\n            case 'uvRepeat':\n            case 'uvOffset':\n            case 'alpha':\n                return standardMaterial.get(symbol);\n            case 'metalness':\n                return standardMaterial.get('metalness') || 0;\n            case 'diffuseMap':\n                return standardMaterial.get(symbol) || defaultDiffuseMap;\n            case 'metalnessMap':\n                return standardMaterial.get(symbol) || defaultMetalnessMap;\n            case 'useMetalnessMap':\n                return !!standardMaterial.get('metalnessMap');\n            case 'linear':\n                return standardMaterial.isDefined('SRGB_DECODE');\n            case 'alphaCutoff':\n                // TODO DIFFUSEMAP_ALPHA_ALPHA\n                if (standardMaterial.isDefined('fragment', 'ALPHA_TEST')) {\n                    var alphaCutoff = standardMaterial.get('alphaCutoff');\n                    return alphaCutoff || 0.0;\n                }\n                return 0.0;\n        }\n    };\n}\n\n/**\n * GBuffer is provided for deferred rendering and SSAO, SSR pass.\n * It will do three passes rendering to four target textures. See\n * + {@link clay.deferred.GBuffer#getTargetTexture1}\n * + {@link clay.deferred.GBuffer#getTargetTexture2}\n * + {@link clay.deferred.GBuffer#getTargetTexture3}\n * + {@link clay.deferred.GBuffer#getTargetTexture4}\n * @constructor\n * @alias clay.deferred.GBuffer\n * @extends clay.core.Base\n */\nvar GBuffer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    var commonTextureOpts = {\n        minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n        wrapS: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n        wrapT: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].CLAMP_TO_EDGE,\n    };\n\n    return /** @lends clay.deferred.GBuffer# */ {\n\n        /**\n         * If enable gbuffer texture 1.\n         * @type {boolean}\n         */\n        enableTargetTexture1: true,\n\n        /**\n         * If enable gbuffer texture 2.\n         * @type {boolean}\n         */\n        enableTargetTexture2: true,\n\n        /**\n         * If enable gbuffer texture 3.\n         * @type {boolean}\n         */\n        enableTargetTexture3: true,\n\n        /**\n         * If enable gbuffer texture 4.\n         * @type {boolean}\n         */\n        enableTargetTexture4: false,\n\n        renderTransparent: false,\n\n        _gBufferRenderList: [],\n        // - R: normal.x\n        // - G: normal.y\n        // - B: normal.z\n        // - A: glossiness\n        _gBufferTex1: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // PENDING\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT\n        }, commonTextureOpts)),\n\n        // - R: depth\n        _gBufferTex2: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // format: Texture.DEPTH_COMPONENT,\n            // type: Texture.UNSIGNED_INT\n\n            format: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].DEPTH_STENCIL,\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].UNSIGNED_INT_24_8_WEBGL\n        }, commonTextureOpts)),\n\n        // - R: albedo.r\n        // - G: albedo.g\n        // - B: albedo.b\n        // - A: metalness\n        _gBufferTex3: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](commonTextureOpts),\n\n        _gBufferTex4: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */](Object.assign({\n            // FLOAT Texture has bug on iOS. is HALF_FLOAT enough?\n            type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].HALF_FLOAT\n        }, commonTextureOpts)),\n\n        _defaultNormalMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#000')\n        }),\n        _defaultRoughnessMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n        _defaultMetalnessMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n        _defaultDiffuseMap: new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n            image: createFillCanvas('#fff')\n        }),\n\n        _frameBuffer: new __WEBPACK_IMPORTED_MODULE_4__FrameBuffer__[\"a\" /* default */](),\n\n        _gBufferMaterial1: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer1.fragment')\n            ),\n            vertexDefines: {\n                FIRST_PASS: null\n            },\n            fragmentDefines: {\n                FIRST_PASS: null\n            }\n        }),\n        _gBufferMaterial2: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer2.fragment')\n            ),\n            vertexDefines: {\n                SECOND_PASS: null\n            },\n            fragmentDefines: {\n                SECOND_PASS: null\n            }\n        }),\n        _gBufferMaterial3: new __WEBPACK_IMPORTED_MODULE_3__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */](\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.vertex'),\n                __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer3.fragment')\n            ),\n            vertexDefines: {\n                THIRD_PASS: null\n            },\n            fragmentDefines: {\n                THIRD_PASS: null\n            }\n        }),\n\n        _debugPass: new __WEBPACK_IMPORTED_MODULE_6__compositor_Pass__[\"a\" /* default */]({\n            fragment: __WEBPACK_IMPORTED_MODULE_5__Shader__[\"a\" /* default */].source('clay.deferred.gbuffer.debug')\n        })\n    };\n}, /** @lends clay.deferred.GBuffer# */{\n\n    /**\n     * Set G Buffer size.\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function (width, height) {\n        if (this._gBufferTex1.width === width\n            && this._gBufferTex1.height === height\n        ) {\n            return;\n        }\n        this._gBufferTex1.width = width;\n        this._gBufferTex1.height = height;\n\n        this._gBufferTex2.width = width;\n        this._gBufferTex2.height = height;\n\n        this._gBufferTex3.width = width;\n        this._gBufferTex3.height = height;\n\n        this._gBufferTex4.width = width;\n        this._gBufferTex4.height = height;\n    },\n\n    // TODO is dpr needed?\n    setViewport: function (x, y, width, height, dpr) {\n        var viewport;\n        if (typeof x === 'object') {\n            viewport = x;\n        }\n        else {\n            viewport = {\n                x: x, y: y,\n                width: width, height: height,\n                devicePixelRatio: dpr || 1\n            };\n        }\n        this._frameBuffer.viewport = viewport;\n    },\n\n    getViewport: function () {\n        if (this._frameBuffer.viewport) {\n            return this._frameBuffer.viewport;\n        }\n        else {\n            return {\n                x: 0, y: 0,\n                width: this._gBufferTex1.width,\n                height: this._gBufferTex1.height,\n                devicePixelRatio: 1\n            };\n        }\n    },\n\n    /**\n     * Update GBuffer\n     * @param {clay.Renderer} renderer\n     * @param {clay.Scene} scene\n     * @param {clay.Camera} camera\n     * @param {Object} opts\n     */\n    update: function (renderer, scene, camera, opts) {\n        opts = opts || {};\n\n        var gl = renderer.gl;\n\n        var frameBuffer = this._frameBuffer;\n        var viewport = frameBuffer.viewport;\n\n        var renderList = scene.updateRenderList(camera, true);\n\n        var opaqueList = renderList.opaque;\n        var transparentList = renderList.transparent;\n\n        var offset = 0;\n        var gBufferRenderList = this._gBufferRenderList;\n        for (var i = 0; i < opaqueList.length; i++) {\n            if (!opaqueList[i].ignoreGBuffer) {\n                gBufferRenderList[offset++] = opaqueList[i];\n            }\n        }\n        if (this.renderTransparent) {\n            for (var i = 0; i < transparentList.length; i++) {\n                if (!transparentList[i].ignoreGBuffer) {\n                    gBufferRenderList[offset++] = transparentList[i];\n                }\n            }\n        }\n        gBufferRenderList.length = offset;\n\n        gl.clearColor(0, 0, 0, 0);\n        gl.depthMask(true);\n        gl.colorMask(true, true, true, true);\n        gl.disable(gl.BLEND);\n\n        var enableTargetTexture1 = this.enableTargetTexture1;\n        var enableTargetTexture2 = this.enableTargetTexture2;\n        var enableTargetTexture3 = this.enableTargetTexture3;\n        var enableTargetTexture4 = this.enableTargetTexture4;\n        if (!enableTargetTexture1 && !enableTargetTexture3 && !enableTargetTexture4) {\n            console.warn('Can\\'t disable targetTexture1, targetTexture3, targetTexture4 both');\n            enableTargetTexture1 = true;\n        }\n\n        if (enableTargetTexture2) {\n            frameBuffer.attach(opts.targetTexture2 || this._gBufferTex2, renderer.gl.DEPTH_STENCIL_ATTACHMENT);\n        }\n\n        function clearViewport() {\n            if (viewport) {\n                var dpr = viewport.devicePixelRatio;\n                // use scissor to make sure only clear the viewport\n                gl.enable(gl.SCISSOR_TEST);\n                gl.scissor(viewport.x * dpr, viewport.y * dpr, viewport.width * dpr, viewport.height * dpr);\n            }\n            gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n            if (viewport) {\n                gl.disable(gl.SCISSOR_TEST);\n            }\n        }\n\n        function isMaterialChanged(renderable, prevRenderable) {\n            return renderable.material !== prevRenderable.material;\n        }\n\n        // PENDING, scene.boundingBoxLastFrame needs be updated if have shadow\n        renderer.bindSceneRendering(scene);\n        if (enableTargetTexture1) {\n            // Pass 1\n            frameBuffer.attach(opts.targetTexture1 || this._gBufferTex1);\n            frameBuffer.bind(renderer);\n\n            clearViewport();\n\n            var gBufferMaterial1 = this._gBufferMaterial1;\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial1;\n                },\n                getUniform: getGetUniformHook1(this._defaultNormalMap, this._defaultRoughnessMap, this._defaultDiffuseMap),\n                isMaterialChanged: isMaterialChanged,\n                sortCompare: renderer.opaqueSortCompare\n            };\n            // FIXME Use MRT if possible\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n\n        }\n        if (enableTargetTexture3) {\n\n            // Pass 2\n            frameBuffer.attach(opts.targetTexture3 || this._gBufferTex3);\n            frameBuffer.bind(renderer);\n\n            clearViewport();\n\n            var gBufferMaterial2 = this._gBufferMaterial2;\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial2;\n                },\n                getUniform: getGetUniformHook2(this._defaultDiffuseMap, this._defaultMetalnessMap),\n                isMaterialChanged: isMaterialChanged,\n                sortCompare: renderer.opaqueSortCompare\n            };\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n        }\n\n        if (enableTargetTexture4) {\n            frameBuffer.bind(renderer);\n            frameBuffer.attach(opts.targetTexture4 || this._gBufferTex4);\n\n            clearViewport();\n\n            // Remove jittering in temporal aa.\n            // PENDING. Better solution?\n            camera.update();\n\n            var gBufferMaterial3 = this._gBufferMaterial3;\n            var cameraViewProj = __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].create();\n            __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].multiply(cameraViewProj, camera.projectionMatrix.array, camera.viewMatrix.array);\n            var passConfig = {\n                getMaterial: function () {\n                    return gBufferMaterial3;\n                },\n                afterRender: function (renderer, renderable) {\n                    var isSkinnedMesh = renderable.isSkinnedMesh();\n                    if (isSkinnedMesh) {\n                        var skeleton = renderable.skeleton;\n                        var joints = renderable.joints;\n                        if (joints.length > renderer.getMaxJointNumber()) {\n                            var skinMatricesTexture = skeleton.getSubSkinMatricesTexture(renderable.__uid__, joints);\n                            var prevSkinMatricesTexture = renderable.__prevSkinMatricesTexture;\n                            if (!prevSkinMatricesTexture) {\n                                prevSkinMatricesTexture = renderable.__prevSkinMatricesTexture = new __WEBPACK_IMPORTED_MODULE_1__Texture2D__[\"a\" /* default */]({\n                                    type: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].FLOAT,\n                                    minFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n                                    magFilter: __WEBPACK_IMPORTED_MODULE_2__Texture__[\"a\" /* default */].NEAREST,\n                                    useMipmap: false,\n                                    flipY: false\n                                });\n                            }\n                            if (!prevSkinMatricesTexture.pixels\n                                || prevSkinMatricesTexture.pixels.length !== skinMatricesTexture.pixels.length\n                            ) {\n                                prevSkinMatricesTexture.pixels = new Float32Array(skinMatricesTexture.pixels);\n                            }\n                            else {\n                                for (var i = 0; i < skinMatricesTexture.pixels.length; i++) {\n                                    prevSkinMatricesTexture.pixels[i] = skinMatricesTexture.pixels[i];\n                                }\n                            }\n                            prevSkinMatricesTexture.width = skinMatricesTexture.width;\n                            prevSkinMatricesTexture.height = skinMatricesTexture.height;\n                        }\n                        else {\n                            var skinMatricesArray = skeleton.getSubSkinMatrices(renderable.__uid__, joints);\n                            if (!renderable.__prevSkinMatricesArray || renderable.__prevSkinMatricesArray.length !== skinMatricesArray.length) {\n                                renderable.__prevSkinMatricesArray = new Float32Array(skinMatricesArray.length);\n                            }\n                            renderable.__prevSkinMatricesArray.set(skinMatricesArray);\n                        }\n                    }\n                    renderable.__prevWorldViewProjection = renderable.__prevWorldViewProjection || __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].create();\n                    if (isSkinnedMesh) {\n                        // Ignore world transform of skinned mesh.\n                        __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].copy(renderable.__prevWorldViewProjection, cameraViewProj);\n                    }\n                    else {\n                        __WEBPACK_IMPORTED_MODULE_8__glmatrix_mat4__[\"a\" /* default */].multiply(renderable.__prevWorldViewProjection, cameraViewProj, renderable.worldTransform.array);\n                    }\n                },\n                getUniform: function (renderable, gBufferMat, symbol) {\n                    if (symbol === 'prevWorldViewProjection') {\n                        return renderable.__prevWorldViewProjection;\n                    }\n                    else if (symbol === 'prevSkinMatrix') {\n                        return renderable.__prevSkinMatricesArray;\n                    }\n                    else if (symbol === 'prevSkinMatricesTexture') {\n                        return renderable.__prevSkinMatricesTexture;\n                    }\n                    else if (symbol === 'firstRender') {\n                        return !renderable.__prevWorldViewProjection;\n                    }\n                    else {\n                        return gBufferMat.get(symbol);\n                    }\n                },\n                isMaterialChanged: function () {\n                    // Always update prevWorldViewProjection\n                    return true;\n                },\n                sortCompare: renderer.opaqueSortCompare\n            };\n\n            renderer.renderPass(gBufferRenderList, camera, passConfig);\n        }\n\n        renderer.bindSceneRendering(null);\n        frameBuffer.unbind(renderer);\n    },\n\n    /**\n     * Debug output of gBuffer. Use `type` parameter to choos the debug output type, which can be:\n     *\n     * + 'normal'\n     * + 'depth'\n     * + 'position'\n     * + 'glossiness'\n     * + 'metalness'\n     * + 'albedo'\n     * + 'velocity'\n     *\n     * @param {clay.Renderer} renderer\n     * @param {clay.Camera} camera\n     * @param {string} [type='normal']\n     */\n    renderDebug: function (renderer, camera, type, viewport) {\n        var debugTypes = {\n            normal: 0,\n            depth: 1,\n            position: 2,\n            glossiness: 3,\n            metalness: 4,\n            albedo: 5,\n            velocity: 6\n        };\n        if (debugTypes[type] == null) {\n            console.warn('Unkown type \"' + type + '\"');\n            // Default use normal\n            type = 'normal';\n        }\n\n        renderer.saveClear();\n        renderer.saveViewport();\n        renderer.clearBit = renderer.gl.DEPTH_BUFFER_BIT;\n\n        if (viewport) {\n            renderer.setViewport(viewport);\n        }\n        var viewProjectionInv = new __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */]();\n        __WEBPACK_IMPORTED_MODULE_7__math_Matrix4__[\"a\" /* default */].multiply(viewProjectionInv, camera.worldTransform, camera.invProjectionMatrix);\n\n        var debugPass = this._debugPass;\n        debugPass.setUniform('viewportSize', [renderer.getWidth(), renderer.getHeight()]);\n        debugPass.setUniform('gBufferTexture1', this._gBufferTex1);\n        debugPass.setUniform('gBufferTexture2', this._gBufferTex2);\n        debugPass.setUniform('gBufferTexture3', this._gBufferTex3);\n        debugPass.setUniform('gBufferTexture4', this._gBufferTex4);\n        debugPass.setUniform('debug', debugTypes[type]);\n        debugPass.setUniform('viewProjectionInv', viewProjectionInv.array);\n        debugPass.render(renderer);\n\n        renderer.restoreViewport();\n        renderer.restoreClear();\n    },\n\n    /**\n     * Get first target texture.\n     * Channel storage:\n     * + R: normal.x * 0.5 + 0.5\n     * + G: normal.y * 0.5 + 0.5\n     * + B: normal.z * 0.5 + 0.5\n     * + A: glossiness\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture1: function () {\n        return this._gBufferTex1;\n    },\n\n    /**\n     * Get second target texture.\n     * Channel storage:\n     * + R: depth\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture2: function () {\n        return this._gBufferTex2;\n    },\n\n    /**\n     * Get third target texture.\n     * Channel storage:\n     * + R: albedo.r\n     * + G: albedo.g\n     * + B: albedo.b\n     * + A: metalness\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture3: function () {\n        return this._gBufferTex3;\n    },\n\n    /**\n     * Get fourth target texture.\n     * Channel storage:\n     * + R: velocity.r\n     * + G: velocity.g\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture4: function () {\n        return this._gBufferTex4;\n    },\n\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._gBufferTex1.dispose(renderer);\n        this._gBufferTex2.dispose(renderer);\n        this._gBufferTex3.dispose(renderer);\n\n        this._defaultNormalMap.dispose(renderer);\n        this._defaultRoughnessMap.dispose(renderer);\n        this._defaultMetalnessMap.dispose(renderer);\n        this._defaultDiffuseMap.dispose(renderer);\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GBuffer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZWZlcnJlZC9HQnVmZmVyLmpzPzJjMmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi4vVGV4dHVyZTJEJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL1RleHR1cmUnO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL01hdGVyaWFsJztcbmltcG9ydCBGcmFtZUJ1ZmZlciBmcm9tICcuLi9GcmFtZUJ1ZmZlcic7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgUGFzcyBmcm9tICcuLi9jb21wb3NpdG9yL1Bhc3MnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi4vbWF0aC9NYXRyaXg0JztcbmltcG9ydCBtYXQ0IGZyb20gJy4uL2dsbWF0cml4L21hdDQnO1xuXG5pbXBvcnQgZ2J1ZmZlckVzc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9nYnVmZmVyLmdsc2wuanMnO1xuaW1wb3J0IGNodW5rRXNzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL2NodW5rLmdsc2wuanMnO1xuXG5TaGFkZXIuaW1wb3J0KGdidWZmZXJFc3NsKTtcblNoYWRlci5pbXBvcnQoY2h1bmtFc3NsKTtcblxuZnVuY3Rpb24gY3JlYXRlRmlsbENhbnZhcyhjb2xvcikge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICBjYW52YXMud2lkdGggPSBjYW52YXMuaGVpZ2h0ID0gMTtcbiAgICB2YXIgY3R4ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yIHx8ICcjMDAwJztcbiAgICBjdHguZmlsbFJlY3QoMCwgMCwgMSwgMSk7XG5cbiAgICByZXR1cm4gY2FudmFzO1xufVxuXG4vLyBUT0RPIHNwZWN1bGFyQ29sb3Jcbi8vIFRPRE8gUGVyZm9ybWFuY2UgaW1wcm92ZW1lbnRcbmZ1bmN0aW9uIGdldEdldFVuaWZvcm1Ib29rMShkZWZhdWx0Tm9ybWFsTWFwLCBkZWZhdWx0Um91Z2huZXNzTWFwLCBkZWZhdWx0RGlmZnVzZU1hcCkge1xuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBnQnVmZmVyTWF0LCBzeW1ib2wpIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkTWF0ZXJpYWwgPSByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICBpZiAoc3ltYm9sID09PSAnZG91YmxlU2lkZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5pc0RlZmluZWQoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ3V2UmVwZWF0JyB8fCBzeW1ib2wgPT09ICd1dk9mZnNldCcgfHwgc3ltYm9sID09PSAnYWxwaGEnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoc3ltYm9sKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdub3JtYWxNYXAnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoc3ltYm9sKSB8fCBkZWZhdWx0Tm9ybWFsTWFwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ2RpZmZ1c2VNYXAnKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoc3ltYm9sKSB8fCBkZWZhdWx0RGlmZnVzZU1hcDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzeW1ib2wgPT09ICdhbHBoYUN1dG9mZicpIHtcbiAgICAgICAgICAgIC8vIFRPRE8gRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxuICAgICAgICAgICAgaWYgKHN0YW5kYXJkTWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxwaGFDdXRvZmYgPSBzdGFuZGFyZE1hdGVyaWFsLmdldCgnYWxwaGFDdXRvZmYnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWxwaGFDdXRvZmYgfHwgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdmFyIHVzZVJvdWdobmVzc1dvcmtmbG93ID0gc3RhbmRhcmRNYXRlcmlhbC5pc0RlZmluZWQoJ2ZyYWdtZW50JywgJ1VTRV9ST1VHSE5FU1MnKTtcbiAgICAgICAgICAgIHZhciByb3VnaEdsb3NzTWFwID0gdXNlUm91Z2huZXNzV29ya2Zsb3cgPyBzdGFuZGFyZE1hdGVyaWFsLmdldCgncm91Z2huZXNzTWFwJykgOiBzdGFuZGFyZE1hdGVyaWFsLmdldCgnZ2xvc3NpbmVzc01hcCcpO1xuICAgICAgICAgICAgc3dpdGNoIChzeW1ib2wpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdnbG9zc2luZXNzJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVJvdWdobmVzc1dvcmtmbG93ID8gKDEuMCAtIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KCdyb3VnaG5lc3MnKSkgOiBzdGFuZGFyZE1hdGVyaWFsLmdldCgnZ2xvc3NpbmVzcycpO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3JvdWdoR2xvc3NNYXAnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm91Z2hHbG9zc01hcDtcbiAgICAgICAgICAgICAgICBjYXNlICd1c2VSb3VnaEdsb3NzTWFwJzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICEhcm91Z2hHbG9zc01hcDtcbiAgICAgICAgICAgICAgICBjYXNlICd1c2VSb3VnaG5lc3MnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlUm91Z2huZXNzV29ya2Zsb3c7XG4gICAgICAgICAgICAgICAgY2FzZSAncm91Z2hHbG9zc0NoYW5uZWwnOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXNlUm91Z2huZXNzV29ya2Zsb3dcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RhbmRhcmRNYXRlcmlhbC5nZXREZWZpbmUoJ2ZyYWdtZW50JywgJ1JPVUdITkVTU19DSEFOTkVMJylcbiAgICAgICAgICAgICAgICAgICAgICAgIDogc3RhbmRhcmRNYXRlcmlhbC5nZXREZWZpbmUoJ2ZyYWdtZW50JywgJ0dMT1NTSU5FU1NfQ0hBTk5FTCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZ2V0R2V0VW5pZm9ybUhvb2syKGRlZmF1bHREaWZmdXNlTWFwLCBkZWZhdWx0TWV0YWxuZXNzTWFwKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJhYmxlLCBnQnVmZmVyTWF0LCBzeW1ib2wpIHtcbiAgICAgICAgdmFyIHN0YW5kYXJkTWF0ZXJpYWwgPSByZW5kZXJhYmxlLm1hdGVyaWFsO1xuICAgICAgICBzd2l0Y2ggKHN5bWJvbCkge1xuICAgICAgICAgICAgY2FzZSAnY29sb3InOlxuICAgICAgICAgICAgY2FzZSAndXZSZXBlYXQnOlxuICAgICAgICAgICAgY2FzZSAndXZPZmZzZXQnOlxuICAgICAgICAgICAgY2FzZSAnYWxwaGEnOlxuICAgICAgICAgICAgICAgIHJldHVybiBzdGFuZGFyZE1hdGVyaWFsLmdldChzeW1ib2wpO1xuICAgICAgICAgICAgY2FzZSAnbWV0YWxuZXNzJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ21ldGFsbmVzcycpIHx8IDA7XG4gICAgICAgICAgICBjYXNlICdkaWZmdXNlTWFwJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5nZXQoc3ltYm9sKSB8fCBkZWZhdWx0RGlmZnVzZU1hcDtcbiAgICAgICAgICAgIGNhc2UgJ21ldGFsbmVzc01hcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YW5kYXJkTWF0ZXJpYWwuZ2V0KHN5bWJvbCkgfHwgZGVmYXVsdE1ldGFsbmVzc01hcDtcbiAgICAgICAgICAgIGNhc2UgJ3VzZU1ldGFsbmVzc01hcCc6XG4gICAgICAgICAgICAgICAgcmV0dXJuICEhc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ21ldGFsbmVzc01hcCcpO1xuICAgICAgICAgICAgY2FzZSAnbGluZWFyJzpcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RhbmRhcmRNYXRlcmlhbC5pc0RlZmluZWQoJ1NSR0JfREVDT0RFJyk7XG4gICAgICAgICAgICBjYXNlICdhbHBoYUN1dG9mZic6XG4gICAgICAgICAgICAgICAgLy8gVE9ETyBESUZGVVNFTUFQX0FMUEhBX0FMUEhBXG4gICAgICAgICAgICAgICAgaWYgKHN0YW5kYXJkTWF0ZXJpYWwuaXNEZWZpbmVkKCdmcmFnbWVudCcsICdBTFBIQV9URVNUJykpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhQ3V0b2ZmID0gc3RhbmRhcmRNYXRlcmlhbC5nZXQoJ2FscGhhQ3V0b2ZmJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhbHBoYUN1dG9mZiB8fCAwLjA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAwLjA7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKipcbiAqIEdCdWZmZXIgaXMgcHJvdmlkZWQgZm9yIGRlZmVycmVkIHJlbmRlcmluZyBhbmQgU1NBTywgU1NSIHBhc3MuXG4gKiBJdCB3aWxsIGRvIHRocmVlIHBhc3NlcyByZW5kZXJpbmcgdG8gZm91ciB0YXJnZXQgdGV4dHVyZXMuIFNlZVxuICogKyB7QGxpbmsgY2xheS5kZWZlcnJlZC5HQnVmZmVyI2dldFRhcmdldFRleHR1cmUxfVxuICogKyB7QGxpbmsgY2xheS5kZWZlcnJlZC5HQnVmZmVyI2dldFRhcmdldFRleHR1cmUyfVxuICogKyB7QGxpbmsgY2xheS5kZWZlcnJlZC5HQnVmZmVyI2dldFRhcmdldFRleHR1cmUzfVxuICogKyB7QGxpbmsgY2xheS5kZWZlcnJlZC5HQnVmZmVyI2dldFRhcmdldFRleHR1cmU0fVxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5kZWZlcnJlZC5HQnVmZmVyXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgR0J1ZmZlciA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcblxuICAgIHZhciBjb21tb25UZXh0dXJlT3B0cyA9IHtcbiAgICAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICB3cmFwUzogVGV4dHVyZS5DTEFNUF9UT19FREdFLFxuICAgICAgICB3cmFwVDogVGV4dHVyZS5DTEFNUF9UT19FREdFLFxuICAgIH07XG5cbiAgICByZXR1cm4gLyoqIEBsZW5kcyBjbGF5LmRlZmVycmVkLkdCdWZmZXIjICovIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGdidWZmZXIgdGV4dHVyZSAxLlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmUxOiB0cnVlLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgZ2J1ZmZlciB0ZXh0dXJlIDIuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgZW5hYmxlVGFyZ2V0VGV4dHVyZTI6IHRydWUsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGVuYWJsZSBnYnVmZmVyIHRleHR1cmUgMy5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlMzogdHJ1ZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogSWYgZW5hYmxlIGdidWZmZXIgdGV4dHVyZSA0LlxuICAgICAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmU0OiBmYWxzZSxcblxuICAgICAgICByZW5kZXJUcmFuc3BhcmVudDogZmFsc2UsXG5cbiAgICAgICAgX2dCdWZmZXJSZW5kZXJMaXN0OiBbXSxcbiAgICAgICAgLy8gLSBSOiBub3JtYWwueFxuICAgICAgICAvLyAtIEc6IG5vcm1hbC55XG4gICAgICAgIC8vIC0gQjogbm9ybWFsLnpcbiAgICAgICAgLy8gLSBBOiBnbG9zc2luZXNzXG4gICAgICAgIF9nQnVmZmVyVGV4MTogbmV3IFRleHR1cmUyRChPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgIHR5cGU6IFRleHR1cmUuSEFMRl9GTE9BVFxuICAgICAgICB9LCBjb21tb25UZXh0dXJlT3B0cykpLFxuXG4gICAgICAgIC8vIC0gUjogZGVwdGhcbiAgICAgICAgX2dCdWZmZXJUZXgyOiBuZXcgVGV4dHVyZTJEKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gZm9ybWF0OiBUZXh0dXJlLkRFUFRIX0NPTVBPTkVOVCxcbiAgICAgICAgICAgIC8vIHR5cGU6IFRleHR1cmUuVU5TSUdORURfSU5UXG5cbiAgICAgICAgICAgIGZvcm1hdDogVGV4dHVyZS5ERVBUSF9TVEVOQ0lMLFxuICAgICAgICAgICAgdHlwZTogVGV4dHVyZS5VTlNJR05FRF9JTlRfMjRfOF9XRUJHTFxuICAgICAgICB9LCBjb21tb25UZXh0dXJlT3B0cykpLFxuXG4gICAgICAgIC8vIC0gUjogYWxiZWRvLnJcbiAgICAgICAgLy8gLSBHOiBhbGJlZG8uZ1xuICAgICAgICAvLyAtIEI6IGFsYmVkby5iXG4gICAgICAgIC8vIC0gQTogbWV0YWxuZXNzXG4gICAgICAgIF9nQnVmZmVyVGV4MzogbmV3IFRleHR1cmUyRChjb21tb25UZXh0dXJlT3B0cyksXG5cbiAgICAgICAgX2dCdWZmZXJUZXg0OiBuZXcgVGV4dHVyZTJEKE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgLy8gRkxPQVQgVGV4dHVyZSBoYXMgYnVnIG9uIGlPUy4gaXMgSEFMRl9GTE9BVCBlbm91Z2g/XG4gICAgICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICAgICAgfSwgY29tbW9uVGV4dHVyZU9wdHMpKSxcblxuICAgICAgICBfZGVmYXVsdE5vcm1hbE1hcDogbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICBpbWFnZTogY3JlYXRlRmlsbENhbnZhcygnIzAwMCcpXG4gICAgICAgIH0pLFxuICAgICAgICBfZGVmYXVsdFJvdWdobmVzc01hcDogbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICBpbWFnZTogY3JlYXRlRmlsbENhbnZhcygnI2ZmZicpXG4gICAgICAgIH0pLFxuICAgICAgICBfZGVmYXVsdE1ldGFsbmVzc01hcDogbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICBpbWFnZTogY3JlYXRlRmlsbENhbnZhcygnI2ZmZicpXG4gICAgICAgIH0pLFxuICAgICAgICBfZGVmYXVsdERpZmZ1c2VNYXA6IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgaW1hZ2U6IGNyZWF0ZUZpbGxDYW52YXMoJyNmZmYnKVxuICAgICAgICB9KSxcblxuICAgICAgICBfZnJhbWVCdWZmZXI6IG5ldyBGcmFtZUJ1ZmZlcigpLFxuXG4gICAgICAgIF9nQnVmZmVyTWF0ZXJpYWwxOiBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKFxuICAgICAgICAgICAgICAgIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZ2J1ZmZlci52ZXJ0ZXgnKSxcbiAgICAgICAgICAgICAgICBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmdidWZmZXIxLmZyYWdtZW50JylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB2ZXJ0ZXhEZWZpbmVzOiB7XG4gICAgICAgICAgICAgICAgRklSU1RfUEFTUzogbnVsbFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGZyYWdtZW50RGVmaW5lczoge1xuICAgICAgICAgICAgICAgIEZJUlNUX1BBU1M6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksXG4gICAgICAgIF9nQnVmZmVyTWF0ZXJpYWwyOiBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICAgICAgc2hhZGVyOiBuZXcgU2hhZGVyKFxuICAgICAgICAgICAgICAgIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZ2J1ZmZlci52ZXJ0ZXgnKSxcbiAgICAgICAgICAgICAgICBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmdidWZmZXIyLmZyYWdtZW50JylcbiAgICAgICAgICAgICksXG4gICAgICAgICAgICB2ZXJ0ZXhEZWZpbmVzOiB7XG4gICAgICAgICAgICAgICAgU0VDT05EX1BBU1M6IG51bGxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmcmFnbWVudERlZmluZXM6IHtcbiAgICAgICAgICAgICAgICBTRUNPTkRfUEFTUzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcbiAgICAgICAgX2dCdWZmZXJNYXRlcmlhbDM6IG5ldyBNYXRlcmlhbCh7XG4gICAgICAgICAgICBzaGFkZXI6IG5ldyBTaGFkZXIoXG4gICAgICAgICAgICAgICAgU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5nYnVmZmVyLnZlcnRleCcpLFxuICAgICAgICAgICAgICAgIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZ2J1ZmZlcjMuZnJhZ21lbnQnKVxuICAgICAgICAgICAgKSxcbiAgICAgICAgICAgIHZlcnRleERlZmluZXM6IHtcbiAgICAgICAgICAgICAgICBUSElSRF9QQVNTOiBudWxsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnJhZ21lbnREZWZpbmVzOiB7XG4gICAgICAgICAgICAgICAgVEhJUkRfUEFTUzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9KSxcblxuICAgICAgICBfZGVidWdQYXNzOiBuZXcgUGFzcyh7XG4gICAgICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5nYnVmZmVyLmRlYnVnJylcbiAgICAgICAgfSlcbiAgICB9O1xufSwgLyoqIEBsZW5kcyBjbGF5LmRlZmVycmVkLkdCdWZmZXIjICove1xuXG4gICAgLyoqXG4gICAgICogU2V0IEcgQnVmZmVyIHNpemUuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodFxuICAgICAqL1xuICAgIHJlc2l6ZTogZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2dCdWZmZXJUZXgxLndpZHRoID09PSB3aWR0aFxuICAgICAgICAgICAgJiYgdGhpcy5fZ0J1ZmZlclRleDEuaGVpZ2h0ID09PSBoZWlnaHRcbiAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDEud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDEuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgyLndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgyLmhlaWdodCA9IGhlaWdodDtcblxuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4My53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4My5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDQud2lkdGggPSB3aWR0aDtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDQuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH0sXG5cbiAgICAvLyBUT0RPIGlzIGRwciBuZWVkZWQ/XG4gICAgc2V0Vmlld3BvcnQ6IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBkcHIpIHtcbiAgICAgICAgdmFyIHZpZXdwb3J0O1xuICAgICAgICBpZiAodHlwZW9mIHggPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IHg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2aWV3cG9ydCA9IHtcbiAgICAgICAgICAgICAgICB4OiB4LCB5OiB5LFxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCwgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgZGV2aWNlUGl4ZWxSYXRpbzogZHByIHx8IDFcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIudmlld3BvcnQgPSB2aWV3cG9ydDtcbiAgICB9LFxuXG4gICAgZ2V0Vmlld3BvcnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2ZyYW1lQnVmZmVyLnZpZXdwb3J0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWVCdWZmZXIudmlld3BvcnQ7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHg6IDAsIHk6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuX2dCdWZmZXJUZXgxLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5fZ0J1ZmZlclRleDEuaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGRldmljZVBpeGVsUmF0aW86IDFcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIEdCdWZmZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICogQHBhcmFtIHtjbGF5LlNjZW5lfSBzY2VuZVxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIG9wdHMpIHtcbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG5cbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgdmFyIGZyYW1lQnVmZmVyID0gdGhpcy5fZnJhbWVCdWZmZXI7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IGZyYW1lQnVmZmVyLnZpZXdwb3J0O1xuXG4gICAgICAgIHZhciByZW5kZXJMaXN0ID0gc2NlbmUudXBkYXRlUmVuZGVyTGlzdChjYW1lcmEsIHRydWUpO1xuXG4gICAgICAgIHZhciBvcGFxdWVMaXN0ID0gcmVuZGVyTGlzdC5vcGFxdWU7XG4gICAgICAgIHZhciB0cmFuc3BhcmVudExpc3QgPSByZW5kZXJMaXN0LnRyYW5zcGFyZW50O1xuXG4gICAgICAgIHZhciBvZmZzZXQgPSAwO1xuICAgICAgICB2YXIgZ0J1ZmZlclJlbmRlckxpc3QgPSB0aGlzLl9nQnVmZmVyUmVuZGVyTGlzdDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcGFxdWVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIW9wYXF1ZUxpc3RbaV0uaWdub3JlR0J1ZmZlcikge1xuICAgICAgICAgICAgICAgIGdCdWZmZXJSZW5kZXJMaXN0W29mZnNldCsrXSA9IG9wYXF1ZUxpc3RbaV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucmVuZGVyVHJhbnNwYXJlbnQpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHJhbnNwYXJlbnRMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0cmFuc3BhcmVudExpc3RbaV0uaWdub3JlR0J1ZmZlcikge1xuICAgICAgICAgICAgICAgICAgICBnQnVmZmVyUmVuZGVyTGlzdFtvZmZzZXQrK10gPSB0cmFuc3BhcmVudExpc3RbaV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdCdWZmZXJSZW5kZXJMaXN0Lmxlbmd0aCA9IG9mZnNldDtcblxuICAgICAgICBnbC5jbGVhckNvbG9yKDAsIDAsIDAsIDApO1xuICAgICAgICBnbC5kZXB0aE1hc2sodHJ1ZSk7XG4gICAgICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgICAgICAgZ2wuZGlzYWJsZShnbC5CTEVORCk7XG5cbiAgICAgICAgdmFyIGVuYWJsZVRhcmdldFRleHR1cmUxID0gdGhpcy5lbmFibGVUYXJnZXRUZXh0dXJlMTtcbiAgICAgICAgdmFyIGVuYWJsZVRhcmdldFRleHR1cmUyID0gdGhpcy5lbmFibGVUYXJnZXRUZXh0dXJlMjtcbiAgICAgICAgdmFyIGVuYWJsZVRhcmdldFRleHR1cmUzID0gdGhpcy5lbmFibGVUYXJnZXRUZXh0dXJlMztcbiAgICAgICAgdmFyIGVuYWJsZVRhcmdldFRleHR1cmU0ID0gdGhpcy5lbmFibGVUYXJnZXRUZXh0dXJlNDtcbiAgICAgICAgaWYgKCFlbmFibGVUYXJnZXRUZXh0dXJlMSAmJiAhZW5hYmxlVGFyZ2V0VGV4dHVyZTMgJiYgIWVuYWJsZVRhcmdldFRleHR1cmU0KSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhblxcJ3QgZGlzYWJsZSB0YXJnZXRUZXh0dXJlMSwgdGFyZ2V0VGV4dHVyZTMsIHRhcmdldFRleHR1cmU0IGJvdGgnKTtcbiAgICAgICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmUxID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlbmFibGVUYXJnZXRUZXh0dXJlMikge1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKG9wdHMudGFyZ2V0VGV4dHVyZTIgfHwgdGhpcy5fZ0J1ZmZlclRleDIsIHJlbmRlcmVyLmdsLkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjbGVhclZpZXdwb3J0KCkge1xuICAgICAgICAgICAgaWYgKHZpZXdwb3J0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGRwciA9IHZpZXdwb3J0LmRldmljZVBpeGVsUmF0aW87XG4gICAgICAgICAgICAgICAgLy8gdXNlIHNjaXNzb3IgdG8gbWFrZSBzdXJlIG9ubHkgY2xlYXIgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICAgICAgZ2wuZW5hYmxlKGdsLlNDSVNTT1JfVEVTVCk7XG4gICAgICAgICAgICAgICAgZ2wuc2Npc3Nvcih2aWV3cG9ydC54ICogZHByLCB2aWV3cG9ydC55ICogZHByLCB2aWV3cG9ydC53aWR0aCAqIGRwciwgdmlld3BvcnQuaGVpZ2h0ICogZHByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQgfCBnbC5ERVBUSF9CVUZGRVJfQklUKTtcbiAgICAgICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgICAgIGdsLmRpc2FibGUoZ2wuU0NJU1NPUl9URVNUKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzTWF0ZXJpYWxDaGFuZ2VkKHJlbmRlcmFibGUsIHByZXZSZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5tYXRlcmlhbCAhPT0gcHJldlJlbmRlcmFibGUubWF0ZXJpYWw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQRU5ESU5HLCBzY2VuZS5ib3VuZGluZ0JveExhc3RGcmFtZSBuZWVkcyBiZSB1cGRhdGVkIGlmIGhhdmUgc2hhZG93XG4gICAgICAgIHJlbmRlcmVyLmJpbmRTY2VuZVJlbmRlcmluZyhzY2VuZSk7XG4gICAgICAgIGlmIChlbmFibGVUYXJnZXRUZXh0dXJlMSkge1xuICAgICAgICAgICAgLy8gUGFzcyAxXG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5hdHRhY2gob3B0cy50YXJnZXRUZXh0dXJlMSB8fCB0aGlzLl9nQnVmZmVyVGV4MSk7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgY2xlYXJWaWV3cG9ydCgpO1xuXG4gICAgICAgICAgICB2YXIgZ0J1ZmZlck1hdGVyaWFsMSA9IHRoaXMuX2dCdWZmZXJNYXRlcmlhbDE7XG4gICAgICAgICAgICB2YXIgcGFzc0NvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ0J1ZmZlck1hdGVyaWFsMTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVuaWZvcm06IGdldEdldFVuaWZvcm1Ib29rMSh0aGlzLl9kZWZhdWx0Tm9ybWFsTWFwLCB0aGlzLl9kZWZhdWx0Um91Z2huZXNzTWFwLCB0aGlzLl9kZWZhdWx0RGlmZnVzZU1hcCksXG4gICAgICAgICAgICAgICAgaXNNYXRlcmlhbENoYW5nZWQ6IGlzTWF0ZXJpYWxDaGFuZ2VkLFxuICAgICAgICAgICAgICAgIHNvcnRDb21wYXJlOiByZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8vIEZJWE1FIFVzZSBNUlQgaWYgcG9zc2libGVcbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoZ0J1ZmZlclJlbmRlckxpc3QsIGNhbWVyYSwgcGFzc0NvbmZpZyk7XG5cbiAgICAgICAgfVxuICAgICAgICBpZiAoZW5hYmxlVGFyZ2V0VGV4dHVyZTMpIHtcblxuICAgICAgICAgICAgLy8gUGFzcyAyXG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5hdHRhY2gob3B0cy50YXJnZXRUZXh0dXJlMyB8fCB0aGlzLl9nQnVmZmVyVGV4Myk7XG4gICAgICAgICAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcblxuICAgICAgICAgICAgY2xlYXJWaWV3cG9ydCgpO1xuXG4gICAgICAgICAgICB2YXIgZ0J1ZmZlck1hdGVyaWFsMiA9IHRoaXMuX2dCdWZmZXJNYXRlcmlhbDI7XG4gICAgICAgICAgICB2YXIgcGFzc0NvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBnZXRNYXRlcmlhbDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ0J1ZmZlck1hdGVyaWFsMjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVuaWZvcm06IGdldEdldFVuaWZvcm1Ib29rMih0aGlzLl9kZWZhdWx0RGlmZnVzZU1hcCwgdGhpcy5fZGVmYXVsdE1ldGFsbmVzc01hcCksXG4gICAgICAgICAgICAgICAgaXNNYXRlcmlhbENoYW5nZWQ6IGlzTWF0ZXJpYWxDaGFuZ2VkLFxuICAgICAgICAgICAgICAgIHNvcnRDb21wYXJlOiByZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoZ0J1ZmZlclJlbmRlckxpc3QsIGNhbWVyYSwgcGFzc0NvbmZpZyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZW5hYmxlVGFyZ2V0VGV4dHVyZTQpIHtcbiAgICAgICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKG9wdHMudGFyZ2V0VGV4dHVyZTQgfHwgdGhpcy5fZ0J1ZmZlclRleDQpO1xuXG4gICAgICAgICAgICBjbGVhclZpZXdwb3J0KCk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBqaXR0ZXJpbmcgaW4gdGVtcG9yYWwgYWEuXG4gICAgICAgICAgICAvLyBQRU5ESU5HLiBCZXR0ZXIgc29sdXRpb24/XG4gICAgICAgICAgICBjYW1lcmEudXBkYXRlKCk7XG5cbiAgICAgICAgICAgIHZhciBnQnVmZmVyTWF0ZXJpYWwzID0gdGhpcy5fZ0J1ZmZlck1hdGVyaWFsMztcbiAgICAgICAgICAgIHZhciBjYW1lcmFWaWV3UHJvaiA9IG1hdDQuY3JlYXRlKCk7XG4gICAgICAgICAgICBtYXQ0Lm11bHRpcGx5KGNhbWVyYVZpZXdQcm9qLCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5hcnJheSwgY2FtZXJhLnZpZXdNYXRyaXguYXJyYXkpO1xuICAgICAgICAgICAgdmFyIHBhc3NDb25maWcgPSB7XG4gICAgICAgICAgICAgICAgZ2V0TWF0ZXJpYWw6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdCdWZmZXJNYXRlcmlhbDM7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhZnRlclJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCByZW5kZXJhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1NraW5uZWRNZXNoID0gcmVuZGVyYWJsZS5pc1NraW5uZWRNZXNoKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NraW5uZWRNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2tlbGV0b24gPSByZW5kZXJhYmxlLnNrZWxldG9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50cyA9IHJlbmRlcmFibGUuam9pbnRzO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpvaW50cy5sZW5ndGggPiByZW5kZXJlci5nZXRNYXhKb2ludE51bWJlcigpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNraW5NYXRyaWNlc1RleHR1cmUgPSBza2VsZXRvbi5nZXRTdWJTa2luTWF0cmljZXNUZXh0dXJlKHJlbmRlcmFibGUuX191aWRfXywgam9pbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJldlNraW5NYXRyaWNlc1RleHR1cmUgPSByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc1RleHR1cmU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZSA9IHJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogVGV4dHVyZS5GTE9BVCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbkZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFnRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VNaXBtYXA6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmxpcFk6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXByZXZTa2luTWF0cmljZXNUZXh0dXJlLnBpeGVsc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHMubGVuZ3RoICE9PSBza2luTWF0cmljZXNUZXh0dXJlLnBpeGVscy5sZW5ndGhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNraW5NYXRyaWNlc1RleHR1cmUucGl4ZWxzID0gbmV3IEZsb2F0MzJBcnJheShza2luTWF0cmljZXNUZXh0dXJlLnBpeGVscyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNraW5NYXRyaWNlc1RleHR1cmUucGl4ZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZS5waXhlbHNbaV0gPSBza2luTWF0cmljZXNUZXh0dXJlLnBpeGVsc1tpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2U2tpbk1hdHJpY2VzVGV4dHVyZS53aWR0aCA9IHNraW5NYXRyaWNlc1RleHR1cmUud2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlNraW5NYXRyaWNlc1RleHR1cmUuaGVpZ2h0ID0gc2tpbk1hdHJpY2VzVGV4dHVyZS5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2tpbk1hdHJpY2VzQXJyYXkgPSBza2VsZXRvbi5nZXRTdWJTa2luTWF0cmljZXMocmVuZGVyYWJsZS5fX3VpZF9fLCBqb2ludHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVuZGVyYWJsZS5fX3ByZXZTa2luTWF0cmljZXNBcnJheSB8fCByZW5kZXJhYmxlLl9fcHJldlNraW5NYXRyaWNlc0FycmF5Lmxlbmd0aCAhPT0gc2tpbk1hdHJpY2VzQXJyYXkubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KHNraW5NYXRyaWNlc0FycmF5Lmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzQXJyYXkuc2V0KHNraW5NYXRyaWNlc0FycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZW5kZXJhYmxlLl9fcHJldldvcmxkVmlld1Byb2plY3Rpb24gPSByZW5kZXJhYmxlLl9fcHJldldvcmxkVmlld1Byb2plY3Rpb24gfHwgbWF0NC5jcmVhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElnbm9yZSB3b3JsZCB0cmFuc2Zvcm0gb2Ygc2tpbm5lZCBtZXNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0NC5jb3B5KHJlbmRlcmFibGUuX19wcmV2V29ybGRWaWV3UHJvamVjdGlvbiwgY2FtZXJhVmlld1Byb2opO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0NC5tdWx0aXBseShyZW5kZXJhYmxlLl9fcHJldldvcmxkVmlld1Byb2plY3Rpb24sIGNhbWVyYVZpZXdQcm9qLCByZW5kZXJhYmxlLndvcmxkVHJhbnNmb3JtLmFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0VW5pZm9ybTogZnVuY3Rpb24gKHJlbmRlcmFibGUsIGdCdWZmZXJNYXQsIHN5bWJvbCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3ltYm9sID09PSAncHJldldvcmxkVmlld1Byb2plY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5fX3ByZXZXb3JsZFZpZXdQcm9qZWN0aW9uO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ3ByZXZTa2luTWF0cml4Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmFibGUuX19wcmV2U2tpbk1hdHJpY2VzQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoc3ltYm9sID09PSAncHJldlNraW5NYXRyaWNlc1RleHR1cmUnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVuZGVyYWJsZS5fX3ByZXZTa2luTWF0cmljZXNUZXh0dXJlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHN5bWJvbCA9PT0gJ2ZpcnN0UmVuZGVyJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICFyZW5kZXJhYmxlLl9fcHJldldvcmxkVmlld1Byb2plY3Rpb247XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ0J1ZmZlck1hdC5nZXQoc3ltYm9sKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaXNNYXRlcmlhbENoYW5nZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQWx3YXlzIHVwZGF0ZSBwcmV2V29ybGRWaWV3UHJvamVjdGlvblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNvcnRDb21wYXJlOiByZW5kZXJlci5vcGFxdWVTb3J0Q29tcGFyZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVuZGVyZXIucmVuZGVyUGFzcyhnQnVmZmVyUmVuZGVyTGlzdCwgY2FtZXJhLCBwYXNzQ29uZmlnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVyLmJpbmRTY2VuZVJlbmRlcmluZyhudWxsKTtcbiAgICAgICAgZnJhbWVCdWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRGVidWcgb3V0cHV0IG9mIGdCdWZmZXIuIFVzZSBgdHlwZWAgcGFyYW1ldGVyIHRvIGNob29zIHRoZSBkZWJ1ZyBvdXRwdXQgdHlwZSwgd2hpY2ggY2FuIGJlOlxuICAgICAqXG4gICAgICogKyAnbm9ybWFsJ1xuICAgICAqICsgJ2RlcHRoJ1xuICAgICAqICsgJ3Bvc2l0aW9uJ1xuICAgICAqICsgJ2dsb3NzaW5lc3MnXG4gICAgICogKyAnbWV0YWxuZXNzJ1xuICAgICAqICsgJ2FsYmVkbydcbiAgICAgKiArICd2ZWxvY2l0eSdcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuQ2FtZXJhfSBjYW1lcmFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gW3R5cGU9J25vcm1hbCddXG4gICAgICovXG4gICAgcmVuZGVyRGVidWc6IGZ1bmN0aW9uIChyZW5kZXJlciwgY2FtZXJhLCB0eXBlLCB2aWV3cG9ydCkge1xuICAgICAgICB2YXIgZGVidWdUeXBlcyA9IHtcbiAgICAgICAgICAgIG5vcm1hbDogMCxcbiAgICAgICAgICAgIGRlcHRoOiAxLFxuICAgICAgICAgICAgcG9zaXRpb246IDIsXG4gICAgICAgICAgICBnbG9zc2luZXNzOiAzLFxuICAgICAgICAgICAgbWV0YWxuZXNzOiA0LFxuICAgICAgICAgICAgYWxiZWRvOiA1LFxuICAgICAgICAgICAgdmVsb2NpdHk6IDZcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGRlYnVnVHlwZXNbdHlwZV0gPT0gbnVsbCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmtvd24gdHlwZSBcIicgKyB0eXBlICsgJ1wiJyk7XG4gICAgICAgICAgICAvLyBEZWZhdWx0IHVzZSBub3JtYWxcbiAgICAgICAgICAgIHR5cGUgPSAnbm9ybWFsJztcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVyLnNhdmVDbGVhcigpO1xuICAgICAgICByZW5kZXJlci5zYXZlVmlld3BvcnQoKTtcbiAgICAgICAgcmVuZGVyZXIuY2xlYXJCaXQgPSByZW5kZXJlci5nbC5ERVBUSF9CVUZGRVJfQklUO1xuXG4gICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgcmVuZGVyZXIuc2V0Vmlld3BvcnQodmlld3BvcnQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciB2aWV3UHJvamVjdGlvbkludiA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIE1hdHJpeDQubXVsdGlwbHkodmlld1Byb2plY3Rpb25JbnYsIGNhbWVyYS53b3JsZFRyYW5zZm9ybSwgY2FtZXJhLmludlByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIHZhciBkZWJ1Z1Bhc3MgPSB0aGlzLl9kZWJ1Z1Bhc3M7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCd2aWV3cG9ydFNpemUnLCBbcmVuZGVyZXIuZ2V0V2lkdGgoKSwgcmVuZGVyZXIuZ2V0SGVpZ2h0KCldKTtcbiAgICAgICAgZGVidWdQYXNzLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMScsIHRoaXMuX2dCdWZmZXJUZXgxKTtcbiAgICAgICAgZGVidWdQYXNzLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMicsIHRoaXMuX2dCdWZmZXJUZXgyKTtcbiAgICAgICAgZGVidWdQYXNzLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMycsIHRoaXMuX2dCdWZmZXJUZXgzKTtcbiAgICAgICAgZGVidWdQYXNzLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlNCcsIHRoaXMuX2dCdWZmZXJUZXg0KTtcbiAgICAgICAgZGVidWdQYXNzLnNldFVuaWZvcm0oJ2RlYnVnJywgZGVidWdUeXBlc1t0eXBlXSk7XG4gICAgICAgIGRlYnVnUGFzcy5zZXRVbmlmb3JtKCd2aWV3UHJvamVjdGlvbkludicsIHZpZXdQcm9qZWN0aW9uSW52LmFycmF5KTtcbiAgICAgICAgZGVidWdQYXNzLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICAgICAgcmVuZGVyZXIucmVzdG9yZVZpZXdwb3J0KCk7XG4gICAgICAgIHJlbmRlcmVyLnJlc3RvcmVDbGVhcigpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgZmlyc3QgdGFyZ2V0IHRleHR1cmUuXG4gICAgICogQ2hhbm5lbCBzdG9yYWdlOlxuICAgICAqICsgUjogbm9ybWFsLnggKiAwLjUgKyAwLjVcbiAgICAgKiArIEc6IG5vcm1hbC55ICogMC41ICsgMC41XG4gICAgICogKyBCOiBub3JtYWwueiAqIDAuNSArIDAuNVxuICAgICAqICsgQTogZ2xvc3NpbmVzc1xuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGdldFRhcmdldFRleHR1cmUxOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nQnVmZmVyVGV4MTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHNlY29uZCB0YXJnZXQgdGV4dHVyZS5cbiAgICAgKiBDaGFubmVsIHN0b3JhZ2U6XG4gICAgICogKyBSOiBkZXB0aFxuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGdldFRhcmdldFRleHR1cmUyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nQnVmZmVyVGV4MjtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IHRoaXJkIHRhcmdldCB0ZXh0dXJlLlxuICAgICAqIENoYW5uZWwgc3RvcmFnZTpcbiAgICAgKiArIFI6IGFsYmVkby5yXG4gICAgICogKyBHOiBhbGJlZG8uZ1xuICAgICAqICsgQjogYWxiZWRvLmJcbiAgICAgKiArIEE6IG1ldGFsbmVzc1xuICAgICAqIEByZXR1cm4ge2NsYXkuVGV4dHVyZTJEfVxuICAgICAqL1xuICAgIGdldFRhcmdldFRleHR1cmUzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9nQnVmZmVyVGV4MztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGZvdXJ0aCB0YXJnZXQgdGV4dHVyZS5cbiAgICAgKiBDaGFubmVsIHN0b3JhZ2U6XG4gICAgICogKyBSOiB2ZWxvY2l0eS5yXG4gICAgICogKyBHOiB2ZWxvY2l0eS5nXG4gICAgICogQHJldHVybiB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICovXG4gICAgZ2V0VGFyZ2V0VGV4dHVyZTQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2dCdWZmZXJUZXg0O1xuICAgIH0sXG5cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge2NsYXkuUmVuZGVyZXJ9IHJlbmRlcmVyXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuX2dCdWZmZXJUZXgxLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9nQnVmZmVyVGV4Mi5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZ0J1ZmZlclRleDMuZGlzcG9zZShyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy5fZGVmYXVsdE5vcm1hbE1hcC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdFJvdWdobmVzc01hcC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdE1ldGFsbmVzc01hcC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fZGVmYXVsdERpZmZ1c2VNYXAuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBHQnVmZmVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZWZlcnJlZC9HQnVmZmVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///107\n");

/***/ }),
/* 108 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Cone__ = __webpack_require__(63);\n\n\n\n/**\n * @constructor clay.geometry.Cylinder\n * @extends clay.Geometry\n * @param {Object} [opt]\n * @param {number} [opt.radius]\n * @param {number} [opt.height]\n * @param {number} [opt.capSegments]\n * @param {number} [opt.heightSegments]\n */\nvar Cylinder = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend(\n/** @lends clay.geometry.Cylinder# */\n{\n    dynamic: false,\n    /**\n     * @type {number}\n     */\n    radius: 1,\n\n    /**\n     * @type {number}\n     */\n    height: 2,\n\n    /**\n     * @type {number}\n     */\n    capSegments: 50,\n\n    /**\n     * @type {number}\n     */\n    heightSegments: 1\n}, function() {\n    this.build();\n},\n/** @lends clay.geometry.Cylinder.prototype */\n{\n    /**\n     * Build cylinder geometry\n     */\n    build: function() {\n        var cone = new __WEBPACK_IMPORTED_MODULE_1__Cone__[\"a\" /* default */]({\n            topRadius: this.radius,\n            bottomRadius: this.radius,\n            capSegments: this.capSegments,\n            heightSegments: this.heightSegments,\n            height: this.height\n        });\n\n        this.attributes.position.value = cone.attributes.position.value;\n        this.attributes.normal.value = cone.attributes.normal.value;\n        this.attributes.texcoord0.value = cone.attributes.texcoord0.value;\n        this.indices = cone.indices;\n\n        this.boundingBox = cone.boundingBox;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Cylinder);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nZW9tZXRyeS9DeWxpbmRlci5qcz80OWY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgQ29uZUdlb21ldHJ5IGZyb20gJy4vQ29uZSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuZ2VvbWV0cnkuQ3lsaW5kZXJcbiAqIEBleHRlbmRzIGNsYXkuR2VvbWV0cnlcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQucmFkaXVzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuaGVpZ2h0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHQuY2FwU2VnbWVudHNdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdC5oZWlnaHRTZWdtZW50c11cbiAqL1xudmFyIEN5bGluZGVyID0gR2VvbWV0cnkuZXh0ZW5kKFxuLyoqIEBsZW5kcyBjbGF5Lmdlb21ldHJ5LkN5bGluZGVyIyAqL1xue1xuICAgIGR5bmFtaWM6IGZhbHNlLFxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgcmFkaXVzOiAxLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBoZWlnaHQ6IDIsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGNhcFNlZ21lbnRzOiA1MCxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgaGVpZ2h0U2VnbWVudHM6IDFcbn0sIGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYnVpbGQoKTtcbn0sXG4vKiogQGxlbmRzIGNsYXkuZ2VvbWV0cnkuQ3lsaW5kZXIucHJvdG90eXBlICovXG57XG4gICAgLyoqXG4gICAgICogQnVpbGQgY3lsaW5kZXIgZ2VvbWV0cnlcbiAgICAgKi9cbiAgICBidWlsZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBjb25lID0gbmV3IENvbmVHZW9tZXRyeSh7XG4gICAgICAgICAgICB0b3BSYWRpdXM6IHRoaXMucmFkaXVzLFxuICAgICAgICAgICAgYm90dG9tUmFkaXVzOiB0aGlzLnJhZGl1cyxcbiAgICAgICAgICAgIGNhcFNlZ21lbnRzOiB0aGlzLmNhcFNlZ21lbnRzLFxuICAgICAgICAgICAgaGVpZ2h0U2VnbWVudHM6IHRoaXMuaGVpZ2h0U2VnbWVudHMsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZSA9IGNvbmUuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLm5vcm1hbC52YWx1ZSA9IGNvbmUuYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWUgPSBjb25lLmF0dHJpYnV0ZXMudGV4Y29vcmQwLnZhbHVlO1xuICAgICAgICB0aGlzLmluZGljZXMgPSBjb25lLmluZGljZXM7XG5cbiAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IGNvbmUuYm91bmRpbmdCb3g7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEN5bGluZGVyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dlb21ldHJ5L0N5bGluZGVyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///108\n");

/***/ }),
/* 109 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2x2 Matrix\n * @name mat2\n */\n\nvar mat2 = {};\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {mat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\nmat2.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n};\n\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\nmat2.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    return out;\n};\n\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.transpose = function(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        var a1 = a[1];\n        out[1] = a[2];\n        out[2] = a1;\n    } else {\n        out[0] = a[0];\n        out[1] = a[2];\n        out[2] = a[1];\n        out[3] = a[3];\n    }\n\n    return out;\n};\n\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.invert = function(out, a) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n\n        // Calculate the determinant\n        det = a0 * a3 - a2 * a1;\n\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] =  a3 * det;\n    out[1] = -a1 * det;\n    out[2] = -a2 * det;\n    out[3] =  a0 * det;\n\n    return out;\n};\n\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the source matrix\n * @returns {mat2} out\n */\nmat2.adjoint = function(out, a) {\n    // Caching this value is nessecary if out == a\n    var a0 = a[0];\n    out[0] =  a[3];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] =  a0;\n\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2\n *\n * @param {mat2} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2.determinant = function (a) {\n    return a[0] * a[3] - a[2] * a[1];\n};\n\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the first operand\n * @param {mat2} b the second operand\n * @returns {mat2} out\n */\nmat2.multiply = function (out, a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3];\n    var b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    return out;\n};\n\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\nmat2.mul = mat2.multiply;\n\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\nmat2.rotate = function (out, a, rad) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 *  c + a2 * s;\n    out[1] = a1 *  c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    return out;\n};\n\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {mat2} a the matrix to rotate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\nmat2.scale = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {mat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2)))\n};\n\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {mat2} L the lower triangular matrix\n * @param {mat2} D the diagonal matrix\n * @param {mat2} U the upper triangular matrix\n * @param {mat2} a the input matrix to factorize\n */\n\nmat2.LDU = function (L, D, U, a) {\n    L[2] = a[2]/a[0];\n    U[0] = a[0];\n    U[1] = a[1];\n    U[3] = a[3] - L[2] * U[1];\n    return [L, D, U];\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat2);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQyLmpzPzFiNmUiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbi8qIENvcHlyaWdodCAoYykgMjAxMywgQnJhbmRvbiBKb25lcywgQ29saW4gTWFjS2VuemllIElWLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuXG5SZWRpc3RyaWJ1dGlvbiBhbmQgdXNlIGluIHNvdXJjZSBhbmQgYmluYXJ5IGZvcm1zLCB3aXRoIG9yIHdpdGhvdXQgbW9kaWZpY2F0aW9uLFxuYXJlIHBlcm1pdHRlZCBwcm92aWRlZCB0aGF0IHRoZSBmb2xsb3dpbmcgY29uZGl0aW9ucyBhcmUgbWV0OlxuXG4gICogUmVkaXN0cmlidXRpb25zIG9mIHNvdXJjZSBjb2RlIG11c3QgcmV0YWluIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLCB0aGlzXG4gICAgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIuXG4gICogUmVkaXN0cmlidXRpb25zIGluIGJpbmFyeSBmb3JtIG11c3QgcmVwcm9kdWNlIHRoZSBhYm92ZSBjb3B5cmlnaHQgbm90aWNlLFxuICAgIHRoaXMgbGlzdCBvZiBjb25kaXRpb25zIGFuZCB0aGUgZm9sbG93aW5nIGRpc2NsYWltZXIgaW4gdGhlIGRvY3VtZW50YXRpb25cbiAgICBhbmQvb3Igb3RoZXIgbWF0ZXJpYWxzIHByb3ZpZGVkIHdpdGggdGhlIGRpc3RyaWJ1dGlvbi5cblxuVEhJUyBTT0ZUV0FSRSBJUyBQUk9WSURFRCBCWSBUSEUgQ09QWVJJR0hUIEhPTERFUlMgQU5EIENPTlRSSUJVVE9SUyBcIkFTIElTXCIgQU5EXG5BTlkgRVhQUkVTUyBPUiBJTVBMSUVEIFdBUlJBTlRJRVMsIElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBUSEUgSU1QTElFRFxuV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkgQU5EIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFSRVxuRElTQ0xBSU1FRC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIENPUFlSSUdIVCBIT0xERVIgT1IgQ09OVFJJQlVUT1JTIEJFIExJQUJMRSBGT1JcbkFOWSBESVJFQ1QsIElORElSRUNULCBJTkNJREVOVEFMLCBTUEVDSUFMLCBFWEVNUExBUlksIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFU1xuKElOQ0xVRElORywgQlVUIE5PVCBMSU1JVEVEIFRPLCBQUk9DVVJFTUVOVCBPRiBTVUJTVElUVVRFIEdPT0RTIE9SIFNFUlZJQ0VTO1xuTE9TUyBPRiBVU0UsIERBVEEsIE9SIFBST0ZJVFM7IE9SIEJVU0lORVNTIElOVEVSUlVQVElPTikgSE9XRVZFUiBDQVVTRUQgQU5EIE9OXG5BTlkgVEhFT1JZIE9GIExJQUJJTElUWSwgV0hFVEhFUiBJTiBDT05UUkFDVCwgU1RSSUNUIExJQUJJTElUWSwgT1IgVE9SVFxuKElOQ0xVRElORyBORUdMSUdFTkNFIE9SIE9USEVSV0lTRSkgQVJJU0lORyBJTiBBTlkgV0FZIE9VVCBPRiBUSEUgVVNFIE9GIFRISVNcblNPRlRXQVJFLCBFVkVOIElGIEFEVklTRUQgT0YgVEhFIFBPU1NJQklMSVRZIE9GIFNVQ0ggREFNQUdFLiAqL1xuXG5pbXBvcnQgeyBHTE1BVF9BUlJBWV9UWVBFIH0gZnJvbSAnLi9jb21tb24nO1xuXG4vKipcbiAqIEBjbGFzcyAyeDIgTWF0cml4XG4gKiBAbmFtZSBtYXQyXG4gKi9cblxudmFyIG1hdDIgPSB7fTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IGlkZW50aXR5IG1hdDJcbiAqXG4gKiBAcmV0dXJucyB7bWF0Mn0gYSBuZXcgMngyIG1hdHJpeFxuICovXG5tYXQyLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg0KTtcbiAgICBvdXRbMF0gPSAxO1xuICAgIG91dFsxXSA9IDA7XG4gICAgb3V0WzJdID0gMDtcbiAgICBvdXRbM10gPSAxO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MiBpbml0aWFsaXplZCB3aXRoIHZhbHVlcyBmcm9tIGFuIGV4aXN0aW5nIG1hdHJpeFxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gYSBtYXRyaXggdG8gY2xvbmVcbiAqIEByZXR1cm5zIHttYXQyfSBhIG5ldyAyeDIgbWF0cml4XG4gKi9cbm1hdDIuY2xvbmUgPSBmdW5jdGlvbihhKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDQpO1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ29weSB0aGUgdmFsdWVzIGZyb20gb25lIG1hdDIgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5jb3B5ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTtcbiAgICBvdXRbMV0gPSBhWzFdO1xuICAgIG91dFsyXSA9IGFbMl07XG4gICAgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTZXQgYSBtYXQyIHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHJldHVybnMge21hdDJ9IG91dFxuICovXG5tYXQyLmlkZW50aXR5ID0gZnVuY3Rpb24ob3V0KSB7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBUcmFuc3Bvc2UgdGhlIHZhbHVlcyBvZiBhIG1hdDJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0Mn0gb3V0XG4gKi9cbm1hdDIudHJhbnNwb3NlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlc1xuICAgIGlmIChvdXQgPT09IGEpIHtcbiAgICAgICAgdmFyIGExID0gYVsxXTtcbiAgICAgICAgb3V0WzFdID0gYVsyXTtcbiAgICAgICAgb3V0WzJdID0gYTE7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgb3V0WzBdID0gYVswXTtcbiAgICAgICAgb3V0WzFdID0gYVsyXTtcbiAgICAgICAgb3V0WzJdID0gYVsxXTtcbiAgICAgICAgb3V0WzNdID0gYVszXTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBJbnZlcnRzIGEgbWF0MlxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5pbnZlcnQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdLFxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnRcbiAgICAgICAgZGV0ID0gYTAgKiBhMyAtIGEyICogYTE7XG5cbiAgICBpZiAoIWRldCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZGV0ID0gMS4wIC8gZGV0O1xuXG4gICAgb3V0WzBdID0gIGEzICogZGV0O1xuICAgIG91dFsxXSA9IC1hMSAqIGRldDtcbiAgICBvdXRbMl0gPSAtYTIgKiBkZXQ7XG4gICAgb3V0WzNdID0gIGEwICogZGV0O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgYWRqdWdhdGUgb2YgYSBtYXQyXG4gKlxuICogQHBhcmFtIHttYXQyfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDJ9IG91dFxuICovXG5tYXQyLmFkam9pbnQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICAvLyBDYWNoaW5nIHRoaXMgdmFsdWUgaXMgbmVzc2VjYXJ5IGlmIG91dCA9PSBhXG4gICAgdmFyIGEwID0gYVswXTtcbiAgICBvdXRbMF0gPSAgYVszXTtcbiAgICBvdXRbMV0gPSAtYVsxXTtcbiAgICBvdXRbMl0gPSAtYVsyXTtcbiAgICBvdXRbM10gPSAgYTA7XG5cbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkZXRlcm1pbmFudCBvZiBhIG1hdDJcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIHNvdXJjZSBtYXRyaXhcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IGRldGVybWluYW50IG9mIGFcbiAqL1xubWF0Mi5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuIGFbMF0gKiBhWzNdIC0gYVsyXSAqIGFbMV07XG59O1xuXG4vKipcbiAqIE11bHRpcGxpZXMgdHdvIG1hdDInc1xuICpcbiAqIEBwYXJhbSB7bWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIGZpcnN0IG9wZXJhbmRcbiAqIEBwYXJhbSB7bWF0Mn0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQyfSBvdXRcbiAqL1xubWF0Mi5tdWx0aXBseSA9IGZ1bmN0aW9uIChvdXQsIGEsIGIpIHtcbiAgICB2YXIgYTAgPSBhWzBdLCBhMSA9IGFbMV0sIGEyID0gYVsyXSwgYTMgPSBhWzNdO1xuICAgIHZhciBiMCA9IGJbMF0sIGIxID0gYlsxXSwgYjIgPSBiWzJdLCBiMyA9IGJbM107XG4gICAgb3V0WzBdID0gYTAgKiBiMCArIGEyICogYjE7XG4gICAgb3V0WzFdID0gYTEgKiBiMCArIGEzICogYjE7XG4gICAgb3V0WzJdID0gYTAgKiBiMiArIGEyICogYjM7XG4gICAgb3V0WzNdID0gYTEgKiBiMiArIGEzICogYjM7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQWxpYXMgZm9yIHtAbGluayBtYXQyLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbm1hdDIubXVsID0gbWF0Mi5tdWx0aXBseTtcblxuLyoqXG4gKiBSb3RhdGVzIGEgbWF0MiBieSB0aGUgZ2l2ZW4gYW5nbGVcbiAqXG4gKiBAcGFyYW0ge21hdDJ9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBhIHRoZSBtYXRyaXggdG8gcm90YXRlXG4gKiBAcGFyYW0ge051bWJlcn0gcmFkIHRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDJ9IG91dFxuICovXG5tYXQyLnJvdGF0ZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sXG4gICAgICAgIHMgPSBNYXRoLnNpbihyYWQpLFxuICAgICAgICBjID0gTWF0aC5jb3MocmFkKTtcbiAgICBvdXRbMF0gPSBhMCAqICBjICsgYTIgKiBzO1xuICAgIG91dFsxXSA9IGExICogIGMgKyBhMyAqIHM7XG4gICAgb3V0WzJdID0gYTAgKiAtcyArIGEyICogYztcbiAgICBvdXRbM10gPSBhMSAqIC1zICsgYTMgKiBjO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNjYWxlcyB0aGUgbWF0MiBieSB0aGUgZGltZW5zaW9ucyBpbiB0aGUgZ2l2ZW4gdmVjMlxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJ9IGEgdGhlIG1hdHJpeCB0byByb3RhdGVcbiAqIEBwYXJhbSB7dmVjMn0gdiB0aGUgdmVjMiB0byBzY2FsZSB0aGUgbWF0cml4IGJ5XG4gKiBAcmV0dXJucyB7bWF0Mn0gb3V0XG4gKiovXG5tYXQyLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgdmFyIGEwID0gYVswXSwgYTEgPSBhWzFdLCBhMiA9IGFbMl0sIGEzID0gYVszXSxcbiAgICAgICAgdjAgPSB2WzBdLCB2MSA9IHZbMV07XG4gICAgb3V0WzBdID0gYTAgKiB2MDtcbiAgICBvdXRbMV0gPSBhMSAqIHYwO1xuICAgIG91dFsyXSA9IGEyICogdjE7XG4gICAgb3V0WzNdID0gYTMgKiB2MTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIEZyb2Jlbml1cyBub3JtIG9mIGEgbWF0MlxuICpcbiAqIEBwYXJhbSB7bWF0Mn0gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xubWF0Mi5mcm9iID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4oTWF0aC5zcXJ0KE1hdGgucG93KGFbMF0sIDIpICsgTWF0aC5wb3coYVsxXSwgMikgKyBNYXRoLnBvdyhhWzJdLCAyKSArIE1hdGgucG93KGFbM10sIDIpKSlcbn07XG5cbi8qKlxuICogUmV0dXJucyBMLCBEIGFuZCBVIG1hdHJpY2VzIChMb3dlciB0cmlhbmd1bGFyLCBEaWFnb25hbCBhbmQgVXBwZXIgdHJpYW5ndWxhcikgYnkgZmFjdG9yaXppbmcgdGhlIGlucHV0IG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBMIHRoZSBsb3dlciB0cmlhbmd1bGFyIG1hdHJpeFxuICogQHBhcmFtIHttYXQyfSBEIHRoZSBkaWFnb25hbCBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gVSB0aGUgdXBwZXIgdHJpYW5ndWxhciBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0Mn0gYSB0aGUgaW5wdXQgbWF0cml4IHRvIGZhY3Rvcml6ZVxuICovXG5cbm1hdDIuTERVID0gZnVuY3Rpb24gKEwsIEQsIFUsIGEpIHtcbiAgICBMWzJdID0gYVsyXS9hWzBdO1xuICAgIFVbMF0gPSBhWzBdO1xuICAgIFVbMV0gPSBhWzFdO1xuICAgIFVbM10gPSBhWzNdIC0gTFsyXSAqIFVbMV07XG4gICAgcmV0dXJuIFtMLCBELCBVXTtcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgbWF0MjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ2xtYXRyaXgvbWF0Mi5qc1xuLy8gbW9kdWxlIGlkID0gMTA5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///109\n");

/***/ }),
/* 110 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__common__ = __webpack_require__(22);\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n/**\n * @class 2x3 Matrix\n * @name mat2d\n *\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, c, tx,\n *  b, d, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * </pre>\n * The last row is ignored so the array is shorter and operations are faster.\n */\n\nvar mat2d = {};\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.create = function() {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](6);\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {mat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\nmat2d.clone = function(a) {\n    var out = new __WEBPACK_IMPORTED_MODULE_0__common__[\"a\" /* GLMAT_ARRAY_TYPE */](6);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    return out;\n};\n\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\nmat2d.identity = function(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 1;\n    out[4] = 0;\n    out[5] = 0;\n    return out;\n};\n\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the source matrix\n * @returns {mat2d} out\n */\nmat2d.invert = function(out, a) {\n    var aa = a[0], ab = a[1], ac = a[2], ad = a[3],\n        atx = a[4], aty = a[5];\n\n    var det = aa * ad - ab * ac;\n    if(!det){\n        return null;\n    }\n    det = 1.0 / det;\n\n    out[0] = ad * det;\n    out[1] = -ab * det;\n    out[2] = -ac * det;\n    out[3] = aa * det;\n    out[4] = (ac * aty - ad * atx) * det;\n    out[5] = (ab * atx - aa * aty) * det;\n    return out;\n};\n\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {mat2d} a the source matrix\n * @returns {Number} determinant of a\n */\nmat2d.determinant = function (a) {\n    return a[0] * a[3] - a[1] * a[2];\n};\n\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the first operand\n * @param {mat2d} b the second operand\n * @returns {mat2d} out\n */\nmat2d.multiply = function (out, a, b) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        b0 = b[0], b1 = b[1], b2 = b[2], b3 = b[3], b4 = b[4], b5 = b[5];\n    out[0] = a0 * b0 + a2 * b1;\n    out[1] = a1 * b0 + a3 * b1;\n    out[2] = a0 * b2 + a2 * b3;\n    out[3] = a1 * b2 + a3 * b3;\n    out[4] = a0 * b4 + a2 * b5 + a4;\n    out[5] = a1 * b4 + a3 * b5 + a5;\n    return out;\n};\n\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\nmat2d.mul = mat2d.multiply;\n\n\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\nmat2d.rotate = function (out, a, rad) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        s = Math.sin(rad),\n        c = Math.cos(rad);\n    out[0] = a0 *  c + a2 * s;\n    out[1] = a1 *  c + a3 * s;\n    out[2] = a0 * -s + a2 * c;\n    out[3] = a1 * -s + a3 * c;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\nmat2d.scale = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0 * v0;\n    out[1] = a1 * v0;\n    out[2] = a2 * v1;\n    out[3] = a3 * v1;\n    out[4] = a4;\n    out[5] = a5;\n    return out;\n};\n\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {mat2d} a the matrix to translate\n * @param {vec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\nmat2d.translate = function(out, a, v) {\n    var a0 = a[0], a1 = a[1], a2 = a[2], a3 = a[3], a4 = a[4], a5 = a[5],\n        v0 = v[0], v1 = v[1];\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = a0 * v0 + a2 * v1 + a4;\n    out[5] = a1 * v0 + a3 * v1 + a5;\n    return out;\n};\n\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {mat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nmat2d.frob = function (a) {\n    return(Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + 1))\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (mat2d);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9tYXQyZC5qcz9hOWQ4Il0sInNvdXJjZXNDb250ZW50IjpbIlxuLyogQ29weXJpZ2h0IChjKSAyMDEzLCBCcmFuZG9uIEpvbmVzLCBDb2xpbiBNYWNLZW56aWUgSVYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG5hcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbkFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG5XQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUlxuQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4oSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG5MT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbkFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4oSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuICovXG5cbmltcG9ydCB7IEdMTUFUX0FSUkFZX1RZUEUgfSBmcm9tICcuL2NvbW1vbic7XG5cbi8qKlxuICogQGNsYXNzIDJ4MyBNYXRyaXhcbiAqIEBuYW1lIG1hdDJkXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBIG1hdDJkIGNvbnRhaW5zIHNpeCBlbGVtZW50cyBkZWZpbmVkIGFzOlxuICogPHByZT5cbiAqIFthLCBjLCB0eCxcbiAqICBiLCBkLCB0eV1cbiAqIDwvcHJlPlxuICogVGhpcyBpcyBhIHNob3J0IGZvcm0gZm9yIHRoZSAzeDMgbWF0cml4OlxuICogPHByZT5cbiAqIFthLCBjLCB0eCxcbiAqICBiLCBkLCB0eSxcbiAqICAwLCAwLCAxXVxuICogPC9wcmU+XG4gKiBUaGUgbGFzdCByb3cgaXMgaWdub3JlZCBzbyB0aGUgYXJyYXkgaXMgc2hvcnRlciBhbmQgb3BlcmF0aW9ucyBhcmUgZmFzdGVyLlxuICovXG5cbnZhciBtYXQyZCA9IHt9O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgaWRlbnRpdHkgbWF0MmRcbiAqXG4gKiBAcmV0dXJucyB7bWF0MmR9IGEgbmV3IDJ4MyBtYXRyaXhcbiAqL1xubWF0MmQuY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG91dCA9IG5ldyBHTE1BVF9BUlJBWV9UWVBFKDYpO1xuICAgIG91dFswXSA9IDE7XG4gICAgb3V0WzFdID0gMDtcbiAgICBvdXRbMl0gPSAwO1xuICAgIG91dFszXSA9IDE7XG4gICAgb3V0WzRdID0gMDtcbiAgICBvdXRbNV0gPSAwO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbWF0MmQgaW5pdGlhbGl6ZWQgd2l0aCB2YWx1ZXMgZnJvbSBhbiBleGlzdGluZyBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBhIG1hdHJpeCB0byBjbG9uZVxuICogQHJldHVybnMge21hdDJkfSBhIG5ldyAyeDMgbWF0cml4XG4gKi9cbm1hdDJkLmNsb25lID0gZnVuY3Rpb24oYSkge1xuICAgIHZhciBvdXQgPSBuZXcgR0xNQVRfQVJSQVlfVFlQRSg2KTtcbiAgICBvdXRbMF0gPSBhWzBdO1xuICAgIG91dFsxXSA9IGFbMV07XG4gICAgb3V0WzJdID0gYVsyXTtcbiAgICBvdXRbM10gPSBhWzNdO1xuICAgIG91dFs0XSA9IGFbNF07XG4gICAgb3V0WzVdID0gYVs1XTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBDb3B5IHRoZSB2YWx1ZXMgZnJvbSBvbmUgbWF0MmQgdG8gYW5vdGhlclxuICpcbiAqIEBwYXJhbSB7bWF0MmR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgc291cmNlIG1hdHJpeFxuICogQHJldHVybnMge21hdDJkfSBvdXRcbiAqL1xubWF0MmQuY29weSA9IGZ1bmN0aW9uKG91dCwgYSkge1xuICAgIG91dFswXSA9IGFbMF07XG4gICAgb3V0WzFdID0gYVsxXTtcbiAgICBvdXRbMl0gPSBhWzJdO1xuICAgIG91dFszXSA9IGFbM107XG4gICAgb3V0WzRdID0gYVs0XTtcbiAgICBvdXRbNV0gPSBhWzVdO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIFNldCBhIG1hdDJkIHRvIHRoZSBpZGVudGl0eSBtYXRyaXhcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKi9cbm1hdDJkLmlkZW50aXR5ID0gZnVuY3Rpb24ob3V0KSB7XG4gICAgb3V0WzBdID0gMTtcbiAgICBvdXRbMV0gPSAwO1xuICAgIG91dFsyXSA9IDA7XG4gICAgb3V0WzNdID0gMTtcbiAgICBvdXRbNF0gPSAwO1xuICAgIG91dFs1XSA9IDA7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogSW52ZXJ0cyBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHttYXQyZH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJkfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7bWF0MmR9IG91dFxuICovXG5tYXQyZC5pbnZlcnQgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2YXIgYWEgPSBhWzBdLCBhYiA9IGFbMV0sIGFjID0gYVsyXSwgYWQgPSBhWzNdLFxuICAgICAgICBhdHggPSBhWzRdLCBhdHkgPSBhWzVdO1xuXG4gICAgdmFyIGRldCA9IGFhICogYWQgLSBhYiAqIGFjO1xuICAgIGlmKCFkZXQpe1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZGV0ID0gMS4wIC8gZGV0O1xuXG4gICAgb3V0WzBdID0gYWQgKiBkZXQ7XG4gICAgb3V0WzFdID0gLWFiICogZGV0O1xuICAgIG91dFsyXSA9IC1hYyAqIGRldDtcbiAgICBvdXRbM10gPSBhYSAqIGRldDtcbiAgICBvdXRbNF0gPSAoYWMgKiBhdHkgLSBhZCAqIGF0eCkgKiBkZXQ7XG4gICAgb3V0WzVdID0gKGFiICogYXR4IC0gYWEgKiBhdHkpICogZGV0O1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIGRldGVybWluYW50IG9mIGEgbWF0MmRcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBhIHRoZSBzb3VyY2UgbWF0cml4XG4gKiBAcmV0dXJucyB7TnVtYmVyfSBkZXRlcm1pbmFudCBvZiBhXG4gKi9cbm1hdDJkLmRldGVybWluYW50ID0gZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gYVswXSAqIGFbM10gLSBhWzFdICogYVsyXTtcbn07XG5cbi8qKlxuICogTXVsdGlwbGllcyB0d28gbWF0MmQnc1xuICpcbiAqIEBwYXJhbSB7bWF0MmR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgZmlyc3Qgb3BlcmFuZFxuICogQHBhcmFtIHttYXQyZH0gYiB0aGUgc2Vjb25kIG9wZXJhbmRcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKi9cbm1hdDJkLm11bHRpcGx5ID0gZnVuY3Rpb24gKG91dCwgYSwgYikge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sIGE0ID0gYVs0XSwgYTUgPSBhWzVdLFxuICAgICAgICBiMCA9IGJbMF0sIGIxID0gYlsxXSwgYjIgPSBiWzJdLCBiMyA9IGJbM10sIGI0ID0gYls0XSwgYjUgPSBiWzVdO1xuICAgIG91dFswXSA9IGEwICogYjAgKyBhMiAqIGIxO1xuICAgIG91dFsxXSA9IGExICogYjAgKyBhMyAqIGIxO1xuICAgIG91dFsyXSA9IGEwICogYjIgKyBhMiAqIGIzO1xuICAgIG91dFszXSA9IGExICogYjIgKyBhMyAqIGIzO1xuICAgIG91dFs0XSA9IGEwICogYjQgKyBhMiAqIGI1ICsgYTQ7XG4gICAgb3V0WzVdID0gYTEgKiBiNCArIGEzICogYjUgKyBhNTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBBbGlhcyBmb3Ige0BsaW5rIG1hdDJkLm11bHRpcGx5fVxuICogQGZ1bmN0aW9uXG4gKi9cbm1hdDJkLm11bCA9IG1hdDJkLm11bHRpcGx5O1xuXG5cbi8qKlxuICogUm90YXRlcyBhIG1hdDJkIGJ5IHRoZSBnaXZlbiBhbmdsZVxuICpcbiAqIEBwYXJhbSB7bWF0MmR9IG91dCB0aGUgcmVjZWl2aW5nIG1hdHJpeFxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgbWF0cml4IHRvIHJvdGF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IHJhZCB0aGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnlcbiAqIEByZXR1cm5zIHttYXQyZH0gb3V0XG4gKi9cbm1hdDJkLnJvdGF0ZSA9IGZ1bmN0aW9uIChvdXQsIGEsIHJhZCkge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sIGE0ID0gYVs0XSwgYTUgPSBhWzVdLFxuICAgICAgICBzID0gTWF0aC5zaW4ocmFkKSxcbiAgICAgICAgYyA9IE1hdGguY29zKHJhZCk7XG4gICAgb3V0WzBdID0gYTAgKiAgYyArIGEyICogcztcbiAgICBvdXRbMV0gPSBhMSAqICBjICsgYTMgKiBzO1xuICAgIG91dFsyXSA9IGEwICogLXMgKyBhMiAqIGM7XG4gICAgb3V0WzNdID0gYTEgKiAtcyArIGEzICogYztcbiAgICBvdXRbNF0gPSBhNDtcbiAgICBvdXRbNV0gPSBhNTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBTY2FsZXMgdGhlIG1hdDJkIGJ5IHRoZSBkaW1lbnNpb25zIGluIHRoZSBnaXZlbiB2ZWMyXG4gKlxuICogQHBhcmFtIHttYXQyZH0gb3V0IHRoZSByZWNlaXZpbmcgbWF0cml4XG4gKiBAcGFyYW0ge21hdDJkfSBhIHRoZSBtYXRyaXggdG8gdHJhbnNsYXRlXG4gKiBAcGFyYW0ge3ZlYzJ9IHYgdGhlIHZlYzIgdG8gc2NhbGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDJkfSBvdXRcbiAqKi9cbm1hdDJkLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgdmFyIGEwID0gYVswXSwgYTEgPSBhWzFdLCBhMiA9IGFbMl0sIGEzID0gYVszXSwgYTQgPSBhWzRdLCBhNSA9IGFbNV0sXG4gICAgICAgIHYwID0gdlswXSwgdjEgPSB2WzFdO1xuICAgIG91dFswXSA9IGEwICogdjA7XG4gICAgb3V0WzFdID0gYTEgKiB2MDtcbiAgICBvdXRbMl0gPSBhMiAqIHYxO1xuICAgIG91dFszXSA9IGEzICogdjE7XG4gICAgb3V0WzRdID0gYTQ7XG4gICAgb3V0WzVdID0gYTU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogVHJhbnNsYXRlcyB0aGUgbWF0MmQgYnkgdGhlIGRpbWVuc2lvbnMgaW4gdGhlIGdpdmVuIHZlYzJcbiAqXG4gKiBAcGFyYW0ge21hdDJkfSBvdXQgdGhlIHJlY2VpdmluZyBtYXRyaXhcbiAqIEBwYXJhbSB7bWF0MmR9IGEgdGhlIG1hdHJpeCB0byB0cmFuc2xhdGVcbiAqIEBwYXJhbSB7dmVjMn0gdiB0aGUgdmVjMiB0byB0cmFuc2xhdGUgdGhlIG1hdHJpeCBieVxuICogQHJldHVybnMge21hdDJkfSBvdXRcbiAqKi9cbm1hdDJkLnRyYW5zbGF0ZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIHZhciBhMCA9IGFbMF0sIGExID0gYVsxXSwgYTIgPSBhWzJdLCBhMyA9IGFbM10sIGE0ID0gYVs0XSwgYTUgPSBhWzVdLFxuICAgICAgICB2MCA9IHZbMF0sIHYxID0gdlsxXTtcbiAgICBvdXRbMF0gPSBhMDtcbiAgICBvdXRbMV0gPSBhMTtcbiAgICBvdXRbMl0gPSBhMjtcbiAgICBvdXRbM10gPSBhMztcbiAgICBvdXRbNF0gPSBhMCAqIHYwICsgYTIgKiB2MSArIGE0O1xuICAgIG91dFs1XSA9IGExICogdjAgKyBhMyAqIHYxICsgYTU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUmV0dXJucyBGcm9iZW5pdXMgbm9ybSBvZiBhIG1hdDJkXG4gKlxuICogQHBhcmFtIHttYXQyZH0gYSB0aGUgbWF0cml4IHRvIGNhbGN1bGF0ZSBGcm9iZW5pdXMgbm9ybSBvZlxuICogQHJldHVybnMge051bWJlcn0gRnJvYmVuaXVzIG5vcm1cbiAqL1xubWF0MmQuZnJvYiA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuKE1hdGguc3FydChNYXRoLnBvdyhhWzBdLCAyKSArIE1hdGgucG93KGFbMV0sIDIpICsgTWF0aC5wb3coYVsyXSwgMikgKyBNYXRoLnBvdyhhWzNdLCAyKSArIE1hdGgucG93KGFbNF0sIDIpICsgTWF0aC5wb3coYVs1XSwgMikgKyAxKSlcbn07XG5cblxuZXhwb3J0IGRlZmF1bHQgbWF0MmQ7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2dsbWF0cml4L21hdDJkLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///110\n");

/***/ }),
/* 111 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Vector2__ = __webpack_require__(26);\n\n\n\n/**\n * Random or constant 1d, 2d, 3d vector generator\n * @constructor\n * @alias clay.Value\n */\nvar Value = function() {};\n\n/**\n * @function\n * @param {number|clay.Vector2|clay.Vector3} [out]\n * @return {number|clay.Vector2|clay.Vector3}\n */\nValue.prototype.get = function(out) {};\n\n// Constant\nvar ConstantValue = function(val) {\n    this.get = function() {\n        return val;\n    };\n};\nConstantValue.prototype = new Value();\nConstantValue.prototype.constructor = ConstantValue;\n\n// Vector\nvar VectorValue = function(val) {\n    var Constructor = val.constructor;\n    this.get = function(out) {\n        if (!out) {\n            out = new Constructor();\n        }\n        out.copy(val);\n        return out;\n    };\n};\nVectorValue.prototype = new Value();\nVectorValue.prototype.constructor = VectorValue;\n//Random 1D\nvar Random1D = function(min, max) {\n    var range = max - min;\n    this.get = function() {\n        return Math.random() * range + min;\n    };\n};\nRandom1D.prototype = new Value();\nRandom1D.prototype.constructor = Random1D;\n\n// Random2D\nvar Random2D = function(min, max) {\n    var rangeX = max.x - min.x;\n    var rangeY = max.y - min.y;\n\n    this.get = function(out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_1__Vector2__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_1__Vector2__[\"a\" /* default */].set(\n            out,\n            rangeX * Math.random() + min.array[0],\n            rangeY * Math.random() + min.array[1]\n        );\n\n        return out;\n    };\n};\nRandom2D.prototype = new Value();\nRandom2D.prototype.constructor = Random2D;\n\nvar Random3D = function(min, max) {\n    var rangeX = max.x - min.x;\n    var rangeY = max.y - min.y;\n    var rangeZ = max.z - min.z;\n\n    this.get = function(out) {\n        if (!out) {\n            out = new __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */]();\n        }\n        __WEBPACK_IMPORTED_MODULE_0__Vector3__[\"a\" /* default */].set(\n            out,\n            rangeX * Math.random() + min.array[0],\n            rangeY * Math.random() + min.array[1],\n            rangeZ * Math.random() + min.array[2]\n        );\n\n        return out;\n    };\n};\nRandom3D.prototype = new Value();\nRandom3D.prototype.constructor = Random3D;\n\n// Factory methods\n\n/**\n * Create a constant 1d value generator\n * @param  {number} constant\n * @return {clay.Value}\n */\nValue.constant = function(constant) {\n    return new ConstantValue(constant);\n};\n\n/**\n * Create a constant vector value(2d or 3d) generator\n * @param  {clay.Vector2|clay.Vector3} vector\n * @return {clay.Value}\n */\nValue.vector = function(vector) {\n    return new VectorValue(vector);\n};\n\n/**\n * Create a random 1d value generator\n * @param  {number} min\n * @param  {number} max\n * @return {clay.Value}\n */\nValue.random1D = function(min, max) {\n    return new Random1D(min, max);\n};\n\n/**\n * Create a random 2d value generator\n * @param  {clay.Vector2} min\n * @param  {clay.Vector2} max\n * @return {clay.Value}\n */\nValue.random2D = function(min, max) {\n    return new Random2D(min, max);\n};\n\n/**\n * Create a random 3d value generator\n * @param  {clay.Vector3} min\n * @param  {clay.Vector3} max\n * @return {clay.Value}\n */\nValue.random3D = function(min, max) {\n    return new Random3D(min, max);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Value);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTExLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL1ZhbHVlLmpzP2ZmMjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9WZWN0b3IzJztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4vVmVjdG9yMic7XG5cbi8qKlxuICogUmFuZG9tIG9yIGNvbnN0YW50IDFkLCAyZCwgM2QgdmVjdG9yIGdlbmVyYXRvclxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5WYWx1ZVxuICovXG52YXIgVmFsdWUgPSBmdW5jdGlvbigpIHt9O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtudW1iZXJ8Y2xheS5WZWN0b3IyfGNsYXkuVmVjdG9yM30gW291dF1cbiAqIEByZXR1cm4ge251bWJlcnxjbGF5LlZlY3RvcjJ8Y2xheS5WZWN0b3IzfVxuICovXG5WYWx1ZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24ob3V0KSB7fTtcblxuLy8gQ29uc3RhbnRcbnZhciBDb25zdGFudFZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdGhpcy5nZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xufTtcbkNvbnN0YW50VmFsdWUucHJvdG90eXBlID0gbmV3IFZhbHVlKCk7XG5Db25zdGFudFZhbHVlLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IENvbnN0YW50VmFsdWU7XG5cbi8vIFZlY3RvclxudmFyIFZlY3RvclZhbHVlID0gZnVuY3Rpb24odmFsKSB7XG4gICAgdmFyIENvbnN0cnVjdG9yID0gdmFsLmNvbnN0cnVjdG9yO1xuICAgIHRoaXMuZ2V0ID0gZnVuY3Rpb24ob3V0KSB7XG4gICAgICAgIGlmICghb3V0KSB7XG4gICAgICAgICAgICBvdXQgPSBuZXcgQ29uc3RydWN0b3IoKTtcbiAgICAgICAgfVxuICAgICAgICBvdXQuY29weSh2YWwpO1xuICAgICAgICByZXR1cm4gb3V0O1xuICAgIH07XG59O1xuVmVjdG9yVmFsdWUucHJvdG90eXBlID0gbmV3IFZhbHVlKCk7XG5WZWN0b3JWYWx1ZS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBWZWN0b3JWYWx1ZTtcbi8vUmFuZG9tIDFEXG52YXIgUmFuZG9tMUQgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHZhciByYW5nZSA9IG1heCAtIG1pbjtcbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIHJhbmdlICsgbWluO1xuICAgIH07XG59O1xuUmFuZG9tMUQucHJvdG90eXBlID0gbmV3IFZhbHVlKCk7XG5SYW5kb20xRC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBSYW5kb20xRDtcblxuLy8gUmFuZG9tMkRcbnZhciBSYW5kb20yRCA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgdmFyIHJhbmdlWCA9IG1heC54IC0gbWluLng7XG4gICAgdmFyIHJhbmdlWSA9IG1heC55IC0gbWluLnk7XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKG91dCkge1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjIoKTtcbiAgICAgICAgfVxuICAgICAgICBWZWN0b3IyLnNldChcbiAgICAgICAgICAgIG91dCxcbiAgICAgICAgICAgIHJhbmdlWCAqIE1hdGgucmFuZG9tKCkgKyBtaW4uYXJyYXlbMF0sXG4gICAgICAgICAgICByYW5nZVkgKiBNYXRoLnJhbmRvbSgpICsgbWluLmFycmF5WzFdXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIG91dDtcbiAgICB9O1xufTtcblJhbmRvbTJELnByb3RvdHlwZSA9IG5ldyBWYWx1ZSgpO1xuUmFuZG9tMkQucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gUmFuZG9tMkQ7XG5cbnZhciBSYW5kb20zRCA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgdmFyIHJhbmdlWCA9IG1heC54IC0gbWluLng7XG4gICAgdmFyIHJhbmdlWSA9IG1heC55IC0gbWluLnk7XG4gICAgdmFyIHJhbmdlWiA9IG1heC56IC0gbWluLno7XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKG91dCkge1xuICAgICAgICBpZiAoIW91dCkge1xuICAgICAgICAgICAgb3V0ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgfVxuICAgICAgICBWZWN0b3IzLnNldChcbiAgICAgICAgICAgIG91dCxcbiAgICAgICAgICAgIHJhbmdlWCAqIE1hdGgucmFuZG9tKCkgKyBtaW4uYXJyYXlbMF0sXG4gICAgICAgICAgICByYW5nZVkgKiBNYXRoLnJhbmRvbSgpICsgbWluLmFycmF5WzFdLFxuICAgICAgICAgICAgcmFuZ2VaICogTWF0aC5yYW5kb20oKSArIG1pbi5hcnJheVsyXVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBvdXQ7XG4gICAgfTtcbn07XG5SYW5kb20zRC5wcm90b3R5cGUgPSBuZXcgVmFsdWUoKTtcblJhbmRvbTNELnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFJhbmRvbTNEO1xuXG4vLyBGYWN0b3J5IG1ldGhvZHNcblxuLyoqXG4gKiBDcmVhdGUgYSBjb25zdGFudCAxZCB2YWx1ZSBnZW5lcmF0b3JcbiAqIEBwYXJhbSAge251bWJlcn0gY29uc3RhbnRcbiAqIEByZXR1cm4ge2NsYXkuVmFsdWV9XG4gKi9cblZhbHVlLmNvbnN0YW50ID0gZnVuY3Rpb24oY29uc3RhbnQpIHtcbiAgICByZXR1cm4gbmV3IENvbnN0YW50VmFsdWUoY29uc3RhbnQpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBjb25zdGFudCB2ZWN0b3IgdmFsdWUoMmQgb3IgM2QpIGdlbmVyYXRvclxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfGNsYXkuVmVjdG9yM30gdmVjdG9yXG4gKiBAcmV0dXJuIHtjbGF5LlZhbHVlfVxuICovXG5WYWx1ZS52ZWN0b3IgPSBmdW5jdGlvbih2ZWN0b3IpIHtcbiAgICByZXR1cm4gbmV3IFZlY3RvclZhbHVlKHZlY3Rvcik7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmRvbSAxZCB2YWx1ZSBnZW5lcmF0b3JcbiAqIEBwYXJhbSAge251bWJlcn0gbWluXG4gKiBAcGFyYW0gIHtudW1iZXJ9IG1heFxuICogQHJldHVybiB7Y2xheS5WYWx1ZX1cbiAqL1xuVmFsdWUucmFuZG9tMUQgPSBmdW5jdGlvbihtaW4sIG1heCkge1xuICAgIHJldHVybiBuZXcgUmFuZG9tMUQobWluLCBtYXgpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSByYW5kb20gMmQgdmFsdWUgZ2VuZXJhdG9yXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9IG1pblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSBtYXhcbiAqIEByZXR1cm4ge2NsYXkuVmFsdWV9XG4gKi9cblZhbHVlLnJhbmRvbTJEID0gZnVuY3Rpb24obWluLCBtYXgpIHtcbiAgICByZXR1cm4gbmV3IFJhbmRvbTJEKG1pbiwgbWF4KTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgcmFuZG9tIDNkIHZhbHVlIGdlbmVyYXRvclxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSBtaW5cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gbWF4XG4gKiBAcmV0dXJuIHtjbGF5LlZhbHVlfVxuICovXG5WYWx1ZS5yYW5kb20zRCA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgcmV0dXJuIG5ldyBSYW5kb20zRChtaW4sIG1heCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBWYWx1ZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL1ZhbHVlLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///111\n");

/***/ }),
/* 112 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n/**\n * @constructor\n * @alias clay.particle.Particle\n */\nvar Particle = function() {\n    /**\n     * @type {clay.Vector3}\n     */\n    this.position = new __WEBPACK_IMPORTED_MODULE_0__math_Vector3__[\"a\" /* default */]();\n\n    /**\n     * Use euler angle to represent particle rotation\n     * @type {clay.Vector3}\n     */\n    this.rotation = new __WEBPACK_IMPORTED_MODULE_0__math_Vector3__[\"a\" /* default */]();\n\n    /**\n     * @type {?clay.Vector3}\n     */\n    this.velocity = null;\n\n    /**\n     * @type {?clay.Vector3}\n     */\n    this.angularVelocity = null;\n\n    /**\n     * @type {number}\n     */\n    this.life = 1;\n\n    /**\n     * @type {number}\n     */\n    this.age = 0;\n\n    /**\n     * @type {number}\n     */\n    this.spriteSize = 1;\n\n    /**\n     * @type {number}\n     */\n    this.weight = 1;\n\n    /**\n     * @type {clay.particle.Emitter}\n     */\n    this.emitter = null;\n};\n\n/**\n * Update particle position\n * @param  {number} deltaTime\n */\nParticle.prototype.update = function(deltaTime) {\n    if (this.velocity) {\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.position.array, this.position.array, this.velocity.array, deltaTime);\n    }\n    if (this.angularVelocity) {\n        __WEBPACK_IMPORTED_MODULE_1__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(this.rotation.array, this.rotation.array, this.angularVelocity.array, deltaTime);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Particle);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9QYXJ0aWNsZS5qcz82NGEwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgdmVjMyBmcm9tICcuLi9nbG1hdHJpeC92ZWMzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LnBhcnRpY2xlLlBhcnRpY2xlXG4gKi9cbnZhciBQYXJ0aWNsZSA9IGZ1bmN0aW9uKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5wb3NpdGlvbiA9IG5ldyBWZWN0b3IzKCk7XG5cbiAgICAvKipcbiAgICAgKiBVc2UgZXVsZXIgYW5nbGUgdG8gcmVwcmVzZW50IHBhcnRpY2xlIHJvdGF0aW9uXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgKi9cbiAgICB0aGlzLnJvdGF0aW9uID0gbmV3IFZlY3RvcjMoKTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHs/Y2xheS5WZWN0b3IzfVxuICAgICAqL1xuICAgIHRoaXMudmVsb2NpdHkgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUgez9jbGF5LlZlY3RvcjN9XG4gICAgICovXG4gICAgdGhpcy5hbmd1bGFyVmVsb2NpdHkgPSBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmxpZmUgPSAxO1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICB0aGlzLmFnZSA9IDA7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMuc3ByaXRlU2l6ZSA9IDE7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHRoaXMud2VpZ2h0ID0gMTtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LnBhcnRpY2xlLkVtaXR0ZXJ9XG4gICAgICovXG4gICAgdGhpcy5lbWl0dGVyID0gbnVsbDtcbn07XG5cbi8qKlxuICogVXBkYXRlIHBhcnRpY2xlIHBvc2l0aW9uXG4gKiBAcGFyYW0gIHtudW1iZXJ9IGRlbHRhVGltZVxuICovXG5QYXJ0aWNsZS5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24oZGVsdGFUaW1lKSB7XG4gICAgaWYgKHRoaXMudmVsb2NpdHkpIHtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZCh0aGlzLnBvc2l0aW9uLmFycmF5LCB0aGlzLnBvc2l0aW9uLmFycmF5LCB0aGlzLnZlbG9jaXR5LmFycmF5LCBkZWx0YVRpbWUpO1xuICAgIH1cbiAgICBpZiAodGhpcy5hbmd1bGFyVmVsb2NpdHkpIHtcbiAgICAgICAgdmVjMy5zY2FsZUFuZEFkZCh0aGlzLnJvdGF0aW9uLmFycmF5LCB0aGlzLnJvdGF0aW9uLmFycmF5LCB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5hcnJheSwgZGVsdGFUaW1lKTtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQYXJ0aWNsZTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9QYXJ0aWNsZS5qc1xuLy8gbW9kdWxlIGlkID0gMTEyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///112\n");

/***/ }),
/* 113 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n\n/**\n * @constructor clay.particle.Field\n * @extends clay.core.Base\n */\nvar Field = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend({}, {\n    /**\n     * Apply a field to the particle and update the particle velocity\n     * @param  {clay.Vector3} velocity\n     * @param  {clay.Vector3} position\n     * @param  {number} weight\n     * @param  {number} deltaTime\n     * @memberOf clay.particle.Field.prototype\n     */\n    applyTo: function(velocity, position, weight, deltaTime) {}\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Field);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9GaWVsZC5qcz9mNGEyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBhcnRpY2xlLkZpZWxkXG4gKiBAZXh0ZW5kcyBjbGF5LmNvcmUuQmFzZVxuICovXG52YXIgRmllbGQgPSBCYXNlLmV4dGVuZCh7fSwge1xuICAgIC8qKlxuICAgICAqIEFwcGx5IGEgZmllbGQgdG8gdGhlIHBhcnRpY2xlIGFuZCB1cGRhdGUgdGhlIHBhcnRpY2xlIHZlbG9jaXR5XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IzfSB2ZWxvY2l0eVxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yM30gcG9zaXRpb25cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHdlaWdodFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGVsdGFUaW1lXG4gICAgICogQG1lbWJlck9mIGNsYXkucGFydGljbGUuRmllbGQucHJvdG90eXBlXG4gICAgICovXG4gICAgYXBwbHlUbzogZnVuY3Rpb24odmVsb2NpdHksIHBvc2l0aW9uLCB3ZWlnaHQsIGRlbHRhVGltZSkge31cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBGaWVsZDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9GaWVsZC5qc1xuLy8gbW9kdWxlIGlkID0gMTEzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///113\n");

/***/ }),
/* 114 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var GestureMgr = function () {\n\n    this._track = [];\n};\n\nGestureMgr.prototype = {\n\n    constructor: GestureMgr,\n\n    recognize: function (event, target, root) {\n        this._doTrack(event, target, root);\n        return this._recognize(event);\n    },\n\n    clear: function () {\n        this._track.length = 0;\n        return this;\n    },\n\n    _doTrack: function (event, target, root) {\n        var touches = event.targetTouches;\n\n        if (!touches) {\n            return;\n        }\n\n        var trackItem = {\n            points: [],\n            touches: [],\n            target: target,\n            event: event\n        };\n\n        for (var i = 0, len = touches.length; i < len; i++) {\n            var touch = touches[i];\n            trackItem.points.push([touch.clientX, touch.clientY]);\n            trackItem.touches.push(touch);\n        }\n\n        this._track.push(trackItem);\n    },\n\n    _recognize: function (event) {\n        for (var eventName in recognizers) {\n            if (recognizers.hasOwnProperty(eventName)) {\n                var gestureInfo = recognizers[eventName](this._track, event);\n                if (gestureInfo) {\n                    return gestureInfo;\n                }\n            }\n        }\n    }\n};\n\nfunction dist(pointPair) {\n    var dx = pointPair[1][0] - pointPair[0][0];\n    var dy = pointPair[1][1] - pointPair[0][1];\n\n    return Math.sqrt(dx * dx + dy * dy);\n}\n\nfunction center(pointPair) {\n    return [\n        (pointPair[0][0] + pointPair[1][0]) / 2,\n        (pointPair[0][1] + pointPair[1][1]) / 2\n    ];\n}\n\nvar recognizers = {\n\n    pinch: function (track, event) {\n        var trackLen = track.length;\n\n        if (!trackLen) {\n            return;\n        }\n\n        var pinchEnd = (track[trackLen - 1] || {}).points;\n        var pinchPre = (track[trackLen - 2] || {}).points || pinchEnd;\n\n        if (pinchPre\n            && pinchPre.length > 1\n            && pinchEnd\n            && pinchEnd.length > 1\n        ) {\n            var pinchScale = dist(pinchEnd) / dist(pinchPre);\n            !isFinite(pinchScale) && (pinchScale = 1);\n\n            event.pinchScale = pinchScale;\n\n            var pinchCenter = center(pinchEnd);\n            event.pinchX = pinchCenter[0];\n            event.pinchY = pinchCenter[1];\n\n            return {\n                type: 'pinch',\n                target: track[0].target,\n                event: event\n            };\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GestureMgr);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vR2VzdHVyZU1nci5qcz8wZjA2Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBHZXN0dXJlTWdyID0gZnVuY3Rpb24gKCkge1xuXG4gICAgdGhpcy5fdHJhY2sgPSBbXTtcbn07XG5cbkdlc3R1cmVNZ3IucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IEdlc3R1cmVNZ3IsXG5cbiAgICByZWNvZ25pemU6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCByb290KSB7XG4gICAgICAgIHRoaXMuX2RvVHJhY2soZXZlbnQsIHRhcmdldCwgcm9vdCk7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZWNvZ25pemUoZXZlbnQpO1xuICAgIH0sXG5cbiAgICBjbGVhcjogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl90cmFjay5sZW5ndGggPSAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgX2RvVHJhY2s6IGZ1bmN0aW9uIChldmVudCwgdGFyZ2V0LCByb290KSB7XG4gICAgICAgIHZhciB0b3VjaGVzID0gZXZlbnQudGFyZ2V0VG91Y2hlcztcblxuICAgICAgICBpZiAoIXRvdWNoZXMpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0cmFja0l0ZW0gPSB7XG4gICAgICAgICAgICBwb2ludHM6IFtdLFxuICAgICAgICAgICAgdG91Y2hlczogW10sXG4gICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgIGV2ZW50OiBldmVudFxuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSB0b3VjaGVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdG91Y2ggPSB0b3VjaGVzW2ldO1xuICAgICAgICAgICAgdHJhY2tJdGVtLnBvaW50cy5wdXNoKFt0b3VjaC5jbGllbnRYLCB0b3VjaC5jbGllbnRZXSk7XG4gICAgICAgICAgICB0cmFja0l0ZW0udG91Y2hlcy5wdXNoKHRvdWNoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3RyYWNrLnB1c2godHJhY2tJdGVtKTtcbiAgICB9LFxuXG4gICAgX3JlY29nbml6ZTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiByZWNvZ25pemVycykge1xuICAgICAgICAgICAgaWYgKHJlY29nbml6ZXJzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZ2VzdHVyZUluZm8gPSByZWNvZ25pemVyc1tldmVudE5hbWVdKHRoaXMuX3RyYWNrLCBldmVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGdlc3R1cmVJbmZvKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXN0dXJlSW5mbztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5mdW5jdGlvbiBkaXN0KHBvaW50UGFpcikge1xuICAgIHZhciBkeCA9IHBvaW50UGFpclsxXVswXSAtIHBvaW50UGFpclswXVswXTtcbiAgICB2YXIgZHkgPSBwb2ludFBhaXJbMV1bMV0gLSBwb2ludFBhaXJbMF1bMV07XG5cbiAgICByZXR1cm4gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbn1cblxuZnVuY3Rpb24gY2VudGVyKHBvaW50UGFpcikge1xuICAgIHJldHVybiBbXG4gICAgICAgIChwb2ludFBhaXJbMF1bMF0gKyBwb2ludFBhaXJbMV1bMF0pIC8gMixcbiAgICAgICAgKHBvaW50UGFpclswXVsxXSArIHBvaW50UGFpclsxXVsxXSkgLyAyXG4gICAgXTtcbn1cblxudmFyIHJlY29nbml6ZXJzID0ge1xuXG4gICAgcGluY2g6IGZ1bmN0aW9uICh0cmFjaywgZXZlbnQpIHtcbiAgICAgICAgdmFyIHRyYWNrTGVuID0gdHJhY2subGVuZ3RoO1xuXG4gICAgICAgIGlmICghdHJhY2tMZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBwaW5jaEVuZCA9ICh0cmFja1t0cmFja0xlbiAtIDFdIHx8IHt9KS5wb2ludHM7XG4gICAgICAgIHZhciBwaW5jaFByZSA9ICh0cmFja1t0cmFja0xlbiAtIDJdIHx8IHt9KS5wb2ludHMgfHwgcGluY2hFbmQ7XG5cbiAgICAgICAgaWYgKHBpbmNoUHJlXG4gICAgICAgICAgICAmJiBwaW5jaFByZS5sZW5ndGggPiAxXG4gICAgICAgICAgICAmJiBwaW5jaEVuZFxuICAgICAgICAgICAgJiYgcGluY2hFbmQubGVuZ3RoID4gMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHZhciBwaW5jaFNjYWxlID0gZGlzdChwaW5jaEVuZCkgLyBkaXN0KHBpbmNoUHJlKTtcbiAgICAgICAgICAgICFpc0Zpbml0ZShwaW5jaFNjYWxlKSAmJiAocGluY2hTY2FsZSA9IDEpO1xuXG4gICAgICAgICAgICBldmVudC5waW5jaFNjYWxlID0gcGluY2hTY2FsZTtcblxuICAgICAgICAgICAgdmFyIHBpbmNoQ2VudGVyID0gY2VudGVyKHBpbmNoRW5kKTtcbiAgICAgICAgICAgIGV2ZW50LnBpbmNoWCA9IHBpbmNoQ2VudGVyWzBdO1xuICAgICAgICAgICAgZXZlbnQucGluY2hZID0gcGluY2hDZW50ZXJbMV07XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3BpbmNoJyxcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRyYWNrWzBdLnRhcmdldCxcbiAgICAgICAgICAgICAgICBldmVudDogZXZlbnRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBHZXN0dXJlTWdyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9HZXN0dXJlTWdyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///114\n");

/***/ }),
/* 115 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return deg2rad; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return rad2deg; });\nvar deg2rad = Math.PI / 180;\nvar rad2deg = 180 / Math.PI;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9tYXRoLmpzPzBjOGYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHZhciBkZWcycmFkID0gTWF0aC5QSSAvIDE4MDtcbmV4cG9ydCB2YXIgcmFkMmRlZyA9IDE4MCAvIE1hdGguUEk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1jb2xvci9zcmMvbWF0aC5qc1xuLy8gbW9kdWxlIGlkID0gMTE1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///115\n");

/***/ }),
/* 116 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return rgbBasis; });\n/* unused harmony export rgbBasisClosed */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__basis__ = __webpack_require__(69);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__basisClosed__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__color__ = __webpack_require__(29);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ((function rgbGamma(y) {\n  var color = Object(__WEBPACK_IMPORTED_MODULE_3__color__[\"b\" /* gamma */])(y);\n\n  function rgb(start, end) {\n    var r = color((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(start)).r, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_3__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1));\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nvar rgbBasis = rgbSpline(__WEBPACK_IMPORTED_MODULE_1__basis__[\"b\" /* default */]);\nvar rgbBasisClosed = rgbSpline(__WEBPACK_IMPORTED_MODULE_2__basisClosed__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanM/ZDIwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3JnYiBhcyBjb2xvclJnYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgYmFzaXMgZnJvbSBcIi4vYmFzaXNcIjtcbmltcG9ydCBiYXNpc0Nsb3NlZCBmcm9tIFwiLi9iYXNpc0Nsb3NlZFwiO1xuaW1wb3J0IG5vZ2FtbWEsIHtnYW1tYX0gZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIHJnYkdhbW1hKHkpIHtcbiAgdmFyIGNvbG9yID0gZ2FtbWEoeSk7XG5cbiAgZnVuY3Rpb24gcmdiKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgciA9IGNvbG9yKChzdGFydCA9IGNvbG9yUmdiKHN0YXJ0KSkuciwgKGVuZCA9IGNvbG9yUmdiKGVuZCkpLnIpLFxuICAgICAgICBnID0gY29sb3Ioc3RhcnQuZywgZW5kLmcpLFxuICAgICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgICBvcGFjaXR5ID0gbm9nYW1tYShzdGFydC5vcGFjaXR5LCBlbmQub3BhY2l0eSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHN0YXJ0LnIgPSByKHQpO1xuICAgICAgc3RhcnQuZyA9IGcodCk7XG4gICAgICBzdGFydC5iID0gYih0KTtcbiAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgcmV0dXJuIHN0YXJ0ICsgXCJcIjtcbiAgICB9O1xuICB9XG5cbiAgcmdiLmdhbW1hID0gcmdiR2FtbWE7XG5cbiAgcmV0dXJuIHJnYjtcbn0pKDEpO1xuXG5mdW5jdGlvbiByZ2JTcGxpbmUoc3BsaW5lKSB7XG4gIHJldHVybiBmdW5jdGlvbihjb2xvcnMpIHtcbiAgICB2YXIgbiA9IGNvbG9ycy5sZW5ndGgsXG4gICAgICAgIHIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGcgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGIgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIGksIGNvbG9yO1xuICAgIGZvciAoaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICAgIGNvbG9yID0gY29sb3JSZ2IoY29sb3JzW2ldKTtcbiAgICAgIHJbaV0gPSBjb2xvci5yIHx8IDA7XG4gICAgICBnW2ldID0gY29sb3IuZyB8fCAwO1xuICAgICAgYltpXSA9IGNvbG9yLmIgfHwgMDtcbiAgICB9XG4gICAgciA9IHNwbGluZShyKTtcbiAgICBnID0gc3BsaW5lKGcpO1xuICAgIGIgPSBzcGxpbmUoYik7XG4gICAgY29sb3Iub3BhY2l0eSA9IDE7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIGNvbG9yLnIgPSByKHQpO1xuICAgICAgY29sb3IuZyA9IGcodCk7XG4gICAgICBjb2xvci5iID0gYih0KTtcbiAgICAgIHJldHVybiBjb2xvciArIFwiXCI7XG4gICAgfTtcbiAgfTtcbn1cblxuZXhwb3J0IHZhciByZ2JCYXNpcyA9IHJnYlNwbGluZShiYXNpcyk7XG5leHBvcnQgdmFyIHJnYkJhc2lzQ2xvc2VkID0gcmdiU3BsaW5lKGJhc2lzQ2xvc2VkKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yZ2IuanNcbi8vIG1vZHVsZSBpZCA9IDExNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///116\n");

/***/ }),
/* 117 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__basis__ = __webpack_require__(69);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(values) {\n  var n = values.length;\n  return function(t) {\n    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),\n        v0 = values[(i + n - 1) % n],\n        v1 = values[i % n],\n        v2 = values[(i + 1) % n],\n        v3 = values[(i + 2) % n];\n    return Object(__WEBPACK_IMPORTED_MODULE_0__basis__[\"a\" /* basis */])((t - i / n) * n, v0, v1, v2, v3);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qcz81YzRkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7YmFzaXN9IGZyb20gXCIuL2Jhc2lzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHZhbHVlcykge1xuICB2YXIgbiA9IHZhbHVlcy5sZW5ndGg7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKCgodCAlPSAxKSA8IDAgPyArK3QgOiB0KSAqIG4pLFxuICAgICAgICB2MCA9IHZhbHVlc1soaSArIG4gLSAxKSAlIG5dLFxuICAgICAgICB2MSA9IHZhbHVlc1tpICUgbl0sXG4gICAgICAgIHYyID0gdmFsdWVzWyhpICsgMSkgJSBuXSxcbiAgICAgICAgdjMgPSB2YWx1ZXNbKGkgKyAyKSAlIG5dO1xuICAgIHJldHVybiBiYXNpcygodCAtIGkgLyBuKSAqIG4sIHYwLCB2MSwgdjIsIHYzKTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9iYXNpc0Nsb3NlZC5qc1xuLy8gbW9kdWxlIGlkID0gMTE3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///117\n");

/***/ }),
/* 118 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(x) {\n  return function() {\n    return x;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jb25zdGFudC5qcz9iZmI2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB4O1xuICB9O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2NvbnN0YW50LmpzXG4vLyBtb2R1bGUgaWQgPSAxMThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///118\n");

/***/ }),
/* 119 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = Object(__WEBPACK_IMPORTED_MODULE_0__value__[\"a\" /* default */])(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9hcnJheS5qcz9iMDllIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB2YWx1ZSBmcm9tIFwiLi92YWx1ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihhLCBiKSB7XG4gIHZhciBuYiA9IGIgPyBiLmxlbmd0aCA6IDAsXG4gICAgICBuYSA9IGEgPyBNYXRoLm1pbihuYiwgYS5sZW5ndGgpIDogMCxcbiAgICAgIHggPSBuZXcgQXJyYXkobmEpLFxuICAgICAgYyA9IG5ldyBBcnJheShuYiksXG4gICAgICBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBuYTsgKytpKSB4W2ldID0gdmFsdWUoYVtpXSwgYltpXSk7XG4gIGZvciAoOyBpIDwgbmI7ICsraSkgY1tpXSA9IGJbaV07XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBmb3IgKGkgPSAwOyBpIDwgbmE7ICsraSkgY1tpXSA9IHhbaV0odCk7XG4gICAgcmV0dXJuIGM7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvYXJyYXkuanNcbi8vIG1vZHVsZSBpZCA9IDExOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///119\n");

/***/ }),
/* 120 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var d = new Date;\n  return a = +a, b -= a, function(t) {\n    return d.setTime(a + b * t), d;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9kYXRlLmpzP2QyNzgiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgZCA9IG5ldyBEYXRlO1xuICByZXR1cm4gYSA9ICthLCBiIC09IGEsIGZ1bmN0aW9uKHQpIHtcbiAgICByZXR1cm4gZC5zZXRUaW1lKGEgKyBiICogdCksIGQ7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGF0ZS5qc1xuLy8gbW9kdWxlIGlkID0gMTIwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///120\n");

/***/ }),
/* 121 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__value__ = __webpack_require__(66);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = Object(__WEBPACK_IMPORTED_MODULE_0__value__[\"a\" /* default */])(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9vYmplY3QuanM/YTZkZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmFsdWUgZnJvbSBcIi4vdmFsdWVcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgaSA9IHt9LFxuICAgICAgYyA9IHt9LFxuICAgICAgaztcblxuICBpZiAoYSA9PT0gbnVsbCB8fCB0eXBlb2YgYSAhPT0gXCJvYmplY3RcIikgYSA9IHt9O1xuICBpZiAoYiA9PT0gbnVsbCB8fCB0eXBlb2YgYiAhPT0gXCJvYmplY3RcIikgYiA9IHt9O1xuXG4gIGZvciAoayBpbiBiKSB7XG4gICAgaWYgKGsgaW4gYSkge1xuICAgICAgaVtrXSA9IHZhbHVlKGFba10sIGJba10pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjW2tdID0gYltrXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIGZvciAoayBpbiBpKSBjW2tdID0gaVtrXSh0KTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9vYmplY3QuanNcbi8vIG1vZHVsZSBpZCA9IDEyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///121\n");

/***/ }),
/* 122 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(43);\n\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9zdHJpbmcuanM/NTc4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbnVtYmVyIGZyb20gXCIuL251bWJlclwiO1xuXG52YXIgcmVBID0gL1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nLFxuICAgIHJlQiA9IG5ldyBSZWdFeHAocmVBLnNvdXJjZSwgXCJnXCIpO1xuXG5mdW5jdGlvbiB6ZXJvKGIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBiO1xuICB9O1xufVxuXG5mdW5jdGlvbiBvbmUoYikge1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiBiKHQpICsgXCJcIjtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgYmkgPSByZUEubGFzdEluZGV4ID0gcmVCLmxhc3RJbmRleCA9IDAsIC8vIHNjYW4gaW5kZXggZm9yIG5leHQgbnVtYmVyIGluIGJcbiAgICAgIGFtLCAvLyBjdXJyZW50IG1hdGNoIGluIGFcbiAgICAgIGJtLCAvLyBjdXJyZW50IG1hdGNoIGluIGJcbiAgICAgIGJzLCAvLyBzdHJpbmcgcHJlY2VkaW5nIGN1cnJlbnQgbnVtYmVyIGluIGIsIGlmIGFueVxuICAgICAgaSA9IC0xLCAvLyBpbmRleCBpbiBzXG4gICAgICBzID0gW10sIC8vIHN0cmluZyBjb25zdGFudHMgYW5kIHBsYWNlaG9sZGVyc1xuICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuXG4gIC8vIENvZXJjZSBpbnB1dHMgdG8gc3RyaW5ncy5cbiAgYSA9IGEgKyBcIlwiLCBiID0gYiArIFwiXCI7XG5cbiAgLy8gSW50ZXJwb2xhdGUgcGFpcnMgb2YgbnVtYmVycyBpbiBhICYgYi5cbiAgd2hpbGUgKChhbSA9IHJlQS5leGVjKGEpKVxuICAgICAgJiYgKGJtID0gcmVCLmV4ZWMoYikpKSB7XG4gICAgaWYgKChicyA9IGJtLmluZGV4KSA+IGJpKSB7IC8vIGEgc3RyaW5nIHByZWNlZGVzIHRoZSBuZXh0IG51bWJlciBpbiBiXG4gICAgICBicyA9IGIuc2xpY2UoYmksIGJzKTtcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBicztcbiAgICB9XG4gICAgaWYgKChhbSA9IGFtWzBdKSA9PT0gKGJtID0gYm1bMF0pKSB7IC8vIG51bWJlcnMgaW4gYSAmIGIgbWF0Y2hcbiAgICAgIGlmIChzW2ldKSBzW2ldICs9IGJtOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgICAgZWxzZSBzWysraV0gPSBibTtcbiAgICB9IGVsc2UgeyAvLyBpbnRlcnBvbGF0ZSBub24tbWF0Y2hpbmcgbnVtYmVyc1xuICAgICAgc1srK2ldID0gbnVsbDtcbiAgICAgIHEucHVzaCh7aTogaSwgeDogbnVtYmVyKGFtLCBibSl9KTtcbiAgICB9XG4gICAgYmkgPSByZUIubGFzdEluZGV4O1xuICB9XG5cbiAgLy8gQWRkIHJlbWFpbnMgb2YgYi5cbiAgaWYgKGJpIDwgYi5sZW5ndGgpIHtcbiAgICBicyA9IGIuc2xpY2UoYmkpO1xuICAgIGlmIChzW2ldKSBzW2ldICs9IGJzOyAvLyBjb2FsZXNjZSB3aXRoIHByZXZpb3VzIHN0cmluZ1xuICAgIGVsc2Ugc1srK2ldID0gYnM7XG4gIH1cblxuICAvLyBTcGVjaWFsIG9wdGltaXphdGlvbiBmb3Igb25seSBhIHNpbmdsZSBtYXRjaC5cbiAgLy8gT3RoZXJ3aXNlLCBpbnRlcnBvbGF0ZSBlYWNoIG9mIHRoZSBudW1iZXJzIGFuZCByZWpvaW4gdGhlIHN0cmluZy5cbiAgcmV0dXJuIHMubGVuZ3RoIDwgMiA/IChxWzBdXG4gICAgICA/IG9uZShxWzBdLngpXG4gICAgICA6IHplcm8oYikpXG4gICAgICA6IChiID0gcS5sZW5ndGgsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbzsgaSA8IGI7ICsraSkgc1sobyA9IHFbaV0pLmldID0gby54KHQpO1xuICAgICAgICAgIHJldHVybiBzLmpvaW4oXCJcIik7XG4gICAgICAgIH0pO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3N0cmluZy5qc1xuLy8gbW9kdWxlIGlkID0gMTIyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///122\n");

/***/ }),
/* 123 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl_advanced_renderer__ = __webpack_require__(124);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__ = __webpack_require__(210);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ui_Texture__ = __webpack_require__(212);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_d3_scale_chromatic__ = __webpack_require__(213);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_geometry_extrude__ = __webpack_require__(272);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__generator_circle__ = __webpack_require__(276);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__generator_perlin__ = __webpack_require__(277);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__extrude__ = __webpack_require__(279);\n\n\n\n\n\n\n\n\n\n\n\nvar brewerMethods = [\n    'BrBG', 'PRGn', 'PiYG', 'PuOr', 'RdBu', 'RdGy', 'RdYlBu', 'RdYlGn', 'Spectral',\n    'Viridis', 'Inferno', 'Magma', 'Plasma', 'Warm', 'Cool', 'Rainbow', 'YlGnBu', 'RdPu', 'PuRd',\n].map(function (a) {\n    return 'interpolate' + a;\n});\n// var brewerMethods = Object.keys(colorBrewer);\n\n// import standardExtCode from './standard_extend.glsl';\n// Shader.import(standardExtCode);\n\nvar shader = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */](__WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */].source('clay.standardMR.vertex'), __WEBPACK_IMPORTED_MODULE_1_claygl__[\"g\" /* Shader */].source('clay.standardMR.fragment'));\n\nfunction createDefaultConfig() {\n    var config = {\n        seed: Math.random(),\n\n        thickness: 0.02,\n        height: 1,\n\n        number: 500,\n        noiseScale: 5,\n\n        shadowDirection: [0.2, 0.2],\n        shadowKernelSize: 16,\n        shadowBlurSize: 2,\n\n        cameraPosition: [0, 0],\n        cameraDistance: 10,\n\n        paperDetail: './img/paper-detail.png',\n        paperDetailTiling: 8,\n\n        layers: []\n    };\n    // TODO Layer Count\n    for (var i = 0; i < 5; i++) {\n        config.layers.push({\n            color: null\n        });\n    }\n    return config;\n}\n\nfunction createRandomColors() {\n    var method = __WEBPACK_IMPORTED_MODULE_4_d3_scale_chromatic__[brewerMethods[Math.round(Math.random() * (brewerMethods.length - 1))]];\n    config.layers.forEach(function (layer, idx) {\n        layer.color = Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"b\" /* parse */])(method(1 - idx / 9)).slice(0, 3);\n    });\n};\n\nvar config = createDefaultConfig();\ncreateRandomColors();\n\nvar app = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"l\" /* application */].create('#main', {\n\n    autoRender: false,\n\n    devicePixelRatio: 1,\n\n    init(app) {\n        app.renderer.logDepthBuffer = true;\n\n        this._rootNode = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"f\" /* Node */]();\n        app.scene.add(this._rootNode);\n\n        this._advancedRenderer = new __WEBPACK_IMPORTED_MODULE_0_claygl_advanced_renderer__[\"a\" /* default */](app.renderer, app.scene, app.timeline, {\n            temporalSuperSampling: {\n                dynamic: false\n            },\n            shadow: {\n                enable: true\n            },\n            postEffect: {\n                bloom: {\n                    enable: true\n                },\n                screenSpaceAmbientOcclusion: {\n                    enable: true,\n                    radius: 1,\n                    intensity: 1.2,\n                    quality: 'high'\n                },\n                screenSpaceReflection: {\n                    enable: false\n                }\n            }\n        });\n        // TODO\n        // this._advancedRenderer._renderMain._compositor._compositeNode.undefine('TONEMAPPING');\n\n        this._camera = app.createCamera([0, 0, 10], [0, 0, 0]);\n        this._camera.far = 50;\n\n        this._dirLight = app.createDirectionalLight([0, 0, 0], '#fff', 0.7);\n        this._dirLight.shadowResolution = 1024;\n        this._dirLight.shadowBias = 0.001;\n\n        app.createAmbientCubemapLight('img/pisa.hdr', 1, 1, 2);\n\n        this._groundPlane = app.createPlane({\n            shader: shader\n        });\n        this._groundPlane.scale.set(11, 11, 1);\n        this._rootNode.add(this._groundPlane);\n\n        app.methods.updateShadow();\n        app.methods.updateCamera();\n\n        this._paperMesh;\n        app.methods.updateScrollingPapers();\n        app.methods.updatePaperColors();\n        app.methods.changePaperDetailTexture(app);\n    },\n\n    loop() {\n        // this._advancedRenderer.render();\n    },\n\n    methods: {\n        render() {\n            this._advancedRenderer.render();\n        },\n\n        updateShadow() {\n            var x = -config.shadowDirection[0];\n            var y = -config.shadowDirection[1];\n            var lightDir = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */](x, y, 1).normalize();\n            var normal = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].POSITIVE_Z;\n            var ndl = __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].dot(lightDir, normal);\n            this._dirLight.intensity = 0.7 / ndl;\n\n            this._dirLight.position.set(x, y, 1);\n            this._dirLight.lookAt(__WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].ZERO, __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].UP);\n            this._advancedRenderer.setShadow({\n                kernelSize: config.shadowKernelSize,\n                blurSize: Math.max(config.shadowBlurSize, 1)\n            });\n            this._advancedRenderer.render();\n        },\n\n        updateCamera() {\n            // TODO RESET CAMERA\n            var z = config.cameraDistance;\n            var x = config.cameraPosition[0] * z;\n            var y = config.cameraPosition[1] * z;\n\n            this._camera.position.set(x, y, z);\n            this._camera.lookAt(__WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].ZERO, __WEBPACK_IMPORTED_MODULE_1_claygl__[\"k\" /* Vector3 */].UP);\n\n            this._advancedRenderer.render();\n        },\n\n        updateScrollingPapers() {\n            if (!this._paperMesh) {\n                this._paperMesh = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"e\" /* Mesh */]({\n                    material: new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"c\" /* Material */]({ shader })\n                });\n                this._paperMesh.culling = false;\n                this._paperMesh.material.define('fragment', 'DOUBLE_SIDED');\n                this._paperMesh.material.define('VERTEX_COLOR');\n                this._rootNode.add(this._paperMesh);\n\n                this._paperMesh.geometry = new __WEBPACK_IMPORTED_MODULE_1_claygl__[\"b\" /* Geometry */]();\n            }\n            Object(__WEBPACK_IMPORTED_MODULE_7__generator_perlin__[\"b\" /* perlinSeed */])(config.seed);\n            // let polylines = generateCircle([0, 0], 0.1, 10, 0.5);\n            let polylines = Object(__WEBPACK_IMPORTED_MODULE_7__generator_perlin__[\"a\" /* generatePerlin */])(\n                [-11, -11], [11, 11], config.number, config.noiseScale\n            );\n            let geometryData = [];\n            let vertexCount = 0;\n            let indicesCount = 0;\n            let geo = this._paperMesh.geometry;\n            polylines.forEach(polyline => {\n                // let {indices, position, normal} = extrude(polyline, 1);\n                let {indices, position, normal, uv} = Object(__WEBPACK_IMPORTED_MODULE_5_geometry_extrude__[\"a\" /* extrudePolyline */])([polyline], {\n                    // TODO Configuration\n                    lineWidth: config.thickness, depth: config.depth\n                });\n                geometryData.push({\n                    indices, position, normal, uv,\n                    vertexOffset: vertexCount,\n                    indicesOffset: indicesCount,\n                    vertexCount: position.length / 3\n                });\n                vertexCount += position.length / 3;\n                indicesCount += indices.length;\n            });\n            let positionTotal = new Float32Array(vertexCount * 3);\n            let normalTotal = new Float32Array(vertexCount * 3);\n            let uvTotal = new Float32Array(vertexCount * 2);\n            let indicesTotal = new (vertexCount > 65536 ? Uint32Array : Uint16Array)(indicesCount);\n            geometryData.forEach(item => {\n                positionTotal.set(item.position, item.vertexOffset * 3);\n                normalTotal.set(item.normal, item.vertexOffset * 3);\n                uvTotal.set(item.uv, item.vertexOffset * 2);\n                for (let i = 0; i < item.indices.length; i++) {\n                    indicesTotal[item.indicesOffset + i] = item.vertexOffset + item.indices[i];\n                }\n            });\n            geo.attributes.position.value = positionTotal;\n            geo.attributes.normal.value = normalTotal;\n            geo.attributes.texcoord0.value = uvTotal;\n            geo.indices = indicesTotal;\n            geo.updateBoundingBox();\n            geo.dirty();\n\n            this._geometryData = geometryData;\n        },\n\n        updatePaperColors() {\n            let colors = config.layers.map(layer => Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"c\" /* stringify */])(layer.color, 'rgb'));\n            // this._scrollingPapers.forEach((mesh, idx) => {\n            //     let color = lerp((idx / (this._scrollingPapers.length - 1) * 4) % 1, colors);\n            //     mesh.material.set('color', color);\n            // });\n            if (this._paperMesh) {\n                let colorValue = new Float32Array(this._paperMesh.geometry.vertexCount * 4);\n                let off = 0;\n                let paperCount = this._geometryData.length;\n                for (let idx = 0; idx < paperCount; idx++) {\n                    let color = Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"b\" /* parse */])(Object(__WEBPACK_IMPORTED_MODULE_2_zrender_src_tool_color__[\"a\" /* lerp */])((idx / (paperCount - 1) * 4) % 1, colors));\n                    color[0] /= 255;\n                    color[1] /= 255;\n                    color[2] /= 255;\n                    for (let k = 0; k < this._geometryData[idx].vertexCount; k++) {\n                        for (let i = 0; i < 4; i++) {\n                            colorValue[off++] = color[i];\n                        }\n                    }\n                }\n                this._paperMesh.geometry.attributes.color.value = colorValue;\n                this._paperMesh.geometry.dirtyAttribute('color');\n            }\n            this._advancedRenderer.render();\n        },\n\n        changePaperDetailTexture(app) {\n            var self = this;\n            function setDetailTexture(detailTexture) {\n                let tiling = [config.paperDetailTiling, config.paperDetailTiling];\n                self._paperMesh.material.set('roughness', 0.8);\n                self._groundPlane.material.set('diffuseMap', detailTexture);\n                self._paperMesh.material.set('uvRepeat', tiling);\n                self._paperMesh.material.set('roughness', 0.8);\n                self._groundPlane.material.set('roughness', 1);\n                self._groundPlane.material.set('diffuseMap', detailTexture);\n                self._groundPlane.material.set('uvRepeat', tiling);\n\n                self._advancedRenderer.render();\n            }\n            if (config.paperDetail && config.paperDetail !== 'none') {\n                app.loadTexture(config.paperDetail, {\n                    convertToPOT: true\n                }).then(setDetailTexture);\n            }\n            else {\n                setDetailTexture(null);\n            }\n        }\n    }\n});\n\nfunction updateScrollingPapers() {\n    app.methods.updateScrollingPapers();\n    app.methods.updatePaperColors();\n}\n\nvar controlKit = new ControlKit({\n    loadAndSave: false,\n    useExternalStyle: true\n});\n\nvar scenePanel = controlKit.addPanel({ label: 'Settings', width: 250 });\n\nscenePanel.addGroup({ label: 'Generate' })\n    .addNumberInput(config, 'thickness', { label: 'Thickness', onChange: updateScrollingPapers, step: 0.001, min: 0.01 })\n    .addNumberInput(config, 'height', { label: 'Height', onChange: updateScrollingPapers, step: 0.1, min: 0.1 })\n    .addNumberInput(config, 'number', { label: 'Number', onChange: updateScrollingPapers, step: 10, min: 50 })\n    .addNumberInput(config, 'noiseScale', { label: 'Noise Scale', onChange: updateScrollingPapers, step: 1, min: 1 })\n    .addButton('Random', function () {\n        config.seed = Math.random();\n\n        updateScrollingPapers();\n    });\n\nscenePanel.addGroup({ label: 'Papers' })\n    .addCustomComponent(__WEBPACK_IMPORTED_MODULE_3__ui_Texture__[\"a\" /* default */], config, 'paperDetail', { label: 'Detail', onChange: app.methods.changePaperDetailTexture })\n    .addNumberInput(config, 'paperDetailTiling', { label: 'Tiling', onChange: app.methods.updatePapers, step: 0.5, min: 0 });\n\nscenePanel.addGroup({ label: 'Shadow', enable: false })\n    .addPad(config, 'shadowDirection', { label: 'Direction', onChange: app.methods.updateShadow })\n    .addNumberInput(config, 'shadowBlurSize', { label: 'Blur Size', onChange: app.methods.updateShadow, step: 0.5, min: 0 });\n\nscenePanel.addGroup({ label: 'Camera', enable: false })\n    .addPad(config, 'cameraPosition', { label: 'Position', onChange: app.methods.updateCamera })\n    .addNumberInput(config, 'cameraDistance', { label: 'Distance', onChange: app.methods.updateCamera, step: 0.5, min: 0 });\n\nvar colorGroup = scenePanel.addGroup({ label: 'Layer Colors' });\ncolorGroup.addButton('Generate Colors', function () {\n    createRandomColors();\n    app.methods.updatePaperColors();\n    controlKit.update();\n});\nfor (var i = 0; i < config.layers.length; i++) {\n    colorGroup.addColor(config.layers[i], 'color', { label: 'Layer ' + (i + 1), colorMode: 'rgb', onChange: app.methods.updatePaperColors  });\n}\ncolorGroup.addButton('Revert Colors', function () {\n    var colors = config.layers.map(function (layer) {\n        return layer.color;\n    }).reverse();\n    config.layers.forEach(function (layer, idx) {\n        layer.color = colors[idx];\n    });\n    app.methods.updatePaperColors();\n    controlKit.update();\n});\n\nwindow.addEventListener('resize', function () { app.resize(); app.methods.render(); } );\n\ndocument.getElementById('loading').style.display = 'none';//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4uanM/MzQ3OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2xheUFkdmFuY2VkUmVuZGVyZXIgZnJvbSAnY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyJztcbmltcG9ydCB7IGFwcGxpY2F0aW9uLCBWZWN0b3IzLCB1dGlsLCBTaGFkZXIsIE5vZGUsIEdlb21ldHJ5LCBNZXNoLCBNYXRlcmlhbCB9IGZyb20gJ2NsYXlnbCc7XG5pbXBvcnQgeyBwYXJzZSwgc3RyaW5naWZ5LCBsZXJwIH0gZnJvbSAnenJlbmRlci9zcmMvdG9vbC9jb2xvcic7XG5pbXBvcnQgVGV4dHVyZVVJIGZyb20gJy4vdWkvVGV4dHVyZSc7XG5pbXBvcnQgKiBhcyBjb2xvckJyZXdlciBmcm9tICdkMy1zY2FsZS1jaHJvbWF0aWMnO1xuaW1wb3J0IHtleHRydWRlUG9seWxpbmV9IGZyb20gJ2dlb21ldHJ5LWV4dHJ1ZGUnO1xuaW1wb3J0IHtnZW5lcmF0ZUNpcmNsZX0gZnJvbSAnLi9nZW5lcmF0b3IvY2lyY2xlJztcbmltcG9ydCB7Z2VuZXJhdGVQZXJsaW4sIHBlcmxpblNlZWR9IGZyb20gJy4vZ2VuZXJhdG9yL3Blcmxpbic7XG5pbXBvcnQge2V4dHJ1ZGV9IGZyb20gJy4vZXh0cnVkZSc7XG5cblxudmFyIGJyZXdlck1ldGhvZHMgPSBbXG4gICAgJ0JyQkcnLCAnUFJHbicsICdQaVlHJywgJ1B1T3InLCAnUmRCdScsICdSZEd5JywgJ1JkWWxCdScsICdSZFlsR24nLCAnU3BlY3RyYWwnLFxuICAgICdWaXJpZGlzJywgJ0luZmVybm8nLCAnTWFnbWEnLCAnUGxhc21hJywgJ1dhcm0nLCAnQ29vbCcsICdSYWluYm93JywgJ1lsR25CdScsICdSZFB1JywgJ1B1UmQnLFxuXS5tYXAoZnVuY3Rpb24gKGEpIHtcbiAgICByZXR1cm4gJ2ludGVycG9sYXRlJyArIGE7XG59KTtcbi8vIHZhciBicmV3ZXJNZXRob2RzID0gT2JqZWN0LmtleXMoY29sb3JCcmV3ZXIpO1xuXG4vLyBpbXBvcnQgc3RhbmRhcmRFeHRDb2RlIGZyb20gJy4vc3RhbmRhcmRfZXh0ZW5kLmdsc2wnO1xuLy8gU2hhZGVyLmltcG9ydChzdGFuZGFyZEV4dENvZGUpO1xuXG52YXIgc2hhZGVyID0gbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LnN0YW5kYXJkTVIudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkuc3RhbmRhcmRNUi5mcmFnbWVudCcpKTtcblxuZnVuY3Rpb24gY3JlYXRlRGVmYXVsdENvbmZpZygpIHtcbiAgICB2YXIgY29uZmlnID0ge1xuICAgICAgICBzZWVkOiBNYXRoLnJhbmRvbSgpLFxuXG4gICAgICAgIHRoaWNrbmVzczogMC4wMixcbiAgICAgICAgaGVpZ2h0OiAxLFxuXG4gICAgICAgIG51bWJlcjogNTAwLFxuICAgICAgICBub2lzZVNjYWxlOiA1LFxuXG4gICAgICAgIHNoYWRvd0RpcmVjdGlvbjogWzAuMiwgMC4yXSxcbiAgICAgICAgc2hhZG93S2VybmVsU2l6ZTogMTYsXG4gICAgICAgIHNoYWRvd0JsdXJTaXplOiAyLFxuXG4gICAgICAgIGNhbWVyYVBvc2l0aW9uOiBbMCwgMF0sXG4gICAgICAgIGNhbWVyYURpc3RhbmNlOiAxMCxcblxuICAgICAgICBwYXBlckRldGFpbDogJy4vaW1nL3BhcGVyLWRldGFpbC5wbmcnLFxuICAgICAgICBwYXBlckRldGFpbFRpbGluZzogOCxcblxuICAgICAgICBsYXllcnM6IFtdXG4gICAgfTtcbiAgICAvLyBUT0RPIExheWVyIENvdW50XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgY29uZmlnLmxheWVycy5wdXNoKHtcbiAgICAgICAgICAgIGNvbG9yOiBudWxsXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gY29uZmlnO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVSYW5kb21Db2xvcnMoKSB7XG4gICAgdmFyIG1ldGhvZCA9IGNvbG9yQnJld2VyW2JyZXdlck1ldGhvZHNbTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogKGJyZXdlck1ldGhvZHMubGVuZ3RoIC0gMSkpXV07XG4gICAgY29uZmlnLmxheWVycy5mb3JFYWNoKGZ1bmN0aW9uIChsYXllciwgaWR4KSB7XG4gICAgICAgIGxheWVyLmNvbG9yID0gcGFyc2UobWV0aG9kKDEgLSBpZHggLyA5KSkuc2xpY2UoMCwgMyk7XG4gICAgfSk7XG59O1xuXG52YXIgY29uZmlnID0gY3JlYXRlRGVmYXVsdENvbmZpZygpO1xuY3JlYXRlUmFuZG9tQ29sb3JzKCk7XG5cbnZhciBhcHAgPSBhcHBsaWNhdGlvbi5jcmVhdGUoJyNtYWluJywge1xuXG4gICAgYXV0b1JlbmRlcjogZmFsc2UsXG5cbiAgICBkZXZpY2VQaXhlbFJhdGlvOiAxLFxuXG4gICAgaW5pdChhcHApIHtcbiAgICAgICAgYXBwLnJlbmRlcmVyLmxvZ0RlcHRoQnVmZmVyID0gdHJ1ZTtcblxuICAgICAgICB0aGlzLl9yb290Tm9kZSA9IG5ldyBOb2RlKCk7XG4gICAgICAgIGFwcC5zY2VuZS5hZGQodGhpcy5fcm9vdE5vZGUpO1xuXG4gICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIgPSBuZXcgQ2xheUFkdmFuY2VkUmVuZGVyZXIoYXBwLnJlbmRlcmVyLCBhcHAuc2NlbmUsIGFwcC50aW1lbGluZSwge1xuICAgICAgICAgICAgdGVtcG9yYWxTdXBlclNhbXBsaW5nOiB7XG4gICAgICAgICAgICAgICAgZHluYW1pYzogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzaGFkb3c6IHtcbiAgICAgICAgICAgICAgICBlbmFibGU6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwb3N0RWZmZWN0OiB7XG4gICAgICAgICAgICAgICAgYmxvb206IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzY3JlZW5TcGFjZUFtYmllbnRPY2NsdXNpb246IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDEsXG4gICAgICAgICAgICAgICAgICAgIGludGVuc2l0eTogMS4yLFxuICAgICAgICAgICAgICAgICAgICBxdWFsaXR5OiAnaGlnaCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNjcmVlblNwYWNlUmVmbGVjdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gVE9ET1xuICAgICAgICAvLyB0aGlzLl9hZHZhbmNlZFJlbmRlcmVyLl9yZW5kZXJNYWluLl9jb21wb3NpdG9yLl9jb21wb3NpdGVOb2RlLnVuZGVmaW5lKCdUT05FTUFQUElORycpO1xuXG4gICAgICAgIHRoaXMuX2NhbWVyYSA9IGFwcC5jcmVhdGVDYW1lcmEoWzAsIDAsIDEwXSwgWzAsIDAsIDBdKTtcbiAgICAgICAgdGhpcy5fY2FtZXJhLmZhciA9IDUwO1xuXG4gICAgICAgIHRoaXMuX2RpckxpZ2h0ID0gYXBwLmNyZWF0ZURpcmVjdGlvbmFsTGlnaHQoWzAsIDAsIDBdLCAnI2ZmZicsIDAuNyk7XG4gICAgICAgIHRoaXMuX2RpckxpZ2h0LnNoYWRvd1Jlc29sdXRpb24gPSAxMDI0O1xuICAgICAgICB0aGlzLl9kaXJMaWdodC5zaGFkb3dCaWFzID0gMC4wMDE7XG5cbiAgICAgICAgYXBwLmNyZWF0ZUFtYmllbnRDdWJlbWFwTGlnaHQoJ2ltZy9waXNhLmhkcicsIDEsIDEsIDIpO1xuXG4gICAgICAgIHRoaXMuX2dyb3VuZFBsYW5lID0gYXBwLmNyZWF0ZVBsYW5lKHtcbiAgICAgICAgICAgIHNoYWRlcjogc2hhZGVyXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9ncm91bmRQbGFuZS5zY2FsZS5zZXQoMTEsIDExLCAxKTtcbiAgICAgICAgdGhpcy5fcm9vdE5vZGUuYWRkKHRoaXMuX2dyb3VuZFBsYW5lKTtcblxuICAgICAgICBhcHAubWV0aG9kcy51cGRhdGVTaGFkb3coKTtcbiAgICAgICAgYXBwLm1ldGhvZHMudXBkYXRlQ2FtZXJhKCk7XG5cbiAgICAgICAgdGhpcy5fcGFwZXJNZXNoO1xuICAgICAgICBhcHAubWV0aG9kcy51cGRhdGVTY3JvbGxpbmdQYXBlcnMoKTtcbiAgICAgICAgYXBwLm1ldGhvZHMudXBkYXRlUGFwZXJDb2xvcnMoKTtcbiAgICAgICAgYXBwLm1ldGhvZHMuY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlKGFwcCk7XG4gICAgfSxcblxuICAgIGxvb3AoKSB7XG4gICAgICAgIC8vIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgfSxcblxuICAgIG1ldGhvZHM6IHtcbiAgICAgICAgcmVuZGVyKCkge1xuICAgICAgICAgICAgdGhpcy5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVTaGFkb3coKSB7XG4gICAgICAgICAgICB2YXIgeCA9IC1jb25maWcuc2hhZG93RGlyZWN0aW9uWzBdO1xuICAgICAgICAgICAgdmFyIHkgPSAtY29uZmlnLnNoYWRvd0RpcmVjdGlvblsxXTtcbiAgICAgICAgICAgIHZhciBsaWdodERpciA9IG5ldyBWZWN0b3IzKHgsIHksIDEpLm5vcm1hbGl6ZSgpO1xuICAgICAgICAgICAgdmFyIG5vcm1hbCA9IFZlY3RvcjMuUE9TSVRJVkVfWjtcbiAgICAgICAgICAgIHZhciBuZGwgPSBWZWN0b3IzLmRvdChsaWdodERpciwgbm9ybWFsKTtcbiAgICAgICAgICAgIHRoaXMuX2RpckxpZ2h0LmludGVuc2l0eSA9IDAuNyAvIG5kbDtcblxuICAgICAgICAgICAgdGhpcy5fZGlyTGlnaHQucG9zaXRpb24uc2V0KHgsIHksIDEpO1xuICAgICAgICAgICAgdGhpcy5fZGlyTGlnaHQubG9va0F0KFZlY3RvcjMuWkVSTywgVmVjdG9yMy5VUCk7XG4gICAgICAgICAgICB0aGlzLl9hZHZhbmNlZFJlbmRlcmVyLnNldFNoYWRvdyh7XG4gICAgICAgICAgICAgICAga2VybmVsU2l6ZTogY29uZmlnLnNoYWRvd0tlcm5lbFNpemUsXG4gICAgICAgICAgICAgICAgYmx1clNpemU6IE1hdGgubWF4KGNvbmZpZy5zaGFkb3dCbHVyU2l6ZSwgMSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVDYW1lcmEoKSB7XG4gICAgICAgICAgICAvLyBUT0RPIFJFU0VUIENBTUVSQVxuICAgICAgICAgICAgdmFyIHogPSBjb25maWcuY2FtZXJhRGlzdGFuY2U7XG4gICAgICAgICAgICB2YXIgeCA9IGNvbmZpZy5jYW1lcmFQb3NpdGlvblswXSAqIHo7XG4gICAgICAgICAgICB2YXIgeSA9IGNvbmZpZy5jYW1lcmFQb3NpdGlvblsxXSAqIHo7XG5cbiAgICAgICAgICAgIHRoaXMuX2NhbWVyYS5wb3NpdGlvbi5zZXQoeCwgeSwgeik7XG4gICAgICAgICAgICB0aGlzLl9jYW1lcmEubG9va0F0KFZlY3RvcjMuWkVSTywgVmVjdG9yMy5VUCk7XG5cbiAgICAgICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlU2Nyb2xsaW5nUGFwZXJzKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9wYXBlck1lc2gpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXBlck1lc2ggPSBuZXcgTWVzaCh7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiBuZXcgTWF0ZXJpYWwoeyBzaGFkZXIgfSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYXBlck1lc2guY3VsbGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ0RPVUJMRV9TSURFRCcpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5tYXRlcmlhbC5kZWZpbmUoJ1ZFUlRFWF9DT0xPUicpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3Jvb3ROb2RlLmFkZCh0aGlzLl9wYXBlck1lc2gpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwZXJsaW5TZWVkKGNvbmZpZy5zZWVkKTtcbiAgICAgICAgICAgIC8vIGxldCBwb2x5bGluZXMgPSBnZW5lcmF0ZUNpcmNsZShbMCwgMF0sIDAuMSwgMTAsIDAuNSk7XG4gICAgICAgICAgICBsZXQgcG9seWxpbmVzID0gZ2VuZXJhdGVQZXJsaW4oXG4gICAgICAgICAgICAgICAgWy0xMSwgLTExXSwgWzExLCAxMV0sIGNvbmZpZy5udW1iZXIsIGNvbmZpZy5ub2lzZVNjYWxlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgbGV0IGdlb21ldHJ5RGF0YSA9IFtdO1xuICAgICAgICAgICAgbGV0IHZlcnRleENvdW50ID0gMDtcbiAgICAgICAgICAgIGxldCBpbmRpY2VzQ291bnQgPSAwO1xuICAgICAgICAgICAgbGV0IGdlbyA9IHRoaXMuX3BhcGVyTWVzaC5nZW9tZXRyeTtcbiAgICAgICAgICAgIHBvbHlsaW5lcy5mb3JFYWNoKHBvbHlsaW5lID0+IHtcbiAgICAgICAgICAgICAgICAvLyBsZXQge2luZGljZXMsIHBvc2l0aW9uLCBub3JtYWx9ID0gZXh0cnVkZShwb2x5bGluZSwgMSk7XG4gICAgICAgICAgICAgICAgbGV0IHtpbmRpY2VzLCBwb3NpdGlvbiwgbm9ybWFsLCB1dn0gPSBleHRydWRlUG9seWxpbmUoW3BvbHlsaW5lXSwge1xuICAgICAgICAgICAgICAgICAgICAvLyBUT0RPIENvbmZpZ3VyYXRpb25cbiAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiBjb25maWcudGhpY2tuZXNzLCBkZXB0aDogY29uZmlnLmRlcHRoXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZ2VvbWV0cnlEYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpbmRpY2VzLCBwb3NpdGlvbiwgbm9ybWFsLCB1dixcbiAgICAgICAgICAgICAgICAgICAgdmVydGV4T2Zmc2V0OiB2ZXJ0ZXhDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgaW5kaWNlc09mZnNldDogaW5kaWNlc0NvdW50LFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXhDb3VudDogcG9zaXRpb24ubGVuZ3RoIC8gM1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZlcnRleENvdW50ICs9IHBvc2l0aW9uLmxlbmd0aCAvIDM7XG4gICAgICAgICAgICAgICAgaW5kaWNlc0NvdW50ICs9IGluZGljZXMubGVuZ3RoO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBsZXQgcG9zaXRpb25Ub3RhbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKTtcbiAgICAgICAgICAgIGxldCBub3JtYWxUb3RhbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKTtcbiAgICAgICAgICAgIGxldCB1dlRvdGFsID0gbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpO1xuICAgICAgICAgICAgbGV0IGluZGljZXNUb3RhbCA9IG5ldyAodmVydGV4Q291bnQgPiA2NTUzNiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKGluZGljZXNDb3VudCk7XG4gICAgICAgICAgICBnZW9tZXRyeURhdGEuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvblRvdGFsLnNldChpdGVtLnBvc2l0aW9uLCBpdGVtLnZlcnRleE9mZnNldCAqIDMpO1xuICAgICAgICAgICAgICAgIG5vcm1hbFRvdGFsLnNldChpdGVtLm5vcm1hbCwgaXRlbS52ZXJ0ZXhPZmZzZXQgKiAzKTtcbiAgICAgICAgICAgICAgICB1dlRvdGFsLnNldChpdGVtLnV2LCBpdGVtLnZlcnRleE9mZnNldCAqIDIpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbS5pbmRpY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGljZXNUb3RhbFtpdGVtLmluZGljZXNPZmZzZXQgKyBpXSA9IGl0ZW0udmVydGV4T2Zmc2V0ICsgaXRlbS5pbmRpY2VzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgZ2VvLmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWUgPSBwb3NpdGlvblRvdGFsO1xuICAgICAgICAgICAgZ2VvLmF0dHJpYnV0ZXMubm9ybWFsLnZhbHVlID0gbm9ybWFsVG90YWw7XG4gICAgICAgICAgICBnZW8uYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWUgPSB1dlRvdGFsO1xuICAgICAgICAgICAgZ2VvLmluZGljZXMgPSBpbmRpY2VzVG90YWw7XG4gICAgICAgICAgICBnZW8udXBkYXRlQm91bmRpbmdCb3goKTtcbiAgICAgICAgICAgIGdlby5kaXJ0eSgpO1xuXG4gICAgICAgICAgICB0aGlzLl9nZW9tZXRyeURhdGEgPSBnZW9tZXRyeURhdGE7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdXBkYXRlUGFwZXJDb2xvcnMoKSB7XG4gICAgICAgICAgICBsZXQgY29sb3JzID0gY29uZmlnLmxheWVycy5tYXAobGF5ZXIgPT4gc3RyaW5naWZ5KGxheWVyLmNvbG9yLCAncmdiJykpO1xuICAgICAgICAgICAgLy8gdGhpcy5fc2Nyb2xsaW5nUGFwZXJzLmZvckVhY2goKG1lc2gsIGlkeCkgPT4ge1xuICAgICAgICAgICAgLy8gICAgIGxldCBjb2xvciA9IGxlcnAoKGlkeCAvICh0aGlzLl9zY3JvbGxpbmdQYXBlcnMubGVuZ3RoIC0gMSkgKiA0KSAlIDEsIGNvbG9ycyk7XG4gICAgICAgICAgICAvLyAgICAgbWVzaC5tYXRlcmlhbC5zZXQoJ2NvbG9yJywgY29sb3IpO1xuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICBpZiAodGhpcy5fcGFwZXJNZXNoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbG9yVmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuX3BhcGVyTWVzaC5nZW9tZXRyeS52ZXJ0ZXhDb3VudCAqIDQpO1xuICAgICAgICAgICAgICAgIGxldCBvZmYgPSAwO1xuICAgICAgICAgICAgICAgIGxldCBwYXBlckNvdW50ID0gdGhpcy5fZ2VvbWV0cnlEYXRhLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBwYXBlckNvdW50OyBpZHgrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSBwYXJzZShsZXJwKChpZHggLyAocGFwZXJDb3VudCAtIDEpICogNCkgJSAxLCBjb2xvcnMpKTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JbMF0gLz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICBjb2xvclsxXSAvPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yWzJdIC89IDI1NTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLl9nZW9tZXRyeURhdGFbaWR4XS52ZXJ0ZXhDb3VudDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yVmFsdWVbb2ZmKytdID0gY29sb3JbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFwZXJNZXNoLmdlb21ldHJ5LmF0dHJpYnV0ZXMuY29sb3IudmFsdWUgPSBjb2xvclZhbHVlO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BhcGVyTWVzaC5nZW9tZXRyeS5kaXJ0eUF0dHJpYnV0ZSgnY29sb3InKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2FkdmFuY2VkUmVuZGVyZXIucmVuZGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlKGFwcCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgZnVuY3Rpb24gc2V0RGV0YWlsVGV4dHVyZShkZXRhaWxUZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGluZyA9IFtjb25maWcucGFwZXJEZXRhaWxUaWxpbmcsIGNvbmZpZy5wYXBlckRldGFpbFRpbGluZ107XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFwZXJNZXNoLm1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMC44KTtcbiAgICAgICAgICAgICAgICBzZWxmLl9ncm91bmRQbGFuZS5tYXRlcmlhbC5zZXQoJ2RpZmZ1c2VNYXAnLCBkZXRhaWxUZXh0dXJlKTtcbiAgICAgICAgICAgICAgICBzZWxmLl9wYXBlck1lc2gubWF0ZXJpYWwuc2V0KCd1dlJlcGVhdCcsIHRpbGluZyk7XG4gICAgICAgICAgICAgICAgc2VsZi5fcGFwZXJNZXNoLm1hdGVyaWFsLnNldCgncm91Z2huZXNzJywgMC44KTtcbiAgICAgICAgICAgICAgICBzZWxmLl9ncm91bmRQbGFuZS5tYXRlcmlhbC5zZXQoJ3JvdWdobmVzcycsIDEpO1xuICAgICAgICAgICAgICAgIHNlbGYuX2dyb3VuZFBsYW5lLm1hdGVyaWFsLnNldCgnZGlmZnVzZU1hcCcsIGRldGFpbFRleHR1cmUpO1xuICAgICAgICAgICAgICAgIHNlbGYuX2dyb3VuZFBsYW5lLm1hdGVyaWFsLnNldCgndXZSZXBlYXQnLCB0aWxpbmcpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5fYWR2YW5jZWRSZW5kZXJlci5yZW5kZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb25maWcucGFwZXJEZXRhaWwgJiYgY29uZmlnLnBhcGVyRGV0YWlsICE9PSAnbm9uZScpIHtcbiAgICAgICAgICAgICAgICBhcHAubG9hZFRleHR1cmUoY29uZmlnLnBhcGVyRGV0YWlsLCB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnZlcnRUb1BPVDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pLnRoZW4oc2V0RGV0YWlsVGV4dHVyZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzZXREZXRhaWxUZXh0dXJlKG51bGwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHVwZGF0ZVNjcm9sbGluZ1BhcGVycygpIHtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVTY3JvbGxpbmdQYXBlcnMoKTtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xufVxuXG52YXIgY29udHJvbEtpdCA9IG5ldyBDb250cm9sS2l0KHtcbiAgICBsb2FkQW5kU2F2ZTogZmFsc2UsXG4gICAgdXNlRXh0ZXJuYWxTdHlsZTogdHJ1ZVxufSk7XG5cbnZhciBzY2VuZVBhbmVsID0gY29udHJvbEtpdC5hZGRQYW5lbCh7IGxhYmVsOiAnU2V0dGluZ3MnLCB3aWR0aDogMjUwIH0pO1xuXG5zY2VuZVBhbmVsLmFkZEdyb3VwKHsgbGFiZWw6ICdHZW5lcmF0ZScgfSlcbiAgICAuYWRkTnVtYmVySW5wdXQoY29uZmlnLCAndGhpY2tuZXNzJywgeyBsYWJlbDogJ1RoaWNrbmVzcycsIG9uQ2hhbmdlOiB1cGRhdGVTY3JvbGxpbmdQYXBlcnMsIHN0ZXA6IDAuMDAxLCBtaW46IDAuMDEgfSlcbiAgICAuYWRkTnVtYmVySW5wdXQoY29uZmlnLCAnaGVpZ2h0JywgeyBsYWJlbDogJ0hlaWdodCcsIG9uQ2hhbmdlOiB1cGRhdGVTY3JvbGxpbmdQYXBlcnMsIHN0ZXA6IDAuMSwgbWluOiAwLjEgfSlcbiAgICAuYWRkTnVtYmVySW5wdXQoY29uZmlnLCAnbnVtYmVyJywgeyBsYWJlbDogJ051bWJlcicsIG9uQ2hhbmdlOiB1cGRhdGVTY3JvbGxpbmdQYXBlcnMsIHN0ZXA6IDEwLCBtaW46IDUwIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ25vaXNlU2NhbGUnLCB7IGxhYmVsOiAnTm9pc2UgU2NhbGUnLCBvbkNoYW5nZTogdXBkYXRlU2Nyb2xsaW5nUGFwZXJzLCBzdGVwOiAxLCBtaW46IDEgfSlcbiAgICAuYWRkQnV0dG9uKCdSYW5kb20nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbmZpZy5zZWVkID0gTWF0aC5yYW5kb20oKTtcblxuICAgICAgICB1cGRhdGVTY3JvbGxpbmdQYXBlcnMoKTtcbiAgICB9KTtcblxuc2NlbmVQYW5lbC5hZGRHcm91cCh7IGxhYmVsOiAnUGFwZXJzJyB9KVxuICAgIC5hZGRDdXN0b21Db21wb25lbnQoVGV4dHVyZVVJLCBjb25maWcsICdwYXBlckRldGFpbCcsIHsgbGFiZWw6ICdEZXRhaWwnLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMuY2hhbmdlUGFwZXJEZXRhaWxUZXh0dXJlIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ3BhcGVyRGV0YWlsVGlsaW5nJywgeyBsYWJlbDogJ1RpbGluZycsIG9uQ2hhbmdlOiBhcHAubWV0aG9kcy51cGRhdGVQYXBlcnMsIHN0ZXA6IDAuNSwgbWluOiAwIH0pO1xuXG5zY2VuZVBhbmVsLmFkZEdyb3VwKHsgbGFiZWw6ICdTaGFkb3cnLCBlbmFibGU6IGZhbHNlIH0pXG4gICAgLmFkZFBhZChjb25maWcsICdzaGFkb3dEaXJlY3Rpb24nLCB7IGxhYmVsOiAnRGlyZWN0aW9uJywgb25DaGFuZ2U6IGFwcC5tZXRob2RzLnVwZGF0ZVNoYWRvdyB9KVxuICAgIC5hZGROdW1iZXJJbnB1dChjb25maWcsICdzaGFkb3dCbHVyU2l6ZScsIHsgbGFiZWw6ICdCbHVyIFNpemUnLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlU2hhZG93LCBzdGVwOiAwLjUsIG1pbjogMCB9KTtcblxuc2NlbmVQYW5lbC5hZGRHcm91cCh7IGxhYmVsOiAnQ2FtZXJhJywgZW5hYmxlOiBmYWxzZSB9KVxuICAgIC5hZGRQYWQoY29uZmlnLCAnY2FtZXJhUG9zaXRpb24nLCB7IGxhYmVsOiAnUG9zaXRpb24nLCBvbkNoYW5nZTogYXBwLm1ldGhvZHMudXBkYXRlQ2FtZXJhIH0pXG4gICAgLmFkZE51bWJlcklucHV0KGNvbmZpZywgJ2NhbWVyYURpc3RhbmNlJywgeyBsYWJlbDogJ0Rpc3RhbmNlJywgb25DaGFuZ2U6IGFwcC5tZXRob2RzLnVwZGF0ZUNhbWVyYSwgc3RlcDogMC41LCBtaW46IDAgfSk7XG5cbnZhciBjb2xvckdyb3VwID0gc2NlbmVQYW5lbC5hZGRHcm91cCh7IGxhYmVsOiAnTGF5ZXIgQ29sb3JzJyB9KTtcbmNvbG9yR3JvdXAuYWRkQnV0dG9uKCdHZW5lcmF0ZSBDb2xvcnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgY3JlYXRlUmFuZG9tQ29sb3JzKCk7XG4gICAgYXBwLm1ldGhvZHMudXBkYXRlUGFwZXJDb2xvcnMoKTtcbiAgICBjb250cm9sS2l0LnVwZGF0ZSgpO1xufSk7XG5mb3IgKHZhciBpID0gMDsgaSA8IGNvbmZpZy5sYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICBjb2xvckdyb3VwLmFkZENvbG9yKGNvbmZpZy5sYXllcnNbaV0sICdjb2xvcicsIHsgbGFiZWw6ICdMYXllciAnICsgKGkgKyAxKSwgY29sb3JNb2RlOiAncmdiJywgb25DaGFuZ2U6IGFwcC5tZXRob2RzLnVwZGF0ZVBhcGVyQ29sb3JzICB9KTtcbn1cbmNvbG9yR3JvdXAuYWRkQnV0dG9uKCdSZXZlcnQgQ29sb3JzJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb2xvcnMgPSBjb25maWcubGF5ZXJzLm1hcChmdW5jdGlvbiAobGF5ZXIpIHtcbiAgICAgICAgcmV0dXJuIGxheWVyLmNvbG9yO1xuICAgIH0pLnJldmVyc2UoKTtcbiAgICBjb25maWcubGF5ZXJzLmZvckVhY2goZnVuY3Rpb24gKGxheWVyLCBpZHgpIHtcbiAgICAgICAgbGF5ZXIuY29sb3IgPSBjb2xvcnNbaWR4XTtcbiAgICB9KTtcbiAgICBhcHAubWV0aG9kcy51cGRhdGVQYXBlckNvbG9ycygpO1xuICAgIGNvbnRyb2xLaXQudXBkYXRlKCk7XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uICgpIHsgYXBwLnJlc2l6ZSgpOyBhcHAubWV0aG9kcy5yZW5kZXIoKTsgfSApO1xuXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbG9hZGluZycpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvbWFpbi5qc1xuLy8gbW9kdWxlIGlkID0gMTIzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///123\n");

/***/ }),
/* 124 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__src_RenderMain__ = __webpack_require__(125);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__src_defaultGraphicConfig__ = __webpack_require__(208);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__ = __webpack_require__(209);\n\n\n\n\n\nfunction ClayAdvancedRenderer(renderer, scene, timeline, graphicOpts) {\n    graphicOpts = __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */]({}, graphicOpts);\n    if (typeof graphicOpts.shadow === 'boolean') {\n        graphicOpts.shadow = {\n            enable: graphicOpts.shadow\n        };\n    }\n    graphicOpts = __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](graphicOpts, __WEBPACK_IMPORTED_MODULE_1__src_defaultGraphicConfig__[\"a\" /* default */]);\n\n    this._renderMain = new __WEBPACK_IMPORTED_MODULE_0__src_RenderMain__[\"a\" /* default */](renderer, scene, graphicOpts.shadow);\n\n    this._renderMain.setShadow(graphicOpts.shadow);\n    this._renderMain.setPostEffect(graphicOpts.postEffect);\n    this._renderMain.setTemporalSuperSampling(graphicOpts.temporalSuperSampling);\n\n    this._needsRefresh = false;\n\n    this._graphicOpts = graphicOpts;\n\n    timeline.on('frame', this._loop, this);\n\n    scene.on('click', function (e) {\n        this.setPostEffect({\n            depthOfField: {\n                focalDistance: e.distance\n            }\n        });\n        this.render();\n    }, this);\n}\n\nClayAdvancedRenderer.prototype.render = function (renderImmediately) {\n    this._needsRefresh = true;\n};\n\nClayAdvancedRenderer.prototype.setPostEffect = function (opts) {\n    __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](this._graphicOpts.postEffect, opts, true);\n    this._renderMain.setPostEffect(this._graphicOpts.postEffect);\n};\n\nClayAdvancedRenderer.prototype.setShadow = function (opts) {\n    __WEBPACK_IMPORTED_MODULE_2_zrender_src_core_util__[\"a\" /* merge */](this._graphicOpts.shadow, opts, true);\n    this._renderMain.setShadow(this._graphicOpts.shadow);\n};\n\nClayAdvancedRenderer.prototype._loop = function (frameTime) {\n    if (this._disposed) {\n        return;\n    }\n    if (!this._needsRefresh) {\n        return;\n    }\n\n    this._needsRefresh = false;\n\n    this._renderMain.prepareRender();\n    this._renderMain.render();\n\n    this._startAccumulating();\n};\n\nvar accumulatingId = 1;\nClayAdvancedRenderer.prototype._stopAccumulating = function () {\n    this._accumulatingId = 0;\n    clearTimeout(this._accumulatingTimeout);\n};\n\nClayAdvancedRenderer.prototype._startAccumulating = function (immediate) {\n    var self = this;\n    this._stopAccumulating();\n\n    var needsAccumulate = self._renderMain.needsAccumulate();\n    if (!needsAccumulate) {\n        return;\n    }\n\n    function accumulate(id) {\n        if (!self._accumulatingId || id !== self._accumulatingId || self._disposed) {\n            return;\n        }\n\n        var isFinished = self._renderMain.isAccumulateFinished() && needsAccumulate;\n\n        if (!isFinished) {\n            self._renderMain.render(true);\n\n            if (immediate) {\n                accumulate(id);\n            }\n            else {\n                requestAnimationFrame(function () {\n                    accumulate(id);\n                });\n            }\n        }\n    }\n\n    this._accumulatingId = accumulatingId++;\n\n    if (immediate) {\n        accumulate(self._accumulatingId);\n    }\n    else {\n        this._accumulatingTimeout = setTimeout(function () {\n            accumulate(self._accumulatingId);\n        }, 50);\n    }\n};\n\nClayAdvancedRenderer.prototype.dispose = function () {\n    this._disposed = true;\n\n    this._renderMain.dispose();\n};\n\nClayAdvancedRenderer.version = '0.1.1';\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ClayAdvancedRenderer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9pbmRleC5qcz80NWUwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZW5kZXJNYWluIGZyb20gJy4vc3JjL1JlbmRlck1haW4nO1xuaW1wb3J0IGRlZmF1bHRHcmFwaGljQ29uZmlnIGZyb20gJy4vc3JjL2RlZmF1bHRHcmFwaGljQ29uZmlnJztcbmltcG9ydCAqIGFzIHpyVXRpbCBmcm9tICd6cmVuZGVyL3NyYy9jb3JlL3V0aWwnO1xuXG5cbmZ1bmN0aW9uIENsYXlBZHZhbmNlZFJlbmRlcmVyKHJlbmRlcmVyLCBzY2VuZSwgdGltZWxpbmUsIGdyYXBoaWNPcHRzKSB7XG4gICAgZ3JhcGhpY09wdHMgPSB6clV0aWwubWVyZ2Uoe30sIGdyYXBoaWNPcHRzKTtcbiAgICBpZiAodHlwZW9mIGdyYXBoaWNPcHRzLnNoYWRvdyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGdyYXBoaWNPcHRzLnNoYWRvdyA9IHtcbiAgICAgICAgICAgIGVuYWJsZTogZ3JhcGhpY09wdHMuc2hhZG93XG4gICAgICAgIH07XG4gICAgfVxuICAgIGdyYXBoaWNPcHRzID0genJVdGlsLm1lcmdlKGdyYXBoaWNPcHRzLCBkZWZhdWx0R3JhcGhpY0NvbmZpZyk7XG5cbiAgICB0aGlzLl9yZW5kZXJNYWluID0gbmV3IFJlbmRlck1haW4ocmVuZGVyZXIsIHNjZW5lLCBncmFwaGljT3B0cy5zaGFkb3cpO1xuXG4gICAgdGhpcy5fcmVuZGVyTWFpbi5zZXRTaGFkb3coZ3JhcGhpY09wdHMuc2hhZG93KTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFBvc3RFZmZlY3QoZ3JhcGhpY09wdHMucG9zdEVmZmVjdCk7XG4gICAgdGhpcy5fcmVuZGVyTWFpbi5zZXRUZW1wb3JhbFN1cGVyU2FtcGxpbmcoZ3JhcGhpY09wdHMudGVtcG9yYWxTdXBlclNhbXBsaW5nKTtcblxuICAgIHRoaXMuX25lZWRzUmVmcmVzaCA9IGZhbHNlO1xuXG4gICAgdGhpcy5fZ3JhcGhpY09wdHMgPSBncmFwaGljT3B0cztcblxuICAgIHRpbWVsaW5lLm9uKCdmcmFtZScsIHRoaXMuX2xvb3AsIHRoaXMpO1xuXG4gICAgc2NlbmUub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdGhpcy5zZXRQb3N0RWZmZWN0KHtcbiAgICAgICAgICAgIGRlcHRoT2ZGaWVsZDoge1xuICAgICAgICAgICAgICAgIGZvY2FsRGlzdGFuY2U6IGUuZGlzdGFuY2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgfSwgdGhpcyk7XG59XG5cbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAocmVuZGVySW1tZWRpYXRlbHkpIHtcbiAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSB0cnVlO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLnNldFBvc3RFZmZlY3QgPSBmdW5jdGlvbiAob3B0cykge1xuICAgIHpyVXRpbC5tZXJnZSh0aGlzLl9ncmFwaGljT3B0cy5wb3N0RWZmZWN0LCBvcHRzLCB0cnVlKTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFBvc3RFZmZlY3QodGhpcy5fZ3JhcGhpY09wdHMucG9zdEVmZmVjdCk7XG59O1xuXG5DbGF5QWR2YW5jZWRSZW5kZXJlci5wcm90b3R5cGUuc2V0U2hhZG93ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICB6clV0aWwubWVyZ2UodGhpcy5fZ3JhcGhpY09wdHMuc2hhZG93LCBvcHRzLCB0cnVlKTtcbiAgICB0aGlzLl9yZW5kZXJNYWluLnNldFNoYWRvdyh0aGlzLl9ncmFwaGljT3B0cy5zaGFkb3cpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLl9sb29wID0gZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICAgIGlmICh0aGlzLl9kaXNwb3NlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5fbmVlZHNSZWZyZXNoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLl9uZWVkc1JlZnJlc2ggPSBmYWxzZTtcblxuICAgIHRoaXMuX3JlbmRlck1haW4ucHJlcGFyZVJlbmRlcigpO1xuICAgIHRoaXMuX3JlbmRlck1haW4ucmVuZGVyKCk7XG5cbiAgICB0aGlzLl9zdGFydEFjY3VtdWxhdGluZygpO1xufTtcblxudmFyIGFjY3VtdWxhdGluZ0lkID0gMTtcbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5fc3RvcEFjY3VtdWxhdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9hY2N1bXVsYXRpbmdJZCA9IDA7XG4gICAgY2xlYXJUaW1lb3V0KHRoaXMuX2FjY3VtdWxhdGluZ1RpbWVvdXQpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIucHJvdG90eXBlLl9zdGFydEFjY3VtdWxhdGluZyA9IGZ1bmN0aW9uIChpbW1lZGlhdGUpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5fc3RvcEFjY3VtdWxhdGluZygpO1xuXG4gICAgdmFyIG5lZWRzQWNjdW11bGF0ZSA9IHNlbGYuX3JlbmRlck1haW4ubmVlZHNBY2N1bXVsYXRlKCk7XG4gICAgaWYgKCFuZWVkc0FjY3VtdWxhdGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFjY3VtdWxhdGUoaWQpIHtcbiAgICAgICAgaWYgKCFzZWxmLl9hY2N1bXVsYXRpbmdJZCB8fCBpZCAhPT0gc2VsZi5fYWNjdW11bGF0aW5nSWQgfHwgc2VsZi5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpc0ZpbmlzaGVkID0gc2VsZi5fcmVuZGVyTWFpbi5pc0FjY3VtdWxhdGVGaW5pc2hlZCgpICYmIG5lZWRzQWNjdW11bGF0ZTtcblxuICAgICAgICBpZiAoIWlzRmluaXNoZWQpIHtcbiAgICAgICAgICAgIHNlbGYuX3JlbmRlck1haW4ucmVuZGVyKHRydWUpO1xuXG4gICAgICAgICAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0ZShpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhY2N1bXVsYXRlKGlkKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2FjY3VtdWxhdGluZ0lkID0gYWNjdW11bGF0aW5nSWQrKztcblxuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgICAgYWNjdW11bGF0ZShzZWxmLl9hY2N1bXVsYXRpbmdJZCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9hY2N1bXVsYXRpbmdUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBhY2N1bXVsYXRlKHNlbGYuX2FjY3VtdWxhdGluZ0lkKTtcbiAgICAgICAgfSwgNTApO1xuICAgIH1cbn07XG5cbkNsYXlBZHZhbmNlZFJlbmRlcmVyLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2Rpc3Bvc2VkID0gdHJ1ZTtcblxuICAgIHRoaXMuX3JlbmRlck1haW4uZGlzcG9zZSgpO1xufTtcblxuQ2xheUFkdmFuY2VkUmVuZGVyZXIudmVyc2lvbiA9ICcwLjEuMSc7XG5cbmV4cG9ydCBkZWZhdWx0IENsYXlBZHZhbmNlZFJlbmRlcmVyO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///124\n");

/***/ }),
/* 125 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__EffectCompositor__ = __webpack_require__(197);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TemporalSuperSampling__ = __webpack_require__(206);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__halton__ = __webpack_require__(64);\n\n\nvar ShadowMapPass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"p\" /* prePass */].ShadowMap;\n\n\n\n\n\nfunction RenderMain(renderer, scene, enableShadow) {\n\n    this.renderer = renderer;\n    this.scene = scene;\n\n    this.preZ = true;\n\n    this._compositor = new __WEBPACK_IMPORTED_MODULE_1__EffectCompositor__[\"a\" /* default */]();\n\n    this._temporalSS = new __WEBPACK_IMPORTED_MODULE_2__TemporalSuperSampling__[\"a\" /* default */]({\n        velocityTexture: this._compositor.getVelocityTexture(),\n        depthTexture: this._compositor.getDepthTexture()\n    });\n\n    if (enableShadow) {\n        this._shadowMapPass = new ShadowMapPass({\n            lightFrustumBias: 20\n        });\n    }\n\n    this._enableTemporalSS = 'auto';\n\n    scene.on('beforerender', function (renderer, scene, camera) {\n        if (this.needsTemporalSS()) {\n            this._temporalSS.jitterProjection(renderer, camera);\n        }\n    }, this);\n\n\n    this._framebuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]();\n    this._sourceTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._depthTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        format: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].DEPTH_COMPONENT,\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].UNSIGNED_INT\n    });\n}\n\n/**\n * Cast a ray\n * @param {number} x offsetX\n * @param {number} y offsetY\n * @param {clay.math.Ray} out\n * @return {clay.math.Ray}\n */\nvar ndc = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"j\" /* Vector2 */]();\nRenderMain.prototype.castRay = function (x, y, out) {\n    var renderer = this.layer.renderer;\n\n    var oldViewport = renderer.viewport;\n    renderer.viewport = this.viewport;\n    renderer.screenToNDC(x, y, ndc);\n    this.camera.castRay(ndc, out);\n    renderer.viewport = oldViewport;\n\n    return out;\n};\n\n/**\n * Prepare and update scene before render\n */\nRenderMain.prototype.prepareRender = function () {\n    var scene = this.scene;\n    var camera = scene.getMainCamera();\n    var renderer = this.renderer;\n\n    camera.aspect = renderer.getViewportAspect();\n\n    scene.update();\n    scene.updateLights();\n    var renderList = scene.updateRenderList(camera);\n\n    this._updateSRGBOfList(renderList.opaque);\n    this._updateSRGBOfList(renderList.transparent);\n\n    this._frame = 0;\n    if (!this._temporalSupportDynamic) {\n        this._temporalSS.resetFrame();\n    }\n\n    // var lights = scene.getLights();\n    // for (var i = 0; i < lights.length; i++) {\n    //     if (lights[i].cubemap) {\n    //         if (this._compositor && this._compositor.isSSREnabled()) {\n    //             lights[i].invisible = true;\n    //         }\n    //         else {\n    //             lights[i].invisible = false;\n    //         }\n    //     }\n    // }\n\n    if (this._enablePostEffect) {\n        this._compositor.resize(renderer.getWidth(), renderer.getHeight(), renderer.getDevicePixelRatio());\n    }\n    if (this._temporalSS) {\n        this._temporalSS.resize(renderer.getWidth(), renderer.getHeight());\n    }\n};\n\nRenderMain.prototype.render = function (accumulating) {\n    var scene = this.scene;\n    var camera = scene.getMainCamera();\n    this._doRender(scene, camera, accumulating, this._frame);\n    this._frame++;\n};\n\nRenderMain.prototype.needsAccumulate = function () {\n    return this.needsTemporalSS();\n};\n\nRenderMain.prototype.needsTemporalSS = function () {\n    var enableTemporalSS = this._enableTemporalSS;\n    if (enableTemporalSS === 'auto') {\n        enableTemporalSS = this._enablePostEffect;\n    }\n    return enableTemporalSS;\n};\n\nRenderMain.prototype.hasDOF = function () {\n    return this._enableDOF;\n};\n\nRenderMain.prototype.isAccumulateFinished = function () {\n    var frame = this._frame;\n    return !(this.needsTemporalSS() && !this._temporalSS.isFinished(frame))\n        && !(this._compositor && !this._compositor.isSSAOFinished(frame))\n        && !(this._compositor && !this._compositor.isSSRFinished(frame))\n        && !(this._compositor && frame < 30);\n};\n\nRenderMain.prototype._doRender = function (scene, camera, accumulating, accumFrame) {\n\n    var renderer = this.renderer;\n\n    accumFrame = accumFrame || 0;\n\n    if (!accumulating && this._shadowMapPass) {\n        this._shadowMapPass.kernelPCF = this._pcfKernels[0];\n        // Not render shadowmap pass in accumulating frame.\n        this._shadowMapPass.render(renderer, scene, camera, true);\n    }\n\n    this._updateShadowPCFKernel(scene, camera, accumFrame);\n\n    // Shadowmap will set clearColor.\n    renderer.gl.clearColor(0.0, 0.0, 0.0, 0.0);\n\n    if (this._enablePostEffect) {\n        // normal render also needs to be jittered when have edge pass.\n        if (this.needsTemporalSS()) {\n            this._temporalSS.jitterProjection(renderer, camera);\n        }\n        this._compositor.updateGBuffer(renderer, scene, camera, this._temporalSS.getFrame());\n    }\n\n    // Always update SSAO to make sure have correct ssaoMap status\n    // TODO TRANSPARENT OBJECTS.\n    this._updateSSAO(renderer, scene, camera, accumulating ? this._temporalSS.getFrame() : 0);\n\n    var frameBuffer;\n\n    var needTemporalPass = this.needsTemporalSS() && (this._temporalSupportDynamic || accumulating);\n    var needPostEffect = this._enablePostEffect;\n\n    if (!needTemporalPass && !needPostEffect) {\n        renderer.render(scene, camera, true, this.preZ);\n        this.afterRenderScene(renderer, scene, camera);\n    }\n    else {\n        var isSSREnabled = this._compositor.isSSREnabled();\n\n        var sourceTex = this._sourceTex;\n        var depthTex = this._depthTex;\n        var frameBuffer = this._framebuffer;\n        depthTex.width = sourceTex.width = renderer.getWidth();\n        depthTex.height = sourceTex.height = renderer.getHeight();\n\n        frameBuffer.attach(sourceTex);\n        frameBuffer.attach(depthTex, __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */].DEPTH_ATTACHMENT);\n        frameBuffer.bind(renderer);\n        renderer.gl.clear(renderer.gl.DEPTH_BUFFER_BIT | renderer.gl.COLOR_BUFFER_BIT);\n        renderer.render(scene, camera, true, this.preZ);\n        this.afterRenderScene(renderer, scene, camera);\n        frameBuffer.unbind(renderer);\n\n        if (isSSREnabled && needPostEffect) {\n            this._compositor.updateSSR(\n                renderer, scene, camera,\n                sourceTex,\n                // TODO reprojection\n                sourceTex,\n                // needTemporalPass ? this._temporalSS.getTargetTexture() : sourceTex,\n                this._temporalSS.getFrame()\n            );\n            sourceTex = this._compositor.getSSRTexture();\n        }\n\n        if (needTemporalPass) {\n            var directOutput = !needPostEffect;\n            this._temporalSS.render(renderer, camera, sourceTex, accumulating, directOutput);\n            sourceTex = this._temporalSS.getTargetTexture();\n        }\n        if (needPostEffect) {\n            this._compositor.composite(\n                renderer, scene, camera, sourceTex, depthTex,\n                needTemporalPass ? this._temporalSS.getFrame() : 0,\n                accumulating\n            );\n        }\n    }\n\n    this.afterRenderAll(renderer, scene, camera);\n};\n\nRenderMain.prototype._updateSRGBOfList = function (list) {\n    var isLinearSpace = this.isLinearSpace();\n    for (var i = 0; i < list.length; i++) {\n        list[i].material[isLinearSpace ? 'define' : 'undefine']('fragment', 'SRGB_DECODE');\n    };\n};\n\nRenderMain.prototype.afterRenderScene = function (renderer, scene, camera) {};\nRenderMain.prototype.afterRenderAll = function (renderer, scene, camera) {};\n\nRenderMain.prototype._updateSSAO = function (renderer, scene, camera, frame) {\n    var ifEnableSSAO = this._enableSSAO && this._enablePostEffect;\n    var compositor = this._compositor;\n    if (ifEnableSSAO) {\n        this._compositor.updateSSAO(renderer, scene, camera, this._temporalSS.getFrame());\n    }\n\n    function updateQueue(queue) {\n        for (var i = 0; i < queue.length; i++) {\n            var renderable = queue[i];\n            renderable.material[ifEnableSSAO ? 'enableTexture' : 'disableTexture']('ssaoMap');\n            if (ifEnableSSAO) {\n                renderable.material.set('ssaoMap', compositor.getSSAOTexture());\n            }\n        }\n    }\n    updateQueue(scene.getRenderList(camera).opaque);\n    updateQueue(scene.getRenderList(camera).transparent);\n};\n\nRenderMain.prototype._updateShadowPCFKernel = function (scene, camera, frame) {\n    var pcfKernel = this._pcfKernels[frame % this._pcfKernels.length];\n    function updateQueue(queue) {\n        for (var i = 0; i < queue.length; i++) {\n            if (queue[i].receiveShadow) {\n                queue[i].material.set('pcfKernel', pcfKernel);\n                if (queue[i].material) {\n                    queue[i].material.define('fragment', 'PCF_KERNEL_SIZE', pcfKernel.length / 2);\n                }\n            }\n        }\n    }\n    updateQueue(scene.getRenderList(camera).opaque);\n    updateQueue(scene.getRenderList(camera).transparent);\n};\n\nRenderMain.prototype.dispose = function () {\n    var renderer = this.renderer;\n    this._compositor.dispose(renderer);\n    this._temporalSS.dispose(renderer);\n    if (this._shadowMapPass) {\n        this._shadowMapPass.dispose(renderer);\n    }\n    renderer.dispose();\n};\n\nRenderMain.prototype.setPostEffect = function (opts, api) {\n    var compositor = this._compositor;\n    opts = opts || {};\n    this._enablePostEffect = !!opts.enable;\n    var bloomOpts = opts.bloom || {};\n    var edgeOpts = opts.edge || {};\n    var dofOpts = opts.depthOfField || {};\n    var ssaoOpts = opts.screenSpaceAmbientOcclusion || {};\n    var ssrOpts = opts.screenSpaceReflection || {};\n    var fxaaOpts = opts.FXAA || {};\n    var colorCorrOpts = opts.colorCorrection || {};\n    bloomOpts.enable ? compositor.enableBloom() : compositor.disableBloom();\n    dofOpts.enable ? compositor.enableDOF() : compositor.disableDOF();\n    ssrOpts.enable ? compositor.enableSSR() : compositor.disableSSR();\n    colorCorrOpts.enable ? compositor.enableColorCorrection() : compositor.disableColorCorrection();\n    edgeOpts.enable ? compositor.enableEdge() : compositor.disableEdge();\n    fxaaOpts.enable ? compositor.enableFXAA() : compositor.disableFXAA();\n\n    this._enableDOF = dofOpts.enable;\n    this._enableSSAO = ssaoOpts.enable;\n\n    this._enableSSAO ? compositor.enableSSAO() : compositor.disableSSAO();\n\n    compositor.setBloomIntensity(bloomOpts.intensity);\n    compositor.setEdgeColor(edgeOpts.color);\n    compositor.setColorLookupTexture(colorCorrOpts.lookupTexture, api);\n    compositor.setExposure(colorCorrOpts.exposure);\n\n    ['radius', 'quality', 'intensity', 'temporalFilter'].forEach(function (name) {\n        compositor.setSSAOParameter(name, ssaoOpts[name]);\n    });\n    ['quality', 'maxRoughness'].forEach(function (name) {\n        compositor.setSSRParameter(name, ssrOpts[name]);\n    });\n    ['quality', 'focalDistance', 'focalRange', 'blurRadius', 'aperture'].forEach(function (name) {\n        compositor.setDOFParameter(name, dofOpts[name]);\n    });\n    ['brightness', 'contrast', 'saturation'].forEach(function (name) {\n        compositor.setColorCorrection(name, colorCorrOpts[name]);\n    });\n};\n\nRenderMain.prototype.setShadow = function (opts) {\n    var pcfKernels = [];\n    var off = 0;\n    for (var i = 0; i < 30; i++) {\n        var pcfKernel = [];\n        for (var k = 0; k < opts.kernelSize; k++) {\n            pcfKernel.push((Object(__WEBPACK_IMPORTED_MODULE_3__halton__[\"a\" /* default */])(off, 2) * 2.0 - 1.0) * opts.blurSize);\n            pcfKernel.push((Object(__WEBPACK_IMPORTED_MODULE_3__halton__[\"a\" /* default */])(off, 3) * 2.0 - 1.0) * opts.blurSize);\n            off++;\n        }\n        pcfKernels.push(pcfKernel);\n    }\n    this._pcfKernels = pcfKernels;\n};\n\nRenderMain.prototype.isDOFEnabled = function () {\n    return this._enablePostEffect && this._enableDOF;\n};\n\nRenderMain.prototype.setDOFFocusOnPoint = function (depth) {\n    if (this._enablePostEffect) {\n\n        if (depth > this.camera.far || depth < this.camera.near) {\n            return;\n        }\n\n        this._compositor.setDOFParameter('focalDistance', depth);\n        return true;\n    }\n};\n\nRenderMain.prototype.setTemporalSuperSampling = function (temporalSuperSamplingOpt) {\n    temporalSuperSamplingOpt = temporalSuperSamplingOpt || {};\n    this._enableTemporalSS = temporalSuperSamplingOpt.enable;\n    this._temporalSupportDynamic = temporalSuperSamplingOpt.dynamic;\n\n    if (this._enableTemporalSS && this._temporalSupportDynamic) {\n        this._compositor.enableVelocityBuffer();\n    }\n    else {\n        this._compositor.disableVelocityBuffer();\n    }\n};\n\nRenderMain.prototype.isLinearSpace = function () {\n    return this._enablePostEffect;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (RenderMain);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvUmVuZGVyTWFpbi5qcz81MzMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHByZVBhc3MsIFZlY3RvcjIsIEZyYW1lQnVmZmVyLCBUZXh0dXJlMkQsIFRleHR1cmUgfSBmcm9tICdjbGF5Z2wnO1xuXG52YXIgU2hhZG93TWFwUGFzcyA9IHByZVBhc3MuU2hhZG93TWFwO1xuXG5pbXBvcnQgRWZmZWN0Q29tcG9zaXRvciBmcm9tICcuL0VmZmVjdENvbXBvc2l0b3InO1xuaW1wb3J0IFRlbXBvcmFsU3VwZXJTYW1wbGluZyBmcm9tICcuL1RlbXBvcmFsU3VwZXJTYW1wbGluZyc7XG5pbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuZnVuY3Rpb24gUmVuZGVyTWFpbihyZW5kZXJlciwgc2NlbmUsIGVuYWJsZVNoYWRvdykge1xuXG4gICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgIHRoaXMucHJlWiA9IHRydWU7XG5cbiAgICB0aGlzLl9jb21wb3NpdG9yID0gbmV3IEVmZmVjdENvbXBvc2l0b3IoKTtcblxuICAgIHRoaXMuX3RlbXBvcmFsU1MgPSBuZXcgVGVtcG9yYWxTdXBlclNhbXBsaW5nKHtcbiAgICAgICAgdmVsb2NpdHlUZXh0dXJlOiB0aGlzLl9jb21wb3NpdG9yLmdldFZlbG9jaXR5VGV4dHVyZSgpLFxuICAgICAgICBkZXB0aFRleHR1cmU6IHRoaXMuX2NvbXBvc2l0b3IuZ2V0RGVwdGhUZXh0dXJlKClcbiAgICB9KTtcblxuICAgIGlmIChlbmFibGVTaGFkb3cpIHtcbiAgICAgICAgdGhpcy5fc2hhZG93TWFwUGFzcyA9IG5ldyBTaGFkb3dNYXBQYXNzKHtcbiAgICAgICAgICAgIGxpZ2h0RnJ1c3R1bUJpYXM6IDIwXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2VuYWJsZVRlbXBvcmFsU1MgPSAnYXV0byc7XG5cbiAgICBzY2VuZS5vbignYmVmb3JlcmVuZGVyJywgZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7XG4gICAgICAgIGlmICh0aGlzLm5lZWRzVGVtcG9yYWxTUygpKSB7XG4gICAgICAgICAgICB0aGlzLl90ZW1wb3JhbFNTLmppdHRlclByb2plY3Rpb24ocmVuZGVyZXIsIGNhbWVyYSk7XG4gICAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIgPSBuZXcgRnJhbWVCdWZmZXIoKTtcbiAgICB0aGlzLl9zb3VyY2VUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FUXG4gICAgfSk7XG4gICAgdGhpcy5fZGVwdGhUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgZm9ybWF0OiBUZXh0dXJlLkRFUFRIX0NPTVBPTkVOVCxcbiAgICAgICAgdHlwZTogVGV4dHVyZS5VTlNJR05FRF9JTlRcbiAgICB9KTtcbn1cblxuLyoqXG4gKiBDYXN0IGEgcmF5XG4gKiBAcGFyYW0ge251bWJlcn0geCBvZmZzZXRYXG4gKiBAcGFyYW0ge251bWJlcn0geSBvZmZzZXRZXG4gKiBAcGFyYW0ge2NsYXkubWF0aC5SYXl9IG91dFxuICogQHJldHVybiB7Y2xheS5tYXRoLlJheX1cbiAqL1xudmFyIG5kYyA9IG5ldyBWZWN0b3IyKCk7XG5SZW5kZXJNYWluLnByb3RvdHlwZS5jYXN0UmF5ID0gZnVuY3Rpb24gKHgsIHksIG91dCkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMubGF5ZXIucmVuZGVyZXI7XG5cbiAgICB2YXIgb2xkVmlld3BvcnQgPSByZW5kZXJlci52aWV3cG9ydDtcbiAgICByZW5kZXJlci52aWV3cG9ydCA9IHRoaXMudmlld3BvcnQ7XG4gICAgcmVuZGVyZXIuc2NyZWVuVG9OREMoeCwgeSwgbmRjKTtcbiAgICB0aGlzLmNhbWVyYS5jYXN0UmF5KG5kYywgb3V0KTtcbiAgICByZW5kZXJlci52aWV3cG9ydCA9IG9sZFZpZXdwb3J0O1xuXG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogUHJlcGFyZSBhbmQgdXBkYXRlIHNjZW5lIGJlZm9yZSByZW5kZXJcbiAqL1xuUmVuZGVyTWFpbi5wcm90b3R5cGUucHJlcGFyZVJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgIHZhciBjYW1lcmEgPSBzY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgIGNhbWVyYS5hc3BlY3QgPSByZW5kZXJlci5nZXRWaWV3cG9ydEFzcGVjdCgpO1xuXG4gICAgc2NlbmUudXBkYXRlKCk7XG4gICAgc2NlbmUudXBkYXRlTGlnaHRzKCk7XG4gICAgdmFyIHJlbmRlckxpc3QgPSBzY2VuZS51cGRhdGVSZW5kZXJMaXN0KGNhbWVyYSk7XG5cbiAgICB0aGlzLl91cGRhdGVTUkdCT2ZMaXN0KHJlbmRlckxpc3Qub3BhcXVlKTtcbiAgICB0aGlzLl91cGRhdGVTUkdCT2ZMaXN0KHJlbmRlckxpc3QudHJhbnNwYXJlbnQpO1xuXG4gICAgdGhpcy5fZnJhbWUgPSAwO1xuICAgIGlmICghdGhpcy5fdGVtcG9yYWxTdXBwb3J0RHluYW1pYykge1xuICAgICAgICB0aGlzLl90ZW1wb3JhbFNTLnJlc2V0RnJhbWUoKTtcbiAgICB9XG5cbiAgICAvLyB2YXIgbGlnaHRzID0gc2NlbmUuZ2V0TGlnaHRzKCk7XG4gICAgLy8gZm9yICh2YXIgaSA9IDA7IGkgPCBsaWdodHMubGVuZ3RoOyBpKyspIHtcbiAgICAvLyAgICAgaWYgKGxpZ2h0c1tpXS5jdWJlbWFwKSB7XG4gICAgLy8gICAgICAgICBpZiAodGhpcy5fY29tcG9zaXRvciAmJiB0aGlzLl9jb21wb3NpdG9yLmlzU1NSRW5hYmxlZCgpKSB7XG4gICAgLy8gICAgICAgICAgICAgbGlnaHRzW2ldLmludmlzaWJsZSA9IHRydWU7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgICAgICBlbHNlIHtcbiAgICAvLyAgICAgICAgICAgICBsaWdodHNbaV0uaW52aXNpYmxlID0gZmFsc2U7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH1cbiAgICAvLyB9XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlUG9zdEVmZmVjdCkge1xuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnJlc2l6ZShyZW5kZXJlci5nZXRXaWR0aCgpLCByZW5kZXJlci5nZXRIZWlnaHQoKSwgcmVuZGVyZXIuZ2V0RGV2aWNlUGl4ZWxSYXRpbygpKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RlbXBvcmFsU1MpIHtcbiAgICAgICAgdGhpcy5fdGVtcG9yYWxTUy5yZXNpemUocmVuZGVyZXIuZ2V0V2lkdGgoKSwgcmVuZGVyZXIuZ2V0SGVpZ2h0KCkpO1xuICAgIH1cbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uIChhY2N1bXVsYXRpbmcpIHtcbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgIHZhciBjYW1lcmEgPSBzY2VuZS5nZXRNYWluQ2FtZXJhKCk7XG4gICAgdGhpcy5fZG9SZW5kZXIoc2NlbmUsIGNhbWVyYSwgYWNjdW11bGF0aW5nLCB0aGlzLl9mcmFtZSk7XG4gICAgdGhpcy5fZnJhbWUrKztcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLm5lZWRzQWNjdW11bGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5uZWVkc1RlbXBvcmFsU1MoKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLm5lZWRzVGVtcG9yYWxTUyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZW5hYmxlVGVtcG9yYWxTUyA9IHRoaXMuX2VuYWJsZVRlbXBvcmFsU1M7XG4gICAgaWYgKGVuYWJsZVRlbXBvcmFsU1MgPT09ICdhdXRvJykge1xuICAgICAgICBlbmFibGVUZW1wb3JhbFNTID0gdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbiAgICB9XG4gICAgcmV0dXJuIGVuYWJsZVRlbXBvcmFsU1M7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5oYXNET0YgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZURPRjtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLmlzQWNjdW11bGF0ZUZpbmlzaGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBmcmFtZSA9IHRoaXMuX2ZyYW1lO1xuICAgIHJldHVybiAhKHRoaXMubmVlZHNUZW1wb3JhbFNTKCkgJiYgIXRoaXMuX3RlbXBvcmFsU1MuaXNGaW5pc2hlZChmcmFtZSkpXG4gICAgICAgICYmICEodGhpcy5fY29tcG9zaXRvciAmJiAhdGhpcy5fY29tcG9zaXRvci5pc1NTQU9GaW5pc2hlZChmcmFtZSkpXG4gICAgICAgICYmICEodGhpcy5fY29tcG9zaXRvciAmJiAhdGhpcy5fY29tcG9zaXRvci5pc1NTUkZpbmlzaGVkKGZyYW1lKSlcbiAgICAgICAgJiYgISh0aGlzLl9jb21wb3NpdG9yICYmIGZyYW1lIDwgMzApO1xufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuX2RvUmVuZGVyID0gZnVuY3Rpb24gKHNjZW5lLCBjYW1lcmEsIGFjY3VtdWxhdGluZywgYWNjdW1GcmFtZSkge1xuXG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5yZW5kZXJlcjtcblxuICAgIGFjY3VtRnJhbWUgPSBhY2N1bUZyYW1lIHx8IDA7XG5cbiAgICBpZiAoIWFjY3VtdWxhdGluZyAmJiB0aGlzLl9zaGFkb3dNYXBQYXNzKSB7XG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3Mua2VybmVsUENGID0gdGhpcy5fcGNmS2VybmVsc1swXTtcbiAgICAgICAgLy8gTm90IHJlbmRlciBzaGFkb3dtYXAgcGFzcyBpbiBhY2N1bXVsYXRpbmcgZnJhbWUuXG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3MucmVuZGVyKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB0cnVlKTtcbiAgICB9XG5cbiAgICB0aGlzLl91cGRhdGVTaGFkb3dQQ0ZLZXJuZWwoc2NlbmUsIGNhbWVyYSwgYWNjdW1GcmFtZSk7XG5cbiAgICAvLyBTaGFkb3dtYXAgd2lsbCBzZXQgY2xlYXJDb2xvci5cbiAgICByZW5kZXJlci5nbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDAuMCk7XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlUG9zdEVmZmVjdCkge1xuICAgICAgICAvLyBub3JtYWwgcmVuZGVyIGFsc28gbmVlZHMgdG8gYmUgaml0dGVyZWQgd2hlbiBoYXZlIGVkZ2UgcGFzcy5cbiAgICAgICAgaWYgKHRoaXMubmVlZHNUZW1wb3JhbFNTKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBvcmFsU1Muaml0dGVyUHJvamVjdGlvbihyZW5kZXJlciwgY2FtZXJhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnVwZGF0ZUdCdWZmZXIocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHRoaXMuX3RlbXBvcmFsU1MuZ2V0RnJhbWUoKSk7XG4gICAgfVxuXG4gICAgLy8gQWx3YXlzIHVwZGF0ZSBTU0FPIHRvIG1ha2Ugc3VyZSBoYXZlIGNvcnJlY3Qgc3Nhb01hcCBzdGF0dXNcbiAgICAvLyBUT0RPIFRSQU5TUEFSRU5UIE9CSkVDVFMuXG4gICAgdGhpcy5fdXBkYXRlU1NBTyhyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgYWNjdW11bGF0aW5nID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpIDogMCk7XG5cbiAgICB2YXIgZnJhbWVCdWZmZXI7XG5cbiAgICB2YXIgbmVlZFRlbXBvcmFsUGFzcyA9IHRoaXMubmVlZHNUZW1wb3JhbFNTKCkgJiYgKHRoaXMuX3RlbXBvcmFsU3VwcG9ydER5bmFtaWMgfHwgYWNjdW11bGF0aW5nKTtcbiAgICB2YXIgbmVlZFBvc3RFZmZlY3QgPSB0aGlzLl9lbmFibGVQb3N0RWZmZWN0O1xuXG4gICAgaWYgKCFuZWVkVGVtcG9yYWxQYXNzICYmICFuZWVkUG9zdEVmZmVjdCkge1xuICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSwgdHJ1ZSwgdGhpcy5wcmVaKTtcbiAgICAgICAgdGhpcy5hZnRlclJlbmRlclNjZW5lKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciBpc1NTUkVuYWJsZWQgPSB0aGlzLl9jb21wb3NpdG9yLmlzU1NSRW5hYmxlZCgpO1xuXG4gICAgICAgIHZhciBzb3VyY2VUZXggPSB0aGlzLl9zb3VyY2VUZXg7XG4gICAgICAgIHZhciBkZXB0aFRleCA9IHRoaXMuX2RlcHRoVGV4O1xuICAgICAgICB2YXIgZnJhbWVCdWZmZXIgPSB0aGlzLl9mcmFtZWJ1ZmZlcjtcbiAgICAgICAgZGVwdGhUZXgud2lkdGggPSBzb3VyY2VUZXgud2lkdGggPSByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICBkZXB0aFRleC5oZWlnaHQgPSBzb3VyY2VUZXguaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgZnJhbWVCdWZmZXIuYXR0YWNoKHNvdXJjZVRleCk7XG4gICAgICAgIGZyYW1lQnVmZmVyLmF0dGFjaChkZXB0aFRleCwgRnJhbWVCdWZmZXIuREVQVEhfQVRUQUNITUVOVCk7XG4gICAgICAgIGZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICByZW5kZXJlci5nbC5jbGVhcihyZW5kZXJlci5nbC5ERVBUSF9CVUZGRVJfQklUIHwgcmVuZGVyZXIuZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhLCB0cnVlLCB0aGlzLnByZVopO1xuICAgICAgICB0aGlzLmFmdGVyUmVuZGVyU2NlbmUocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuICAgICAgICBmcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuXG4gICAgICAgIGlmIChpc1NTUkVuYWJsZWQgJiYgbmVlZFBvc3RFZmZlY3QpIHtcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2l0b3IudXBkYXRlU1NSKFxuICAgICAgICAgICAgICAgIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLFxuICAgICAgICAgICAgICAgIHNvdXJjZVRleCxcbiAgICAgICAgICAgICAgICAvLyBUT0RPIHJlcHJvamVjdGlvblxuICAgICAgICAgICAgICAgIHNvdXJjZVRleCxcbiAgICAgICAgICAgICAgICAvLyBuZWVkVGVtcG9yYWxQYXNzID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRUYXJnZXRUZXh0dXJlKCkgOiBzb3VyY2VUZXgsXG4gICAgICAgICAgICAgICAgdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgc291cmNlVGV4ID0gdGhpcy5fY29tcG9zaXRvci5nZXRTU1JUZXh0dXJlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobmVlZFRlbXBvcmFsUGFzcykge1xuICAgICAgICAgICAgdmFyIGRpcmVjdE91dHB1dCA9ICFuZWVkUG9zdEVmZmVjdDtcbiAgICAgICAgICAgIHRoaXMuX3RlbXBvcmFsU1MucmVuZGVyKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleCwgYWNjdW11bGF0aW5nLCBkaXJlY3RPdXRwdXQpO1xuICAgICAgICAgICAgc291cmNlVGV4ID0gdGhpcy5fdGVtcG9yYWxTUy5nZXRUYXJnZXRUZXh0dXJlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5lZWRQb3N0RWZmZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9jb21wb3NpdG9yLmNvbXBvc2l0ZShcbiAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgc291cmNlVGV4LCBkZXB0aFRleCxcbiAgICAgICAgICAgICAgICBuZWVkVGVtcG9yYWxQYXNzID8gdGhpcy5fdGVtcG9yYWxTUy5nZXRGcmFtZSgpIDogMCxcbiAgICAgICAgICAgICAgICBhY2N1bXVsYXRpbmdcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmFmdGVyUmVuZGVyQWxsKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLl91cGRhdGVTUkdCT2ZMaXN0ID0gZnVuY3Rpb24gKGxpc3QpIHtcbiAgICB2YXIgaXNMaW5lYXJTcGFjZSA9IHRoaXMuaXNMaW5lYXJTcGFjZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBsaXN0W2ldLm1hdGVyaWFsW2lzTGluZWFyU3BhY2UgPyAnZGVmaW5lJyA6ICd1bmRlZmluZSddKCdmcmFnbWVudCcsICdTUkdCX0RFQ09ERScpO1xuICAgIH07XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5hZnRlclJlbmRlclNjZW5lID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7fTtcblJlbmRlck1haW4ucHJvdG90eXBlLmFmdGVyUmVuZGVyQWxsID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKSB7fTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuX3VwZGF0ZVNTQU8gPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGZyYW1lKSB7XG4gICAgdmFyIGlmRW5hYmxlU1NBTyA9IHRoaXMuX2VuYWJsZVNTQU8gJiYgdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbiAgICB2YXIgY29tcG9zaXRvciA9IHRoaXMuX2NvbXBvc2l0b3I7XG4gICAgaWYgKGlmRW5hYmxlU1NBTykge1xuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnVwZGF0ZVNTQU8ocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHRoaXMuX3RlbXBvcmFsU1MuZ2V0RnJhbWUoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlUXVldWUocXVldWUpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHJlbmRlcmFibGUgPSBxdWV1ZVtpXTtcbiAgICAgICAgICAgIHJlbmRlcmFibGUubWF0ZXJpYWxbaWZFbmFibGVTU0FPID8gJ2VuYWJsZVRleHR1cmUnIDogJ2Rpc2FibGVUZXh0dXJlJ10oJ3NzYW9NYXAnKTtcbiAgICAgICAgICAgIGlmIChpZkVuYWJsZVNTQU8pIHtcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlLm1hdGVyaWFsLnNldCgnc3Nhb01hcCcsIGNvbXBvc2l0b3IuZ2V0U1NBT1RleHR1cmUoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlUXVldWUoc2NlbmUuZ2V0UmVuZGVyTGlzdChjYW1lcmEpLm9wYXF1ZSk7XG4gICAgdXBkYXRlUXVldWUoc2NlbmUuZ2V0UmVuZGVyTGlzdChjYW1lcmEpLnRyYW5zcGFyZW50KTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLl91cGRhdGVTaGFkb3dQQ0ZLZXJuZWwgPSBmdW5jdGlvbiAoc2NlbmUsIGNhbWVyYSwgZnJhbWUpIHtcbiAgICB2YXIgcGNmS2VybmVsID0gdGhpcy5fcGNmS2VybmVsc1tmcmFtZSAlIHRoaXMuX3BjZktlcm5lbHMubGVuZ3RoXTtcbiAgICBmdW5jdGlvbiB1cGRhdGVRdWV1ZShxdWV1ZSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocXVldWVbaV0ucmVjZWl2ZVNoYWRvdykge1xuICAgICAgICAgICAgICAgIHF1ZXVlW2ldLm1hdGVyaWFsLnNldCgncGNmS2VybmVsJywgcGNmS2VybmVsKTtcbiAgICAgICAgICAgICAgICBpZiAocXVldWVbaV0ubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcXVldWVbaV0ubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdQQ0ZfS0VSTkVMX1NJWkUnLCBwY2ZLZXJuZWwubGVuZ3RoIC8gMik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXVlKHNjZW5lLmdldFJlbmRlckxpc3QoY2FtZXJhKS5vcGFxdWUpO1xuICAgIHVwZGF0ZVF1ZXVlKHNjZW5lLmdldFJlbmRlckxpc3QoY2FtZXJhKS50cmFuc3BhcmVudCk7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5kaXNwb3NlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgdGhpcy5fY29tcG9zaXRvci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl90ZW1wb3JhbFNTLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIGlmICh0aGlzLl9zaGFkb3dNYXBQYXNzKSB7XG4gICAgICAgIHRoaXMuX3NoYWRvd01hcFBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgfVxuICAgIHJlbmRlcmVyLmRpc3Bvc2UoKTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnNldFBvc3RFZmZlY3QgPSBmdW5jdGlvbiAob3B0cywgYXBpKSB7XG4gICAgdmFyIGNvbXBvc2l0b3IgPSB0aGlzLl9jb21wb3NpdG9yO1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QgPSAhIW9wdHMuZW5hYmxlO1xuICAgIHZhciBibG9vbU9wdHMgPSBvcHRzLmJsb29tIHx8IHt9O1xuICAgIHZhciBlZGdlT3B0cyA9IG9wdHMuZWRnZSB8fCB7fTtcbiAgICB2YXIgZG9mT3B0cyA9IG9wdHMuZGVwdGhPZkZpZWxkIHx8IHt9O1xuICAgIHZhciBzc2FvT3B0cyA9IG9wdHMuc2NyZWVuU3BhY2VBbWJpZW50T2NjbHVzaW9uIHx8IHt9O1xuICAgIHZhciBzc3JPcHRzID0gb3B0cy5zY3JlZW5TcGFjZVJlZmxlY3Rpb24gfHwge307XG4gICAgdmFyIGZ4YWFPcHRzID0gb3B0cy5GWEFBIHx8IHt9O1xuICAgIHZhciBjb2xvckNvcnJPcHRzID0gb3B0cy5jb2xvckNvcnJlY3Rpb24gfHwge307XG4gICAgYmxvb21PcHRzLmVuYWJsZSA/IGNvbXBvc2l0b3IuZW5hYmxlQmxvb20oKSA6IGNvbXBvc2l0b3IuZGlzYWJsZUJsb29tKCk7XG4gICAgZG9mT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZURPRigpIDogY29tcG9zaXRvci5kaXNhYmxlRE9GKCk7XG4gICAgc3NyT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZVNTUigpIDogY29tcG9zaXRvci5kaXNhYmxlU1NSKCk7XG4gICAgY29sb3JDb3JyT3B0cy5lbmFibGUgPyBjb21wb3NpdG9yLmVuYWJsZUNvbG9yQ29ycmVjdGlvbigpIDogY29tcG9zaXRvci5kaXNhYmxlQ29sb3JDb3JyZWN0aW9uKCk7XG4gICAgZWRnZU9wdHMuZW5hYmxlID8gY29tcG9zaXRvci5lbmFibGVFZGdlKCkgOiBjb21wb3NpdG9yLmRpc2FibGVFZGdlKCk7XG4gICAgZnhhYU9wdHMuZW5hYmxlID8gY29tcG9zaXRvci5lbmFibGVGWEFBKCkgOiBjb21wb3NpdG9yLmRpc2FibGVGWEFBKCk7XG5cbiAgICB0aGlzLl9lbmFibGVET0YgPSBkb2ZPcHRzLmVuYWJsZTtcbiAgICB0aGlzLl9lbmFibGVTU0FPID0gc3Nhb09wdHMuZW5hYmxlO1xuXG4gICAgdGhpcy5fZW5hYmxlU1NBTyA/IGNvbXBvc2l0b3IuZW5hYmxlU1NBTygpIDogY29tcG9zaXRvci5kaXNhYmxlU1NBTygpO1xuXG4gICAgY29tcG9zaXRvci5zZXRCbG9vbUludGVuc2l0eShibG9vbU9wdHMuaW50ZW5zaXR5KTtcbiAgICBjb21wb3NpdG9yLnNldEVkZ2VDb2xvcihlZGdlT3B0cy5jb2xvcik7XG4gICAgY29tcG9zaXRvci5zZXRDb2xvckxvb2t1cFRleHR1cmUoY29sb3JDb3JyT3B0cy5sb29rdXBUZXh0dXJlLCBhcGkpO1xuICAgIGNvbXBvc2l0b3Iuc2V0RXhwb3N1cmUoY29sb3JDb3JyT3B0cy5leHBvc3VyZSk7XG5cbiAgICBbJ3JhZGl1cycsICdxdWFsaXR5JywgJ2ludGVuc2l0eScsICd0ZW1wb3JhbEZpbHRlciddLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgY29tcG9zaXRvci5zZXRTU0FPUGFyYW1ldGVyKG5hbWUsIHNzYW9PcHRzW25hbWVdKTtcbiAgICB9KTtcbiAgICBbJ3F1YWxpdHknLCAnbWF4Um91Z2huZXNzJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBjb21wb3NpdG9yLnNldFNTUlBhcmFtZXRlcihuYW1lLCBzc3JPcHRzW25hbWVdKTtcbiAgICB9KTtcbiAgICBbJ3F1YWxpdHknLCAnZm9jYWxEaXN0YW5jZScsICdmb2NhbFJhbmdlJywgJ2JsdXJSYWRpdXMnLCAnYXBlcnR1cmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIGNvbXBvc2l0b3Iuc2V0RE9GUGFyYW1ldGVyKG5hbWUsIGRvZk9wdHNbbmFtZV0pO1xuICAgIH0pO1xuICAgIFsnYnJpZ2h0bmVzcycsICdjb250cmFzdCcsICdzYXR1cmF0aW9uJ10uZm9yRWFjaChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICBjb21wb3NpdG9yLnNldENvbG9yQ29ycmVjdGlvbihuYW1lLCBjb2xvckNvcnJPcHRzW25hbWVdKTtcbiAgICB9KTtcbn07XG5cblJlbmRlck1haW4ucHJvdG90eXBlLnNldFNoYWRvdyA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgdmFyIHBjZktlcm5lbHMgPSBbXTtcbiAgICB2YXIgb2ZmID0gMDtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICAgICAgdmFyIHBjZktlcm5lbCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IG9wdHMua2VybmVsU2l6ZTsgaysrKSB7XG4gICAgICAgICAgICBwY2ZLZXJuZWwucHVzaCgoaGFsdG9uKG9mZiwgMikgKiAyLjAgLSAxLjApICogb3B0cy5ibHVyU2l6ZSk7XG4gICAgICAgICAgICBwY2ZLZXJuZWwucHVzaCgoaGFsdG9uKG9mZiwgMykgKiAyLjAgLSAxLjApICogb3B0cy5ibHVyU2l6ZSk7XG4gICAgICAgICAgICBvZmYrKztcbiAgICAgICAgfVxuICAgICAgICBwY2ZLZXJuZWxzLnB1c2gocGNmS2VybmVsKTtcbiAgICB9XG4gICAgdGhpcy5fcGNmS2VybmVscyA9IHBjZktlcm5lbHM7XG59O1xuXG5SZW5kZXJNYWluLnByb3RvdHlwZS5pc0RPRkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QgJiYgdGhpcy5fZW5hYmxlRE9GO1xufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuc2V0RE9GRm9jdXNPblBvaW50ID0gZnVuY3Rpb24gKGRlcHRoKSB7XG4gICAgaWYgKHRoaXMuX2VuYWJsZVBvc3RFZmZlY3QpIHtcblxuICAgICAgICBpZiAoZGVwdGggPiB0aGlzLmNhbWVyYS5mYXIgfHwgZGVwdGggPCB0aGlzLmNhbWVyYS5uZWFyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jb21wb3NpdG9yLnNldERPRlBhcmFtZXRlcignZm9jYWxEaXN0YW5jZScsIGRlcHRoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuc2V0VGVtcG9yYWxTdXBlclNhbXBsaW5nID0gZnVuY3Rpb24gKHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCkge1xuICAgIHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCA9IHRlbXBvcmFsU3VwZXJTYW1wbGluZ09wdCB8fCB7fTtcbiAgICB0aGlzLl9lbmFibGVUZW1wb3JhbFNTID0gdGVtcG9yYWxTdXBlclNhbXBsaW5nT3B0LmVuYWJsZTtcbiAgICB0aGlzLl90ZW1wb3JhbFN1cHBvcnREeW5hbWljID0gdGVtcG9yYWxTdXBlclNhbXBsaW5nT3B0LmR5bmFtaWM7XG5cbiAgICBpZiAodGhpcy5fZW5hYmxlVGVtcG9yYWxTUyAmJiB0aGlzLl90ZW1wb3JhbFN1cHBvcnREeW5hbWljKSB7XG4gICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZW5hYmxlVmVsb2NpdHlCdWZmZXIoKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHRoaXMuX2NvbXBvc2l0b3IuZGlzYWJsZVZlbG9jaXR5QnVmZmVyKCk7XG4gICAgfVxufTtcblxuUmVuZGVyTWFpbi5wcm90b3R5cGUuaXNMaW5lYXJTcGFjZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZW5hYmxlUG9zdEVmZmVjdDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFJlbmRlck1haW47XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9SZW5kZXJNYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAxMjVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///125\n");

/***/ }),
/* 126 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n// 1D Blend clip of blend tree\n// http://docs.unity3d.com/Documentation/Manual/1DBlending.html\n\n\n\nvar clipSortFunc = function (a, b) {\n    return a.position < b.position;\n};\n\n/**\n * @typedef {Object} clay.animation.Blend1DClip.IClipInput\n * @property {number} position\n * @property {clay.animation.Clip} clip\n * @property {number} offset\n */\n\n/**\n * 1d blending node in animation blend tree.\n * output clip must have blend1D and copy method\n * @constructor\n * @alias clay.animation.Blend1DClip\n * @extends clay.animation.Clip\n *\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {object[]} [opts.inputs]\n * @param {number} [opts.position]\n * @param {clay.animation.Clip} [opts.output]\n */\nvar Blend1DClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n    /**\n     * Output clip must have blend1D and copy method\n     * @type {clay.animation.Clip}\n     */\n    this.output = opts.output || null;\n    /**\n     * @type {clay.animation.Blend1DClip.IClipInput[]}\n     */\n    this.inputs = opts.inputs || [];\n    /**\n     * @type {number}\n     */\n    this.position = 0;\n\n    this._cacheKey = 0;\n    this._cachePosition = -Infinity;\n\n    this.inputs.sort(clipSortFunc);\n};\n\nBlend1DClip.prototype = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]();\nBlend1DClip.prototype.constructor = Blend1DClip;\n\n/**\n * @param {number} position\n * @param {clay.animation.Clip} inputClip\n * @param {number} [offset]\n * @return {clay.animation.Blend1DClip.IClipInput}\n */\nBlend1DClip.prototype.addInput = function (position, inputClip, offset) {\n    var obj = {\n        position: position,\n        clip: inputClip,\n        offset: offset || 0\n    };\n    this.life = Math.max(inputClip.life, this.life);\n\n    if (!this.inputs.length) {\n        this.inputs.push(obj);\n        return obj;\n    }\n    var len = this.inputs.length;\n    if (this.inputs[0].position > position) {\n        this.inputs.unshift(obj);\n    } else if (this.inputs[len - 1].position <= position) {\n        this.inputs.push(obj);\n    } else {\n        var key = this._findKey(position);\n        this.inputs.splice(key, obj);\n    }\n\n    return obj;\n};\n\nBlend1DClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time);\n\n    if (ret !== 'finish') {\n        this.setTime(this.getElapsedTime());\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n    return ret;\n};\n\nBlend1DClip.prototype.setTime = function (time) {\n    var position = this.position;\n    var inputs = this.inputs;\n    var len = inputs.length;\n    var min = inputs[0].position;\n    var max = inputs[len-1].position;\n\n    if (position <= min || position >= max) {\n        var in0 = position <= min ? inputs[0] : inputs[len-1];\n        var clip = in0.clip;\n        var offset = in0.offset;\n        clip.setTime((time + offset) % clip.life);\n        // Input clip is a blend clip\n        // PENDING\n        if (clip.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]) {\n            this.output.copy(clip.output);\n        } else {\n            this.output.copy(clip);\n        }\n    } else {\n        var key = this._findKey(position);\n        var in1 = inputs[key];\n        var in2 = inputs[key + 1];\n        var clip1 = in1.clip;\n        var clip2 = in2.clip;\n        // Set time on input clips\n        clip1.setTime((time + in1.offset) % clip1.life);\n        clip2.setTime((time + in2.offset) % clip2.life);\n\n        var w = (this.position - in1.position) / (in2.position - in1.position);\n\n        var c1 = clip1.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip1.output : clip1;\n        var c2 = clip2.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip2.output : clip2;\n        this.output.blend1D(c1, c2, w);\n    }\n};\n\n/**\n * Clone a new Blend1D clip\n * @param {boolean} cloneInputs True if clone the input clips\n * @return {clay.animation.Blend1DClip}\n */\nBlend1DClip.prototype.clone = function (cloneInputs) {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    clip.output = this.output.clone();\n    for (var i = 0; i < this.inputs.length; i++) {\n        var inputClip = cloneInputs ? this.inputs[i].clip.clone(true) : this.inputs[i].clip;\n        clip.addInput(this.inputs[i].position, inputClip, this.inputs[i].offset);\n    }\n    return clip;\n};\n\n// Find the key where position in range [inputs[key].position, inputs[key+1].position)\nBlend1DClip.prototype._findKey = function (position) {\n    var key = -1;\n    var inputs = this.inputs;\n    var len = inputs.length;\n    if (this._cachePosition < position) {\n        for (var i = this._cacheKey; i < len-1; i++) {\n            if (position >= inputs[i].position && position < inputs[i+1].position) {\n                key = i;\n            }\n        }\n    } else {\n        var s = Math.min(len-2, this._cacheKey);\n        for (var i = s; i >= 0; i--) {\n            if (position >= inputs[i].position && position < inputs[i+1].position) {\n                key = i;\n            }\n        }\n    }\n    if (key >= 0) {\n        this._cacheKey = key;\n        this._cachePosition = position;\n    }\n\n    return key;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Blend1DClip);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vQmxlbmQxRENsaXAuanM/MjRiNyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAxRCBCbGVuZCBjbGlwIG9mIGJsZW5kIHRyZWVcbi8vIGh0dHA6Ly9kb2NzLnVuaXR5M2QuY29tL0RvY3VtZW50YXRpb24vTWFudWFsLzFEQmxlbmRpbmcuaHRtbFxuXG5pbXBvcnQgQ2xpcCBmcm9tICcuL0NsaXAnO1xuXG52YXIgY2xpcFNvcnRGdW5jID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICByZXR1cm4gYS5wb3NpdGlvbiA8IGIucG9zaXRpb247XG59O1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IGNsYXkuYW5pbWF0aW9uLkJsZW5kMURDbGlwLklDbGlwSW5wdXRcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBwb3NpdGlvblxuICogQHByb3BlcnR5IHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBjbGlwXG4gKiBAcHJvcGVydHkge251bWJlcn0gb2Zmc2V0XG4gKi9cblxuLyoqXG4gKiAxZCBibGVuZGluZyBub2RlIGluIGFuaW1hdGlvbiBibGVuZCB0cmVlLlxuICogb3V0cHV0IGNsaXAgbXVzdCBoYXZlIGJsZW5kMUQgYW5kIGNvcHkgbWV0aG9kXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFuaW1hdGlvbi5CbGVuZDFEQ2xpcFxuICogQGV4dGVuZHMgY2xheS5hbmltYXRpb24uQ2xpcFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5uYW1lXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLnRhcmdldF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5saWZlXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlbGF5XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmdhcF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5wbGF5YmFja1JhdGlvXVxuICogQHBhcmFtIHtib29sZWFufG51bWJlcn0gW29wdHMubG9vcF0gSWYgbG9vcCBpcyBhIG51bWJlciwgaXQgaW5kaWNhdGUgdGhlIGxvb3AgY291bnQgb2YgYW5pbWF0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ3xGdW5jdGlvbn0gW29wdHMuZWFzaW5nXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25mcmFtZV1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtvcHRzLm9uZmluaXNoXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25yZXN0YXJ0XVxuICogQHBhcmFtIHtvYmplY3RbXX0gW29wdHMuaW5wdXRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnBvc2l0aW9uXVxuICogQHBhcmFtIHtjbGF5LmFuaW1hdGlvbi5DbGlwfSBbb3B0cy5vdXRwdXRdXG4gKi9cbnZhciBCbGVuZDFEQ2xpcCA9IGZ1bmN0aW9uIChvcHRzKSB7XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIENsaXAuY2FsbCh0aGlzLCBvcHRzKTtcbiAgICAvKipcbiAgICAgKiBPdXRwdXQgY2xpcCBtdXN0IGhhdmUgYmxlbmQxRCBhbmQgY29weSBtZXRob2RcbiAgICAgKiBAdHlwZSB7Y2xheS5hbmltYXRpb24uQ2xpcH1cbiAgICAgKi9cbiAgICB0aGlzLm91dHB1dCA9IG9wdHMub3V0cHV0IHx8IG51bGw7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuYW5pbWF0aW9uLkJsZW5kMURDbGlwLklDbGlwSW5wdXRbXX1cbiAgICAgKi9cbiAgICB0aGlzLmlucHV0cyA9IG9wdHMuaW5wdXRzIHx8IFtdO1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgdGhpcy5wb3NpdGlvbiA9IDA7XG5cbiAgICB0aGlzLl9jYWNoZUtleSA9IDA7XG4gICAgdGhpcy5fY2FjaGVQb3NpdGlvbiA9IC1JbmZpbml0eTtcblxuICAgIHRoaXMuaW5wdXRzLnNvcnQoY2xpcFNvcnRGdW5jKTtcbn07XG5cbkJsZW5kMURDbGlwLnByb3RvdHlwZSA9IG5ldyBDbGlwKCk7XG5CbGVuZDFEQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCbGVuZDFEQ2xpcDtcblxuLyoqXG4gKiBAcGFyYW0ge251bWJlcn0gcG9zaXRpb25cbiAqIEBwYXJhbSB7Y2xheS5hbmltYXRpb24uQ2xpcH0gaW5wdXRDbGlwXG4gKiBAcGFyYW0ge251bWJlcn0gW29mZnNldF1cbiAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkJsZW5kMURDbGlwLklDbGlwSW5wdXR9XG4gKi9cbkJsZW5kMURDbGlwLnByb3RvdHlwZS5hZGRJbnB1dCA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgaW5wdXRDbGlwLCBvZmZzZXQpIHtcbiAgICB2YXIgb2JqID0ge1xuICAgICAgICBwb3NpdGlvbjogcG9zaXRpb24sXG4gICAgICAgIGNsaXA6IGlucHV0Q2xpcCxcbiAgICAgICAgb2Zmc2V0OiBvZmZzZXQgfHwgMFxuICAgIH07XG4gICAgdGhpcy5saWZlID0gTWF0aC5tYXgoaW5wdXRDbGlwLmxpZmUsIHRoaXMubGlmZSk7XG5cbiAgICBpZiAoIXRoaXMuaW5wdXRzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmlucHV0cy5wdXNoKG9iaik7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfVxuICAgIHZhciBsZW4gPSB0aGlzLmlucHV0cy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuaW5wdXRzWzBdLnBvc2l0aW9uID4gcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5pbnB1dHMudW5zaGlmdChvYmopO1xuICAgIH0gZWxzZSBpZiAodGhpcy5pbnB1dHNbbGVuIC0gMV0ucG9zaXRpb24gPD0gcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5pbnB1dHMucHVzaChvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLl9maW5kS2V5KHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5pbnB1dHMuc3BsaWNlKGtleSwgb2JqKTtcbiAgICB9XG5cbiAgICByZXR1cm4gb2JqO1xufTtcblxuQmxlbmQxRENsaXAucHJvdG90eXBlLnN0ZXAgPSBmdW5jdGlvbiAodGltZSwgZFRpbWUsIHNpbGVudCkge1xuXG4gICAgdmFyIHJldCA9IENsaXAucHJvdG90eXBlLnN0ZXAuY2FsbCh0aGlzLCB0aW1lKTtcblxuICAgIGlmIChyZXQgIT09ICdmaW5pc2gnKSB7XG4gICAgICAgIHRoaXMuc2V0VGltZSh0aGlzLmdldEVsYXBzZWRUaW1lKCkpO1xuICAgIH1cblxuICAgIC8vIFBFTkRJTkcgU2NoZWR1bGVcbiAgICBpZiAoIXNpbGVudCAmJiByZXQgIT09ICdwYXVzZWQnKSB7XG4gICAgICAgIHRoaXMuZmlyZSgnZnJhbWUnKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn07XG5cbkJsZW5kMURDbGlwLnByb3RvdHlwZS5zZXRUaW1lID0gZnVuY3Rpb24gKHRpbWUpIHtcbiAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uO1xuICAgIHZhciBpbnB1dHMgPSB0aGlzLmlucHV0cztcbiAgICB2YXIgbGVuID0gaW5wdXRzLmxlbmd0aDtcbiAgICB2YXIgbWluID0gaW5wdXRzWzBdLnBvc2l0aW9uO1xuICAgIHZhciBtYXggPSBpbnB1dHNbbGVuLTFdLnBvc2l0aW9uO1xuXG4gICAgaWYgKHBvc2l0aW9uIDw9IG1pbiB8fCBwb3NpdGlvbiA+PSBtYXgpIHtcbiAgICAgICAgdmFyIGluMCA9IHBvc2l0aW9uIDw9IG1pbiA/IGlucHV0c1swXSA6IGlucHV0c1tsZW4tMV07XG4gICAgICAgIHZhciBjbGlwID0gaW4wLmNsaXA7XG4gICAgICAgIHZhciBvZmZzZXQgPSBpbjAub2Zmc2V0O1xuICAgICAgICBjbGlwLnNldFRpbWUoKHRpbWUgKyBvZmZzZXQpICUgY2xpcC5saWZlKTtcbiAgICAgICAgLy8gSW5wdXQgY2xpcCBpcyBhIGJsZW5kIGNsaXBcbiAgICAgICAgLy8gUEVORElOR1xuICAgICAgICBpZiAoY2xpcC5vdXRwdXQgaW5zdGFuY2VvZiBDbGlwKSB7XG4gICAgICAgICAgICB0aGlzLm91dHB1dC5jb3B5KGNsaXAub3V0cHV0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3V0cHV0LmNvcHkoY2xpcCk7XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIga2V5ID0gdGhpcy5fZmluZEtleShwb3NpdGlvbik7XG4gICAgICAgIHZhciBpbjEgPSBpbnB1dHNba2V5XTtcbiAgICAgICAgdmFyIGluMiA9IGlucHV0c1trZXkgKyAxXTtcbiAgICAgICAgdmFyIGNsaXAxID0gaW4xLmNsaXA7XG4gICAgICAgIHZhciBjbGlwMiA9IGluMi5jbGlwO1xuICAgICAgICAvLyBTZXQgdGltZSBvbiBpbnB1dCBjbGlwc1xuICAgICAgICBjbGlwMS5zZXRUaW1lKCh0aW1lICsgaW4xLm9mZnNldCkgJSBjbGlwMS5saWZlKTtcbiAgICAgICAgY2xpcDIuc2V0VGltZSgodGltZSArIGluMi5vZmZzZXQpICUgY2xpcDIubGlmZSk7XG5cbiAgICAgICAgdmFyIHcgPSAodGhpcy5wb3NpdGlvbiAtIGluMS5wb3NpdGlvbikgLyAoaW4yLnBvc2l0aW9uIC0gaW4xLnBvc2l0aW9uKTtcblxuICAgICAgICB2YXIgYzEgPSBjbGlwMS5vdXRwdXQgaW5zdGFuY2VvZiBDbGlwID8gY2xpcDEub3V0cHV0IDogY2xpcDE7XG4gICAgICAgIHZhciBjMiA9IGNsaXAyLm91dHB1dCBpbnN0YW5jZW9mIENsaXAgPyBjbGlwMi5vdXRwdXQgOiBjbGlwMjtcbiAgICAgICAgdGhpcy5vdXRwdXQuYmxlbmQxRChjMSwgYzIsIHcpO1xuICAgIH1cbn07XG5cbi8qKlxuICogQ2xvbmUgYSBuZXcgQmxlbmQxRCBjbGlwXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNsb25lSW5wdXRzIFRydWUgaWYgY2xvbmUgdGhlIGlucHV0IGNsaXBzXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5CbGVuZDFEQ2xpcH1cbiAqL1xuQmxlbmQxRENsaXAucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24gKGNsb25lSW5wdXRzKSB7XG4gICAgdmFyIGNsaXAgPSBDbGlwLnByb3RvdHlwZS5jbG9uZS5jYWxsKHRoaXMpO1xuICAgIGNsaXAub3V0cHV0ID0gdGhpcy5vdXRwdXQuY2xvbmUoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5wdXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBpbnB1dENsaXAgPSBjbG9uZUlucHV0cyA/IHRoaXMuaW5wdXRzW2ldLmNsaXAuY2xvbmUodHJ1ZSkgOiB0aGlzLmlucHV0c1tpXS5jbGlwO1xuICAgICAgICBjbGlwLmFkZElucHV0KHRoaXMuaW5wdXRzW2ldLnBvc2l0aW9uLCBpbnB1dENsaXAsIHRoaXMuaW5wdXRzW2ldLm9mZnNldCk7XG4gICAgfVxuICAgIHJldHVybiBjbGlwO1xufTtcblxuLy8gRmluZCB0aGUga2V5IHdoZXJlIHBvc2l0aW9uIGluIHJhbmdlIFtpbnB1dHNba2V5XS5wb3NpdGlvbiwgaW5wdXRzW2tleSsxXS5wb3NpdGlvbilcbkJsZW5kMURDbGlwLnByb3RvdHlwZS5fZmluZEtleSA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgIHZhciBrZXkgPSAtMTtcbiAgICB2YXIgaW5wdXRzID0gdGhpcy5pbnB1dHM7XG4gICAgdmFyIGxlbiA9IGlucHV0cy5sZW5ndGg7XG4gICAgaWYgKHRoaXMuX2NhY2hlUG9zaXRpb24gPCBwb3NpdGlvbikge1xuICAgICAgICBmb3IgKHZhciBpID0gdGhpcy5fY2FjaGVLZXk7IGkgPCBsZW4tMTsgaSsrKSB7XG4gICAgICAgICAgICBpZiAocG9zaXRpb24gPj0gaW5wdXRzW2ldLnBvc2l0aW9uICYmIHBvc2l0aW9uIDwgaW5wdXRzW2krMV0ucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBrZXkgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHMgPSBNYXRoLm1pbihsZW4tMiwgdGhpcy5fY2FjaGVLZXkpO1xuICAgICAgICBmb3IgKHZhciBpID0gczsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGlmIChwb3NpdGlvbiA+PSBpbnB1dHNbaV0ucG9zaXRpb24gJiYgcG9zaXRpb24gPCBpbnB1dHNbaSsxXS5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIGtleSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGtleSA+PSAwKSB7XG4gICAgICAgIHRoaXMuX2NhY2hlS2V5ID0ga2V5O1xuICAgICAgICB0aGlzLl9jYWNoZVBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgfVxuXG4gICAgcmV0dXJuIGtleTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJsZW5kMURDbGlwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vQmxlbmQxRENsaXAuanNcbi8vIG1vZHVsZSBpZCA9IDEyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///126\n");

/***/ }),
/* 127 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Clip__ = __webpack_require__(30);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util_delaunay__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector2__ = __webpack_require__(26);\n// 2D Blend clip of blend tree\n// http://docs.unity3d.com/Documentation/Manual/2DBlending.html\n\n\n\n\n/**\n * @typedef {Object} clay.animation.Blend2DClip.IClipInput\n * @property {clay.Vector2} position\n * @property {clay.animation.Clip} clip\n * @property {number} offset\n */\n\n/**\n * 2d blending node in animation blend tree.\n * output clip must have blend2D method\n * @constructor\n * @alias clay.animation.Blend2DClip\n * @extends clay.animation.Clip\n *\n * @param {Object} [opts]\n * @param {string} [opts.name]\n * @param {Object} [opts.target]\n * @param {number} [opts.life]\n * @param {number} [opts.delay]\n * @param {number} [opts.gap]\n * @param {number} [opts.playbackRatio]\n * @param {boolean|number} [opts.loop] If loop is a number, it indicate the loop count of animation\n * @param {string|Function} [opts.easing]\n * @param {Function} [opts.onframe]\n * @param {Function} [opts.onfinish]\n * @param {Function} [opts.onrestart]\n * @param {object[]} [opts.inputs]\n * @param {clay.Vector2} [opts.position]\n * @param {clay.animation.Clip} [opts.output]\n */\nvar Blend2DClip = function (opts) {\n\n    opts = opts || {};\n\n    __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].call(this, opts);\n    /**\n     * Output clip must have blend2D method\n     * @type {clay.animation.Clip}\n     */\n    this.output = opts.output || null;\n    /**\n     * @type {clay.animation.Blend2DClip.IClipInput[]}\n     */\n    this.inputs = opts.inputs || [];\n    /**\n     * @type {clay.Vector2}\n     */\n    this.position = new __WEBPACK_IMPORTED_MODULE_2__math_Vector2__[\"a\" /* default */]();\n\n    this._cacheTriangle = null;\n\n    this._triangles = [];\n\n    this._updateTriangles();\n};\n\nBlend2DClip.prototype = new __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */]();\nBlend2DClip.prototype.constructor = Blend2DClip;\n/**\n * @param {clay.Vector2} position\n * @param {clay.animation.Clip} inputClip\n * @param {number} [offset]\n * @return {clay.animation.Blend2DClip.IClipInput}\n */\nBlend2DClip.prototype.addInput = function (position, inputClip, offset) {\n    var obj = {\n        position : position,\n        clip : inputClip,\n        offset : offset || 0\n    };\n    this.inputs.push(obj);\n    this.life = Math.max(inputClip.life, this.life);\n    // TODO Change to incrementally adding\n    this._updateTriangles();\n\n    return obj;\n};\n\n// Delaunay triangulate\nBlend2DClip.prototype._updateTriangles = function () {\n    var inputs = this.inputs.map(function (a) {\n        return a.position;\n    });\n    this._triangles = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].triangulate(inputs, 'array');\n};\n\nBlend2DClip.prototype.step = function (time, dTime, silent) {\n\n    var ret = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.step.call(this, time);\n\n    if (ret !== 'finish') {\n        this.setTime(this.getElapsedTime());\n    }\n\n    // PENDING Schedule\n    if (!silent && ret !== 'paused') {\n        this.fire('frame');\n    }\n    return ret;\n};\n\nBlend2DClip.prototype.setTime = function (time) {\n    var res = this._findTriangle(this.position);\n    if (!res) {\n        return;\n    }\n    // In Barycentric\n    var a = res[1]; // Percent of clip2\n    var b = res[2]; // Percent of clip3\n\n    var tri = res[0];\n\n    var in1 = this.inputs[tri.indices[0]];\n    var in2 = this.inputs[tri.indices[1]];\n    var in3 = this.inputs[tri.indices[2]];\n    var clip1 = in1.clip;\n    var clip2 = in2.clip;\n    var clip3 = in3.clip;\n\n    clip1.setTime((time + in1.offset) % clip1.life);\n    clip2.setTime((time + in2.offset) % clip2.life);\n    clip3.setTime((time + in3.offset) % clip3.life);\n\n    var c1 = clip1.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip1.output : clip1;\n    var c2 = clip2.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip2.output : clip2;\n    var c3 = clip3.output instanceof __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */] ? clip3.output : clip3;\n\n    this.output.blend2D(c1, c2, c3, a, b);\n};\n\n/**\n * Clone a new Blend2D clip\n * @param {boolean} cloneInputs True if clone the input clips\n * @return {clay.animation.Blend2DClip}\n */\nBlend2DClip.prototype.clone = function (cloneInputs) {\n    var clip = __WEBPACK_IMPORTED_MODULE_0__Clip__[\"a\" /* default */].prototype.clone.call(this);\n    clip.output = this.output.clone();\n    for (var i = 0; i < this.inputs.length; i++) {\n        var inputClip = cloneInputs ? this.inputs[i].clip.clone(true) : this.inputs[i].clip;\n        clip.addInput(this.inputs[i].position, inputClip, this.inputs[i].offset);\n    }\n    return clip;\n};\n\nBlend2DClip.prototype._findTriangle = function (position) {\n    if (this._cacheTriangle) {\n        var res = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].contains(this._cacheTriangle.vertices, position.array);\n        if (res) {\n            return [this._cacheTriangle, res[0], res[1]];\n        }\n    }\n    for (var i = 0; i < this._triangles.length; i++) {\n        var tri = this._triangles[i];\n        var res = __WEBPACK_IMPORTED_MODULE_1__util_delaunay__[\"a\" /* default */].contains(tri.vertices, this.position.array);\n        if (res) {\n            this._cacheTriangle = tri;\n            return [tri, res[0], res[1]];\n        }\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Blend2DClip);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vQmxlbmQyRENsaXAuanM/YzAyNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyAyRCBCbGVuZCBjbGlwIG9mIGJsZW5kIHRyZWVcbi8vIGh0dHA6Ly9kb2NzLnVuaXR5M2QuY29tL0RvY3VtZW50YXRpb24vTWFudWFsLzJEQmxlbmRpbmcuaHRtbFxuaW1wb3J0IENsaXAgZnJvbSAnLi9DbGlwJztcbmltcG9ydCBkZWxhdW5heSBmcm9tICcuLi91dGlsL2RlbGF1bmF5JztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uL21hdGgvVmVjdG9yMic7XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gY2xheS5hbmltYXRpb24uQmxlbmQyRENsaXAuSUNsaXBJbnB1dFxuICogQHByb3BlcnR5IHtjbGF5LlZlY3RvcjJ9IHBvc2l0aW9uXG4gKiBAcHJvcGVydHkge2NsYXkuYW5pbWF0aW9uLkNsaXB9IGNsaXBcbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBvZmZzZXRcbiAqL1xuXG4vKipcbiAqIDJkIGJsZW5kaW5nIG5vZGUgaW4gYW5pbWF0aW9uIGJsZW5kIHRyZWUuXG4gKiBvdXRwdXQgY2xpcCBtdXN0IGhhdmUgYmxlbmQyRCBtZXRob2RcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkuYW5pbWF0aW9uLkJsZW5kMkRDbGlwXG4gKiBAZXh0ZW5kcyBjbGF5LmFuaW1hdGlvbi5DbGlwXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtzdHJpbmd9IFtvcHRzLm5hbWVdXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMudGFyZ2V0XVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmxpZmVdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZGVsYXldXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZ2FwXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnBsYXliYWNrUmF0aW9dXG4gKiBAcGFyYW0ge2Jvb2xlYW58bnVtYmVyfSBbb3B0cy5sb29wXSBJZiBsb29wIGlzIGEgbnVtYmVyLCBpdCBpbmRpY2F0ZSB0aGUgbG9vcCBjb3VudCBvZiBhbmltYXRpb25cbiAqIEBwYXJhbSB7c3RyaW5nfEZ1bmN0aW9ufSBbb3B0cy5lYXNpbmddXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbmZyYW1lXVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW29wdHMub25maW5pc2hdXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbb3B0cy5vbnJlc3RhcnRdXG4gKiBAcGFyYW0ge29iamVjdFtdfSBbb3B0cy5pbnB1dHNdXG4gKiBAcGFyYW0ge2NsYXkuVmVjdG9yMn0gW29wdHMucG9zaXRpb25dXG4gKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLkNsaXB9IFtvcHRzLm91dHB1dF1cbiAqL1xudmFyIEJsZW5kMkRDbGlwID0gZnVuY3Rpb24gKG9wdHMpIHtcblxuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuXG4gICAgQ2xpcC5jYWxsKHRoaXMsIG9wdHMpO1xuICAgIC8qKlxuICAgICAqIE91dHB1dCBjbGlwIG11c3QgaGF2ZSBibGVuZDJEIG1ldGhvZFxuICAgICAqIEB0eXBlIHtjbGF5LmFuaW1hdGlvbi5DbGlwfVxuICAgICAqL1xuICAgIHRoaXMub3V0cHV0ID0gb3B0cy5vdXRwdXQgfHwgbnVsbDtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5hbmltYXRpb24uQmxlbmQyRENsaXAuSUNsaXBJbnB1dFtdfVxuICAgICAqL1xuICAgIHRoaXMuaW5wdXRzID0gb3B0cy5pbnB1dHMgfHwgW107XG4gICAgLyoqXG4gICAgICogQHR5cGUge2NsYXkuVmVjdG9yMn1cbiAgICAgKi9cbiAgICB0aGlzLnBvc2l0aW9uID0gbmV3IFZlY3RvcjIoKTtcblxuICAgIHRoaXMuX2NhY2hlVHJpYW5nbGUgPSBudWxsO1xuXG4gICAgdGhpcy5fdHJpYW5nbGVzID0gW107XG5cbiAgICB0aGlzLl91cGRhdGVUcmlhbmdsZXMoKTtcbn07XG5cbkJsZW5kMkRDbGlwLnByb3RvdHlwZSA9IG5ldyBDbGlwKCk7XG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCbGVuZDJEQ2xpcDtcbi8qKlxuICogQHBhcmFtIHtjbGF5LlZlY3RvcjJ9IHBvc2l0aW9uXG4gKiBAcGFyYW0ge2NsYXkuYW5pbWF0aW9uLkNsaXB9IGlucHV0Q2xpcFxuICogQHBhcmFtIHtudW1iZXJ9IFtvZmZzZXRdXG4gKiBAcmV0dXJuIHtjbGF5LmFuaW1hdGlvbi5CbGVuZDJEQ2xpcC5JQ2xpcElucHV0fVxuICovXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuYWRkSW5wdXQgPSBmdW5jdGlvbiAocG9zaXRpb24sIGlucHV0Q2xpcCwgb2Zmc2V0KSB7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgICAgcG9zaXRpb24gOiBwb3NpdGlvbixcbiAgICAgICAgY2xpcCA6IGlucHV0Q2xpcCxcbiAgICAgICAgb2Zmc2V0IDogb2Zmc2V0IHx8IDBcbiAgICB9O1xuICAgIHRoaXMuaW5wdXRzLnB1c2gob2JqKTtcbiAgICB0aGlzLmxpZmUgPSBNYXRoLm1heChpbnB1dENsaXAubGlmZSwgdGhpcy5saWZlKTtcbiAgICAvLyBUT0RPIENoYW5nZSB0byBpbmNyZW1lbnRhbGx5IGFkZGluZ1xuICAgIHRoaXMuX3VwZGF0ZVRyaWFuZ2xlcygpO1xuXG4gICAgcmV0dXJuIG9iajtcbn07XG5cbi8vIERlbGF1bmF5IHRyaWFuZ3VsYXRlXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuX3VwZGF0ZVRyaWFuZ2xlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5wdXRzID0gdGhpcy5pbnB1dHMubWFwKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBhLnBvc2l0aW9uO1xuICAgIH0pO1xuICAgIHRoaXMuX3RyaWFuZ2xlcyA9IGRlbGF1bmF5LnRyaWFuZ3VsYXRlKGlucHV0cywgJ2FycmF5Jyk7XG59O1xuXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuc3RlcCA9IGZ1bmN0aW9uICh0aW1lLCBkVGltZSwgc2lsZW50KSB7XG5cbiAgICB2YXIgcmV0ID0gQ2xpcC5wcm90b3R5cGUuc3RlcC5jYWxsKHRoaXMsIHRpbWUpO1xuXG4gICAgaWYgKHJldCAhPT0gJ2ZpbmlzaCcpIHtcbiAgICAgICAgdGhpcy5zZXRUaW1lKHRoaXMuZ2V0RWxhcHNlZFRpbWUoKSk7XG4gICAgfVxuXG4gICAgLy8gUEVORElORyBTY2hlZHVsZVxuICAgIGlmICghc2lsZW50ICYmIHJldCAhPT0gJ3BhdXNlZCcpIHtcbiAgICAgICAgdGhpcy5maXJlKCdmcmFtZScpO1xuICAgIH1cbiAgICByZXR1cm4gcmV0O1xufTtcblxuQmxlbmQyRENsaXAucHJvdG90eXBlLnNldFRpbWUgPSBmdW5jdGlvbiAodGltZSkge1xuICAgIHZhciByZXMgPSB0aGlzLl9maW5kVHJpYW5nbGUodGhpcy5wb3NpdGlvbik7XG4gICAgaWYgKCFyZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJbiBCYXJ5Y2VudHJpY1xuICAgIHZhciBhID0gcmVzWzFdOyAvLyBQZXJjZW50IG9mIGNsaXAyXG4gICAgdmFyIGIgPSByZXNbMl07IC8vIFBlcmNlbnQgb2YgY2xpcDNcblxuICAgIHZhciB0cmkgPSByZXNbMF07XG5cbiAgICB2YXIgaW4xID0gdGhpcy5pbnB1dHNbdHJpLmluZGljZXNbMF1dO1xuICAgIHZhciBpbjIgPSB0aGlzLmlucHV0c1t0cmkuaW5kaWNlc1sxXV07XG4gICAgdmFyIGluMyA9IHRoaXMuaW5wdXRzW3RyaS5pbmRpY2VzWzJdXTtcbiAgICB2YXIgY2xpcDEgPSBpbjEuY2xpcDtcbiAgICB2YXIgY2xpcDIgPSBpbjIuY2xpcDtcbiAgICB2YXIgY2xpcDMgPSBpbjMuY2xpcDtcblxuICAgIGNsaXAxLnNldFRpbWUoKHRpbWUgKyBpbjEub2Zmc2V0KSAlIGNsaXAxLmxpZmUpO1xuICAgIGNsaXAyLnNldFRpbWUoKHRpbWUgKyBpbjIub2Zmc2V0KSAlIGNsaXAyLmxpZmUpO1xuICAgIGNsaXAzLnNldFRpbWUoKHRpbWUgKyBpbjMub2Zmc2V0KSAlIGNsaXAzLmxpZmUpO1xuXG4gICAgdmFyIGMxID0gY2xpcDEub3V0cHV0IGluc3RhbmNlb2YgQ2xpcCA/IGNsaXAxLm91dHB1dCA6IGNsaXAxO1xuICAgIHZhciBjMiA9IGNsaXAyLm91dHB1dCBpbnN0YW5jZW9mIENsaXAgPyBjbGlwMi5vdXRwdXQgOiBjbGlwMjtcbiAgICB2YXIgYzMgPSBjbGlwMy5vdXRwdXQgaW5zdGFuY2VvZiBDbGlwID8gY2xpcDMub3V0cHV0IDogY2xpcDM7XG5cbiAgICB0aGlzLm91dHB1dC5ibGVuZDJEKGMxLCBjMiwgYzMsIGEsIGIpO1xufTtcblxuLyoqXG4gKiBDbG9uZSBhIG5ldyBCbGVuZDJEIGNsaXBcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gY2xvbmVJbnB1dHMgVHJ1ZSBpZiBjbG9uZSB0aGUgaW5wdXQgY2xpcHNcbiAqIEByZXR1cm4ge2NsYXkuYW5pbWF0aW9uLkJsZW5kMkRDbGlwfVxuICovXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoY2xvbmVJbnB1dHMpIHtcbiAgICB2YXIgY2xpcCA9IENsaXAucHJvdG90eXBlLmNsb25lLmNhbGwodGhpcyk7XG4gICAgY2xpcC5vdXRwdXQgPSB0aGlzLm91dHB1dC5jbG9uZSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5pbnB1dHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIGlucHV0Q2xpcCA9IGNsb25lSW5wdXRzID8gdGhpcy5pbnB1dHNbaV0uY2xpcC5jbG9uZSh0cnVlKSA6IHRoaXMuaW5wdXRzW2ldLmNsaXA7XG4gICAgICAgIGNsaXAuYWRkSW5wdXQodGhpcy5pbnB1dHNbaV0ucG9zaXRpb24sIGlucHV0Q2xpcCwgdGhpcy5pbnB1dHNbaV0ub2Zmc2V0KTtcbiAgICB9XG4gICAgcmV0dXJuIGNsaXA7XG59O1xuXG5CbGVuZDJEQ2xpcC5wcm90b3R5cGUuX2ZpbmRUcmlhbmdsZSA9IGZ1bmN0aW9uIChwb3NpdGlvbikge1xuICAgIGlmICh0aGlzLl9jYWNoZVRyaWFuZ2xlKSB7XG4gICAgICAgIHZhciByZXMgPSBkZWxhdW5heS5jb250YWlucyh0aGlzLl9jYWNoZVRyaWFuZ2xlLnZlcnRpY2VzLCBwb3NpdGlvbi5hcnJheSk7XG4gICAgICAgIGlmIChyZXMpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5fY2FjaGVUcmlhbmdsZSwgcmVzWzBdLCByZXNbMV1dO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdHJpYW5nbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciB0cmkgPSB0aGlzLl90cmlhbmdsZXNbaV07XG4gICAgICAgIHZhciByZXMgPSBkZWxhdW5heS5jb250YWlucyh0cmkudmVydGljZXMsIHRoaXMucG9zaXRpb24uYXJyYXkpO1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICB0aGlzLl9jYWNoZVRyaWFuZ2xlID0gdHJpO1xuICAgICAgICAgICAgcmV0dXJuIFt0cmksIHJlc1swXSwgcmVzWzFdXTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IEJsZW5kMkRDbGlwO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vQmxlbmQyRENsaXAuanNcbi8vIG1vZHVsZSBpZCA9IDEyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///127\n");

/***/ }),
/* 128 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Timeline__ = __webpack_require__(46);\n// DEPRECATED\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__Timeline__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hbmltYXRpb24vVGltZWxpbmUuanM/ZjdkMyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBERVBSRUNBVEVEXG5pbXBvcnQgVGltZWxpbmUgZnJvbSAnLi4vVGltZWxpbmUnO1xuZXhwb3J0IGRlZmF1bHQgVGltZWxpbmU7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2FuaW1hdGlvbi9UaW1lbGluZS5qc1xuLy8gbW9kdWxlIGlkID0gMTI4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///128\n");

/***/ }),
/* 129 */
/***/ (function(module, exports) {

eval("var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcz8zNjk4Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBnO1xyXG5cclxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcclxuZyA9IChmdW5jdGlvbigpIHtcclxuXHRyZXR1cm4gdGhpcztcclxufSkoKTtcclxuXHJcbnRyeSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXHJcblx0ZyA9IGcgfHwgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpIHx8ICgxLGV2YWwpKFwidGhpc1wiKTtcclxufSBjYXRjaChlKSB7XHJcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcclxuXHRpZih0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKVxyXG5cdFx0ZyA9IHdpbmRvdztcclxufVxyXG5cclxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxyXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xyXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGc7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vICh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qc1xuLy8gbW9kdWxlIGlkID0gMTI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///129\n");

/***/ }),
/* 130 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderer__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Scene__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Timeline__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__geometry_Plane__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__geometry_ParametricSurface__ = __webpack_require__(80);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__TextureCube__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__camera_Orthographic__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__loader_GLTF__ = __webpack_require__(81);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__light_Directional__ = __webpack_require__(88);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__light_Point__ = __webpack_require__(89);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__light_Spot__ = __webpack_require__(90);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__light_Ambient__ = __webpack_require__(91);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__light_AmbientCubemap__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__light_AmbientSH__ = __webpack_require__(96);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__prePass_ShadowMap__ = __webpack_require__(97);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__picking_RayPicking__ = __webpack_require__(98);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__core_LRU__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__util_sh__ = __webpack_require__(99);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__util_texture__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__core_color__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__shader_builtin__ = __webpack_require__(85);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__Shader__ = __webpack_require__(6);\n\n/**\n * Helpers for creating a common 3d application.\n * @namespace clay.application\n */\n\n // TODO createCompositor\n // TODO Dispose test. geoCache test.\n // TODO Tonemapping exposure\n // TODO fitModel.\n // TODO Particle ?\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar parseColor = __WEBPACK_IMPORTED_MODULE_30__core_color__[\"a\" /* default */].parseToFloat;\n\n\n\n\n\nvar EVE_NAMES = ['click', 'dblclick', 'mouseover', 'mouseout', 'mousemove',\n    'touchstart', 'touchend', 'touchmove',\n    'mousewheel', 'DOMMouseScroll'\n];\n\n/**\n * @typedef {string|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} ImageLike\n */\n/**\n * @typedef {string|HTMLCanvasElement|HTMLImageElement|HTMLVideoElement|clay.Texture2D} TextureLike\n */\n/**\n * @typedef {string|Array.<number>} Color\n */\n/**\n * @typedef {HTMLElement|string} DomQuery\n */\n\n\n/**\n * @typedef {Object} GLAttributes\n * @param {boolean} [alpha=true]\n * @param {boolean} [depth=true]\n * @param {boolean} [stencil=true]\n * @param {boolean} [antialias=true]\n * @param {boolean} [premultipliedAlpha=true]\n * @param {boolean} [preserveDrawingBuffer=false]\n */\n\n/**\n * @typedef {Object} App3DNamespace\n * @property {Function} init Initialization callback that will be called when initing app.\n *                      You can return a promise in init to start the loop asynchronously when the promise is resolved.\n * @property {Function} loop Loop callback that will be called each frame.\n * @property {boolean} [autoRender=true] If render automatically each frame.\n * @property {Function} [beforeRender]\n * @property {Function} [afterRender]\n * @property {number} [width] Container width.\n * @property {number} [height] Container height.\n * @property {number} [devicePixelRatio]\n * @property {GLAttributes} [glAttributes] Attributes for creating gl context\n * @property {Object.<string, Function>} [methods] Methods that will be injected to App3D#methods.\n * @property {Object} [graphic] Graphic configuration including shadow, color space.\n * @property {boolean} [graphic.shadow=false] If enable shadow\n * @property {boolean} [graphic.linear=false] If use linear color space\n * @property {boolean} [graphic.tonemapping=false] If enable ACES tone mapping.\n * @property {boolean} [event=false] If enable mouse/touch event. It will slow down the system if geometries are complex.\n */\n\n/**\n * @typedef {Object} StandardMaterialMRConfig\n * @property {string} [name]\n * @property {string} [shader='standardMR']\n * @property {Color} [color]\n * @property {number} [alpha]\n * @property {number} [metalness]\n * @property {number} [roughness]\n * @property {Color} [emission]\n * @property {number} [emissionIntensity]\n * @property {boolean} [transparent]\n * @property {TextureLike} [diffuseMap]\n * @property {TextureLike} [normalMap]\n * @property {TextureLike} [roughnessMap]\n * @property {TextureLike} [metalnessMap]\n * @property {TextureLike} [emissiveMap]\n */\n\n/**\n * Using App3D is a much more convenient way to create and manage your 3D application.\n *\n * It provides the abilities to:\n *\n * + Manage application loop and rendering.\n * + Collect GPU resource automatically without memory leak concern.\n * + Mouse event management.\n * + Create scene objects, materials, textures with simpler code.\n * + Load models with one line of code.\n * + Promised interfaces.\n *\n * Here is a basic example to create a rotating cube.\n *\n```js\nvar app = clay.application.create('#viewport', {\n    init: function (app) {\n        // Create a perspective camera.\n        // First parameter is the camera position. Which is in front of the cube.\n        // Second parameter is the camera lookAt target. Which is the origin of the world, and where the cube puts.\n        this._camera = app.createCamera([0, 2, 5], [0, 0, 0]);\n        // Create a sample cube\n        this._cube = app.createCube();\n        // Create a directional light. The direction is from top right to left bottom, away from camera.\n        this._mainLight = app.createDirectionalLight([-1, -1, -1]);\n    },\n    loop: function (app) {\n        // Simply rotating the cube every frame.\n        this._cube.rotation.rotateY(app.frameTime / 1000);\n    }\n});\n```\n * @constructor\n * @alias clay.application.App3D\n * @param {DomQuery} dom Container dom element or a selector string that can be used in `querySelector`\n * @param {App3DNamespace} appNS Options and namespace used in creating app3D\n */\nfunction App3D(dom, appNS) {\n\n    appNS = appNS || {};\n    appNS.graphic = appNS.graphic || {};\n\n    appNS.glAttributes = appNS.glAttributes || {};\n\n    if (appNS.autoRender == null) {\n        appNS.autoRender = true;\n    }\n\n    if (typeof dom === 'string') {\n        dom = document.querySelector(dom);\n    }\n\n    if (!dom) { throw new Error('Invalid dom'); }\n\n    var isDomCanvas = !dom.nodeName  // Not in dom environment\n        || dom.nodeName.toUpperCase() === 'CANVAS';\n\n    var rendererOpts = {};\n    isDomCanvas && (rendererOpts.canvas = dom);\n    appNS.devicePixelRatio && (rendererOpts.devicePixelRatio = appNS.devicePixelRatio);\n\n    [\n        'alpha', 'depth', 'stencil', 'antialias', 'premultipliedAlpha', 'preserveDrawingBuffer'\n    ].forEach(function (attrName) {\n        if (appNS.glAttributes[attrName] != null) {\n            rendererOpts[attrName] = appNS.glAttributes[attrName];\n        }\n    });\n\n    var gRenderer = new __WEBPACK_IMPORTED_MODULE_0__Renderer__[\"a\" /* default */](rendererOpts);\n    var gWidth = appNS.width || dom.clientWidth;\n    var gHeight = appNS.height || dom.clientHeight;\n\n    var gScene = new __WEBPACK_IMPORTED_MODULE_1__Scene__[\"a\" /* default */]();\n    var gTimeline = new __WEBPACK_IMPORTED_MODULE_2__Timeline__[\"a\" /* default */]();\n    var gShadowPass = appNS.graphic.shadow && new __WEBPACK_IMPORTED_MODULE_23__prePass_ShadowMap__[\"a\" /* default */]();\n    var gRayPicking = appNS.event && new __WEBPACK_IMPORTED_MODULE_24__picking_RayPicking__[\"a\" /* default */]({\n        scene: gScene,\n        renderer: gRenderer\n    });\n\n    !isDomCanvas && dom.appendChild(gRenderer.canvas);\n\n    gRenderer.resize(gWidth, gHeight);\n\n    var gFrameTime = 0;\n    var gElapsedTime = 0;\n\n    gTimeline.start();\n\n    var userMethods = {};\n    for (var key in appNS.methods) {\n        userMethods[key] = appNS.methods[key].bind(appNS, this);\n    }\n\n    Object.defineProperties(this, {\n        /**\n         * Container dom element\n         * @name clay.application.App3D#container\n         * @type {HTMLElement}\n         */\n        container: { get: function () { return dom; } },\n        /**\n         * @name clay.application.App3D#renderer\n         * @type {clay.Renderer}\n         */\n        renderer: { get: function () { return gRenderer; }},\n        /**\n         * @name clay.application.App3D#scene\n         * @type {clay.Renderer}\n         */\n        scene: { get: function () { return gScene; }},\n        /**\n         * @name clay.application.App3D#timeline\n         * @type {clay.Renderer}\n         */\n        timeline: { get: function () { return gTimeline; }},\n        /**\n         * Time elapsed since last frame. Can be used in loop to calculate the movement.\n         * @name clay.application.App3D#frameTime\n         * @type {number}\n         */\n        frameTime: { get: function () { return gFrameTime; }},\n        /**\n         * Time elapsed since application created.\n         * @name clay.application.App3D#elapsedTime\n         * @type {number}\n         */\n        elapsedTime: { get: function () { return gElapsedTime; }},\n\n        /**\n         * Width of viewport.\n         * @name clay.application.App3D#width\n         * @type {number}\n         */\n        width: { get: function () { return gRenderer.getWidth(); }},\n        /**\n         * Height of viewport.\n         * @name clay.application.App3D#height\n         * @type {number}\n         */\n        height: { get: function () { return gRenderer.getHeight(); }},\n\n        /**\n         * Methods from {@link clay.application.create}\n         * @name clay.application.App3D#methods\n         * @type {number}\n         */\n        methods: { get: function () { return userMethods; } },\n\n        _shadowPass: { get: function () { return gShadowPass; } },\n\n        _appNS: { get: function () { return appNS; } },\n    });\n\n    /**\n     * Resize the application. Will use the container clientWidth/clientHeight if width/height in parameters are not given.\n     * @function\n     * @memberOf {clay.application.App3D}\n     * @param {number} [width]\n     * @param {number} [height]\n     */\n    this.resize = function (width, height) {\n        gWidth = width || appNS.width || dom.clientWidth;\n        gHeight = height || dom.height || dom.clientHeight;\n        gRenderer.resize(gWidth, gHeight);\n    };\n\n    /**\n     * Dispose the application\n     * @function\n     */\n    this.dispose = function () {\n        this._disposed = true;\n\n        if (appNS.dispose) {\n            appNS.dispose(this);\n        }\n        gTimeline.stop();\n        gRenderer.disposeScene(gScene);\n        gShadowPass && gShadowPass.dispose(gRenderer);\n\n        dom.innerHTML = '';\n        EVE_NAMES.forEach(function (eveType) {\n            this[makeHandlerName(eveType)] && __WEBPACK_IMPORTED_MODULE_29__core_vendor__[\"a\" /* default */].removeEventListener(dom, makeHandlerName(eveType));\n        }, this);\n    };\n\n    gRayPicking && this._initMouseEvents(gRayPicking);\n\n    this._geoCache = new __WEBPACK_IMPORTED_MODULE_25__core_LRU__[\"a\" /* default */](20);\n    this._texCache = new __WEBPACK_IMPORTED_MODULE_25__core_LRU__[\"a\" /* default */](20);\n\n    // GPU Resources.\n    this._texturesList = {};\n    this._geometriesList = {};\n\n    // Do init the application.\n    var initPromise = Promise.resolve(appNS.init && appNS.init(this));\n    // Use the inited camera.\n    gRayPicking && (gRayPicking.camera = gScene.getMainCamera());\n\n    if (!appNS.loop) {\n        console.warn('Miss loop method.');\n    }\n\n    var self = this;\n    initPromise.then(function () {\n        gTimeline.on('frame', function (frameTime) {\n            gFrameTime = frameTime;\n            gElapsedTime += frameTime;\n\n            var camera = gScene.getMainCamera();\n            if (camera) {\n                camera.aspect = gRenderer.getViewportAspect();\n            }\n            gRayPicking && (gRayPicking.camera = camera);\n\n            appNS.loop && appNS.loop(self);\n\n            if (appNS.autoRender) {\n                self.render();\n            }\n\n            self.collectResources();\n        }, this);\n    });\n\n    gScene.on('beforerender', function (renderer, scene, camera, renderList) {\n        if (this._inRender) {\n            // Only update graphic options when using #render function.\n            this._updateGraphicOptions(appNS.graphic, renderList.opaque, false);\n            this._updateGraphicOptions(appNS.graphic, renderList.transparent, false);\n        }\n    }, this);\n}\n\nfunction isImageLikeElement(val) {\n    return (typeof Image !== 'undefined' && val instanceof Image)\n        || (typeof HTMLCanvasElement !== 'undefined' && val instanceof HTMLCanvasElement)\n        || (typeof HTMLVideoElement !== 'undefined' && val instanceof HTMLVideoElement);\n}\n\nfunction getKeyFromImageLike(val) {\n    return typeof val === 'string'\n        ? val : (val.__key__ || (val.__key__ = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].genGUID()));\n}\n\nfunction makeHandlerName(eveType) {\n    return '_' + eveType + 'Handler';\n}\n\nfunction packageEvent(eventType, pickResult, offsetX, offsetY, wheelDelta) {\n    var event = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].clone(pickResult);\n    event.type = eventType;\n    event.offsetX = offsetX;\n    event.offsetY = offsetY;\n    if (wheelDelta !== null) {\n        event.wheelDelta = wheelDelta;\n    }\n    return event;\n}\n\nfunction bubblingEvent(target, event) {\n    while (target && !event.cancelBubble) {\n        target.trigger(event.type, event);\n        target = target.getParent();\n    }\n}\n\nApp3D.prototype._initMouseEvents = function (rayPicking) {\n    var dom = this.container;\n\n    var oldTarget = null;\n    EVE_NAMES.forEach(function (_eveType) {\n        __WEBPACK_IMPORTED_MODULE_29__core_vendor__[\"a\" /* default */].addEventListener(dom, _eveType, this[makeHandlerName(_eveType)] = function (e) {\n            if (!rayPicking.camera) { // Not have camera yet.\n                return;\n            }\n            e.preventDefault && e.preventDefault();\n\n            var box = dom.getBoundingClientRect();\n            var offsetX, offsetY;\n            var eveType = _eveType;\n\n            if (eveType.indexOf('touch') >= 0) {\n                var touch = eveType !== 'touchend'\n                    ? e.targetTouches[0]\n                    : e.changedTouches[0];\n                if (eveType === 'touchstart') {\n                    eveType = 'mousedown';\n                }\n                else if (eveType === 'touchend') {\n                    eveType = 'mouseup';\n                }\n                else if (eveType === 'touchmove') {\n                    eveType = 'mousemove';\n                }\n                offsetX = touch.clientX - box.left;\n                offsetY = touch.clientY - box.top;\n            }\n            else {\n                offsetX = e.clientX - box.left;\n                offsetY = e.clientY - box.top;\n            }\n\n            var pickResult = rayPicking.pick(offsetX, offsetY);\n\n            var delta;\n            if (eveType === 'DOMMouseScroll' || eveType === 'mousewheel') {\n                delta = (e.wheelDelta) ? e.wheelDelta / 120 : -(e.detail || 0) / 3;\n            }\n\n            if (pickResult) {\n                // Just ignore silent element.\n                if (pickResult.target.silent) {\n                    return;\n                }\n\n                if (eveType === 'mousemove') {\n                    // PENDING touchdown should trigger mouseover event ?\n                    var targetChanged = pickResult.target !== oldTarget;\n                    if (targetChanged) {\n                        oldTarget && bubblingEvent(oldTarget, packageEvent('mouseout', {\n                            target: oldTarget\n                        }, offsetX, offsetY));\n                    }\n                    bubblingEvent(pickResult.target, packageEvent('mousemove', pickResult, offsetX, offsetY));\n                    if (targetChanged) {\n                        bubblingEvent(pickResult.target, packageEvent('mouseover', pickResult, offsetX, offsetY));\n                    }\n                }\n                else {\n                    bubblingEvent(pickResult.target, packageEvent(eveType, pickResult, offsetX, offsetY, delta));\n                }\n                oldTarget = pickResult.target;\n            }\n            else if (oldTarget) {\n                bubblingEvent(oldTarget, packageEvent('mouseout', {\n                    target: oldTarget\n                }, offsetX, offsetY));\n                oldTarget = null;\n            }\n        });\n    }, this);\n};\n\nApp3D.prototype._updateGraphicOptions = function (graphicOpts, list, isSkybox) {\n    var enableTonemapping = !!graphicOpts.tonemapping;\n    var isLinearSpace = !!graphicOpts.linear;\n\n    var prevMaterial;\n\n    for (var i = 0; i < list.length; i++) {\n        var mat = list[i].material;\n        if (mat === prevMaterial) {\n            continue;\n        }\n\n        enableTonemapping ? mat.define('fragment', 'TONEMAPPING') : mat.undefine('fragment', 'TONEMAPPING');\n        if (isLinearSpace) {\n            var decodeSRGB = true;\n            if (isSkybox && mat.get('environmentMap') && !mat.get('environmentMap').sRGB) {\n                decodeSRGB = false;\n            }\n            decodeSRGB && mat.define('fragment', 'SRGB_DECODE');\n            mat.define('fragment', 'SRGB_ENCODE');\n        }\n        else {\n            mat.undefine('fragment', 'SRGB_DECODE');\n            mat.undefine('fragment', 'SRGB_ENCODE');\n        }\n\n        prevMaterial = mat;\n    }\n};\n\nApp3D.prototype._doRender = function (renderer, scene) {\n    var camera = scene.getMainCamera();\n    renderer.render(scene, camera, true);\n};\n\n/**\n * Do render\n */\nApp3D.prototype.render = function () {\n    this._inRender = true;\n    var appNS = this._appNS;\n    appNS.beforeRender && appNS.beforeRender(self);\n\n    var scene = this.scene;\n    var renderer = this.renderer;\n    var shadowPass = this._shadowPass;\n\n    scene.update();\n    var skyboxList = [];\n    scene.skybox && skyboxList.push(scene.skybox);\n    scene.skydome && skyboxList.push(scene.skydome);\n\n    this._updateGraphicOptions(appNS.graphic, skyboxList, true);\n    // Render shadow pass\n    shadowPass && shadowPass.render(renderer, scene, null, true);\n\n    this._doRender(renderer, scene, true);\n\n    appNS.afterRender && appNS.afterRender(self);\n    this._inRender = false;\n};\n\nApp3D.prototype.collectResources = function () {\n    var renderer = this.renderer;\n    var scene = this.scene;\n    var texturesList = this._texturesList;\n    var geometriesList = this._geometriesList;\n    // Mark all resources unused;\n    markUnused(texturesList);\n    markUnused(geometriesList);\n\n    // Collect resources used in this frame.\n    var newTexturesList = [];\n    var newGeometriesList = [];\n    collectResources(scene, newTexturesList, newGeometriesList);\n\n    // Dispose those unsed resources.\n    checkAndDispose(renderer, texturesList);\n    checkAndDispose(renderer, geometriesList);\n\n    this._texturesList = newTexturesList;\n    this._geometriesList = newGeometriesList;\n};\n\n\nfunction markUnused(resourceList) {\n    for (var i = 0; i < resourceList.length; i++) {\n        resourceList[i].__used = 0;\n    }\n}\n\nfunction checkAndDispose(renderer, resourceList) {\n    for (var i = 0; i < resourceList.length; i++) {\n        if (!resourceList[i].__used) {\n            resourceList[i].dispose(renderer);\n        }\n    }\n}\n\nfunction updateUsed(resource, list) {\n    resource.__used = resource.__used || 0;\n    resource.__used++;\n    if (resource.__used === 1) {\n        // Don't push to the list twice.\n        list.push(resource);\n    }\n}\nfunction collectResources(scene, textureResourceList, geometryResourceList) {\n    var prevMaterial;\n    var prevGeometry;\n    scene.traverse(function (renderable) {\n        if (renderable.isRenderable()) {\n            var geometry = renderable.geometry;\n            var material = renderable.material;\n\n            // TODO optimize!!\n            if (material !== prevMaterial) {\n                var textureUniforms = material.getTextureUniforms();\n                for (var u = 0; u < textureUniforms.length; u++) {\n                    var uniformName = textureUniforms[u];\n                    var val = material.uniforms[uniformName].value;\n                    var uniformType = material.uniforms[uniformName].type;\n                    if (!val) {\n                        continue;\n                    }\n                    if (uniformType === 't') {\n                        updateUsed(val, textureResourceList);\n                    }\n                    else if (uniformType === 'tv') {\n                        for (var k = 0; k < val.length; k++) {\n                            if (val[k]) {\n                                updateUsed(val[k], textureResourceList);\n                            }\n                        }\n                    }\n                }\n            }\n            if (geometry !== prevGeometry) {\n                updateUsed(geometry, geometryResourceList);\n            }\n\n            prevMaterial = material;\n            prevGeometry = geometry;\n        }\n    });\n\n    for (var k = 0; k < scene.lights.length; k++) {\n        // Track AmbientCubemap\n        if (scene.lights[k].cubemap) {\n            updateUsed(scene.lights[k].cubemap, textureResourceList);\n        }\n    }\n}\n/**\n * Load a texture from image or string.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=true] If flipY. See {@link clay.Texture.flipY}\n * @param {boolean} [opts.convertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {number} [opts.anisotropic] Anisotropic filtering. See {@link clay.Texture.anisotropic}\n * @param {number} [opts.wrapS=clay.Texture.REPEAT] See {@link clay.Texture.wrapS}\n * @param {number} [opts.wrapT=clay.Texture.REPEAT] See {@link clay.Texture.wrapT}\n * @param {number} [opts.minFilter=clay.Texture.LINEAR_MIPMAP_LINEAR] See {@link clay.Texture.minFilter}\n * @param {number} [opts.magFilter=clay.Texture.LINEAR] See {@link clay.Texture.magFilter}\n * @param {number} [opts.exposure] Only be used when source is a HDR image.\n * @param {boolean} [useCache] If use cache.\n * @return {Promise}\n * @example\n *  app.loadTexture('diffuseMap.jpg')\n *      .then(function (texture) {\n *          material.set('diffuseMap', texture);\n *      });\n */\nApp3D.prototype.loadTexture = function (urlOrImg, opts, useCache) {\n    var self = this;\n    var key = getKeyFromImageLike(urlOrImg);\n    if (useCache) {\n        if (this._texCache.get(key)) {\n            return this._texCache.get(key);\n        }\n    }\n    // TODO Promise ?\n    var promise = new Promise(function (resolve, reject) {\n        var texture = self.loadTextureSync(urlOrImg, opts);\n        if (!texture.isRenderable()) {\n            texture.success(function () {\n                if (self._disposed) {\n                    return;\n                }\n                resolve(texture);\n            });\n            texture.error(function () {\n                if (self._disposed) {\n                    return;\n                }\n                reject();\n            });\n        }\n        else {\n            resolve(texture);\n        }\n    });\n    if (useCache) {\n        this._texCache.put(key, promise);\n    }\n    return promise;\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=true] If flipY. See {@link clay.Texture.flipY}\n * @param {boolean} [opts.convertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {number} [opts.anisotropic] Anisotropic filtering. See {@link clay.Texture.anisotropic}\n * @param {number} [opts.wrapS=clay.Texture.REPEAT] See {@link clay.Texture.wrapS}\n * @param {number} [opts.wrapT=clay.Texture.REPEAT] See {@link clay.Texture.wrapT}\n * @param {number} [opts.minFilter=clay.Texture.LINEAR_MIPMAP_LINEAR] See {@link clay.Texture.minFilter}\n * @param {number} [opts.magFilter=clay.Texture.LINEAR] See {@link clay.Texture.magFilter}\n * @param {number} [opts.exposure] Only be used when source is a HDR image.\n * @return {clay.Texture2D}\n * @example\n *  var texture = app.loadTexture('diffuseMap.jpg', {\n *      anisotropic: 8,\n *      flipY: false\n *  });\n *  material.set('diffuseMap', texture);\n */\nApp3D.prototype.loadTextureSync = function (urlOrImg, opts) {\n    var texture = new __WEBPACK_IMPORTED_MODULE_7__Texture2D__[\"a\" /* default */](opts);\n    if (typeof urlOrImg === 'string') {\n        if (urlOrImg.match(/.hdr$|^data:application\\/octet-stream/)) {\n            texture = __WEBPACK_IMPORTED_MODULE_28__util_texture__[\"a\" /* default */].loadTexture(urlOrImg, {\n                exposure: opts && opts.exposure,\n                fileType: 'hdr'\n            }, function () {\n                texture.dirty();\n                texture.trigger('success');\n            });\n            for (var key in opts) {\n                texture[key] = opts[key];\n            }\n        }\n        else {\n            texture.load(urlOrImg);\n        }\n    }\n    else if (isImageLikeElement(urlOrImg)) {\n        texture.image = urlOrImg;\n        texture.dynamic = urlOrImg instanceof HTMLVideoElement;\n    }\n    return texture;\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=false] If flipY. See {@link clay.Texture.flipY}\n * @return {Promise}\n * @example\n *  app.loadTextureCube({\n *      px: 'skybox/px.jpg', py: 'skybox/py.jpg', pz: 'skybox/pz.jpg',\n *      nx: 'skybox/nx.jpg', ny: 'skybox/ny.jpg', nz: 'skybox/nz.jpg'\n *  }).then(function (texture) {\n *      skybox.setEnvironmentMap(texture);\n *  })\n */\nApp3D.prototype.loadTextureCube = function (imgList, opts) {\n    var textureCube = this.loadTextureCubeSync(imgList, opts);\n    return new Promise(function (resolve, reject) {\n        if (textureCube.isRenderable()) {\n            resolve(textureCube);\n        }\n        else {\n            textureCube.success(function () {\n                resolve(textureCube);\n            }).error(function () {\n                reject();\n            });\n        }\n    });\n};\n\n/**\n * Create a texture from image or string synchronously. Texture can be use directly and don't have to wait for it's loaded.\n * @param {ImageLike} img\n * @param {Object} [opts] Texture options.\n * @param {boolean} [opts.flipY=false] If flipY. See {@link clay.Texture.flipY}\n * @return {clay.TextureCube}\n * @example\n *  var texture = app.loadTextureCubeSync({\n *      px: 'skybox/px.jpg', py: 'skybox/py.jpg', pz: 'skybox/pz.jpg',\n *      nx: 'skybox/nx.jpg', ny: 'skybox/ny.jpg', nz: 'skybox/nz.jpg'\n *  });\n *  skybox.setEnvironmentMap(texture);\n */\nApp3D.prototype.loadTextureCubeSync = function (imgList, opts) {\n    opts = opts || {};\n    opts.flipY = opts.flipY || false;\n    var textureCube = new __WEBPACK_IMPORTED_MODULE_8__TextureCube__[\"a\" /* default */](opts);\n    if (!imgList || !imgList.px || !imgList.nx || !imgList.py || !imgList.ny || !imgList.pz || !imgList.nz) {\n        throw new Error('Invalid cubemap format. Should be an object including px,nx,py,ny,pz,nz');\n    }\n    if (typeof imgList.px === 'string') {\n        textureCube.load(imgList);\n    }\n    else {\n        textureCube.image = __WEBPACK_IMPORTED_MODULE_26__core_util__[\"a\" /* default */].clone(imgList);\n    }\n    return textureCube;\n};\n\n/**\n * Create a material.\n * @param {Object|StandardMaterialMRConfig} materialConfig. materialConfig contains `shader`, `transparent` and uniforms that used in corresponding uniforms.\n *                                 Uniforms can be `color`, `alpha` `diffuseMap` etc.\n * @param {string|clay.Shader} [shader='clay.standardMR'] Default to be standard shader with metalness and roughness workflow.\n * @param {boolean} [transparent=false] If material is transparent.\n * @param {boolean} [textureConvertToPOT=false] Force convert None Power of Two texture to Power of two so it can be tiled.\n * @param {boolean} [textureFlipY=true] If flip y of texture.\n * @param {Function} [textureLoaded] Callback when single texture loaded.\n * @param {Function} [texturesReady] Callback when all texture loaded.\n * @return {clay.Material}\n */\nApp3D.prototype.createMaterial = function (matConfig) {\n    matConfig = matConfig || {};\n    matConfig.shader = matConfig.shader || 'clay.standardMR';\n    var shader = matConfig.shader instanceof __WEBPACK_IMPORTED_MODULE_32__Shader__[\"a\" /* default */] ? matConfig.shader : __WEBPACK_IMPORTED_MODULE_31__shader_builtin__[\"a\" /* default */].get(matConfig.shader);\n    var material = new __WEBPACK_IMPORTED_MODULE_11__Material__[\"a\" /* default */]({\n        shader: shader\n    });\n    if (matConfig.name) {\n        material.name = matConfig.name;\n    }\n\n    var texturesLoading = [];\n    function makeTextureSetter(key) {\n        return function (texture) {\n            material.setUniform(key, texture);\n            matConfig.textureLoaded && matConfig.textureLoaded(key, texture);\n            return texture;\n        };\n    }\n    for (var key in matConfig) {\n        if (material.uniforms[key]) {\n            var val = matConfig[key];\n            if ((material.uniforms[key].type === 't' || isImageLikeElement(val))\n                && !(val instanceof __WEBPACK_IMPORTED_MODULE_9__Texture__[\"a\" /* default */])\n            ) {\n                // Try to load a texture.\n                texturesLoading.push(this.loadTexture(val, {\n                    convertToPOT: matConfig.textureConvertToPOT || false,\n                    flipY: matConfig.textureFlipY == null ? true : matConfig.textureFlipY\n                }).then(makeTextureSetter(key)));\n            }\n            else {\n                material.setUniform(key, val);\n            }\n        }\n    }\n\n    if (matConfig.transparent) {\n        matConfig.depthMask = false;\n        matConfig.transparent = true;\n    }\n\n\n    if (matConfig.texturesReady) {\n        Promise.all(texturesLoading).then(function (textures) {\n            matConfig.texturesReady(textures);\n        });\n    }\n\n    return material;\n};\n\n/**\n * Create a cube mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of cube.\n *          Can be a number to represent both width, height and depth dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a white cube.\n *  app.createCube()\n */\nApp3D.prototype.createCube = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv, subdiv];\n    }\n\n    var geoKey = 'cube-' + subdiv.join('-');\n    var cube = this._geoCache.get(geoKey);\n    if (!cube) {\n        cube = new __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__[\"a\" /* default */]({\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1],\n            depthSegments: subdiv[2]\n        });\n        cube.generateTangents();\n        this._geoCache.put(geoKey, cube);\n    }\n    return this.createMesh(cube, material, parentNode);\n};\n\n/**\n * Create a cube mesh that camera is inside the cube.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of cube.\n *          Can be a number to represent both width, height and depth dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a white cube inside.\n *  app.createCubeInside()\n */\nApp3D.prototype.createCubeInside = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv, subdiv];\n    }\n    var geoKey = 'cubeInside-' + subdiv.join('-');\n    var cube = this._geoCache.get(geoKey);\n    if (!cube) {\n        cube = new __WEBPACK_IMPORTED_MODULE_3__geometry_Cube__[\"a\" /* default */]({\n            inside: true,\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1],\n            depthSegments: subdiv[2]\n        });\n        cube.generateTangents();\n        this._geoCache.put(geoKey, cube);\n    }\n\n    return this.createMesh(cube, material, parentNode);\n};\n\n/**\n * Create a sphere mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {number} [subdivision=20] Subdivision of sphere.\n * @return {clay.Mesh}\n * @example\n *  // Create a semi-transparent sphere.\n *  app.createSphere({\n *      color: [0, 0, 1],\n *      transparent: true,\n *      alpha: 0.5\n *  })\n */\nApp3D.prototype.createSphere = function (material, parentNode, subdivision) {\n    if (subdivision == null) {\n        subdivision = 20;\n    }\n    var geoKey = 'sphere-' + subdivision;\n    var sphere = this._geoCache.get(geoKey);\n    if (!sphere) {\n        sphere = new __WEBPACK_IMPORTED_MODULE_4__geometry_Sphere__[\"a\" /* default */]({\n            widthSegments: subdivision * 2,\n            heightSegments: subdivision\n        });\n        sphere.generateTangents();\n        this._geoCache.put(geoKey, sphere);\n    }\n    return this.createMesh(sphere, material, parentNode);\n};\n\n// TODO may be modified?\n/**\n * Create a plane mesh and add it to the scene or the given parent node.\n * @function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Array.<number>|number} [subdivision=1] Subdivision of plane.\n *          Can be a number to represent both width and height dimensions. Or an array to represent them respectively.\n * @return {clay.Mesh}\n * @example\n *  // Create a red color plane.\n *  app.createPlane({\n *      color: [1, 0, 0]\n *  })\n */\nApp3D.prototype.createPlane = function (material, parentNode, subdiv) {\n    if (subdiv == null) {\n        subdiv = 1;\n    }\n    if (typeof subdiv === 'number') {\n        subdiv = [subdiv, subdiv];\n    }\n    var geoKey = 'plane-' + subdiv.join('-');\n    var planeGeo = this._geoCache.get(geoKey);\n    if (!planeGeo) {\n        planeGeo = new __WEBPACK_IMPORTED_MODULE_5__geometry_Plane__[\"a\" /* default */]({\n            widthSegments: subdiv[0],\n            heightSegments: subdiv[1]\n        });\n        planeGeo.generateTangents();\n        this._geoCache.put(geoKey, planeGeo);\n    }\n    return this.createMesh(planeGeo, material, parentNode);\n};\n\n/**\n * Create mesh with parametric surface function\n * @param {Object|clay.Material} [material]\n * @param {clay.Node} [parentNode] Parent node to append. Default to be scene.\n * @param {Object} generator\n * @param {Function} generator.x\n * @param {Function} generator.y\n * @param {Function} generator.z\n * @param {Array} [generator.u=[0, 1, 0.05]]\n * @param {Array} [generator.v=[0, 1, 0.05]]\n * @return {clay.Mesh}\n */\nApp3D.prototype.createParametricSurface = function (material, parentNode, generator) {\n    var geo = new __WEBPACK_IMPORTED_MODULE_6__geometry_ParametricSurface__[\"a\" /* default */]({\n        generator: generator\n    });\n    geo.generateTangents();\n    return this.createMesh(geo, material, parentNode);\n};\n\n\n/**\n * Create a general mesh with given geometry instance and material config.\n * @param {clay.Geometry} geometry\n * @return {clay.Mesh}\n */\nApp3D.prototype.createMesh = function (geometry, mat, parentNode) {\n    var mesh = new __WEBPACK_IMPORTED_MODULE_10__Mesh__[\"a\" /* default */]({\n        geometry: geometry,\n        material: mat instanceof __WEBPACK_IMPORTED_MODULE_11__Material__[\"a\" /* default */] ? mat : this.createMaterial(mat)\n    });\n    parentNode = parentNode || this.scene;\n    parentNode.add(mesh);\n    return mesh;\n};\n\n/**\n * Create an empty node\n * @param {clay.Node} parentNode\n * @return {clay.Node}\n */\nApp3D.prototype.createNode = function (parentNode) {\n    var node = new __WEBPACK_IMPORTED_MODULE_16__Node__[\"a\" /* default */]();\n    parentNode = parentNode || this.scene;\n    parentNode.add(node);\n    return node;\n};\n\n/**\n * Create a perspective or orthographic camera and add it to the scene.\n * @param {Array.<number>|clay.Vector3} position\n * @param {Array.<number>|clay.Vector3} target\n * @param {string} [type=\"perspective\"] Can be 'perspective' or 'orthographic'(in short 'ortho')\n * @param {Array.<number>|clay.Vector3} [extent] Extent is available only if type is orthographic.\n * @return {clay.camera.Perspective|clay.camera.Orthographic}\n */\nApp3D.prototype.createCamera = function (position, target, type, extent) {\n    var CameraCtor;\n    var isOrtho = false;\n    if (type === 'ortho' || type === 'orthographic') {\n        isOrtho = true;\n        CameraCtor = __WEBPACK_IMPORTED_MODULE_13__camera_Orthographic__[\"a\" /* default */];\n    }\n    else {\n        if (type && type !== 'perspective') {\n            console.error('Unkown camera type ' + type + '. Use default perspective camera');\n        }\n        CameraCtor = __WEBPACK_IMPORTED_MODULE_12__camera_Perspective__[\"a\" /* default */];\n    }\n\n    var camera = new CameraCtor();\n    if (position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        camera.position.copy(position);\n    }\n    else if (position instanceof Array) {\n        camera.position.setArray(position);\n    }\n\n    if (target instanceof Array) {\n        target = new __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */](target[0], target[1], target[2]);\n    }\n    if (target instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        camera.lookAt(target);\n    }\n\n    if (extent && isOrtho) {\n        extent = extent.array || extent;\n        camera.left = -extent[0] / 2;\n        camera.right = extent[0] / 2;\n        camera.top = extent[1] / 2;\n        camera.bottom = -extent[1] / 2;\n        camera.near = 0;\n        camera.far = extent[2];\n    }\n    else {\n        camera.aspect = this.renderer.getViewportAspect();\n    }\n\n    this.scene.add(camera);\n\n    return camera;\n};\n\n/**\n * Create a directional light and add it to the scene.\n * @param {Array.<number>|clay.Vector3} dir A Vector3 or array to represent the direction.\n * @param {Color} [color='#fff'] Color of directional light, default to be white.\n * @param {number} [intensity] Intensity of directional light, default to be 1.\n *\n * @example\n *  app.createDirectionalLight([-1, -1, -1], '#fff', 2);\n */\nApp3D.prototype.createDirectionalLight = function (dir, color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_17__light_Directional__[\"a\" /* default */]();\n    if (dir instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        dir = dir.array;\n    }\n    light.position.setArray(dir).negate();\n    light.lookAt(__WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */].ZERO);\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n    return light;\n};\n\n/**\n * Create a spot light and add it to the scene.\n * @param {Array.<number>|clay.Vector3} position Position of the spot light.\n * @param {Array.<number>|clay.Vector3} [target] Target position where spot light points to.\n * @param {number} [range=20] Falloff range of spot light. Default to be 20.\n * @param {Color} [color='#fff'] Color of spot light, default to be white.\n * @param {number} [intensity=1] Intensity of spot light, default to be 1.\n * @param {number} [umbraAngle=30] Umbra angle of spot light. Default to be 30 degree from the middle line.\n * @param {number} [penumbraAngle=45] Penumbra angle of spot light. Default to be 45 degree from the middle line.\n *\n * @example\n *  app.createSpotLight([5, 5, 5], [0, 0, 0], 20, #900);\n */\nApp3D.prototype.createSpotLight = function (position, target, range, color, intensity, umbraAngle, penumbraAngle) {\n    var light = new __WEBPACK_IMPORTED_MODULE_19__light_Spot__[\"a\" /* default */]();\n    light.position.setArray(position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */] ? position.array : position);\n\n    if (target instanceof Array) {\n        target = new __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */](target[0], target[1], target[2]);\n    }\n    if (target instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */]) {\n        light.lookAt(target);\n    }\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    range != null && (light.range = range);\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n    umbraAngle != null && (light.umbraAngle = umbraAngle);\n    penumbraAngle != null && (light.penumbraAngle = penumbraAngle);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create a point light.\n * @param {Array.<number>|clay.Vector3} position Position of point light..\n * @param {number} [range=100] Falloff range of point light.\n * @param {Color} [color='#fff'] Color of point light.\n * @param {number} [intensity=1] Intensity of point light.\n */\nApp3D.prototype.createPointLight = function (position, range, color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_18__light_Point__[\"a\" /* default */]();\n    light.position.setArray(position instanceof __WEBPACK_IMPORTED_MODULE_14__math_Vector3__[\"a\" /* default */] ? position.array : position);\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    range != null && (light.range = range);\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create a ambient light.\n * @param {Color} [color='#fff'] Color of ambient light.\n * @param {number} [intensity=1] Intensity of ambient light.\n */\nApp3D.prototype.createAmbientLight = function (color, intensity) {\n    var light = new __WEBPACK_IMPORTED_MODULE_20__light_Ambient__[\"a\" /* default */]();\n\n    if (typeof color === 'string') {\n        color = parseColor(color);\n    }\n    color != null && (light.color = color);\n    intensity != null && (light.intensity = intensity);\n\n    this.scene.add(light);\n\n    return light;\n};\n\n/**\n * Create an cubemap ambient light and an spherical harmonic ambient light\n * for specular and diffuse lighting in PBR rendering\n * @param {ImageLike|TextureCube} [envImage] Panorama environment image, HDR format is better. Or a pre loaded texture cube\n * @param {number} [specularIntenstity=0.7] Intensity of specular light.\n * @param {number} [diffuseIntenstity=0.7] Intensity of diffuse light.\n * @param {number} [exposure=1] Exposure of HDR image. Only if image in first paramter is HDR.\n * @param {number} [prefilteredCubemapSize=32] The size of prefilerted cubemap. Larger value will take more time to do expensive prefiltering.\n * @return {Promise}\n */\nApp3D.prototype.createAmbientCubemapLight = function (envImage, specIntensity, diffIntensity, exposure, prefilteredCubemapSize) {\n    var self = this;\n    if (exposure == null) {\n        exposure = 0;\n    }\n    if (prefilteredCubemapSize == null) {\n        prefilteredCubemapSize = 32;\n    }\n\n    var scene = this.scene;\n\n    var loadPromise;\n    if (envImage.textureType === 'textureCube') {\n        loadPromise = envImage.isRenderable()\n            ? Promise.resolve(envImage)\n            : new Promise(function (resolve, reject) {\n                envImage.success(function () {\n                    resolve(envImage);\n                });\n            });\n    }\n    else {\n        loadPromise = this.loadTexture(envImage, {\n            exposure: exposure\n        });\n    }\n\n    return loadPromise.then(function (envTexture) {\n        var specLight = new __WEBPACK_IMPORTED_MODULE_21__light_AmbientCubemap__[\"a\" /* default */]({\n            intensity: specIntensity != null ? specIntensity : 0.7\n        });\n        specLight.cubemap = envTexture;\n        envTexture.flipY = false;\n        // TODO Cache prefilter ?\n        specLight.prefilter(self.renderer, 32);\n\n        var diffLight = new __WEBPACK_IMPORTED_MODULE_22__light_AmbientSH__[\"a\" /* default */]({\n            intensity: diffIntensity != null ? diffIntensity : 0.7,\n            coefficients: __WEBPACK_IMPORTED_MODULE_27__util_sh__[\"a\" /* default */].projectEnvironmentMap(\n                self.renderer, specLight.cubemap, {\n                    lod: 1\n                }\n            )\n        });\n        scene.add(specLight);\n        scene.add(diffLight);\n\n        return {\n            specular: specLight,\n            diffuse: diffLight,\n            // Original environment map\n            environmentMap: envTexture\n        };\n    });\n};\n\n/**\n * Load a [glTF](https://github.com/KhronosGroup/glTF) format model.\n * You can convert FBX/DAE/OBJ format models to [glTF](https://github.com/KhronosGroup/glTF) with [fbx2gltf](https://github.com/pissang/claygl#fbx-to-gltf20-converter) python script,\n * or simply using the [Clay Viewer](https://github.com/pissang/clay-viewer) client application.\n * @param {string} url\n * @param {Object} opts\n * @param {string|clay.Shader} [opts.shader='clay.standard'] 'basic'|'lambert'|'standard'.\n * @param {boolean} [opts.waitTextureLoaded=false] If add to scene util textures are all loaded.\n * @param {boolean} [opts.autoPlayAnimation=true] If autoplay the animation of model.\n * @param {boolean} [opts.upAxis='y'] Change model to y up if upAxis is 'z'\n * @param {boolean} [opts.textureFlipY=false]\n * @param {boolean} [opts.textureConvertToPOT=false] If convert texture to power-of-two\n * @param {string} [opts.textureRootPath] Root path of texture. Default to be relative with glTF file.\n * @param {clay.Node} [parentNode] Parent node that model will be mounted. Default to be scene\n * @return {Promise}\n */\nApp3D.prototype.loadModel = function (url, opts, parentNode) {\n    if (typeof url !== 'string') {\n        throw new Error('Invalid URL.');\n    }\n\n    opts = opts || {};\n    if (opts.autoPlayAnimation == null) {\n        opts.autoPlayAnimation = true;\n    }\n    var shader = opts.shader || 'clay.standard';\n\n    var loaderOpts = {\n        rootNode: new __WEBPACK_IMPORTED_MODULE_16__Node__[\"a\" /* default */](),\n        shader: shader,\n        textureRootPath: opts.textureRootPath,\n        crossOrigin: 'Anonymous',\n        textureFlipY: opts.textureFlipY,\n        textureConvertToPOT: opts.textureConvertToPOT\n    };\n    if (opts.upAxis && opts.upAxis.toLowerCase() === 'z') {\n        loaderOpts.rootNode.rotation.identity().rotateX(-Math.PI / 2);\n    }\n\n    var loader = new __WEBPACK_IMPORTED_MODULE_15__loader_GLTF__[\"a\" /* default */](loaderOpts);\n\n    parentNode = parentNode || this.scene;\n    var timeline = this.timeline;\n    var self = this;\n\n    return new Promise(function (resolve, reject) {\n        function afterLoad(result) {\n            if (self._disposed) {\n                return;\n            }\n\n            parentNode.add(result.rootNode);\n            if (opts.autoPlayAnimation) {\n                result.clips.forEach(function (clip) {\n                    timeline.addClip(clip);\n                });\n            }\n            resolve(result);\n        }\n        loader.success(function (result) {\n            if (self._disposed) {\n                return;\n            }\n\n            if (!opts.waitTextureLoaded) {\n                afterLoad(result);\n            }\n            else {\n                Promise.all(result.textures.map(function (texture) {\n                    if (texture.isRenderable()) {\n                        return Promise.resolve(texture);\n                    }\n                    return new Promise(function (resolve) {\n                        texture.success(resolve);\n                        texture.error(resolve);\n                    });\n                })).then(function () {\n                    afterLoad(result);\n                }).catch(function () {\n                    afterLoad(result);\n                });\n            }\n        });\n        loader.error(function () {\n            reject();\n        });\n        loader.load(url);\n    });\n};\n\n\n// TODO cloneModel\n\n/**\n * Similar to `app.scene.cloneNode`, except it will mount the cloned node to the scene automatically.\n * See more in {@link clay.Scene#cloneNode}\n *\n * @param {clay.Node} node\n * @param {clay.Node} [parentNode] Parent node that new cloned node will be mounted.\n *          Default to have same parent with source node.\n * @return {clay.Node}\n */\nApp3D.prototype.cloneNode = function (node, parentNode) {\n    parentNode = parentNode || node.getParent();\n\n    var newNode = this.scene.cloneNode(node, parentNode);\n    if (parentNode) {\n        parentNode.add(newNode);\n    }\n\n    return newNode;\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    App3D: App3D,\n    /**\n     * Create a 3D application that will manage the app initialization and loop.\n     *\n     * See more details at {@link clay.application.App3D}\n     *\n     * @name clay.application.create\n     * @method\n     * @param {HTMLElement|string} dom Container dom element or a selector string that can be used in `querySelector`\n     * @param {App3DNamespace} appNS Options and namespace used in creating app3D\n     *\n     * @return {clay.application.App3D}\n     *\n     * @example\n     *  clay.application.create('#app', {\n     *      init: function (app) {\n     *          app.createCube();\n     *          var camera = app.createCamera();\n     *          camera.position.set(0, 0, 2);\n     *      },\n     *      loop: function () { // noop }\n     *  })\n     */\n    create: function (dom, appNS) {\n        return new App3D(dom, appNS);\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hcHBsaWNhdGlvbi5qcz9jNGYxIl0sInNvdXJjZXNDb250ZW50IjpbIlxuLyoqXG4gKiBIZWxwZXJzIGZvciBjcmVhdGluZyBhIGNvbW1vbiAzZCBhcHBsaWNhdGlvbi5cbiAqIEBuYW1lc3BhY2UgY2xheS5hcHBsaWNhdGlvblxuICovXG5cbiAvLyBUT0RPIGNyZWF0ZUNvbXBvc2l0b3JcbiAvLyBUT0RPIERpc3Bvc2UgdGVzdC4gZ2VvQ2FjaGUgdGVzdC5cbiAvLyBUT0RPIFRvbmVtYXBwaW5nIGV4cG9zdXJlXG4gLy8gVE9ETyBmaXRNb2RlbC5cbiAvLyBUT0RPIFBhcnRpY2xlID9cbmltcG9ydCBSZW5kZXJlciBmcm9tICcuL1JlbmRlcmVyJztcbmltcG9ydCBTY2VuZSBmcm9tICcuL1NjZW5lJztcbmltcG9ydCBUaW1lbGluZSBmcm9tICcuL1RpbWVsaW5lJztcbmltcG9ydCBDdWJlR2VvIGZyb20gJy4vZ2VvbWV0cnkvQ3ViZSc7XG5pbXBvcnQgU3BoZXJlR2VvIGZyb20gJy4vZ2VvbWV0cnkvU3BoZXJlJztcbmltcG9ydCBQbGFuZUdlbyBmcm9tICcuL2dlb21ldHJ5L1BsYW5lJztcbmltcG9ydCBQYXJhbWV0cmljU3VyZmFjZUdlbyBmcm9tICcuL2dlb21ldHJ5L1BhcmFtZXRyaWNTdXJmYWNlJztcbmltcG9ydCBUZXh0dXJlMkQgZnJvbSAnLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmVDdWJlIGZyb20gJy4vVGV4dHVyZUN1YmUnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi9UZXh0dXJlJztcbmltcG9ydCBNZXNoIGZyb20gJy4vTWVzaCc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5pbXBvcnQgUGVyc3BlY3RpdmVDYW1lcmEgZnJvbSAnLi9jYW1lcmEvUGVyc3BlY3RpdmUnO1xuaW1wb3J0IE9ydGhvZ3JhcGhpY0NhbWVyYSBmcm9tICcuL2NhbWVyYS9PcnRob2dyYXBoaWMnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IEdMVEZMb2FkZXIgZnJvbSAnLi9sb2FkZXIvR0xURic7XG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnO1xuaW1wb3J0IERpcmVjdGlvbmFsTGlnaHQgZnJvbSAnLi9saWdodC9EaXJlY3Rpb25hbCc7XG5pbXBvcnQgUG9pbnRMaWdodCBmcm9tICcuL2xpZ2h0L1BvaW50JztcbmltcG9ydCBTcG90TGlnaHQgZnJvbSAnLi9saWdodC9TcG90JztcbmltcG9ydCBBbWJpZW50TGlnaHQgZnJvbSAnLi9saWdodC9BbWJpZW50JztcbmltcG9ydCBBbWJpZW50Q3ViZW1hcExpZ2h0IGZyb20gJy4vbGlnaHQvQW1iaWVudEN1YmVtYXAnO1xuaW1wb3J0IEFtYmllbnRTSExpZ2h0IGZyb20gJy4vbGlnaHQvQW1iaWVudFNIJztcbmltcG9ydCBTaGFkb3dNYXBQYXNzIGZyb20gJy4vcHJlUGFzcy9TaGFkb3dNYXAnO1xuaW1wb3J0IFJheVBpY2tpbmcgZnJvbSAnLi9waWNraW5nL1JheVBpY2tpbmcnO1xuaW1wb3J0IExSVUNhY2hlIGZyb20gJy4vY29yZS9MUlUnO1xuaW1wb3J0IHV0aWwgZnJvbSAnLi9jb3JlL3V0aWwnO1xuaW1wb3J0IHNoVXRpbCBmcm9tICcuL3V0aWwvc2gnO1xuaW1wb3J0IHRleHR1cmVVdGlsIGZyb20gJy4vdXRpbC90ZXh0dXJlJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi9jb3JlL3ZlbmRvcic7XG5cbmltcG9ydCBjb2xvclV0aWwgZnJvbSAnLi9jb3JlL2NvbG9yJztcbnZhciBwYXJzZUNvbG9yID0gY29sb3JVdGlsLnBhcnNlVG9GbG9hdDtcblxuaW1wb3J0IHNoYWRlckxpYnJhcnkgZnJvbSAnLi9zaGFkZXIvYnVpbHRpbic7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4vU2hhZGVyJztcblxuXG52YXIgRVZFX05BTUVTID0gWydjbGljaycsICdkYmxjbGljaycsICdtb3VzZW92ZXInLCAnbW91c2VvdXQnLCAnbW91c2Vtb3ZlJyxcbiAgICAndG91Y2hzdGFydCcsICd0b3VjaGVuZCcsICd0b3VjaG1vdmUnLFxuICAgICdtb3VzZXdoZWVsJywgJ0RPTU1vdXNlU2Nyb2xsJ1xuXTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7c3RyaW5nfEhUTUxDYW52YXNFbGVtZW50fEhUTUxJbWFnZUVsZW1lbnR8SFRNTFZpZGVvRWxlbWVudH0gSW1hZ2VMaWtlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge3N0cmluZ3xIVE1MQ2FudmFzRWxlbWVudHxIVE1MSW1hZ2VFbGVtZW50fEhUTUxWaWRlb0VsZW1lbnR8Y2xheS5UZXh0dXJlMkR9IFRleHR1cmVMaWtlXG4gKi9cbi8qKlxuICogQHR5cGVkZWYge3N0cmluZ3xBcnJheS48bnVtYmVyPn0gQ29sb3JcbiAqL1xuLyoqXG4gKiBAdHlwZWRlZiB7SFRNTEVsZW1lbnR8c3RyaW5nfSBEb21RdWVyeVxuICovXG5cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBHTEF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW2FscGhhPXRydWVdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtkZXB0aD10cnVlXVxuICogQHBhcmFtIHtib29sZWFufSBbc3RlbmNpbD10cnVlXVxuICogQHBhcmFtIHtib29sZWFufSBbYW50aWFsaWFzPXRydWVdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtwcmVtdWx0aXBsaWVkQWxwaGE9dHJ1ZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3ByZXNlcnZlRHJhd2luZ0J1ZmZlcj1mYWxzZV1cbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEFwcDNETmFtZXNwYWNlXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBpbml0IEluaXRpYWxpemF0aW9uIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiBpbml0aW5nIGFwcC5cbiAqICAgICAgICAgICAgICAgICAgICAgIFlvdSBjYW4gcmV0dXJuIGEgcHJvbWlzZSBpbiBpbml0IHRvIHN0YXJ0IHRoZSBsb29wIGFzeW5jaHJvbm91c2x5IHdoZW4gdGhlIHByb21pc2UgaXMgcmVzb2x2ZWQuXG4gKiBAcHJvcGVydHkge0Z1bmN0aW9ufSBsb29wIExvb3AgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGNhbGxlZCBlYWNoIGZyYW1lLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbYXV0b1JlbmRlcj10cnVlXSBJZiByZW5kZXIgYXV0b21hdGljYWxseSBlYWNoIGZyYW1lLlxuICogQHByb3BlcnR5IHtGdW5jdGlvbn0gW2JlZm9yZVJlbmRlcl1cbiAqIEBwcm9wZXJ0eSB7RnVuY3Rpb259IFthZnRlclJlbmRlcl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbd2lkdGhdIENvbnRhaW5lciB3aWR0aC5cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbaGVpZ2h0XSBDb250YWluZXIgaGVpZ2h0LlxuICogQHByb3BlcnR5IHtudW1iZXJ9IFtkZXZpY2VQaXhlbFJhdGlvXVxuICogQHByb3BlcnR5IHtHTEF0dHJpYnV0ZXN9IFtnbEF0dHJpYnV0ZXNdIEF0dHJpYnV0ZXMgZm9yIGNyZWF0aW5nIGdsIGNvbnRleHRcbiAqIEBwcm9wZXJ0eSB7T2JqZWN0LjxzdHJpbmcsIEZ1bmN0aW9uPn0gW21ldGhvZHNdIE1ldGhvZHMgdGhhdCB3aWxsIGJlIGluamVjdGVkIHRvIEFwcDNEI21ldGhvZHMuXG4gKiBAcHJvcGVydHkge09iamVjdH0gW2dyYXBoaWNdIEdyYXBoaWMgY29uZmlndXJhdGlvbiBpbmNsdWRpbmcgc2hhZG93LCBjb2xvciBzcGFjZS5cbiAqIEBwcm9wZXJ0eSB7Ym9vbGVhbn0gW2dyYXBoaWMuc2hhZG93PWZhbHNlXSBJZiBlbmFibGUgc2hhZG93XG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFtncmFwaGljLmxpbmVhcj1mYWxzZV0gSWYgdXNlIGxpbmVhciBjb2xvciBzcGFjZVxuICogQHByb3BlcnR5IHtib29sZWFufSBbZ3JhcGhpYy50b25lbWFwcGluZz1mYWxzZV0gSWYgZW5hYmxlIEFDRVMgdG9uZSBtYXBwaW5nLlxuICogQHByb3BlcnR5IHtib29sZWFufSBbZXZlbnQ9ZmFsc2VdIElmIGVuYWJsZSBtb3VzZS90b3VjaCBldmVudC4gSXQgd2lsbCBzbG93IGRvd24gdGhlIHN5c3RlbSBpZiBnZW9tZXRyaWVzIGFyZSBjb21wbGV4LlxuICovXG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gU3RhbmRhcmRNYXRlcmlhbE1SQ29uZmlnXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW25hbWVdXG4gKiBAcHJvcGVydHkge3N0cmluZ30gW3NoYWRlcj0nc3RhbmRhcmRNUiddXG4gKiBAcHJvcGVydHkge0NvbG9yfSBbY29sb3JdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW2FscGhhXVxuICogQHByb3BlcnR5IHtudW1iZXJ9IFttZXRhbG5lc3NdXG4gKiBAcHJvcGVydHkge251bWJlcn0gW3JvdWdobmVzc11cbiAqIEBwcm9wZXJ0eSB7Q29sb3J9IFtlbWlzc2lvbl1cbiAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBbZW1pc3Npb25JbnRlbnNpdHldXG4gKiBAcHJvcGVydHkge2Jvb2xlYW59IFt0cmFuc3BhcmVudF1cbiAqIEBwcm9wZXJ0eSB7VGV4dHVyZUxpa2V9IFtkaWZmdXNlTWFwXVxuICogQHByb3BlcnR5IHtUZXh0dXJlTGlrZX0gW25vcm1hbE1hcF1cbiAqIEBwcm9wZXJ0eSB7VGV4dHVyZUxpa2V9IFtyb3VnaG5lc3NNYXBdXG4gKiBAcHJvcGVydHkge1RleHR1cmVMaWtlfSBbbWV0YWxuZXNzTWFwXVxuICogQHByb3BlcnR5IHtUZXh0dXJlTGlrZX0gW2VtaXNzaXZlTWFwXVxuICovXG5cbi8qKlxuICogVXNpbmcgQXBwM0QgaXMgYSBtdWNoIG1vcmUgY29udmVuaWVudCB3YXkgdG8gY3JlYXRlIGFuZCBtYW5hZ2UgeW91ciAzRCBhcHBsaWNhdGlvbi5cbiAqXG4gKiBJdCBwcm92aWRlcyB0aGUgYWJpbGl0aWVzIHRvOlxuICpcbiAqICsgTWFuYWdlIGFwcGxpY2F0aW9uIGxvb3AgYW5kIHJlbmRlcmluZy5cbiAqICsgQ29sbGVjdCBHUFUgcmVzb3VyY2UgYXV0b21hdGljYWxseSB3aXRob3V0IG1lbW9yeSBsZWFrIGNvbmNlcm4uXG4gKiArIE1vdXNlIGV2ZW50IG1hbmFnZW1lbnQuXG4gKiArIENyZWF0ZSBzY2VuZSBvYmplY3RzLCBtYXRlcmlhbHMsIHRleHR1cmVzIHdpdGggc2ltcGxlciBjb2RlLlxuICogKyBMb2FkIG1vZGVscyB3aXRoIG9uZSBsaW5lIG9mIGNvZGUuXG4gKiArIFByb21pc2VkIGludGVyZmFjZXMuXG4gKlxuICogSGVyZSBpcyBhIGJhc2ljIGV4YW1wbGUgdG8gY3JlYXRlIGEgcm90YXRpbmcgY3ViZS5cbiAqXG5gYGBqc1xudmFyIGFwcCA9IGNsYXkuYXBwbGljYXRpb24uY3JlYXRlKCcjdmlld3BvcnQnLCB7XG4gICAgaW5pdDogZnVuY3Rpb24gKGFwcCkge1xuICAgICAgICAvLyBDcmVhdGUgYSBwZXJzcGVjdGl2ZSBjYW1lcmEuXG4gICAgICAgIC8vIEZpcnN0IHBhcmFtZXRlciBpcyB0aGUgY2FtZXJhIHBvc2l0aW9uLiBXaGljaCBpcyBpbiBmcm9udCBvZiB0aGUgY3ViZS5cbiAgICAgICAgLy8gU2Vjb25kIHBhcmFtZXRlciBpcyB0aGUgY2FtZXJhIGxvb2tBdCB0YXJnZXQuIFdoaWNoIGlzIHRoZSBvcmlnaW4gb2YgdGhlIHdvcmxkLCBhbmQgd2hlcmUgdGhlIGN1YmUgcHV0cy5cbiAgICAgICAgdGhpcy5fY2FtZXJhID0gYXBwLmNyZWF0ZUNhbWVyYShbMCwgMiwgNV0sIFswLCAwLCAwXSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIHNhbXBsZSBjdWJlXG4gICAgICAgIHRoaXMuX2N1YmUgPSBhcHAuY3JlYXRlQ3ViZSgpO1xuICAgICAgICAvLyBDcmVhdGUgYSBkaXJlY3Rpb25hbCBsaWdodC4gVGhlIGRpcmVjdGlvbiBpcyBmcm9tIHRvcCByaWdodCB0byBsZWZ0IGJvdHRvbSwgYXdheSBmcm9tIGNhbWVyYS5cbiAgICAgICAgdGhpcy5fbWFpbkxpZ2h0ID0gYXBwLmNyZWF0ZURpcmVjdGlvbmFsTGlnaHQoWy0xLCAtMSwgLTFdKTtcbiAgICB9LFxuICAgIGxvb3A6IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgICAgLy8gU2ltcGx5IHJvdGF0aW5nIHRoZSBjdWJlIGV2ZXJ5IGZyYW1lLlxuICAgICAgICB0aGlzLl9jdWJlLnJvdGF0aW9uLnJvdGF0ZVkoYXBwLmZyYW1lVGltZSAvIDEwMDApO1xuICAgIH1cbn0pO1xuYGBgXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEXG4gKiBAcGFyYW0ge0RvbVF1ZXJ5fSBkb20gQ29udGFpbmVyIGRvbSBlbGVtZW50IG9yIGEgc2VsZWN0b3Igc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgaW4gYHF1ZXJ5U2VsZWN0b3JgXG4gKiBAcGFyYW0ge0FwcDNETmFtZXNwYWNlfSBhcHBOUyBPcHRpb25zIGFuZCBuYW1lc3BhY2UgdXNlZCBpbiBjcmVhdGluZyBhcHAzRFxuICovXG5mdW5jdGlvbiBBcHAzRChkb20sIGFwcE5TKSB7XG5cbiAgICBhcHBOUyA9IGFwcE5TIHx8IHt9O1xuICAgIGFwcE5TLmdyYXBoaWMgPSBhcHBOUy5ncmFwaGljIHx8IHt9O1xuXG4gICAgYXBwTlMuZ2xBdHRyaWJ1dGVzID0gYXBwTlMuZ2xBdHRyaWJ1dGVzIHx8IHt9O1xuXG4gICAgaWYgKGFwcE5TLmF1dG9SZW5kZXIgPT0gbnVsbCkge1xuICAgICAgICBhcHBOUy5hdXRvUmVuZGVyID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGRvbSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgZG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihkb20pO1xuICAgIH1cblxuICAgIGlmICghZG9tKSB7IHRocm93IG5ldyBFcnJvcignSW52YWxpZCBkb20nKTsgfVxuXG4gICAgdmFyIGlzRG9tQ2FudmFzID0gIWRvbS5ub2RlTmFtZSAgLy8gTm90IGluIGRvbSBlbnZpcm9ubWVudFxuICAgICAgICB8fCBkb20ubm9kZU5hbWUudG9VcHBlckNhc2UoKSA9PT0gJ0NBTlZBUyc7XG5cbiAgICB2YXIgcmVuZGVyZXJPcHRzID0ge307XG4gICAgaXNEb21DYW52YXMgJiYgKHJlbmRlcmVyT3B0cy5jYW52YXMgPSBkb20pO1xuICAgIGFwcE5TLmRldmljZVBpeGVsUmF0aW8gJiYgKHJlbmRlcmVyT3B0cy5kZXZpY2VQaXhlbFJhdGlvID0gYXBwTlMuZGV2aWNlUGl4ZWxSYXRpbyk7XG5cbiAgICBbXG4gICAgICAgICdhbHBoYScsICdkZXB0aCcsICdzdGVuY2lsJywgJ2FudGlhbGlhcycsICdwcmVtdWx0aXBsaWVkQWxwaGEnLCAncHJlc2VydmVEcmF3aW5nQnVmZmVyJ1xuICAgIF0uZm9yRWFjaChmdW5jdGlvbiAoYXR0ck5hbWUpIHtcbiAgICAgICAgaWYgKGFwcE5TLmdsQXR0cmlidXRlc1thdHRyTmFtZV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmVuZGVyZXJPcHRzW2F0dHJOYW1lXSA9IGFwcE5TLmdsQXR0cmlidXRlc1thdHRyTmFtZV07XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciBnUmVuZGVyZXIgPSBuZXcgUmVuZGVyZXIocmVuZGVyZXJPcHRzKTtcbiAgICB2YXIgZ1dpZHRoID0gYXBwTlMud2lkdGggfHwgZG9tLmNsaWVudFdpZHRoO1xuICAgIHZhciBnSGVpZ2h0ID0gYXBwTlMuaGVpZ2h0IHx8IGRvbS5jbGllbnRIZWlnaHQ7XG5cbiAgICB2YXIgZ1NjZW5lID0gbmV3IFNjZW5lKCk7XG4gICAgdmFyIGdUaW1lbGluZSA9IG5ldyBUaW1lbGluZSgpO1xuICAgIHZhciBnU2hhZG93UGFzcyA9IGFwcE5TLmdyYXBoaWMuc2hhZG93ICYmIG5ldyBTaGFkb3dNYXBQYXNzKCk7XG4gICAgdmFyIGdSYXlQaWNraW5nID0gYXBwTlMuZXZlbnQgJiYgbmV3IFJheVBpY2tpbmcoe1xuICAgICAgICBzY2VuZTogZ1NjZW5lLFxuICAgICAgICByZW5kZXJlcjogZ1JlbmRlcmVyXG4gICAgfSk7XG5cbiAgICAhaXNEb21DYW52YXMgJiYgZG9tLmFwcGVuZENoaWxkKGdSZW5kZXJlci5jYW52YXMpO1xuXG4gICAgZ1JlbmRlcmVyLnJlc2l6ZShnV2lkdGgsIGdIZWlnaHQpO1xuXG4gICAgdmFyIGdGcmFtZVRpbWUgPSAwO1xuICAgIHZhciBnRWxhcHNlZFRpbWUgPSAwO1xuXG4gICAgZ1RpbWVsaW5lLnN0YXJ0KCk7XG5cbiAgICB2YXIgdXNlck1ldGhvZHMgPSB7fTtcbiAgICBmb3IgKHZhciBrZXkgaW4gYXBwTlMubWV0aG9kcykge1xuICAgICAgICB1c2VyTWV0aG9kc1trZXldID0gYXBwTlMubWV0aG9kc1trZXldLmJpbmQoYXBwTlMsIHRoaXMpO1xuICAgIH1cblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRhaW5lciBkb20gZWxlbWVudFxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI2NvbnRhaW5lclxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBjb250YWluZXI6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBkb207IH0gfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uQXBwM0QjcmVuZGVyZXJcbiAgICAgICAgICogQHR5cGUge2NsYXkuUmVuZGVyZXJ9XG4gICAgICAgICAqL1xuICAgICAgICByZW5kZXJlcjogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdSZW5kZXJlcjsgfX0sXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI3NjZW5lXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlJlbmRlcmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc2NlbmU6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnU2NlbmU7IH19LFxuICAgICAgICAvKipcbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCN0aW1lbGluZVxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5SZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRpbWVsaW5lOiB7IGdldDogZnVuY3Rpb24gKCkgeyByZXR1cm4gZ1RpbWVsaW5lOyB9fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpbWUgZWxhcHNlZCBzaW5jZSBsYXN0IGZyYW1lLiBDYW4gYmUgdXNlZCBpbiBsb29wIHRvIGNhbGN1bGF0ZSB0aGUgbW92ZW1lbnQuXG4gICAgICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uQXBwM0QjZnJhbWVUaW1lXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBmcmFtZVRpbWU6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnRnJhbWVUaW1lOyB9fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpbWUgZWxhcHNlZCBzaW5jZSBhcHBsaWNhdGlvbiBjcmVhdGVkLlxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI2VsYXBzZWRUaW1lXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBlbGFwc2VkVGltZTogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdFbGFwc2VkVGltZTsgfX0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdpZHRoIG9mIHZpZXdwb3J0LlxuICAgICAgICAgKiBAbmFtZSBjbGF5LmFwcGxpY2F0aW9uLkFwcDNEI3dpZHRoXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB3aWR0aDogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdSZW5kZXJlci5nZXRXaWR0aCgpOyB9fSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhlaWdodCBvZiB2aWV3cG9ydC5cbiAgICAgICAgICogQG5hbWUgY2xheS5hcHBsaWNhdGlvbi5BcHAzRCNoZWlnaHRcbiAgICAgICAgICogQHR5cGUge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGhlaWdodDogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGdSZW5kZXJlci5nZXRIZWlnaHQoKTsgfX0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1ldGhvZHMgZnJvbSB7QGxpbmsgY2xheS5hcHBsaWNhdGlvbi5jcmVhdGV9XG4gICAgICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uQXBwM0QjbWV0aG9kc1xuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgbWV0aG9kczogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHVzZXJNZXRob2RzOyB9IH0sXG5cbiAgICAgICAgX3NoYWRvd1Bhc3M6IHsgZ2V0OiBmdW5jdGlvbiAoKSB7IHJldHVybiBnU2hhZG93UGFzczsgfSB9LFxuXG4gICAgICAgIF9hcHBOUzogeyBnZXQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIGFwcE5TOyB9IH0sXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgdGhlIGFwcGxpY2F0aW9uLiBXaWxsIHVzZSB0aGUgY29udGFpbmVyIGNsaWVudFdpZHRoL2NsaWVudEhlaWdodCBpZiB3aWR0aC9oZWlnaHQgaW4gcGFyYW1ldGVycyBhcmUgbm90IGdpdmVuLlxuICAgICAqIEBmdW5jdGlvblxuICAgICAqIEBtZW1iZXJPZiB7Y2xheS5hcHBsaWNhdGlvbi5BcHAzRH1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW3dpZHRoXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbaGVpZ2h0XVxuICAgICAqL1xuICAgIHRoaXMucmVzaXplID0gZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgZ1dpZHRoID0gd2lkdGggfHwgYXBwTlMud2lkdGggfHwgZG9tLmNsaWVudFdpZHRoO1xuICAgICAgICBnSGVpZ2h0ID0gaGVpZ2h0IHx8IGRvbS5oZWlnaHQgfHwgZG9tLmNsaWVudEhlaWdodDtcbiAgICAgICAgZ1JlbmRlcmVyLnJlc2l6ZShnV2lkdGgsIGdIZWlnaHQpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBEaXNwb3NlIHRoZSBhcHBsaWNhdGlvblxuICAgICAqIEBmdW5jdGlvblxuICAgICAqL1xuICAgIHRoaXMuZGlzcG9zZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fZGlzcG9zZWQgPSB0cnVlO1xuXG4gICAgICAgIGlmIChhcHBOUy5kaXNwb3NlKSB7XG4gICAgICAgICAgICBhcHBOUy5kaXNwb3NlKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGdUaW1lbGluZS5zdG9wKCk7XG4gICAgICAgIGdSZW5kZXJlci5kaXNwb3NlU2NlbmUoZ1NjZW5lKTtcbiAgICAgICAgZ1NoYWRvd1Bhc3MgJiYgZ1NoYWRvd1Bhc3MuZGlzcG9zZShnUmVuZGVyZXIpO1xuXG4gICAgICAgIGRvbS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgRVZFX05BTUVTLmZvckVhY2goZnVuY3Rpb24gKGV2ZVR5cGUpIHtcbiAgICAgICAgICAgIHRoaXNbbWFrZUhhbmRsZXJOYW1lKGV2ZVR5cGUpXSAmJiB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sIG1ha2VIYW5kbGVyTmFtZShldmVUeXBlKSk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgIH07XG5cbiAgICBnUmF5UGlja2luZyAmJiB0aGlzLl9pbml0TW91c2VFdmVudHMoZ1JheVBpY2tpbmcpO1xuXG4gICAgdGhpcy5fZ2VvQ2FjaGUgPSBuZXcgTFJVQ2FjaGUoMjApO1xuICAgIHRoaXMuX3RleENhY2hlID0gbmV3IExSVUNhY2hlKDIwKTtcblxuICAgIC8vIEdQVSBSZXNvdXJjZXMuXG4gICAgdGhpcy5fdGV4dHVyZXNMaXN0ID0ge307XG4gICAgdGhpcy5fZ2VvbWV0cmllc0xpc3QgPSB7fTtcblxuICAgIC8vIERvIGluaXQgdGhlIGFwcGxpY2F0aW9uLlxuICAgIHZhciBpbml0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShhcHBOUy5pbml0ICYmIGFwcE5TLmluaXQodGhpcykpO1xuICAgIC8vIFVzZSB0aGUgaW5pdGVkIGNhbWVyYS5cbiAgICBnUmF5UGlja2luZyAmJiAoZ1JheVBpY2tpbmcuY2FtZXJhID0gZ1NjZW5lLmdldE1haW5DYW1lcmEoKSk7XG5cbiAgICBpZiAoIWFwcE5TLmxvb3ApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdNaXNzIGxvb3AgbWV0aG9kLicpO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpbml0UHJvbWlzZS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZ1RpbWVsaW5lLm9uKCdmcmFtZScsIGZ1bmN0aW9uIChmcmFtZVRpbWUpIHtcbiAgICAgICAgICAgIGdGcmFtZVRpbWUgPSBmcmFtZVRpbWU7XG4gICAgICAgICAgICBnRWxhcHNlZFRpbWUgKz0gZnJhbWVUaW1lO1xuXG4gICAgICAgICAgICB2YXIgY2FtZXJhID0gZ1NjZW5lLmdldE1haW5DYW1lcmEoKTtcbiAgICAgICAgICAgIGlmIChjYW1lcmEpIHtcbiAgICAgICAgICAgICAgICBjYW1lcmEuYXNwZWN0ID0gZ1JlbmRlcmVyLmdldFZpZXdwb3J0QXNwZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnUmF5UGlja2luZyAmJiAoZ1JheVBpY2tpbmcuY2FtZXJhID0gY2FtZXJhKTtcblxuICAgICAgICAgICAgYXBwTlMubG9vcCAmJiBhcHBOUy5sb29wKHNlbGYpO1xuXG4gICAgICAgICAgICBpZiAoYXBwTlMuYXV0b1JlbmRlcikge1xuICAgICAgICAgICAgICAgIHNlbGYucmVuZGVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGYuY29sbGVjdFJlc291cmNlcygpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICB9KTtcblxuICAgIGdTY2VuZS5vbignYmVmb3JlcmVuZGVyJywgZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCByZW5kZXJMaXN0KSB7XG4gICAgICAgIGlmICh0aGlzLl9pblJlbmRlcikge1xuICAgICAgICAgICAgLy8gT25seSB1cGRhdGUgZ3JhcGhpYyBvcHRpb25zIHdoZW4gdXNpbmcgI3JlbmRlciBmdW5jdGlvbi5cbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUdyYXBoaWNPcHRpb25zKGFwcE5TLmdyYXBoaWMsIHJlbmRlckxpc3Qub3BhcXVlLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVHcmFwaGljT3B0aW9ucyhhcHBOUy5ncmFwaGljLCByZW5kZXJMaXN0LnRyYW5zcGFyZW50LCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gaXNJbWFnZUxpa2VFbGVtZW50KHZhbCkge1xuICAgIHJldHVybiAodHlwZW9mIEltYWdlICE9PSAndW5kZWZpbmVkJyAmJiB2YWwgaW5zdGFuY2VvZiBJbWFnZSlcbiAgICAgICAgfHwgKHR5cGVvZiBIVE1MQ2FudmFzRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgSFRNTENhbnZhc0VsZW1lbnQpXG4gICAgICAgIHx8ICh0eXBlb2YgSFRNTFZpZGVvRWxlbWVudCAhPT0gJ3VuZGVmaW5lZCcgJiYgdmFsIGluc3RhbmNlb2YgSFRNTFZpZGVvRWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGdldEtleUZyb21JbWFnZUxpa2UodmFsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnXG4gICAgICAgID8gdmFsIDogKHZhbC5fX2tleV9fIHx8ICh2YWwuX19rZXlfXyA9IHV0aWwuZ2VuR1VJRCgpKSk7XG59XG5cbmZ1bmN0aW9uIG1ha2VIYW5kbGVyTmFtZShldmVUeXBlKSB7XG4gICAgcmV0dXJuICdfJyArIGV2ZVR5cGUgKyAnSGFuZGxlcic7XG59XG5cbmZ1bmN0aW9uIHBhY2thZ2VFdmVudChldmVudFR5cGUsIHBpY2tSZXN1bHQsIG9mZnNldFgsIG9mZnNldFksIHdoZWVsRGVsdGEpIHtcbiAgICB2YXIgZXZlbnQgPSB1dGlsLmNsb25lKHBpY2tSZXN1bHQpO1xuICAgIGV2ZW50LnR5cGUgPSBldmVudFR5cGU7XG4gICAgZXZlbnQub2Zmc2V0WCA9IG9mZnNldFg7XG4gICAgZXZlbnQub2Zmc2V0WSA9IG9mZnNldFk7XG4gICAgaWYgKHdoZWVsRGVsdGEgIT09IG51bGwpIHtcbiAgICAgICAgZXZlbnQud2hlZWxEZWx0YSA9IHdoZWVsRGVsdGE7XG4gICAgfVxuICAgIHJldHVybiBldmVudDtcbn1cblxuZnVuY3Rpb24gYnViYmxpbmdFdmVudCh0YXJnZXQsIGV2ZW50KSB7XG4gICAgd2hpbGUgKHRhcmdldCAmJiAhZXZlbnQuY2FuY2VsQnViYmxlKSB7XG4gICAgICAgIHRhcmdldC50cmlnZ2VyKGV2ZW50LnR5cGUsIGV2ZW50KTtcbiAgICAgICAgdGFyZ2V0ID0gdGFyZ2V0LmdldFBhcmVudCgpO1xuICAgIH1cbn1cblxuQXBwM0QucHJvdG90eXBlLl9pbml0TW91c2VFdmVudHMgPSBmdW5jdGlvbiAocmF5UGlja2luZykge1xuICAgIHZhciBkb20gPSB0aGlzLmNvbnRhaW5lcjtcblxuICAgIHZhciBvbGRUYXJnZXQgPSBudWxsO1xuICAgIEVWRV9OQU1FUy5mb3JFYWNoKGZ1bmN0aW9uIChfZXZlVHlwZSkge1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sIF9ldmVUeXBlLCB0aGlzW21ha2VIYW5kbGVyTmFtZShfZXZlVHlwZSldID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIGlmICghcmF5UGlja2luZy5jYW1lcmEpIHsgLy8gTm90IGhhdmUgY2FtZXJhIHlldC5cbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0ICYmIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGJveCA9IGRvbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXRYLCBvZmZzZXRZO1xuICAgICAgICAgICAgdmFyIGV2ZVR5cGUgPSBfZXZlVHlwZTtcblxuICAgICAgICAgICAgaWYgKGV2ZVR5cGUuaW5kZXhPZigndG91Y2gnKSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvdWNoID0gZXZlVHlwZSAhPT0gJ3RvdWNoZW5kJ1xuICAgICAgICAgICAgICAgICAgICA/IGUudGFyZ2V0VG91Y2hlc1swXVxuICAgICAgICAgICAgICAgICAgICA6IGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgICAgICAgICAgICAgaWYgKGV2ZVR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xuICAgICAgICAgICAgICAgICAgICBldmVUeXBlID0gJ21vdXNlZG93bic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKGV2ZVR5cGUgPT09ICd0b3VjaGVuZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlVHlwZSA9ICdtb3VzZXVwJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoZXZlVHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlVHlwZSA9ICdtb3VzZW1vdmUnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gdG91Y2guY2xpZW50WCAtIGJveC5sZWZ0O1xuICAgICAgICAgICAgICAgIG9mZnNldFkgPSB0b3VjaC5jbGllbnRZIC0gYm94LnRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG9mZnNldFggPSBlLmNsaWVudFggLSBib3gubGVmdDtcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gZS5jbGllbnRZIC0gYm94LnRvcDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHBpY2tSZXN1bHQgPSByYXlQaWNraW5nLnBpY2sob2Zmc2V0WCwgb2Zmc2V0WSk7XG5cbiAgICAgICAgICAgIHZhciBkZWx0YTtcbiAgICAgICAgICAgIGlmIChldmVUeXBlID09PSAnRE9NTW91c2VTY3JvbGwnIHx8IGV2ZVR5cGUgPT09ICdtb3VzZXdoZWVsJykge1xuICAgICAgICAgICAgICAgIGRlbHRhID0gKGUud2hlZWxEZWx0YSkgPyBlLndoZWVsRGVsdGEgLyAxMjAgOiAtKGUuZGV0YWlsIHx8IDApIC8gMztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBpY2tSZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAvLyBKdXN0IGlnbm9yZSBzaWxlbnQgZWxlbWVudC5cbiAgICAgICAgICAgICAgICBpZiAocGlja1Jlc3VsdC50YXJnZXQuc2lsZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZXZlVHlwZSA9PT0gJ21vdXNlbW92ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUEVORElORyB0b3VjaGRvd24gc2hvdWxkIHRyaWdnZXIgbW91c2VvdmVyIGV2ZW50ID9cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldENoYW5nZWQgPSBwaWNrUmVzdWx0LnRhcmdldCAhPT0gb2xkVGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGFyZ2V0Q2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb2xkVGFyZ2V0ICYmIGJ1YmJsaW5nRXZlbnQob2xkVGFyZ2V0LCBwYWNrYWdlRXZlbnQoJ21vdXNlb3V0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldDogb2xkVGFyZ2V0XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBvZmZzZXRYLCBvZmZzZXRZKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnViYmxpbmdFdmVudChwaWNrUmVzdWx0LnRhcmdldCwgcGFja2FnZUV2ZW50KCdtb3VzZW1vdmUnLCBwaWNrUmVzdWx0LCBvZmZzZXRYLCBvZmZzZXRZKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXRDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBidWJibGluZ0V2ZW50KHBpY2tSZXN1bHQudGFyZ2V0LCBwYWNrYWdlRXZlbnQoJ21vdXNlb3ZlcicsIHBpY2tSZXN1bHQsIG9mZnNldFgsIG9mZnNldFkpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnViYmxpbmdFdmVudChwaWNrUmVzdWx0LnRhcmdldCwgcGFja2FnZUV2ZW50KGV2ZVR5cGUsIHBpY2tSZXN1bHQsIG9mZnNldFgsIG9mZnNldFksIGRlbHRhKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG9sZFRhcmdldCA9IHBpY2tSZXN1bHQudGFyZ2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob2xkVGFyZ2V0KSB7XG4gICAgICAgICAgICAgICAgYnViYmxpbmdFdmVudChvbGRUYXJnZXQsIHBhY2thZ2VFdmVudCgnbW91c2VvdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldDogb2xkVGFyZ2V0XG4gICAgICAgICAgICAgICAgfSwgb2Zmc2V0WCwgb2Zmc2V0WSkpO1xuICAgICAgICAgICAgICAgIG9sZFRhcmdldCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0sIHRoaXMpO1xufTtcblxuQXBwM0QucHJvdG90eXBlLl91cGRhdGVHcmFwaGljT3B0aW9ucyA9IGZ1bmN0aW9uIChncmFwaGljT3B0cywgbGlzdCwgaXNTa3lib3gpIHtcbiAgICB2YXIgZW5hYmxlVG9uZW1hcHBpbmcgPSAhIWdyYXBoaWNPcHRzLnRvbmVtYXBwaW5nO1xuICAgIHZhciBpc0xpbmVhclNwYWNlID0gISFncmFwaGljT3B0cy5saW5lYXI7XG5cbiAgICB2YXIgcHJldk1hdGVyaWFsO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBtYXQgPSBsaXN0W2ldLm1hdGVyaWFsO1xuICAgICAgICBpZiAobWF0ID09PSBwcmV2TWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZW5hYmxlVG9uZW1hcHBpbmcgPyBtYXQuZGVmaW5lKCdmcmFnbWVudCcsICdUT05FTUFQUElORycpIDogbWF0LnVuZGVmaW5lKCdmcmFnbWVudCcsICdUT05FTUFQUElORycpO1xuICAgICAgICBpZiAoaXNMaW5lYXJTcGFjZSkge1xuICAgICAgICAgICAgdmFyIGRlY29kZVNSR0IgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKGlzU2t5Ym94ICYmIG1hdC5nZXQoJ2Vudmlyb25tZW50TWFwJykgJiYgIW1hdC5nZXQoJ2Vudmlyb25tZW50TWFwJykuc1JHQikge1xuICAgICAgICAgICAgICAgIGRlY29kZVNSR0IgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRlY29kZVNSR0IgJiYgbWF0LmRlZmluZSgnZnJhZ21lbnQnLCAnU1JHQl9ERUNPREUnKTtcbiAgICAgICAgICAgIG1hdC5kZWZpbmUoJ2ZyYWdtZW50JywgJ1NSR0JfRU5DT0RFJyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBtYXQudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1NSR0JfREVDT0RFJyk7XG4gICAgICAgICAgICBtYXQudW5kZWZpbmUoJ2ZyYWdtZW50JywgJ1NSR0JfRU5DT0RFJyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcmV2TWF0ZXJpYWwgPSBtYXQ7XG4gICAgfVxufTtcblxuQXBwM0QucHJvdG90eXBlLl9kb1JlbmRlciA9IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUpIHtcbiAgICB2YXIgY2FtZXJhID0gc2NlbmUuZ2V0TWFpbkNhbWVyYSgpO1xuICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhLCB0cnVlKTtcbn07XG5cbi8qKlxuICogRG8gcmVuZGVyXG4gKi9cbkFwcDNELnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5SZW5kZXIgPSB0cnVlO1xuICAgIHZhciBhcHBOUyA9IHRoaXMuX2FwcE5TO1xuICAgIGFwcE5TLmJlZm9yZVJlbmRlciAmJiBhcHBOUy5iZWZvcmVSZW5kZXIoc2VsZik7XG5cbiAgICB2YXIgc2NlbmUgPSB0aGlzLnNjZW5lO1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgdmFyIHNoYWRvd1Bhc3MgPSB0aGlzLl9zaGFkb3dQYXNzO1xuXG4gICAgc2NlbmUudXBkYXRlKCk7XG4gICAgdmFyIHNreWJveExpc3QgPSBbXTtcbiAgICBzY2VuZS5za3lib3ggJiYgc2t5Ym94TGlzdC5wdXNoKHNjZW5lLnNreWJveCk7XG4gICAgc2NlbmUuc2t5ZG9tZSAmJiBza3lib3hMaXN0LnB1c2goc2NlbmUuc2t5ZG9tZSk7XG5cbiAgICB0aGlzLl91cGRhdGVHcmFwaGljT3B0aW9ucyhhcHBOUy5ncmFwaGljLCBza3lib3hMaXN0LCB0cnVlKTtcbiAgICAvLyBSZW5kZXIgc2hhZG93IHBhc3NcbiAgICBzaGFkb3dQYXNzICYmIHNoYWRvd1Bhc3MucmVuZGVyKHJlbmRlcmVyLCBzY2VuZSwgbnVsbCwgdHJ1ZSk7XG5cbiAgICB0aGlzLl9kb1JlbmRlcihyZW5kZXJlciwgc2NlbmUsIHRydWUpO1xuXG4gICAgYXBwTlMuYWZ0ZXJSZW5kZXIgJiYgYXBwTlMuYWZ0ZXJSZW5kZXIoc2VsZik7XG4gICAgdGhpcy5faW5SZW5kZXIgPSBmYWxzZTtcbn07XG5cbkFwcDNELnByb3RvdHlwZS5jb2xsZWN0UmVzb3VyY2VzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgdmFyIHNjZW5lID0gdGhpcy5zY2VuZTtcbiAgICB2YXIgdGV4dHVyZXNMaXN0ID0gdGhpcy5fdGV4dHVyZXNMaXN0O1xuICAgIHZhciBnZW9tZXRyaWVzTGlzdCA9IHRoaXMuX2dlb21ldHJpZXNMaXN0O1xuICAgIC8vIE1hcmsgYWxsIHJlc291cmNlcyB1bnVzZWQ7XG4gICAgbWFya1VudXNlZCh0ZXh0dXJlc0xpc3QpO1xuICAgIG1hcmtVbnVzZWQoZ2VvbWV0cmllc0xpc3QpO1xuXG4gICAgLy8gQ29sbGVjdCByZXNvdXJjZXMgdXNlZCBpbiB0aGlzIGZyYW1lLlxuICAgIHZhciBuZXdUZXh0dXJlc0xpc3QgPSBbXTtcbiAgICB2YXIgbmV3R2VvbWV0cmllc0xpc3QgPSBbXTtcbiAgICBjb2xsZWN0UmVzb3VyY2VzKHNjZW5lLCBuZXdUZXh0dXJlc0xpc3QsIG5ld0dlb21ldHJpZXNMaXN0KTtcblxuICAgIC8vIERpc3Bvc2UgdGhvc2UgdW5zZWQgcmVzb3VyY2VzLlxuICAgIGNoZWNrQW5kRGlzcG9zZShyZW5kZXJlciwgdGV4dHVyZXNMaXN0KTtcbiAgICBjaGVja0FuZERpc3Bvc2UocmVuZGVyZXIsIGdlb21ldHJpZXNMaXN0KTtcblxuICAgIHRoaXMuX3RleHR1cmVzTGlzdCA9IG5ld1RleHR1cmVzTGlzdDtcbiAgICB0aGlzLl9nZW9tZXRyaWVzTGlzdCA9IG5ld0dlb21ldHJpZXNMaXN0O1xufTtcblxuXG5mdW5jdGlvbiBtYXJrVW51c2VkKHJlc291cmNlTGlzdCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzb3VyY2VMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJlc291cmNlTGlzdFtpXS5fX3VzZWQgPSAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY2hlY2tBbmREaXNwb3NlKHJlbmRlcmVyLCByZXNvdXJjZUxpc3QpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc291cmNlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIXJlc291cmNlTGlzdFtpXS5fX3VzZWQpIHtcbiAgICAgICAgICAgIHJlc291cmNlTGlzdFtpXS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlVXNlZChyZXNvdXJjZSwgbGlzdCkge1xuICAgIHJlc291cmNlLl9fdXNlZCA9IHJlc291cmNlLl9fdXNlZCB8fCAwO1xuICAgIHJlc291cmNlLl9fdXNlZCsrO1xuICAgIGlmIChyZXNvdXJjZS5fX3VzZWQgPT09IDEpIHtcbiAgICAgICAgLy8gRG9uJ3QgcHVzaCB0byB0aGUgbGlzdCB0d2ljZS5cbiAgICAgICAgbGlzdC5wdXNoKHJlc291cmNlKTtcbiAgICB9XG59XG5mdW5jdGlvbiBjb2xsZWN0UmVzb3VyY2VzKHNjZW5lLCB0ZXh0dXJlUmVzb3VyY2VMaXN0LCBnZW9tZXRyeVJlc291cmNlTGlzdCkge1xuICAgIHZhciBwcmV2TWF0ZXJpYWw7XG4gICAgdmFyIHByZXZHZW9tZXRyeTtcbiAgICBzY2VuZS50cmF2ZXJzZShmdW5jdGlvbiAocmVuZGVyYWJsZSkge1xuICAgICAgICBpZiAocmVuZGVyYWJsZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgdmFyIGdlb21ldHJ5ID0gcmVuZGVyYWJsZS5nZW9tZXRyeTtcbiAgICAgICAgICAgIHZhciBtYXRlcmlhbCA9IHJlbmRlcmFibGUubWF0ZXJpYWw7XG5cbiAgICAgICAgICAgIC8vIFRPRE8gb3B0aW1pemUhIVxuICAgICAgICAgICAgaWYgKG1hdGVyaWFsICE9PSBwcmV2TWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGV4dHVyZVVuaWZvcm1zID0gbWF0ZXJpYWwuZ2V0VGV4dHVyZVVuaWZvcm1zKCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCB0ZXh0dXJlVW5pZm9ybXMubGVuZ3RoOyB1KyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHVuaWZvcm1OYW1lID0gdGV4dHVyZVVuaWZvcm1zW3VdO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0gbWF0ZXJpYWwudW5pZm9ybXNbdW5pZm9ybU5hbWVdLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdW5pZm9ybVR5cGUgPSBtYXRlcmlhbC51bmlmb3Jtc1t1bmlmb3JtTmFtZV0udHlwZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2YWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh1bmlmb3JtVHlwZSA9PT0gJ3QnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVVc2VkKHZhbCwgdGV4dHVyZVJlc291cmNlTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodW5pZm9ybVR5cGUgPT09ICd0dicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdmFsLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbFtrXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVVc2VkKHZhbFtrXSwgdGV4dHVyZVJlc291cmNlTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdlb21ldHJ5ICE9PSBwcmV2R2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVVc2VkKGdlb21ldHJ5LCBnZW9tZXRyeVJlc291cmNlTGlzdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByZXZNYXRlcmlhbCA9IG1hdGVyaWFsO1xuICAgICAgICAgICAgcHJldkdlb21ldHJ5ID0gZ2VvbWV0cnk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2NlbmUubGlnaHRzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgIC8vIFRyYWNrIEFtYmllbnRDdWJlbWFwXG4gICAgICAgIGlmIChzY2VuZS5saWdodHNba10uY3ViZW1hcCkge1xuICAgICAgICAgICAgdXBkYXRlVXNlZChzY2VuZS5saWdodHNba10uY3ViZW1hcCwgdGV4dHVyZVJlc291cmNlTGlzdCk7XG4gICAgICAgIH1cbiAgICB9XG59XG4vKipcbiAqIExvYWQgYSB0ZXh0dXJlIGZyb20gaW1hZ2Ugb3Igc3RyaW5nLlxuICogQHBhcmFtIHtJbWFnZUxpa2V9IGltZ1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSBUZXh0dXJlIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsaXBZPXRydWVdIElmIGZsaXBZLiBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5mbGlwWX1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuY29udmVydFRvUE9UPWZhbHNlXSBGb3JjZSBjb252ZXJ0IE5vbmUgUG93ZXIgb2YgVHdvIHRleHR1cmUgdG8gUG93ZXIgb2YgdHdvIHNvIGl0IGNhbiBiZSB0aWxlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5hbmlzb3Ryb3BpY10gQW5pc290cm9waWMgZmlsdGVyaW5nLiBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5hbmlzb3Ryb3BpY31cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy53cmFwUz1jbGF5LlRleHR1cmUuUkVQRUFUXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS53cmFwU31cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy53cmFwVD1jbGF5LlRleHR1cmUuUkVQRUFUXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS53cmFwVH1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5taW5GaWx0ZXI9Y2xheS5UZXh0dXJlLkxJTkVBUl9NSVBNQVBfTElORUFSXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5taW5GaWx0ZXJ9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWFnRmlsdGVyPWNsYXkuVGV4dHVyZS5MSU5FQVJdIFNlZSB7QGxpbmsgY2xheS5UZXh0dXJlLm1hZ0ZpbHRlcn1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5leHBvc3VyZV0gT25seSBiZSB1c2VkIHdoZW4gc291cmNlIGlzIGEgSERSIGltYWdlLlxuICogQHBhcmFtIHtib29sZWFufSBbdXNlQ2FjaGVdIElmIHVzZSBjYWNoZS5cbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKiBAZXhhbXBsZVxuICogIGFwcC5sb2FkVGV4dHVyZSgnZGlmZnVzZU1hcC5qcGcnKVxuICogICAgICAudGhlbihmdW5jdGlvbiAodGV4dHVyZSkge1xuICogICAgICAgICAgbWF0ZXJpYWwuc2V0KCdkaWZmdXNlTWFwJywgdGV4dHVyZSk7XG4gKiAgICAgIH0pO1xuICovXG5BcHAzRC5wcm90b3R5cGUubG9hZFRleHR1cmUgPSBmdW5jdGlvbiAodXJsT3JJbWcsIG9wdHMsIHVzZUNhY2hlKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBrZXkgPSBnZXRLZXlGcm9tSW1hZ2VMaWtlKHVybE9ySW1nKTtcbiAgICBpZiAodXNlQ2FjaGUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3RleENhY2hlLmdldChrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4Q2FjaGUuZ2V0KGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVE9ETyBQcm9taXNlID9cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHRleHR1cmUgPSBzZWxmLmxvYWRUZXh0dXJlU3luYyh1cmxPckltZywgb3B0cyk7XG4gICAgICAgIGlmICghdGV4dHVyZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgdGV4dHVyZS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNvbHZlKHRleHR1cmUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0ZXh0dXJlLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5fZGlzcG9zZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh1c2VDYWNoZSkge1xuICAgICAgICB0aGlzLl90ZXhDYWNoZS5wdXQoa2V5LCBwcm9taXNlKTtcbiAgICB9XG4gICAgcmV0dXJuIHByb21pc2U7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHRleHR1cmUgZnJvbSBpbWFnZSBvciBzdHJpbmcgc3luY2hyb25vdXNseS4gVGV4dHVyZSBjYW4gYmUgdXNlIGRpcmVjdGx5IGFuZCBkb24ndCBoYXZlIHRvIHdhaXQgZm9yIGl0J3MgbG9hZGVkLlxuICogQHBhcmFtIHtJbWFnZUxpa2V9IGltZ1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSBUZXh0dXJlIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsaXBZPXRydWVdIElmIGZsaXBZLiBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5mbGlwWX1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuY29udmVydFRvUE9UPWZhbHNlXSBGb3JjZSBjb252ZXJ0IE5vbmUgUG93ZXIgb2YgVHdvIHRleHR1cmUgdG8gUG93ZXIgb2YgdHdvIHNvIGl0IGNhbiBiZSB0aWxlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5hbmlzb3Ryb3BpY10gQW5pc290cm9waWMgZmlsdGVyaW5nLiBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5hbmlzb3Ryb3BpY31cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy53cmFwUz1jbGF5LlRleHR1cmUuUkVQRUFUXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS53cmFwU31cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy53cmFwVD1jbGF5LlRleHR1cmUuUkVQRUFUXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS53cmFwVH1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5taW5GaWx0ZXI9Y2xheS5UZXh0dXJlLkxJTkVBUl9NSVBNQVBfTElORUFSXSBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5taW5GaWx0ZXJ9XG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWFnRmlsdGVyPWNsYXkuVGV4dHVyZS5MSU5FQVJdIFNlZSB7QGxpbmsgY2xheS5UZXh0dXJlLm1hZ0ZpbHRlcn1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5leHBvc3VyZV0gT25seSBiZSB1c2VkIHdoZW4gc291cmNlIGlzIGEgSERSIGltYWdlLlxuICogQHJldHVybiB7Y2xheS5UZXh0dXJlMkR9XG4gKiBAZXhhbXBsZVxuICogIHZhciB0ZXh0dXJlID0gYXBwLmxvYWRUZXh0dXJlKCdkaWZmdXNlTWFwLmpwZycsIHtcbiAqICAgICAgYW5pc290cm9waWM6IDgsXG4gKiAgICAgIGZsaXBZOiBmYWxzZVxuICogIH0pO1xuICogIG1hdGVyaWFsLnNldCgnZGlmZnVzZU1hcCcsIHRleHR1cmUpO1xuICovXG5BcHAzRC5wcm90b3R5cGUubG9hZFRleHR1cmVTeW5jID0gZnVuY3Rpb24gKHVybE9ySW1nLCBvcHRzKSB7XG4gICAgdmFyIHRleHR1cmUgPSBuZXcgVGV4dHVyZTJEKG9wdHMpO1xuICAgIGlmICh0eXBlb2YgdXJsT3JJbWcgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGlmICh1cmxPckltZy5tYXRjaCgvLmhkciR8XmRhdGE6YXBwbGljYXRpb25cXC9vY3RldC1zdHJlYW0vKSkge1xuICAgICAgICAgICAgdGV4dHVyZSA9IHRleHR1cmVVdGlsLmxvYWRUZXh0dXJlKHVybE9ySW1nLCB7XG4gICAgICAgICAgICAgICAgZXhwb3N1cmU6IG9wdHMgJiYgb3B0cy5leHBvc3VyZSxcbiAgICAgICAgICAgICAgICBmaWxlVHlwZTogJ2hkcidcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmRpcnR5KCk7XG4gICAgICAgICAgICAgICAgdGV4dHVyZS50cmlnZ2VyKCdzdWNjZXNzJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBvcHRzKSB7XG4gICAgICAgICAgICAgICAgdGV4dHVyZVtrZXldID0gb3B0c1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGV4dHVyZS5sb2FkKHVybE9ySW1nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmIChpc0ltYWdlTGlrZUVsZW1lbnQodXJsT3JJbWcpKSB7XG4gICAgICAgIHRleHR1cmUuaW1hZ2UgPSB1cmxPckltZztcbiAgICAgICAgdGV4dHVyZS5keW5hbWljID0gdXJsT3JJbWcgaW5zdGFuY2VvZiBIVE1MVmlkZW9FbGVtZW50O1xuICAgIH1cbiAgICByZXR1cm4gdGV4dHVyZTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgdGV4dHVyZSBmcm9tIGltYWdlIG9yIHN0cmluZyBzeW5jaHJvbm91c2x5LiBUZXh0dXJlIGNhbiBiZSB1c2UgZGlyZWN0bHkgYW5kIGRvbid0IGhhdmUgdG8gd2FpdCBmb3IgaXQncyBsb2FkZWQuXG4gKiBAcGFyYW0ge0ltYWdlTGlrZX0gaW1nXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdIFRleHR1cmUgb3B0aW9ucy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZmxpcFk9ZmFsc2VdIElmIGZsaXBZLiBTZWUge0BsaW5rIGNsYXkuVGV4dHVyZS5mbGlwWX1cbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKiBAZXhhbXBsZVxuICogIGFwcC5sb2FkVGV4dHVyZUN1YmUoe1xuICogICAgICBweDogJ3NreWJveC9weC5qcGcnLCBweTogJ3NreWJveC9weS5qcGcnLCBwejogJ3NreWJveC9wei5qcGcnLFxuICogICAgICBueDogJ3NreWJveC9ueC5qcGcnLCBueTogJ3NreWJveC9ueS5qcGcnLCBuejogJ3NreWJveC9uei5qcGcnXG4gKiAgfSkudGhlbihmdW5jdGlvbiAodGV4dHVyZSkge1xuICogICAgICBza3lib3guc2V0RW52aXJvbm1lbnRNYXAodGV4dHVyZSk7XG4gKiAgfSlcbiAqL1xuQXBwM0QucHJvdG90eXBlLmxvYWRUZXh0dXJlQ3ViZSA9IGZ1bmN0aW9uIChpbWdMaXN0LCBvcHRzKSB7XG4gICAgdmFyIHRleHR1cmVDdWJlID0gdGhpcy5sb2FkVGV4dHVyZUN1YmVTeW5jKGltZ0xpc3QsIG9wdHMpO1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmICh0ZXh0dXJlQ3ViZS5pc1JlbmRlcmFibGUoKSkge1xuICAgICAgICAgICAgcmVzb2x2ZSh0ZXh0dXJlQ3ViZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0ZXh0dXJlQ3ViZS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRleHR1cmVDdWJlKTtcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHRleHR1cmUgZnJvbSBpbWFnZSBvciBzdHJpbmcgc3luY2hyb25vdXNseS4gVGV4dHVyZSBjYW4gYmUgdXNlIGRpcmVjdGx5IGFuZCBkb24ndCBoYXZlIHRvIHdhaXQgZm9yIGl0J3MgbG9hZGVkLlxuICogQHBhcmFtIHtJbWFnZUxpa2V9IGltZ1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXSBUZXh0dXJlIG9wdGlvbnMuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmZsaXBZPWZhbHNlXSBJZiBmbGlwWS4gU2VlIHtAbGluayBjbGF5LlRleHR1cmUuZmxpcFl9XG4gKiBAcmV0dXJuIHtjbGF5LlRleHR1cmVDdWJlfVxuICogQGV4YW1wbGVcbiAqICB2YXIgdGV4dHVyZSA9IGFwcC5sb2FkVGV4dHVyZUN1YmVTeW5jKHtcbiAqICAgICAgcHg6ICdza3lib3gvcHguanBnJywgcHk6ICdza3lib3gvcHkuanBnJywgcHo6ICdza3lib3gvcHouanBnJyxcbiAqICAgICAgbng6ICdza3lib3gvbnguanBnJywgbnk6ICdza3lib3gvbnkuanBnJywgbno6ICdza3lib3gvbnouanBnJ1xuICogIH0pO1xuICogIHNreWJveC5zZXRFbnZpcm9ubWVudE1hcCh0ZXh0dXJlKTtcbiAqL1xuQXBwM0QucHJvdG90eXBlLmxvYWRUZXh0dXJlQ3ViZVN5bmMgPSBmdW5jdGlvbiAoaW1nTGlzdCwgb3B0cykge1xuICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgIG9wdHMuZmxpcFkgPSBvcHRzLmZsaXBZIHx8IGZhbHNlO1xuICAgIHZhciB0ZXh0dXJlQ3ViZSA9IG5ldyBUZXh0dXJlQ3ViZShvcHRzKTtcbiAgICBpZiAoIWltZ0xpc3QgfHwgIWltZ0xpc3QucHggfHwgIWltZ0xpc3QubnggfHwgIWltZ0xpc3QucHkgfHwgIWltZ0xpc3QubnkgfHwgIWltZ0xpc3QucHogfHwgIWltZ0xpc3QubnopIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGN1YmVtYXAgZm9ybWF0LiBTaG91bGQgYmUgYW4gb2JqZWN0IGluY2x1ZGluZyBweCxueCxweSxueSxweixueicpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGltZ0xpc3QucHggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRleHR1cmVDdWJlLmxvYWQoaW1nTGlzdCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0ZXh0dXJlQ3ViZS5pbWFnZSA9IHV0aWwuY2xvbmUoaW1nTGlzdCk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0dXJlQ3ViZTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgbWF0ZXJpYWwuXG4gKiBAcGFyYW0ge09iamVjdHxTdGFuZGFyZE1hdGVyaWFsTVJDb25maWd9IG1hdGVyaWFsQ29uZmlnLiBtYXRlcmlhbENvbmZpZyBjb250YWlucyBgc2hhZGVyYCwgYHRyYW5zcGFyZW50YCBhbmQgdW5pZm9ybXMgdGhhdCB1c2VkIGluIGNvcnJlc3BvbmRpbmcgdW5pZm9ybXMuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVuaWZvcm1zIGNhbiBiZSBgY29sb3JgLCBgYWxwaGFgIGBkaWZmdXNlTWFwYCBldGMuXG4gKiBAcGFyYW0ge3N0cmluZ3xjbGF5LlNoYWRlcn0gW3NoYWRlcj0nY2xheS5zdGFuZGFyZE1SJ10gRGVmYXVsdCB0byBiZSBzdGFuZGFyZCBzaGFkZXIgd2l0aCBtZXRhbG5lc3MgYW5kIHJvdWdobmVzcyB3b3JrZmxvdy5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RyYW5zcGFyZW50PWZhbHNlXSBJZiBtYXRlcmlhbCBpcyB0cmFuc3BhcmVudC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3RleHR1cmVDb252ZXJ0VG9QT1Q9ZmFsc2VdIEZvcmNlIGNvbnZlcnQgTm9uZSBQb3dlciBvZiBUd28gdGV4dHVyZSB0byBQb3dlciBvZiB0d28gc28gaXQgY2FuIGJlIHRpbGVkLlxuICogQHBhcmFtIHtib29sZWFufSBbdGV4dHVyZUZsaXBZPXRydWVdIElmIGZsaXAgeSBvZiB0ZXh0dXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3RleHR1cmVMb2FkZWRdIENhbGxiYWNrIHdoZW4gc2luZ2xlIHRleHR1cmUgbG9hZGVkLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW3RleHR1cmVzUmVhZHldIENhbGxiYWNrIHdoZW4gYWxsIHRleHR1cmUgbG9hZGVkLlxuICogQHJldHVybiB7Y2xheS5NYXRlcmlhbH1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZU1hdGVyaWFsID0gZnVuY3Rpb24gKG1hdENvbmZpZykge1xuICAgIG1hdENvbmZpZyA9IG1hdENvbmZpZyB8fCB7fTtcbiAgICBtYXRDb25maWcuc2hhZGVyID0gbWF0Q29uZmlnLnNoYWRlciB8fCAnY2xheS5zdGFuZGFyZE1SJztcbiAgICB2YXIgc2hhZGVyID0gbWF0Q29uZmlnLnNoYWRlciBpbnN0YW5jZW9mIFNoYWRlciA/IG1hdENvbmZpZy5zaGFkZXIgOiBzaGFkZXJMaWJyYXJ5LmdldChtYXRDb25maWcuc2hhZGVyKTtcbiAgICB2YXIgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoe1xuICAgICAgICBzaGFkZXI6IHNoYWRlclxuICAgIH0pO1xuICAgIGlmIChtYXRDb25maWcubmFtZSkge1xuICAgICAgICBtYXRlcmlhbC5uYW1lID0gbWF0Q29uZmlnLm5hbWU7XG4gICAgfVxuXG4gICAgdmFyIHRleHR1cmVzTG9hZGluZyA9IFtdO1xuICAgIGZ1bmN0aW9uIG1ha2VUZXh0dXJlU2V0dGVyKGtleSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHRleHR1cmUpIHtcbiAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oa2V5LCB0ZXh0dXJlKTtcbiAgICAgICAgICAgIG1hdENvbmZpZy50ZXh0dXJlTG9hZGVkICYmIG1hdENvbmZpZy50ZXh0dXJlTG9hZGVkKGtleSwgdGV4dHVyZSk7XG4gICAgICAgICAgICByZXR1cm4gdGV4dHVyZTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZm9yICh2YXIga2V5IGluIG1hdENvbmZpZykge1xuICAgICAgICBpZiAobWF0ZXJpYWwudW5pZm9ybXNba2V5XSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IG1hdENvbmZpZ1trZXldO1xuICAgICAgICAgICAgaWYgKChtYXRlcmlhbC51bmlmb3Jtc1trZXldLnR5cGUgPT09ICd0JyB8fCBpc0ltYWdlTGlrZUVsZW1lbnQodmFsKSlcbiAgICAgICAgICAgICAgICAmJiAhKHZhbCBpbnN0YW5jZW9mIFRleHR1cmUpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICAvLyBUcnkgdG8gbG9hZCBhIHRleHR1cmUuXG4gICAgICAgICAgICAgICAgdGV4dHVyZXNMb2FkaW5nLnB1c2godGhpcy5sb2FkVGV4dHVyZSh2YWwsIHtcbiAgICAgICAgICAgICAgICAgICAgY29udmVydFRvUE9UOiBtYXRDb25maWcudGV4dHVyZUNvbnZlcnRUb1BPVCB8fCBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgZmxpcFk6IG1hdENvbmZpZy50ZXh0dXJlRmxpcFkgPT0gbnVsbCA/IHRydWUgOiBtYXRDb25maWcudGV4dHVyZUZsaXBZXG4gICAgICAgICAgICAgICAgfSkudGhlbihtYWtlVGV4dHVyZVNldHRlcihrZXkpKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKGtleSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXRDb25maWcudHJhbnNwYXJlbnQpIHtcbiAgICAgICAgbWF0Q29uZmlnLmRlcHRoTWFzayA9IGZhbHNlO1xuICAgICAgICBtYXRDb25maWcudHJhbnNwYXJlbnQgPSB0cnVlO1xuICAgIH1cblxuXG4gICAgaWYgKG1hdENvbmZpZy50ZXh0dXJlc1JlYWR5KSB7XG4gICAgICAgIFByb21pc2UuYWxsKHRleHR1cmVzTG9hZGluZykudGhlbihmdW5jdGlvbiAodGV4dHVyZXMpIHtcbiAgICAgICAgICAgIG1hdENvbmZpZy50ZXh0dXJlc1JlYWR5KHRleHR1cmVzKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGVyaWFsO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBjdWJlIG1lc2ggYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUgb3IgdGhlIGdpdmVuIHBhcmVudCBub2RlLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdHxjbGF5Lk1hdGVyaWFsfSBbbWF0ZXJpYWxdXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gW3BhcmVudE5vZGVdIFBhcmVudCBub2RlIHRvIGFwcGVuZC4gRGVmYXVsdCB0byBiZSBzY2VuZS5cbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj58bnVtYmVyfSBbc3ViZGl2aXNpb249MV0gU3ViZGl2aXNpb24gb2YgY3ViZS5cbiAqICAgICAgICAgIENhbiBiZSBhIG51bWJlciB0byByZXByZXNlbnQgYm90aCB3aWR0aCwgaGVpZ2h0IGFuZCBkZXB0aCBkaW1lbnNpb25zLiBPciBhbiBhcnJheSB0byByZXByZXNlbnQgdGhlbSByZXNwZWN0aXZlbHkuXG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKiBAZXhhbXBsZVxuICogIC8vIENyZWF0ZSBhIHdoaXRlIGN1YmUuXG4gKiAgYXBwLmNyZWF0ZUN1YmUoKVxuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlQ3ViZSA9IGZ1bmN0aW9uIChtYXRlcmlhbCwgcGFyZW50Tm9kZSwgc3ViZGl2KSB7XG4gICAgaWYgKHN1YmRpdiA9PSBudWxsKSB7XG4gICAgICAgIHN1YmRpdiA9IDE7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3ViZGl2ID09PSAnbnVtYmVyJykge1xuICAgICAgICBzdWJkaXYgPSBbc3ViZGl2LCBzdWJkaXYsIHN1YmRpdl07XG4gICAgfVxuXG4gICAgdmFyIGdlb0tleSA9ICdjdWJlLScgKyBzdWJkaXYuam9pbignLScpO1xuICAgIHZhciBjdWJlID0gdGhpcy5fZ2VvQ2FjaGUuZ2V0KGdlb0tleSk7XG4gICAgaWYgKCFjdWJlKSB7XG4gICAgICAgIGN1YmUgPSBuZXcgQ3ViZUdlbyh7XG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiBzdWJkaXZbMF0sXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogc3ViZGl2WzFdLFxuICAgICAgICAgICAgZGVwdGhTZWdtZW50czogc3ViZGl2WzJdXG4gICAgICAgIH0pO1xuICAgICAgICBjdWJlLmdlbmVyYXRlVGFuZ2VudHMoKTtcbiAgICAgICAgdGhpcy5fZ2VvQ2FjaGUucHV0KGdlb0tleSwgY3ViZSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZU1lc2goY3ViZSwgbWF0ZXJpYWwsIHBhcmVudE5vZGUpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgYSBjdWJlIG1lc2ggdGhhdCBjYW1lcmEgaXMgaW5zaWRlIHRoZSBjdWJlLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdHxjbGF5Lk1hdGVyaWFsfSBbbWF0ZXJpYWxdXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gW3BhcmVudE5vZGVdIFBhcmVudCBub2RlIHRvIGFwcGVuZC4gRGVmYXVsdCB0byBiZSBzY2VuZS5cbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj58bnVtYmVyfSBbc3ViZGl2aXNpb249MV0gU3ViZGl2aXNpb24gb2YgY3ViZS5cbiAqICAgICAgICAgIENhbiBiZSBhIG51bWJlciB0byByZXByZXNlbnQgYm90aCB3aWR0aCwgaGVpZ2h0IGFuZCBkZXB0aCBkaW1lbnNpb25zLiBPciBhbiBhcnJheSB0byByZXByZXNlbnQgdGhlbSByZXNwZWN0aXZlbHkuXG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKiBAZXhhbXBsZVxuICogIC8vIENyZWF0ZSBhIHdoaXRlIGN1YmUgaW5zaWRlLlxuICogIGFwcC5jcmVhdGVDdWJlSW5zaWRlKClcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZUN1YmVJbnNpZGUgPSBmdW5jdGlvbiAobWF0ZXJpYWwsIHBhcmVudE5vZGUsIHN1YmRpdikge1xuICAgIGlmIChzdWJkaXYgPT0gbnVsbCkge1xuICAgICAgICBzdWJkaXYgPSAxO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN1YmRpdiA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgc3ViZGl2ID0gW3N1YmRpdiwgc3ViZGl2LCBzdWJkaXZdO1xuICAgIH1cbiAgICB2YXIgZ2VvS2V5ID0gJ2N1YmVJbnNpZGUtJyArIHN1YmRpdi5qb2luKCctJyk7XG4gICAgdmFyIGN1YmUgPSB0aGlzLl9nZW9DYWNoZS5nZXQoZ2VvS2V5KTtcbiAgICBpZiAoIWN1YmUpIHtcbiAgICAgICAgY3ViZSA9IG5ldyBDdWJlR2VvKHtcbiAgICAgICAgICAgIGluc2lkZTogdHJ1ZSxcbiAgICAgICAgICAgIHdpZHRoU2VnbWVudHM6IHN1YmRpdlswXSxcbiAgICAgICAgICAgIGhlaWdodFNlZ21lbnRzOiBzdWJkaXZbMV0sXG4gICAgICAgICAgICBkZXB0aFNlZ21lbnRzOiBzdWJkaXZbMl1cbiAgICAgICAgfSk7XG4gICAgICAgIGN1YmUuZ2VuZXJhdGVUYW5nZW50cygpO1xuICAgICAgICB0aGlzLl9nZW9DYWNoZS5wdXQoZ2VvS2V5LCBjdWJlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNoKGN1YmUsIG1hdGVyaWFsLCBwYXJlbnROb2RlKTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgc3BoZXJlIG1lc2ggYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUgb3IgdGhlIGdpdmVuIHBhcmVudCBub2RlLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdHxjbGF5Lk1hdGVyaWFsfSBbbWF0ZXJpYWxdXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gW3BhcmVudE5vZGVdIFBhcmVudCBub2RlIHRvIGFwcGVuZC4gRGVmYXVsdCB0byBiZSBzY2VuZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3ViZGl2aXNpb249MjBdIFN1YmRpdmlzaW9uIG9mIHNwaGVyZS5cbiAqIEByZXR1cm4ge2NsYXkuTWVzaH1cbiAqIEBleGFtcGxlXG4gKiAgLy8gQ3JlYXRlIGEgc2VtaS10cmFuc3BhcmVudCBzcGhlcmUuXG4gKiAgYXBwLmNyZWF0ZVNwaGVyZSh7XG4gKiAgICAgIGNvbG9yOiBbMCwgMCwgMV0sXG4gKiAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICogICAgICBhbHBoYTogMC41XG4gKiAgfSlcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZVNwaGVyZSA9IGZ1bmN0aW9uIChtYXRlcmlhbCwgcGFyZW50Tm9kZSwgc3ViZGl2aXNpb24pIHtcbiAgICBpZiAoc3ViZGl2aXNpb24gPT0gbnVsbCkge1xuICAgICAgICBzdWJkaXZpc2lvbiA9IDIwO1xuICAgIH1cbiAgICB2YXIgZ2VvS2V5ID0gJ3NwaGVyZS0nICsgc3ViZGl2aXNpb247XG4gICAgdmFyIHNwaGVyZSA9IHRoaXMuX2dlb0NhY2hlLmdldChnZW9LZXkpO1xuICAgIGlmICghc3BoZXJlKSB7XG4gICAgICAgIHNwaGVyZSA9IG5ldyBTcGhlcmVHZW8oe1xuICAgICAgICAgICAgd2lkdGhTZWdtZW50czogc3ViZGl2aXNpb24gKiAyLFxuICAgICAgICAgICAgaGVpZ2h0U2VnbWVudHM6IHN1YmRpdmlzaW9uXG4gICAgICAgIH0pO1xuICAgICAgICBzcGhlcmUuZ2VuZXJhdGVUYW5nZW50cygpO1xuICAgICAgICB0aGlzLl9nZW9DYWNoZS5wdXQoZ2VvS2V5LCBzcGhlcmUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVNZXNoKHNwaGVyZSwgbWF0ZXJpYWwsIHBhcmVudE5vZGUpO1xufTtcblxuLy8gVE9ETyBtYXkgYmUgbW9kaWZpZWQ/XG4vKipcbiAqIENyZWF0ZSBhIHBsYW5lIG1lc2ggYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUgb3IgdGhlIGdpdmVuIHBhcmVudCBub2RlLlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge09iamVjdHxjbGF5Lk1hdGVyaWFsfSBbbWF0ZXJpYWxdXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gW3BhcmVudE5vZGVdIFBhcmVudCBub2RlIHRvIGFwcGVuZC4gRGVmYXVsdCB0byBiZSBzY2VuZS5cbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj58bnVtYmVyfSBbc3ViZGl2aXNpb249MV0gU3ViZGl2aXNpb24gb2YgcGxhbmUuXG4gKiAgICAgICAgICBDYW4gYmUgYSBudW1iZXIgdG8gcmVwcmVzZW50IGJvdGggd2lkdGggYW5kIGhlaWdodCBkaW1lbnNpb25zLiBPciBhbiBhcnJheSB0byByZXByZXNlbnQgdGhlbSByZXNwZWN0aXZlbHkuXG4gKiBAcmV0dXJuIHtjbGF5Lk1lc2h9XG4gKiBAZXhhbXBsZVxuICogIC8vIENyZWF0ZSBhIHJlZCBjb2xvciBwbGFuZS5cbiAqICBhcHAuY3JlYXRlUGxhbmUoe1xuICogICAgICBjb2xvcjogWzEsIDAsIDBdXG4gKiAgfSlcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZVBsYW5lID0gZnVuY3Rpb24gKG1hdGVyaWFsLCBwYXJlbnROb2RlLCBzdWJkaXYpIHtcbiAgICBpZiAoc3ViZGl2ID09IG51bGwpIHtcbiAgICAgICAgc3ViZGl2ID0gMTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdWJkaXYgPT09ICdudW1iZXInKSB7XG4gICAgICAgIHN1YmRpdiA9IFtzdWJkaXYsIHN1YmRpdl07XG4gICAgfVxuICAgIHZhciBnZW9LZXkgPSAncGxhbmUtJyArIHN1YmRpdi5qb2luKCctJyk7XG4gICAgdmFyIHBsYW5lR2VvID0gdGhpcy5fZ2VvQ2FjaGUuZ2V0KGdlb0tleSk7XG4gICAgaWYgKCFwbGFuZUdlbykge1xuICAgICAgICBwbGFuZUdlbyA9IG5ldyBQbGFuZUdlbyh7XG4gICAgICAgICAgICB3aWR0aFNlZ21lbnRzOiBzdWJkaXZbMF0sXG4gICAgICAgICAgICBoZWlnaHRTZWdtZW50czogc3ViZGl2WzFdXG4gICAgICAgIH0pO1xuICAgICAgICBwbGFuZUdlby5nZW5lcmF0ZVRhbmdlbnRzKCk7XG4gICAgICAgIHRoaXMuX2dlb0NhY2hlLnB1dChnZW9LZXksIHBsYW5lR2VvKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlTWVzaChwbGFuZUdlbywgbWF0ZXJpYWwsIHBhcmVudE5vZGUpO1xufTtcblxuLyoqXG4gKiBDcmVhdGUgbWVzaCB3aXRoIHBhcmFtZXRyaWMgc3VyZmFjZSBmdW5jdGlvblxuICogQHBhcmFtIHtPYmplY3R8Y2xheS5NYXRlcmlhbH0gW21hdGVyaWFsXVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0byBhcHBlbmQuIERlZmF1bHQgdG8gYmUgc2NlbmUuXG4gKiBAcGFyYW0ge09iamVjdH0gZ2VuZXJhdG9yXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBnZW5lcmF0b3IueFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2VuZXJhdG9yLnlcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGdlbmVyYXRvci56XG4gKiBAcGFyYW0ge0FycmF5fSBbZ2VuZXJhdG9yLnU9WzAsIDEsIDAuMDVdXVxuICogQHBhcmFtIHtBcnJheX0gW2dlbmVyYXRvci52PVswLCAxLCAwLjA1XV1cbiAqIEByZXR1cm4ge2NsYXkuTWVzaH1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZVBhcmFtZXRyaWNTdXJmYWNlID0gZnVuY3Rpb24gKG1hdGVyaWFsLCBwYXJlbnROb2RlLCBnZW5lcmF0b3IpIHtcbiAgICB2YXIgZ2VvID0gbmV3IFBhcmFtZXRyaWNTdXJmYWNlR2VvKHtcbiAgICAgICAgZ2VuZXJhdG9yOiBnZW5lcmF0b3JcbiAgICB9KTtcbiAgICBnZW8uZ2VuZXJhdGVUYW5nZW50cygpO1xuICAgIHJldHVybiB0aGlzLmNyZWF0ZU1lc2goZ2VvLCBtYXRlcmlhbCwgcGFyZW50Tm9kZSk7XG59O1xuXG5cbi8qKlxuICogQ3JlYXRlIGEgZ2VuZXJhbCBtZXNoIHdpdGggZ2l2ZW4gZ2VvbWV0cnkgaW5zdGFuY2UgYW5kIG1hdGVyaWFsIGNvbmZpZy5cbiAqIEBwYXJhbSB7Y2xheS5HZW9tZXRyeX0gZ2VvbWV0cnlcbiAqIEByZXR1cm4ge2NsYXkuTWVzaH1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZU1lc2ggPSBmdW5jdGlvbiAoZ2VvbWV0cnksIG1hdCwgcGFyZW50Tm9kZSkge1xuICAgIHZhciBtZXNoID0gbmV3IE1lc2goe1xuICAgICAgICBnZW9tZXRyeTogZ2VvbWV0cnksXG4gICAgICAgIG1hdGVyaWFsOiBtYXQgaW5zdGFuY2VvZiBNYXRlcmlhbCA/IG1hdCA6IHRoaXMuY3JlYXRlTWF0ZXJpYWwobWF0KVxuICAgIH0pO1xuICAgIHBhcmVudE5vZGUgPSBwYXJlbnROb2RlIHx8IHRoaXMuc2NlbmU7XG4gICAgcGFyZW50Tm9kZS5hZGQobWVzaCk7XG4gICAgcmV0dXJuIG1lc2g7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbiBlbXB0eSBub2RlXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gcGFyZW50Tm9kZVxuICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlTm9kZSA9IGZ1bmN0aW9uIChwYXJlbnROb2RlKSB7XG4gICAgdmFyIG5vZGUgPSBuZXcgTm9kZSgpO1xuICAgIHBhcmVudE5vZGUgPSBwYXJlbnROb2RlIHx8IHRoaXMuc2NlbmU7XG4gICAgcGFyZW50Tm9kZS5hZGQobm9kZSk7XG4gICAgcmV0dXJuIG5vZGU7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHBlcnNwZWN0aXZlIG9yIG9ydGhvZ3JhcGhpYyBjYW1lcmEgYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gcG9zaXRpb25cbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj58Y2xheS5WZWN0b3IzfSB0YXJnZXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBbdHlwZT1cInBlcnNwZWN0aXZlXCJdIENhbiBiZSAncGVyc3BlY3RpdmUnIG9yICdvcnRob2dyYXBoaWMnKGluIHNob3J0ICdvcnRobycpXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gW2V4dGVudF0gRXh0ZW50IGlzIGF2YWlsYWJsZSBvbmx5IGlmIHR5cGUgaXMgb3J0aG9ncmFwaGljLlxuICogQHJldHVybiB7Y2xheS5jYW1lcmEuUGVyc3BlY3RpdmV8Y2xheS5jYW1lcmEuT3J0aG9ncmFwaGljfVxuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlQ2FtZXJhID0gZnVuY3Rpb24gKHBvc2l0aW9uLCB0YXJnZXQsIHR5cGUsIGV4dGVudCkge1xuICAgIHZhciBDYW1lcmFDdG9yO1xuICAgIHZhciBpc09ydGhvID0gZmFsc2U7XG4gICAgaWYgKHR5cGUgPT09ICdvcnRobycgfHwgdHlwZSA9PT0gJ29ydGhvZ3JhcGhpYycpIHtcbiAgICAgICAgaXNPcnRobyA9IHRydWU7XG4gICAgICAgIENhbWVyYUN0b3IgPSBPcnRob2dyYXBoaWNDYW1lcmE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBpZiAodHlwZSAmJiB0eXBlICE9PSAncGVyc3BlY3RpdmUnKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmtvd24gY2FtZXJhIHR5cGUgJyArIHR5cGUgKyAnLiBVc2UgZGVmYXVsdCBwZXJzcGVjdGl2ZSBjYW1lcmEnKTtcbiAgICAgICAgfVxuICAgICAgICBDYW1lcmFDdG9yID0gUGVyc3BlY3RpdmVDYW1lcmE7XG4gICAgfVxuXG4gICAgdmFyIGNhbWVyYSA9IG5ldyBDYW1lcmFDdG9yKCk7XG4gICAgaWYgKHBvc2l0aW9uIGluc3RhbmNlb2YgVmVjdG9yMykge1xuICAgICAgICBjYW1lcmEucG9zaXRpb24uY29weShwb3NpdGlvbik7XG4gICAgfVxuICAgIGVsc2UgaWYgKHBvc2l0aW9uIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldEFycmF5KHBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAodGFyZ2V0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgdGFyZ2V0ID0gbmV3IFZlY3RvcjModGFyZ2V0WzBdLCB0YXJnZXRbMV0sIHRhcmdldFsyXSk7XG4gICAgfVxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBWZWN0b3IzKSB7XG4gICAgICAgIGNhbWVyYS5sb29rQXQodGFyZ2V0KTtcbiAgICB9XG5cbiAgICBpZiAoZXh0ZW50ICYmIGlzT3J0aG8pIHtcbiAgICAgICAgZXh0ZW50ID0gZXh0ZW50LmFycmF5IHx8IGV4dGVudDtcbiAgICAgICAgY2FtZXJhLmxlZnQgPSAtZXh0ZW50WzBdIC8gMjtcbiAgICAgICAgY2FtZXJhLnJpZ2h0ID0gZXh0ZW50WzBdIC8gMjtcbiAgICAgICAgY2FtZXJhLnRvcCA9IGV4dGVudFsxXSAvIDI7XG4gICAgICAgIGNhbWVyYS5ib3R0b20gPSAtZXh0ZW50WzFdIC8gMjtcbiAgICAgICAgY2FtZXJhLm5lYXIgPSAwO1xuICAgICAgICBjYW1lcmEuZmFyID0gZXh0ZW50WzJdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY2FtZXJhLmFzcGVjdCA9IHRoaXMucmVuZGVyZXIuZ2V0Vmlld3BvcnRBc3BlY3QoKTtcbiAgICB9XG5cbiAgICB0aGlzLnNjZW5lLmFkZChjYW1lcmEpO1xuXG4gICAgcmV0dXJuIGNhbWVyYTtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgZGlyZWN0aW9uYWwgbGlnaHQgYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gZGlyIEEgVmVjdG9yMyBvciBhcnJheSB0byByZXByZXNlbnQgdGhlIGRpcmVjdGlvbi5cbiAqIEBwYXJhbSB7Q29sb3J9IFtjb2xvcj0nI2ZmZiddIENvbG9yIG9mIGRpcmVjdGlvbmFsIGxpZ2h0LCBkZWZhdWx0IHRvIGJlIHdoaXRlLlxuICogQHBhcmFtIHtudW1iZXJ9IFtpbnRlbnNpdHldIEludGVuc2l0eSBvZiBkaXJlY3Rpb25hbCBsaWdodCwgZGVmYXVsdCB0byBiZSAxLlxuICpcbiAqIEBleGFtcGxlXG4gKiAgYXBwLmNyZWF0ZURpcmVjdGlvbmFsTGlnaHQoWy0xLCAtMSwgLTFdLCAnI2ZmZicsIDIpO1xuICovXG5BcHAzRC5wcm90b3R5cGUuY3JlYXRlRGlyZWN0aW9uYWxMaWdodCA9IGZ1bmN0aW9uIChkaXIsIGNvbG9yLCBpbnRlbnNpdHkpIHtcbiAgICB2YXIgbGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgpO1xuICAgIGlmIChkaXIgaW5zdGFuY2VvZiBWZWN0b3IzKSB7XG4gICAgICAgIGRpciA9IGRpci5hcnJheTtcbiAgICB9XG4gICAgbGlnaHQucG9zaXRpb24uc2V0QXJyYXkoZGlyKS5uZWdhdGUoKTtcbiAgICBsaWdodC5sb29rQXQoVmVjdG9yMy5aRVJPKTtcbiAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb2xvciA9IHBhcnNlQ29sb3IoY29sb3IpO1xuICAgIH1cbiAgICBjb2xvciAhPSBudWxsICYmIChsaWdodC5jb2xvciA9IGNvbG9yKTtcbiAgICBpbnRlbnNpdHkgIT0gbnVsbCAmJiAobGlnaHQuaW50ZW5zaXR5ID0gaW50ZW5zaXR5KTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcbiAgICByZXR1cm4gbGlnaHQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHNwb3QgbGlnaHQgYW5kIGFkZCBpdCB0byB0aGUgc2NlbmUuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gcG9zaXRpb24gUG9zaXRpb24gb2YgdGhlIHNwb3QgbGlnaHQuXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fGNsYXkuVmVjdG9yM30gW3RhcmdldF0gVGFyZ2V0IHBvc2l0aW9uIHdoZXJlIHNwb3QgbGlnaHQgcG9pbnRzIHRvLlxuICogQHBhcmFtIHtudW1iZXJ9IFtyYW5nZT0yMF0gRmFsbG9mZiByYW5nZSBvZiBzcG90IGxpZ2h0LiBEZWZhdWx0IHRvIGJlIDIwLlxuICogQHBhcmFtIHtDb2xvcn0gW2NvbG9yPScjZmZmJ10gQ29sb3Igb2Ygc3BvdCBsaWdodCwgZGVmYXVsdCB0byBiZSB3aGl0ZS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbaW50ZW5zaXR5PTFdIEludGVuc2l0eSBvZiBzcG90IGxpZ2h0LCBkZWZhdWx0IHRvIGJlIDEuXG4gKiBAcGFyYW0ge251bWJlcn0gW3VtYnJhQW5nbGU9MzBdIFVtYnJhIGFuZ2xlIG9mIHNwb3QgbGlnaHQuIERlZmF1bHQgdG8gYmUgMzAgZGVncmVlIGZyb20gdGhlIG1pZGRsZSBsaW5lLlxuICogQHBhcmFtIHtudW1iZXJ9IFtwZW51bWJyYUFuZ2xlPTQ1XSBQZW51bWJyYSBhbmdsZSBvZiBzcG90IGxpZ2h0LiBEZWZhdWx0IHRvIGJlIDQ1IGRlZ3JlZSBmcm9tIHRoZSBtaWRkbGUgbGluZS5cbiAqXG4gKiBAZXhhbXBsZVxuICogIGFwcC5jcmVhdGVTcG90TGlnaHQoWzUsIDUsIDVdLCBbMCwgMCwgMF0sIDIwLCAjOTAwKTtcbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZVNwb3RMaWdodCA9IGZ1bmN0aW9uIChwb3NpdGlvbiwgdGFyZ2V0LCByYW5nZSwgY29sb3IsIGludGVuc2l0eSwgdW1icmFBbmdsZSwgcGVudW1icmFBbmdsZSkge1xuICAgIHZhciBsaWdodCA9IG5ldyBTcG90TGlnaHQoKTtcbiAgICBsaWdodC5wb3NpdGlvbi5zZXRBcnJheShwb3NpdGlvbiBpbnN0YW5jZW9mIFZlY3RvcjMgPyBwb3NpdGlvbi5hcnJheSA6IHBvc2l0aW9uKTtcblxuICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICB0YXJnZXQgPSBuZXcgVmVjdG9yMyh0YXJnZXRbMF0sIHRhcmdldFsxXSwgdGFyZ2V0WzJdKTtcbiAgICB9XG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIFZlY3RvcjMpIHtcbiAgICAgICAgbGlnaHQubG9va0F0KHRhcmdldCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29sb3IgPSBwYXJzZUNvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgcmFuZ2UgIT0gbnVsbCAmJiAobGlnaHQucmFuZ2UgPSByYW5nZSk7XG4gICAgY29sb3IgIT0gbnVsbCAmJiAobGlnaHQuY29sb3IgPSBjb2xvcik7XG4gICAgaW50ZW5zaXR5ICE9IG51bGwgJiYgKGxpZ2h0LmludGVuc2l0eSA9IGludGVuc2l0eSk7XG4gICAgdW1icmFBbmdsZSAhPSBudWxsICYmIChsaWdodC51bWJyYUFuZ2xlID0gdW1icmFBbmdsZSk7XG4gICAgcGVudW1icmFBbmdsZSAhPSBudWxsICYmIChsaWdodC5wZW51bWJyYUFuZ2xlID0gcGVudW1icmFBbmdsZSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XG5cbiAgICByZXR1cm4gbGlnaHQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhIHBvaW50IGxpZ2h0LlxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPnxjbGF5LlZlY3RvcjN9IHBvc2l0aW9uIFBvc2l0aW9uIG9mIHBvaW50IGxpZ2h0Li5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcmFuZ2U9MTAwXSBGYWxsb2ZmIHJhbmdlIG9mIHBvaW50IGxpZ2h0LlxuICogQHBhcmFtIHtDb2xvcn0gW2NvbG9yPScjZmZmJ10gQ29sb3Igb2YgcG9pbnQgbGlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ludGVuc2l0eT0xXSBJbnRlbnNpdHkgb2YgcG9pbnQgbGlnaHQuXG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVQb2ludExpZ2h0ID0gZnVuY3Rpb24gKHBvc2l0aW9uLCByYW5nZSwgY29sb3IsIGludGVuc2l0eSkge1xuICAgIHZhciBsaWdodCA9IG5ldyBQb2ludExpZ2h0KCk7XG4gICAgbGlnaHQucG9zaXRpb24uc2V0QXJyYXkocG9zaXRpb24gaW5zdGFuY2VvZiBWZWN0b3IzID8gcG9zaXRpb24uYXJyYXkgOiBwb3NpdGlvbik7XG5cbiAgICBpZiAodHlwZW9mIGNvbG9yID09PSAnc3RyaW5nJykge1xuICAgICAgICBjb2xvciA9IHBhcnNlQ29sb3IoY29sb3IpO1xuICAgIH1cbiAgICByYW5nZSAhPSBudWxsICYmIChsaWdodC5yYW5nZSA9IHJhbmdlKTtcbiAgICBjb2xvciAhPSBudWxsICYmIChsaWdodC5jb2xvciA9IGNvbG9yKTtcbiAgICBpbnRlbnNpdHkgIT0gbnVsbCAmJiAobGlnaHQuaW50ZW5zaXR5ID0gaW50ZW5zaXR5KTtcblxuICAgIHRoaXMuc2NlbmUuYWRkKGxpZ2h0KTtcblxuICAgIHJldHVybiBsaWdodDtcbn07XG5cbi8qKlxuICogQ3JlYXRlIGEgYW1iaWVudCBsaWdodC5cbiAqIEBwYXJhbSB7Q29sb3J9IFtjb2xvcj0nI2ZmZiddIENvbG9yIG9mIGFtYmllbnQgbGlnaHQuXG4gKiBAcGFyYW0ge251bWJlcn0gW2ludGVuc2l0eT0xXSBJbnRlbnNpdHkgb2YgYW1iaWVudCBsaWdodC5cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNyZWF0ZUFtYmllbnRMaWdodCA9IGZ1bmN0aW9uIChjb2xvciwgaW50ZW5zaXR5KSB7XG4gICAgdmFyIGxpZ2h0ID0gbmV3IEFtYmllbnRMaWdodCgpO1xuXG4gICAgaWYgKHR5cGVvZiBjb2xvciA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgY29sb3IgPSBwYXJzZUNvbG9yKGNvbG9yKTtcbiAgICB9XG4gICAgY29sb3IgIT0gbnVsbCAmJiAobGlnaHQuY29sb3IgPSBjb2xvcik7XG4gICAgaW50ZW5zaXR5ICE9IG51bGwgJiYgKGxpZ2h0LmludGVuc2l0eSA9IGludGVuc2l0eSk7XG5cbiAgICB0aGlzLnNjZW5lLmFkZChsaWdodCk7XG5cbiAgICByZXR1cm4gbGlnaHQ7XG59O1xuXG4vKipcbiAqIENyZWF0ZSBhbiBjdWJlbWFwIGFtYmllbnQgbGlnaHQgYW5kIGFuIHNwaGVyaWNhbCBoYXJtb25pYyBhbWJpZW50IGxpZ2h0XG4gKiBmb3Igc3BlY3VsYXIgYW5kIGRpZmZ1c2UgbGlnaHRpbmcgaW4gUEJSIHJlbmRlcmluZ1xuICogQHBhcmFtIHtJbWFnZUxpa2V8VGV4dHVyZUN1YmV9IFtlbnZJbWFnZV0gUGFub3JhbWEgZW52aXJvbm1lbnQgaW1hZ2UsIEhEUiBmb3JtYXQgaXMgYmV0dGVyLiBPciBhIHByZSBsb2FkZWQgdGV4dHVyZSBjdWJlXG4gKiBAcGFyYW0ge251bWJlcn0gW3NwZWN1bGFySW50ZW5zdGl0eT0wLjddIEludGVuc2l0eSBvZiBzcGVjdWxhciBsaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZGlmZnVzZUludGVuc3RpdHk9MC43XSBJbnRlbnNpdHkgb2YgZGlmZnVzZSBsaWdodC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZXhwb3N1cmU9MV0gRXhwb3N1cmUgb2YgSERSIGltYWdlLiBPbmx5IGlmIGltYWdlIGluIGZpcnN0IHBhcmFtdGVyIGlzIEhEUi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbcHJlZmlsdGVyZWRDdWJlbWFwU2l6ZT0zMl0gVGhlIHNpemUgb2YgcHJlZmlsZXJ0ZWQgY3ViZW1hcC4gTGFyZ2VyIHZhbHVlIHdpbGwgdGFrZSBtb3JlIHRpbWUgdG8gZG8gZXhwZW5zaXZlIHByZWZpbHRlcmluZy5cbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKi9cbkFwcDNELnByb3RvdHlwZS5jcmVhdGVBbWJpZW50Q3ViZW1hcExpZ2h0ID0gZnVuY3Rpb24gKGVudkltYWdlLCBzcGVjSW50ZW5zaXR5LCBkaWZmSW50ZW5zaXR5LCBleHBvc3VyZSwgcHJlZmlsdGVyZWRDdWJlbWFwU2l6ZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBpZiAoZXhwb3N1cmUgPT0gbnVsbCkge1xuICAgICAgICBleHBvc3VyZSA9IDA7XG4gICAgfVxuICAgIGlmIChwcmVmaWx0ZXJlZEN1YmVtYXBTaXplID09IG51bGwpIHtcbiAgICAgICAgcHJlZmlsdGVyZWRDdWJlbWFwU2l6ZSA9IDMyO1xuICAgIH1cblxuICAgIHZhciBzY2VuZSA9IHRoaXMuc2NlbmU7XG5cbiAgICB2YXIgbG9hZFByb21pc2U7XG4gICAgaWYgKGVudkltYWdlLnRleHR1cmVUeXBlID09PSAndGV4dHVyZUN1YmUnKSB7XG4gICAgICAgIGxvYWRQcm9taXNlID0gZW52SW1hZ2UuaXNSZW5kZXJhYmxlKClcbiAgICAgICAgICAgID8gUHJvbWlzZS5yZXNvbHZlKGVudkltYWdlKVxuICAgICAgICAgICAgOiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgZW52SW1hZ2Uuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZW52SW1hZ2UpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBsb2FkUHJvbWlzZSA9IHRoaXMubG9hZFRleHR1cmUoZW52SW1hZ2UsIHtcbiAgICAgICAgICAgIGV4cG9zdXJlOiBleHBvc3VyZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9hZFByb21pc2UudGhlbihmdW5jdGlvbiAoZW52VGV4dHVyZSkge1xuICAgICAgICB2YXIgc3BlY0xpZ2h0ID0gbmV3IEFtYmllbnRDdWJlbWFwTGlnaHQoe1xuICAgICAgICAgICAgaW50ZW5zaXR5OiBzcGVjSW50ZW5zaXR5ICE9IG51bGwgPyBzcGVjSW50ZW5zaXR5IDogMC43XG4gICAgICAgIH0pO1xuICAgICAgICBzcGVjTGlnaHQuY3ViZW1hcCA9IGVudlRleHR1cmU7XG4gICAgICAgIGVudlRleHR1cmUuZmxpcFkgPSBmYWxzZTtcbiAgICAgICAgLy8gVE9ETyBDYWNoZSBwcmVmaWx0ZXIgP1xuICAgICAgICBzcGVjTGlnaHQucHJlZmlsdGVyKHNlbGYucmVuZGVyZXIsIDMyKTtcblxuICAgICAgICB2YXIgZGlmZkxpZ2h0ID0gbmV3IEFtYmllbnRTSExpZ2h0KHtcbiAgICAgICAgICAgIGludGVuc2l0eTogZGlmZkludGVuc2l0eSAhPSBudWxsID8gZGlmZkludGVuc2l0eSA6IDAuNyxcbiAgICAgICAgICAgIGNvZWZmaWNpZW50czogc2hVdGlsLnByb2plY3RFbnZpcm9ubWVudE1hcChcbiAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcmVyLCBzcGVjTGlnaHQuY3ViZW1hcCwge1xuICAgICAgICAgICAgICAgICAgICBsb2Q6IDFcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApXG4gICAgICAgIH0pO1xuICAgICAgICBzY2VuZS5hZGQoc3BlY0xpZ2h0KTtcbiAgICAgICAgc2NlbmUuYWRkKGRpZmZMaWdodCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNwZWN1bGFyOiBzcGVjTGlnaHQsXG4gICAgICAgICAgICBkaWZmdXNlOiBkaWZmTGlnaHQsXG4gICAgICAgICAgICAvLyBPcmlnaW5hbCBlbnZpcm9ubWVudCBtYXBcbiAgICAgICAgICAgIGVudmlyb25tZW50TWFwOiBlbnZUZXh0dXJlXG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIExvYWQgYSBbZ2xURl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGKSBmb3JtYXQgbW9kZWwuXG4gKiBZb3UgY2FuIGNvbnZlcnQgRkJYL0RBRS9PQkogZm9ybWF0IG1vZGVscyB0byBbZ2xURl0oaHR0cHM6Ly9naXRodWIuY29tL0tocm9ub3NHcm91cC9nbFRGKSB3aXRoIFtmYngyZ2x0Zl0oaHR0cHM6Ly9naXRodWIuY29tL3Bpc3NhbmcvY2xheWdsI2ZieC10by1nbHRmMjAtY29udmVydGVyKSBweXRob24gc2NyaXB0LFxuICogb3Igc2ltcGx5IHVzaW5nIHRoZSBbQ2xheSBWaWV3ZXJdKGh0dHBzOi8vZ2l0aHViLmNvbS9waXNzYW5nL2NsYXktdmlld2VyKSBjbGllbnQgYXBwbGljYXRpb24uXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0c1xuICogQHBhcmFtIHtzdHJpbmd8Y2xheS5TaGFkZXJ9IFtvcHRzLnNoYWRlcj0nY2xheS5zdGFuZGFyZCddICdiYXNpYyd8J2xhbWJlcnQnfCdzdGFuZGFyZCcuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLndhaXRUZXh0dXJlTG9hZGVkPWZhbHNlXSBJZiBhZGQgdG8gc2NlbmUgdXRpbCB0ZXh0dXJlcyBhcmUgYWxsIGxvYWRlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuYXV0b1BsYXlBbmltYXRpb249dHJ1ZV0gSWYgYXV0b3BsYXkgdGhlIGFuaW1hdGlvbiBvZiBtb2RlbC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMudXBBeGlzPSd5J10gQ2hhbmdlIG1vZGVsIHRvIHkgdXAgaWYgdXBBeGlzIGlzICd6J1xuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy50ZXh0dXJlRmxpcFk9ZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnRleHR1cmVDb252ZXJ0VG9QT1Q9ZmFsc2VdIElmIGNvbnZlcnQgdGV4dHVyZSB0byBwb3dlci1vZi10d29cbiAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy50ZXh0dXJlUm9vdFBhdGhdIFJvb3QgcGF0aCBvZiB0ZXh0dXJlLiBEZWZhdWx0IHRvIGJlIHJlbGF0aXZlIHdpdGggZ2xURiBmaWxlLlxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0aGF0IG1vZGVsIHdpbGwgYmUgbW91bnRlZC4gRGVmYXVsdCB0byBiZSBzY2VuZVxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmxvYWRNb2RlbCA9IGZ1bmN0aW9uICh1cmwsIG9wdHMsIHBhcmVudE5vZGUpIHtcbiAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFVSTC4nKTtcbiAgICB9XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcbiAgICBpZiAob3B0cy5hdXRvUGxheUFuaW1hdGlvbiA9PSBudWxsKSB7XG4gICAgICAgIG9wdHMuYXV0b1BsYXlBbmltYXRpb24gPSB0cnVlO1xuICAgIH1cbiAgICB2YXIgc2hhZGVyID0gb3B0cy5zaGFkZXIgfHwgJ2NsYXkuc3RhbmRhcmQnO1xuXG4gICAgdmFyIGxvYWRlck9wdHMgPSB7XG4gICAgICAgIHJvb3ROb2RlOiBuZXcgTm9kZSgpLFxuICAgICAgICBzaGFkZXI6IHNoYWRlcixcbiAgICAgICAgdGV4dHVyZVJvb3RQYXRoOiBvcHRzLnRleHR1cmVSb290UGF0aCxcbiAgICAgICAgY3Jvc3NPcmlnaW46ICdBbm9ueW1vdXMnLFxuICAgICAgICB0ZXh0dXJlRmxpcFk6IG9wdHMudGV4dHVyZUZsaXBZLFxuICAgICAgICB0ZXh0dXJlQ29udmVydFRvUE9UOiBvcHRzLnRleHR1cmVDb252ZXJ0VG9QT1RcbiAgICB9O1xuICAgIGlmIChvcHRzLnVwQXhpcyAmJiBvcHRzLnVwQXhpcy50b0xvd2VyQ2FzZSgpID09PSAneicpIHtcbiAgICAgICAgbG9hZGVyT3B0cy5yb290Tm9kZS5yb3RhdGlvbi5pZGVudGl0eSgpLnJvdGF0ZVgoLU1hdGguUEkgLyAyKTtcbiAgICB9XG5cbiAgICB2YXIgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIobG9hZGVyT3B0cyk7XG5cbiAgICBwYXJlbnROb2RlID0gcGFyZW50Tm9kZSB8fCB0aGlzLnNjZW5lO1xuICAgIHZhciB0aW1lbGluZSA9IHRoaXMudGltZWxpbmU7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gYWZ0ZXJMb2FkKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX2Rpc3Bvc2VkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXJlbnROb2RlLmFkZChyZXN1bHQucm9vdE5vZGUpO1xuICAgICAgICAgICAgaWYgKG9wdHMuYXV0b1BsYXlBbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuY2xpcHMuZm9yRWFjaChmdW5jdGlvbiAoY2xpcCkge1xuICAgICAgICAgICAgICAgICAgICB0aW1lbGluZS5hZGRDbGlwKGNsaXApO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgICAgIGxvYWRlci5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLl9kaXNwb3NlZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCFvcHRzLndhaXRUZXh0dXJlTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgYWZ0ZXJMb2FkKHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChyZXN1bHQudGV4dHVyZXMubWFwKGZ1bmN0aW9uICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0dXJlLmlzUmVuZGVyYWJsZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRleHR1cmUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5zdWNjZXNzKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dHVyZS5lcnJvcihyZXNvbHZlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSkpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBhZnRlckxvYWQocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGFmdGVyTG9hZChyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVyLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlamVjdCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgbG9hZGVyLmxvYWQodXJsKTtcbiAgICB9KTtcbn07XG5cblxuLy8gVE9ETyBjbG9uZU1vZGVsXG5cbi8qKlxuICogU2ltaWxhciB0byBgYXBwLnNjZW5lLmNsb25lTm9kZWAsIGV4Y2VwdCBpdCB3aWxsIG1vdW50IHRoZSBjbG9uZWQgbm9kZSB0byB0aGUgc2NlbmUgYXV0b21hdGljYWxseS5cbiAqIFNlZSBtb3JlIGluIHtAbGluayBjbGF5LlNjZW5lI2Nsb25lTm9kZX1cbiAqXG4gKiBAcGFyYW0ge2NsYXkuTm9kZX0gbm9kZVxuICogQHBhcmFtIHtjbGF5Lk5vZGV9IFtwYXJlbnROb2RlXSBQYXJlbnQgbm9kZSB0aGF0IG5ldyBjbG9uZWQgbm9kZSB3aWxsIGJlIG1vdW50ZWQuXG4gKiAgICAgICAgICBEZWZhdWx0IHRvIGhhdmUgc2FtZSBwYXJlbnQgd2l0aCBzb3VyY2Ugbm9kZS5cbiAqIEByZXR1cm4ge2NsYXkuTm9kZX1cbiAqL1xuQXBwM0QucHJvdG90eXBlLmNsb25lTm9kZSA9IGZ1bmN0aW9uIChub2RlLCBwYXJlbnROb2RlKSB7XG4gICAgcGFyZW50Tm9kZSA9IHBhcmVudE5vZGUgfHwgbm9kZS5nZXRQYXJlbnQoKTtcblxuICAgIHZhciBuZXdOb2RlID0gdGhpcy5zY2VuZS5jbG9uZU5vZGUobm9kZSwgcGFyZW50Tm9kZSk7XG4gICAgaWYgKHBhcmVudE5vZGUpIHtcbiAgICAgICAgcGFyZW50Tm9kZS5hZGQobmV3Tm9kZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ld05vZGU7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBBcHAzRDogQXBwM0QsXG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgM0QgYXBwbGljYXRpb24gdGhhdCB3aWxsIG1hbmFnZSB0aGUgYXBwIGluaXRpYWxpemF0aW9uIGFuZCBsb29wLlxuICAgICAqXG4gICAgICogU2VlIG1vcmUgZGV0YWlscyBhdCB7QGxpbmsgY2xheS5hcHBsaWNhdGlvbi5BcHAzRH1cbiAgICAgKlxuICAgICAqIEBuYW1lIGNsYXkuYXBwbGljYXRpb24uY3JlYXRlXG4gICAgICogQG1ldGhvZFxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8c3RyaW5nfSBkb20gQ29udGFpbmVyIGRvbSBlbGVtZW50IG9yIGEgc2VsZWN0b3Igc3RyaW5nIHRoYXQgY2FuIGJlIHVzZWQgaW4gYHF1ZXJ5U2VsZWN0b3JgXG4gICAgICogQHBhcmFtIHtBcHAzRE5hbWVzcGFjZX0gYXBwTlMgT3B0aW9ucyBhbmQgbmFtZXNwYWNlIHVzZWQgaW4gY3JlYXRpbmcgYXBwM0RcbiAgICAgKlxuICAgICAqIEByZXR1cm4ge2NsYXkuYXBwbGljYXRpb24uQXBwM0R9XG4gICAgICpcbiAgICAgKiBAZXhhbXBsZVxuICAgICAqICBjbGF5LmFwcGxpY2F0aW9uLmNyZWF0ZSgnI2FwcCcsIHtcbiAgICAgKiAgICAgIGluaXQ6IGZ1bmN0aW9uIChhcHApIHtcbiAgICAgKiAgICAgICAgICBhcHAuY3JlYXRlQ3ViZSgpO1xuICAgICAqICAgICAgICAgIHZhciBjYW1lcmEgPSBhcHAuY3JlYXRlQ2FtZXJhKCk7XG4gICAgICogICAgICAgICAgY2FtZXJhLnBvc2l0aW9uLnNldCgwLCAwLCAyKTtcbiAgICAgKiAgICAgIH0sXG4gICAgICogICAgICBsb29wOiBmdW5jdGlvbiAoKSB7IC8vIG5vb3AgfVxuICAgICAqICB9KVxuICAgICAqL1xuICAgIGNyZWF0ZTogZnVuY3Rpb24gKGRvbSwgYXBwTlMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBcHAzRChkb20sIGFwcE5TKTtcbiAgICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hcHBsaWNhdGlvbi5qc1xuLy8gbW9kdWxlIGlkID0gMTMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///130\n");

/***/ }),
/* 131 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__GLProgram__ = __webpack_require__(132);\n\n\nvar loopRegex = /for\\s*?\\(int\\s*?_idx_\\s*\\=\\s*([\\w-]+)\\;\\s*_idx_\\s*<\\s*([\\w-]+);\\s*_idx_\\s*\\+\\+\\s*\\)\\s*\\{\\{([\\s\\S]+?)(?=\\}\\})\\}\\}/g;\n\nfunction unrollLoop(shaderStr, defines, lightsNumbers) {\n    // Loop unroll from three.js, https://github.com/mrdoob/three.js/blob/master/src/renderers/webgl/WebGLProgram.js#L175\n    // In some case like shadowMap in loop use 'i' to index value much slower.\n\n    // Loop use _idx_ and increased with _idx_++ will be unrolled\n    // Use {{ }} to match the pair so the if statement will not be affected\n    // Write like following\n    // for (int _idx_ = 0; _idx_ < 4; _idx_++) {{\n    //     vec3 color = texture2D(textures[_idx_], uv).rgb;\n    // }}\n    function replace(match, start, end, snippet) {\n        var unroll = '';\n        // Try to treat as define\n        if (isNaN(start)) {\n            if (start in defines) {\n                start = defines[start];\n            }\n            else {\n                start = lightNumberDefines[start];\n            }\n        }\n        if (isNaN(end)) {\n            if (end in defines) {\n                end = defines[end];\n            }\n            else {\n                end = lightNumberDefines[end];\n            }\n        }\n        // TODO Error checking\n\n        for (var idx = parseInt(start); idx < parseInt(end); idx++) {\n            // PENDING Add scope?\n            unroll += '{'\n                + snippet\n                    .replace(/float\\s*\\(\\s*_idx_\\s*\\)/g, idx.toFixed(1))\n                    .replace(/_idx_/g, idx)\n            + '}';\n        }\n\n        return unroll;\n    }\n\n    var lightNumberDefines = {};\n    for (var lightType in lightsNumbers) {\n        lightNumberDefines[lightType + '_COUNT'] = lightsNumbers[lightType];\n    }\n    return shaderStr.replace(loopRegex, replace);\n}\n\nfunction getDefineCode(defines, lightsNumbers, enabledTextures) {\n    var defineStr = [];\n    if (lightsNumbers) {\n        for (var lightType in lightsNumbers) {\n            var count = lightsNumbers[lightType];\n            if (count > 0) {\n                defineStr.push('#define ' + lightType.toUpperCase() + '_COUNT ' + count);\n            }\n        }\n    }\n    if (enabledTextures) {\n        for (var i = 0; i < enabledTextures.length; i++) {\n            var symbol = enabledTextures[i];\n            defineStr.push('#define ' + symbol.toUpperCase() + '_ENABLED');\n        }\n    }\n    // Custom Defines\n    for (var symbol in defines) {\n        var value = defines[symbol];\n        if (value === null) {\n            defineStr.push('#define ' + symbol);\n        }\n        else{\n            defineStr.push('#define ' + symbol + ' ' + value.toString());\n        }\n    }\n    return defineStr.join('\\n');\n}\n\nfunction getExtensionCode(exts) {\n    // Extension declaration must before all non-preprocessor codes\n    // TODO vertex ? extension enum ?\n    var extensionStr = [];\n    for (var i = 0; i < exts.length; i++) {\n        extensionStr.push('#extension GL_' + exts[i][0] + ' : enable');\n    }\n    return extensionStr.join('\\n');\n}\n\nfunction getPrecisionCode(precision) {\n    return ['precision', precision, 'float'].join(' ') + ';\\n'\n        + ['precision', precision, 'int'].join(' ') + ';\\n'\n        // depth texture may have precision problem on iOS device.\n        + ['precision', precision, 'sampler2D'].join(' ') + ';\\n';\n}\n\nfunction ProgramManager(renderer) {\n    this._renderer = renderer;\n    this._cache = {};\n}\n\nProgramManager.prototype.getProgram = function (renderable, material, scene, renderer) {\n    var cache = this._cache;\n\n    var isSkinnedMesh = renderable.isSkinnedMesh && renderable.isSkinnedMesh();\n    var isInstancedMesh = renderable.isInstancedMesh && renderable.isInstancedMesh();\n    var key = 's' + material.shader.shaderID + 'm' + material.getProgramKey();\n    if (scene) {\n        key += 'se' + scene.getProgramKey(renderable.lightGroup);\n    }\n    if (isSkinnedMesh) {\n        key += ',sk' + renderable.joints.length;\n    }\n    if (isInstancedMesh) {\n        key += ',is';\n    }\n    if (renderer.logDepthBuffer) {\n        key += ',ld';\n    }\n    var program = cache[key];\n\n    if (program) {\n        return program;\n    }\n\n    var lightsNumbers = scene ? scene.getLightsNumbers(renderable.lightGroup) : {};\n    var renderer = this._renderer;\n    var _gl = renderer.gl;\n    var enabledTextures = material.getEnabledTextures();\n    var extraDefineCode = '';\n    if (isSkinnedMesh) {\n        var skinDefines = {\n            SKINNING: null,\n            JOINT_COUNT: renderable.joints.length\n        };\n        if (renderable.joints.length > renderer.getMaxJointNumber()) {\n            skinDefines.USE_SKIN_MATRICES_TEXTURE = null;\n        }\n        // TODO Add skinning code?\n        extraDefineCode += '\\n' + getDefineCode(skinDefines) + '\\n';\n    }\n    if (isInstancedMesh) {\n        extraDefineCode += '\\n#define INSTANCING\\n';\n    }\n    if (renderer.logDepthBuffer) {\n        extraDefineCode += '\\n#define LOG_DEPTH\\n';\n    }\n    // TODO Optimize key generation\n    // VERTEX\n    var vertexDefineStr = extraDefineCode + getDefineCode(material.vertexDefines, lightsNumbers, enabledTextures);\n    // FRAGMENT\n    var fragmentDefineStr = extraDefineCode + getDefineCode(material.fragmentDefines, lightsNumbers, enabledTextures);\n\n    var extensions = [\n        ['OES_standard_derivatives', 'TEXTURE_LOD'],\n        ['EXT_shader_texture_lod', 'STANDARD_DERIVATIVES'],\n        ['EXT_frag_depth', 'FRAG_DEPTH']\n    ].filter(function (ext) {\n        return renderer.getGLExtension(ext[0]) != null;\n    });\n\n    for (var i = 0; i < extensions.length; i++) {\n        var extDefineCode = '\\n#define SUPPORT_' + extensions[i][1];\n        fragmentDefineStr += extDefineCode;\n        vertexDefineStr += extDefineCode;\n    };\n\n    var vertexCode = vertexDefineStr + '\\n' + material.shader.vertex;\n\n    var fragmentCode = getExtensionCode(extensions) + '\\n'\n        + getPrecisionCode(material.precision) + '\\n'\n        + fragmentDefineStr + '\\n'\n        + material.shader.fragment;\n\n    var finalVertexCode = unrollLoop(vertexCode, material.vertexDefines, lightsNumbers);\n    var finalFragmentCode = unrollLoop(fragmentCode, material.fragmentDefines, lightsNumbers);\n\n    var program = new __WEBPACK_IMPORTED_MODULE_0__GLProgram__[\"a\" /* default */]();\n    program.uniformSemantics = material.shader.uniformSemantics;\n    program.attributes = material.shader.attributes;\n    var errorMsg = program.buildProgram(_gl, material.shader, finalVertexCode, finalFragmentCode);\n    program.__error = errorMsg;\n\n    cache[key] = program;\n\n    return program;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ProgramManager);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9ncHUvUHJvZ3JhbU1hbmFnZXIuanM/YjU4YyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgR0xQcm9ncmFtIGZyb20gJy4vR0xQcm9ncmFtJztcblxudmFyIGxvb3BSZWdleCA9IC9mb3JcXHMqP1xcKGludFxccyo/X2lkeF9cXHMqXFw9XFxzKihbXFx3LV0rKVxcO1xccypfaWR4X1xccyo8XFxzKihbXFx3LV0rKTtcXHMqX2lkeF9cXHMqXFwrXFwrXFxzKlxcKVxccypcXHtcXHsoW1xcc1xcU10rPykoPz1cXH1cXH0pXFx9XFx9L2c7XG5cbmZ1bmN0aW9uIHVucm9sbExvb3Aoc2hhZGVyU3RyLCBkZWZpbmVzLCBsaWdodHNOdW1iZXJzKSB7XG4gICAgLy8gTG9vcCB1bnJvbGwgZnJvbSB0aHJlZS5qcywgaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iL21hc3Rlci9zcmMvcmVuZGVyZXJzL3dlYmdsL1dlYkdMUHJvZ3JhbS5qcyNMMTc1XG4gICAgLy8gSW4gc29tZSBjYXNlIGxpa2Ugc2hhZG93TWFwIGluIGxvb3AgdXNlICdpJyB0byBpbmRleCB2YWx1ZSBtdWNoIHNsb3dlci5cblxuICAgIC8vIExvb3AgdXNlIF9pZHhfIGFuZCBpbmNyZWFzZWQgd2l0aCBfaWR4XysrIHdpbGwgYmUgdW5yb2xsZWRcbiAgICAvLyBVc2Uge3sgfX0gdG8gbWF0Y2ggdGhlIHBhaXIgc28gdGhlIGlmIHN0YXRlbWVudCB3aWxsIG5vdCBiZSBhZmZlY3RlZFxuICAgIC8vIFdyaXRlIGxpa2UgZm9sbG93aW5nXG4gICAgLy8gZm9yIChpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IDQ7IF9pZHhfKyspIHt7XG4gICAgLy8gICAgIHZlYzMgY29sb3IgPSB0ZXh0dXJlMkQodGV4dHVyZXNbX2lkeF9dLCB1dikucmdiO1xuICAgIC8vIH19XG4gICAgZnVuY3Rpb24gcmVwbGFjZShtYXRjaCwgc3RhcnQsIGVuZCwgc25pcHBldCkge1xuICAgICAgICB2YXIgdW5yb2xsID0gJyc7XG4gICAgICAgIC8vIFRyeSB0byB0cmVhdCBhcyBkZWZpbmVcbiAgICAgICAgaWYgKGlzTmFOKHN0YXJ0KSkge1xuICAgICAgICAgICAgaWYgKHN0YXJ0IGluIGRlZmluZXMpIHtcbiAgICAgICAgICAgICAgICBzdGFydCA9IGRlZmluZXNbc3RhcnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBsaWdodE51bWJlckRlZmluZXNbc3RhcnRdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihlbmQpKSB7XG4gICAgICAgICAgICBpZiAoZW5kIGluIGRlZmluZXMpIHtcbiAgICAgICAgICAgICAgICBlbmQgPSBkZWZpbmVzW2VuZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmQgPSBsaWdodE51bWJlckRlZmluZXNbZW5kXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIEVycm9yIGNoZWNraW5nXG5cbiAgICAgICAgZm9yICh2YXIgaWR4ID0gcGFyc2VJbnQoc3RhcnQpOyBpZHggPCBwYXJzZUludChlbmQpOyBpZHgrKykge1xuICAgICAgICAgICAgLy8gUEVORElORyBBZGQgc2NvcGU/XG4gICAgICAgICAgICB1bnJvbGwgKz0gJ3snXG4gICAgICAgICAgICAgICAgKyBzbmlwcGV0XG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9mbG9hdFxccypcXChcXHMqX2lkeF9cXHMqXFwpL2csIGlkeC50b0ZpeGVkKDEpKVxuICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvX2lkeF8vZywgaWR4KVxuICAgICAgICAgICAgKyAnfSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdW5yb2xsO1xuICAgIH1cblxuICAgIHZhciBsaWdodE51bWJlckRlZmluZXMgPSB7fTtcbiAgICBmb3IgKHZhciBsaWdodFR5cGUgaW4gbGlnaHRzTnVtYmVycykge1xuICAgICAgICBsaWdodE51bWJlckRlZmluZXNbbGlnaHRUeXBlICsgJ19DT1VOVCddID0gbGlnaHRzTnVtYmVyc1tsaWdodFR5cGVdO1xuICAgIH1cbiAgICByZXR1cm4gc2hhZGVyU3RyLnJlcGxhY2UobG9vcFJlZ2V4LCByZXBsYWNlKTtcbn1cblxuZnVuY3Rpb24gZ2V0RGVmaW5lQ29kZShkZWZpbmVzLCBsaWdodHNOdW1iZXJzLCBlbmFibGVkVGV4dHVyZXMpIHtcbiAgICB2YXIgZGVmaW5lU3RyID0gW107XG4gICAgaWYgKGxpZ2h0c051bWJlcnMpIHtcbiAgICAgICAgZm9yICh2YXIgbGlnaHRUeXBlIGluIGxpZ2h0c051bWJlcnMpIHtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IGxpZ2h0c051bWJlcnNbbGlnaHRUeXBlXTtcbiAgICAgICAgICAgIGlmIChjb3VudCA+IDApIHtcbiAgICAgICAgICAgICAgICBkZWZpbmVTdHIucHVzaCgnI2RlZmluZSAnICsgbGlnaHRUeXBlLnRvVXBwZXJDYXNlKCkgKyAnX0NPVU5UICcgKyBjb3VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGVuYWJsZWRUZXh0dXJlcykge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZWRUZXh0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN5bWJvbCA9IGVuYWJsZWRUZXh0dXJlc1tpXTtcbiAgICAgICAgICAgIGRlZmluZVN0ci5wdXNoKCcjZGVmaW5lICcgKyBzeW1ib2wudG9VcHBlckNhc2UoKSArICdfRU5BQkxFRCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEN1c3RvbSBEZWZpbmVzXG4gICAgZm9yICh2YXIgc3ltYm9sIGluIGRlZmluZXMpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gZGVmaW5lc1tzeW1ib2xdO1xuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIGRlZmluZVN0ci5wdXNoKCcjZGVmaW5lICcgKyBzeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2V7XG4gICAgICAgICAgICBkZWZpbmVTdHIucHVzaCgnI2RlZmluZSAnICsgc3ltYm9sICsgJyAnICsgdmFsdWUudG9TdHJpbmcoKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRlZmluZVN0ci5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0RXh0ZW5zaW9uQ29kZShleHRzKSB7XG4gICAgLy8gRXh0ZW5zaW9uIGRlY2xhcmF0aW9uIG11c3QgYmVmb3JlIGFsbCBub24tcHJlcHJvY2Vzc29yIGNvZGVzXG4gICAgLy8gVE9ETyB2ZXJ0ZXggPyBleHRlbnNpb24gZW51bSA/XG4gICAgdmFyIGV4dGVuc2lvblN0ciA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXh0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBleHRlbnNpb25TdHIucHVzaCgnI2V4dGVuc2lvbiBHTF8nICsgZXh0c1tpXVswXSArICcgOiBlbmFibGUnKTtcbiAgICB9XG4gICAgcmV0dXJuIGV4dGVuc2lvblN0ci5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJlY2lzaW9uQ29kZShwcmVjaXNpb24pIHtcbiAgICByZXR1cm4gWydwcmVjaXNpb24nLCBwcmVjaXNpb24sICdmbG9hdCddLmpvaW4oJyAnKSArICc7XFxuJ1xuICAgICAgICArIFsncHJlY2lzaW9uJywgcHJlY2lzaW9uLCAnaW50J10uam9pbignICcpICsgJztcXG4nXG4gICAgICAgIC8vIGRlcHRoIHRleHR1cmUgbWF5IGhhdmUgcHJlY2lzaW9uIHByb2JsZW0gb24gaU9TIGRldmljZS5cbiAgICAgICAgKyBbJ3ByZWNpc2lvbicsIHByZWNpc2lvbiwgJ3NhbXBsZXIyRCddLmpvaW4oJyAnKSArICc7XFxuJztcbn1cblxuZnVuY3Rpb24gUHJvZ3JhbU1hbmFnZXIocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NhY2hlID0ge307XG59XG5cblByb2dyYW1NYW5hZ2VyLnByb3RvdHlwZS5nZXRQcm9ncmFtID0gZnVuY3Rpb24gKHJlbmRlcmFibGUsIG1hdGVyaWFsLCBzY2VuZSwgcmVuZGVyZXIpIHtcbiAgICB2YXIgY2FjaGUgPSB0aGlzLl9jYWNoZTtcblxuICAgIHZhciBpc1NraW5uZWRNZXNoID0gcmVuZGVyYWJsZS5pc1NraW5uZWRNZXNoICYmIHJlbmRlcmFibGUuaXNTa2lubmVkTWVzaCgpO1xuICAgIHZhciBpc0luc3RhbmNlZE1lc2ggPSByZW5kZXJhYmxlLmlzSW5zdGFuY2VkTWVzaCAmJiByZW5kZXJhYmxlLmlzSW5zdGFuY2VkTWVzaCgpO1xuICAgIHZhciBrZXkgPSAncycgKyBtYXRlcmlhbC5zaGFkZXIuc2hhZGVySUQgKyAnbScgKyBtYXRlcmlhbC5nZXRQcm9ncmFtS2V5KCk7XG4gICAgaWYgKHNjZW5lKSB7XG4gICAgICAgIGtleSArPSAnc2UnICsgc2NlbmUuZ2V0UHJvZ3JhbUtleShyZW5kZXJhYmxlLmxpZ2h0R3JvdXApO1xuICAgIH1cbiAgICBpZiAoaXNTa2lubmVkTWVzaCkge1xuICAgICAgICBrZXkgKz0gJyxzaycgKyByZW5kZXJhYmxlLmpvaW50cy5sZW5ndGg7XG4gICAgfVxuICAgIGlmIChpc0luc3RhbmNlZE1lc2gpIHtcbiAgICAgICAga2V5ICs9ICcsaXMnO1xuICAgIH1cbiAgICBpZiAocmVuZGVyZXIubG9nRGVwdGhCdWZmZXIpIHtcbiAgICAgICAga2V5ICs9ICcsbGQnO1xuICAgIH1cbiAgICB2YXIgcHJvZ3JhbSA9IGNhY2hlW2tleV07XG5cbiAgICBpZiAocHJvZ3JhbSkge1xuICAgICAgICByZXR1cm4gcHJvZ3JhbTtcbiAgICB9XG5cbiAgICB2YXIgbGlnaHRzTnVtYmVycyA9IHNjZW5lID8gc2NlbmUuZ2V0TGlnaHRzTnVtYmVycyhyZW5kZXJhYmxlLmxpZ2h0R3JvdXApIDoge307XG4gICAgdmFyIHJlbmRlcmVyID0gdGhpcy5fcmVuZGVyZXI7XG4gICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgIHZhciBlbmFibGVkVGV4dHVyZXMgPSBtYXRlcmlhbC5nZXRFbmFibGVkVGV4dHVyZXMoKTtcbiAgICB2YXIgZXh0cmFEZWZpbmVDb2RlID0gJyc7XG4gICAgaWYgKGlzU2tpbm5lZE1lc2gpIHtcbiAgICAgICAgdmFyIHNraW5EZWZpbmVzID0ge1xuICAgICAgICAgICAgU0tJTk5JTkc6IG51bGwsXG4gICAgICAgICAgICBKT0lOVF9DT1VOVDogcmVuZGVyYWJsZS5qb2ludHMubGVuZ3RoXG4gICAgICAgIH07XG4gICAgICAgIGlmIChyZW5kZXJhYmxlLmpvaW50cy5sZW5ndGggPiByZW5kZXJlci5nZXRNYXhKb2ludE51bWJlcigpKSB7XG4gICAgICAgICAgICBza2luRGVmaW5lcy5VU0VfU0tJTl9NQVRSSUNFU19URVhUVVJFID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUT0RPIEFkZCBza2lubmluZyBjb2RlP1xuICAgICAgICBleHRyYURlZmluZUNvZGUgKz0gJ1xcbicgKyBnZXREZWZpbmVDb2RlKHNraW5EZWZpbmVzKSArICdcXG4nO1xuICAgIH1cbiAgICBpZiAoaXNJbnN0YW5jZWRNZXNoKSB7XG4gICAgICAgIGV4dHJhRGVmaW5lQ29kZSArPSAnXFxuI2RlZmluZSBJTlNUQU5DSU5HXFxuJztcbiAgICB9XG4gICAgaWYgKHJlbmRlcmVyLmxvZ0RlcHRoQnVmZmVyKSB7XG4gICAgICAgIGV4dHJhRGVmaW5lQ29kZSArPSAnXFxuI2RlZmluZSBMT0dfREVQVEhcXG4nO1xuICAgIH1cbiAgICAvLyBUT0RPIE9wdGltaXplIGtleSBnZW5lcmF0aW9uXG4gICAgLy8gVkVSVEVYXG4gICAgdmFyIHZlcnRleERlZmluZVN0ciA9IGV4dHJhRGVmaW5lQ29kZSArIGdldERlZmluZUNvZGUobWF0ZXJpYWwudmVydGV4RGVmaW5lcywgbGlnaHRzTnVtYmVycywgZW5hYmxlZFRleHR1cmVzKTtcbiAgICAvLyBGUkFHTUVOVFxuICAgIHZhciBmcmFnbWVudERlZmluZVN0ciA9IGV4dHJhRGVmaW5lQ29kZSArIGdldERlZmluZUNvZGUobWF0ZXJpYWwuZnJhZ21lbnREZWZpbmVzLCBsaWdodHNOdW1iZXJzLCBlbmFibGVkVGV4dHVyZXMpO1xuXG4gICAgdmFyIGV4dGVuc2lvbnMgPSBbXG4gICAgICAgIFsnT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzJywgJ1RFWFRVUkVfTE9EJ10sXG4gICAgICAgIFsnRVhUX3NoYWRlcl90ZXh0dXJlX2xvZCcsICdTVEFOREFSRF9ERVJJVkFUSVZFUyddLFxuICAgICAgICBbJ0VYVF9mcmFnX2RlcHRoJywgJ0ZSQUdfREVQVEgnXVxuICAgIF0uZmlsdGVyKGZ1bmN0aW9uIChleHQpIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVyLmdldEdMRXh0ZW5zaW9uKGV4dFswXSkgIT0gbnVsbDtcbiAgICB9KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXh0ZW5zaW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZXh0RGVmaW5lQ29kZSA9ICdcXG4jZGVmaW5lIFNVUFBPUlRfJyArIGV4dGVuc2lvbnNbaV1bMV07XG4gICAgICAgIGZyYWdtZW50RGVmaW5lU3RyICs9IGV4dERlZmluZUNvZGU7XG4gICAgICAgIHZlcnRleERlZmluZVN0ciArPSBleHREZWZpbmVDb2RlO1xuICAgIH07XG5cbiAgICB2YXIgdmVydGV4Q29kZSA9IHZlcnRleERlZmluZVN0ciArICdcXG4nICsgbWF0ZXJpYWwuc2hhZGVyLnZlcnRleDtcblxuICAgIHZhciBmcmFnbWVudENvZGUgPSBnZXRFeHRlbnNpb25Db2RlKGV4dGVuc2lvbnMpICsgJ1xcbidcbiAgICAgICAgKyBnZXRQcmVjaXNpb25Db2RlKG1hdGVyaWFsLnByZWNpc2lvbikgKyAnXFxuJ1xuICAgICAgICArIGZyYWdtZW50RGVmaW5lU3RyICsgJ1xcbidcbiAgICAgICAgKyBtYXRlcmlhbC5zaGFkZXIuZnJhZ21lbnQ7XG5cbiAgICB2YXIgZmluYWxWZXJ0ZXhDb2RlID0gdW5yb2xsTG9vcCh2ZXJ0ZXhDb2RlLCBtYXRlcmlhbC52ZXJ0ZXhEZWZpbmVzLCBsaWdodHNOdW1iZXJzKTtcbiAgICB2YXIgZmluYWxGcmFnbWVudENvZGUgPSB1bnJvbGxMb29wKGZyYWdtZW50Q29kZSwgbWF0ZXJpYWwuZnJhZ21lbnREZWZpbmVzLCBsaWdodHNOdW1iZXJzKTtcblxuICAgIHZhciBwcm9ncmFtID0gbmV3IEdMUHJvZ3JhbSgpO1xuICAgIHByb2dyYW0udW5pZm9ybVNlbWFudGljcyA9IG1hdGVyaWFsLnNoYWRlci51bmlmb3JtU2VtYW50aWNzO1xuICAgIHByb2dyYW0uYXR0cmlidXRlcyA9IG1hdGVyaWFsLnNoYWRlci5hdHRyaWJ1dGVzO1xuICAgIHZhciBlcnJvck1zZyA9IHByb2dyYW0uYnVpbGRQcm9ncmFtKF9nbCwgbWF0ZXJpYWwuc2hhZGVyLCBmaW5hbFZlcnRleENvZGUsIGZpbmFsRnJhZ21lbnRDb2RlKTtcbiAgICBwcm9ncmFtLl9fZXJyb3IgPSBlcnJvck1zZztcblxuICAgIGNhY2hlW2tleV0gPSBwcm9ncmFtO1xuXG4gICAgcmV0dXJuIHByb2dyYW07XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQcm9ncmFtTWFuYWdlcjtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvZ3B1L1Byb2dyYW1NYW5hZ2VyLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///131\n");

/***/ }),
/* 132 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_Base__ = __webpack_require__(1);\n\n\n\nvar SHADER_STATE_TO_ENABLE = 1;\nvar SHADER_STATE_KEEP_ENABLE = 2;\nvar SHADER_STATE_PENDING = 3;\n\n// Enable attribute operation is global to all programs\n// Here saved the list of all enabled attribute index\n// http://www.mjbshaw.com/2013/03/webgl-fixing-invalidoperation.html\nvar enabledAttributeList = {};\n\n// some util functions\nfunction addLineNumbers(string) {\n    var chunks = string.split('\\n');\n    for (var i = 0, il = chunks.length; i < il; i ++) {\n        // Chrome reports shader errors on lines\n        // starting counting from 1\n        chunks[i] = (i + 1) + ': ' + chunks[i];\n    }\n    return chunks.join('\\n');\n}\n\n// Return true or error msg if error happened\nfunction checkShaderErrorMsg(_gl, shader, shaderString) {\n    if (!_gl.getShaderParameter(shader, _gl.COMPILE_STATUS)) {\n        return [_gl.getShaderInfoLog(shader), addLineNumbers(shaderString)].join('\\n');\n    }\n}\n\nvar tmpFloat32Array16 = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(16);\n\nvar GLProgram = __WEBPACK_IMPORTED_MODULE_1__core_Base__[\"a\" /* default */].extend({\n\n    uniformSemantics: {},\n    attributes: {}\n\n}, function () {\n    this._locations = {};\n\n    this._textureSlot = 0;\n\n    this._program = null;\n}, {\n\n    bind: function (renderer) {\n        this._textureSlot = 0;\n        renderer.gl.useProgram(this._program);\n    },\n\n    hasUniform: function (symbol) {\n        var location = this._locations[symbol];\n        return location !== null && location !== undefined;\n    },\n\n    useTextureSlot: function (renderer, texture, slot) {\n        if (texture) {\n            renderer.gl.activeTexture(renderer.gl.TEXTURE0 + slot);\n            // Maybe texture is not loaded yet;\n            if (texture.isRenderable()) {\n                texture.bind(renderer);\n            }\n            else {\n                // Bind texture to null\n                texture.unbind(renderer);\n            }\n        }\n    },\n\n    currentTextureSlot: function () {\n        return this._textureSlot;\n    },\n\n    resetTextureSlot: function (slot) {\n        this._textureSlot = slot || 0;\n    },\n\n    takeCurrentTextureSlot: function (renderer, texture) {\n        var textureSlot = this._textureSlot;\n\n        this.useTextureSlot(renderer, texture, textureSlot);\n\n        this._textureSlot++;\n\n        return textureSlot;\n    },\n\n    setUniform: function (_gl, type, symbol, value) {\n        var locationMap = this._locations;\n        var location = locationMap[symbol];\n        // Uniform is not existed in the shader\n        if (location === null || location === undefined) {\n            return false;\n        }\n\n        switch (type) {\n            case 'm4':\n                if (!(value instanceof Float32Array)) {\n                    // Use Float32Array is much faster than array when uniformMatrix4fv.\n                    for (var i = 0; i < value.length; i++) {\n                        tmpFloat32Array16[i] = value[i];\n                    }\n                    value = tmpFloat32Array16;\n                }\n                _gl.uniformMatrix4fv(location, false, value);\n                break;\n            case '2i':\n                _gl.uniform2i(location, value[0], value[1]);\n                break;\n            case '2f':\n                _gl.uniform2f(location, value[0], value[1]);\n                break;\n            case '3i':\n                _gl.uniform3i(location, value[0], value[1], value[2]);\n                break;\n            case '3f':\n                _gl.uniform3f(location, value[0], value[1], value[2]);\n                break;\n            case '4i':\n                _gl.uniform4i(location, value[0], value[1], value[2], value[3]);\n                break;\n            case '4f':\n                _gl.uniform4f(location, value[0], value[1], value[2], value[3]);\n                break;\n            case '1i':\n                _gl.uniform1i(location, value);\n                break;\n            case '1f':\n                _gl.uniform1f(location, value);\n                break;\n            case '1fv':\n                _gl.uniform1fv(location, value);\n                break;\n            case '1iv':\n                _gl.uniform1iv(location, value);\n                break;\n            case '2iv':\n                _gl.uniform2iv(location, value);\n                break;\n            case '2fv':\n                _gl.uniform2fv(location, value);\n                break;\n            case '3iv':\n                _gl.uniform3iv(location, value);\n                break;\n            case '3fv':\n                _gl.uniform3fv(location, value);\n                break;\n            case '4iv':\n                _gl.uniform4iv(location, value);\n                break;\n            case '4fv':\n                _gl.uniform4fv(location, value);\n                break;\n            case 'm2':\n            case 'm2v':\n                _gl.uniformMatrix2fv(location, false, value);\n                break;\n            case 'm3':\n            case 'm3v':\n                _gl.uniformMatrix3fv(location, false, value);\n                break;\n            case 'm4v':\n                // Raw value\n                if (Array.isArray(value) && Array.isArray(value[0])) {\n                    var array = new __WEBPACK_IMPORTED_MODULE_0__core_vendor__[\"a\" /* default */].Float32Array(value.length * 16);\n                    var cursor = 0;\n                    for (var i = 0; i < value.length; i++) {\n                        var item = value[i];\n                        for (var j = 0; j < 16; j++) {\n                            array[cursor++] = item[j];\n                        }\n                    }\n                    _gl.uniformMatrix4fv(location, false, array);\n                }\n                else {   // ArrayBufferView\n                    _gl.uniformMatrix4fv(location, false, value);\n                }\n                break;\n        }\n        return true;\n    },\n\n    setUniformOfSemantic: function (_gl, semantic, val) {\n        var semanticInfo = this.uniformSemantics[semantic];\n        if (semanticInfo) {\n            return this.setUniform(_gl, semanticInfo.type, semanticInfo.symbol, val);\n        }\n        return false;\n    },\n\n    // Used for creating VAO\n    // Enable the attributes passed in and disable the rest\n    // Example Usage:\n    // enableAttributes(renderer, [\"position\", \"texcoords\"])\n    enableAttributes: function (renderer, attribList, vao) {\n        var _gl = renderer.gl;\n        var program = this._program;\n\n        var locationMap = this._locations;\n\n        var enabledAttributeListInContext;\n        if (vao) {\n            enabledAttributeListInContext = vao.__enabledAttributeList;\n        }\n        else {\n            enabledAttributeListInContext = enabledAttributeList[renderer.__uid__];\n        }\n        if (!enabledAttributeListInContext) {\n            // In vertex array object context\n            // PENDING Each vao object needs to enable attributes again?\n            if (vao) {\n                enabledAttributeListInContext\n                    = vao.__enabledAttributeList\n                    = [];\n            }\n            else {\n                enabledAttributeListInContext\n                    = enabledAttributeList[renderer.__uid__]\n                    = [];\n            }\n        }\n        var locationList = [];\n        for (var i = 0; i < attribList.length; i++) {\n            var symbol = attribList[i];\n            if (!this.attributes[symbol]) {\n                locationList[i] = -1;\n                continue;\n            }\n            var location = locationMap[symbol];\n            if (location == null) {\n                location = _gl.getAttribLocation(program, symbol);\n                // Attrib location is a number from 0 to ...\n                if (location === -1) {\n                    locationList[i] = -1;\n                    continue;\n                }\n                locationMap[symbol] = location;\n            }\n            locationList[i] = location;\n\n            if (!enabledAttributeListInContext[location]) {\n                enabledAttributeListInContext[location] = SHADER_STATE_TO_ENABLE;\n            }\n            else {\n                enabledAttributeListInContext[location] = SHADER_STATE_KEEP_ENABLE;\n            }\n        }\n\n        for (var i = 0; i < enabledAttributeListInContext.length; i++) {\n            switch (enabledAttributeListInContext[i]){\n                case SHADER_STATE_TO_ENABLE:\n                    _gl.enableVertexAttribArray(i);\n                    enabledAttributeListInContext[i] = SHADER_STATE_PENDING;\n                    break;\n                case SHADER_STATE_KEEP_ENABLE:\n                    enabledAttributeListInContext[i] = SHADER_STATE_PENDING;\n                    break;\n                // Expired\n                case SHADER_STATE_PENDING:\n                    _gl.disableVertexAttribArray(i);\n                    enabledAttributeListInContext[i] = 0;\n                    break;\n            }\n        }\n\n        return locationList;\n    },\n\n    getAttribLocation: function (_gl, symbol) {\n        var locationMap = this._locations;\n\n        var location = locationMap[symbol];\n        if (location == null) {\n            location = _gl.getAttribLocation(this._program, symbol);\n            locationMap[symbol] = location;\n        }\n\n        return location;\n    },\n\n    isAttribEnabled: function (renderer, location) {\n        var enabledAttributeListInContext\n            = enabledAttributeList[renderer.__uid__]\n            || [];\n\n        return !!enabledAttributeListInContext[location];\n    },\n\n    buildProgram: function (_gl, shader, vertexShaderCode, fragmentShaderCode) {\n        var vertexShader = _gl.createShader(_gl.VERTEX_SHADER);\n        var program = _gl.createProgram();\n\n        _gl.shaderSource(vertexShader, vertexShaderCode);\n        _gl.compileShader(vertexShader);\n\n        var fragmentShader = _gl.createShader(_gl.FRAGMENT_SHADER);\n        _gl.shaderSource(fragmentShader, fragmentShaderCode);\n        _gl.compileShader(fragmentShader);\n\n        var msg = checkShaderErrorMsg(_gl, vertexShader, vertexShaderCode);\n        if (msg) {\n            return msg;\n        }\n        msg = checkShaderErrorMsg(_gl, fragmentShader, fragmentShaderCode);\n        if (msg) {\n            return msg;\n        }\n\n        _gl.attachShader(program, vertexShader);\n        _gl.attachShader(program, fragmentShader);\n        // Force the position bind to location 0;\n        if (shader.attributeSemantics['POSITION']) {\n            _gl.bindAttribLocation(program, 0, shader.attributeSemantics['POSITION'].symbol);\n        }\n        else {\n            // Else choose an attribute and bind to location 0;\n            var keys = Object.keys(this.attributes);\n            _gl.bindAttribLocation(program, 0, keys[0]);\n        }\n\n        _gl.linkProgram(program);\n\n        _gl.deleteShader(vertexShader);\n        _gl.deleteShader(fragmentShader);\n\n        this._program = program;\n\n        // Save code.\n        this.vertexCode = vertexShaderCode;\n        this.fragmentCode = fragmentShaderCode;\n\n        if (!_gl.getProgramParameter(program, _gl.LINK_STATUS)) {\n            return 'Could not link program\\n' + _gl.getProgramInfoLog(program);\n        }\n\n        // Cache uniform locations\n        for (var i = 0; i < shader.uniforms.length; i++) {\n            var uniformSymbol = shader.uniforms[i];\n            this._locations[uniformSymbol] = _gl.getUniformLocation(program, uniformSymbol);\n        }\n\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GLProgram);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9ncHUvR0xQcm9ncmFtLmpzP2I1YzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuXG52YXIgU0hBREVSX1NUQVRFX1RPX0VOQUJMRSA9IDE7XG52YXIgU0hBREVSX1NUQVRFX0tFRVBfRU5BQkxFID0gMjtcbnZhciBTSEFERVJfU1RBVEVfUEVORElORyA9IDM7XG5cbi8vIEVuYWJsZSBhdHRyaWJ1dGUgb3BlcmF0aW9uIGlzIGdsb2JhbCB0byBhbGwgcHJvZ3JhbXNcbi8vIEhlcmUgc2F2ZWQgdGhlIGxpc3Qgb2YgYWxsIGVuYWJsZWQgYXR0cmlidXRlIGluZGV4XG4vLyBodHRwOi8vd3d3Lm1qYnNoYXcuY29tLzIwMTMvMDMvd2ViZ2wtZml4aW5nLWludmFsaWRvcGVyYXRpb24uaHRtbFxudmFyIGVuYWJsZWRBdHRyaWJ1dGVMaXN0ID0ge307XG5cbi8vIHNvbWUgdXRpbCBmdW5jdGlvbnNcbmZ1bmN0aW9uIGFkZExpbmVOdW1iZXJzKHN0cmluZykge1xuICAgIHZhciBjaHVua3MgPSBzdHJpbmcuc3BsaXQoJ1xcbicpO1xuICAgIGZvciAodmFyIGkgPSAwLCBpbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBpbDsgaSArKykge1xuICAgICAgICAvLyBDaHJvbWUgcmVwb3J0cyBzaGFkZXIgZXJyb3JzIG9uIGxpbmVzXG4gICAgICAgIC8vIHN0YXJ0aW5nIGNvdW50aW5nIGZyb20gMVxuICAgICAgICBjaHVua3NbaV0gPSAoaSArIDEpICsgJzogJyArIGNodW5rc1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIGNodW5rcy5qb2luKCdcXG4nKTtcbn1cblxuLy8gUmV0dXJuIHRydWUgb3IgZXJyb3IgbXNnIGlmIGVycm9yIGhhcHBlbmVkXG5mdW5jdGlvbiBjaGVja1NoYWRlckVycm9yTXNnKF9nbCwgc2hhZGVyLCBzaGFkZXJTdHJpbmcpIHtcbiAgICBpZiAoIV9nbC5nZXRTaGFkZXJQYXJhbWV0ZXIoc2hhZGVyLCBfZ2wuQ09NUElMRV9TVEFUVVMpKSB7XG4gICAgICAgIHJldHVybiBbX2dsLmdldFNoYWRlckluZm9Mb2coc2hhZGVyKSwgYWRkTGluZU51bWJlcnMoc2hhZGVyU3RyaW5nKV0uam9pbignXFxuJyk7XG4gICAgfVxufVxuXG52YXIgdG1wRmxvYXQzMkFycmF5MTYgPSBuZXcgdmVuZG9yLkZsb2F0MzJBcnJheSgxNik7XG5cbnZhciBHTFByb2dyYW0gPSBCYXNlLmV4dGVuZCh7XG5cbiAgICB1bmlmb3JtU2VtYW50aWNzOiB7fSxcbiAgICBhdHRyaWJ1dGVzOiB7fVxuXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fbG9jYXRpb25zID0ge307XG5cbiAgICB0aGlzLl90ZXh0dXJlU2xvdCA9IDA7XG5cbiAgICB0aGlzLl9wcm9ncmFtID0gbnVsbDtcbn0sIHtcblxuICAgIGJpbmQ6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLl90ZXh0dXJlU2xvdCA9IDA7XG4gICAgICAgIHJlbmRlcmVyLmdsLnVzZVByb2dyYW0odGhpcy5fcHJvZ3JhbSk7XG4gICAgfSxcblxuICAgIGhhc1VuaWZvcm06IGZ1bmN0aW9uIChzeW1ib2wpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uID0gdGhpcy5fbG9jYXRpb25zW3N5bWJvbF07XG4gICAgICAgIHJldHVybiBsb2NhdGlvbiAhPT0gbnVsbCAmJiBsb2NhdGlvbiAhPT0gdW5kZWZpbmVkO1xuICAgIH0sXG5cbiAgICB1c2VUZXh0dXJlU2xvdDogZnVuY3Rpb24gKHJlbmRlcmVyLCB0ZXh0dXJlLCBzbG90KSB7XG4gICAgICAgIGlmICh0ZXh0dXJlKSB7XG4gICAgICAgICAgICByZW5kZXJlci5nbC5hY3RpdmVUZXh0dXJlKHJlbmRlcmVyLmdsLlRFWFRVUkUwICsgc2xvdCk7XG4gICAgICAgICAgICAvLyBNYXliZSB0ZXh0dXJlIGlzIG5vdCBsb2FkZWQgeWV0O1xuICAgICAgICAgICAgaWYgKHRleHR1cmUuaXNSZW5kZXJhYmxlKCkpIHtcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gQmluZCB0ZXh0dXJlIHRvIG51bGxcbiAgICAgICAgICAgICAgICB0ZXh0dXJlLnVuYmluZChyZW5kZXJlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY3VycmVudFRleHR1cmVTbG90OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90ZXh0dXJlU2xvdDtcbiAgICB9LFxuXG4gICAgcmVzZXRUZXh0dXJlU2xvdDogZnVuY3Rpb24gKHNsb3QpIHtcbiAgICAgICAgdGhpcy5fdGV4dHVyZVNsb3QgPSBzbG90IHx8IDA7XG4gICAgfSxcblxuICAgIHRha2VDdXJyZW50VGV4dHVyZVNsb3Q6IGZ1bmN0aW9uIChyZW5kZXJlciwgdGV4dHVyZSkge1xuICAgICAgICB2YXIgdGV4dHVyZVNsb3QgPSB0aGlzLl90ZXh0dXJlU2xvdDtcblxuICAgICAgICB0aGlzLnVzZVRleHR1cmVTbG90KHJlbmRlcmVyLCB0ZXh0dXJlLCB0ZXh0dXJlU2xvdCk7XG5cbiAgICAgICAgdGhpcy5fdGV4dHVyZVNsb3QrKztcblxuICAgICAgICByZXR1cm4gdGV4dHVyZVNsb3Q7XG4gICAgfSxcblxuICAgIHNldFVuaWZvcm06IGZ1bmN0aW9uIChfZ2wsIHR5cGUsIHN5bWJvbCwgdmFsdWUpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uTWFwID0gdGhpcy5fbG9jYXRpb25zO1xuICAgICAgICB2YXIgbG9jYXRpb24gPSBsb2NhdGlvbk1hcFtzeW1ib2xdO1xuICAgICAgICAvLyBVbmlmb3JtIGlzIG5vdCBleGlzdGVkIGluIHRoZSBzaGFkZXJcbiAgICAgICAgaWYgKGxvY2F0aW9uID09PSBudWxsIHx8IGxvY2F0aW9uID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgY2FzZSAnbTQnOlxuICAgICAgICAgICAgICAgIGlmICghKHZhbHVlIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgRmxvYXQzMkFycmF5IGlzIG11Y2ggZmFzdGVyIHRoYW4gYXJyYXkgd2hlbiB1bmlmb3JtTWF0cml4NGZ2LlxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0bXBGbG9hdDMyQXJyYXkxNltpXSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gdG1wRmxvYXQzMkFycmF5MTY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9uLCBmYWxzZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMmknOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMmkobG9jYXRpb24sIHZhbHVlWzBdLCB2YWx1ZVsxXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcyZic6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm0yZihsb2NhdGlvbiwgdmFsdWVbMF0sIHZhbHVlWzFdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzNpJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTNpKGxvY2F0aW9uLCB2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzNmJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTNmKGxvY2F0aW9uLCB2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzRpJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTRpKGxvY2F0aW9uLCB2YWx1ZVswXSwgdmFsdWVbMV0sIHZhbHVlWzJdLCB2YWx1ZVszXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICc0Zic6XG4gICAgICAgICAgICAgICAgX2dsLnVuaWZvcm00Zihsb2NhdGlvbiwgdmFsdWVbMF0sIHZhbHVlWzFdLCB2YWx1ZVsyXSwgdmFsdWVbM10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnMWknOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMWkobG9jYXRpb24sIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJzFmJzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybTFmKGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcxZnYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMWZ2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcxaXYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMWl2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcyaXYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMml2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICcyZnYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtMmZ2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICczaXYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtM2l2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICczZnYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtM2Z2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICc0aXYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtNGl2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICc0ZnYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtNGZ2KGxvY2F0aW9uLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdtMic6XG4gICAgICAgICAgICBjYXNlICdtMnYnOlxuICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtTWF0cml4MmZ2KGxvY2F0aW9uLCBmYWxzZSwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnbTMnOlxuICAgICAgICAgICAgY2FzZSAnbTN2JzpcbiAgICAgICAgICAgICAgICBfZ2wudW5pZm9ybU1hdHJpeDNmdihsb2NhdGlvbiwgZmFsc2UsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ200dic6XG4gICAgICAgICAgICAgICAgLy8gUmF3IHZhbHVlXG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpICYmIEFycmF5LmlzQXJyYXkodmFsdWVbMF0pKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnJheSA9IG5ldyB2ZW5kb3IuRmxvYXQzMkFycmF5KHZhbHVlLmxlbmd0aCAqIDE2KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdmFsdWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gdmFsdWVbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDE2OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVtjdXJzb3IrK10gPSBpdGVtW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9nbC51bmlmb3JtTWF0cml4NGZ2KGxvY2F0aW9uLCBmYWxzZSwgYXJyYXkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHsgICAvLyBBcnJheUJ1ZmZlclZpZXdcbiAgICAgICAgICAgICAgICAgICAgX2dsLnVuaWZvcm1NYXRyaXg0ZnYobG9jYXRpb24sIGZhbHNlLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0sXG5cbiAgICBzZXRVbmlmb3JtT2ZTZW1hbnRpYzogZnVuY3Rpb24gKF9nbCwgc2VtYW50aWMsIHZhbCkge1xuICAgICAgICB2YXIgc2VtYW50aWNJbmZvID0gdGhpcy51bmlmb3JtU2VtYW50aWNzW3NlbWFudGljXTtcbiAgICAgICAgaWYgKHNlbWFudGljSW5mbykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0VW5pZm9ybShfZ2wsIHNlbWFudGljSW5mby50eXBlLCBzZW1hbnRpY0luZm8uc3ltYm9sLCB2YWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9LFxuXG4gICAgLy8gVXNlZCBmb3IgY3JlYXRpbmcgVkFPXG4gICAgLy8gRW5hYmxlIHRoZSBhdHRyaWJ1dGVzIHBhc3NlZCBpbiBhbmQgZGlzYWJsZSB0aGUgcmVzdFxuICAgIC8vIEV4YW1wbGUgVXNhZ2U6XG4gICAgLy8gZW5hYmxlQXR0cmlidXRlcyhyZW5kZXJlciwgW1wicG9zaXRpb25cIiwgXCJ0ZXhjb29yZHNcIl0pXG4gICAgZW5hYmxlQXR0cmlidXRlczogZnVuY3Rpb24gKHJlbmRlcmVyLCBhdHRyaWJMaXN0LCB2YW8pIHtcbiAgICAgICAgdmFyIF9nbCA9IHJlbmRlcmVyLmdsO1xuICAgICAgICB2YXIgcHJvZ3JhbSA9IHRoaXMuX3Byb2dyYW07XG5cbiAgICAgICAgdmFyIGxvY2F0aW9uTWFwID0gdGhpcy5fbG9jYXRpb25zO1xuXG4gICAgICAgIHZhciBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dDtcbiAgICAgICAgaWYgKHZhbykge1xuICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHQgPSB2YW8uX19lbmFibGVkQXR0cmlidXRlTGlzdDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0ID0gZW5hYmxlZEF0dHJpYnV0ZUxpc3RbcmVuZGVyZXIuX191aWRfX107XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dCkge1xuICAgICAgICAgICAgLy8gSW4gdmVydGV4IGFycmF5IG9iamVjdCBjb250ZXh0XG4gICAgICAgICAgICAvLyBQRU5ESU5HIEVhY2ggdmFvIG9iamVjdCBuZWVkcyB0byBlbmFibGUgYXR0cmlidXRlcyBhZ2Fpbj9cbiAgICAgICAgICAgIGlmICh2YW8pIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA9IHZhby5fX2VuYWJsZWRBdHRyaWJ1dGVMaXN0XG4gICAgICAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFxuICAgICAgICAgICAgICAgICAgICA9IGVuYWJsZWRBdHRyaWJ1dGVMaXN0W3JlbmRlcmVyLl9fdWlkX19dXG4gICAgICAgICAgICAgICAgICAgID0gW107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGxvY2F0aW9uTGlzdCA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJpYkxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzeW1ib2wgPSBhdHRyaWJMaXN0W2ldO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF0dHJpYnV0ZXNbc3ltYm9sXSkge1xuICAgICAgICAgICAgICAgIGxvY2F0aW9uTGlzdFtpXSA9IC0xO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxvY2F0aW9uID0gbG9jYXRpb25NYXBbc3ltYm9sXTtcbiAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24gPSBfZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgc3ltYm9sKTtcbiAgICAgICAgICAgICAgICAvLyBBdHRyaWIgbG9jYXRpb24gaXMgYSBudW1iZXIgZnJvbSAwIHRvIC4uLlxuICAgICAgICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25MaXN0W2ldID0gLTE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsb2NhdGlvbk1hcFtzeW1ib2xdID0gbG9jYXRpb247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsb2NhdGlvbkxpc3RbaV0gPSBsb2NhdGlvbjtcblxuICAgICAgICAgICAgaWYgKCFlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtsb2NhdGlvbl0pIHtcbiAgICAgICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtsb2NhdGlvbl0gPSBTSEFERVJfU1RBVEVfVE9fRU5BQkxFO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbbG9jYXRpb25dID0gU0hBREVSX1NUQVRFX0tFRVBfRU5BQkxFO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgc3dpdGNoIChlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtpXSl7XG4gICAgICAgICAgICAgICAgY2FzZSBTSEFERVJfU1RBVEVfVE9fRU5BQkxFOlxuICAgICAgICAgICAgICAgICAgICBfZ2wuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoaSk7XG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0W2ldID0gU0hBREVSX1NUQVRFX1BFTkRJTkc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgU0hBREVSX1NUQVRFX0tFRVBfRU5BQkxFOlxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtpXSA9IFNIQURFUl9TVEFURV9QRU5ESU5HO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAvLyBFeHBpcmVkXG4gICAgICAgICAgICAgICAgY2FzZSBTSEFERVJfU1RBVEVfUEVORElORzpcbiAgICAgICAgICAgICAgICAgICAgX2dsLmRpc2FibGVWZXJ0ZXhBdHRyaWJBcnJheShpKTtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlZEF0dHJpYnV0ZUxpc3RJbkNvbnRleHRbaV0gPSAwO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBsb2NhdGlvbkxpc3Q7XG4gICAgfSxcblxuICAgIGdldEF0dHJpYkxvY2F0aW9uOiBmdW5jdGlvbiAoX2dsLCBzeW1ib2wpIHtcbiAgICAgICAgdmFyIGxvY2F0aW9uTWFwID0gdGhpcy5fbG9jYXRpb25zO1xuXG4gICAgICAgIHZhciBsb2NhdGlvbiA9IGxvY2F0aW9uTWFwW3N5bWJvbF07XG4gICAgICAgIGlmIChsb2NhdGlvbiA9PSBudWxsKSB7XG4gICAgICAgICAgICBsb2NhdGlvbiA9IF9nbC5nZXRBdHRyaWJMb2NhdGlvbih0aGlzLl9wcm9ncmFtLCBzeW1ib2wpO1xuICAgICAgICAgICAgbG9jYXRpb25NYXBbc3ltYm9sXSA9IGxvY2F0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxvY2F0aW9uO1xuICAgIH0sXG5cbiAgICBpc0F0dHJpYkVuYWJsZWQ6IGZ1bmN0aW9uIChyZW5kZXJlciwgbG9jYXRpb24pIHtcbiAgICAgICAgdmFyIGVuYWJsZWRBdHRyaWJ1dGVMaXN0SW5Db250ZXh0XG4gICAgICAgICAgICA9IGVuYWJsZWRBdHRyaWJ1dGVMaXN0W3JlbmRlcmVyLl9fdWlkX19dXG4gICAgICAgICAgICB8fCBbXTtcblxuICAgICAgICByZXR1cm4gISFlbmFibGVkQXR0cmlidXRlTGlzdEluQ29udGV4dFtsb2NhdGlvbl07XG4gICAgfSxcblxuICAgIGJ1aWxkUHJvZ3JhbTogZnVuY3Rpb24gKF9nbCwgc2hhZGVyLCB2ZXJ0ZXhTaGFkZXJDb2RlLCBmcmFnbWVudFNoYWRlckNvZGUpIHtcbiAgICAgICAgdmFyIHZlcnRleFNoYWRlciA9IF9nbC5jcmVhdGVTaGFkZXIoX2dsLlZFUlRFWF9TSEFERVIpO1xuICAgICAgICB2YXIgcHJvZ3JhbSA9IF9nbC5jcmVhdGVQcm9ncmFtKCk7XG5cbiAgICAgICAgX2dsLnNoYWRlclNvdXJjZSh2ZXJ0ZXhTaGFkZXIsIHZlcnRleFNoYWRlckNvZGUpO1xuICAgICAgICBfZ2wuY29tcGlsZVNoYWRlcih2ZXJ0ZXhTaGFkZXIpO1xuXG4gICAgICAgIHZhciBmcmFnbWVudFNoYWRlciA9IF9nbC5jcmVhdGVTaGFkZXIoX2dsLkZSQUdNRU5UX1NIQURFUik7XG4gICAgICAgIF9nbC5zaGFkZXJTb3VyY2UoZnJhZ21lbnRTaGFkZXIsIGZyYWdtZW50U2hhZGVyQ29kZSk7XG4gICAgICAgIF9nbC5jb21waWxlU2hhZGVyKGZyYWdtZW50U2hhZGVyKTtcblxuICAgICAgICB2YXIgbXNnID0gY2hlY2tTaGFkZXJFcnJvck1zZyhfZ2wsIHZlcnRleFNoYWRlciwgdmVydGV4U2hhZGVyQ29kZSk7XG4gICAgICAgIGlmIChtc2cpIHtcbiAgICAgICAgICAgIHJldHVybiBtc2c7XG4gICAgICAgIH1cbiAgICAgICAgbXNnID0gY2hlY2tTaGFkZXJFcnJvck1zZyhfZ2wsIGZyYWdtZW50U2hhZGVyLCBmcmFnbWVudFNoYWRlckNvZGUpO1xuICAgICAgICBpZiAobXNnKSB7XG4gICAgICAgICAgICByZXR1cm4gbXNnO1xuICAgICAgICB9XG5cbiAgICAgICAgX2dsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2ZXJ0ZXhTaGFkZXIpO1xuICAgICAgICBfZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZyYWdtZW50U2hhZGVyKTtcbiAgICAgICAgLy8gRm9yY2UgdGhlIHBvc2l0aW9uIGJpbmQgdG8gbG9jYXRpb24gMDtcbiAgICAgICAgaWYgKHNoYWRlci5hdHRyaWJ1dGVTZW1hbnRpY3NbJ1BPU0lUSU9OJ10pIHtcbiAgICAgICAgICAgIF9nbC5iaW5kQXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgMCwgc2hhZGVyLmF0dHJpYnV0ZVNlbWFudGljc1snUE9TSVRJT04nXS5zeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgLy8gRWxzZSBjaG9vc2UgYW4gYXR0cmlidXRlIGFuZCBiaW5kIHRvIGxvY2F0aW9uIDA7XG4gICAgICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuYXR0cmlidXRlcyk7XG4gICAgICAgICAgICBfZ2wuYmluZEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sIDAsIGtleXNbMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgX2dsLmxpbmtQcm9ncmFtKHByb2dyYW0pO1xuXG4gICAgICAgIF9nbC5kZWxldGVTaGFkZXIodmVydGV4U2hhZGVyKTtcbiAgICAgICAgX2dsLmRlbGV0ZVNoYWRlcihmcmFnbWVudFNoYWRlcik7XG5cbiAgICAgICAgdGhpcy5fcHJvZ3JhbSA9IHByb2dyYW07XG5cbiAgICAgICAgLy8gU2F2ZSBjb2RlLlxuICAgICAgICB0aGlzLnZlcnRleENvZGUgPSB2ZXJ0ZXhTaGFkZXJDb2RlO1xuICAgICAgICB0aGlzLmZyYWdtZW50Q29kZSA9IGZyYWdtZW50U2hhZGVyQ29kZTtcblxuICAgICAgICBpZiAoIV9nbC5nZXRQcm9ncmFtUGFyYW1ldGVyKHByb2dyYW0sIF9nbC5MSU5LX1NUQVRVUykpIHtcbiAgICAgICAgICAgIHJldHVybiAnQ291bGQgbm90IGxpbmsgcHJvZ3JhbVxcbicgKyBfZ2wuZ2V0UHJvZ3JhbUluZm9Mb2cocHJvZ3JhbSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWNoZSB1bmlmb3JtIGxvY2F0aW9uc1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNoYWRlci51bmlmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHVuaWZvcm1TeW1ib2wgPSBzaGFkZXIudW5pZm9ybXNbaV07XG4gICAgICAgICAgICB0aGlzLl9sb2NhdGlvbnNbdW5pZm9ybVN5bWJvbF0gPSBfZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sIHVuaWZvcm1TeW1ib2wpO1xuICAgICAgICB9XG5cbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgR0xQcm9ncmFtO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9ncHUvR0xQcm9ncmFtLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///132\n");

/***/ }),
/* 133 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"vec3 calcAmbientSHLight(int idx, vec3 N) {\\n int offset = 9 * idx;\\n return ambientSHLightCoefficients[0]\\n + ambientSHLightCoefficients[1] * N.x\\n + ambientSHLightCoefficients[2] * N.y\\n + ambientSHLightCoefficients[3] * N.z\\n + ambientSHLightCoefficients[4] * N.x * N.z\\n + ambientSHLightCoefficients[5] * N.z * N.y\\n + ambientSHLightCoefficients[6] * N.y * N.x\\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\\n}\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2hlYWRlci9jYWxjQW1iaWVudFNITGlnaHQuZ2xzbC5qcz9hOTBiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwidmVjMyBjYWxjQW1iaWVudFNITGlnaHQoaW50IGlkeCwgdmVjMyBOKSB7XFxuIGludCBvZmZzZXQgPSA5ICogaWR4O1xcbiByZXR1cm4gYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbMF1cXG4gKyBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50c1sxXSAqIE4ueFxcbiArIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzJdICogTi55XFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbM10gKiBOLnpcXG4gKyBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50c1s0XSAqIE4ueCAqIE4uelxcbiArIGFtYmllbnRTSExpZ2h0Q29lZmZpY2llbnRzWzVdICogTi56ICogTi55XFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbNl0gKiBOLnkgKiBOLnhcXG4gKyBhbWJpZW50U0hMaWdodENvZWZmaWNpZW50c1s3XSAqICgzLjAgKiBOLnogKiBOLnogLSAxLjApXFxuICsgYW1iaWVudFNITGlnaHRDb2VmZmljaWVudHNbOF0gKiAoTi54ICogTi54IC0gTi55ICogTi55KTtcXG59XCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9oZWFkZXIvY2FsY0FtYmllbnRTSExpZ2h0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///133\n");

/***/ }),
/* 134 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.basic.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\nattribute vec2 texcoord : TEXCOORD_0;\\nattribute vec3 position : POSITION;\\nattribute vec3 barycentric;\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Barycentric;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\nvarying vec4 v_Color;\\n#endif\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n#endif\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_Barycentric = barycentric;\\n gl_Position = worldViewProjection * skinnedPosition;\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.basic.fragment\\n#define DIFFUSEMAP_ALPHA_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D diffuseMap;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\nvarying vec3 v_Barycentric;\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.util.srgb\\n@import clay.util.ACES\\nvoid main()\\n{\\n gl_FragColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n gl_FragColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n gl_FragColor = sRGBToLinear(gl_FragColor);\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 texel = decodeHDR(texture2D(diffuseMap, v_Texcoord));\\n#ifdef SRGB_DECODE\\n texel = sRGBToLinear(texel);\\n#endif\\n#if defined(DIFFUSEMAP_ALPHA_ALPHA)\\n gl_FragColor.a = texel.a;\\n#endif\\n gl_FragColor.rgb *= texel.rgb;\\n#endif\\n gl_FragColor.rgb += emission;\\n if( lineWidth > 0.)\\n {\\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (gl_FragColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n gl_FragColor.rgb = ACESToneMapping(gl_FragColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n gl_FragColor = linearTosRGB(gl_FragColor);\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2Jhc2ljLmdsc2wuanM/ZGE2YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5iYXNpYy52ZXJ0ZXhcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxudW5pZm9ybSB2ZWMyIHV2UmVwZWF0IDogWzEuMCwgMS4wXTtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQgOiBbMC4wLCAwLjBdO1xcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkIDogVEVYQ09PUkRfMDtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIGJhcnljZW50cmljO1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfaGVhZGVyXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbmF0dHJpYnV0ZSB2ZWM0IGFfQ29sb3IgOiBDT0xPUjtcXG52YXJ5aW5nIHZlYzQgdl9Db2xvcjtcXG4jZW5kaWZcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCBza2lubmVkUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiNpZmRlZiBTS0lOTklOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuc2tpbl9tYXRyaXhcXG4gc2tpbm5lZFBvc2l0aW9uID0gc2tpbk1hdHJpeFdTICogc2tpbm5lZFBvc2l0aW9uO1xcbiNlbmRpZlxcbiNpZmRlZiBJTlNUQU5DSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5pbnN0YW5jaW5nX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSBpbnN0YW5jZU1hdCAqIHNraW5uZWRQb3NpdGlvbjtcXG4jZW5kaWZcXG4gdl9UZXhjb29yZCA9IHRleGNvb3JkICogdXZSZXBlYXQgKyB1dk9mZnNldDtcXG4gdl9CYXJ5Y2VudHJpYyA9IGJhcnljZW50cmljO1xcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiBza2lubmVkUG9zaXRpb247XFxuI2lmZGVmIFZFUlRFWF9DT0xPUlxcbiB2X0NvbG9yID0gYV9Db2xvcjtcXG4jZW5kaWZcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfdmVydGV4X21haW5cXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5iYXNpYy5mcmFnbWVudFxcbiNkZWZpbmUgRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGRpZmZ1c2VNYXA7XFxudW5pZm9ybSB2ZWMzIGNvbG9yIDogWzEuMCwgMS4wLCAxLjBdO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2lvbiA6IFswLjAsIDAuMCwgMC4wXTtcXG51bmlmb3JtIGZsb2F0IGFscGhhIDogMS4wO1xcbiNpZmRlZiBBTFBIQV9URVNUXFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC45O1xcbiNlbmRpZlxcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG52YXJ5aW5nIHZlYzQgdl9Db2xvcjtcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IGxpbmVXaWR0aCA6IDAuMDtcXG51bmlmb3JtIHZlYzQgbGluZUNvbG9yIDogWzAuMCwgMC4wLCAwLjAsIDAuNl07XFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxuQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfaGVhZGVyXFxuQGltcG9ydCBjbGF5LnV0aWwuZWRnZV9mYWN0b3JcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnV0aWwuc3JnYlxcbkBpbXBvcnQgY2xheS51dGlsLkFDRVNcXG52b2lkIG1haW4oKVxcbntcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgYWxwaGEpO1xcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG4gZ2xfRnJhZ0NvbG9yICo9IHZfQ29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfREVDT0RFXFxuIGdsX0ZyYWdDb2xvciA9IHNSR0JUb0xpbmVhcihnbF9GcmFnQ29sb3IpO1xcbiNlbmRpZlxcbiNpZmRlZiBESUZGVVNFTUFQX0VOQUJMRURcXG4gdmVjNCB0ZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlMkQoZGlmZnVzZU1hcCwgdl9UZXhjb29yZCkpO1xcbiNpZmRlZiBTUkdCX0RFQ09ERVxcbiB0ZXhlbCA9IHNSR0JUb0xpbmVhcih0ZXhlbCk7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoRElGRlVTRU1BUF9BTFBIQV9BTFBIQSlcXG4gZ2xfRnJhZ0NvbG9yLmEgPSB0ZXhlbC5hO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IucmdiICo9IHRleGVsLnJnYjtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLnJnYiArPSBlbWlzc2lvbjtcXG4gaWYoIGxpbmVXaWR0aCA+IDAuKVxcbiB7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgbGluZUNvbG9yLnJnYiwgKDEuMCAtIGVkZ2VGYWN0b3IobGluZVdpZHRoKSkgKiBsaW5lQ29sb3IuYSk7XFxuIH1cXG4jaWZkZWYgQUxQSEFfVEVTVFxcbiBpZiAoZ2xfRnJhZ0NvbG9yLmEgPCBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIFRPTkVNQVBQSU5HXFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBBQ0VTVG9uZU1hcHBpbmcoZ2xfRnJhZ0NvbG9yLnJnYik7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfRU5DT0RFXFxuIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvc1JHQihnbF9GcmFnQ29sb3IpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoZ2xfRnJhZ0NvbG9yKTtcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfbWFpblxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9iYXNpYy5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///134\n");

/***/ }),
/* 135 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.lambert.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nuniform vec2 uvRepeat : [1.0, 1.0];\\nuniform vec2 uvOffset : [0.0, 0.0];\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nattribute vec3 normal : NORMAL;\\nattribute vec3 barycentric;\\n#ifdef VERTEX_COLOR\\nattribute vec4 a_Color : COLOR;\\nvarying vec4 v_Color;\\n#endif\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\n@import clay.util.logdepth_vertex_header\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nvarying vec3 v_Barycentric;\\nvoid main()\\n{\\n vec4 skinnedPosition = vec4(position, 1.0);\\n vec4 skinnedNormal = vec4(normal, 0.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = skinMatrixWS * skinnedPosition;\\n skinnedNormal = skinMatrixWS * skinnedNormal;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n skinnedPosition = instanceMat * skinnedPosition;\\n skinnedNormal = instanceMat * skinnedNormal;\\n#endif\\n gl_Position = worldViewProjection * skinnedPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n v_Normal = normalize((worldInverseTranspose * skinnedNormal).xyz);\\n v_WorldPosition = ( world * skinnedPosition ).xyz;\\n v_Barycentric = barycentric;\\n#ifdef VERTEX_COLOR\\n v_Color = a_Color;\\n#endif\\n @import clay.util.logdepth_vertex_main\\n}\\n@end\\n@export clay.lambert.fragment\\n#define DIFFUSEMAP_ALPHA_ALPHA\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nuniform sampler2D diffuseMap;\\nuniform sampler2D alphaMap;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform vec3 emission : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\n#ifdef ALPHA_TEST\\nuniform float alphaCutoff: 0.9;\\n#endif\\nuniform float lineWidth : 0.0;\\nuniform vec4 lineColor : [0.0, 0.0, 0.0, 0.6];\\nvarying vec3 v_Barycentric;\\n#ifdef VERTEX_COLOR\\nvarying vec4 v_Color;\\n#endif\\n#ifdef AMBIENT_LIGHT_COUNT\\n@import clay.header.ambient_light\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n@import clay.header.ambient_sh_light\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n@import clay.header.point_light\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n@import clay.header.directional_light\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n@import clay.header.spot_light\\n#endif\\n@import clay.util.logdepth_fragment_header\\n@import clay.util.calculate_attenuation\\n@import clay.util.edge_factor\\n@import clay.util.rgbm\\n@import clay.plugin.compute_shadow_map\\n@import clay.util.ACES\\nvoid main()\\n{\\n gl_FragColor = vec4(color, alpha);\\n#ifdef VERTEX_COLOR\\n gl_FragColor *= v_Color;\\n#endif\\n#ifdef SRGB_DECODE\\n gl_FragColor = sRGBToLinear(gl_FragColor);\\n#endif\\n#ifdef DIFFUSEMAP_ENABLED\\n vec4 tex = texture2D( diffuseMap, v_Texcoord );\\n#ifdef SRGB_DECODE\\n tex.rgb = pow(tex.rgb, vec3(2.2));\\n#endif\\n gl_FragColor.rgb *= tex.rgb;\\n#ifdef DIFFUSEMAP_ALPHA_ALPHA\\n gl_FragColor.a *= tex.a;\\n#endif\\n#endif\\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\\n#ifdef AMBIENT_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\\n {\\n diffuseColor += ambientLightColor[_idx_];\\n }\\n#endif\\n#ifdef AMBIENT_SH_LIGHT_COUNT\\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\\n {{\\n diffuseColor += calcAmbientSHLight(_idx_, v_Normal) * ambientSHLightColor[_idx_];\\n }}\\n#endif\\n#ifdef POINT_LIGHT_COUNT\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsPoint[POINT_LIGHT_COUNT];\\n if( shadowEnabled )\\n {\\n computeShadowOfPointLights(v_WorldPosition, shadowContribsPoint);\\n }\\n#endif\\n for(int i = 0; i < POINT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = pointLightPosition[i];\\n vec3 lightColor = pointLightColor[i];\\n float range = pointLightRange[i];\\n vec3 lightDirection = lightPosition - v_WorldPosition;\\n float dist = length(lightDirection);\\n float attenuation = lightAttenuation(dist, range);\\n lightDirection /= dist;\\n float ndl = dot( v_Normal, lightDirection );\\n float shadowContrib = 1.0;\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsPoint[i];\\n }\\n#endif\\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * attenuation * shadowContrib;\\n }\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_COUNT\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\\n }\\n#endif\\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\\n {\\n vec3 lightDirection = -directionalLightDirection[i];\\n vec3 lightColor = directionalLightColor[i];\\n float ndl = dot(v_Normal, normalize(lightDirection));\\n float shadowContrib = 1.0;\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsDir[i];\\n }\\n#endif\\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0) * shadowContrib;\\n }\\n#endif\\n#ifdef SPOT_LIGHT_COUNT\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n float shadowContribsSpot[SPOT_LIGHT_COUNT];\\n if(shadowEnabled)\\n {\\n computeShadowOfSpotLights(v_WorldPosition, shadowContribsSpot);\\n }\\n#endif\\n for(int i = 0; i < SPOT_LIGHT_COUNT; i++)\\n {\\n vec3 lightPosition = -spotLightPosition[i];\\n vec3 spotLightDirection = -normalize( spotLightDirection[i] );\\n vec3 lightColor = spotLightColor[i];\\n float range = spotLightRange[i];\\n float a = spotLightUmbraAngleCosine[i];\\n float b = spotLightPenumbraAngleCosine[i];\\n float falloffFactor = spotLightFalloffFactor[i];\\n vec3 lightDirection = lightPosition - v_WorldPosition;\\n float dist = length(lightDirection);\\n float attenuation = lightAttenuation(dist, range);\\n lightDirection /= dist;\\n float c = dot(spotLightDirection, lightDirection);\\n float falloff;\\n falloff = clamp((c - a) /( b - a), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n float ndl = dot(v_Normal, lightDirection);\\n ndl = clamp(ndl, 0.0, 1.0);\\n float shadowContrib = 1.0;\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\n if( shadowEnabled )\\n {\\n shadowContrib = shadowContribsSpot[i];\\n }\\n#endif\\n diffuseColor += lightColor * ndl * attenuation * (1.0-falloff) * shadowContrib;\\n }\\n#endif\\n gl_FragColor.rgb *= diffuseColor;\\n gl_FragColor.rgb += emission;\\n if(lineWidth > 0.)\\n {\\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor(lineWidth)) * lineColor.a);\\n }\\n#ifdef ALPHA_TEST\\n if (gl_FragColor.a < alphaCutoff) {\\n discard;\\n }\\n#endif\\n#ifdef TONEMAPPING\\n gl_FragColor.rgb = ACESToneMapping(gl_FragColor.rgb);\\n#endif\\n#ifdef SRGB_ENCODE\\n gl_FragColor = linearTosRGB(gl_FragColor);\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n @import clay.util.logdepth_fragment_main\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2xhbWJlcnQuZ2xzbC5qcz9mOGI5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuQGV4cG9ydCBjbGF5LmxhbWJlcnQudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbnVuaWZvcm0gbWF0NCB3b3JsZEludmVyc2VUcmFuc3Bvc2UgOiBXT1JMRElOVkVSU0VUUkFOU1BPU0U7XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxudW5pZm9ybSB2ZWMyIHV2UmVwZWF0IDogWzEuMCwgMS4wXTtcXG51bmlmb3JtIHZlYzIgdXZPZmZzZXQgOiBbMC4wLCAwLjBdO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQgOiBURVhDT09SRF8wO1xcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbCA6IE5PUk1BTDtcXG5hdHRyaWJ1dGUgdmVjMyBiYXJ5Y2VudHJpYztcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxuYXR0cmlidXRlIHZlYzQgYV9Db2xvciA6IENPTE9SO1xcbnZhcnlpbmcgdmVjNCB2X0NvbG9yO1xcbiNlbmRpZlxcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF92ZXJ0ZXhfaGVhZGVyXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudmFyeWluZyB2ZWMzIHZfTm9ybWFsO1xcbnZhcnlpbmcgdmVjMyB2X1dvcmxkUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZfQmFyeWNlbnRyaWM7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgc2tpbm5lZFBvc2l0aW9uID0gdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gdmVjNCBza2lubmVkTm9ybWFsID0gdmVjNChub3JtYWwsIDAuMCk7XFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSBza2luTWF0cml4V1MgKiBza2lubmVkUG9zaXRpb247XFxuIHNraW5uZWROb3JtYWwgPSBza2luTWF0cml4V1MgKiBza2lubmVkTm9ybWFsO1xcbiNlbmRpZlxcbiNpZmRlZiBJTlNUQU5DSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5pbnN0YW5jaW5nX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSBpbnN0YW5jZU1hdCAqIHNraW5uZWRQb3NpdGlvbjtcXG4gc2tpbm5lZE5vcm1hbCA9IGluc3RhbmNlTWF0ICogc2tpbm5lZE5vcm1hbDtcXG4jZW5kaWZcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogc2tpbm5lZFBvc2l0aW9uO1xcbiB2X1RleGNvb3JkID0gdGV4Y29vcmQgKiB1dlJlcGVhdCArIHV2T2Zmc2V0O1xcbiB2X05vcm1hbCA9IG5vcm1hbGl6ZSgod29ybGRJbnZlcnNlVHJhbnNwb3NlICogc2tpbm5lZE5vcm1hbCkueHl6KTtcXG4gdl9Xb3JsZFBvc2l0aW9uID0gKCB3b3JsZCAqIHNraW5uZWRQb3NpdGlvbiApLnh5ejtcXG4gdl9CYXJ5Y2VudHJpYyA9IGJhcnljZW50cmljO1xcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG4gdl9Db2xvciA9IGFfQ29sb3I7XFxuI2VuZGlmXFxuIEBpbXBvcnQgY2xheS51dGlsLmxvZ2RlcHRoX3ZlcnRleF9tYWluXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkubGFtYmVydC5mcmFnbWVudFxcbiNkZWZpbmUgRElGRlVTRU1BUF9BTFBIQV9BTFBIQVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZhcnlpbmcgdmVjMyB2X05vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGRpZmZ1c2VNYXA7XFxudW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxudW5pZm9ybSB2ZWMzIGNvbG9yIDogWzEuMCwgMS4wLCAxLjBdO1xcbnVuaWZvcm0gdmVjMyBlbWlzc2lvbiA6IFswLjAsIDAuMCwgMC4wXTtcXG51bmlmb3JtIGZsb2F0IGFscGhhIDogMS4wO1xcbiNpZmRlZiBBTFBIQV9URVNUXFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC45O1xcbiNlbmRpZlxcbnVuaWZvcm0gZmxvYXQgbGluZVdpZHRoIDogMC4wO1xcbnVuaWZvcm0gdmVjNCBsaW5lQ29sb3IgOiBbMC4wLCAwLjAsIDAuMCwgMC42XTtcXG52YXJ5aW5nIHZlYzMgdl9CYXJ5Y2VudHJpYztcXG4jaWZkZWYgVkVSVEVYX0NPTE9SXFxudmFyeWluZyB2ZWM0IHZfQ29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIEFNQklFTlRfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLmFtYmllbnRfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgQU1CSUVOVF9TSF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIuYW1iaWVudF9zaF9saWdodFxcbiNlbmRpZlxcbiNpZmRlZiBQT0lOVF9MSUdIVF9DT1VOVFxcbkBpbXBvcnQgY2xheS5oZWFkZXIucG9pbnRfbGlnaHRcXG4jZW5kaWZcXG4jaWZkZWYgRElSRUNUSU9OQUxfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLmRpcmVjdGlvbmFsX2xpZ2h0XFxuI2VuZGlmXFxuI2lmZGVmIFNQT1RfTElHSFRfQ09VTlRcXG5AaW1wb3J0IGNsYXkuaGVhZGVyLnNwb3RfbGlnaHRcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkudXRpbC5sb2dkZXB0aF9mcmFnbWVudF9oZWFkZXJcXG5AaW1wb3J0IGNsYXkudXRpbC5jYWxjdWxhdGVfYXR0ZW51YXRpb25cXG5AaW1wb3J0IGNsYXkudXRpbC5lZGdlX2ZhY3RvclxcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG5AaW1wb3J0IGNsYXkucGx1Z2luLmNvbXB1dGVfc2hhZG93X21hcFxcbkBpbXBvcnQgY2xheS51dGlsLkFDRVNcXG52b2lkIG1haW4oKVxcbntcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgYWxwaGEpO1xcbiNpZmRlZiBWRVJURVhfQ09MT1JcXG4gZ2xfRnJhZ0NvbG9yICo9IHZfQ29sb3I7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfREVDT0RFXFxuIGdsX0ZyYWdDb2xvciA9IHNSR0JUb0xpbmVhcihnbF9GcmFnQ29sb3IpO1xcbiNlbmRpZlxcbiNpZmRlZiBESUZGVVNFTUFQX0VOQUJMRURcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQoIGRpZmZ1c2VNYXAsIHZfVGV4Y29vcmQgKTtcXG4jaWZkZWYgU1JHQl9ERUNPREVcXG4gdGV4LnJnYiA9IHBvdyh0ZXgucmdiLCB2ZWMzKDIuMikpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IucmdiICo9IHRleC5yZ2I7XFxuI2lmZGVmIERJRkZVU0VNQVBfQUxQSEFfQUxQSEFcXG4gZ2xfRnJhZ0NvbG9yLmEgKj0gdGV4LmE7XFxuI2VuZGlmXFxuI2VuZGlmXFxuIHZlYzMgZGlmZnVzZUNvbG9yID0gdmVjMygwLjAsIDAuMCwgMC4wKTtcXG4jaWZkZWYgQU1CSUVOVF9MSUdIVF9DT1VOVFxcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBBTUJJRU5UX0xJR0hUX0NPVU5UOyBfaWR4XysrKVxcbiB7XFxuIGRpZmZ1c2VDb2xvciArPSBhbWJpZW50TGlnaHRDb2xvcltfaWR4X107XFxuIH1cXG4jZW5kaWZcXG4jaWZkZWYgQU1CSUVOVF9TSF9MSUdIVF9DT1VOVFxcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBBTUJJRU5UX1NIX0xJR0hUX0NPVU5UOyBfaWR4XysrKVxcbiB7e1xcbiBkaWZmdXNlQ29sb3IgKz0gY2FsY0FtYmllbnRTSExpZ2h0KF9pZHhfLCB2X05vcm1hbCkgKiBhbWJpZW50U0hMaWdodENvbG9yW19pZHhfXTtcXG4gfX1cXG4jZW5kaWZcXG4jaWZkZWYgUE9JTlRfTElHSFRfQ09VTlRcXG4jaWYgZGVmaW5lZChQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGZsb2F0IHNoYWRvd0NvbnRyaWJzUG9pbnRbUE9JTlRfTElHSFRfQ09VTlRdO1xcbiBpZiggc2hhZG93RW5hYmxlZCApXFxuIHtcXG4gY29tcHV0ZVNoYWRvd09mUG9pbnRMaWdodHModl9Xb3JsZFBvc2l0aW9uLCBzaGFkb3dDb250cmlic1BvaW50KTtcXG4gfVxcbiNlbmRpZlxcbiBmb3IoaW50IGkgPSAwOyBpIDwgUE9JTlRfTElHSFRfQ09VTlQ7IGkrKylcXG4ge1xcbiB2ZWMzIGxpZ2h0UG9zaXRpb24gPSBwb2ludExpZ2h0UG9zaXRpb25baV07XFxuIHZlYzMgbGlnaHRDb2xvciA9IHBvaW50TGlnaHRDb2xvcltpXTtcXG4gZmxvYXQgcmFuZ2UgPSBwb2ludExpZ2h0UmFuZ2VbaV07XFxuIHZlYzMgbGlnaHREaXJlY3Rpb24gPSBsaWdodFBvc2l0aW9uIC0gdl9Xb3JsZFBvc2l0aW9uO1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKGxpZ2h0RGlyZWN0aW9uKTtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIHJhbmdlKTtcXG4gbGlnaHREaXJlY3Rpb24gLz0gZGlzdDtcXG4gZmxvYXQgbmRsID0gZG90KCB2X05vcm1hbCwgbGlnaHREaXJlY3Rpb24gKTtcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IDEuMDtcXG4jaWYgZGVmaW5lZChQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxuIGlmKCBzaGFkb3dFbmFibGVkIClcXG4ge1xcbiBzaGFkb3dDb250cmliID0gc2hhZG93Q29udHJpYnNQb2ludFtpXTtcXG4gfVxcbiNlbmRpZlxcbiBkaWZmdXNlQ29sb3IgKz0gbGlnaHRDb2xvciAqIGNsYW1wKG5kbCwgMC4wLCAxLjApICogYXR0ZW51YXRpb24gKiBzaGFkb3dDb250cmliO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIERJUkVDVElPTkFMX0xJR0hUX0NPVU5UXFxuI2lmIGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBmbG9hdCBzaGFkb3dDb250cmlic0RpcltESVJFQ1RJT05BTF9MSUdIVF9DT1VOVF07XFxuIGlmKHNoYWRvd0VuYWJsZWQpXFxuIHtcXG4gY29tcHV0ZVNoYWRvd09mRGlyZWN0aW9uYWxMaWdodHModl9Xb3JsZFBvc2l0aW9uLCBzaGFkb3dDb250cmlic0Rpcik7XFxuIH1cXG4jZW5kaWZcXG4gZm9yKGludCBpID0gMDsgaSA8IERJUkVDVElPTkFMX0xJR0hUX0NPVU5UOyBpKyspXFxuIHtcXG4gdmVjMyBsaWdodERpcmVjdGlvbiA9IC1kaXJlY3Rpb25hbExpZ2h0RGlyZWN0aW9uW2ldO1xcbiB2ZWMzIGxpZ2h0Q29sb3IgPSBkaXJlY3Rpb25hbExpZ2h0Q29sb3JbaV07XFxuIGZsb2F0IG5kbCA9IGRvdCh2X05vcm1hbCwgbm9ybWFsaXplKGxpZ2h0RGlyZWN0aW9uKSk7XFxuIGZsb2F0IHNoYWRvd0NvbnRyaWIgPSAxLjA7XFxuI2lmIGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZiggc2hhZG93RW5hYmxlZCApXFxuIHtcXG4gc2hhZG93Q29udHJpYiA9IHNoYWRvd0NvbnRyaWJzRGlyW2ldO1xcbiB9XFxuI2VuZGlmXFxuIGRpZmZ1c2VDb2xvciArPSBsaWdodENvbG9yICogY2xhbXAobmRsLCAwLjAsIDEuMCkgKiBzaGFkb3dDb250cmliO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIFNQT1RfTElHSFRfQ09VTlRcXG4jaWYgZGVmaW5lZChTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4gZmxvYXQgc2hhZG93Q29udHJpYnNTcG90W1NQT1RfTElHSFRfQ09VTlRdO1xcbiBpZihzaGFkb3dFbmFibGVkKVxcbiB7XFxuIGNvbXB1dGVTaGFkb3dPZlNwb3RMaWdodHModl9Xb3JsZFBvc2l0aW9uLCBzaGFkb3dDb250cmlic1Nwb3QpO1xcbiB9XFxuI2VuZGlmXFxuIGZvcihpbnQgaSA9IDA7IGkgPCBTUE9UX0xJR0hUX0NPVU5UOyBpKyspXFxuIHtcXG4gdmVjMyBsaWdodFBvc2l0aW9uID0gLXNwb3RMaWdodFBvc2l0aW9uW2ldO1xcbiB2ZWMzIHNwb3RMaWdodERpcmVjdGlvbiA9IC1ub3JtYWxpemUoIHNwb3RMaWdodERpcmVjdGlvbltpXSApO1xcbiB2ZWMzIGxpZ2h0Q29sb3IgPSBzcG90TGlnaHRDb2xvcltpXTtcXG4gZmxvYXQgcmFuZ2UgPSBzcG90TGlnaHRSYW5nZVtpXTtcXG4gZmxvYXQgYSA9IHNwb3RMaWdodFVtYnJhQW5nbGVDb3NpbmVbaV07XFxuIGZsb2F0IGIgPSBzcG90TGlnaHRQZW51bWJyYUFuZ2xlQ29zaW5lW2ldO1xcbiBmbG9hdCBmYWxsb2ZmRmFjdG9yID0gc3BvdExpZ2h0RmFsbG9mZkZhY3RvcltpXTtcXG4gdmVjMyBsaWdodERpcmVjdGlvbiA9IGxpZ2h0UG9zaXRpb24gLSB2X1dvcmxkUG9zaXRpb247XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgobGlnaHREaXJlY3Rpb24pO1xcbiBmbG9hdCBhdHRlbnVhdGlvbiA9IGxpZ2h0QXR0ZW51YXRpb24oZGlzdCwgcmFuZ2UpO1xcbiBsaWdodERpcmVjdGlvbiAvPSBkaXN0O1xcbiBmbG9hdCBjID0gZG90KHNwb3RMaWdodERpcmVjdGlvbiwgbGlnaHREaXJlY3Rpb24pO1xcbiBmbG9hdCBmYWxsb2ZmO1xcbiBmYWxsb2ZmID0gY2xhbXAoKGMgLSBhKSAvKCBiIC0gYSksIDAuMCwgMS4wKTtcXG4gZmFsbG9mZiA9IHBvdyhmYWxsb2ZmLCBmYWxsb2ZmRmFjdG9yKTtcXG4gZmxvYXQgbmRsID0gZG90KHZfTm9ybWFsLCBsaWdodERpcmVjdGlvbik7XFxuIG5kbCA9IGNsYW1wKG5kbCwgMC4wLCAxLjApO1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gMS4wO1xcbiNpZiBkZWZpbmVkKFNQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiBpZiggc2hhZG93RW5hYmxlZCApXFxuIHtcXG4gc2hhZG93Q29udHJpYiA9IHNoYWRvd0NvbnRyaWJzU3BvdFtpXTtcXG4gfVxcbiNlbmRpZlxcbiBkaWZmdXNlQ29sb3IgKz0gbGlnaHRDb2xvciAqIG5kbCAqIGF0dGVudWF0aW9uICogKDEuMC1mYWxsb2ZmKSAqIHNoYWRvd0NvbnRyaWI7XFxuIH1cXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yLnJnYiAqPSBkaWZmdXNlQ29sb3I7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgKz0gZW1pc3Npb247XFxuIGlmKGxpbmVXaWR0aCA+IDAuKVxcbiB7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBtaXgoZ2xfRnJhZ0NvbG9yLnJnYiwgbGluZUNvbG9yLnJnYiwgKDEuMCAtIGVkZ2VGYWN0b3IobGluZVdpZHRoKSkgKiBsaW5lQ29sb3IuYSk7XFxuIH1cXG4jaWZkZWYgQUxQSEFfVEVTVFxcbiBpZiAoZ2xfRnJhZ0NvbG9yLmEgPCBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuI2VuZGlmXFxuI2lmZGVmIFRPTkVNQVBQSU5HXFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBBQ0VTVG9uZU1hcHBpbmcoZ2xfRnJhZ0NvbG9yLnJnYik7XFxuI2VuZGlmXFxuI2lmZGVmIFNSR0JfRU5DT0RFXFxuIGdsX0ZyYWdDb2xvciA9IGxpbmVhclRvc1JHQihnbF9GcmFnQ29sb3IpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoZ2xfRnJhZ0NvbG9yKTtcXG4gQGltcG9ydCBjbGF5LnV0aWwubG9nZGVwdGhfZnJhZ21lbnRfbWFpblxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9sYW1iZXJ0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzNVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///135\n");

/***/ }),
/* 136 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.wireframe.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 world : WORLD;\\nattribute vec3 position : POSITION;\\nattribute vec3 barycentric;\\n@import clay.chunk.skinning_header\\nvarying vec3 v_Barycentric;\\nvoid main()\\n{\\n vec3 skinnedPosition = position;\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n#endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0 );\\n v_Barycentric = barycentric;\\n}\\n@end\\n@export clay.wireframe.fragment\\nuniform vec3 color : [0.0, 0.0, 0.0];\\nuniform float alpha : 1.0;\\nuniform float lineWidth : 1.0;\\nvarying vec3 v_Barycentric;\\n@import clay.util.edge_factor\\nvoid main()\\n{\\n gl_FragColor.rgb = color;\\n gl_FragColor.a = (1.0-edgeFactor(lineWidth)) * alpha;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3dpcmVmcmFtZS5nbHNsLmpzP2Y1YTQiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkud2lyZWZyYW1lLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG51bmlmb3JtIG1hdDQgd29ybGQgOiBXT1JMRDtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIGJhcnljZW50cmljO1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG52YXJ5aW5nIHZlYzMgdl9CYXJ5Y2VudHJpYztcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMyBza2lubmVkUG9zaXRpb24gPSBwb3NpdGlvbjtcXG4jaWZkZWYgU0tJTk5JTkdcXG4gQGltcG9ydCBjbGF5LmNodW5rLnNraW5fbWF0cml4XFxuIHNraW5uZWRQb3NpdGlvbiA9IChza2luTWF0cml4V1MgKiB2ZWM0KHBvc2l0aW9uLCAxLjApKS54eXo7XFxuI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQoc2tpbm5lZFBvc2l0aW9uLCAxLjAgKTtcXG4gdl9CYXJ5Y2VudHJpYyA9IGJhcnljZW50cmljO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LndpcmVmcmFtZS5mcmFnbWVudFxcbnVuaWZvcm0gdmVjMyBjb2xvciA6IFswLjAsIDAuMCwgMC4wXTtcXG51bmlmb3JtIGZsb2F0IGFscGhhIDogMS4wO1xcbnVuaWZvcm0gZmxvYXQgbGluZVdpZHRoIDogMS4wO1xcbnZhcnlpbmcgdmVjMyB2X0JhcnljZW50cmljO1xcbkBpbXBvcnQgY2xheS51dGlsLmVkZ2VfZmFjdG9yXFxudm9pZCBtYWluKClcXG57XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBjb2xvcjtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAoMS4wLWVkZ2VGYWN0b3IobGluZVdpZHRoKSkgKiBhbHBoYTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2Uvd2lyZWZyYW1lLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///136\n");

/***/ }),
/* 137 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n v_Texcoord = texcoord;\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdmVydGV4Lmdsc2wuanM/N2JlYyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIlxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkIDogVEVYQ09PUkRfMDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKVxcbntcXG4gdl9UZXhjb29yZCA9IHRleGNvb3JkO1xcbiBnbF9Qb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3ZlcnRleC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///137\n");

/***/ }),
/* 138 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"#define SAMPLE_NUMBER 1024\\n#define PI 3.14159265358979\\nuniform sampler2D normalDistribution;\\nuniform vec2 viewportSize : [512, 256];\\nconst vec3 N = vec3(0.0, 0.0, 1.0);\\nconst float fSampleNumber = float(SAMPLE_NUMBER);\\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\\n vec3 tangentX = normalize(cross(N, upVector));\\n vec3 tangentZ = cross(N, tangentX);\\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\\n}\\nfloat G_Smith(float roughness, float NoV, float NoL) {\\n float k = roughness * roughness / 2.0;\\n float G1V = NoV / (NoV * (1.0 - k) + k);\\n float G1L = NoL / (NoL * (1.0 - k) + k);\\n return G1L * G1V;\\n}\\nvoid main() {\\n vec2 uv = gl_FragCoord.xy / viewportSize;\\n float NoV = uv.x;\\n float roughness = uv.y;\\n vec3 V;\\n V.x = sqrt(1.0 - NoV * NoV);\\n V.y = 0.0;\\n V.z = NoV;\\n float A = 0.0;\\n float B = 0.0;\\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\\n vec3 L = reflect(-V, H);\\n float NoL = clamp(L.z, 0.0, 1.0);\\n float NoH = clamp(H.z, 0.0, 1.0);\\n float VoH = clamp(dot(V, H), 0.0, 1.0);\\n if (NoL > 0.0) {\\n float G = G_Smith(roughness, NoV, NoL);\\n float G_Vis = G * VoH / (NoH * NoV);\\n float Fc = pow(1.0 - VoH, 5.0);\\n A += (1.0 - Fc) * G_Vis;\\n B += Fc * G_Vis;\\n }\\n }\\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\\n}\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3NoYWRlci9pbnRlZ3JhdGVCUkRGLmdsc2wuanM/MTU5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIiNkZWZpbmUgU0FNUExFX05VTUJFUiAxMDI0XFxuI2RlZmluZSBQSSAzLjE0MTU5MjY1MzU4OTc5XFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsRGlzdHJpYnV0aW9uO1xcbnVuaWZvcm0gdmVjMiB2aWV3cG9ydFNpemUgOiBbNTEyLCAyNTZdO1xcbmNvbnN0IHZlYzMgTiA9IHZlYzMoMC4wLCAwLjAsIDEuMCk7XFxuY29uc3QgZmxvYXQgZlNhbXBsZU51bWJlciA9IGZsb2F0KFNBTVBMRV9OVU1CRVIpO1xcbnZlYzMgaW1wb3J0YW5jZVNhbXBsZU5vcm1hbChmbG9hdCBpLCBmbG9hdCByb3VnaG5lc3MsIHZlYzMgTikge1xcbiB2ZWMzIEggPSB0ZXh0dXJlMkQobm9ybWFsRGlzdHJpYnV0aW9uLCB2ZWMyKHJvdWdobmVzcywgaSkpLnJnYjtcXG4gdmVjMyB1cFZlY3RvciA9IGFicyhOLnkpID4gMC45OTkgPyB2ZWMzKDEuMCwgMC4wLCAwLjApIDogdmVjMygwLjAsIDEuMCwgMC4wKTtcXG4gdmVjMyB0YW5nZW50WCA9IG5vcm1hbGl6ZShjcm9zcyhOLCB1cFZlY3RvcikpO1xcbiB2ZWMzIHRhbmdlbnRaID0gY3Jvc3MoTiwgdGFuZ2VudFgpO1xcbiByZXR1cm4gbm9ybWFsaXplKHRhbmdlbnRYICogSC54ICsgTiAqIEgueSArIHRhbmdlbnRaICogSC56KTtcXG59XFxuZmxvYXQgR19TbWl0aChmbG9hdCByb3VnaG5lc3MsIGZsb2F0IE5vViwgZmxvYXQgTm9MKSB7XFxuIGZsb2F0IGsgPSByb3VnaG5lc3MgKiByb3VnaG5lc3MgLyAyLjA7XFxuIGZsb2F0IEcxViA9IE5vViAvIChOb1YgKiAoMS4wIC0gaykgKyBrKTtcXG4gZmxvYXQgRzFMID0gTm9MIC8gKE5vTCAqICgxLjAgLSBrKSArIGspO1xcbiByZXR1cm4gRzFMICogRzFWO1xcbn1cXG52b2lkIG1haW4oKSB7XFxuIHZlYzIgdXYgPSBnbF9GcmFnQ29vcmQueHkgLyB2aWV3cG9ydFNpemU7XFxuIGZsb2F0IE5vViA9IHV2Lng7XFxuIGZsb2F0IHJvdWdobmVzcyA9IHV2Lnk7XFxuIHZlYzMgVjtcXG4gVi54ID0gc3FydCgxLjAgLSBOb1YgKiBOb1YpO1xcbiBWLnkgPSAwLjA7XFxuIFYueiA9IE5vVjtcXG4gZmxvYXQgQSA9IDAuMDtcXG4gZmxvYXQgQiA9IDAuMDtcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCBTQU1QTEVfTlVNQkVSOyBpKyspIHtcXG4gdmVjMyBIID0gaW1wb3J0YW5jZVNhbXBsZU5vcm1hbChmbG9hdChpKSAvIGZTYW1wbGVOdW1iZXIsIHJvdWdobmVzcywgTik7XFxuIHZlYzMgTCA9IHJlZmxlY3QoLVYsIEgpO1xcbiBmbG9hdCBOb0wgPSBjbGFtcChMLnosIDAuMCwgMS4wKTtcXG4gZmxvYXQgTm9IID0gY2xhbXAoSC56LCAwLjAsIDEuMCk7XFxuIGZsb2F0IFZvSCA9IGNsYW1wKGRvdChWLCBIKSwgMC4wLCAxLjApO1xcbiBpZiAoTm9MID4gMC4wKSB7XFxuIGZsb2F0IEcgPSBHX1NtaXRoKHJvdWdobmVzcywgTm9WLCBOb0wpO1xcbiBmbG9hdCBHX1ZpcyA9IEcgKiBWb0ggLyAoTm9IICogTm9WKTtcXG4gZmxvYXQgRmMgPSBwb3coMS4wIC0gVm9ILCA1LjApO1xcbiBBICs9ICgxLjAgLSBGYykgKiBHX1ZpcztcXG4gQiArPSBGYyAqIEdfVmlzO1xcbiB9XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMyKEEsIEIpIC8gZlNhbXBsZU51bWJlciwgMC4wLCAxLjApO1xcbn1cXG5cIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3NoYWRlci9pbnRlZ3JhdGVCUkRGLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///138\n");

/***/ }),
/* 139 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"#define SHADER_NAME prefilter\\n#define SAMPLE_NUMBER 1024\\n#define PI 3.14159265358979\\nuniform mat4 viewInverse : VIEWINVERSE;\\nuniform samplerCube environmentMap;\\nuniform sampler2D normalDistribution;\\nuniform float roughness : 0.5;\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.rgbm\\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\\n vec3 tangentX = normalize(cross(N, upVector));\\n vec3 tangentZ = cross(N, tangentX);\\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\\n}\\nvoid main() {\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = normalize(v_WorldPosition - eyePos);\\n vec3 N = V;\\n vec3 prefilteredColor = vec3(0.0);\\n float totalWeight = 0.0;\\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\\n vec3 L = reflect(-V, H);\\n float NoL = clamp(dot(N, L), 0.0, 1.0);\\n if (NoL > 0.0) {\\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\\n totalWeight += NoL;\\n }\\n }\\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\\n}\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3NoYWRlci9wcmVmaWx0ZXIuZ2xzbC5qcz83YTBiIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiI2RlZmluZSBTSEFERVJfTkFNRSBwcmVmaWx0ZXJcXG4jZGVmaW5lIFNBTVBMRV9OVU1CRVIgMTAyNFxcbiNkZWZpbmUgUEkgMy4xNDE1OTI2NTM1ODk3OVxcbnVuaWZvcm0gbWF0NCB2aWV3SW52ZXJzZSA6IFZJRVdJTlZFUlNFO1xcbnVuaWZvcm0gc2FtcGxlckN1YmUgZW52aXJvbm1lbnRNYXA7XFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsRGlzdHJpYnV0aW9uO1xcbnVuaWZvcm0gZmxvYXQgcm91Z2huZXNzIDogMC41O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZhcnlpbmcgdmVjMyB2X1dvcmxkUG9zaXRpb247XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZlYzMgaW1wb3J0YW5jZVNhbXBsZU5vcm1hbChmbG9hdCBpLCBmbG9hdCByb3VnaG5lc3MsIHZlYzMgTikge1xcbiB2ZWMzIEggPSB0ZXh0dXJlMkQobm9ybWFsRGlzdHJpYnV0aW9uLCB2ZWMyKHJvdWdobmVzcywgaSkpLnJnYjtcXG4gdmVjMyB1cFZlY3RvciA9IGFicyhOLnkpID4gMC45OTkgPyB2ZWMzKDEuMCwgMC4wLCAwLjApIDogdmVjMygwLjAsIDEuMCwgMC4wKTtcXG4gdmVjMyB0YW5nZW50WCA9IG5vcm1hbGl6ZShjcm9zcyhOLCB1cFZlY3RvcikpO1xcbiB2ZWMzIHRhbmdlbnRaID0gY3Jvc3MoTiwgdGFuZ2VudFgpO1xcbiByZXR1cm4gbm9ybWFsaXplKHRhbmdlbnRYICogSC54ICsgTiAqIEgueSArIHRhbmdlbnRaICogSC56KTtcXG59XFxudm9pZCBtYWluKCkge1xcbiB2ZWMzIGV5ZVBvcyA9IHZpZXdJbnZlcnNlWzNdLnh5ejtcXG4gdmVjMyBWID0gbm9ybWFsaXplKHZfV29ybGRQb3NpdGlvbiAtIGV5ZVBvcyk7XFxuIHZlYzMgTiA9IFY7XFxuIHZlYzMgcHJlZmlsdGVyZWRDb2xvciA9IHZlYzMoMC4wKTtcXG4gZmxvYXQgdG90YWxXZWlnaHQgPSAwLjA7XFxuIGZsb2F0IGZNYXhTYW1wbGVOdW1iZXIgPSBmbG9hdChTQU1QTEVfTlVNQkVSKTtcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCBTQU1QTEVfTlVNQkVSOyBpKyspIHtcXG4gdmVjMyBIID0gaW1wb3J0YW5jZVNhbXBsZU5vcm1hbChmbG9hdChpKSAvIGZNYXhTYW1wbGVOdW1iZXIsIHJvdWdobmVzcywgTik7XFxuIHZlYzMgTCA9IHJlZmxlY3QoLVYsIEgpO1xcbiBmbG9hdCBOb0wgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gaWYgKE5vTCA+IDAuMCkge1xcbiBwcmVmaWx0ZXJlZENvbG9yICs9IGRlY29kZUhEUih0ZXh0dXJlQ3ViZShlbnZpcm9ubWVudE1hcCwgTCkpLnJnYiAqIE5vTDtcXG4gdG90YWxXZWlnaHQgKz0gTm9MO1xcbiB9XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHZlYzQocHJlZmlsdGVyZWRDb2xvciAvIHRvdGFsV2VpZ2h0LCAxLjApKTtcXG59XFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC9zaGFkZXIvcHJlZmlsdGVyLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDEzOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///139\n");

/***/ }),
/* 140 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.sm.depth.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec2 texcoord : TEXCOORD_0;\\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\\nuniform vec2 uvOffset = vec2(0.0, 0.0);\\n@import clay.chunk.skinning_header\\n@import clay.chunk.instancing_header\\nvarying vec4 v_ViewPosition;\\nvarying vec2 v_Texcoord;\\nvoid main(){\\n vec4 P = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n v_ViewPosition = worldViewProjection * P;\\n gl_Position = v_ViewPosition;\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n}\\n@end\\n@export clay.sm.depth.fragment\\nvarying vec4 v_ViewPosition;\\nvarying vec2 v_Texcoord;\\nuniform float bias : 0.001;\\nuniform float slopeScale : 1.0;\\nuniform sampler2D alphaMap;\\nuniform float alphaCutoff: 0.0;\\n@import clay.util.encode_float\\nvoid main(){\\n float depth = v_ViewPosition.z / v_ViewPosition.w;\\n if (alphaCutoff > 0.0) {\\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\\n discard;\\n }\\n }\\n#ifdef USE_VSM\\n depth = depth * 0.5 + 0.5;\\n float moment1 = depth;\\n float moment2 = depth * depth;\\n #ifdef SUPPORT_STANDARD_DERIVATIVES\\n float dx = dFdx(depth);\\n float dy = dFdy(depth);\\n moment2 += 0.25*(dx*dx+dy*dy);\\n #endif\\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\\n#else\\n #ifdef SUPPORT_STANDARD_DERIVATIVES\\n float dx = dFdx(depth);\\n float dy = dFdy(depth);\\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\\n #else\\n depth += bias;\\n #endif\\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\\n#endif\\n}\\n@end\\n@export clay.sm.debug_depth\\nuniform sampler2D depthMap;\\nvarying vec2 v_Texcoord;\\n@import clay.util.decode_float\\nvoid main() {\\n vec4 tex = texture2D(depthMap, v_Texcoord);\\n#ifdef USE_VSM\\n gl_FragColor = vec4(tex.rgb, 1.0);\\n#else\\n float depth = decodeFloat(tex);\\n gl_FragColor = vec4(depth, depth, depth, 1.0);\\n#endif\\n}\\n@end\\n@export clay.sm.distance.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nuniform mat4 world : WORLD;\\nattribute vec3 position : POSITION;\\n@import clay.chunk.skinning_header\\nvarying vec3 v_WorldPosition;\\nvoid main (){\\n vec4 P = vec4(position, 1.0);\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n P = skinMatrixWS * P;\\n#endif\\n#ifdef INSTANCING\\n @import clay.chunk.instancing_matrix\\n P = instanceMat * P;\\n#endif\\n gl_Position = worldViewProjection * P;\\n v_WorldPosition = (world * P).xyz;\\n}\\n@end\\n@export clay.sm.distance.fragment\\nuniform vec3 lightPosition;\\nuniform float range : 100;\\nvarying vec3 v_WorldPosition;\\n@import clay.util.encode_float\\nvoid main(){\\n float dist = distance(lightPosition, v_WorldPosition);\\n#ifdef USE_VSM\\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\\n#else\\n dist = dist / range;\\n gl_FragColor = encodeFloat(dist);\\n#endif\\n}\\n@end\\n@export clay.plugin.shadow_map_common\\n@import clay.util.decode_float\\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\\n vec4 tex = texture2D(map, uv);\\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\\n}\\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\\n float shadowContrib = tapShadowMap(map, uv, z);\\n vec2 offset = vec2(1.0 / textureSize) * scale;\\n#ifdef PCF_KERNEL_SIZE\\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\\n }}\\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\\n#else\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\\n return shadowContrib / 9.0;\\n#endif\\n}\\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\\n return pcf(map, uv, z, textureSize, vec2(1.0));\\n}\\nfloat chebyshevUpperBound(vec2 moments, float z){\\n float p = 0.0;\\n z = z * 0.5 + 0.5;\\n if (z <= moments.x) {\\n p = 1.0;\\n }\\n float variance = moments.y - moments.x * moments.x;\\n variance = max(variance, 0.0000001);\\n float mD = moments.x - z;\\n float pMax = variance / (variance + mD * mD);\\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\\n return max(p, pMax);\\n}\\nfloat computeShadowContrib(\\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\\n) {\\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\\n posInLightSpace.xyz /= posInLightSpace.w;\\n float z = posInLightSpace.z;\\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\\n #ifdef USE_VSM\\n vec2 moments = texture2D(map, uv * scale + offset).xy;\\n return chebyshevUpperBound(moments, z);\\n #else\\n return pcf(map, uv * scale + offset, z, textureSize, scale);\\n #endif\\n }\\n return 1.0;\\n}\\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\\n}\\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\\n{\\n float dist = length(direction);\\n vec4 shadowTex = textureCube(map, direction);\\n#ifdef USE_VSM\\n vec2 moments = shadowTex.xy;\\n float variance = moments.y - moments.x * moments.x;\\n float mD = moments.x - dist;\\n float p = variance / (variance + mD * mD);\\n if(moments.x + 0.001 < dist){\\n return clamp(p, 0.0, 1.0);\\n }else{\\n return 1.0;\\n }\\n#else\\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\\n#endif\\n}\\n@end\\n@export clay.plugin.compute_shadow_map\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\\n#if defined(SHADOW_CASCADE)\\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\\n#else\\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\n#endif\\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\\n#endif\\nuniform bool shadowEnabled : true;\\n#ifdef PCF_KERNEL_SIZE\\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\\n#endif\\n@import clay.plugin.shadow_map_common\\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\\n float shadowContrib;\\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n shadowContrib = computeShadowContrib(\\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\\n spotLightShadowMapSizes[_idx_]\\n );\\n shadowContribs[_idx_] = shadowContrib;\\n }}\\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\\n#ifdef SHADOW_CASCADE\\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\\n / (gl_DepthRange.far - gl_DepthRange.near);\\n float shadowContrib;\\n shadowContribs[0] = 1.0;\\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\\n if (\\n depth >= shadowCascadeClipsNear[_idx_] &&\\n depth <= shadowCascadeClipsFar[_idx_]\\n ) {\\n shadowContrib = computeShadowContrib(\\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\\n directionalLightShadowMapSizes[0],\\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\\n );\\n shadowContribs[0] = shadowContrib;\\n }\\n }}\\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#else\\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\\n float shadowContrib;\\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n shadowContrib = computeShadowContrib(\\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\\n directionalLightShadowMapSizes[_idx_]\\n );\\n shadowContribs[_idx_] = shadowContrib;\\n }}\\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#endif\\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\\n vec3 lightPosition;\\n vec3 direction;\\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\\n lightPosition = pointLightPosition[_idx_];\\n direction = position - lightPosition;\\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\\n }}\\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\\n shadowContribs[_idx_] = 1.0;\\n }}\\n}\\n#endif\\n#endif\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3NoYWRvd21hcC5nbHNsLmpzP2IwNWYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuc20uZGVwdGgudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQgOiBURVhDT09SRF8wO1xcbnVuaWZvcm0gdmVjMiB1dlJlcGVhdCA9IHZlYzIoMS4wLCAxLjApO1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldCA9IHZlYzIoMC4wLCAwLjApO1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG5AaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19oZWFkZXJcXG52YXJ5aW5nIHZlYzQgdl9WaWV3UG9zaXRpb247XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudm9pZCBtYWluKCl7XFxuIHZlYzQgUCA9IHZlYzQocG9zaXRpb24sIDEuMCk7XFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBQID0gc2tpbk1hdHJpeFdTICogUDtcXG4jZW5kaWZcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG4gUCA9IGluc3RhbmNlTWF0ICogUDtcXG4jZW5kaWZcXG4gdl9WaWV3UG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogUDtcXG4gZ2xfUG9zaXRpb24gPSB2X1ZpZXdQb3NpdGlvbjtcXG4gdl9UZXhjb29yZCA9IHRleGNvb3JkICogdXZSZXBlYXQgKyB1dk9mZnNldDtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zbS5kZXB0aC5mcmFnbWVudFxcbnZhcnlpbmcgdmVjNCB2X1ZpZXdQb3NpdGlvbjtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIGZsb2F0IGJpYXMgOiAwLjAwMTtcXG51bmlmb3JtIGZsb2F0IHNsb3BlU2NhbGUgOiAxLjA7XFxudW5pZm9ybSBzYW1wbGVyMkQgYWxwaGFNYXA7XFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC4wO1xcbkBpbXBvcnQgY2xheS51dGlsLmVuY29kZV9mbG9hdFxcbnZvaWQgbWFpbigpe1xcbiBmbG9hdCBkZXB0aCA9IHZfVmlld1Bvc2l0aW9uLnogLyB2X1ZpZXdQb3NpdGlvbi53O1xcbiBpZiAoYWxwaGFDdXRvZmYgPiAwLjApIHtcXG4gaWYgKHRleHR1cmUyRChhbHBoYU1hcCwgdl9UZXhjb29yZCkuYSA8PSBhbHBoYUN1dG9mZikge1xcbiBkaXNjYXJkO1xcbiB9XFxuIH1cXG4jaWZkZWYgVVNFX1ZTTVxcbiBkZXB0aCA9IGRlcHRoICogMC41ICsgMC41O1xcbiBmbG9hdCBtb21lbnQxID0gZGVwdGg7XFxuIGZsb2F0IG1vbWVudDIgPSBkZXB0aCAqIGRlcHRoO1xcbiAjaWZkZWYgU1VQUE9SVF9TVEFOREFSRF9ERVJJVkFUSVZFU1xcbiBmbG9hdCBkeCA9IGRGZHgoZGVwdGgpO1xcbiBmbG9hdCBkeSA9IGRGZHkoZGVwdGgpO1xcbiBtb21lbnQyICs9IDAuMjUqKGR4KmR4K2R5KmR5KTtcXG4gI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQobW9tZW50MSwgbW9tZW50MiwgMC4wLCAxLjApO1xcbiNlbHNlXFxuICNpZmRlZiBTVVBQT1JUX1NUQU5EQVJEX0RFUklWQVRJVkVTXFxuIGZsb2F0IGR4ID0gZEZkeChkZXB0aCk7XFxuIGZsb2F0IGR5ID0gZEZkeShkZXB0aCk7XFxuIGRlcHRoICs9IHNxcnQoZHgqZHggKyBkeSpkeSkgKiBzbG9wZVNjYWxlICsgYmlhcztcXG4gI2Vsc2VcXG4gZGVwdGggKz0gYmlhcztcXG4gI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUZsb2F0KGRlcHRoICogMC41ICsgMC41KTtcXG4jZW5kaWZcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zbS5kZWJ1Z19kZXB0aFxcbnVuaWZvcm0gc2FtcGxlcjJEIGRlcHRoTWFwO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLmRlY29kZV9mbG9hdFxcbnZvaWQgbWFpbigpIHtcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQoZGVwdGhNYXAsIHZfVGV4Y29vcmQpO1xcbiNpZmRlZiBVU0VfVlNNXFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodGV4LnJnYiwgMS4wKTtcXG4jZWxzZVxcbiBmbG9hdCBkZXB0aCA9IGRlY29kZUZsb2F0KHRleCk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoZGVwdGgsIGRlcHRoLCBkZXB0aCwgMS4wKTtcXG4jZW5kaWZcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5zbS5kaXN0YW5jZS52ZXJ0ZXhcXG51bmlmb3JtIG1hdDQgd29ybGRWaWV3UHJvamVjdGlvbiA6IFdPUkxEVklFV1BST0pFQ1RJT047XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5AaW1wb3J0IGNsYXkuY2h1bmsuc2tpbm5pbmdfaGVhZGVyXFxudmFyeWluZyB2ZWMzIHZfV29ybGRQb3NpdGlvbjtcXG52b2lkIG1haW4gKCl7XFxuIHZlYzQgUCA9IHZlYzQocG9zaXRpb24sIDEuMCk7XFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBQID0gc2tpbk1hdHJpeFdTICogUDtcXG4jZW5kaWZcXG4jaWZkZWYgSU5TVEFOQ0lOR1xcbiBAaW1wb3J0IGNsYXkuY2h1bmsuaW5zdGFuY2luZ19tYXRyaXhcXG4gUCA9IGluc3RhbmNlTWF0ICogUDtcXG4jZW5kaWZcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogUDtcXG4gdl9Xb3JsZFBvc2l0aW9uID0gKHdvcmxkICogUCkueHl6O1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnNtLmRpc3RhbmNlLmZyYWdtZW50XFxudW5pZm9ybSB2ZWMzIGxpZ2h0UG9zaXRpb247XFxudW5pZm9ybSBmbG9hdCByYW5nZSA6IDEwMDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbkBpbXBvcnQgY2xheS51dGlsLmVuY29kZV9mbG9hdFxcbnZvaWQgbWFpbigpe1xcbiBmbG9hdCBkaXN0ID0gZGlzdGFuY2UobGlnaHRQb3NpdGlvbiwgdl9Xb3JsZFBvc2l0aW9uKTtcXG4jaWZkZWYgVVNFX1ZTTVxcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGRpc3QsIGRpc3QgKiBkaXN0LCAwLjAsIDAuMCk7XFxuI2Vsc2VcXG4gZGlzdCA9IGRpc3QgLyByYW5nZTtcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlRmxvYXQoZGlzdCk7XFxuI2VuZGlmXFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkucGx1Z2luLnNoYWRvd19tYXBfY29tbW9uXFxuQGltcG9ydCBjbGF5LnV0aWwuZGVjb2RlX2Zsb2F0XFxuZmxvYXQgdGFwU2hhZG93TWFwKHNhbXBsZXIyRCBtYXAsIHZlYzIgdXYsIGZsb2F0IHope1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRChtYXAsIHV2KTtcXG4gcmV0dXJuIHN0ZXAoeiwgZGVjb2RlRmxvYXQodGV4KSAqIDIuMCAtIDEuMCk7XFxufVxcbmZsb2F0IHBjZihzYW1wbGVyMkQgbWFwLCB2ZWMyIHV2LCBmbG9hdCB6LCBmbG9hdCB0ZXh0dXJlU2l6ZSwgdmVjMiBzY2FsZSkge1xcbiBmbG9hdCBzaGFkb3dDb250cmliID0gdGFwU2hhZG93TWFwKG1hcCwgdXYsIHopO1xcbiB2ZWMyIG9mZnNldCA9IHZlYzIoMS4wIC8gdGV4dHVyZVNpemUpICogc2NhbGU7XFxuI2lmZGVmIFBDRl9LRVJORUxfU0laRVxcbiBmb3IgKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgUENGX0tFUk5FTF9TSVpFOyBfaWR4XysrKSB7e1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2ICsgb2Zmc2V0ICogcGNmS2VybmVsW19pZHhfXSwgeik7XFxuIH19XFxuIHJldHVybiBzaGFkb3dDb250cmliIC8gZmxvYXQoUENGX0tFUk5FTF9TSVpFICsgMSk7XFxuI2Vsc2VcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKG9mZnNldC54LCAwLjApLCB6KTtcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKG9mZnNldC54LCBvZmZzZXQueSksIHopO1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2K3ZlYzIoLW9mZnNldC54LCBvZmZzZXQueSksIHopO1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2K3ZlYzIoMC4wLCBvZmZzZXQueSksIHopO1xcbiBzaGFkb3dDb250cmliICs9IHRhcFNoYWRvd01hcChtYXAsIHV2K3ZlYzIoLW9mZnNldC54LCAwLjApLCB6KTtcXG4gc2hhZG93Q29udHJpYiArPSB0YXBTaGFkb3dNYXAobWFwLCB1dit2ZWMyKC1vZmZzZXQueCwgLW9mZnNldC55KSwgeik7XFxuIHNoYWRvd0NvbnRyaWIgKz0gdGFwU2hhZG93TWFwKG1hcCwgdXYrdmVjMihvZmZzZXQueCwgLW9mZnNldC55KSwgeik7XFxuIHNoYWRvd0NvbnRyaWIgKz0gdGFwU2hhZG93TWFwKG1hcCwgdXYrdmVjMigwLjAsIC1vZmZzZXQueSksIHopO1xcbiByZXR1cm4gc2hhZG93Q29udHJpYiAvIDkuMDtcXG4jZW5kaWZcXG59XFxuZmxvYXQgcGNmKHNhbXBsZXIyRCBtYXAsIHZlYzIgdXYsIGZsb2F0IHosIGZsb2F0IHRleHR1cmVTaXplKSB7XFxuIHJldHVybiBwY2YobWFwLCB1diwgeiwgdGV4dHVyZVNpemUsIHZlYzIoMS4wKSk7XFxufVxcbmZsb2F0IGNoZWJ5c2hldlVwcGVyQm91bmQodmVjMiBtb21lbnRzLCBmbG9hdCB6KXtcXG4gZmxvYXQgcCA9IDAuMDtcXG4geiA9IHogKiAwLjUgKyAwLjU7XFxuIGlmICh6IDw9IG1vbWVudHMueCkge1xcbiBwID0gMS4wO1xcbiB9XFxuIGZsb2F0IHZhcmlhbmNlID0gbW9tZW50cy55IC0gbW9tZW50cy54ICogbW9tZW50cy54O1xcbiB2YXJpYW5jZSA9IG1heCh2YXJpYW5jZSwgMC4wMDAwMDAxKTtcXG4gZmxvYXQgbUQgPSBtb21lbnRzLnggLSB6O1xcbiBmbG9hdCBwTWF4ID0gdmFyaWFuY2UgLyAodmFyaWFuY2UgKyBtRCAqIG1EKTtcXG4gcE1heCA9IGNsYW1wKChwTWF4LTAuNCkvKDEuMC0wLjQpLCAwLjAsIDEuMCk7XFxuIHJldHVybiBtYXgocCwgcE1heCk7XFxufVxcbmZsb2F0IGNvbXB1dGVTaGFkb3dDb250cmliKFxcbiBzYW1wbGVyMkQgbWFwLCBtYXQ0IGxpZ2h0VlBNLCB2ZWMzIHBvc2l0aW9uLCBmbG9hdCB0ZXh0dXJlU2l6ZSwgdmVjMiBzY2FsZSwgdmVjMiBvZmZzZXRcXG4pIHtcXG4gdmVjNCBwb3NJbkxpZ2h0U3BhY2UgPSBsaWdodFZQTSAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxuIHBvc0luTGlnaHRTcGFjZS54eXogLz0gcG9zSW5MaWdodFNwYWNlLnc7XFxuIGZsb2F0IHogPSBwb3NJbkxpZ2h0U3BhY2UuejtcXG4gaWYoYWxsKGdyZWF0ZXJUaGFuKHBvc0luTGlnaHRTcGFjZS54eXosIHZlYzMoLTAuOTksIC0wLjk5LCAtMS4wKSkpICYmXFxuIGFsbChsZXNzVGhhbihwb3NJbkxpZ2h0U3BhY2UueHl6LCB2ZWMzKDAuOTksIDAuOTksIDEuMCkpKSl7XFxuIHZlYzIgdXYgPSAocG9zSW5MaWdodFNwYWNlLnh5KzEuMCkgLyAyLjA7XFxuICNpZmRlZiBVU0VfVlNNXFxuIHZlYzIgbW9tZW50cyA9IHRleHR1cmUyRChtYXAsIHV2ICogc2NhbGUgKyBvZmZzZXQpLnh5O1xcbiByZXR1cm4gY2hlYnlzaGV2VXBwZXJCb3VuZChtb21lbnRzLCB6KTtcXG4gI2Vsc2VcXG4gcmV0dXJuIHBjZihtYXAsIHV2ICogc2NhbGUgKyBvZmZzZXQsIHosIHRleHR1cmVTaXplLCBzY2FsZSk7XFxuICNlbmRpZlxcbiB9XFxuIHJldHVybiAxLjA7XFxufVxcbmZsb2F0IGNvbXB1dGVTaGFkb3dDb250cmliKHNhbXBsZXIyRCBtYXAsIG1hdDQgbGlnaHRWUE0sIHZlYzMgcG9zaXRpb24sIGZsb2F0IHRleHR1cmVTaXplKSB7XFxuIHJldHVybiBjb21wdXRlU2hhZG93Q29udHJpYihtYXAsIGxpZ2h0VlBNLCBwb3NpdGlvbiwgdGV4dHVyZVNpemUsIHZlYzIoMS4wKSwgdmVjMigwLjApKTtcXG59XFxuZmxvYXQgY29tcHV0ZVNoYWRvd0NvbnRyaWJPbW5pKHNhbXBsZXJDdWJlIG1hcCwgdmVjMyBkaXJlY3Rpb24sIGZsb2F0IHJhbmdlKVxcbntcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChkaXJlY3Rpb24pO1xcbiB2ZWM0IHNoYWRvd1RleCA9IHRleHR1cmVDdWJlKG1hcCwgZGlyZWN0aW9uKTtcXG4jaWZkZWYgVVNFX1ZTTVxcbiB2ZWMyIG1vbWVudHMgPSBzaGFkb3dUZXgueHk7XFxuIGZsb2F0IHZhcmlhbmNlID0gbW9tZW50cy55IC0gbW9tZW50cy54ICogbW9tZW50cy54O1xcbiBmbG9hdCBtRCA9IG1vbWVudHMueCAtIGRpc3Q7XFxuIGZsb2F0IHAgPSB2YXJpYW5jZSAvICh2YXJpYW5jZSArIG1EICogbUQpO1xcbiBpZihtb21lbnRzLnggKyAwLjAwMSA8IGRpc3Qpe1xcbiByZXR1cm4gY2xhbXAocCwgMC4wLCAxLjApO1xcbiB9ZWxzZXtcXG4gcmV0dXJuIDEuMDtcXG4gfVxcbiNlbHNlXFxuIHJldHVybiBzdGVwKGRpc3QsIChkZWNvZGVGbG9hdChzaGFkb3dUZXgpICsgMC4wMDAyKSAqIHJhbmdlKTtcXG4jZW5kaWZcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5wbHVnaW4uY29tcHV0ZV9zaGFkb3dfbWFwXFxuI2lmIGRlZmluZWQoU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpIHx8IGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKSB8fCBkZWZpbmVkKFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVClcXG4jaWZkZWYgU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlRcXG51bmlmb3JtIHNhbXBsZXIyRCBzcG90TGlnaHRTaGFkb3dNYXBzW1NQT1RfTElHSFRfU0hBRE9XTUFQX0NPVU5UXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIG1hdDQgc3BvdExpZ2h0TWF0cmljZXNbU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlRdOnVuY29uZmlndXJhYmxlO1xcbnVuaWZvcm0gZmxvYXQgc3BvdExpZ2h0U2hhZG93TWFwU2l6ZXNbU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlRdOnVuY29uZmlndXJhYmxlO1xcbiNlbmRpZlxcbiNpZmRlZiBESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlRcXG4jaWYgZGVmaW5lZChTSEFET1dfQ0FTQ0FERSlcXG51bmlmb3JtIHNhbXBsZXIyRCBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwc1sxXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIG1hdDQgZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzW1NIQURPV19DQVNDQURFXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIGZsb2F0IGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBTaXplc1sxXTp1bmNvbmZpZ3VyYWJsZTtcXG51bmlmb3JtIGZsb2F0IHNoYWRvd0Nhc2NhZGVDbGlwc05lYXJbU0hBRE9XX0NBU0NBREVdOnVuY29uZmlndXJhYmxlO1xcbnVuaWZvcm0gZmxvYXQgc2hhZG93Q2FzY2FkZUNsaXBzRmFyW1NIQURPV19DQVNDQURFXTp1bmNvbmZpZ3VyYWJsZTtcXG4jZWxzZVxcbnVuaWZvcm0gc2FtcGxlcjJEIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzW0RJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVF06dW5jb25maWd1cmFibGU7XFxudW5pZm9ybSBtYXQ0IGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlc1tESVJFQ1RJT05BTF9MSUdIVF9TSEFET1dNQVBfQ09VTlRdOnVuY29uZmlndXJhYmxlO1xcbnVuaWZvcm0gZmxvYXQgZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcFNpemVzW0RJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVF06dW5jb25maWd1cmFibGU7XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2lmZGVmIFBPSU5UX0xJR0hUX1NIQURPV01BUF9DT1VOVFxcbnVuaWZvcm0gc2FtcGxlckN1YmUgcG9pbnRMaWdodFNoYWRvd01hcHNbUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UXTp1bmNvbmZpZ3VyYWJsZTtcXG4jZW5kaWZcXG51bmlmb3JtIGJvb2wgc2hhZG93RW5hYmxlZCA6IHRydWU7XFxuI2lmZGVmIFBDRl9LRVJORUxfU0laRVxcbnVuaWZvcm0gdmVjMiBwY2ZLZXJuZWxbUENGX0tFUk5FTF9TSVpFXTtcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkucGx1Z2luLnNoYWRvd19tYXBfY29tbW9uXFxuI2lmIGRlZmluZWQoU1BPVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxudm9pZCBjb21wdXRlU2hhZG93T2ZTcG90TGlnaHRzKHZlYzMgcG9zaXRpb24sIGlub3V0IGZsb2F0IHNoYWRvd0NvbnRyaWJzW1NQT1RfTElHSFRfQ09VTlRdICkge1xcbiBmbG9hdCBzaGFkb3dDb250cmliO1xcbiBmb3IoaW50IF9pZHhfID0gMDsgX2lkeF8gPCBTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYiA9IGNvbXB1dGVTaGFkb3dDb250cmliKFxcbiBzcG90TGlnaHRTaGFkb3dNYXBzW19pZHhfXSwgc3BvdExpZ2h0TWF0cmljZXNbX2lkeF9dLCBwb3NpdGlvbixcXG4gc3BvdExpZ2h0U2hhZG93TWFwU2l6ZXNbX2lkeF9dXFxuICk7XFxuIHNoYWRvd0NvbnRyaWJzW19pZHhfXSA9IHNoYWRvd0NvbnRyaWI7XFxuIH19XFxuIGZvcihpbnQgX2lkeF8gPSBTUE9UX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8gPCBTUE9UX0xJR0hUX0NPVU5UOyBfaWR4XysrKXt7XFxuIHNoYWRvd0NvbnRyaWJzW19pZHhfXSA9IDEuMDtcXG4gfX1cXG59XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UKVxcbiNpZmRlZiBTSEFET1dfQ0FTQ0FERVxcbnZvaWQgY29tcHV0ZVNoYWRvd09mRGlyZWN0aW9uYWxMaWdodHModmVjMyBwb3NpdGlvbiwgaW5vdXQgZmxvYXQgc2hhZG93Q29udHJpYnNbRElSRUNUSU9OQUxfTElHSFRfQ09VTlRdKXtcXG4gZmxvYXQgZGVwdGggPSAoMi4wICogZ2xfRnJhZ0Nvb3JkLnogLSBnbF9EZXB0aFJhbmdlLm5lYXIgLSBnbF9EZXB0aFJhbmdlLmZhcilcXG4gLyAoZ2xfRGVwdGhSYW5nZS5mYXIgLSBnbF9EZXB0aFJhbmdlLm5lYXIpO1xcbiBmbG9hdCBzaGFkb3dDb250cmliO1xcbiBzaGFkb3dDb250cmlic1swXSA9IDEuMDtcXG4gZm9yIChpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IFNIQURPV19DQVNDQURFOyBfaWR4XysrKSB7e1xcbiBpZiAoXFxuIGRlcHRoID49IHNoYWRvd0Nhc2NhZGVDbGlwc05lYXJbX2lkeF9dICYmXFxuIGRlcHRoIDw9IHNoYWRvd0Nhc2NhZGVDbGlwc0ZhcltfaWR4X11cXG4gKSB7XFxuIHNoYWRvd0NvbnRyaWIgPSBjb21wdXRlU2hhZG93Q29udHJpYihcXG4gZGlyZWN0aW9uYWxMaWdodFNoYWRvd01hcHNbMF0sIGRpcmVjdGlvbmFsTGlnaHRNYXRyaWNlc1tfaWR4X10sIHBvc2l0aW9uLFxcbiBkaXJlY3Rpb25hbExpZ2h0U2hhZG93TWFwU2l6ZXNbMF0sXFxuIHZlYzIoMS4wIC8gZmxvYXQoU0hBRE9XX0NBU0NBREUpLCAxLjApLFxcbiB2ZWMyKGZsb2F0KF9pZHhfKSAvIGZsb2F0KFNIQURPV19DQVNDQURFKSwgMC4wKVxcbiApO1xcbiBzaGFkb3dDb250cmlic1swXSA9IHNoYWRvd0NvbnRyaWI7XFxuIH1cXG4gfX1cXG4gZm9yKGludCBfaWR4XyA9IERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8gPCBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVDsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYnNbX2lkeF9dID0gMS4wO1xcbiB9fVxcbn1cXG4jZWxzZVxcbnZvaWQgY29tcHV0ZVNoYWRvd09mRGlyZWN0aW9uYWxMaWdodHModmVjMyBwb3NpdGlvbiwgaW5vdXQgZmxvYXQgc2hhZG93Q29udHJpYnNbRElSRUNUSU9OQUxfTElHSFRfQ09VTlRdKXtcXG4gZmxvYXQgc2hhZG93Q29udHJpYjtcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgRElSRUNUSU9OQUxfTElHSFRfU0hBRE9XTUFQX0NPVU5UOyBfaWR4XysrKSB7e1xcbiBzaGFkb3dDb250cmliID0gY29tcHV0ZVNoYWRvd0NvbnRyaWIoXFxuIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBzW19pZHhfXSwgZGlyZWN0aW9uYWxMaWdodE1hdHJpY2VzW19pZHhfXSwgcG9zaXRpb24sXFxuIGRpcmVjdGlvbmFsTGlnaHRTaGFkb3dNYXBTaXplc1tfaWR4X11cXG4gKTtcXG4gc2hhZG93Q29udHJpYnNbX2lkeF9dID0gc2hhZG93Q29udHJpYjtcXG4gfX1cXG4gZm9yKGludCBfaWR4XyA9IERJUkVDVElPTkFMX0xJR0hUX1NIQURPV01BUF9DT1VOVDsgX2lkeF8gPCBESVJFQ1RJT05BTF9MSUdIVF9DT1VOVDsgX2lkeF8rKykge3tcXG4gc2hhZG93Q29udHJpYnNbX2lkeF9dID0gMS4wO1xcbiB9fVxcbn1cXG4jZW5kaWZcXG4jZW5kaWZcXG4jaWYgZGVmaW5lZChQT0lOVF9MSUdIVF9TSEFET1dNQVBfQ09VTlQpXFxudm9pZCBjb21wdXRlU2hhZG93T2ZQb2ludExpZ2h0cyh2ZWMzIHBvc2l0aW9uLCBpbm91dCBmbG9hdCBzaGFkb3dDb250cmlic1tQT0lOVF9MSUdIVF9DT1VOVF0gKXtcXG4gdmVjMyBsaWdodFBvc2l0aW9uO1xcbiB2ZWMzIGRpcmVjdGlvbjtcXG4gZm9yKGludCBfaWR4XyA9IDA7IF9pZHhfIDwgUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UOyBfaWR4XysrKSB7e1xcbiBsaWdodFBvc2l0aW9uID0gcG9pbnRMaWdodFBvc2l0aW9uW19pZHhfXTtcXG4gZGlyZWN0aW9uID0gcG9zaXRpb24gLSBsaWdodFBvc2l0aW9uO1xcbiBzaGFkb3dDb250cmlic1tfaWR4X10gPSBjb21wdXRlU2hhZG93Q29udHJpYk9tbmkocG9pbnRMaWdodFNoYWRvd01hcHNbX2lkeF9dLCBkaXJlY3Rpb24sIHBvaW50TGlnaHRSYW5nZVtfaWR4X10pO1xcbiB9fVxcbiBmb3IoaW50IF9pZHhfID0gUE9JTlRfTElHSFRfU0hBRE9XTUFQX0NPVU5UOyBfaWR4XyA8IFBPSU5UX0xJR0hUX0NPVU5UOyBfaWR4XysrKSB7e1xcbiBzaGFkb3dDb250cmlic1tfaWR4X10gPSAxLjA7XFxuIH19XFxufVxcbiNlbmRpZlxcbiNlbmRpZlxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL3NoYWRvd21hcC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///140\n");

/***/ }),
/* 141 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"uniform samplerCube environmentMap;\\nvarying vec2 v_Texcoord;\\n#define TEXTURE_SIZE 16\\nmat3 front = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 1.0, 0.0,\\n 0.0, 0.0, 1.0\\n);\\nmat3 back = mat3(\\n -1.0, 0.0, 0.0,\\n 0.0, 1.0, 0.0,\\n 0.0, 0.0, -1.0\\n);\\nmat3 left = mat3(\\n 0.0, 0.0, -1.0,\\n 0.0, 1.0, 0.0,\\n 1.0, 0.0, 0.0\\n);\\nmat3 right = mat3(\\n 0.0, 0.0, 1.0,\\n 0.0, 1.0, 0.0,\\n -1.0, 0.0, 0.0\\n);\\nmat3 up = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 0.0, 1.0,\\n 0.0, -1.0, 0.0\\n);\\nmat3 down = mat3(\\n 1.0, 0.0, 0.0,\\n 0.0, 0.0, -1.0,\\n 0.0, 1.0, 0.0\\n);\\nfloat harmonics(vec3 normal){\\n int index = int(gl_FragCoord.x);\\n float x = normal.x;\\n float y = normal.y;\\n float z = normal.z;\\n if(index==0){\\n return 1.0;\\n }\\n else if(index==1){\\n return x;\\n }\\n else if(index==2){\\n return y;\\n }\\n else if(index==3){\\n return z;\\n }\\n else if(index==4){\\n return x*z;\\n }\\n else if(index==5){\\n return y*z;\\n }\\n else if(index==6){\\n return x*y;\\n }\\n else if(index==7){\\n return 3.0*z*z - 1.0;\\n }\\n else{\\n return x*x - y*y;\\n }\\n}\\nvec3 sampleSide(mat3 rot)\\n{\\n vec3 result = vec3(0.0);\\n float divider = 0.0;\\n for (int i = 0; i < TEXTURE_SIZE * TEXTURE_SIZE; i++) {\\n float x = mod(float(i), float(TEXTURE_SIZE));\\n float y = float(i / TEXTURE_SIZE);\\n vec2 sidecoord = ((vec2(x, y) + vec2(0.5, 0.5)) / vec2(TEXTURE_SIZE)) * 2.0 - 1.0;\\n vec3 normal = normalize(vec3(sidecoord, -1.0));\\n vec3 fetchNormal = rot * normal;\\n vec3 texel = textureCube(environmentMap, fetchNormal).rgb;\\n result += harmonics(fetchNormal) * texel * -normal.z;\\n divider += -normal.z;\\n }\\n return result / divider;\\n}\\nvoid main()\\n{\\n vec3 result = (\\n sampleSide(front) +\\n sampleSide(back) +\\n sampleSide(left) +\\n sampleSide(right) +\\n sampleSide(up) +\\n sampleSide(down)\\n ) / 6.0;\\n gl_FragColor = vec4(result, 1.0);\\n}\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3NoYWRlci9wcm9qZWN0RW52TWFwLmdsc2wuanM/Zjc1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcInVuaWZvcm0gc2FtcGxlckN1YmUgZW52aXJvbm1lbnRNYXA7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuI2RlZmluZSBURVhUVVJFX1NJWkUgMTZcXG5tYXQzIGZyb250ID0gbWF0MyhcXG4gMS4wLCAwLjAsIDAuMCxcXG4gMC4wLCAxLjAsIDAuMCxcXG4gMC4wLCAwLjAsIDEuMFxcbik7XFxubWF0MyBiYWNrID0gbWF0MyhcXG4gLTEuMCwgMC4wLCAwLjAsXFxuIDAuMCwgMS4wLCAwLjAsXFxuIDAuMCwgMC4wLCAtMS4wXFxuKTtcXG5tYXQzIGxlZnQgPSBtYXQzKFxcbiAwLjAsIDAuMCwgLTEuMCxcXG4gMC4wLCAxLjAsIDAuMCxcXG4gMS4wLCAwLjAsIDAuMFxcbik7XFxubWF0MyByaWdodCA9IG1hdDMoXFxuIDAuMCwgMC4wLCAxLjAsXFxuIDAuMCwgMS4wLCAwLjAsXFxuIC0xLjAsIDAuMCwgMC4wXFxuKTtcXG5tYXQzIHVwID0gbWF0MyhcXG4gMS4wLCAwLjAsIDAuMCxcXG4gMC4wLCAwLjAsIDEuMCxcXG4gMC4wLCAtMS4wLCAwLjBcXG4pO1xcbm1hdDMgZG93biA9IG1hdDMoXFxuIDEuMCwgMC4wLCAwLjAsXFxuIDAuMCwgMC4wLCAtMS4wLFxcbiAwLjAsIDEuMCwgMC4wXFxuKTtcXG5mbG9hdCBoYXJtb25pY3ModmVjMyBub3JtYWwpe1xcbiBpbnQgaW5kZXggPSBpbnQoZ2xfRnJhZ0Nvb3JkLngpO1xcbiBmbG9hdCB4ID0gbm9ybWFsLng7XFxuIGZsb2F0IHkgPSBub3JtYWwueTtcXG4gZmxvYXQgeiA9IG5vcm1hbC56O1xcbiBpZihpbmRleD09MCl7XFxuIHJldHVybiAxLjA7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09MSl7XFxuIHJldHVybiB4O1xcbiB9XFxuIGVsc2UgaWYoaW5kZXg9PTIpe1xcbiByZXR1cm4geTtcXG4gfVxcbiBlbHNlIGlmKGluZGV4PT0zKXtcXG4gcmV0dXJuIHo7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09NCl7XFxuIHJldHVybiB4Kno7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09NSl7XFxuIHJldHVybiB5Kno7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09Nil7XFxuIHJldHVybiB4Knk7XFxuIH1cXG4gZWxzZSBpZihpbmRleD09Nyl7XFxuIHJldHVybiAzLjAqeip6IC0gMS4wO1xcbiB9XFxuIGVsc2V7XFxuIHJldHVybiB4KnggLSB5Knk7XFxuIH1cXG59XFxudmVjMyBzYW1wbGVTaWRlKG1hdDMgcm90KVxcbntcXG4gdmVjMyByZXN1bHQgPSB2ZWMzKDAuMCk7XFxuIGZsb2F0IGRpdmlkZXIgPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgVEVYVFVSRV9TSVpFICogVEVYVFVSRV9TSVpFOyBpKyspIHtcXG4gZmxvYXQgeCA9IG1vZChmbG9hdChpKSwgZmxvYXQoVEVYVFVSRV9TSVpFKSk7XFxuIGZsb2F0IHkgPSBmbG9hdChpIC8gVEVYVFVSRV9TSVpFKTtcXG4gdmVjMiBzaWRlY29vcmQgPSAoKHZlYzIoeCwgeSkgKyB2ZWMyKDAuNSwgMC41KSkgLyB2ZWMyKFRFWFRVUkVfU0laRSkpICogMi4wIC0gMS4wO1xcbiB2ZWMzIG5vcm1hbCA9IG5vcm1hbGl6ZSh2ZWMzKHNpZGVjb29yZCwgLTEuMCkpO1xcbiB2ZWMzIGZldGNoTm9ybWFsID0gcm90ICogbm9ybWFsO1xcbiB2ZWMzIHRleGVsID0gdGV4dHVyZUN1YmUoZW52aXJvbm1lbnRNYXAsIGZldGNoTm9ybWFsKS5yZ2I7XFxuIHJlc3VsdCArPSBoYXJtb25pY3MoZmV0Y2hOb3JtYWwpICogdGV4ZWwgKiAtbm9ybWFsLno7XFxuIGRpdmlkZXIgKz0gLW5vcm1hbC56O1xcbiB9XFxuIHJldHVybiByZXN1bHQgLyBkaXZpZGVyO1xcbn1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMyByZXN1bHQgPSAoXFxuIHNhbXBsZVNpZGUoZnJvbnQpICtcXG4gc2FtcGxlU2lkZShiYWNrKSArXFxuIHNhbXBsZVNpZGUobGVmdCkgK1xcbiBzYW1wbGVTaWRlKHJpZ2h0KSArXFxuIHNhbXBsZVNpZGUodXApICtcXG4gc2FtcGxlU2lkZShkb3duKVxcbiApIC8gNi4wO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHJlc3VsdCwgMS4wKTtcXG59XCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC9zaGFkZXIvcHJvamVjdEVudk1hcC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///141\n");

/***/ }),
/* 142 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Task__ = __webpack_require__(100);\n\n\n\n/**\n * @constructor\n * @alias clay.async.TaskGroup\n * @extends clay.async.Task\n */\nvar TaskGroup = function () {\n\n    __WEBPACK_IMPORTED_MODULE_1__Task__[\"a\" /* default */].apply(this, arguments);\n\n    this._tasks = [];\n\n    this._fulfilledNumber = 0;\n\n    this._rejectedNumber = 0;\n};\n\nvar Ctor = function (){};\nCtor.prototype = __WEBPACK_IMPORTED_MODULE_1__Task__[\"a\" /* default */].prototype;\nTaskGroup.prototype = new Ctor();\n\nTaskGroup.prototype.constructor = TaskGroup;\n\n/**\n * Wait for all given tasks successed, task can also be any notifier object which will trigger success and error events. Like {@link clay.Texture2D}, {@link clay.TextureCube}, {@link clay.loader.GLTF}.\n * @param  {Array.<clay.async.Task>} tasks\n * @chainable\n * @example\n *     // Load texture list\n *     var list = ['a.jpg', 'b.jpg', 'c.jpg']\n *     var textures = list.map(function (src) {\n *         var texture = new clay.Texture2D();\n *         texture.load(src);\n *         return texture;\n *     });\n *     var taskGroup = new clay.async.TaskGroup();\n *     taskGroup.all(textures).success(function () {\n *         // Do some thing after all textures loaded\n *     });\n */\nTaskGroup.prototype.all = function (tasks) {\n    var count = 0;\n    var self = this;\n    var data = [];\n    this._tasks = tasks;\n    this._fulfilledNumber = 0;\n    this._rejectedNumber = 0;\n\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(tasks, function (task, idx) {\n        if (!task || !task.once) {\n            return;\n        }\n        count++;\n        task.once('success', function (res) {\n            count--;\n\n            self._fulfilledNumber++;\n            // TODO\n            // Some tasks like texture, loader are not inherited from task\n            // We need to set the states here\n            task._fulfilled = true;\n            task._rejected = false;\n\n            data[idx] = res;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n        task.once('error', function () {\n\n            self._rejectedNumber ++;\n\n            task._fulfilled = false;\n            task._rejected = true;\n\n            self.reject(task);\n        });\n    });\n    if (count === 0) {\n        setTimeout(function () {\n            self.resolve(data);\n        });\n        return this;\n    }\n    return this;\n};\n/**\n * Wait for all given tasks finished, either successed or failed\n * @param  {Array.<clay.async.Task>} tasks\n * @return {clay.async.TaskGroup}\n */\nTaskGroup.prototype.allSettled = function (tasks) {\n    var count = 0;\n    var self = this;\n    var data = [];\n    if (tasks.length === 0) {\n        setTimeout(function () {\n            self.trigger('success', data);\n        });\n        return this;\n    }\n    this._tasks = tasks;\n\n    __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].each(tasks, function (task, idx) {\n        if (!task || !task.once) {\n            return;\n        }\n        count++;\n        task.once('success', function (res) {\n            count--;\n\n            self._fulfilledNumber++;\n\n            task._fulfilled = true;\n            task._rejected = false;\n\n            data[idx] = res;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n        task.once('error', function (err) {\n            count--;\n\n            self._rejectedNumber++;\n\n            task._fulfilled = false;\n            task._rejected = true;\n\n            // TODO\n            data[idx] = null;\n            if (count === 0) {\n                self.resolve(data);\n            }\n        });\n    });\n    return this;\n};\n/**\n * Get successed sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getFulfilledNumber = function (recursive) {\n    if (recursive) {\n        var nFulfilled = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nFulfilled += task.getFulfilledNumber(recursive);\n            } else if(task._fulfilled) {\n                nFulfilled += 1;\n            }\n        }\n        return nFulfilled;\n    } else {\n        return this._fulfilledNumber;\n    }\n};\n\n/**\n * Get failed sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getRejectedNumber = function (recursive) {\n    if (recursive) {\n        var nRejected = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nRejected += task.getRejectedNumber(recursive);\n            } else if(task._rejected) {\n                nRejected += 1;\n            }\n        }\n        return nRejected;\n    } else {\n        return this._rejectedNumber;\n    }\n};\n\n/**\n * Get finished sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getSettledNumber = function (recursive) {\n\n    if (recursive) {\n        var nSettled = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nSettled += task.getSettledNumber(recursive);\n            } else if(task._rejected || task._fulfilled) {\n                nSettled += 1;\n            }\n        }\n        return nSettled;\n    } else {\n        return this._fulfilledNumber + this._rejectedNumber;\n    }\n};\n\n/**\n * Get all sub tasks number, recursive can be true if sub task is also a TaskGroup.\n * @param  {boolean} [recursive]\n * @return {number}\n */\nTaskGroup.prototype.getTaskNumber = function (recursive) {\n    if (recursive) {\n        var nTask = 0;\n        for (var i = 0; i < this._tasks.length; i++) {\n            var task = this._tasks[i];\n            if (task instanceof TaskGroup) {\n                nTask += task.getTaskNumber(recursive);\n            } else {\n                nTask += 1;\n            }\n        }\n        return nTask;\n    } else {\n        return this._tasks.length;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TaskGroup);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9hc3luYy9UYXNrR3JvdXAuanM/ZDk3NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdXRpbCBmcm9tICcuLi9jb3JlL3V0aWwnO1xuaW1wb3J0IFRhc2sgZnJvbSAnLi9UYXNrJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LmFzeW5jLlRhc2tHcm91cFxuICogQGV4dGVuZHMgY2xheS5hc3luYy5UYXNrXG4gKi9cbnZhciBUYXNrR3JvdXAgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICBUYXNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICB0aGlzLl90YXNrcyA9IFtdO1xuXG4gICAgdGhpcy5fZnVsZmlsbGVkTnVtYmVyID0gMDtcblxuICAgIHRoaXMuX3JlamVjdGVkTnVtYmVyID0gMDtcbn07XG5cbnZhciBDdG9yID0gZnVuY3Rpb24gKCl7fTtcbkN0b3IucHJvdG90eXBlID0gVGFzay5wcm90b3R5cGU7XG5UYXNrR3JvdXAucHJvdG90eXBlID0gbmV3IEN0b3IoKTtcblxuVGFza0dyb3VwLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRhc2tHcm91cDtcblxuLyoqXG4gKiBXYWl0IGZvciBhbGwgZ2l2ZW4gdGFza3Mgc3VjY2Vzc2VkLCB0YXNrIGNhbiBhbHNvIGJlIGFueSBub3RpZmllciBvYmplY3Qgd2hpY2ggd2lsbCB0cmlnZ2VyIHN1Y2Nlc3MgYW5kIGVycm9yIGV2ZW50cy4gTGlrZSB7QGxpbmsgY2xheS5UZXh0dXJlMkR9LCB7QGxpbmsgY2xheS5UZXh0dXJlQ3ViZX0sIHtAbGluayBjbGF5LmxvYWRlci5HTFRGfS5cbiAqIEBwYXJhbSAge0FycmF5LjxjbGF5LmFzeW5jLlRhc2s+fSB0YXNrc1xuICogQGNoYWluYWJsZVxuICogQGV4YW1wbGVcbiAqICAgICAvLyBMb2FkIHRleHR1cmUgbGlzdFxuICogICAgIHZhciBsaXN0ID0gWydhLmpwZycsICdiLmpwZycsICdjLmpwZyddXG4gKiAgICAgdmFyIHRleHR1cmVzID0gbGlzdC5tYXAoZnVuY3Rpb24gKHNyYykge1xuICogICAgICAgICB2YXIgdGV4dHVyZSA9IG5ldyBjbGF5LlRleHR1cmUyRCgpO1xuICogICAgICAgICB0ZXh0dXJlLmxvYWQoc3JjKTtcbiAqICAgICAgICAgcmV0dXJuIHRleHR1cmU7XG4gKiAgICAgfSk7XG4gKiAgICAgdmFyIHRhc2tHcm91cCA9IG5ldyBjbGF5LmFzeW5jLlRhc2tHcm91cCgpO1xuICogICAgIHRhc2tHcm91cC5hbGwodGV4dHVyZXMpLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xuICogICAgICAgICAvLyBEbyBzb21lIHRoaW5nIGFmdGVyIGFsbCB0ZXh0dXJlcyBsb2FkZWRcbiAqICAgICB9KTtcbiAqL1xuVGFza0dyb3VwLnByb3RvdHlwZS5hbGwgPSBmdW5jdGlvbiAodGFza3MpIHtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGF0YSA9IFtdO1xuICAgIHRoaXMuX3Rhc2tzID0gdGFza3M7XG4gICAgdGhpcy5fZnVsZmlsbGVkTnVtYmVyID0gMDtcbiAgICB0aGlzLl9yZWplY3RlZE51bWJlciA9IDA7XG5cbiAgICB1dGlsLmVhY2godGFza3MsIGZ1bmN0aW9uICh0YXNrLCBpZHgpIHtcbiAgICAgICAgaWYgKCF0YXNrIHx8ICF0YXNrLm9uY2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb3VudCsrO1xuICAgICAgICB0YXNrLm9uY2UoJ3N1Y2Nlc3MnLCBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICBjb3VudC0tO1xuXG4gICAgICAgICAgICBzZWxmLl9mdWxmaWxsZWROdW1iZXIrKztcbiAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIC8vIFNvbWUgdGFza3MgbGlrZSB0ZXh0dXJlLCBsb2FkZXIgYXJlIG5vdCBpbmhlcml0ZWQgZnJvbSB0YXNrXG4gICAgICAgICAgICAvLyBXZSBuZWVkIHRvIHNldCB0aGUgc3RhdGVzIGhlcmVcbiAgICAgICAgICAgIHRhc2suX2Z1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB0YXNrLl9yZWplY3RlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBkYXRhW2lkeF0gPSByZXM7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0YXNrLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBzZWxmLl9yZWplY3RlZE51bWJlciArKztcblxuICAgICAgICAgICAgdGFzay5fZnVsZmlsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0YXNrLl9yZWplY3RlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIHNlbGYucmVqZWN0KHRhc2spO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnJlc29sdmUoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG59O1xuLyoqXG4gKiBXYWl0IGZvciBhbGwgZ2l2ZW4gdGFza3MgZmluaXNoZWQsIGVpdGhlciBzdWNjZXNzZWQgb3IgZmFpbGVkXG4gKiBAcGFyYW0gIHtBcnJheS48Y2xheS5hc3luYy5UYXNrPn0gdGFza3NcbiAqIEByZXR1cm4ge2NsYXkuYXN5bmMuVGFza0dyb3VwfVxuICovXG5UYXNrR3JvdXAucHJvdG90eXBlLmFsbFNldHRsZWQgPSBmdW5jdGlvbiAodGFza3MpIHtcbiAgICB2YXIgY291bnQgPSAwO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGF0YSA9IFtdO1xuICAgIGlmICh0YXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLnRyaWdnZXIoJ3N1Y2Nlc3MnLCBkYXRhKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLl90YXNrcyA9IHRhc2tzO1xuXG4gICAgdXRpbC5lYWNoKHRhc2tzLCBmdW5jdGlvbiAodGFzaywgaWR4KSB7XG4gICAgICAgIGlmICghdGFzayB8fCAhdGFzay5vbmNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY291bnQrKztcbiAgICAgICAgdGFzay5vbmNlKCdzdWNjZXNzJywgZnVuY3Rpb24gKHJlcykge1xuICAgICAgICAgICAgY291bnQtLTtcblxuICAgICAgICAgICAgc2VsZi5fZnVsZmlsbGVkTnVtYmVyKys7XG5cbiAgICAgICAgICAgIHRhc2suX2Z1bGZpbGxlZCA9IHRydWU7XG4gICAgICAgICAgICB0YXNrLl9yZWplY3RlZCA9IGZhbHNlO1xuXG4gICAgICAgICAgICBkYXRhW2lkeF0gPSByZXM7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICB0YXNrLm9uY2UoJ2Vycm9yJywgZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgY291bnQtLTtcblxuICAgICAgICAgICAgc2VsZi5fcmVqZWN0ZWROdW1iZXIrKztcblxuICAgICAgICAgICAgdGFzay5fZnVsZmlsbGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0YXNrLl9yZWplY3RlZCA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIFRPRE9cbiAgICAgICAgICAgIGRhdGFbaWR4XSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHtcbiAgICAgICAgICAgICAgICBzZWxmLnJlc29sdmUoZGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xufTtcbi8qKlxuICogR2V0IHN1Y2Nlc3NlZCBzdWIgdGFza3MgbnVtYmVyLCByZWN1cnNpdmUgY2FuIGJlIHRydWUgaWYgc3ViIHRhc2sgaXMgYWxzbyBhIFRhc2tHcm91cC5cbiAqIEBwYXJhbSAge2Jvb2xlYW59IFtyZWN1cnNpdmVdXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblRhc2tHcm91cC5wcm90b3R5cGUuZ2V0RnVsZmlsbGVkTnVtYmVyID0gZnVuY3Rpb24gKHJlY3Vyc2l2ZSkge1xuICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgICAgdmFyIG5GdWxmaWxsZWQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3Rhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMuX3Rhc2tzW2ldO1xuICAgICAgICAgICAgaWYgKHRhc2sgaW5zdGFuY2VvZiBUYXNrR3JvdXApIHtcbiAgICAgICAgICAgICAgICBuRnVsZmlsbGVkICs9IHRhc2suZ2V0RnVsZmlsbGVkTnVtYmVyKHJlY3Vyc2l2ZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYodGFzay5fZnVsZmlsbGVkKSB7XG4gICAgICAgICAgICAgICAgbkZ1bGZpbGxlZCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuRnVsZmlsbGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxmaWxsZWROdW1iZXI7XG4gICAgfVxufTtcblxuLyoqXG4gKiBHZXQgZmFpbGVkIHN1YiB0YXNrcyBudW1iZXIsIHJlY3Vyc2l2ZSBjYW4gYmUgdHJ1ZSBpZiBzdWIgdGFzayBpcyBhbHNvIGEgVGFza0dyb3VwLlxuICogQHBhcmFtICB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZV1cbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVGFza0dyb3VwLnByb3RvdHlwZS5nZXRSZWplY3RlZE51bWJlciA9IGZ1bmN0aW9uIChyZWN1cnNpdmUpIHtcbiAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgIHZhciBuUmVqZWN0ZWQgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3Rhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMuX3Rhc2tzW2ldO1xuICAgICAgICAgICAgaWYgKHRhc2sgaW5zdGFuY2VvZiBUYXNrR3JvdXApIHtcbiAgICAgICAgICAgICAgICBuUmVqZWN0ZWQgKz0gdGFzay5nZXRSZWplY3RlZE51bWJlcihyZWN1cnNpdmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHRhc2suX3JlamVjdGVkKSB7XG4gICAgICAgICAgICAgICAgblJlamVjdGVkICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5SZWplY3RlZDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVqZWN0ZWROdW1iZXI7XG4gICAgfVxufTtcblxuLyoqXG4gKiBHZXQgZmluaXNoZWQgc3ViIHRhc2tzIG51bWJlciwgcmVjdXJzaXZlIGNhbiBiZSB0cnVlIGlmIHN1YiB0YXNrIGlzIGFsc28gYSBUYXNrR3JvdXAuXG4gKiBAcGFyYW0gIHtib29sZWFufSBbcmVjdXJzaXZlXVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5UYXNrR3JvdXAucHJvdG90eXBlLmdldFNldHRsZWROdW1iZXIgPSBmdW5jdGlvbiAocmVjdXJzaXZlKSB7XG5cbiAgICBpZiAocmVjdXJzaXZlKSB7XG4gICAgICAgIHZhciBuU2V0dGxlZCA9IDA7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fdGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciB0YXNrID0gdGhpcy5fdGFza3NbaV07XG4gICAgICAgICAgICBpZiAodGFzayBpbnN0YW5jZW9mIFRhc2tHcm91cCkge1xuICAgICAgICAgICAgICAgIG5TZXR0bGVkICs9IHRhc2suZ2V0U2V0dGxlZE51bWJlcihyZWN1cnNpdmUpO1xuICAgICAgICAgICAgfSBlbHNlIGlmKHRhc2suX3JlamVjdGVkIHx8IHRhc2suX2Z1bGZpbGxlZCkge1xuICAgICAgICAgICAgICAgIG5TZXR0bGVkICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5TZXR0bGVkO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxmaWxsZWROdW1iZXIgKyB0aGlzLl9yZWplY3RlZE51bWJlcjtcbiAgICB9XG59O1xuXG4vKipcbiAqIEdldCBhbGwgc3ViIHRhc2tzIG51bWJlciwgcmVjdXJzaXZlIGNhbiBiZSB0cnVlIGlmIHN1YiB0YXNrIGlzIGFsc28gYSBUYXNrR3JvdXAuXG4gKiBAcGFyYW0gIHtib29sZWFufSBbcmVjdXJzaXZlXVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5UYXNrR3JvdXAucHJvdG90eXBlLmdldFRhc2tOdW1iZXIgPSBmdW5jdGlvbiAocmVjdXJzaXZlKSB7XG4gICAgaWYgKHJlY3Vyc2l2ZSkge1xuICAgICAgICB2YXIgblRhc2sgPSAwO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3Rhc2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgdGFzayA9IHRoaXMuX3Rhc2tzW2ldO1xuICAgICAgICAgICAgaWYgKHRhc2sgaW5zdGFuY2VvZiBUYXNrR3JvdXApIHtcbiAgICAgICAgICAgICAgICBuVGFzayArPSB0YXNrLmdldFRhc2tOdW1iZXIocmVjdXJzaXZlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgblRhc2sgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gblRhc2s7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tzLmxlbmd0aDtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBUYXNrR3JvdXA7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvYXN5bmMvVGFza0dyb3VwLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///142\n");

/***/ }),
/* 143 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__createCompositor__ = __webpack_require__(62);\n// DEPRECATED\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__createCompositor__[\"a\" /* default */]);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9jb21wb3NpdG9yL2NyZWF0ZUNvbXBvc2l0b3IuanM/MzJjNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBERVBSRUNBVEVEXG5pbXBvcnQgY3JlYXRlQ29tcG9zaXRvciBmcm9tICcuLi9jcmVhdGVDb21wb3NpdG9yJztcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvbXBvc2l0b3I7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2NvbXBvc2l0b3IvY3JlYXRlQ29tcG9zaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///143\n");

/***/ }),
/* 144 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.coloradjust\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float brightness : 0.0;\\nuniform float contrast : 1.0;\\nuniform float exposure : 0.0;\\nuniform float gamma : 1.0;\\nuniform float saturation : 1.0;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\\n float luminance = dot( color, w );\\n color = mix(vec3(luminance), color, saturation);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.brightness\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float brightness : 0.0;\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = tex.rgb + vec3(brightness);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.contrast\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float contrast : 1.0;\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord);\\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.exposure\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float exposure : 0.0;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = tex.rgb * pow(2.0, exposure);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.gamma\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float gamma : 1.0;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = pow(tex.rgb, vec3(gamma));\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\\n@export clay.compositor.saturation\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float saturation : 1.0;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n vec3 color = tex.rgb;\\n float luminance = dot(color, w);\\n color = mix(vec3(luminance), color, saturation);\\n gl_FragColor = vec4(color, tex.a);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvY29sb3JhZGp1c3QuZ2xzbC5qcz80YWU1Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuY29sb3JhZGp1c3RcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgYnJpZ2h0bmVzcyA6IDAuMDtcXG51bmlmb3JtIGZsb2F0IGNvbnRyYXN0IDogMS4wO1xcbnVuaWZvcm0gZmxvYXQgZXhwb3N1cmUgOiAwLjA7XFxudW5pZm9ybSBmbG9hdCBnYW1tYSA6IDEuMDtcXG51bmlmb3JtIGZsb2F0IHNhdHVyYXRpb24gOiAxLjA7XFxuY29uc3QgdmVjMyB3ID0gdmVjMygwLjIxMjUsIDAuNzE1NCwgMC4wNzIxKTtcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQoIHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gY2xhbXAodGV4LnJnYiArIHZlYzMoYnJpZ2h0bmVzcyksIDAuMCwgMS4wKTtcXG4gY29sb3IgPSBjbGFtcCggKGNvbG9yLXZlYzMoMC41KSkqY29udHJhc3QrdmVjMygwLjUpLCAwLjAsIDEuMCk7XFxuIGNvbG9yID0gY2xhbXAoIGNvbG9yICogcG93KDIuMCwgZXhwb3N1cmUpLCAwLjAsIDEuMCk7XFxuIGNvbG9yID0gY2xhbXAoIHBvdyhjb2xvciwgdmVjMyhnYW1tYSkpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IGx1bWluYW5jZSA9IGRvdCggY29sb3IsIHcgKTtcXG4gY29sb3IgPSBtaXgodmVjMyhsdW1pbmFuY2UpLCBjb2xvciwgc2F0dXJhdGlvbik7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmJyaWdodG5lc3NcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgYnJpZ2h0bmVzcyA6IDAuMDtcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSB0ZXh0dXJlMkQoIHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gdGV4LnJnYiArIHZlYzMoYnJpZ2h0bmVzcyk7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmNvbnRyYXN0XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIGZsb2F0IGNvbnRyYXN0IDogMS4wO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCggdGV4dHVyZSwgdl9UZXhjb29yZCk7XFxuIHZlYzMgY29sb3IgPSAodGV4LnJnYi12ZWMzKDAuNSkpKmNvbnRyYXN0K3ZlYzMoMC41KTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgdGV4LmEpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuZXhwb3N1cmVcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgZXhwb3N1cmUgOiAwLjA7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gdGV4LnJnYiAqIHBvdygyLjAsIGV4cG9zdXJlKTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgdGV4LmEpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuZ2FtbWFcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gZmxvYXQgZ2FtbWEgOiAxLjA7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gcG93KHRleC5yZ2IsIHZlYzMoZ2FtbWEpKTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNChjb2xvciwgdGV4LmEpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3Iuc2F0dXJhdGlvblxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBmbG9hdCBzYXR1cmF0aW9uIDogMS4wO1xcbmNvbnN0IHZlYzMgdyA9IHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSk7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbiB2ZWMzIGNvbG9yID0gdGV4LnJnYjtcXG4gZmxvYXQgbHVtaW5hbmNlID0gZG90KGNvbG9yLCB3KTtcXG4gY29sb3IgPSBtaXgodmVjMyhsdW1pbmFuY2UpLCBjb2xvciwgc2F0dXJhdGlvbik7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoY29sb3IsIHRleC5hKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9jb2xvcmFkanVzdC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///144\n");

/***/ }),
/* 145 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.kernel.gaussian_9\\nfloat gaussianKernel[9];\\ngaussianKernel[0] = 0.07;\\ngaussianKernel[1] = 0.09;\\ngaussianKernel[2] = 0.12;\\ngaussianKernel[3] = 0.14;\\ngaussianKernel[4] = 0.16;\\ngaussianKernel[5] = 0.14;\\ngaussianKernel[6] = 0.12;\\ngaussianKernel[7] = 0.09;\\ngaussianKernel[8] = 0.07;\\n@end\\n@export clay.compositor.kernel.gaussian_13\\nfloat gaussianKernel[13];\\ngaussianKernel[0] = 0.02;\\ngaussianKernel[1] = 0.03;\\ngaussianKernel[2] = 0.06;\\ngaussianKernel[3] = 0.08;\\ngaussianKernel[4] = 0.11;\\ngaussianKernel[5] = 0.13;\\ngaussianKernel[6] = 0.14;\\ngaussianKernel[7] = 0.13;\\ngaussianKernel[8] = 0.11;\\ngaussianKernel[9] = 0.08;\\ngaussianKernel[10] = 0.06;\\ngaussianKernel[11] = 0.03;\\ngaussianKernel[12] = 0.02;\\n@end\\n@export clay.compositor.gaussian_blur\\n#define SHADER_NAME gaussian_blur\\nuniform sampler2D texture;varying vec2 v_Texcoord;\\nuniform float blurSize : 2.0;\\nuniform vec2 textureSize : [512.0, 512.0];\\nuniform float blurDir : 0.0;\\n@import clay.util.rgbm\\n@import clay.util.clamp_sample\\nvoid main (void)\\n{\\n @import clay.compositor.kernel.gaussian_9\\n vec2 off = blurSize / textureSize;\\n off *= vec2(1.0 - blurDir, blurDir);\\n vec4 sum = vec4(0.0);\\n float weightAll = 0.0;\\n for (int i = 0; i < 9; i++) {\\n float w = gaussianKernel[i];\\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\\n sum += texel * w;\\n weightAll += w;\\n }\\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvYmx1ci5nbHNsLmpzPzRjYjUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5rZXJuZWwuZ2F1c3NpYW5fOVxcbmZsb2F0IGdhdXNzaWFuS2VybmVsWzldO1xcbmdhdXNzaWFuS2VybmVsWzBdID0gMC4wNztcXG5nYXVzc2lhbktlcm5lbFsxXSA9IDAuMDk7XFxuZ2F1c3NpYW5LZXJuZWxbMl0gPSAwLjEyO1xcbmdhdXNzaWFuS2VybmVsWzNdID0gMC4xNDtcXG5nYXVzc2lhbktlcm5lbFs0XSA9IDAuMTY7XFxuZ2F1c3NpYW5LZXJuZWxbNV0gPSAwLjE0O1xcbmdhdXNzaWFuS2VybmVsWzZdID0gMC4xMjtcXG5nYXVzc2lhbktlcm5lbFs3XSA9IDAuMDk7XFxuZ2F1c3NpYW5LZXJuZWxbOF0gPSAwLjA3O1xcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5rZXJuZWwuZ2F1c3NpYW5fMTNcXG5mbG9hdCBnYXVzc2lhbktlcm5lbFsxM107XFxuZ2F1c3NpYW5LZXJuZWxbMF0gPSAwLjAyO1xcbmdhdXNzaWFuS2VybmVsWzFdID0gMC4wMztcXG5nYXVzc2lhbktlcm5lbFsyXSA9IDAuMDY7XFxuZ2F1c3NpYW5LZXJuZWxbM10gPSAwLjA4O1xcbmdhdXNzaWFuS2VybmVsWzRdID0gMC4xMTtcXG5nYXVzc2lhbktlcm5lbFs1XSA9IDAuMTM7XFxuZ2F1c3NpYW5LZXJuZWxbNl0gPSAwLjE0O1xcbmdhdXNzaWFuS2VybmVsWzddID0gMC4xMztcXG5nYXVzc2lhbktlcm5lbFs4XSA9IDAuMTE7XFxuZ2F1c3NpYW5LZXJuZWxbOV0gPSAwLjA4O1xcbmdhdXNzaWFuS2VybmVsWzEwXSA9IDAuMDY7XFxuZ2F1c3NpYW5LZXJuZWxbMTFdID0gMC4wMztcXG5nYXVzc2lhbktlcm5lbFsxMl0gPSAwLjAyO1xcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyXFxuI2RlZmluZSBTSEFERVJfTkFNRSBnYXVzc2lhbl9ibHVyXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTt2YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIGZsb2F0IGJsdXJTaXplIDogMi4wO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZSA6IFs1MTIuMCwgNTEyLjBdO1xcbnVuaWZvcm0gZmxvYXQgYmx1ckRpciA6IDAuMDtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxuQGltcG9ydCBjbGF5LnV0aWwuY2xhbXBfc2FtcGxlXFxudm9pZCBtYWluICh2b2lkKVxcbntcXG4gQGltcG9ydCBjbGF5LmNvbXBvc2l0b3Iua2VybmVsLmdhdXNzaWFuXzlcXG4gdmVjMiBvZmYgPSBibHVyU2l6ZSAvIHRleHR1cmVTaXplO1xcbiBvZmYgKj0gdmVjMigxLjAgLSBibHVyRGlyLCBibHVyRGlyKTtcXG4gdmVjNCBzdW0gPSB2ZWM0KDAuMCk7XFxuIGZsb2F0IHdlaWdodEFsbCA9IDAuMDtcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCA5OyBpKyspIHtcXG4gZmxvYXQgdyA9IGdhdXNzaWFuS2VybmVsW2ldO1xcbiB2ZWM0IHRleGVsID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBmbG9hdChpIC0gNCkgKiBvZmYpKTtcXG4gc3VtICs9IHRleGVsICogdztcXG4gd2VpZ2h0QWxsICs9IHc7XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHN1bSAvIG1heCh3ZWlnaHRBbGwsIDAuMDEpKTtcXG59XFxuQGVuZFxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9ibHVyLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///145\n");

/***/ }),
/* 146 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.hdr.log_lum\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\\n float luminance = dot(tex.rgb, w);\\n luminance = log(luminance + 0.001);\\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\\n}\\n@end\\n@export clay.compositor.hdr.lum_adaption\\nvarying vec2 v_Texcoord;\\nuniform sampler2D adaptedLum;\\nuniform sampler2D currentLum;\\nuniform float frameTime : 0.02;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\\n}\\n@end\\n@export clay.compositor.lum\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\\nvoid main()\\n{\\n vec4 tex = texture2D( texture, v_Texcoord );\\n float luminance = dot(tex.rgb, w);\\n gl_FragColor = vec4(vec3(luminance), 1.0);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbHVtLmdsc2wuanM/ZmE2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmhkci5sb2dfbHVtXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG5jb25zdCB2ZWMzIHcgPSB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXggPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpKTtcXG4gZmxvYXQgbHVtaW5hbmNlID0gZG90KHRleC5yZ2IsIHcpO1xcbiBsdW1pbmFuY2UgPSBsb2cobHVtaW5hbmNlICsgMC4wMDEpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIodmVjNCh2ZWMzKGx1bWluYW5jZSksIDEuMCkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuaGRyLmx1bV9hZGFwdGlvblxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGFkYXB0ZWRMdW07XFxudW5pZm9ybSBzYW1wbGVyMkQgY3VycmVudEx1bTtcXG51bmlmb3JtIGZsb2F0IGZyYW1lVGltZSA6IDAuMDI7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCBmQWRhcHRlZEx1bSA9IGRlY29kZUhEUih0ZXh0dXJlMkQoYWRhcHRlZEx1bSwgdmVjMigwLjUsIDAuNSkpKS5yO1xcbiBmbG9hdCBmQ3VycmVudEx1bSA9IGV4cChlbmNvZGVIRFIodGV4dHVyZTJEKGN1cnJlbnRMdW0sIHZlYzIoMC41LCAwLjUpKSkucik7XFxuIGZBZGFwdGVkTHVtICs9IChmQ3VycmVudEx1bSAtIGZBZGFwdGVkTHVtKSAqICgxLjAgLSBwb3coMC45OCwgMzAuMCAqIGZyYW1lVGltZSkpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIodmVjNCh2ZWMzKGZBZGFwdGVkTHVtKSwgMS4wKSk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuY29tcG9zaXRvci5sdW1cXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbmNvbnN0IHZlYzMgdyA9IHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSk7XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gdGV4dHVyZTJEKCB0ZXh0dXJlLCB2X1RleGNvb3JkICk7XFxuIGZsb2F0IGx1bWluYW5jZSA9IGRvdCh0ZXgucmdiLCB3KTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGx1bWluYW5jZSksIDEuMCk7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbHVtLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///146\n");

/***/ }),
/* 147 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.lut\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform sampler2D lookup;\\nvoid main()\\n{\\n vec4 tex = texture2D(texture, v_Texcoord);\\n float blueColor = tex.b * 63.0;\\n vec2 quad1;\\n quad1.y = floor(floor(blueColor) / 8.0);\\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\\n vec2 quad2;\\n quad2.y = floor(ceil(blueColor) / 8.0);\\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\\n vec2 texPos1;\\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\\n vec2 texPos2;\\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\\n vec4 newColor1 = texture2D(lookup, texPos1);\\n vec4 newColor2 = texture2D(lookup, texPos2);\\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\\n gl_FragColor = vec4(newColor.rgb, tex.w);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbHV0Lmdsc2wuanM/YjU5YSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIlxcbkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmx1dFxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBzYW1wbGVyMkQgbG9va3VwO1xcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKTtcXG4gZmxvYXQgYmx1ZUNvbG9yID0gdGV4LmIgKiA2My4wO1xcbiB2ZWMyIHF1YWQxO1xcbiBxdWFkMS55ID0gZmxvb3IoZmxvb3IoYmx1ZUNvbG9yKSAvIDguMCk7XFxuIHF1YWQxLnggPSBmbG9vcihibHVlQ29sb3IpIC0gKHF1YWQxLnkgKiA4LjApO1xcbiB2ZWMyIHF1YWQyO1xcbiBxdWFkMi55ID0gZmxvb3IoY2VpbChibHVlQ29sb3IpIC8gOC4wKTtcXG4gcXVhZDIueCA9IGNlaWwoYmx1ZUNvbG9yKSAtIChxdWFkMi55ICogOC4wKTtcXG4gdmVjMiB0ZXhQb3MxO1xcbiB0ZXhQb3MxLnggPSAocXVhZDEueCAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogdGV4LnIpO1xcbiB0ZXhQb3MxLnkgPSAocXVhZDEueSAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogdGV4LmcpO1xcbiB2ZWMyIHRleFBvczI7XFxuIHRleFBvczIueCA9IChxdWFkMi54ICogMC4xMjUpICsgMC41LzUxMi4wICsgKCgwLjEyNSAtIDEuMC81MTIuMCkgKiB0ZXgucik7XFxuIHRleFBvczIueSA9IChxdWFkMi55ICogMC4xMjUpICsgMC41LzUxMi4wICsgKCgwLjEyNSAtIDEuMC81MTIuMCkgKiB0ZXguZyk7XFxuIHZlYzQgbmV3Q29sb3IxID0gdGV4dHVyZTJEKGxvb2t1cCwgdGV4UG9zMSk7XFxuIHZlYzQgbmV3Q29sb3IyID0gdGV4dHVyZTJEKGxvb2t1cCwgdGV4UG9zMik7XFxuIHZlYzQgbmV3Q29sb3IgPSBtaXgobmV3Q29sb3IxLCBuZXdDb2xvcjIsIGZyYWN0KGJsdWVDb2xvcikpO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KG5ld0NvbG9yLnJnYiwgdGV4LncpO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2x1dC5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///147\n");

/***/ }),
/* 148 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.vignette\\n#define OUTPUT_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\nuniform float darkness: 1;\\nuniform float offset: 1;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\\n gl_FragColor.rgb = texel.rgb;\\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdmlnbmV0dGUuZ2xzbC5qcz8yMjlhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IudmlnbmV0dGVcXG4jZGVmaW5lIE9VVFBVVF9BTFBIQVxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBmbG9hdCBkYXJrbmVzczogMTtcXG51bmlmb3JtIGZsb2F0IG9mZnNldDogMTtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpKTtcXG4gZ2xfRnJhZ0NvbG9yLnJnYiA9IHRleGVsLnJnYjtcXG4gdmVjMiB1diA9ICh2X1RleGNvb3JkIC0gdmVjMigwLjUpKSAqIHZlYzIob2Zmc2V0KTtcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHZlYzQobWl4KHRleGVsLnJnYiwgdmVjMygxLjAgLSBkYXJrbmVzcyksIGRvdCh1diwgdXYpKSwgdGV4ZWwuYSkpO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL3ZpZ25ldHRlLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///148\n");

/***/ }),
/* 149 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.output\\n#define OUTPUT_ALPHA\\nvarying vec2 v_Texcoord;\\nuniform sampler2D texture;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\\n gl_FragColor.rgb = tex.rgb;\\n#ifdef OUTPUT_ALPHA\\n gl_FragColor.a = tex.a;\\n#else\\n gl_FragColor.a = 1.0;\\n#endif\\n gl_FragColor = encodeHDR(gl_FragColor);\\n#ifdef PREMULTIPLY_ALPHA\\n gl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3Ivb3V0cHV0Lmdsc2wuanM/MmIwNCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLm91dHB1dFxcbiNkZWZpbmUgT1VUUFVUX0FMUEhBXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgdGV4ID0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB2X1RleGNvb3JkKSk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSB0ZXgucmdiO1xcbiNpZmRlZiBPVVRQVVRfQUxQSEFcXG4gZ2xfRnJhZ0NvbG9yLmEgPSB0ZXguYTtcXG4jZWxzZVxcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGdsX0ZyYWdDb2xvcik7XFxuI2lmZGVmIFBSRU1VTFRJUExZX0FMUEhBXFxuIGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3Ivb3V0cHV0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE0OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///149\n");

/***/ }),
/* 150 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.bright\\nuniform sampler2D texture;\\nuniform float threshold : 1;\\nuniform float scale : 1.0;\\nuniform vec2 textureSize: [512, 512];\\nvarying vec2 v_Texcoord;\\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\\n@import clay.util.rgbm\\nvec4 median(vec4 a, vec4 b, vec4 c)\\n{\\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\\n}\\nvoid main()\\n{\\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\\n#ifdef ANTI_FLICKER\\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\\n texel = median(median(texel, s1, s2), s3, s4);\\n#endif\\n float lum = dot(texel.rgb , lumWeight);\\n vec4 color;\\n if (lum > threshold && texel.a > 0.0)\\n {\\n color = vec4(texel.rgb * scale, texel.a * scale);\\n }\\n else\\n {\\n color = vec4(0.0);\\n }\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvYnJpZ2h0Lmdsc2wuanM/MjdkZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmJyaWdodFxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSBmbG9hdCB0aHJlc2hvbGQgOiAxO1xcbnVuaWZvcm0gZmxvYXQgc2NhbGUgOiAxLjA7XFxudW5pZm9ybSB2ZWMyIHRleHR1cmVTaXplOiBbNTEyLCA1MTJdO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbmNvbnN0IHZlYzMgbHVtV2VpZ2h0ID0gdmVjMygwLjIxMjUsIDAuNzE1NCwgMC4wNzIxKTtcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudmVjNCBtZWRpYW4odmVjNCBhLCB2ZWM0IGIsIHZlYzQgYylcXG57XFxuIHJldHVybiBhICsgYiArIGMgLSBtaW4obWluKGEsIGIpLCBjKSAtIG1heChtYXgoYSwgYiksIGMpO1xcbn1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCkpO1xcbiNpZmRlZiBBTlRJX0ZMSUNLRVJcXG4gdmVjMyBkID0gMS4wIC8gdGV4dHVyZVNpemUueHl4ICogdmVjMygxLjAsIDEuMCwgMC4wKTtcXG4gdmVjNCBzMSA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCAtIGQueHopKTtcXG4gdmVjNCBzMiA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHopKTtcXG4gdmVjNCBzMyA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCAtIGQuenkpKTtcXG4gdmVjNCBzNCA9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuenkpKTtcXG4gdGV4ZWwgPSBtZWRpYW4obWVkaWFuKHRleGVsLCBzMSwgczIpLCBzMywgczQpO1xcbiNlbmRpZlxcbiBmbG9hdCBsdW0gPSBkb3QodGV4ZWwucmdiICwgbHVtV2VpZ2h0KTtcXG4gdmVjNCBjb2xvcjtcXG4gaWYgKGx1bSA+IHRocmVzaG9sZCAmJiB0ZXhlbC5hID4gMC4wKVxcbiB7XFxuIGNvbG9yID0gdmVjNCh0ZXhlbC5yZ2IgKiBzY2FsZSwgdGV4ZWwuYSAqIHNjYWxlKTtcXG4gfVxcbiBlbHNlXFxuIHtcXG4gY29sb3IgPSB2ZWM0KDAuMCk7XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGNvbG9yKTtcXG59XFxuQGVuZFxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9icmlnaHQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTUwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///150\n");

/***/ }),
/* 151 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.downsample\\nuniform sampler2D texture;\\nuniform vec2 textureSize : [512, 512];\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nfloat brightness(vec3 c)\\n{\\n return max(max(c.r, c.g), c.b);\\n}\\n@import clay.util.clamp_sample\\nvoid main()\\n{\\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\\n#ifdef ANTI_FLICKER\\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\\n float s1w = 1.0 / (brightness(s1) + 1.0);\\n float s2w = 1.0 / (brightness(s2) + 1.0);\\n float s3w = 1.0 / (brightness(s3) + 1.0);\\n float s4w = 1.0 / (brightness(s4) + 1.0);\\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\\n vec4 color = vec4(\\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\\n 1.0\\n );\\n#else\\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\\n color *= 0.25;\\n#endif\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvZG93bnNhbXBsZS5nbHNsLmpzP2ZlZDAiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5kb3duc2FtcGxlXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemUgOiBbNTEyLCA1MTJdO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG5mbG9hdCBicmlnaHRuZXNzKHZlYzMgYylcXG57XFxuIHJldHVybiBtYXgobWF4KGMuciwgYy5nKSwgYy5iKTtcXG59XFxuQGltcG9ydCBjbGF5LnV0aWwuY2xhbXBfc2FtcGxlXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgZCA9IHZlYzQoLTEuMCwgLTEuMCwgMS4wLCAxLjApIC8gdGV4dHVyZVNpemUueHl4eTtcXG4jaWZkZWYgQU5USV9GTElDS0VSXFxuIHZlYzMgczEgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHkpKS5yZ2I7XFxuIHZlYzMgczIgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuenkpKS5yZ2I7XFxuIHZlYzMgczMgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQueHcpKS5yZ2I7XFxuIHZlYzMgczQgPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuencpKS5yZ2I7XFxuIGZsb2F0IHMxdyA9IDEuMCAvIChicmlnaHRuZXNzKHMxKSArIDEuMCk7XFxuIGZsb2F0IHMydyA9IDEuMCAvIChicmlnaHRuZXNzKHMyKSArIDEuMCk7XFxuIGZsb2F0IHMzdyA9IDEuMCAvIChicmlnaHRuZXNzKHMzKSArIDEuMCk7XFxuIGZsb2F0IHM0dyA9IDEuMCAvIChicmlnaHRuZXNzKHM0KSArIDEuMCk7XFxuIGZsb2F0IG9uZURpdmlkZVN1bSA9IDEuMCAvIChzMXcgKyBzMncgKyBzM3cgKyBzNHcpO1xcbiB2ZWM0IGNvbG9yID0gdmVjNChcXG4gKHMxICogczF3ICsgczIgKiBzMncgKyBzMyAqIHMzdyArIHM0ICogczR3KSAqIG9uZURpdmlkZVN1bSxcXG4gMS4wXFxuICk7XFxuI2Vsc2VcXG4gdmVjNCBjb2xvciA9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54eSkpO1xcbiBjb2xvciArPSBkZWNvZGVIRFIoY2xhbXBTYW1wbGUodGV4dHVyZSwgdl9UZXhjb29yZCArIGQuenkpKTtcXG4gY29sb3IgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh3KSk7XFxuIGNvbG9yICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC56dykpO1xcbiBjb2xvciAqPSAwLjI1O1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoY29sb3IpO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9jb21wb3NpdG9yL2Rvd25zYW1wbGUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTUxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///151\n");

/***/ }),
/* 152 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"\\n@export clay.compositor.upsample\\n#define HIGH_QUALITY\\nuniform sampler2D texture;\\nuniform vec2 textureSize : [512, 512];\\nuniform float sampleScale: 0.5;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\n@import clay.util.clamp_sample\\nvoid main()\\n{\\n#ifdef HIGH_QUALITY\\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\\n vec4 s;\\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n gl_FragColor = encodeHDR(s / 16.0);\\n#else\\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\\n vec4 s;\\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\\n gl_FragColor = encodeHDR(s / 4.0);\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdXBzYW1wbGUuZ2xzbC5qcz8yNTk5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiXFxuQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IudXBzYW1wbGVcXG4jZGVmaW5lIEhJR0hfUVVBTElUWVxcbnVuaWZvcm0gc2FtcGxlcjJEIHRleHR1cmU7XFxudW5pZm9ybSB2ZWMyIHRleHR1cmVTaXplIDogWzUxMiwgNTEyXTtcXG51bmlmb3JtIGZsb2F0IHNhbXBsZVNjYWxlOiAwLjU7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbkBpbXBvcnQgY2xheS51dGlsLmNsYW1wX3NhbXBsZVxcbnZvaWQgbWFpbigpXFxue1xcbiNpZmRlZiBISUdIX1FVQUxJVFlcXG4gdmVjNCBkID0gdmVjNCgxLjAsIDEuMCwgLTEuMCwgMC4wKSAvIHRleHR1cmVTaXplLnh5eHkgKiBzYW1wbGVTY2FsZTtcXG4gdmVjNCBzO1xcbiBzID0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgLSBkLnh5KSk7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgLSBkLnd5KSkgKiAyLjA7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgLSBkLnp5KSk7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp3KSkgKiAyLjA7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKSkgKiA0LjA7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh3KSkgKiAyLjA7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnp5KSk7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnd5KSkgKiAyLjA7XFxuIHMgKz0gZGVjb2RlSERSKGNsYW1wU2FtcGxlKHRleHR1cmUsIHZfVGV4Y29vcmQgKyBkLnh5KSk7XFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihzIC8gMTYuMCk7XFxuI2Vsc2VcXG4gdmVjNCBkID0gdmVjNCgtMS4wLCAtMS4wLCArMS4wLCArMS4wKSAvIHRleHR1cmVTaXplLnh5eHk7XFxuIHZlYzQgcztcXG4gcyA9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54eSkpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC56eSkpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC54dykpO1xcbiBzICs9IGRlY29kZUhEUihjbGFtcFNhbXBsZSh0ZXh0dXJlLCB2X1RleGNvb3JkICsgZC56dykpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIocyAvIDQuMCk7XFxuI2VuZGlmXFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvdXBzYW1wbGUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///152\n");

/***/ }),
/* 153 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.hdr.composite\\n#define TONEMAPPING\\nuniform sampler2D texture;\\n#ifdef BLOOM_ENABLED\\nuniform sampler2D bloom;\\n#endif\\n#ifdef LENSFLARE_ENABLED\\nuniform sampler2D lensflare;\\nuniform sampler2D lensdirt;\\n#endif\\n#ifdef LUM_ENABLED\\nuniform sampler2D lum;\\n#endif\\n#ifdef LUT_ENABLED\\nuniform sampler2D lut;\\n#endif\\n#ifdef COLOR_CORRECTION\\nuniform float brightness : 0.0;\\nuniform float contrast : 1.0;\\nuniform float saturation : 1.0;\\n#endif\\n#ifdef VIGNETTE\\nuniform float vignetteDarkness: 1.0;\\nuniform float vignetteOffset: 1.0;\\n#endif\\nuniform float exposure : 1.0;\\nuniform float bloomIntensity : 0.25;\\nuniform float lensflareIntensity : 1;\\nvarying vec2 v_Texcoord;\\n@import clay.util.srgb\\nvec3 ACESToneMapping(vec3 color)\\n{\\n const float A = 2.51;\\n const float B = 0.03;\\n const float C = 2.43;\\n const float D = 0.59;\\n const float E = 0.14;\\n return (color * (A * color + B)) / (color * (C * color + D) + E);\\n}\\nfloat eyeAdaption(float fLum)\\n{\\n return mix(0.2, fLum, 0.5);\\n}\\n#ifdef LUT_ENABLED\\nvec3 lutTransform(vec3 color) {\\n float blueColor = color.b * 63.0;\\n vec2 quad1;\\n quad1.y = floor(floor(blueColor) / 8.0);\\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\\n vec2 quad2;\\n quad2.y = floor(ceil(blueColor) / 8.0);\\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\\n vec2 texPos1;\\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\\n vec2 texPos2;\\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\\n vec4 newColor1 = texture2D(lut, texPos1);\\n vec4 newColor2 = texture2D(lut, texPos2);\\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\\n return newColor.rgb;\\n}\\n#endif\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 texel = vec4(0.0);\\n vec4 originalTexel = vec4(0.0);\\n#ifdef TEXTURE_ENABLED\\n texel = decodeHDR(texture2D(texture, v_Texcoord));\\n originalTexel = texel;\\n#endif\\n#ifdef BLOOM_ENABLED\\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\\n texel.rgb += bloomTexel.rgb * bloomIntensity;\\n texel.a += bloomTexel.a * bloomIntensity;\\n#endif\\n#ifdef LENSFLARE_ENABLED\\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\\n#endif\\n texel.a = min(texel.a, 1.0);\\n#ifdef LUM_ENABLED\\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\\n float exposureBias = adaptedLumDest * exposure;\\n#else\\n float exposureBias = exposure;\\n#endif\\n#ifdef TONEMAPPING\\n texel.rgb *= exposureBias;\\n texel.rgb = ACESToneMapping(texel.rgb);\\n#endif\\n texel = linearTosRGB(texel);\\n#ifdef LUT_ENABLED\\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\\n#endif\\n#ifdef COLOR_CORRECTION\\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\\n#endif\\n#ifdef VIGNETTE\\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\\n#endif\\n gl_FragColor = encodeHDR(texel);\\n#ifdef DEBUG\\n #if DEBUG == 1\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\\n #elif DEBUG == 2\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\\n #elif DEBUG == 3\\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\\n #endif\\n#endif\\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\\n }\\n#ifdef PREMULTIPLY_ALPHA\\n gl_FragColor.rgb *= gl_FragColor.a;\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvaGRyLmdsc2wuanM/MmJmYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmhkci5jb21wb3NpdGVcXG4jZGVmaW5lIFRPTkVNQVBQSU5HXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG4jaWZkZWYgQkxPT01fRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGJsb29tO1xcbiNlbmRpZlxcbiNpZmRlZiBMRU5TRkxBUkVfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGxlbnNmbGFyZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBsZW5zZGlydDtcXG4jZW5kaWZcXG4jaWZkZWYgTFVNX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBsdW07XFxuI2VuZGlmXFxuI2lmZGVmIExVVF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbHV0O1xcbiNlbmRpZlxcbiNpZmRlZiBDT0xPUl9DT1JSRUNUSU9OXFxudW5pZm9ybSBmbG9hdCBicmlnaHRuZXNzIDogMC4wO1xcbnVuaWZvcm0gZmxvYXQgY29udHJhc3QgOiAxLjA7XFxudW5pZm9ybSBmbG9hdCBzYXR1cmF0aW9uIDogMS4wO1xcbiNlbmRpZlxcbiNpZmRlZiBWSUdORVRURVxcbnVuaWZvcm0gZmxvYXQgdmlnbmV0dGVEYXJrbmVzczogMS4wO1xcbnVuaWZvcm0gZmxvYXQgdmlnbmV0dGVPZmZzZXQ6IDEuMDtcXG4jZW5kaWZcXG51bmlmb3JtIGZsb2F0IGV4cG9zdXJlIDogMS4wO1xcbnVuaWZvcm0gZmxvYXQgYmxvb21JbnRlbnNpdHkgOiAwLjI1O1xcbnVuaWZvcm0gZmxvYXQgbGVuc2ZsYXJlSW50ZW5zaXR5IDogMTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5AaW1wb3J0IGNsYXkudXRpbC5zcmdiXFxudmVjMyBBQ0VTVG9uZU1hcHBpbmcodmVjMyBjb2xvcilcXG57XFxuIGNvbnN0IGZsb2F0IEEgPSAyLjUxO1xcbiBjb25zdCBmbG9hdCBCID0gMC4wMztcXG4gY29uc3QgZmxvYXQgQyA9IDIuNDM7XFxuIGNvbnN0IGZsb2F0IEQgPSAwLjU5O1xcbiBjb25zdCBmbG9hdCBFID0gMC4xNDtcXG4gcmV0dXJuIChjb2xvciAqIChBICogY29sb3IgKyBCKSkgLyAoY29sb3IgKiAoQyAqIGNvbG9yICsgRCkgKyBFKTtcXG59XFxuZmxvYXQgZXllQWRhcHRpb24oZmxvYXQgZkx1bSlcXG57XFxuIHJldHVybiBtaXgoMC4yLCBmTHVtLCAwLjUpO1xcbn1cXG4jaWZkZWYgTFVUX0VOQUJMRURcXG52ZWMzIGx1dFRyYW5zZm9ybSh2ZWMzIGNvbG9yKSB7XFxuIGZsb2F0IGJsdWVDb2xvciA9IGNvbG9yLmIgKiA2My4wO1xcbiB2ZWMyIHF1YWQxO1xcbiBxdWFkMS55ID0gZmxvb3IoZmxvb3IoYmx1ZUNvbG9yKSAvIDguMCk7XFxuIHF1YWQxLnggPSBmbG9vcihibHVlQ29sb3IpIC0gKHF1YWQxLnkgKiA4LjApO1xcbiB2ZWMyIHF1YWQyO1xcbiBxdWFkMi55ID0gZmxvb3IoY2VpbChibHVlQ29sb3IpIC8gOC4wKTtcXG4gcXVhZDIueCA9IGNlaWwoYmx1ZUNvbG9yKSAtIChxdWFkMi55ICogOC4wKTtcXG4gdmVjMiB0ZXhQb3MxO1xcbiB0ZXhQb3MxLnggPSAocXVhZDEueCAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogY29sb3Iucik7XFxuIHRleFBvczEueSA9IChxdWFkMS55ICogMC4xMjUpICsgMC41LzUxMi4wICsgKCgwLjEyNSAtIDEuMC81MTIuMCkgKiBjb2xvci5nKTtcXG4gdmVjMiB0ZXhQb3MyO1xcbiB0ZXhQb3MyLnggPSAocXVhZDIueCAqIDAuMTI1KSArIDAuNS81MTIuMCArICgoMC4xMjUgLSAxLjAvNTEyLjApICogY29sb3Iucik7XFxuIHRleFBvczIueSA9IChxdWFkMi55ICogMC4xMjUpICsgMC41LzUxMi4wICsgKCgwLjEyNSAtIDEuMC81MTIuMCkgKiBjb2xvci5nKTtcXG4gdmVjNCBuZXdDb2xvcjEgPSB0ZXh0dXJlMkQobHV0LCB0ZXhQb3MxKTtcXG4gdmVjNCBuZXdDb2xvcjIgPSB0ZXh0dXJlMkQobHV0LCB0ZXhQb3MyKTtcXG4gdmVjNCBuZXdDb2xvciA9IG1peChuZXdDb2xvcjEsIG5ld0NvbG9yMiwgZnJhY3QoYmx1ZUNvbG9yKSk7XFxuIHJldHVybiBuZXdDb2xvci5yZ2I7XFxufVxcbiNlbmRpZlxcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52b2lkIG1haW4oKVxcbntcXG4gdmVjNCB0ZXhlbCA9IHZlYzQoMC4wKTtcXG4gdmVjNCBvcmlnaW5hbFRleGVsID0gdmVjNCgwLjApO1xcbiNpZmRlZiBURVhUVVJFX0VOQUJMRURcXG4gdGV4ZWwgPSBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpKTtcXG4gb3JpZ2luYWxUZXhlbCA9IHRleGVsO1xcbiNlbmRpZlxcbiNpZmRlZiBCTE9PTV9FTkFCTEVEXFxuIHZlYzQgYmxvb21UZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlMkQoYmxvb20sIHZfVGV4Y29vcmQpKTtcXG4gdGV4ZWwucmdiICs9IGJsb29tVGV4ZWwucmdiICogYmxvb21JbnRlbnNpdHk7XFxuIHRleGVsLmEgKz0gYmxvb21UZXhlbC5hICogYmxvb21JbnRlbnNpdHk7XFxuI2VuZGlmXFxuI2lmZGVmIExFTlNGTEFSRV9FTkFCTEVEXFxuIHRleGVsICs9IGRlY29kZUhEUih0ZXh0dXJlMkQobGVuc2ZsYXJlLCB2X1RleGNvb3JkKSkgKiB0ZXh0dXJlMkQobGVuc2RpcnQsIHZfVGV4Y29vcmQpICogbGVuc2ZsYXJlSW50ZW5zaXR5O1xcbiNlbmRpZlxcbiB0ZXhlbC5hID0gbWluKHRleGVsLmEsIDEuMCk7XFxuI2lmZGVmIExVTV9FTkFCTEVEXFxuIGZsb2F0IGZMdW0gPSB0ZXh0dXJlMkQobHVtLCB2ZWMyKDAuNSwgMC41KSkucjtcXG4gZmxvYXQgYWRhcHRlZEx1bURlc3QgPSAzLjAgLyAobWF4KDAuMSwgMS4wICsgMTAuMCpleWVBZGFwdGlvbihmTHVtKSkpO1xcbiBmbG9hdCBleHBvc3VyZUJpYXMgPSBhZGFwdGVkTHVtRGVzdCAqIGV4cG9zdXJlO1xcbiNlbHNlXFxuIGZsb2F0IGV4cG9zdXJlQmlhcyA9IGV4cG9zdXJlO1xcbiNlbmRpZlxcbiNpZmRlZiBUT05FTUFQUElOR1xcbiB0ZXhlbC5yZ2IgKj0gZXhwb3N1cmVCaWFzO1xcbiB0ZXhlbC5yZ2IgPSBBQ0VTVG9uZU1hcHBpbmcodGV4ZWwucmdiKTtcXG4jZW5kaWZcXG4gdGV4ZWwgPSBsaW5lYXJUb3NSR0IodGV4ZWwpO1xcbiNpZmRlZiBMVVRfRU5BQkxFRFxcbiB0ZXhlbC5yZ2IgPSBsdXRUcmFuc2Zvcm0oY2xhbXAodGV4ZWwucmdiLHZlYzMoMC4wKSx2ZWMzKDEuMCkpKTtcXG4jZW5kaWZcXG4jaWZkZWYgQ09MT1JfQ09SUkVDVElPTlxcbiB0ZXhlbC5yZ2IgPSBjbGFtcCh0ZXhlbC5yZ2IgKyB2ZWMzKGJyaWdodG5lc3MpLCAwLjAsIDEuMCk7XFxuIHRleGVsLnJnYiA9IGNsYW1wKCh0ZXhlbC5yZ2IgLSB2ZWMzKDAuNSkpKmNvbnRyYXN0K3ZlYzMoMC41KSwgMC4wLCAxLjApO1xcbiBmbG9hdCBsdW0gPSBkb3QodGV4ZWwucmdiLCB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpKTtcXG4gdGV4ZWwucmdiID0gbWl4KHZlYzMobHVtKSwgdGV4ZWwucmdiLCBzYXR1cmF0aW9uKTtcXG4jZW5kaWZcXG4jaWZkZWYgVklHTkVUVEVcXG4gdmVjMiB1diA9ICh2X1RleGNvb3JkIC0gdmVjMigwLjUpKSAqIHZlYzIodmlnbmV0dGVPZmZzZXQpO1xcbiB0ZXhlbC5yZ2IgPSBtaXgodGV4ZWwucmdiLCB2ZWMzKDEuMCAtIHZpZ25ldHRlRGFya25lc3MpLCBkb3QodXYsIHV2KSk7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUih0ZXhlbCk7XFxuI2lmZGVmIERFQlVHXFxuICNpZiBERUJVRyA9PSAxXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpKSk7XFxuICNlbGlmIERFQlVHID09IDJcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKGRlY29kZUhEUih0ZXh0dXJlMkQoYmxvb20sIHZfVGV4Y29vcmQpKSAqIGJsb29tSW50ZW5zaXR5KTtcXG4gI2VsaWYgREVCVUcgPT0gM1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoZGVjb2RlSERSKHRleHR1cmUyRChsZW5zZmxhcmUsIHZfVGV4Y29vcmQpICogbGVuc2ZsYXJlSW50ZW5zaXR5KSk7XFxuICNlbmRpZlxcbiNlbmRpZlxcbiBpZiAob3JpZ2luYWxUZXhlbC5hIDw9IDAuMDEgJiYgZ2xfRnJhZ0NvbG9yLmEgPiAxZS01KSB7XFxuIGdsX0ZyYWdDb2xvci5hID0gZG90KGdsX0ZyYWdDb2xvci5yZ2IsIHZlYzMoMC4yMTI1LCAwLjcxNTQsIDAuMDcyMSkpO1xcbiB9XFxuI2lmZGVmIFBSRU1VTFRJUExZX0FMUEhBXFxuIGdsX0ZyYWdDb2xvci5yZ2IgKj0gZ2xfRnJhZ0NvbG9yLmE7XFxuI2VuZGlmXFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvaGRyLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE1M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///153\n");

/***/ }),
/* 154 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.lensflare\\n#define SAMPLE_NUMBER 8\\nuniform sampler2D texture;\\nuniform sampler2D lenscolor;\\nuniform vec2 textureSize : [512, 512];\\nuniform float dispersal : 0.3;\\nuniform float haloWidth : 0.4;\\nuniform float distortion : 1.0;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvec4 textureDistorted(\\n in vec2 texcoord,\\n in vec2 direction,\\n in vec3 distortion\\n) {\\n return vec4(\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\\n 1.0\\n );\\n}\\nvoid main()\\n{\\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\\n vec2 haloVec = normalize(ghostVec) * haloWidth;\\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\\n vec4 result = vec4(0.0);\\n for (int i = 0; i < SAMPLE_NUMBER; i++)\\n {\\n vec2 offset = fract(texcoord + ghostVec * float(i));\\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\\n weight = pow(1.0 - weight, 10.0);\\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\\n }\\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\\n weight = pow(1.0 - weight, 10.0);\\n vec2 offset = fract(texcoord + haloVec);\\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\\n gl_FragColor = result;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbGVuc2ZsYXJlLmdsc2wuanM/MTU0YyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5jb21wb3NpdG9yLmxlbnNmbGFyZVxcbiNkZWZpbmUgU0FNUExFX05VTUJFUiA4XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBsZW5zY29sb3I7XFxudW5pZm9ybSB2ZWMyIHRleHR1cmVTaXplIDogWzUxMiwgNTEyXTtcXG51bmlmb3JtIGZsb2F0IGRpc3BlcnNhbCA6IDAuMztcXG51bmlmb3JtIGZsb2F0IGhhbG9XaWR0aCA6IDAuNDtcXG51bmlmb3JtIGZsb2F0IGRpc3RvcnRpb24gOiAxLjA7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZlYzQgdGV4dHVyZURpc3RvcnRlZChcXG4gaW4gdmVjMiB0ZXhjb29yZCxcXG4gaW4gdmVjMiBkaXJlY3Rpb24sXFxuIGluIHZlYzMgZGlzdG9ydGlvblxcbikge1xcbiByZXR1cm4gdmVjNChcXG4gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlLCB0ZXhjb29yZCArIGRpcmVjdGlvbiAqIGRpc3RvcnRpb24ucikpLnIsXFxuIGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgdGV4Y29vcmQgKyBkaXJlY3Rpb24gKiBkaXN0b3J0aW9uLmcpKS5nLFxcbiBkZWNvZGVIRFIodGV4dHVyZTJEKHRleHR1cmUsIHRleGNvb3JkICsgZGlyZWN0aW9uICogZGlzdG9ydGlvbi5iKSkuYixcXG4gMS4wXFxuICk7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIHRleGNvb3JkID0gLXZfVGV4Y29vcmQgKyB2ZWMyKDEuMCk7IHZlYzIgdGV4dHVyZU9mZnNldCA9IDEuMCAvIHRleHR1cmVTaXplO1xcbiB2ZWMyIGdob3N0VmVjID0gKHZlYzIoMC41KSAtIHRleGNvb3JkKSAqIGRpc3BlcnNhbDtcXG4gdmVjMiBoYWxvVmVjID0gbm9ybWFsaXplKGdob3N0VmVjKSAqIGhhbG9XaWR0aDtcXG4gdmVjMyBkaXN0b3J0aW9uID0gdmVjMygtdGV4dHVyZU9mZnNldC54ICogZGlzdG9ydGlvbiwgMC4wLCB0ZXh0dXJlT2Zmc2V0LnggKiBkaXN0b3J0aW9uKTtcXG4gdmVjNCByZXN1bHQgPSB2ZWM0KDAuMCk7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgU0FNUExFX05VTUJFUjsgaSsrKVxcbiB7XFxuIHZlYzIgb2Zmc2V0ID0gZnJhY3QodGV4Y29vcmQgKyBnaG9zdFZlYyAqIGZsb2F0KGkpKTtcXG4gZmxvYXQgd2VpZ2h0ID0gbGVuZ3RoKHZlYzIoMC41KSAtIG9mZnNldCkgLyBsZW5ndGgodmVjMigwLjUpKTtcXG4gd2VpZ2h0ID0gcG93KDEuMCAtIHdlaWdodCwgMTAuMCk7XFxuIHJlc3VsdCArPSB0ZXh0dXJlRGlzdG9ydGVkKG9mZnNldCwgbm9ybWFsaXplKGdob3N0VmVjKSwgZGlzdG9ydGlvbikgKiB3ZWlnaHQ7XFxuIH1cXG4gcmVzdWx0ICo9IHRleHR1cmUyRChsZW5zY29sb3IsIHZlYzIobGVuZ3RoKHZlYzIoMC41KSAtIHRleGNvb3JkKSkgLyBsZW5ndGgodmVjMigwLjUpKSk7XFxuIGZsb2F0IHdlaWdodCA9IGxlbmd0aCh2ZWMyKDAuNSkgLSBmcmFjdCh0ZXhjb29yZCArIGhhbG9WZWMpKSAvIGxlbmd0aCh2ZWMyKDAuNSkpO1xcbiB3ZWlnaHQgPSBwb3coMS4wIC0gd2VpZ2h0LCAxMC4wKTtcXG4gdmVjMiBvZmZzZXQgPSBmcmFjdCh0ZXhjb29yZCArIGhhbG9WZWMpO1xcbiByZXN1bHQgKz0gdGV4dHVyZURpc3RvcnRlZChvZmZzZXQsIG5vcm1hbGl6ZShnaG9zdFZlYyksIGRpc3RvcnRpb24pICogd2VpZ2h0O1xcbiBnbF9GcmFnQ29sb3IgPSByZXN1bHQ7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvbGVuc2ZsYXJlLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE1NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///154\n");

/***/ }),
/* 155 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.blend\\n#define SHADER_NAME blend\\n#ifdef TEXTURE1_ENABLED\\nuniform sampler2D texture1;\\nuniform float weight1 : 1.0;\\n#endif\\n#ifdef TEXTURE2_ENABLED\\nuniform sampler2D texture2;\\nuniform float weight2 : 1.0;\\n#endif\\n#ifdef TEXTURE3_ENABLED\\nuniform sampler2D texture3;\\nuniform float weight3 : 1.0;\\n#endif\\n#ifdef TEXTURE4_ENABLED\\nuniform sampler2D texture4;\\nuniform float weight4 : 1.0;\\n#endif\\n#ifdef TEXTURE5_ENABLED\\nuniform sampler2D texture5;\\nuniform float weight5 : 1.0;\\n#endif\\n#ifdef TEXTURE6_ENABLED\\nuniform sampler2D texture6;\\nuniform float weight6 : 1.0;\\n#endif\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 tex = vec4(0.0);\\n#ifdef TEXTURE1_ENABLED\\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\\n#endif\\n#ifdef TEXTURE2_ENABLED\\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\\n#endif\\n#ifdef TEXTURE3_ENABLED\\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\\n#endif\\n#ifdef TEXTURE4_ENABLED\\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\\n#endif\\n#ifdef TEXTURE5_ENABLED\\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\\n#endif\\n#ifdef TEXTURE6_ENABLED\\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\\n#endif\\n gl_FragColor = encodeHDR(tex);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvYmxlbmQuZ2xzbC5qcz84ZTM3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmNvbXBvc2l0b3IuYmxlbmRcXG4jZGVmaW5lIFNIQURFUl9OQU1FIGJsZW5kXFxuI2lmZGVmIFRFWFRVUkUxX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlMTtcXG51bmlmb3JtIGZsb2F0IHdlaWdodDEgOiAxLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkUyX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlMjtcXG51bmlmb3JtIGZsb2F0IHdlaWdodDIgOiAxLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkUzX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlMztcXG51bmlmb3JtIGZsb2F0IHdlaWdodDMgOiAxLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU0X0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlNDtcXG51bmlmb3JtIGZsb2F0IHdlaWdodDQgOiAxLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU1X0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlNTtcXG51bmlmb3JtIGZsb2F0IHdlaWdodDUgOiAxLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFRFWFRVUkU2X0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlNjtcXG51bmlmb3JtIGZsb2F0IHdlaWdodDYgOiAxLjA7XFxuI2VuZGlmXFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IHRleCA9IHZlYzQoMC4wKTtcXG4jaWZkZWYgVEVYVFVSRTFfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlMSwgdl9UZXhjb29yZCkpICogd2VpZ2h0MTtcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRTJfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlMiwgdl9UZXhjb29yZCkpICogd2VpZ2h0MjtcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRTNfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlMywgdl9UZXhjb29yZCkpICogd2VpZ2h0MztcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRTRfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlNCwgdl9UZXhjb29yZCkpICogd2VpZ2h0NDtcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRTVfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlNSwgdl9UZXhjb29yZCkpICogd2VpZ2h0NTtcXG4jZW5kaWZcXG4jaWZkZWYgVEVYVFVSRTZfRU5BQkxFRFxcbiB0ZXggKz0gZGVjb2RlSERSKHRleHR1cmUyRCh0ZXh0dXJlNiwgdl9UZXhjb29yZCkpICogd2VpZ2h0NjtcXG4jZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gZW5jb2RlSERSKHRleCk7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvYmxlbmQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTU1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///155\n");

/***/ }),
/* 156 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.compositor.fxaa\\nuniform sampler2D texture;\\nuniform vec4 viewport : VIEWPORT;\\nvarying vec2 v_Texcoord;\\n#define FXAA_REDUCE_MIN (1.0/128.0)\\n#define FXAA_REDUCE_MUL (1.0/8.0)\\n#define FXAA_SPAN_MAX 8.0\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec2 resolution = 1.0 / viewport.zw;\\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\\n vec3 rgbM = rgbaM.xyz;\\n float opacity = rgbaM.w;\\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\\n float lumaNW = dot( rgbNW, luma );\\n float lumaNE = dot( rgbNE, luma );\\n float lumaSW = dot( rgbSW, luma );\\n float lumaSE = dot( rgbSE, luma );\\n float lumaM = dot( rgbM, luma );\\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\\n vec2 dir;\\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\\n dir * rcpDirMin)) * resolution;\\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\\n rgbA *= 0.5;\\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\\n rgbB *= 0.25;\\n rgbB += rgbA * 0.5;\\n float lumaB = dot( rgbB, luma );\\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\\n {\\n gl_FragColor = vec4( rgbA, opacity );\\n }\\n else {\\n gl_FragColor = vec4( rgbB, opacity );\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2NvbXBvc2l0b3IvZnhhYS5nbHNsLmpzP2ExNTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuY29tcG9zaXRvci5meGFhXFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG51bmlmb3JtIHZlYzQgdmlld3BvcnQgOiBWSUVXUE9SVDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG4jZGVmaW5lIEZYQUFfUkVEVUNFX01JTiAoMS4wLzEyOC4wKVxcbiNkZWZpbmUgRlhBQV9SRURVQ0VfTVVMICgxLjAvOC4wKVxcbiNkZWZpbmUgRlhBQV9TUEFOX01BWCA4LjBcXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzIgcmVzb2x1dGlvbiA9IDEuMCAvIHZpZXdwb3J0Lnp3O1xcbiB2ZWMzIHJnYk5XID0gZGVjb2RlSERSKCB0ZXh0dXJlMkQoIHRleHR1cmUsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggLTEuMCwgLTEuMCApICkgKiByZXNvbHV0aW9uICkgKS54eXo7XFxuIHZlYzMgcmdiTkUgPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgKCBnbF9GcmFnQ29vcmQueHkgKyB2ZWMyKCAxLjAsIC0xLjAgKSApICogcmVzb2x1dGlvbiApICkueHl6O1xcbiB2ZWMzIHJnYlNXID0gZGVjb2RlSERSKCB0ZXh0dXJlMkQoIHRleHR1cmUsICggZ2xfRnJhZ0Nvb3JkLnh5ICsgdmVjMiggLTEuMCwgMS4wICkgKSAqIHJlc29sdXRpb24gKSApLnh5ejtcXG4gdmVjMyByZ2JTRSA9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCAoIGdsX0ZyYWdDb29yZC54eSArIHZlYzIoIDEuMCwgMS4wICkgKSAqIHJlc29sdXRpb24gKSApLnh5ejtcXG4gdmVjNCByZ2JhTSA9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCBnbF9GcmFnQ29vcmQueHkgKiByZXNvbHV0aW9uICkgKTtcXG4gdmVjMyByZ2JNID0gcmdiYU0ueHl6O1xcbiBmbG9hdCBvcGFjaXR5ID0gcmdiYU0udztcXG4gdmVjMyBsdW1hID0gdmVjMyggMC4yOTksIDAuNTg3LCAwLjExNCApO1xcbiBmbG9hdCBsdW1hTlcgPSBkb3QoIHJnYk5XLCBsdW1hICk7XFxuIGZsb2F0IGx1bWFORSA9IGRvdCggcmdiTkUsIGx1bWEgKTtcXG4gZmxvYXQgbHVtYVNXID0gZG90KCByZ2JTVywgbHVtYSApO1xcbiBmbG9hdCBsdW1hU0UgPSBkb3QoIHJnYlNFLCBsdW1hICk7XFxuIGZsb2F0IGx1bWFNID0gZG90KCByZ2JNLCBsdW1hICk7XFxuIGZsb2F0IGx1bWFNaW4gPSBtaW4oIGx1bWFNLCBtaW4oIG1pbiggbHVtYU5XLCBsdW1hTkUgKSwgbWluKCBsdW1hU1csIGx1bWFTRSApICkgKTtcXG4gZmxvYXQgbHVtYU1heCA9IG1heCggbHVtYU0sIG1heCggbWF4KCBsdW1hTlcsIGx1bWFORSkgLCBtYXgoIGx1bWFTVywgbHVtYVNFICkgKSApO1xcbiB2ZWMyIGRpcjtcXG4gZGlyLnggPSAtKChsdW1hTlcgKyBsdW1hTkUpIC0gKGx1bWFTVyArIGx1bWFTRSkpO1xcbiBkaXIueSA9ICgobHVtYU5XICsgbHVtYVNXKSAtIChsdW1hTkUgKyBsdW1hU0UpKTtcXG4gZmxvYXQgZGlyUmVkdWNlID0gbWF4KCAoIGx1bWFOVyArIGx1bWFORSArIGx1bWFTVyArIGx1bWFTRSApICogKCAwLjI1ICogRlhBQV9SRURVQ0VfTVVMICksIEZYQUFfUkVEVUNFX01JTiApO1xcbiBmbG9hdCByY3BEaXJNaW4gPSAxLjAgLyAoIG1pbiggYWJzKCBkaXIueCApLCBhYnMoIGRpci55ICkgKSArIGRpclJlZHVjZSApO1xcbiBkaXIgPSBtaW4oIHZlYzIoIEZYQUFfU1BBTl9NQVgsIEZYQUFfU1BBTl9NQVgpLFxcbiBtYXgoIHZlYzIoLUZYQUFfU1BBTl9NQVgsIC1GWEFBX1NQQU5fTUFYKSxcXG4gZGlyICogcmNwRGlyTWluKSkgKiByZXNvbHV0aW9uO1xcbiB2ZWMzIHJnYkEgPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgZ2xfRnJhZ0Nvb3JkLnh5ICogcmVzb2x1dGlvbiArIGRpciAqICggMS4wIC8gMy4wIC0gMC41ICkgKSApLnh5ejtcXG4gcmdiQSArPSBkZWNvZGVIRFIoIHRleHR1cmUyRCggdGV4dHVyZSwgZ2xfRnJhZ0Nvb3JkLnh5ICogcmVzb2x1dGlvbiArIGRpciAqICggMi4wIC8gMy4wIC0gMC41ICkgKSApLnh5ejtcXG4gcmdiQSAqPSAwLjU7XFxuIHZlYzMgcmdiQiA9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCBnbF9GcmFnQ29vcmQueHkgKiByZXNvbHV0aW9uICsgZGlyICogLTAuNSApICkueHl6O1xcbiByZ2JCICs9IGRlY29kZUhEUiggdGV4dHVyZTJEKCB0ZXh0dXJlLCBnbF9GcmFnQ29vcmQueHkgKiByZXNvbHV0aW9uICsgZGlyICogMC41ICkgKS54eXo7XFxuIHJnYkIgKj0gMC4yNTtcXG4gcmdiQiArPSByZ2JBICogMC41O1xcbiBmbG9hdCBsdW1hQiA9IGRvdCggcmdiQiwgbHVtYSApO1xcbiBpZiAoICggbHVtYUIgPCBsdW1hTWluICkgfHwgKCBsdW1hQiA+IGx1bWFNYXggKSApXFxuIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCggcmdiQSwgb3BhY2l0eSApO1xcbiB9XFxuIGVsc2Uge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KCByZ2JCLCBvcGFjaXR5ICk7XFxuIH1cXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvY29tcG9zaXRvci9meGFhLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE1NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///156\n");

/***/ }),
/* 157 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.gbuffer.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\n#if defined(SECOND_PASS) || defined(FIRST_PASS)\\nattribute vec2 texcoord : TEXCOORD_0;\\nuniform vec2 uvRepeat;\\nuniform vec2 uvOffset;\\nvarying vec2 v_Texcoord;\\n#endif\\n#ifdef FIRST_PASS\\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\\nuniform mat4 world : WORLD;\\nvarying vec3 v_Normal;\\nattribute vec3 normal : NORMAL;\\nattribute vec4 tangent : TANGENT;\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\nvarying vec3 v_WorldPosition;\\n#endif\\n@import clay.chunk.skinning_header\\n#ifdef THIRD_PASS\\nuniform mat4 prevWorldViewProjection;\\nvarying vec4 v_ViewPosition;\\nvarying vec4 v_PrevViewPosition;\\n#ifdef SKINNING\\n#ifdef USE_SKIN_MATRICES_TEXTURE\\nuniform sampler2D prevSkinMatricesTexture;\\nmat4 getPrevSkinMatrix(float idx) {\\n return getSkinMatrix(prevSkinMatricesTexture, idx);\\n}\\n#else\\nuniform mat4 prevSkinMatrix[JOINT_COUNT];\\nmat4 getPrevSkinMatrix(float idx) {\\n return prevSkinMatrix[int(idx)];\\n}\\n#endif\\n#endif\\n#endif\\nvoid main()\\n{\\n vec3 skinnedPosition = position;\\n vec3 prevSkinnedPosition = position;\\n#ifdef FIRST_PASS\\n vec3 skinnedNormal = normal;\\n vec3 skinnedTangent = tangent.xyz;\\n bool hasTangent = dot(tangent, tangent) > 0.0;\\n#endif\\n#ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n #ifdef FIRST_PASS\\n skinnedNormal = (skinMatrixWS * vec4(normal, 0.0)).xyz;\\n if (hasTangent) {\\n skinnedTangent = (skinMatrixWS * vec4(tangent.xyz, 0.0)).xyz;\\n }\\n #endif\\n #ifdef THIRD_PASS\\n {\\n mat4 prevSkinMatrixWS = getPrevSkinMatrix(joint.x) * weight.x;\\n if (weight.y > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.y) * weight.y; }\\n if (weight.z > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.z) * weight.z; }\\n float weightW = 1.0-weight.x-weight.y-weight.z;\\n if (weightW > 1e-4) { prevSkinMatrixWS += getPrevSkinMatrix(joint.w) * weightW; }\\n prevSkinnedPosition = (prevSkinMatrixWS * vec4(position, 1.0)).xyz;\\n }\\n #endif\\n#endif\\n#if defined(SECOND_PASS) || defined(FIRST_PASS)\\n v_Texcoord = texcoord * uvRepeat + uvOffset;\\n#endif\\n#ifdef FIRST_PASS\\n v_Normal = normalize((worldInverseTranspose * vec4(skinnedNormal, 0.0)).xyz);\\n if (hasTangent) {\\n v_Tangent = normalize((worldInverseTranspose * vec4(skinnedTangent, 0.0)).xyz);\\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\\n }\\n v_WorldPosition = (world * vec4(skinnedPosition, 1.0)).xyz;\\n#endif\\n#ifdef THIRD_PASS\\n v_ViewPosition = worldViewProjection * vec4(skinnedPosition, 1.0);\\n v_PrevViewPosition = prevWorldViewProjection * vec4(prevSkinnedPosition, 1.0);\\n#endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\\n}\\n@end\\n@export clay.deferred.gbuffer1.fragment\\nuniform mat4 viewInverse : VIEWINVERSE;\\nuniform float glossiness;\\nvarying vec2 v_Texcoord;\\nvarying vec3 v_Normal;\\nvarying vec3 v_WorldPosition;\\nuniform sampler2D normalMap;\\nuniform sampler2D diffuseMap;\\nvarying vec3 v_Tangent;\\nvarying vec3 v_Bitangent;\\nuniform sampler2D roughGlossMap;\\nuniform bool useRoughGlossMap;\\nuniform bool useRoughness;\\nuniform bool doubleSided;\\nuniform float alphaCutoff: 0.0;\\nuniform float alpha: 1.0;\\nuniform int roughGlossChannel: 0;\\nfloat indexingTexel(in vec4 texel, in int idx) {\\n if (idx == 3) return texel.a;\\n else if (idx == 1) return texel.g;\\n else if (idx == 2) return texel.b;\\n else return texel.r;\\n}\\nvoid main()\\n{\\n vec3 N = v_Normal;\\n if (doubleSided) {\\n vec3 eyePos = viewInverse[3].xyz;\\n vec3 V = eyePos - v_WorldPosition;\\n if (dot(N, V) < 0.0) {\\n N = -N;\\n }\\n }\\n if (alphaCutoff > 0.0) {\\n float a = texture2D(diffuseMap, v_Texcoord).a * alpha;\\n if (a < alphaCutoff) {\\n discard;\\n }\\n }\\n if (dot(v_Tangent, v_Tangent) > 0.0) {\\n vec3 normalTexel = texture2D(normalMap, v_Texcoord).xyz;\\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\\n N = normalize(tbn * N);\\n }\\n }\\n gl_FragColor.rgb = (N + 1.0) * 0.5;\\n float g = glossiness;\\n if (useRoughGlossMap) {\\n float g2 = indexingTexel(texture2D(roughGlossMap, v_Texcoord), roughGlossChannel);\\n if (useRoughness) {\\n g2 = 1.0 - g2;\\n }\\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\\n }\\n gl_FragColor.a = g + 0.005;\\n}\\n@end\\n@export clay.deferred.gbuffer2.fragment\\nuniform sampler2D diffuseMap;\\nuniform sampler2D metalnessMap;\\nuniform vec3 color;\\nuniform float metalness;\\nuniform bool useMetalnessMap;\\nuniform bool linear;\\nuniform float alphaCutoff: 0.0;\\nuniform float alpha: 1.0;\\nvarying vec2 v_Texcoord;\\n@import clay.util.srgb\\nvoid main()\\n{\\n float m = metalness;\\n if (useMetalnessMap) {\\n vec4 metalnessTexel = texture2D(metalnessMap, v_Texcoord);\\n m = clamp(metalnessTexel.r + (m * 2.0 - 1.0), 0.0, 1.0);\\n }\\n vec4 texel = texture2D(diffuseMap, v_Texcoord);\\n if (linear) {\\n texel = sRGBToLinear(texel);\\n }\\n if (alphaCutoff > 0.0) {\\n float a = texel.a * alpha;\\n if (a < alphaCutoff) {\\n discard;\\n }\\n }\\n gl_FragColor.rgb = texel.rgb * color;\\n gl_FragColor.a = m + 0.005;\\n}\\n@end\\n@export clay.deferred.gbuffer3.fragment\\nuniform bool firstRender;\\nvarying vec4 v_ViewPosition;\\nvarying vec4 v_PrevViewPosition;\\nvoid main()\\n{\\n vec2 a = v_ViewPosition.xy / v_ViewPosition.w;\\n vec2 b = v_PrevViewPosition.xy / v_PrevViewPosition.w;\\n if (firstRender) {\\n gl_FragColor = vec4(0.0);\\n }\\n else {\\n gl_FragColor = vec4((a - b) * 0.5 + 0.5, 0.0, 1.0);\\n }\\n}\\n@end\\n@export clay.deferred.gbuffer.debug\\n@import clay.deferred.chunk.light_head\\nuniform sampler2D gBufferTexture4;\\nuniform int debug: 0;\\nvoid main ()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n if (debug == 0) {\\n gl_FragColor = vec4(N, 1.0);\\n }\\n else if (debug == 1) {\\n gl_FragColor = vec4(vec3(z), 1.0);\\n }\\n else if (debug == 2) {\\n gl_FragColor = vec4(position, 1.0);\\n }\\n else if (debug == 3) {\\n gl_FragColor = vec4(vec3(glossiness), 1.0);\\n }\\n else if (debug == 4) {\\n gl_FragColor = vec4(vec3(metalness), 1.0);\\n }\\n else if (debug == 5) {\\n gl_FragColor = vec4(albedo, 1.0);\\n }\\n else {\\n vec4 color = texture2D(gBufferTexture4, uv);\\n color.rg -= 0.5;\\n color.rg *= 2.0;\\n gl_FragColor = color;\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2didWZmZXIuZ2xzbC5qcz9mZmQxIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLmdidWZmZXIudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxuI2lmIGRlZmluZWQoU0VDT05EX1BBU1MpIHx8IGRlZmluZWQoRklSU1RfUEFTUylcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZCA6IFRFWENPT1JEXzA7XFxudW5pZm9ybSB2ZWMyIHV2UmVwZWF0O1xcbnVuaWZvcm0gdmVjMiB1dk9mZnNldDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG4jZW5kaWZcXG4jaWZkZWYgRklSU1RfUEFTU1xcbnVuaWZvcm0gbWF0NCB3b3JsZEludmVyc2VUcmFuc3Bvc2UgOiBXT1JMRElOVkVSU0VUUkFOU1BPU0U7XFxudW5pZm9ybSBtYXQ0IHdvcmxkIDogV09STEQ7XFxudmFyeWluZyB2ZWMzIHZfTm9ybWFsO1xcbmF0dHJpYnV0ZSB2ZWMzIG5vcm1hbCA6IE5PUk1BTDtcXG5hdHRyaWJ1dGUgdmVjNCB0YW5nZW50IDogVEFOR0VOVDtcXG52YXJ5aW5nIHZlYzMgdl9UYW5nZW50O1xcbnZhcnlpbmcgdmVjMyB2X0JpdGFuZ2VudDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbiNlbmRpZlxcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG4jaWZkZWYgVEhJUkRfUEFTU1xcbnVuaWZvcm0gbWF0NCBwcmV2V29ybGRWaWV3UHJvamVjdGlvbjtcXG52YXJ5aW5nIHZlYzQgdl9WaWV3UG9zaXRpb247XFxudmFyeWluZyB2ZWM0IHZfUHJldlZpZXdQb3NpdGlvbjtcXG4jaWZkZWYgU0tJTk5JTkdcXG4jaWZkZWYgVVNFX1NLSU5fTUFUUklDRVNfVEVYVFVSRVxcbnVuaWZvcm0gc2FtcGxlcjJEIHByZXZTa2luTWF0cmljZXNUZXh0dXJlO1xcbm1hdDQgZ2V0UHJldlNraW5NYXRyaXgoZmxvYXQgaWR4KSB7XFxuIHJldHVybiBnZXRTa2luTWF0cml4KHByZXZTa2luTWF0cmljZXNUZXh0dXJlLCBpZHgpO1xcbn1cXG4jZWxzZVxcbnVuaWZvcm0gbWF0NCBwcmV2U2tpbk1hdHJpeFtKT0lOVF9DT1VOVF07XFxubWF0NCBnZXRQcmV2U2tpbk1hdHJpeChmbG9hdCBpZHgpIHtcXG4gcmV0dXJuIHByZXZTa2luTWF0cml4W2ludChpZHgpXTtcXG59XFxuI2VuZGlmXFxuI2VuZGlmXFxuI2VuZGlmXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzMgc2tpbm5lZFBvc2l0aW9uID0gcG9zaXRpb247XFxuIHZlYzMgcHJldlNraW5uZWRQb3NpdGlvbiA9IHBvc2l0aW9uO1xcbiNpZmRlZiBGSVJTVF9QQVNTXFxuIHZlYzMgc2tpbm5lZE5vcm1hbCA9IG5vcm1hbDtcXG4gdmVjMyBza2lubmVkVGFuZ2VudCA9IHRhbmdlbnQueHl6O1xcbiBib29sIGhhc1RhbmdlbnQgPSBkb3QodGFuZ2VudCwgdGFuZ2VudCkgPiAwLjA7XFxuI2VuZGlmXFxuI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSAoc2tpbk1hdHJpeFdTICogdmVjNChwb3NpdGlvbiwgMS4wKSkueHl6O1xcbiAjaWZkZWYgRklSU1RfUEFTU1xcbiBza2lubmVkTm9ybWFsID0gKHNraW5NYXRyaXhXUyAqIHZlYzQobm9ybWFsLCAwLjApKS54eXo7XFxuIGlmIChoYXNUYW5nZW50KSB7XFxuIHNraW5uZWRUYW5nZW50ID0gKHNraW5NYXRyaXhXUyAqIHZlYzQodGFuZ2VudC54eXosIDAuMCkpLnh5ejtcXG4gfVxcbiAjZW5kaWZcXG4gI2lmZGVmIFRISVJEX1BBU1NcXG4ge1xcbiBtYXQ0IHByZXZTa2luTWF0cml4V1MgPSBnZXRQcmV2U2tpbk1hdHJpeChqb2ludC54KSAqIHdlaWdodC54O1xcbiBpZiAod2VpZ2h0LnkgPiAxZS00KSB7IHByZXZTa2luTWF0cml4V1MgKz0gZ2V0UHJldlNraW5NYXRyaXgoam9pbnQueSkgKiB3ZWlnaHQueTsgfVxcbiBpZiAod2VpZ2h0LnogPiAxZS00KSB7IHByZXZTa2luTWF0cml4V1MgKz0gZ2V0UHJldlNraW5NYXRyaXgoam9pbnQueikgKiB3ZWlnaHQuejsgfVxcbiBmbG9hdCB3ZWlnaHRXID0gMS4wLXdlaWdodC54LXdlaWdodC55LXdlaWdodC56O1xcbiBpZiAod2VpZ2h0VyA+IDFlLTQpIHsgcHJldlNraW5NYXRyaXhXUyArPSBnZXRQcmV2U2tpbk1hdHJpeChqb2ludC53KSAqIHdlaWdodFc7IH1cXG4gcHJldlNraW5uZWRQb3NpdGlvbiA9IChwcmV2U2tpbk1hdHJpeFdTICogdmVjNChwb3NpdGlvbiwgMS4wKSkueHl6O1xcbiB9XFxuICNlbmRpZlxcbiNlbmRpZlxcbiNpZiBkZWZpbmVkKFNFQ09ORF9QQVNTKSB8fCBkZWZpbmVkKEZJUlNUX1BBU1MpXFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZCAqIHV2UmVwZWF0ICsgdXZPZmZzZXQ7XFxuI2VuZGlmXFxuI2lmZGVmIEZJUlNUX1BBU1NcXG4gdl9Ob3JtYWwgPSBub3JtYWxpemUoKHdvcmxkSW52ZXJzZVRyYW5zcG9zZSAqIHZlYzQoc2tpbm5lZE5vcm1hbCwgMC4wKSkueHl6KTtcXG4gaWYgKGhhc1RhbmdlbnQpIHtcXG4gdl9UYW5nZW50ID0gbm9ybWFsaXplKCh3b3JsZEludmVyc2VUcmFuc3Bvc2UgKiB2ZWM0KHNraW5uZWRUYW5nZW50LCAwLjApKS54eXopO1xcbiB2X0JpdGFuZ2VudCA9IG5vcm1hbGl6ZShjcm9zcyh2X05vcm1hbCwgdl9UYW5nZW50KSAqIHRhbmdlbnQudyk7XFxuIH1cXG4gdl9Xb3JsZFBvc2l0aW9uID0gKHdvcmxkICogdmVjNChza2lubmVkUG9zaXRpb24sIDEuMCkpLnh5ejtcXG4jZW5kaWZcXG4jaWZkZWYgVEhJUkRfUEFTU1xcbiB2X1ZpZXdQb3NpdGlvbiA9IHdvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHNraW5uZWRQb3NpdGlvbiwgMS4wKTtcXG4gdl9QcmV2Vmlld1Bvc2l0aW9uID0gcHJldldvcmxkVmlld1Byb2plY3Rpb24gKiB2ZWM0KHByZXZTa2lubmVkUG9zaXRpb24sIDEuMCk7XFxuI2VuZGlmXFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQoc2tpbm5lZFBvc2l0aW9uLCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmRlZmVycmVkLmdidWZmZXIxLmZyYWdtZW50XFxudW5pZm9ybSBtYXQ0IHZpZXdJbnZlcnNlIDogVklFV0lOVkVSU0U7XFxudW5pZm9ybSBmbG9hdCBnbG9zc2luZXNzO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnZhcnlpbmcgdmVjMyB2X05vcm1hbDtcXG52YXJ5aW5nIHZlYzMgdl9Xb3JsZFBvc2l0aW9uO1xcbnVuaWZvcm0gc2FtcGxlcjJEIG5vcm1hbE1hcDtcXG51bmlmb3JtIHNhbXBsZXIyRCBkaWZmdXNlTWFwO1xcbnZhcnlpbmcgdmVjMyB2X1RhbmdlbnQ7XFxudmFyeWluZyB2ZWMzIHZfQml0YW5nZW50O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHJvdWdoR2xvc3NNYXA7XFxudW5pZm9ybSBib29sIHVzZVJvdWdoR2xvc3NNYXA7XFxudW5pZm9ybSBib29sIHVzZVJvdWdobmVzcztcXG51bmlmb3JtIGJvb2wgZG91YmxlU2lkZWQ7XFxudW5pZm9ybSBmbG9hdCBhbHBoYUN1dG9mZjogMC4wO1xcbnVuaWZvcm0gZmxvYXQgYWxwaGE6IDEuMDtcXG51bmlmb3JtIGludCByb3VnaEdsb3NzQ2hhbm5lbDogMDtcXG5mbG9hdCBpbmRleGluZ1RleGVsKGluIHZlYzQgdGV4ZWwsIGluIGludCBpZHgpIHtcXG4gaWYgKGlkeCA9PSAzKSByZXR1cm4gdGV4ZWwuYTtcXG4gZWxzZSBpZiAoaWR4ID09IDEpIHJldHVybiB0ZXhlbC5nO1xcbiBlbHNlIGlmIChpZHggPT0gMikgcmV0dXJuIHRleGVsLmI7XFxuIGVsc2UgcmV0dXJuIHRleGVsLnI7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMzIE4gPSB2X05vcm1hbDtcXG4gaWYgKGRvdWJsZVNpZGVkKSB7XFxuIHZlYzMgZXllUG9zID0gdmlld0ludmVyc2VbM10ueHl6O1xcbiB2ZWMzIFYgPSBleWVQb3MgLSB2X1dvcmxkUG9zaXRpb247XFxuIGlmIChkb3QoTiwgVikgPCAwLjApIHtcXG4gTiA9IC1OO1xcbiB9XFxuIH1cXG4gaWYgKGFscGhhQ3V0b2ZmID4gMC4wKSB7XFxuIGZsb2F0IGEgPSB0ZXh0dXJlMkQoZGlmZnVzZU1hcCwgdl9UZXhjb29yZCkuYSAqIGFscGhhO1xcbiBpZiAoYSA8IGFscGhhQ3V0b2ZmKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gfVxcbiBpZiAoZG90KHZfVGFuZ2VudCwgdl9UYW5nZW50KSA+IDAuMCkge1xcbiB2ZWMzIG5vcm1hbFRleGVsID0gdGV4dHVyZTJEKG5vcm1hbE1hcCwgdl9UZXhjb29yZCkueHl6O1xcbiBpZiAoZG90KG5vcm1hbFRleGVsLCBub3JtYWxUZXhlbCkgPiAwLjApIHsgTiA9IG5vcm1hbFRleGVsICogMi4wIC0gMS4wO1xcbiBtYXQzIHRibiA9IG1hdDModl9UYW5nZW50LCB2X0JpdGFuZ2VudCwgdl9Ob3JtYWwpO1xcbiBOID0gbm9ybWFsaXplKHRibiAqIE4pO1xcbiB9XFxuIH1cXG4gZ2xfRnJhZ0NvbG9yLnJnYiA9IChOICsgMS4wKSAqIDAuNTtcXG4gZmxvYXQgZyA9IGdsb3NzaW5lc3M7XFxuIGlmICh1c2VSb3VnaEdsb3NzTWFwKSB7XFxuIGZsb2F0IGcyID0gaW5kZXhpbmdUZXhlbCh0ZXh0dXJlMkQocm91Z2hHbG9zc01hcCwgdl9UZXhjb29yZCksIHJvdWdoR2xvc3NDaGFubmVsKTtcXG4gaWYgKHVzZVJvdWdobmVzcykge1xcbiBnMiA9IDEuMCAtIGcyO1xcbiB9XFxuIGcgPSBjbGFtcChnMiArIChnIC0gMC41KSAqIDIuMCwgMC4wLCAxLjApO1xcbiB9XFxuIGdsX0ZyYWdDb2xvci5hID0gZyArIDAuMDA1O1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjbGF5LmRlZmVycmVkLmdidWZmZXIyLmZyYWdtZW50XFxudW5pZm9ybSBzYW1wbGVyMkQgZGlmZnVzZU1hcDtcXG51bmlmb3JtIHNhbXBsZXIyRCBtZXRhbG5lc3NNYXA7XFxudW5pZm9ybSB2ZWMzIGNvbG9yO1xcbnVuaWZvcm0gZmxvYXQgbWV0YWxuZXNzO1xcbnVuaWZvcm0gYm9vbCB1c2VNZXRhbG5lc3NNYXA7XFxudW5pZm9ybSBib29sIGxpbmVhcjtcXG51bmlmb3JtIGZsb2F0IGFscGhhQ3V0b2ZmOiAwLjA7XFxudW5pZm9ybSBmbG9hdCBhbHBoYTogMS4wO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLnNyZ2JcXG52b2lkIG1haW4oKVxcbntcXG4gZmxvYXQgbSA9IG1ldGFsbmVzcztcXG4gaWYgKHVzZU1ldGFsbmVzc01hcCkge1xcbiB2ZWM0IG1ldGFsbmVzc1RleGVsID0gdGV4dHVyZTJEKG1ldGFsbmVzc01hcCwgdl9UZXhjb29yZCk7XFxuIG0gPSBjbGFtcChtZXRhbG5lc3NUZXhlbC5yICsgKG0gKiAyLjAgLSAxLjApLCAwLjAsIDEuMCk7XFxuIH1cXG4gdmVjNCB0ZXhlbCA9IHRleHR1cmUyRChkaWZmdXNlTWFwLCB2X1RleGNvb3JkKTtcXG4gaWYgKGxpbmVhcikge1xcbiB0ZXhlbCA9IHNSR0JUb0xpbmVhcih0ZXhlbCk7XFxuIH1cXG4gaWYgKGFscGhhQ3V0b2ZmID4gMC4wKSB7XFxuIGZsb2F0IGEgPSB0ZXhlbC5hICogYWxwaGE7XFxuIGlmIChhIDwgYWxwaGFDdXRvZmYpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB9XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSB0ZXhlbC5yZ2IgKiBjb2xvcjtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSBtICsgMC4wMDU7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuZGVmZXJyZWQuZ2J1ZmZlcjMuZnJhZ21lbnRcXG51bmlmb3JtIGJvb2wgZmlyc3RSZW5kZXI7XFxudmFyeWluZyB2ZWM0IHZfVmlld1Bvc2l0aW9uO1xcbnZhcnlpbmcgdmVjNCB2X1ByZXZWaWV3UG9zaXRpb247XFxudm9pZCBtYWluKClcXG57XFxuIHZlYzIgYSA9IHZfVmlld1Bvc2l0aW9uLnh5IC8gdl9WaWV3UG9zaXRpb24udztcXG4gdmVjMiBiID0gdl9QcmV2Vmlld1Bvc2l0aW9uLnh5IC8gdl9QcmV2Vmlld1Bvc2l0aW9uLnc7XFxuIGlmIChmaXJzdFJlbmRlcikge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuIH1cXG4gZWxzZSB7XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQoKGEgLSBiKSAqIDAuNSArIDAuNSwgMC4wLCAxLjApO1xcbiB9XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkuZGVmZXJyZWQuZ2J1ZmZlci5kZWJ1Z1xcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9oZWFkXFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmU0O1xcbnVuaWZvcm0gaW50IGRlYnVnOiAwO1xcbnZvaWQgbWFpbiAoKVxcbntcXG4gQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmdidWZmZXJfcmVhZFxcbiBpZiAoZGVidWcgPT0gMCkge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KE4sIDEuMCk7XFxuIH1cXG4gZWxzZSBpZiAoZGVidWcgPT0gMSkge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHZlYzMoeiksIDEuMCk7XFxuIH1cXG4gZWxzZSBpZiAoZGVidWcgPT0gMikge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHBvc2l0aW9uLCAxLjApO1xcbiB9XFxuIGVsc2UgaWYgKGRlYnVnID09IDMpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGdsb3NzaW5lc3MpLCAxLjApO1xcbiB9XFxuIGVsc2UgaWYgKGRlYnVnID09IDQpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKG1ldGFsbmVzcyksIDEuMCk7XFxuIH1cXG4gZWxzZSBpZiAoZGVidWcgPT0gNSkge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGFsYmVkbywgMS4wKTtcXG4gfVxcbiBlbHNlIHtcXG4gdmVjNCBjb2xvciA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTQsIHV2KTtcXG4gY29sb3IucmcgLT0gMC41O1xcbiBjb2xvci5yZyAqPSAyLjA7XFxuIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbiB9XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2didWZmZXIuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTU3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///157\n");

/***/ }),
/* 158 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.chunk.light_head\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform sampler2D gBufferTexture3;\\nuniform vec2 windowSize: WINDOW_SIZE;\\nuniform vec4 viewport: VIEWPORT;\\nuniform mat4 viewProjectionInv;\\n#ifdef DEPTH_ENCODED\\n@import clay.util.decode_float\\n#endif\\n@end\\n@export clay.deferred.chunk.gbuffer_read\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec2 uv2 = (gl_FragCoord.xy - viewport.xy) / viewport.zw;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n vec4 texel3 = texture2D(gBufferTexture3, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n float glossiness = texel1.a;\\n float metalness = texel3.a;\\n vec3 N = texel1.rgb * 2.0 - 1.0;\\n float z = texture2D(gBufferTexture2, uv).r * 2.0 - 1.0;\\n vec2 xy = uv2 * 2.0 - 1.0;\\n vec4 projectedPos = vec4(xy, z, 1.0);\\n vec4 p4 = viewProjectionInv * projectedPos;\\n vec3 position = p4.xyz / p4.w;\\n vec3 albedo = texel3.rgb;\\n vec3 diffuseColor = albedo * (1.0 - metalness);\\n vec3 specularColor = mix(vec3(0.04), albedo, metalness);\\n@end\\n@export clay.deferred.chunk.light_equation\\nfloat D_Phong(in float g, in float ndh) {\\n float a = pow(8192.0, g);\\n return (a + 2.0) / 8.0 * pow(ndh, a);\\n}\\nfloat D_GGX(in float g, in float ndh) {\\n float r = 1.0 - g;\\n float a = r * r;\\n float tmp = ndh * ndh * (a - 1.0) + 1.0;\\n return a / (3.1415926 * tmp * tmp);\\n}\\nvec3 F_Schlick(in float ndv, vec3 spec) {\\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\\n}\\nvec3 lightEquation(\\n in vec3 lightColor, in vec3 diffuseColor, in vec3 specularColor,\\n in float ndl, in float ndh, in float ndv, in float g\\n)\\n{\\n return ndl * lightColor\\n * (diffuseColor + D_Phong(g, ndh) * F_Schlick(ndv, specularColor));\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2NodW5rLmdsc2wuanM/MzUyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9oZWFkXFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmUxO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMjtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTM7XFxudW5pZm9ybSB2ZWMyIHdpbmRvd1NpemU6IFdJTkRPV19TSVpFO1xcbnVuaWZvcm0gdmVjNCB2aWV3cG9ydDogVklFV1BPUlQ7XFxudW5pZm9ybSBtYXQ0IHZpZXdQcm9qZWN0aW9uSW52O1xcbiNpZmRlZiBERVBUSF9FTkNPREVEXFxuQGltcG9ydCBjbGF5LnV0aWwuZGVjb2RlX2Zsb2F0XFxuI2VuZGlmXFxuQGVuZFxcbkBleHBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gdmVjMiB1diA9IGdsX0ZyYWdDb29yZC54eSAvIHdpbmRvd1NpemU7XFxuIHZlYzIgdXYyID0gKGdsX0ZyYWdDb29yZC54eSAtIHZpZXdwb3J0Lnh5KSAvIHZpZXdwb3J0Lnp3O1xcbiB2ZWM0IHRleGVsMSA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIHV2KTtcXG4gdmVjNCB0ZXhlbDMgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUzLCB1dik7XFxuIGlmIChkb3QodGV4ZWwxLnJnYiwgdmVjMygxLjApKSA9PSAwLjApIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiBmbG9hdCBnbG9zc2luZXNzID0gdGV4ZWwxLmE7XFxuIGZsb2F0IG1ldGFsbmVzcyA9IHRleGVsMy5hO1xcbiB2ZWMzIE4gPSB0ZXhlbDEucmdiICogMi4wIC0gMS4wO1xcbiBmbG9hdCB6ID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMiwgdXYpLnIgKiAyLjAgLSAxLjA7XFxuIHZlYzIgeHkgPSB1djIgKiAyLjAgLSAxLjA7XFxuIHZlYzQgcHJvamVjdGVkUG9zID0gdmVjNCh4eSwgeiwgMS4wKTtcXG4gdmVjNCBwNCA9IHZpZXdQcm9qZWN0aW9uSW52ICogcHJvamVjdGVkUG9zO1xcbiB2ZWMzIHBvc2l0aW9uID0gcDQueHl6IC8gcDQudztcXG4gdmVjMyBhbGJlZG8gPSB0ZXhlbDMucmdiO1xcbiB2ZWMzIGRpZmZ1c2VDb2xvciA9IGFsYmVkbyAqICgxLjAgLSBtZXRhbG5lc3MpO1xcbiB2ZWMzIHNwZWN1bGFyQ29sb3IgPSBtaXgodmVjMygwLjA0KSwgYWxiZWRvLCBtZXRhbG5lc3MpO1xcbkBlbmRcXG5AZXhwb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfZXF1YXRpb25cXG5mbG9hdCBEX1Bob25nKGluIGZsb2F0IGcsIGluIGZsb2F0IG5kaCkge1xcbiBmbG9hdCBhID0gcG93KDgxOTIuMCwgZyk7XFxuIHJldHVybiAoYSArIDIuMCkgLyA4LjAgKiBwb3cobmRoLCBhKTtcXG59XFxuZmxvYXQgRF9HR1goaW4gZmxvYXQgZywgaW4gZmxvYXQgbmRoKSB7XFxuIGZsb2F0IHIgPSAxLjAgLSBnO1xcbiBmbG9hdCBhID0gciAqIHI7XFxuIGZsb2F0IHRtcCA9IG5kaCAqIG5kaCAqIChhIC0gMS4wKSArIDEuMDtcXG4gcmV0dXJuIGEgLyAoMy4xNDE1OTI2ICogdG1wICogdG1wKTtcXG59XFxudmVjMyBGX1NjaGxpY2soaW4gZmxvYXQgbmR2LCB2ZWMzIHNwZWMpIHtcXG4gcmV0dXJuIHNwZWMgKyAoMS4wIC0gc3BlYykgKiBwb3coMS4wIC0gbmR2LCA1LjApO1xcbn1cXG52ZWMzIGxpZ2h0RXF1YXRpb24oXFxuIGluIHZlYzMgbGlnaHRDb2xvciwgaW4gdmVjMyBkaWZmdXNlQ29sb3IsIGluIHZlYzMgc3BlY3VsYXJDb2xvcixcXG4gaW4gZmxvYXQgbmRsLCBpbiBmbG9hdCBuZGgsIGluIGZsb2F0IG5kdiwgaW4gZmxvYXQgZ1xcbilcXG57XFxuIHJldHVybiBuZGwgKiBsaWdodENvbG9yXFxuICogKGRpZmZ1c2VDb2xvciArIERfUGhvbmcoZywgbmRoKSAqIEZfU2NobGljayhuZHYsIHNwZWN1bGFyQ29sb3IpKTtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvY2h1bmsuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///158\n");

/***/ }),
/* 159 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__Texture__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__geometry_Sphere__ = __webpack_require__(55);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__geometry_Cone__ = __webpack_require__(63);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__geometry_Cylinder__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__GBuffer__ = __webpack_require__(107);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__shader_source_util_glsl_js__ = __webpack_require__(86);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__shader_source_deferred_lightvolume_glsl_js__ = __webpack_require__(160);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__shader_source_deferred_spot_glsl_js__ = __webpack_require__(161);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__shader_source_deferred_directional_glsl_js__ = __webpack_require__(162);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__shader_source_deferred_ambient_glsl_js__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__shader_source_deferred_ambientsh_glsl_js__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__shader_source_deferred_ambientcubemap_glsl_js__ = __webpack_require__(165);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__shader_source_deferred_point_glsl_js__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__shader_source_deferred_sphere_glsl_js__ = __webpack_require__(167);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__shader_source_deferred_tube_glsl_js__ = __webpack_require__(168);\n// Light-pre pass deferred rendering\n// http://www.realtimerendering.com/blog/deferred-lighting-approaches/\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// Light shaders\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_15__shader_source_util_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_16__shader_source_deferred_lightvolume_glsl_js__[\"a\" /* default */]);\n\n// Light shaders\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_17__shader_source_deferred_spot_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_18__shader_source_deferred_directional_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_19__shader_source_deferred_ambient_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_20__shader_source_deferred_ambientsh_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_21__shader_source_deferred_ambientcubemap_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_22__shader_source_deferred_point_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_23__shader_source_deferred_sphere_glsl_js__[\"a\" /* default */]);\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_24__shader_source_deferred_tube_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_14__shader_source_prez_glsl_js__[\"a\" /* default */]);\n\n/**\n * Deferred renderer\n * @constructor\n * @alias clay.deferred.Renderer\n * @extends clay.core.Base\n */\nvar DeferredRenderer = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    var fullQuadVertex = __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.compositor.vertex');\n    var lightVolumeVertex = __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.light_volume.vertex');\n\n    var directionalLightShader = new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.directional_light'));\n\n    var lightAccumulateBlendFunc = function (gl) {\n        gl.blendEquation(gl.FUNC_ADD);\n        gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n    };\n\n    var createLightPassMat = function (shader) {\n        return new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: shader,\n            blend: lightAccumulateBlendFunc,\n            transparent: true,\n            depthMask: false\n        });\n    };\n\n    var createVolumeShader = function (name) {\n        return new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](lightVolumeVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.' + name));\n    };\n\n    // Rotate and positioning to fit the spot light\n    // Which the cusp of cone pointing to the positive z\n    // and positioned on the origin\n    var coneGeo = new __WEBPACK_IMPORTED_MODULE_9__geometry_Cone__[\"a\" /* default */]({\n        capSegments: 10\n    });\n    var mat = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n    mat.rotateX(Math.PI / 2)\n        .translate(new __WEBPACK_IMPORTED_MODULE_12__math_Vector3__[\"a\" /* default */](0, -1, 0));\n\n    coneGeo.applyTransform(mat);\n\n    var cylinderGeo = new __WEBPACK_IMPORTED_MODULE_10__geometry_Cylinder__[\"a\" /* default */]({\n        capSegments: 10\n    });\n    // Align with x axis\n    mat.identity().rotateZ(Math.PI / 2);\n    cylinderGeo.applyTransform(mat);\n\n    return /** @lends clay.deferred.Renderer# */ {\n\n        /**\n         * Provide ShadowMapPass for shadow rendering.\n         * @type {clay.prePass.ShadowMap}\n         */\n        shadowMapPass: null,\n        /**\n         * If enable auto resizing from given defualt renderer size.\n         * @type {boolean}\n         */\n        autoResize: true,\n\n        _createLightPassMat: createLightPassMat,\n\n        _gBuffer: new __WEBPACK_IMPORTED_MODULE_13__GBuffer__[\"a\" /* default */](),\n\n        _lightAccumFrameBuffer: new __WEBPACK_IMPORTED_MODULE_3__FrameBuffer__[\"a\" /* default */](),\n\n        _lightAccumTex: new __WEBPACK_IMPORTED_MODULE_5__Texture2D__[\"a\" /* default */]({\n            // FIXME Device not support float texture\n            type: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].HALF_FLOAT,\n            minFilter: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].NEAREST,\n            magFilter: __WEBPACK_IMPORTED_MODULE_6__Texture__[\"a\" /* default */].NEAREST\n        }),\n\n        _fullQuadPass: new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n            blendWithPrevious: true\n        }),\n\n        _directionalLightMat: createLightPassMat(directionalLightShader),\n\n        _ambientMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_light')\n        )),\n        _ambientSHMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_sh_light')\n        )),\n        _ambientCubemapMat: createLightPassMat(new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](\n            fullQuadVertex, __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.deferred.ambient_cubemap_light')\n        )),\n\n        _spotLightShader: createVolumeShader('spot_light'),\n        _pointLightShader: createVolumeShader('point_light'),\n\n        _sphereLightShader: createVolumeShader('sphere_light'),\n        _tubeLightShader: createVolumeShader('tube_light'),\n\n        _lightSphereGeo: new __WEBPACK_IMPORTED_MODULE_8__geometry_Sphere__[\"a\" /* default */]({\n            widthSegments: 10,\n            heightSegements: 10\n        }),\n\n        _lightConeGeo: coneGeo,\n\n        _lightCylinderGeo: cylinderGeo,\n\n        _outputPass: new __WEBPACK_IMPORTED_MODULE_4__compositor_Pass__[\"a\" /* default */]({\n            fragment: __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.compositor.output')\n        })\n    };\n}, /** @lends clay.deferred.Renderer# */ {\n    /**\n     * Do render\n     * @param {clay.Renderer} renderer\n     * @param {clay.Scene} scene\n     * @param {clay.Camera} camera\n     * @param {Object} [opts]\n     * @param {boolean} [opts.renderToTarget = false] If not ouput and render to the target texture\n     * @param {boolean} [opts.notUpdateShadow = true] If not update the shadow.\n     * @param {boolean} [opts.notUpdateScene = true] If not update the scene.\n     */\n    render: function (renderer, scene, camera, opts) {\n\n        opts = opts || {};\n        opts.renderToTarget = opts.renderToTarget || false;\n        opts.notUpdateShadow = opts.notUpdateShadow || false;\n        opts.notUpdateScene = opts.notUpdateScene || false;\n\n        if (!opts.notUpdateScene) {\n            scene.update(false, true);\n        }\n        scene.updateLights();\n        // Render list will be updated in gbuffer.\n\n        camera.update(true);\n\n        // PENDING For stereo rendering\n        var dpr = renderer.getDevicePixelRatio();\n        if (this.autoResize\n            && (renderer.getWidth() * dpr !== this._lightAccumTex.width\n            || renderer.getHeight() * dpr !== this._lightAccumTex.height)\n        ) {\n            this.resize(renderer.getWidth() * dpr, renderer.getHeight() * dpr);\n        }\n\n        this._gBuffer.update(renderer, scene, camera);\n\n        // Accumulate light buffer\n        this._accumulateLightBuffer(renderer, scene, camera, !opts.notUpdateShadow);\n\n        if (!opts.renderToTarget) {\n            this._outputPass.setUniform('texture', this._lightAccumTex);\n\n            this._outputPass.render(renderer);\n            // this._gBuffer.renderDebug(renderer, camera, 'normal');\n        }\n    },\n\n    /**\n     * @return {clay.Texture2D}\n     */\n    getTargetTexture: function () {\n        return this._lightAccumTex;\n    },\n\n    /**\n     * @return {clay.FrameBuffer}\n     */\n    getTargetFrameBuffer: function () {\n        return this._lightAccumFrameBuffer;\n    },\n\n    /**\n     * @return {clay.deferred.GBuffer}\n     */\n    getGBuffer: function () {\n        return this._gBuffer;\n    },\n\n    // TODO is dpr needed?\n    setViewport: function (x, y, width, height, dpr) {\n        this._gBuffer.setViewport(x, y, width, height, dpr);\n        this._lightAccumFrameBuffer.viewport = this._gBuffer.getViewport();\n    },\n\n    // getFullQuadLightPass: function () {\n    //     return this._fullQuadPass;\n    // },\n\n    /**\n     * Set renderer size.\n     * @param {number} width\n     * @param {number} height\n     */\n    resize: function (width, height) {\n        this._lightAccumTex.width = width;\n        this._lightAccumTex.height = height;\n\n        // PENDING viewport ?\n        this._gBuffer.resize(width, height);\n    },\n\n    _accumulateLightBuffer: function (renderer, scene, camera, updateShadow) {\n        var gl = renderer.gl;\n        var lightAccumTex = this._lightAccumTex;\n        var lightAccumFrameBuffer = this._lightAccumFrameBuffer;\n\n        var eyePosition = camera.getWorldPosition().array;\n\n        // Update volume meshes\n        for (var i = 0; i < scene.lights.length; i++) {\n            if (!scene.lights[i].invisible) {\n                this._updateLightProxy(scene.lights[i]);\n            }\n        }\n\n        var shadowMapPass = this.shadowMapPass;\n        if (shadowMapPass && updateShadow) {\n            gl.clearColor(1, 1, 1, 1);\n            this._prepareLightShadow(renderer, scene, camera);\n        }\n\n        this.trigger('beforelightaccumulate', renderer, scene, camera, updateShadow);\n\n        lightAccumFrameBuffer.attach(lightAccumTex);\n        lightAccumFrameBuffer.bind(renderer);\n        var clearColor = renderer.clearColor;\n\n        var viewport = lightAccumFrameBuffer.viewport;\n        if (viewport) {\n            var dpr = viewport.devicePixelRatio;\n            // use scissor to make sure only clear the viewport\n            gl.enable(gl.SCISSOR_TEST);\n            gl.scissor(viewport.x * dpr, viewport.y * dpr, viewport.width * dpr, viewport.height * dpr);\n        }\n        gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n        gl.enable(gl.BLEND);\n        if (viewport) {\n            gl.disable(gl.SCISSOR_TEST);\n        }\n\n        this.trigger('startlightaccumulate', renderer, scene, camera);\n\n        var viewProjectionInv = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(viewProjectionInv, camera.worldTransform, camera.invProjectionMatrix);\n\n        var volumeMeshList = [];\n\n        for (var i = 0; i < scene.lights.length; i++) {\n            var light = scene.lights[i];\n            if (light.invisible) {\n                continue;\n            }\n\n            var uTpl = light.uniformTemplates;\n\n            var volumeMesh = light.volumeMesh || light.__volumeMesh;\n\n            if (volumeMesh) {\n                var material = volumeMesh.material;\n                // Volume mesh will affect the scene bounding box when rendering\n                // if castShadow is true\n                volumeMesh.castShadow = false;\n\n                var unknownLightType = false;\n                switch (light.type) {\n                    case 'POINT_LIGHT':\n                        material.setUniform('lightColor', uTpl.pointLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.pointLightRange.value(light));\n                        material.setUniform('lightPosition', uTpl.pointLightPosition.value(light));\n                        break;\n                    case 'SPOT_LIGHT':\n                        material.setUniform('lightPosition', uTpl.spotLightPosition.value(light));\n                        material.setUniform('lightColor', uTpl.spotLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.spotLightRange.value(light));\n                        material.setUniform('lightDirection', uTpl.spotLightDirection.value(light));\n                        material.setUniform('umbraAngleCosine', uTpl.spotLightUmbraAngleCosine.value(light));\n                        material.setUniform('penumbraAngleCosine', uTpl.spotLightPenumbraAngleCosine.value(light));\n                        material.setUniform('falloffFactor', uTpl.spotLightFalloffFactor.value(light));\n                        break;\n                    case 'SPHERE_LIGHT':\n                        material.setUniform('lightColor', uTpl.sphereLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.sphereLightRange.value(light));\n                        material.setUniform('lightRadius', uTpl.sphereLightRadius.value(light));\n                        material.setUniform('lightPosition', uTpl.sphereLightPosition.value(light));\n                        break;\n                    case 'TUBE_LIGHT':\n                        material.setUniform('lightColor', uTpl.tubeLightColor.value(light));\n                        material.setUniform('lightRange', uTpl.tubeLightRange.value(light));\n                        material.setUniform('lightExtend', uTpl.tubeLightExtend.value(light));\n                        material.setUniform('lightPosition', uTpl.tubeLightPosition.value(light));\n                        break;\n                    default:\n                        unknownLightType = true;\n                }\n\n                if (unknownLightType) {\n                    continue;\n                }\n\n                material.setUniform('eyePosition', eyePosition);\n                material.setUniform('viewProjectionInv', viewProjectionInv.array);\n                material.setUniform('gBufferTexture1', this._gBuffer.getTargetTexture1());\n                material.setUniform('gBufferTexture2', this._gBuffer.getTargetTexture2());\n                material.setUniform('gBufferTexture3', this._gBuffer.getTargetTexture3());\n\n                volumeMeshList.push(volumeMesh);\n\n            }\n            else {\n                var pass = this._fullQuadPass;\n                var unknownLightType = false;\n                // Full quad light\n                switch (light.type) {\n                    case 'AMBIENT_LIGHT':\n                        pass.material = this._ambientMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientLightColor.value(light));\n                        break;\n                    case 'AMBIENT_SH_LIGHT':\n                        pass.material = this._ambientSHMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientSHLightColor.value(light));\n                        pass.material.setUniform('lightCoefficients', uTpl.ambientSHLightCoefficients.value(light));\n                        break;\n                    case 'AMBIENT_CUBEMAP_LIGHT':\n                        pass.material = this._ambientCubemapMat;\n                        pass.material.setUniform('lightColor', uTpl.ambientCubemapLightColor.value(light));\n                        pass.material.setUniform('lightCubemap', uTpl.ambientCubemapLightCubemap.value(light));\n                        pass.material.setUniform('brdfLookup', uTpl.ambientCubemapLightBRDFLookup.value(light));\n                        break;\n                    case 'DIRECTIONAL_LIGHT':\n                        var hasShadow = shadowMapPass && light.castShadow;\n                        pass.material = this._directionalLightMat;\n                        pass.material[hasShadow ? 'define' : 'undefine']('fragment', 'SHADOWMAP_ENABLED');\n                        if (hasShadow) {\n                            pass.material.define('fragment', 'SHADOW_CASCADE', light.shadowCascade);\n                        }\n                        pass.material.setUniform('lightColor', uTpl.directionalLightColor.value(light));\n                        pass.material.setUniform('lightDirection', uTpl.directionalLightDirection.value(light));\n                        break;\n                    default:\n                        // Unkonw light type\n                        unknownLightType = true;\n                }\n                if (unknownLightType) {\n                    continue;\n                }\n\n                var passMaterial = pass.material;\n                passMaterial.setUniform('eyePosition', eyePosition);\n                passMaterial.setUniform('viewProjectionInv', viewProjectionInv.array);\n                passMaterial.setUniform('gBufferTexture1', this._gBuffer.getTargetTexture1());\n                passMaterial.setUniform('gBufferTexture2', this._gBuffer.getTargetTexture2());\n                passMaterial.setUniform('gBufferTexture3', this._gBuffer.getTargetTexture3());\n\n                // TODO\n                if (shadowMapPass && light.castShadow) {\n                    passMaterial.setUniform('lightShadowMap', light.__shadowMap);\n                    passMaterial.setUniform('lightMatrices', light.__lightMatrices);\n                    passMaterial.setUniform('shadowCascadeClipsNear', light.__cascadeClipsNear);\n                    passMaterial.setUniform('shadowCascadeClipsFar', light.__cascadeClipsFar);\n\n                    passMaterial.setUniform('lightShadowMapSize', light.shadowResolution);\n                }\n\n                pass.renderQuad(renderer);\n            }\n        }\n\n        this._renderVolumeMeshList(renderer, scene, camera, volumeMeshList);\n\n        this.trigger('lightaccumulate', renderer, scene, camera);\n\n        lightAccumFrameBuffer.unbind(renderer);\n\n        this.trigger('afterlightaccumulate', renderer, scene, camera);\n\n    },\n\n    _prepareLightShadow: (function () {\n        var worldView = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        return function (renderer, scene, camera) {\n\n            for (var i = 0; i < scene.lights.length; i++) {\n                var light = scene.lights[i];\n                var volumeMesh = light.volumeMesh || light.__volumeMesh;\n                if (!light.castShadow || light.invisible) {\n                    continue;\n                }\n\n                switch (light.type) {\n                    case 'POINT_LIGHT':\n                    case 'SPOT_LIGHT':\n                        // Frustum culling\n                        __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(worldView, camera.viewMatrix, volumeMesh.worldTransform);\n                        if (scene.isFrustumCulled(volumeMesh, camera, worldView.array)) {\n                            continue;\n                        }\n\n                        this._prepareSingleLightShadow(\n                            renderer, scene, camera, light, volumeMesh.material\n                        );\n                        break;\n                    case 'DIRECTIONAL_LIGHT':\n                        this._prepareSingleLightShadow(\n                            renderer, scene, camera, light, null\n                        );\n                }\n            }\n        };\n    })(),\n\n    _prepareSingleLightShadow: function (renderer, scene, camera, light, material) {\n        switch (light.type) {\n            case 'POINT_LIGHT':\n                var shadowMaps = [];\n                this.shadowMapPass.renderPointLightShadow(\n                    renderer, scene, light, shadowMaps\n                );\n                material.setUniform('lightShadowMap', shadowMaps[0]);\n                material.setUniform('lightShadowMapSize', light.shadowResolution);\n                break;\n            case 'SPOT_LIGHT':\n                var shadowMaps = [];\n                var lightMatrices = [];\n                this.shadowMapPass.renderSpotLightShadow(\n                    renderer, scene, light, lightMatrices, shadowMaps\n                );\n                material.setUniform('lightShadowMap', shadowMaps[0]);\n                material.setUniform('lightMatrix', lightMatrices[0]);\n                material.setUniform('lightShadowMapSize', light.shadowResolution);\n                break;\n            case 'DIRECTIONAL_LIGHT':\n                var shadowMaps = [];\n                var lightMatrices = [];\n                var cascadeClips = [];\n                this.shadowMapPass.renderDirectionalLightShadow(\n                    renderer, scene, camera, light, cascadeClips, lightMatrices, shadowMaps\n                );\n                var cascadeClipsNear = cascadeClips.slice();\n                var cascadeClipsFar = cascadeClips.slice();\n                cascadeClipsNear.pop();\n                cascadeClipsFar.shift();\n\n                // Iterate from far to near\n                cascadeClipsNear.reverse();\n                cascadeClipsFar.reverse();\n                lightMatrices.reverse();\n\n                light.__cascadeClipsNear = cascadeClipsNear;\n                light.__cascadeClipsFar = cascadeClipsFar;\n                light.__shadowMap = shadowMaps[0];\n                light.__lightMatrices = lightMatrices;\n                break;\n        }\n    },\n\n    // Update light volume mesh\n    // Light volume mesh is rendered in light accumulate pass instead of full quad.\n    // It will reduce pixels significantly when local light is relatively small.\n    // And we can use custom volume mesh to shape the light.\n    //\n    // See \"Deferred Shading Optimizations\" in GDC2011\n    _updateLightProxy: function (light) {\n        var volumeMesh;\n        if (light.volumeMesh) {\n            volumeMesh = light.volumeMesh;\n        }\n        else {\n            switch (light.type) {\n                // Only local light (point and spot) needs volume mesh.\n                // Directional and ambient light renders in full quad\n                case 'POINT_LIGHT':\n                case 'SPHERE_LIGHT':\n                    var shader = light.type === 'SPHERE_LIGHT'\n                        ? this._sphereLightShader : this._pointLightShader;\n                    // Volume mesh created automatically\n                    if (!light.__volumeMesh) {\n                        light.__volumeMesh = new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                            material: this._createLightPassMat(shader),\n                            geometry: this._lightSphereGeo,\n                            // Disable culling\n                            // if light volume mesh intersect camera near plane\n                            // We need mesh inside can still be rendered\n                            culling: false\n                        });\n                    }\n                    volumeMesh = light.__volumeMesh;\n                    var r = light.range + (light.radius || 0);\n                    volumeMesh.scale.set(r, r, r);\n                    break;\n                case 'SPOT_LIGHT':\n                    light.__volumeMesh = light.__volumeMesh || new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                        material: this._createLightPassMat(this._spotLightShader),\n                        geometry: this._lightConeGeo,\n                        culling: false\n                    });\n                    volumeMesh = light.__volumeMesh;\n                    var aspect = Math.tan(light.penumbraAngle * Math.PI / 180);\n                    var range = light.range;\n                    volumeMesh.scale.set(aspect * range, aspect * range, range / 2);\n                    break;\n                case 'TUBE_LIGHT':\n                    light.__volumeMesh = light.__volumeMesh || new __WEBPACK_IMPORTED_MODULE_7__Mesh__[\"a\" /* default */]({\n                        material: this._createLightPassMat(this._tubeLightShader),\n                        geometry: this._lightCylinderGeo,\n                        culling: false\n                    });\n                    volumeMesh = light.__volumeMesh;\n                    var range = light.range;\n                    volumeMesh.scale.set(light.length / 2 + range, range, range);\n                    break;\n            }\n        }\n        if (volumeMesh) {\n            volumeMesh.update();\n            // Apply light transform\n            __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(volumeMesh.worldTransform, light.worldTransform, volumeMesh.worldTransform);\n            var hasShadow = this.shadowMapPass && light.castShadow;\n            volumeMesh.material[hasShadow ? 'define' : 'undefine']('fragment', 'SHADOWMAP_ENABLED');\n        }\n    },\n\n    _renderVolumeMeshList: (function () {\n        var worldView = new __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */]();\n        var preZMaterial = new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: new __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.prez.vertex'), __WEBPACK_IMPORTED_MODULE_1__Shader__[\"a\" /* default */].source('clay.prez.fragment'))\n        });\n        function getPreZMaterial() {\n            return preZMaterial;\n        }\n        return function (renderer, scene, camera, volumeMeshList) {\n            var gl = renderer.gl;\n\n            gl.depthFunc(gl.LEQUAL);\n\n            for (var i = 0; i < volumeMeshList.length; i++) {\n                var volumeMesh = volumeMeshList[i];\n\n                // Frustum culling\n                __WEBPACK_IMPORTED_MODULE_11__math_Matrix4__[\"a\" /* default */].multiply(worldView, camera.viewMatrix, volumeMesh.worldTransform);\n                if (scene.isFrustumCulled(volumeMesh, camera, worldView.array)) {\n                    continue;\n                }\n\n                // Use prez to avoid one pixel rendered twice\n                gl.colorMask(false, false, false, false);\n                gl.depthMask(true);\n                // depthMask must be enabled before clear DEPTH_BUFFER\n                gl.clear(gl.DEPTH_BUFFER_BIT);\n\n                renderer.renderPass([volumeMesh], camera, {\n                    getMaterial: getPreZMaterial\n                });\n\n                // Render light\n                gl.colorMask(true, true, true, true);\n\n                volumeMesh.material.depthMask = true;\n                renderer.renderPass([volumeMesh], camera);\n            }\n\n            gl.depthFunc(gl.LESS);\n        };\n    })(),\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function (renderer) {\n        this._gBuffer.dispose(renderer);\n\n        this._lightAccumFrameBuffer.dispose(renderer);\n        this._lightAccumTex.dispose(renderer);\n\n        this._lightConeGeo.dispose(renderer);\n        this._lightCylinderGeo.dispose(renderer);\n        this._lightSphereGeo.dispose(renderer);\n\n        this._fullQuadPass.dispose(renderer);\n        this._outputPass.dispose(renderer);\n\n        this._directionalLightMat.dispose(renderer);\n\n        this.shadowMapPass.dispose(renderer);\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (DeferredRenderer);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZWZlcnJlZC9SZW5kZXJlci5qcz82NzAwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIExpZ2h0LXByZSBwYXNzIGRlZmVycmVkIHJlbmRlcmluZ1xuLy8gaHR0cDovL3d3dy5yZWFsdGltZXJlbmRlcmluZy5jb20vYmxvZy9kZWZlcnJlZC1saWdodGluZy1hcHByb2FjaGVzL1xuaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBTaGFkZXIgZnJvbSAnLi4vU2hhZGVyJztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IEZ1bGxRdWFkUGFzcyBmcm9tICcuLi9jb21wb3NpdG9yL1Bhc3MnO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFRleHR1cmUgZnJvbSAnLi4vVGV4dHVyZSc7XG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBTcGhlcmVHZW8gZnJvbSAnLi4vZ2VvbWV0cnkvU3BoZXJlJztcbmltcG9ydCBDb25lR2VvIGZyb20gJy4uL2dlb21ldHJ5L0NvbmUnO1xuaW1wb3J0IEN5bGluZGVyR2VvIGZyb20gJy4uL2dlb21ldHJ5L0N5bGluZGVyJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IEdCdWZmZXIgZnJvbSAnLi9HQnVmZmVyJztcblxuaW1wb3J0IHByZXpHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvcHJlei5nbHNsLmpzJztcbmltcG9ydCB1dGlsR2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL3V0aWwuZ2xzbC5qcyc7XG5cbmltcG9ydCBsaWdodHZvbHVtZUdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9saWdodHZvbHVtZS5nbHNsLmpzJztcbi8vIExpZ2h0IHNoYWRlcnNcbmltcG9ydCBzcG90R2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL3Nwb3QuZ2xzbC5qcyc7XG5pbXBvcnQgZGlyZWN0aW9uYWxHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvZGlyZWN0aW9uYWwuZ2xzbC5qcyc7XG5pbXBvcnQgYW1iaWVudEdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50Lmdsc2wuanMnO1xuaW1wb3J0IGFtYmllbnRzaEdsc2wgZnJvbSAnLi4vc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9hbWJpZW50c2guZ2xzbC5qcyc7XG5pbXBvcnQgYW1iaWVudGN1YmVtYXBHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudGN1YmVtYXAuZ2xzbC5qcyc7XG5pbXBvcnQgcG9pbnRHbHNsIGZyb20gJy4uL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvcG9pbnQuZ2xzbC5qcyc7XG5pbXBvcnQgc3BoZXJlR2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL3NwaGVyZS5nbHNsLmpzJztcbmltcG9ydCB0dWJlR2xzbCBmcm9tICcuLi9zaGFkZXIvc291cmNlL2RlZmVycmVkL3R1YmUuZ2xzbC5qcyc7XG5cblNoYWRlci5pbXBvcnQocHJlekdsc2wpO1xuU2hhZGVyLmltcG9ydCh1dGlsR2xzbCk7XG5TaGFkZXIuaW1wb3J0KGxpZ2h0dm9sdW1lR2xzbCk7XG5cbi8vIExpZ2h0IHNoYWRlcnNcblNoYWRlci5pbXBvcnQoc3BvdEdsc2wpO1xuU2hhZGVyLmltcG9ydChkaXJlY3Rpb25hbEdsc2wpO1xuU2hhZGVyLmltcG9ydChhbWJpZW50R2xzbCk7XG5TaGFkZXIuaW1wb3J0KGFtYmllbnRzaEdsc2wpO1xuU2hhZGVyLmltcG9ydChhbWJpZW50Y3ViZW1hcEdsc2wpO1xuU2hhZGVyLmltcG9ydChwb2ludEdsc2wpO1xuU2hhZGVyLmltcG9ydChzcGhlcmVHbHNsKTtcblNoYWRlci5pbXBvcnQodHViZUdsc2wpO1xuXG5TaGFkZXIuaW1wb3J0KHByZXpHbHNsKTtcblxuLyoqXG4gKiBEZWZlcnJlZCByZW5kZXJlclxuICogQGNvbnN0cnVjdG9yXG4gKiBAYWxpYXMgY2xheS5kZWZlcnJlZC5SZW5kZXJlclxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIERlZmVycmVkUmVuZGVyZXIgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgZnVsbFF1YWRWZXJ0ZXggPSBTaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3IudmVydGV4Jyk7XG4gICAgdmFyIGxpZ2h0Vm9sdW1lVmVydGV4ID0gU2hhZGVyLnNvdXJjZSgnY2xheS5kZWZlcnJlZC5saWdodF92b2x1bWUudmVydGV4Jyk7XG5cbiAgICB2YXIgZGlyZWN0aW9uYWxMaWdodFNoYWRlciA9IG5ldyBTaGFkZXIoZnVsbFF1YWRWZXJ0ZXgsIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuZGlyZWN0aW9uYWxfbGlnaHQnKSk7XG5cbiAgICB2YXIgbGlnaHRBY2N1bXVsYXRlQmxlbmRGdW5jID0gZnVuY3Rpb24gKGdsKSB7XG4gICAgICAgIGdsLmJsZW5kRXF1YXRpb24oZ2wuRlVOQ19BREQpO1xuICAgICAgICBnbC5ibGVuZEZ1bmNTZXBhcmF0ZShnbC5PTkUsIGdsLk9ORSwgZ2wuT05FLCBnbC5PTkUpO1xuICAgIH07XG5cbiAgICB2YXIgY3JlYXRlTGlnaHRQYXNzTWF0ID0gZnVuY3Rpb24gKHNoYWRlcikge1xuICAgICAgICByZXR1cm4gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogc2hhZGVyLFxuICAgICAgICAgICAgYmxlbmQ6IGxpZ2h0QWNjdW11bGF0ZUJsZW5kRnVuYyxcbiAgICAgICAgICAgIHRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgICAgICAgZGVwdGhNYXNrOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdmFyIGNyZWF0ZVZvbHVtZVNoYWRlciA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2hhZGVyKGxpZ2h0Vm9sdW1lVmVydGV4LCBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLicgKyBuYW1lKSk7XG4gICAgfTtcblxuICAgIC8vIFJvdGF0ZSBhbmQgcG9zaXRpb25pbmcgdG8gZml0IHRoZSBzcG90IGxpZ2h0XG4gICAgLy8gV2hpY2ggdGhlIGN1c3Agb2YgY29uZSBwb2ludGluZyB0byB0aGUgcG9zaXRpdmUgelxuICAgIC8vIGFuZCBwb3NpdGlvbmVkIG9uIHRoZSBvcmlnaW5cbiAgICB2YXIgY29uZUdlbyA9IG5ldyBDb25lR2VvKHtcbiAgICAgICAgY2FwU2VnbWVudHM6IDEwXG4gICAgfSk7XG4gICAgdmFyIG1hdCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgbWF0LnJvdGF0ZVgoTWF0aC5QSSAvIDIpXG4gICAgICAgIC50cmFuc2xhdGUobmV3IFZlY3RvcjMoMCwgLTEsIDApKTtcblxuICAgIGNvbmVHZW8uYXBwbHlUcmFuc2Zvcm0obWF0KTtcblxuICAgIHZhciBjeWxpbmRlckdlbyA9IG5ldyBDeWxpbmRlckdlbyh7XG4gICAgICAgIGNhcFNlZ21lbnRzOiAxMFxuICAgIH0pO1xuICAgIC8vIEFsaWduIHdpdGggeCBheGlzXG4gICAgbWF0LmlkZW50aXR5KCkucm90YXRlWihNYXRoLlBJIC8gMik7XG4gICAgY3lsaW5kZXJHZW8uYXBwbHlUcmFuc2Zvcm0obWF0KTtcblxuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuZGVmZXJyZWQuUmVuZGVyZXIjICovIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogUHJvdmlkZSBTaGFkb3dNYXBQYXNzIGZvciBzaGFkb3cgcmVuZGVyaW5nLlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5wcmVQYXNzLlNoYWRvd01hcH1cbiAgICAgICAgICovXG4gICAgICAgIHNoYWRvd01hcFBhc3M6IG51bGwsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBlbmFibGUgYXV0byByZXNpemluZyBmcm9tIGdpdmVuIGRlZnVhbHQgcmVuZGVyZXIgc2l6ZS5cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUmVzaXplOiB0cnVlLFxuXG4gICAgICAgIF9jcmVhdGVMaWdodFBhc3NNYXQ6IGNyZWF0ZUxpZ2h0UGFzc01hdCxcblxuICAgICAgICBfZ0J1ZmZlcjogbmV3IEdCdWZmZXIoKSxcblxuICAgICAgICBfbGlnaHRBY2N1bUZyYW1lQnVmZmVyOiBuZXcgRnJhbWVCdWZmZXIoKSxcblxuICAgICAgICBfbGlnaHRBY2N1bVRleDogbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICAvLyBGSVhNRSBEZXZpY2Ugbm90IHN1cHBvcnQgZmxvYXQgdGV4dHVyZVxuICAgICAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FULFxuICAgICAgICAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgICAgICAgICBtYWdGaWx0ZXI6IFRleHR1cmUuTkVBUkVTVFxuICAgICAgICB9KSxcblxuICAgICAgICBfZnVsbFF1YWRQYXNzOiBuZXcgRnVsbFF1YWRQYXNzKHtcbiAgICAgICAgICAgIGJsZW5kV2l0aFByZXZpb3VzOiB0cnVlXG4gICAgICAgIH0pLFxuXG4gICAgICAgIF9kaXJlY3Rpb25hbExpZ2h0TWF0OiBjcmVhdGVMaWdodFBhc3NNYXQoZGlyZWN0aW9uYWxMaWdodFNoYWRlciksXG5cbiAgICAgICAgX2FtYmllbnRNYXQ6IGNyZWF0ZUxpZ2h0UGFzc01hdChuZXcgU2hhZGVyKFxuICAgICAgICAgICAgZnVsbFF1YWRWZXJ0ZXgsIFNoYWRlci5zb3VyY2UoJ2NsYXkuZGVmZXJyZWQuYW1iaWVudF9saWdodCcpXG4gICAgICAgICkpLFxuICAgICAgICBfYW1iaWVudFNITWF0OiBjcmVhdGVMaWdodFBhc3NNYXQobmV3IFNoYWRlcihcbiAgICAgICAgICAgIGZ1bGxRdWFkVmVydGV4LCBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmFtYmllbnRfc2hfbGlnaHQnKVxuICAgICAgICApKSxcbiAgICAgICAgX2FtYmllbnRDdWJlbWFwTWF0OiBjcmVhdGVMaWdodFBhc3NNYXQobmV3IFNoYWRlcihcbiAgICAgICAgICAgIGZ1bGxRdWFkVmVydGV4LCBTaGFkZXIuc291cmNlKCdjbGF5LmRlZmVycmVkLmFtYmllbnRfY3ViZW1hcF9saWdodCcpXG4gICAgICAgICkpLFxuXG4gICAgICAgIF9zcG90TGlnaHRTaGFkZXI6IGNyZWF0ZVZvbHVtZVNoYWRlcignc3BvdF9saWdodCcpLFxuICAgICAgICBfcG9pbnRMaWdodFNoYWRlcjogY3JlYXRlVm9sdW1lU2hhZGVyKCdwb2ludF9saWdodCcpLFxuXG4gICAgICAgIF9zcGhlcmVMaWdodFNoYWRlcjogY3JlYXRlVm9sdW1lU2hhZGVyKCdzcGhlcmVfbGlnaHQnKSxcbiAgICAgICAgX3R1YmVMaWdodFNoYWRlcjogY3JlYXRlVm9sdW1lU2hhZGVyKCd0dWJlX2xpZ2h0JyksXG5cbiAgICAgICAgX2xpZ2h0U3BoZXJlR2VvOiBuZXcgU3BoZXJlR2VvKHtcbiAgICAgICAgICAgIHdpZHRoU2VnbWVudHM6IDEwLFxuICAgICAgICAgICAgaGVpZ2h0U2VnZW1lbnRzOiAxMFxuICAgICAgICB9KSxcblxuICAgICAgICBfbGlnaHRDb25lR2VvOiBjb25lR2VvLFxuXG4gICAgICAgIF9saWdodEN5bGluZGVyR2VvOiBjeWxpbmRlckdlbyxcblxuICAgICAgICBfb3V0cHV0UGFzczogbmV3IEZ1bGxRdWFkUGFzcyh7XG4gICAgICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS5jb21wb3NpdG9yLm91dHB1dCcpXG4gICAgICAgIH0pXG4gICAgfTtcbn0sIC8qKiBAbGVuZHMgY2xheS5kZWZlcnJlZC5SZW5kZXJlciMgKi8ge1xuICAgIC8qKlxuICAgICAqIERvIHJlbmRlclxuICAgICAqIEBwYXJhbSB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkuU2NlbmV9IHNjZW5lXG4gICAgICogQHBhcmFtIHtjbGF5LkNhbWVyYX0gY2FtZXJhXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMucmVuZGVyVG9UYXJnZXQgPSBmYWxzZV0gSWYgbm90IG91cHV0IGFuZCByZW5kZXIgdG8gdGhlIHRhcmdldCB0ZXh0dXJlXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5ub3RVcGRhdGVTaGFkb3cgPSB0cnVlXSBJZiBub3QgdXBkYXRlIHRoZSBzaGFkb3cuXG4gICAgICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5ub3RVcGRhdGVTY2VuZSA9IHRydWVdIElmIG5vdCB1cGRhdGUgdGhlIHNjZW5lLlxuICAgICAqL1xuICAgIHJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBvcHRzKSB7XG5cbiAgICAgICAgb3B0cyA9IG9wdHMgfHwge307XG4gICAgICAgIG9wdHMucmVuZGVyVG9UYXJnZXQgPSBvcHRzLnJlbmRlclRvVGFyZ2V0IHx8IGZhbHNlO1xuICAgICAgICBvcHRzLm5vdFVwZGF0ZVNoYWRvdyA9IG9wdHMubm90VXBkYXRlU2hhZG93IHx8IGZhbHNlO1xuICAgICAgICBvcHRzLm5vdFVwZGF0ZVNjZW5lID0gb3B0cy5ub3RVcGRhdGVTY2VuZSB8fCBmYWxzZTtcblxuICAgICAgICBpZiAoIW9wdHMubm90VXBkYXRlU2NlbmUpIHtcbiAgICAgICAgICAgIHNjZW5lLnVwZGF0ZShmYWxzZSwgdHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudXBkYXRlTGlnaHRzKCk7XG4gICAgICAgIC8vIFJlbmRlciBsaXN0IHdpbGwgYmUgdXBkYXRlZCBpbiBnYnVmZmVyLlxuXG4gICAgICAgIGNhbWVyYS51cGRhdGUodHJ1ZSk7XG5cbiAgICAgICAgLy8gUEVORElORyBGb3Igc3RlcmVvIHJlbmRlcmluZ1xuICAgICAgICB2YXIgZHByID0gcmVuZGVyZXIuZ2V0RGV2aWNlUGl4ZWxSYXRpbygpO1xuICAgICAgICBpZiAodGhpcy5hdXRvUmVzaXplXG4gICAgICAgICAgICAmJiAocmVuZGVyZXIuZ2V0V2lkdGgoKSAqIGRwciAhPT0gdGhpcy5fbGlnaHRBY2N1bVRleC53aWR0aFxuICAgICAgICAgICAgfHwgcmVuZGVyZXIuZ2V0SGVpZ2h0KCkgKiBkcHIgIT09IHRoaXMuX2xpZ2h0QWNjdW1UZXguaGVpZ2h0KVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzaXplKHJlbmRlcmVyLmdldFdpZHRoKCkgKiBkcHIsIHJlbmRlcmVyLmdldEhlaWdodCgpICogZHByKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2dCdWZmZXIudXBkYXRlKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcblxuICAgICAgICAvLyBBY2N1bXVsYXRlIGxpZ2h0IGJ1ZmZlclxuICAgICAgICB0aGlzLl9hY2N1bXVsYXRlTGlnaHRCdWZmZXIocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsICFvcHRzLm5vdFVwZGF0ZVNoYWRvdyk7XG5cbiAgICAgICAgaWYgKCFvcHRzLnJlbmRlclRvVGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl9vdXRwdXRQYXNzLnNldFVuaWZvcm0oJ3RleHR1cmUnLCB0aGlzLl9saWdodEFjY3VtVGV4KTtcblxuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuICAgICAgICAgICAgLy8gdGhpcy5fZ0J1ZmZlci5yZW5kZXJEZWJ1ZyhyZW5kZXJlciwgY2FtZXJhLCAnbm9ybWFsJyk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5UZXh0dXJlMkR9XG4gICAgICovXG4gICAgZ2V0VGFyZ2V0VGV4dHVyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlnaHRBY2N1bVRleDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7Y2xheS5GcmFtZUJ1ZmZlcn1cbiAgICAgKi9cbiAgICBnZXRUYXJnZXRGcmFtZUJ1ZmZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGlnaHRBY2N1bUZyYW1lQnVmZmVyO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHtjbGF5LmRlZmVycmVkLkdCdWZmZXJ9XG4gICAgICovXG4gICAgZ2V0R0J1ZmZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlcjtcbiAgICB9LFxuXG4gICAgLy8gVE9ETyBpcyBkcHIgbmVlZGVkP1xuICAgIHNldFZpZXdwb3J0OiBmdW5jdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZHByKSB7XG4gICAgICAgIHRoaXMuX2dCdWZmZXIuc2V0Vmlld3BvcnQoeCwgeSwgd2lkdGgsIGhlaWdodCwgZHByKTtcbiAgICAgICAgdGhpcy5fbGlnaHRBY2N1bUZyYW1lQnVmZmVyLnZpZXdwb3J0ID0gdGhpcy5fZ0J1ZmZlci5nZXRWaWV3cG9ydCgpO1xuICAgIH0sXG5cbiAgICAvLyBnZXRGdWxsUXVhZExpZ2h0UGFzczogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5fZnVsbFF1YWRQYXNzO1xuICAgIC8vIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgcmVuZGVyZXIgc2l6ZS5cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAgICovXG4gICAgcmVzaXplOiBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl9saWdodEFjY3VtVGV4LndpZHRoID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2xpZ2h0QWNjdW1UZXguaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIC8vIFBFTkRJTkcgdmlld3BvcnQgP1xuICAgICAgICB0aGlzLl9nQnVmZmVyLnJlc2l6ZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9LFxuXG4gICAgX2FjY3VtdWxhdGVMaWdodEJ1ZmZlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB1cGRhdGVTaGFkb3cpIHtcbiAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIHZhciBsaWdodEFjY3VtVGV4ID0gdGhpcy5fbGlnaHRBY2N1bVRleDtcbiAgICAgICAgdmFyIGxpZ2h0QWNjdW1GcmFtZUJ1ZmZlciA9IHRoaXMuX2xpZ2h0QWNjdW1GcmFtZUJ1ZmZlcjtcblxuICAgICAgICB2YXIgZXllUG9zaXRpb24gPSBjYW1lcmEuZ2V0V29ybGRQb3NpdGlvbigpLmFycmF5O1xuXG4gICAgICAgIC8vIFVwZGF0ZSB2b2x1bWUgbWVzaGVzXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2NlbmUubGlnaHRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoIXNjZW5lLmxpZ2h0c1tpXS5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl91cGRhdGVMaWdodFByb3h5KHNjZW5lLmxpZ2h0c1tpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc2hhZG93TWFwUGFzcyA9IHRoaXMuc2hhZG93TWFwUGFzcztcbiAgICAgICAgaWYgKHNoYWRvd01hcFBhc3MgJiYgdXBkYXRlU2hhZG93KSB7XG4gICAgICAgICAgICBnbC5jbGVhckNvbG9yKDEsIDEsIDEsIDEpO1xuICAgICAgICAgICAgdGhpcy5fcHJlcGFyZUxpZ2h0U2hhZG93KHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudHJpZ2dlcignYmVmb3JlbGlnaHRhY2N1bXVsYXRlJywgcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHVwZGF0ZVNoYWRvdyk7XG5cbiAgICAgICAgbGlnaHRBY2N1bUZyYW1lQnVmZmVyLmF0dGFjaChsaWdodEFjY3VtVGV4KTtcbiAgICAgICAgbGlnaHRBY2N1bUZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB2YXIgY2xlYXJDb2xvciA9IHJlbmRlcmVyLmNsZWFyQ29sb3I7XG5cbiAgICAgICAgdmFyIHZpZXdwb3J0ID0gbGlnaHRBY2N1bUZyYW1lQnVmZmVyLnZpZXdwb3J0O1xuICAgICAgICBpZiAodmlld3BvcnQpIHtcbiAgICAgICAgICAgIHZhciBkcHIgPSB2aWV3cG9ydC5kZXZpY2VQaXhlbFJhdGlvO1xuICAgICAgICAgICAgLy8gdXNlIHNjaXNzb3IgdG8gbWFrZSBzdXJlIG9ubHkgY2xlYXIgdGhlIHZpZXdwb3J0XG4gICAgICAgICAgICBnbC5lbmFibGUoZ2wuU0NJU1NPUl9URVNUKTtcbiAgICAgICAgICAgIGdsLnNjaXNzb3Iodmlld3BvcnQueCAqIGRwciwgdmlld3BvcnQueSAqIGRwciwgdmlld3BvcnQud2lkdGggKiBkcHIsIHZpZXdwb3J0LmhlaWdodCAqIGRwcik7XG4gICAgICAgIH1cbiAgICAgICAgZ2wuY2xlYXJDb2xvcihjbGVhckNvbG9yWzBdLCBjbGVhckNvbG9yWzFdLCBjbGVhckNvbG9yWzJdLCBjbGVhckNvbG9yWzNdKTtcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG4gICAgICAgIGdsLmVuYWJsZShnbC5CTEVORCk7XG4gICAgICAgIGlmICh2aWV3cG9ydCkge1xuICAgICAgICAgICAgZ2wuZGlzYWJsZShnbC5TQ0lTU09SX1RFU1QpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdzdGFydGxpZ2h0YWNjdW11bGF0ZScsIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcblxuICAgICAgICB2YXIgdmlld1Byb2plY3Rpb25JbnYgPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KHZpZXdQcm9qZWN0aW9uSW52LCBjYW1lcmEud29ybGRUcmFuc2Zvcm0sIGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4KTtcblxuICAgICAgICB2YXIgdm9sdW1lTWVzaExpc3QgPSBbXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGxpZ2h0ID0gc2NlbmUubGlnaHRzW2ldO1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmludmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdVRwbCA9IGxpZ2h0LnVuaWZvcm1UZW1wbGF0ZXM7XG5cbiAgICAgICAgICAgIHZhciB2b2x1bWVNZXNoID0gbGlnaHQudm9sdW1lTWVzaCB8fCBsaWdodC5fX3ZvbHVtZU1lc2g7XG5cbiAgICAgICAgICAgIGlmICh2b2x1bWVNZXNoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gdm9sdW1lTWVzaC5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICAvLyBWb2x1bWUgbWVzaCB3aWxsIGFmZmVjdCB0aGUgc2NlbmUgYm91bmRpbmcgYm94IHdoZW4gcmVuZGVyaW5nXG4gICAgICAgICAgICAgICAgLy8gaWYgY2FzdFNoYWRvdyBpcyB0cnVlXG4gICAgICAgICAgICAgICAgdm9sdW1lTWVzaC5jYXN0U2hhZG93ID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICB2YXIgdW5rbm93bkxpZ2h0VHlwZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdQT0lOVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5wb2ludExpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UmFuZ2UnLCB1VHBsLnBvaW50TGlnaHRSYW5nZS52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRQb3NpdGlvbicsIHVUcGwucG9pbnRMaWdodFBvc2l0aW9uLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU1BPVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFBvc2l0aW9uJywgdVRwbC5zcG90TGlnaHRQb3NpdGlvbi52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDb2xvcicsIHVUcGwuc3BvdExpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UmFuZ2UnLCB1VHBsLnNwb3RMaWdodFJhbmdlLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodERpcmVjdGlvbicsIHVUcGwuc3BvdExpZ2h0RGlyZWN0aW9uLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCd1bWJyYUFuZ2xlQ29zaW5lJywgdVRwbC5zcG90TGlnaHRVbWJyYUFuZ2xlQ29zaW5lLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdwZW51bWJyYUFuZ2xlQ29zaW5lJywgdVRwbC5zcG90TGlnaHRQZW51bWJyYUFuZ2xlQ29zaW5lLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdmYWxsb2ZmRmFjdG9yJywgdVRwbC5zcG90TGlnaHRGYWxsb2ZmRmFjdG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU1BIRVJFX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29sb3InLCB1VHBsLnNwaGVyZUxpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UmFuZ2UnLCB1VHBsLnNwaGVyZUxpZ2h0UmFuZ2UudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UmFkaXVzJywgdVRwbC5zcGhlcmVMaWdodFJhZGl1cy52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRQb3NpdGlvbicsIHVUcGwuc3BoZXJlTGlnaHRQb3NpdGlvbi52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1RVQkVfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRDb2xvcicsIHVUcGwudHViZUxpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0UmFuZ2UnLCB1VHBsLnR1YmVMaWdodFJhbmdlLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodEV4dGVuZCcsIHVUcGwudHViZUxpZ2h0RXh0ZW5kLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFBvc2l0aW9uJywgdVRwbC50dWJlTGlnaHRQb3NpdGlvbi52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB1bmtub3duTGlnaHRUeXBlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodW5rbm93bkxpZ2h0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdleWVQb3NpdGlvbicsIGV5ZVBvc2l0aW9uKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCd2aWV3UHJvamVjdGlvbkludicsIHZpZXdQcm9qZWN0aW9uSW52LmFycmF5KTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTEnLCB0aGlzLl9nQnVmZmVyLmdldFRhcmdldFRleHR1cmUxKCkpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMicsIHRoaXMuX2dCdWZmZXIuZ2V0VGFyZ2V0VGV4dHVyZTIoKSk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUzJywgdGhpcy5fZ0J1ZmZlci5nZXRUYXJnZXRUZXh0dXJlMygpKTtcblxuICAgICAgICAgICAgICAgIHZvbHVtZU1lc2hMaXN0LnB1c2godm9sdW1lTWVzaCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHZhciBwYXNzID0gdGhpcy5fZnVsbFF1YWRQYXNzO1xuICAgICAgICAgICAgICAgIHZhciB1bmtub3duTGlnaHRUeXBlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgLy8gRnVsbCBxdWFkIGxpZ2h0XG4gICAgICAgICAgICAgICAgc3dpdGNoIChsaWdodC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FNQklFTlRfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbCA9IHRoaXMuX2FtYmllbnRNYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29sb3InLCB1VHBsLmFtYmllbnRMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQU1CSUVOVF9TSF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsID0gdGhpcy5fYW1iaWVudFNITWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5hbWJpZW50U0hMaWdodENvbG9yLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29lZmZpY2llbnRzJywgdVRwbC5hbWJpZW50U0hMaWdodENvZWZmaWNpZW50cy52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0FNQklFTlRfQ1VCRU1BUF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsID0gdGhpcy5fYW1iaWVudEN1YmVtYXBNYXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0Q29sb3InLCB1VHBsLmFtYmllbnRDdWJlbWFwTGlnaHRDb2xvci52YWx1ZShsaWdodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodEN1YmVtYXAnLCB1VHBsLmFtYmllbnRDdWJlbWFwTGlnaHRDdWJlbWFwLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ2JyZGZMb29rdXAnLCB1VHBsLmFtYmllbnRDdWJlbWFwTGlnaHRCUkRGTG9va3VwLnZhbHVlKGxpZ2h0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRElSRUNUSU9OQUxfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGhhc1NoYWRvdyA9IHNoYWRvd01hcFBhc3MgJiYgbGlnaHQuY2FzdFNoYWRvdztcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwgPSB0aGlzLl9kaXJlY3Rpb25hbExpZ2h0TWF0O1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbFtoYXNTaGFkb3cgPyAnZGVmaW5lJyA6ICd1bmRlZmluZSddKCdmcmFnbWVudCcsICdTSEFET1dNQVBfRU5BQkxFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhhc1NoYWRvdykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdTSEFET1dfQ0FTQ0FERScsIGxpZ2h0LnNoYWRvd0Nhc2NhZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcGFzcy5tYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodENvbG9yJywgdVRwbC5kaXJlY3Rpb25hbExpZ2h0Q29sb3IudmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHREaXJlY3Rpb24nLCB1VHBsLmRpcmVjdGlvbmFsTGlnaHREaXJlY3Rpb24udmFsdWUobGlnaHQpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5rb253IGxpZ2h0IHR5cGVcbiAgICAgICAgICAgICAgICAgICAgICAgIHVua25vd25MaWdodFR5cGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodW5rbm93bkxpZ2h0VHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcGFzc01hdGVyaWFsID0gcGFzcy5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnZXllUG9zaXRpb24nLCBleWVQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ3ZpZXdQcm9qZWN0aW9uSW52Jywgdmlld1Byb2plY3Rpb25JbnYuYXJyYXkpO1xuICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTEnLCB0aGlzLl9nQnVmZmVyLmdldFRhcmdldFRleHR1cmUxKCkpO1xuICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTInLCB0aGlzLl9nQnVmZmVyLmdldFRhcmdldFRleHR1cmUyKCkpO1xuICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTMnLCB0aGlzLl9nQnVmZmVyLmdldFRhcmdldFRleHR1cmUzKCkpO1xuXG4gICAgICAgICAgICAgICAgLy8gVE9ET1xuICAgICAgICAgICAgICAgIGlmIChzaGFkb3dNYXBQYXNzICYmIGxpZ2h0LmNhc3RTaGFkb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0U2hhZG93TWFwJywgbGlnaHQuX19zaGFkb3dNYXApO1xuICAgICAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRNYXRyaWNlcycsIGxpZ2h0Ll9fbGlnaHRNYXRyaWNlcyk7XG4gICAgICAgICAgICAgICAgICAgIHBhc3NNYXRlcmlhbC5zZXRVbmlmb3JtKCdzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyJywgbGlnaHQuX19jYXNjYWRlQ2xpcHNOZWFyKTtcbiAgICAgICAgICAgICAgICAgICAgcGFzc01hdGVyaWFsLnNldFVuaWZvcm0oJ3NoYWRvd0Nhc2NhZGVDbGlwc0ZhcicsIGxpZ2h0Ll9fY2FzY2FkZUNsaXBzRmFyKTtcblxuICAgICAgICAgICAgICAgICAgICBwYXNzTWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRTaGFkb3dNYXBTaXplJywgbGlnaHQuc2hhZG93UmVzb2x1dGlvbik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcGFzcy5yZW5kZXJRdWFkKHJlbmRlcmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3JlbmRlclZvbHVtZU1lc2hMaXN0KHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB2b2x1bWVNZXNoTGlzdCk7XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdsaWdodGFjY3VtdWxhdGUnLCByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSk7XG5cbiAgICAgICAgbGlnaHRBY2N1bUZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgdGhpcy50cmlnZ2VyKCdhZnRlcmxpZ2h0YWNjdW11bGF0ZScsIHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhKTtcblxuICAgIH0sXG5cbiAgICBfcHJlcGFyZUxpZ2h0U2hhZG93OiAoZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgd29ybGRWaWV3ID0gbmV3IE1hdHJpeDQoKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSkge1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNjZW5lLmxpZ2h0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBsaWdodCA9IHNjZW5lLmxpZ2h0c1tpXTtcbiAgICAgICAgICAgICAgICB2YXIgdm9sdW1lTWVzaCA9IGxpZ2h0LnZvbHVtZU1lc2ggfHwgbGlnaHQuX192b2x1bWVNZXNoO1xuICAgICAgICAgICAgICAgIGlmICghbGlnaHQuY2FzdFNoYWRvdyB8fCBsaWdodC5pbnZpc2libGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChsaWdodC50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1BPSU5UX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnU1BPVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGcnVzdHVtIGN1bGxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIE1hdHJpeDQubXVsdGlwbHkod29ybGRWaWV3LCBjYW1lcmEudmlld01hdHJpeCwgdm9sdW1lTWVzaC53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2NlbmUuaXNGcnVzdHVtQ3VsbGVkKHZvbHVtZU1lc2gsIGNhbWVyYSwgd29ybGRWaWV3LmFycmF5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9wcmVwYXJlU2luZ2xlTGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGxpZ2h0LCB2b2x1bWVNZXNoLm1hdGVyaWFsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0RJUkVDVElPTkFMX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVTaW5nbGVMaWdodFNoYWRvdyhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgbGlnaHQsIG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICBfcHJlcGFyZVNpbmdsZUxpZ2h0U2hhZG93OiBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGxpZ2h0LCBtYXRlcmlhbCkge1xuICAgICAgICBzd2l0Y2ggKGxpZ2h0LnR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ1BPSU5UX0xJR0hUJzpcbiAgICAgICAgICAgICAgICB2YXIgc2hhZG93TWFwcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93TWFwUGFzcy5yZW5kZXJQb2ludExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGxpZ2h0LCBzaGFkb3dNYXBzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFNoYWRvd01hcCcsIHNoYWRvd01hcHNbMF0pO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0U2hhZG93TWFwU2l6ZScsIGxpZ2h0LnNoYWRvd1Jlc29sdXRpb24pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnU1BPVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgdmFyIHNoYWRvd01hcHMgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgbGlnaHRNYXRyaWNlcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93TWFwUGFzcy5yZW5kZXJTcG90TGlnaHRTaGFkb3coXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlcmVyLCBzY2VuZSwgbGlnaHQsIGxpZ2h0TWF0cmljZXMsIHNoYWRvd01hcHNcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ2xpZ2h0U2hhZG93TWFwJywgc2hhZG93TWFwc1swXSk7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgnbGlnaHRNYXRyaXgnLCBsaWdodE1hdHJpY2VzWzBdKTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5zZXRVbmlmb3JtKCdsaWdodFNoYWRvd01hcFNpemUnLCBsaWdodC5zaGFkb3dSZXNvbHV0aW9uKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0RJUkVDVElPTkFMX0xJR0hUJzpcbiAgICAgICAgICAgICAgICB2YXIgc2hhZG93TWFwcyA9IFtdO1xuICAgICAgICAgICAgICAgIHZhciBsaWdodE1hdHJpY2VzID0gW107XG4gICAgICAgICAgICAgICAgdmFyIGNhc2NhZGVDbGlwcyA9IFtdO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93TWFwUGFzcy5yZW5kZXJEaXJlY3Rpb25hbExpZ2h0U2hhZG93KFxuICAgICAgICAgICAgICAgICAgICByZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgbGlnaHQsIGNhc2NhZGVDbGlwcywgbGlnaHRNYXRyaWNlcywgc2hhZG93TWFwc1xuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgdmFyIGNhc2NhZGVDbGlwc05lYXIgPSBjYXNjYWRlQ2xpcHMuc2xpY2UoKTtcbiAgICAgICAgICAgICAgICB2YXIgY2FzY2FkZUNsaXBzRmFyID0gY2FzY2FkZUNsaXBzLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgY2FzY2FkZUNsaXBzTmVhci5wb3AoKTtcbiAgICAgICAgICAgICAgICBjYXNjYWRlQ2xpcHNGYXIuc2hpZnQoKTtcblxuICAgICAgICAgICAgICAgIC8vIEl0ZXJhdGUgZnJvbSBmYXIgdG8gbmVhclxuICAgICAgICAgICAgICAgIGNhc2NhZGVDbGlwc05lYXIucmV2ZXJzZSgpO1xuICAgICAgICAgICAgICAgIGNhc2NhZGVDbGlwc0Zhci5yZXZlcnNlKCk7XG4gICAgICAgICAgICAgICAgbGlnaHRNYXRyaWNlcy5yZXZlcnNlKCk7XG5cbiAgICAgICAgICAgICAgICBsaWdodC5fX2Nhc2NhZGVDbGlwc05lYXIgPSBjYXNjYWRlQ2xpcHNOZWFyO1xuICAgICAgICAgICAgICAgIGxpZ2h0Ll9fY2FzY2FkZUNsaXBzRmFyID0gY2FzY2FkZUNsaXBzRmFyO1xuICAgICAgICAgICAgICAgIGxpZ2h0Ll9fc2hhZG93TWFwID0gc2hhZG93TWFwc1swXTtcbiAgICAgICAgICAgICAgICBsaWdodC5fX2xpZ2h0TWF0cmljZXMgPSBsaWdodE1hdHJpY2VzO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSBsaWdodCB2b2x1bWUgbWVzaFxuICAgIC8vIExpZ2h0IHZvbHVtZSBtZXNoIGlzIHJlbmRlcmVkIGluIGxpZ2h0IGFjY3VtdWxhdGUgcGFzcyBpbnN0ZWFkIG9mIGZ1bGwgcXVhZC5cbiAgICAvLyBJdCB3aWxsIHJlZHVjZSBwaXhlbHMgc2lnbmlmaWNhbnRseSB3aGVuIGxvY2FsIGxpZ2h0IGlzIHJlbGF0aXZlbHkgc21hbGwuXG4gICAgLy8gQW5kIHdlIGNhbiB1c2UgY3VzdG9tIHZvbHVtZSBtZXNoIHRvIHNoYXBlIHRoZSBsaWdodC5cbiAgICAvL1xuICAgIC8vIFNlZSBcIkRlZmVycmVkIFNoYWRpbmcgT3B0aW1pemF0aW9uc1wiIGluIEdEQzIwMTFcbiAgICBfdXBkYXRlTGlnaHRQcm94eTogZnVuY3Rpb24gKGxpZ2h0KSB7XG4gICAgICAgIHZhciB2b2x1bWVNZXNoO1xuICAgICAgICBpZiAobGlnaHQudm9sdW1lTWVzaCkge1xuICAgICAgICAgICAgdm9sdW1lTWVzaCA9IGxpZ2h0LnZvbHVtZU1lc2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGxpZ2h0LnR5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBPbmx5IGxvY2FsIGxpZ2h0IChwb2ludCBhbmQgc3BvdCkgbmVlZHMgdm9sdW1lIG1lc2guXG4gICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uYWwgYW5kIGFtYmllbnQgbGlnaHQgcmVuZGVycyBpbiBmdWxsIHF1YWRcbiAgICAgICAgICAgICAgICBjYXNlICdQT0lOVF9MSUdIVCc6XG4gICAgICAgICAgICAgICAgY2FzZSAnU1BIRVJFX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNoYWRlciA9IGxpZ2h0LnR5cGUgPT09ICdTUEhFUkVfTElHSFQnXG4gICAgICAgICAgICAgICAgICAgICAgICA/IHRoaXMuX3NwaGVyZUxpZ2h0U2hhZGVyIDogdGhpcy5fcG9pbnRMaWdodFNoYWRlcjtcbiAgICAgICAgICAgICAgICAgICAgLy8gVm9sdW1lIG1lc2ggY3JlYXRlZCBhdXRvbWF0aWNhbGx5XG4gICAgICAgICAgICAgICAgICAgIGlmICghbGlnaHQuX192b2x1bWVNZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaWdodC5fX3ZvbHVtZU1lc2ggPSBuZXcgTWVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuX2NyZWF0ZUxpZ2h0UGFzc01hdChzaGFkZXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLl9saWdodFNwaGVyZUdlbyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEaXNhYmxlIGN1bGxpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiBsaWdodCB2b2x1bWUgbWVzaCBpbnRlcnNlY3QgY2FtZXJhIG5lYXIgcGxhbmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBuZWVkIG1lc2ggaW5zaWRlIGNhbiBzdGlsbCBiZSByZW5kZXJlZFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1bGxpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2b2x1bWVNZXNoID0gbGlnaHQuX192b2x1bWVNZXNoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGxpZ2h0LnJhbmdlICsgKGxpZ2h0LnJhZGl1cyB8fCAwKTtcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lTWVzaC5zY2FsZS5zZXQociwgciwgcik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ1NQT1RfTElHSFQnOlxuICAgICAgICAgICAgICAgICAgICBsaWdodC5fX3ZvbHVtZU1lc2ggPSBsaWdodC5fX3ZvbHVtZU1lc2ggfHwgbmV3IE1lc2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMuX2NyZWF0ZUxpZ2h0UGFzc01hdCh0aGlzLl9zcG90TGlnaHRTaGFkZXIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHRoaXMuX2xpZ2h0Q29uZUdlbyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1bGxpbmc6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2b2x1bWVNZXNoID0gbGlnaHQuX192b2x1bWVNZXNoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgYXNwZWN0ID0gTWF0aC50YW4obGlnaHQucGVudW1icmFBbmdsZSAqIE1hdGguUEkgLyAxODApO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmFuZ2UgPSBsaWdodC5yYW5nZTtcbiAgICAgICAgICAgICAgICAgICAgdm9sdW1lTWVzaC5zY2FsZS5zZXQoYXNwZWN0ICogcmFuZ2UsIGFzcGVjdCAqIHJhbmdlLCByYW5nZSAvIDIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdUVUJFX0xJR0hUJzpcbiAgICAgICAgICAgICAgICAgICAgbGlnaHQuX192b2x1bWVNZXNoID0gbGlnaHQuX192b2x1bWVNZXNoIHx8IG5ldyBNZXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsOiB0aGlzLl9jcmVhdGVMaWdodFBhc3NNYXQodGhpcy5fdHViZUxpZ2h0U2hhZGVyKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5OiB0aGlzLl9saWdodEN5bGluZGVyR2VvLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VsbGluZzogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHZvbHVtZU1lc2ggPSBsaWdodC5fX3ZvbHVtZU1lc2g7XG4gICAgICAgICAgICAgICAgICAgIHZhciByYW5nZSA9IGxpZ2h0LnJhbmdlO1xuICAgICAgICAgICAgICAgICAgICB2b2x1bWVNZXNoLnNjYWxlLnNldChsaWdodC5sZW5ndGggLyAyICsgcmFuZ2UsIHJhbmdlLCByYW5nZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2b2x1bWVNZXNoKSB7XG4gICAgICAgICAgICB2b2x1bWVNZXNoLnVwZGF0ZSgpO1xuICAgICAgICAgICAgLy8gQXBwbHkgbGlnaHQgdHJhbnNmb3JtXG4gICAgICAgICAgICBNYXRyaXg0Lm11bHRpcGx5KHZvbHVtZU1lc2gud29ybGRUcmFuc2Zvcm0sIGxpZ2h0LndvcmxkVHJhbnNmb3JtLCB2b2x1bWVNZXNoLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHZhciBoYXNTaGFkb3cgPSB0aGlzLnNoYWRvd01hcFBhc3MgJiYgbGlnaHQuY2FzdFNoYWRvdztcbiAgICAgICAgICAgIHZvbHVtZU1lc2gubWF0ZXJpYWxbaGFzU2hhZG93ID8gJ2RlZmluZScgOiAndW5kZWZpbmUnXSgnZnJhZ21lbnQnLCAnU0hBRE9XTUFQX0VOQUJMRUQnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfcmVuZGVyVm9sdW1lTWVzaExpc3Q6IChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciB3b3JsZFZpZXcgPSBuZXcgTWF0cml4NCgpO1xuICAgICAgICB2YXIgcHJlWk1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LnByZXoudmVydGV4JyksIFNoYWRlci5zb3VyY2UoJ2NsYXkucHJlei5mcmFnbWVudCcpKVxuICAgICAgICB9KTtcbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJlWk1hdGVyaWFsKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByZVpNYXRlcmlhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCB2b2x1bWVNZXNoTGlzdCkge1xuICAgICAgICAgICAgdmFyIGdsID0gcmVuZGVyZXIuZ2w7XG5cbiAgICAgICAgICAgIGdsLmRlcHRoRnVuYyhnbC5MRVFVQUwpO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZvbHVtZU1lc2hMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHZvbHVtZU1lc2ggPSB2b2x1bWVNZXNoTGlzdFtpXTtcblxuICAgICAgICAgICAgICAgIC8vIEZydXN0dW0gY3VsbGluZ1xuICAgICAgICAgICAgICAgIE1hdHJpeDQubXVsdGlwbHkod29ybGRWaWV3LCBjYW1lcmEudmlld01hdHJpeCwgdm9sdW1lTWVzaC53b3JsZFRyYW5zZm9ybSk7XG4gICAgICAgICAgICAgICAgaWYgKHNjZW5lLmlzRnJ1c3R1bUN1bGxlZCh2b2x1bWVNZXNoLCBjYW1lcmEsIHdvcmxkVmlldy5hcnJheSkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gVXNlIHByZXogdG8gYXZvaWQgb25lIHBpeGVsIHJlbmRlcmVkIHR3aWNlXG4gICAgICAgICAgICAgICAgZ2wuY29sb3JNYXNrKGZhbHNlLCBmYWxzZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICBnbC5kZXB0aE1hc2sodHJ1ZSk7XG4gICAgICAgICAgICAgICAgLy8gZGVwdGhNYXNrIG11c3QgYmUgZW5hYmxlZCBiZWZvcmUgY2xlYXIgREVQVEhfQlVGRkVSXG4gICAgICAgICAgICAgICAgZ2wuY2xlYXIoZ2wuREVQVEhfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKFt2b2x1bWVNZXNoXSwgY2FtZXJhLCB7XG4gICAgICAgICAgICAgICAgICAgIGdldE1hdGVyaWFsOiBnZXRQcmVaTWF0ZXJpYWxcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFJlbmRlciBsaWdodFxuICAgICAgICAgICAgICAgIGdsLmNvbG9yTWFzayh0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcblxuICAgICAgICAgICAgICAgIHZvbHVtZU1lc2gubWF0ZXJpYWwuZGVwdGhNYXNrID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZW5kZXJlci5yZW5kZXJQYXNzKFt2b2x1bWVNZXNoXSwgY2FtZXJhKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ2wuZGVwdGhGdW5jKGdsLkxFU1MpO1xuICAgICAgICB9O1xuICAgIH0pKCksXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICB0aGlzLl9nQnVmZmVyLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX2xpZ2h0QWNjdW1GcmFtZUJ1ZmZlci5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fbGlnaHRBY2N1bVRleC5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLl9saWdodENvbmVHZW8uZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2xpZ2h0Q3lsaW5kZXJHZW8uZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX2xpZ2h0U3BoZXJlR2VvLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuX2Z1bGxRdWFkUGFzcy5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0UGFzcy5kaXNwb3NlKHJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLl9kaXJlY3Rpb25hbExpZ2h0TWF0LmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgICAgIHRoaXMuc2hhZG93TWFwUGFzcy5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB9XG59KTtcblxuZXhwb3J0IGRlZmF1bHQgRGVmZXJyZWRSZW5kZXJlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZWZlcnJlZC9SZW5kZXJlci5qc1xuLy8gbW9kdWxlIGlkID0gMTU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///159\n");

/***/ }),
/* 160 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.light_volume.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n gl_Position = worldViewProjection * vec4(position, 1.0);\\n v_Position = position;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2xpZ2h0dm9sdW1lLmdsc2wuanM/OGI5OSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5saWdodF92b2x1bWUudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlld1Byb2plY3Rpb24gOiBXT1JMRFZJRVdQUk9KRUNUSU9OO1xcbmF0dHJpYnV0ZSB2ZWMzIHBvc2l0aW9uIDogUE9TSVRJT047XFxudmFyeWluZyB2ZWMzIHZfUG9zaXRpb247XFxudm9pZCBtYWluKClcXG57XFxuIGdsX1Bvc2l0aW9uID0gd29ybGRWaWV3UHJvamVjdGlvbiAqIHZlYzQocG9zaXRpb24sIDEuMCk7XFxuIHZfUG9zaXRpb24gPSBwb3NpdGlvbjtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvbGlnaHR2b2x1bWUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///160\n");

/***/ }),
/* 161 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.spot_light\\n@import clay.deferred.chunk.light_head\\n@import clay.deferred.chunk.light_equation\\n@import clay.util.calculate_attenuation\\nuniform vec3 lightPosition;\\nuniform vec3 lightDirection;\\nuniform vec3 lightColor;\\nuniform float umbraAngleCosine;\\nuniform float penumbraAngleCosine;\\nuniform float lightRange;\\nuniform float falloffFactor;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform sampler2D lightShadowMap;\\nuniform mat4 lightMatrix;\\nuniform float lightShadowMapSize;\\n#endif\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n L /= dist;\\n float attenuation = lightAttenuation(dist, lightRange);\\n float c = dot(-normalize(lightDirection), L);\\n float falloff = clamp((c - umbraAngleCosine) / (penumbraAngleCosine - umbraAngleCosine), 0.0, 1.0);\\n falloff = pow(falloff, falloffFactor);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n gl_FragColor.rgb = (1.0 - falloff) * attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = computeShadowContrib(\\n lightShadowMap, lightMatrix, position, lightShadowMapSize\\n );\\n gl_FragColor.rgb *= shadowContrib;\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3Nwb3QuZ2xzbC5qcz81MzlhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLnNwb3RfbGlnaHRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9lcXVhdGlvblxcbkBpbXBvcnQgY2xheS51dGlsLmNhbGN1bGF0ZV9hdHRlbnVhdGlvblxcbnVuaWZvcm0gdmVjMyBsaWdodFBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMyBsaWdodERpcmVjdGlvbjtcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIGZsb2F0IHVtYnJhQW5nbGVDb3NpbmU7XFxudW5pZm9ybSBmbG9hdCBwZW51bWJyYUFuZ2xlQ29zaW5lO1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRSYW5nZTtcXG51bmlmb3JtIGZsb2F0IGZhbGxvZmZGYWN0b3I7XFxudW5pZm9ybSB2ZWMzIGV5ZVBvc2l0aW9uO1xcbiNpZmRlZiBTSEFET1dNQVBfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIGxpZ2h0U2hhZG93TWFwO1xcbnVuaWZvcm0gbWF0NCBsaWdodE1hdHJpeDtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0U2hhZG93TWFwU2l6ZTtcXG4jZW5kaWZcXG5AaW1wb3J0IGNsYXkucGx1Z2luLnNoYWRvd19tYXBfY29tbW9uXFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gdmVjMyBMID0gbGlnaHRQb3NpdGlvbiAtIHBvc2l0aW9uO1xcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zaXRpb24gLSBwb3NpdGlvbik7XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoTCk7XFxuIEwgLz0gZGlzdDtcXG4gZmxvYXQgYXR0ZW51YXRpb24gPSBsaWdodEF0dGVudWF0aW9uKGRpc3QsIGxpZ2h0UmFuZ2UpO1xcbiBmbG9hdCBjID0gZG90KC1ub3JtYWxpemUobGlnaHREaXJlY3Rpb24pLCBMKTtcXG4gZmxvYXQgZmFsbG9mZiA9IGNsYW1wKChjIC0gdW1icmFBbmdsZUNvc2luZSkgLyAocGVudW1icmFBbmdsZUNvc2luZSAtIHVtYnJhQW5nbGVDb3NpbmUpLCAwLjAsIDEuMCk7XFxuIGZhbGxvZmYgPSBwb3coZmFsbG9mZiwgZmFsbG9mZkZhY3Rvcik7XFxuIHZlYzMgSCA9IG5vcm1hbGl6ZShMICsgVik7XFxuIGZsb2F0IG5kbCA9IGNsYW1wKGRvdChOLCBMKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBuZGggPSBjbGFtcChkb3QoTiwgSCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmR2ID0gY2xhbXAoZG90KE4sIFYpLCAwLjAsIDEuMCk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSAoMS4wIC0gZmFsbG9mZikgKiBhdHRlbnVhdGlvbiAqIGxpZ2h0RXF1YXRpb24oXFxuIGxpZ2h0Q29sb3IsIGRpZmZ1c2VDb2xvciwgc3BlY3VsYXJDb2xvciwgbmRsLCBuZGgsIG5kdiwgZ2xvc3NpbmVzc1xcbiApO1xcbiNpZmRlZiBTSEFET1dNQVBfRU5BQkxFRFxcbiBmbG9hdCBzaGFkb3dDb250cmliID0gY29tcHV0ZVNoYWRvd0NvbnRyaWIoXFxuIGxpZ2h0U2hhZG93TWFwLCBsaWdodE1hdHJpeCwgcG9zaXRpb24sIGxpZ2h0U2hhZG93TWFwU2l6ZVxcbiApO1xcbiBnbF9GcmFnQ29sb3IucmdiICo9IHNoYWRvd0NvbnRyaWI7XFxuI2VuZGlmXFxuIGdsX0ZyYWdDb2xvci5hID0gMS4wO1xcbn1cXG5AZW5kXFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvc2hhZGVyL3NvdXJjZS9kZWZlcnJlZC9zcG90Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE2MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///161\n");

/***/ }),
/* 162 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.directional_light\\n@import clay.deferred.chunk.light_head\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightDirection;\\nuniform vec3 lightColor;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform sampler2D lightShadowMap;\\nuniform float lightShadowMapSize;\\nuniform mat4 lightMatrices[SHADOW_CASCADE];\\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE];\\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE];\\n#endif\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = -normalize(lightDirection);\\n vec3 V = normalize(eyePosition - position);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n gl_FragColor.rgb = lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = 1.0;\\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\\n if (\\n z >= shadowCascadeClipsNear[_idx_] &&\\n z <= shadowCascadeClipsFar[_idx_]\\n ) {\\n shadowContrib = computeShadowContrib(\\n lightShadowMap, lightMatrices[_idx_], position, lightShadowMapSize,\\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\\n );\\n }\\n }}\\n gl_FragColor.rgb *= shadowContrib;\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2RpcmVjdGlvbmFsLmdsc2wuanM/OTliNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5kaXJlY3Rpb25hbF9saWdodFxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9oZWFkXFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2VxdWF0aW9uXFxudW5pZm9ybSB2ZWMzIGxpZ2h0RGlyZWN0aW9uO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gdmVjMyBleWVQb3NpdGlvbjtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXIyRCBsaWdodFNoYWRvd01hcDtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0U2hhZG93TWFwU2l6ZTtcXG51bmlmb3JtIG1hdDQgbGlnaHRNYXRyaWNlc1tTSEFET1dfQ0FTQ0FERV07XFxudW5pZm9ybSBmbG9hdCBzaGFkb3dDYXNjYWRlQ2xpcHNOZWFyW1NIQURPV19DQVNDQURFXTtcXG51bmlmb3JtIGZsb2F0IHNoYWRvd0Nhc2NhZGVDbGlwc0ZhcltTSEFET1dfQ0FTQ0FERV07XFxuI2VuZGlmXFxuQGltcG9ydCBjbGF5LnBsdWdpbi5zaGFkb3dfbWFwX2NvbW1vblxcbnZvaWQgbWFpbigpXFxue1xcbiBAaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsuZ2J1ZmZlcl9yZWFkXFxuIHZlYzMgTCA9IC1ub3JtYWxpemUobGlnaHREaXJlY3Rpb24pO1xcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zaXRpb24gLSBwb3NpdGlvbik7XFxuIHZlYzMgSCA9IG5vcm1hbGl6ZShMICsgVik7XFxuIGZsb2F0IG5kbCA9IGNsYW1wKGRvdChOLCBMKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBuZGggPSBjbGFtcChkb3QoTiwgSCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmR2ID0gY2xhbXAoZG90KE4sIFYpLCAwLjAsIDEuMCk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBsaWdodEVxdWF0aW9uKFxcbiBsaWdodENvbG9yLCBkaWZmdXNlQ29sb3IsIHNwZWN1bGFyQ29sb3IsIG5kbCwgbmRoLCBuZHYsIGdsb3NzaW5lc3NcXG4gKTtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG4gZmxvYXQgc2hhZG93Q29udHJpYiA9IDEuMDtcXG4gZm9yIChpbnQgX2lkeF8gPSAwOyBfaWR4XyA8IFNIQURPV19DQVNDQURFOyBfaWR4XysrKSB7e1xcbiBpZiAoXFxuIHogPj0gc2hhZG93Q2FzY2FkZUNsaXBzTmVhcltfaWR4X10gJiZcXG4geiA8PSBzaGFkb3dDYXNjYWRlQ2xpcHNGYXJbX2lkeF9dXFxuICkge1xcbiBzaGFkb3dDb250cmliID0gY29tcHV0ZVNoYWRvd0NvbnRyaWIoXFxuIGxpZ2h0U2hhZG93TWFwLCBsaWdodE1hdHJpY2VzW19pZHhfXSwgcG9zaXRpb24sIGxpZ2h0U2hhZG93TWFwU2l6ZSxcXG4gdmVjMigxLjAgLyBmbG9hdChTSEFET1dfQ0FTQ0FERSksIDEuMCksXFxuIHZlYzIoZmxvYXQoX2lkeF8pIC8gZmxvYXQoU0hBRE9XX0NBU0NBREUpLCAwLjApXFxuICk7XFxuIH1cXG4gfX1cXG4gZ2xfRnJhZ0NvbG9yLnJnYiAqPSBzaGFkb3dDb250cmliO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFxcblwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvZGlyZWN0aW9uYWwuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///162\n");

/***/ }),
/* 163 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_light\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture3;\\nuniform vec3 lightColor;\\nuniform vec2 windowSize: WINDOW_SIZE;\\nvoid main()\\n{\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n vec3 albedo = texture2D(gBufferTexture3, uv).rgb;\\n gl_FragColor.rgb = lightColor * albedo;\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2FtYmllbnQuZ2xzbC5qcz8xNTMzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLmFtYmllbnRfbGlnaHRcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTE7XFxudW5pZm9ybSBzYW1wbGVyMkQgZ0J1ZmZlclRleHR1cmUzO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gdmVjMiB3aW5kb3dTaXplOiBXSU5ET1dfU0laRTtcXG52b2lkIG1haW4oKVxcbntcXG4gdmVjMiB1diA9IGdsX0ZyYWdDb29yZC54eSAvIHdpbmRvd1NpemU7XFxuIHZlYzQgdGV4ZWwxID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMSwgdXYpO1xcbiBpZiAoZG90KHRleGVsMS5yZ2IsIHZlYzMoMS4wKSkgPT0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gdmVjMyBhbGJlZG8gPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUzLCB1dikucmdiO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRDb2xvciAqIGFsYmVkbztcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2FtYmllbnQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTYzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///163\n");

/***/ }),
/* 164 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_sh_light\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture3;\\nuniform vec3 lightColor;\\nuniform vec3 lightCoefficients[9];\\nuniform vec2 windowSize: WINDOW_SIZE;\\nvec3 calcAmbientSHLight(vec3 N) {\\n return lightCoefficients[0]\\n + lightCoefficients[1] * N.x\\n + lightCoefficients[2] * N.y\\n + lightCoefficients[3] * N.z\\n + lightCoefficients[4] * N.x * N.z\\n + lightCoefficients[5] * N.z * N.y\\n + lightCoefficients[6] * N.y * N.x\\n + lightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\\n + lightCoefficients[8] * (N.x * N.x - N.y * N.y);\\n}\\nvoid main()\\n{\\n vec2 uv = gl_FragCoord.xy / windowSize;\\n vec4 texel1 = texture2D(gBufferTexture1, uv);\\n if (dot(texel1.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n vec3 N = texel1.rgb * 2.0 - 1.0;\\n vec3 albedo = texture2D(gBufferTexture3, uv).rgb;\\n gl_FragColor.rgb = lightColor * albedo * calcAmbientSHLight(N);\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2FtYmllbnRzaC5nbHNsLmpzPzI5N2IiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQuYW1iaWVudF9zaF9saWdodFxcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTM7XFxudW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7XFxudW5pZm9ybSB2ZWMzIGxpZ2h0Q29lZmZpY2llbnRzWzldO1xcbnVuaWZvcm0gdmVjMiB3aW5kb3dTaXplOiBXSU5ET1dfU0laRTtcXG52ZWMzIGNhbGNBbWJpZW50U0hMaWdodCh2ZWMzIE4pIHtcXG4gcmV0dXJuIGxpZ2h0Q29lZmZpY2llbnRzWzBdXFxuICsgbGlnaHRDb2VmZmljaWVudHNbMV0gKiBOLnhcXG4gKyBsaWdodENvZWZmaWNpZW50c1syXSAqIE4ueVxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzNdICogTi56XFxuICsgbGlnaHRDb2VmZmljaWVudHNbNF0gKiBOLnggKiBOLnpcXG4gKyBsaWdodENvZWZmaWNpZW50c1s1XSAqIE4ueiAqIE4ueVxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzZdICogTi55ICogTi54XFxuICsgbGlnaHRDb2VmZmljaWVudHNbN10gKiAoMy4wICogTi56ICogTi56IC0gMS4wKVxcbiArIGxpZ2h0Q29lZmZpY2llbnRzWzhdICogKE4ueCAqIE4ueCAtIE4ueSAqIE4ueSk7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIHV2ID0gZ2xfRnJhZ0Nvb3JkLnh5IC8gd2luZG93U2l6ZTtcXG4gdmVjNCB0ZXhlbDEgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUxLCB1dik7XFxuIGlmIChkb3QodGV4ZWwxLnJnYiwgdmVjMygxLjApKSA9PSAwLjApIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB2ZWMzIE4gPSB0ZXhlbDEucmdiICogMi4wIC0gMS4wO1xcbiB2ZWMzIGFsYmVkbyA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTMsIHV2KS5yZ2I7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBsaWdodENvbG9yICogYWxiZWRvICogY2FsY0FtYmllbnRTSExpZ2h0KE4pO1xcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudHNoLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///164\n");

/***/ }),
/* 165 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.ambient_cubemap_light\\n@import clay.deferred.chunk.light_head\\nuniform vec3 lightColor;\\nuniform samplerCube lightCubemap;\\nuniform sampler2D brdfLookup;\\nuniform vec3 eyePosition;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 V = normalize(eyePosition - position);\\n vec3 L = reflect(-V, N);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float rough = clamp(1.0 - glossiness, 0.0, 1.0);\\n float bias = rough * 5.0;\\n vec2 brdfParam = texture2D(brdfLookup, vec2(rough, ndv)).xy;\\n vec3 envWeight = specularColor * brdfParam.x + brdfParam.y;\\n vec3 envTexel = RGBMDecode(textureCubeLodEXT(lightCubemap, L, bias), 8.12);\\n gl_FragColor.rgb = lightColor * envTexel * envWeight;\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL2FtYmllbnRjdWJlbWFwLmdsc2wuanM/NzQwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5hbWJpZW50X2N1YmVtYXBfbGlnaHRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gc2FtcGxlckN1YmUgbGlnaHRDdWJlbWFwO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGJyZGZMb29rdXA7XFxudW5pZm9ybSB2ZWMzIGV5ZVBvc2l0aW9uO1xcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG52b2lkIG1haW4oKVxcbntcXG4gQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmdidWZmZXJfcmVhZFxcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zaXRpb24gLSBwb3NpdGlvbik7XFxuIHZlYzMgTCA9IHJlZmxlY3QoLVYsIE4pO1xcbiBmbG9hdCBuZHYgPSBjbGFtcChkb3QoTiwgViksIDAuMCwgMS4wKTtcXG4gZmxvYXQgcm91Z2ggPSBjbGFtcCgxLjAgLSBnbG9zc2luZXNzLCAwLjAsIDEuMCk7XFxuIGZsb2F0IGJpYXMgPSByb3VnaCAqIDUuMDtcXG4gdmVjMiBicmRmUGFyYW0gPSB0ZXh0dXJlMkQoYnJkZkxvb2t1cCwgdmVjMihyb3VnaCwgbmR2KSkueHk7XFxuIHZlYzMgZW52V2VpZ2h0ID0gc3BlY3VsYXJDb2xvciAqIGJyZGZQYXJhbS54ICsgYnJkZlBhcmFtLnk7XFxuIHZlYzMgZW52VGV4ZWwgPSBSR0JNRGVjb2RlKHRleHR1cmVDdWJlTG9kRVhUKGxpZ2h0Q3ViZW1hcCwgTCwgYmlhcyksIDguMTIpO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRDb2xvciAqIGVudlRleGVsICogZW52V2VpZ2h0O1xcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvYW1iaWVudGN1YmVtYXAuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTY1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///165\n");

/***/ }),
/* 166 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.point_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform vec3 eyePosition;\\n#ifdef SHADOWMAP_ENABLED\\nuniform samplerCube lightShadowMap;\\nuniform float lightShadowMapSize;\\n#endif\\nvarying vec3 v_Position;\\n@import clay.plugin.shadow_map_common\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float attenuation = lightAttenuation(dist, lightRange);\\n gl_FragColor.rgb = attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n#ifdef SHADOWMAP_ENABLED\\n float shadowContrib = computeShadowContribOmni(\\n lightShadowMap, -L * dist, lightRange\\n );\\n gl_FragColor.rgb *= clamp(shadowContrib, 0.0, 1.0);\\n#endif\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3BvaW50Lmdsc2wuanM/OGMzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5kZWZlcnJlZC5wb2ludF9saWdodFxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9oZWFkXFxuQGltcG9ydCBjbGF5LnV0aWwuY2FsY3VsYXRlX2F0dGVudWF0aW9uXFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2VxdWF0aW9uXFxudW5pZm9ybSB2ZWMzIGxpZ2h0UG9zaXRpb247XFxudW5pZm9ybSB2ZWMzIGxpZ2h0Q29sb3I7XFxudW5pZm9ybSBmbG9hdCBsaWdodFJhbmdlO1xcbnVuaWZvcm0gdmVjMyBleWVQb3NpdGlvbjtcXG4jaWZkZWYgU0hBRE9XTUFQX0VOQUJMRURcXG51bmlmb3JtIHNhbXBsZXJDdWJlIGxpZ2h0U2hhZG93TWFwO1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRTaGFkb3dNYXBTaXplO1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uO1xcbkBpbXBvcnQgY2xheS5wbHVnaW4uc2hhZG93X21hcF9jb21tb25cXG52b2lkIG1haW4oKVxcbntcXG4gQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmdidWZmZXJfcmVhZFxcbiB2ZWMzIEwgPSBsaWdodFBvc2l0aW9uIC0gcG9zaXRpb247XFxuIHZlYzMgViA9IG5vcm1hbGl6ZShleWVQb3NpdGlvbiAtIHBvc2l0aW9uKTtcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChMKTtcXG4gTCAvPSBkaXN0O1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBhdHRlbnVhdGlvbiA9IGxpZ2h0QXR0ZW51YXRpb24oZGlzdCwgbGlnaHRSYW5nZSk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBhdHRlbnVhdGlvbiAqIGxpZ2h0RXF1YXRpb24oXFxuIGxpZ2h0Q29sb3IsIGRpZmZ1c2VDb2xvciwgc3BlY3VsYXJDb2xvciwgbmRsLCBuZGgsIG5kdiwgZ2xvc3NpbmVzc1xcbiApO1xcbiNpZmRlZiBTSEFET1dNQVBfRU5BQkxFRFxcbiBmbG9hdCBzaGFkb3dDb250cmliID0gY29tcHV0ZVNoYWRvd0NvbnRyaWJPbW5pKFxcbiBsaWdodFNoYWRvd01hcCwgLUwgKiBkaXN0LCBsaWdodFJhbmdlXFxuICk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgKj0gY2xhbXAoc2hhZG93Q29udHJpYiwgMC4wLCAxLjApO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvcG9pbnQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTY2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///166\n");

/***/ }),
/* 167 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.sphere_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform float lightRadius;\\nuniform vec3 eyePosition;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n float dist = length(L);\\n vec3 R = reflect(V, N);\\n float tmp = dot(L, R);\\n vec3 cToR = tmp * R - L;\\n float d = length(cToR);\\n L = L + cToR * clamp(lightRadius / d, 0.0, 1.0);\\n L = normalize(L);\\n vec3 H = normalize(L + V);\\n float ndl = clamp(dot(N, L), 0.0, 1.0);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n float attenuation = lightAttenuation(dist, lightRange);\\n gl_FragColor.rgb = lightColor * ndl * attenuation;\\n glossiness = clamp(glossiness - lightRadius / 2.0 / dist, 0.0, 1.0);\\n gl_FragColor.rgb = attenuation * lightEquation(\\n lightColor, diffuseColor, specularColor, ndl, ndh, ndv, glossiness\\n );\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3NwaGVyZS5nbHNsLmpzPzBlODciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkuZGVmZXJyZWQuc3BoZXJlX2xpZ2h0XFxuQGltcG9ydCBjbGF5LmRlZmVycmVkLmNodW5rLmxpZ2h0X2hlYWRcXG5AaW1wb3J0IGNsYXkudXRpbC5jYWxjdWxhdGVfYXR0ZW51YXRpb25cXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfZXF1YXRpb25cXG51bmlmb3JtIHZlYzMgbGlnaHRQb3NpdGlvbjtcXG51bmlmb3JtIHZlYzMgbGlnaHRDb2xvcjtcXG51bmlmb3JtIGZsb2F0IGxpZ2h0UmFuZ2U7XFxudW5pZm9ybSBmbG9hdCBsaWdodFJhZGl1cztcXG51bmlmb3JtIHZlYzMgZXllUG9zaXRpb247XFxudmFyeWluZyB2ZWMzIHZfUG9zaXRpb247XFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5nYnVmZmVyX3JlYWRcXG4gdmVjMyBMID0gbGlnaHRQb3NpdGlvbiAtIHBvc2l0aW9uO1xcbiB2ZWMzIFYgPSBub3JtYWxpemUoZXllUG9zaXRpb24gLSBwb3NpdGlvbik7XFxuIGZsb2F0IGRpc3QgPSBsZW5ndGgoTCk7XFxuIHZlYzMgUiA9IHJlZmxlY3QoViwgTik7XFxuIGZsb2F0IHRtcCA9IGRvdChMLCBSKTtcXG4gdmVjMyBjVG9SID0gdG1wICogUiAtIEw7XFxuIGZsb2F0IGQgPSBsZW5ndGgoY1RvUik7XFxuIEwgPSBMICsgY1RvUiAqIGNsYW1wKGxpZ2h0UmFkaXVzIC8gZCwgMC4wLCAxLjApO1xcbiBMID0gbm9ybWFsaXplKEwpO1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGwgPSBjbGFtcChkb3QoTiwgTCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmRoID0gY2xhbXAoZG90KE4sIEgpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IG5kdiA9IGNsYW1wKGRvdChOLCBWKSwgMC4wLCAxLjApO1xcbiBmbG9hdCBhdHRlbnVhdGlvbiA9IGxpZ2h0QXR0ZW51YXRpb24oZGlzdCwgbGlnaHRSYW5nZSk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBsaWdodENvbG9yICogbmRsICogYXR0ZW51YXRpb247XFxuIGdsb3NzaW5lc3MgPSBjbGFtcChnbG9zc2luZXNzIC0gbGlnaHRSYWRpdXMgLyAyLjAgLyBkaXN0LCAwLjAsIDEuMCk7XFxuIGdsX0ZyYWdDb2xvci5yZ2IgPSBhdHRlbnVhdGlvbiAqIGxpZ2h0RXF1YXRpb24oXFxuIGxpZ2h0Q29sb3IsIGRpZmZ1c2VDb2xvciwgc3BlY3VsYXJDb2xvciwgbmRsLCBuZGgsIG5kdiwgZ2xvc3NpbmVzc1xcbiApO1xcbiBnbF9GcmFnQ29sb3IuYSA9IDEuMDtcXG59XFxuQGVuZFwiO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3NoYWRlci9zb3VyY2UvZGVmZXJyZWQvc3BoZXJlLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE2N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///167\n");

/***/ }),
/* 168 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.deferred.tube_light\\n@import clay.deferred.chunk.light_head\\n@import clay.util.calculate_attenuation\\n@import clay.deferred.chunk.light_equation\\nuniform vec3 lightPosition;\\nuniform vec3 lightColor;\\nuniform float lightRange;\\nuniform vec3 lightExtend;\\nuniform vec3 eyePosition;\\nvarying vec3 v_Position;\\nvoid main()\\n{\\n @import clay.deferred.chunk.gbuffer_read\\n vec3 L = lightPosition - position;\\n vec3 V = normalize(eyePosition - position);\\n vec3 R = reflect(V, N);\\n vec3 L0 = lightPosition - lightExtend - position;\\n vec3 L1 = lightPosition + lightExtend - position;\\n vec3 LD = L1 - L0;\\n float len0 = length(L0);\\n float len1 = length(L1);\\n float irra = 2.0 * clamp(dot(N, L0) / (2.0 * len0) + dot(N, L1) / (2.0 * len1), 0.0, 1.0);\\n float LDDotR = dot(R, LD);\\n float t = (LDDotR * dot(R, L0) - dot(L0, LD)) / (dot(LD, LD) - LDDotR * LDDotR);\\n t = clamp(t, 0.0, 1.0);\\n L = L0 + t * LD;\\n float dist = length(L);\\n L /= dist;\\n vec3 H = normalize(L + V);\\n float ndh = clamp(dot(N, H), 0.0, 1.0);\\n float ndv = clamp(dot(N, V), 0.0, 1.0);\\n glossiness = clamp(glossiness - 0.0 / 2.0 / dist, 0.0, 1.0);\\n gl_FragColor.rgb = lightColor * irra * lightAttenuation(dist, lightRange)\\n * (diffuseColor + D_Phong(glossiness, ndh) * F_Schlick(ndv, specularColor));\\n gl_FragColor.a = 1.0;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3R1YmUuZ2xzbC5qcz84MTc4Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LmRlZmVycmVkLnR1YmVfbGlnaHRcXG5AaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsubGlnaHRfaGVhZFxcbkBpbXBvcnQgY2xheS51dGlsLmNhbGN1bGF0ZV9hdHRlbnVhdGlvblxcbkBpbXBvcnQgY2xheS5kZWZlcnJlZC5jaHVuay5saWdodF9lcXVhdGlvblxcbnVuaWZvcm0gdmVjMyBsaWdodFBvc2l0aW9uO1xcbnVuaWZvcm0gdmVjMyBsaWdodENvbG9yO1xcbnVuaWZvcm0gZmxvYXQgbGlnaHRSYW5nZTtcXG51bmlmb3JtIHZlYzMgbGlnaHRFeHRlbmQ7XFxudW5pZm9ybSB2ZWMzIGV5ZVBvc2l0aW9uO1xcbnZhcnlpbmcgdmVjMyB2X1Bvc2l0aW9uO1xcbnZvaWQgbWFpbigpXFxue1xcbiBAaW1wb3J0IGNsYXkuZGVmZXJyZWQuY2h1bmsuZ2J1ZmZlcl9yZWFkXFxuIHZlYzMgTCA9IGxpZ2h0UG9zaXRpb24gLSBwb3NpdGlvbjtcXG4gdmVjMyBWID0gbm9ybWFsaXplKGV5ZVBvc2l0aW9uIC0gcG9zaXRpb24pO1xcbiB2ZWMzIFIgPSByZWZsZWN0KFYsIE4pO1xcbiB2ZWMzIEwwID0gbGlnaHRQb3NpdGlvbiAtIGxpZ2h0RXh0ZW5kIC0gcG9zaXRpb247XFxuIHZlYzMgTDEgPSBsaWdodFBvc2l0aW9uICsgbGlnaHRFeHRlbmQgLSBwb3NpdGlvbjtcXG4gdmVjMyBMRCA9IEwxIC0gTDA7XFxuIGZsb2F0IGxlbjAgPSBsZW5ndGgoTDApO1xcbiBmbG9hdCBsZW4xID0gbGVuZ3RoKEwxKTtcXG4gZmxvYXQgaXJyYSA9IDIuMCAqIGNsYW1wKGRvdChOLCBMMCkgLyAoMi4wICogbGVuMCkgKyBkb3QoTiwgTDEpIC8gKDIuMCAqIGxlbjEpLCAwLjAsIDEuMCk7XFxuIGZsb2F0IExERG90UiA9IGRvdChSLCBMRCk7XFxuIGZsb2F0IHQgPSAoTEREb3RSICogZG90KFIsIEwwKSAtIGRvdChMMCwgTEQpKSAvIChkb3QoTEQsIExEKSAtIExERG90UiAqIExERG90Uik7XFxuIHQgPSBjbGFtcCh0LCAwLjAsIDEuMCk7XFxuIEwgPSBMMCArIHQgKiBMRDtcXG4gZmxvYXQgZGlzdCA9IGxlbmd0aChMKTtcXG4gTCAvPSBkaXN0O1xcbiB2ZWMzIEggPSBub3JtYWxpemUoTCArIFYpO1xcbiBmbG9hdCBuZGggPSBjbGFtcChkb3QoTiwgSCksIDAuMCwgMS4wKTtcXG4gZmxvYXQgbmR2ID0gY2xhbXAoZG90KE4sIFYpLCAwLjAsIDEuMCk7XFxuIGdsb3NzaW5lc3MgPSBjbGFtcChnbG9zc2luZXNzIC0gMC4wIC8gMi4wIC8gZGlzdCwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbGlnaHRDb2xvciAqIGlycmEgKiBsaWdodEF0dGVudWF0aW9uKGRpc3QsIGxpZ2h0UmFuZ2UpXFxuICogKGRpZmZ1c2VDb2xvciArIERfUGhvbmcoZ2xvc3NpbmVzcywgbmRoKSAqIEZfU2NobGljayhuZHYsIHNwZWN1bGFyQ29sb3IpKTtcXG4gZ2xfRnJhZ0NvbG9yLmEgPSAxLjA7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9zaGFkZXIvc291cmNlL2RlZmVycmVkL3R1YmUuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTY4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///168\n");

/***/ }),
/* 169 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix__ = __webpack_require__(170);\n// DEPRECATED\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (__WEBPACK_IMPORTED_MODULE_0__glmatrix__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTY5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZXAvZ2xtYXRyaXguanM/OGM1MyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBERVBSRUNBVEVEXG5pbXBvcnQgZ2xtYXRyaXggZnJvbSAnLi4vZ2xtYXRyaXgnO1xuXG5leHBvcnQgZGVmYXVsdCBnbG1hdHJpeDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9kZXAvZ2xtYXRyaXguanNcbi8vIG1vZHVsZSBpZCA9IDE2OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///169\n");

/***/ }),
/* 170 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__vec2__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__vec4__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mat2__ = __webpack_require__(109);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__mat2d__ = __webpack_require__(110);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__mat3__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__mat4__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__quat__ = __webpack_require__(27);\n/**\n * @fileoverview gl-matrix - High performance matrix and vector operations\n * @author Brandon Jones\n * @author Colin MacKenzie IV\n * @version 2.2.2\n */\n\n/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation\n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    vec2: __WEBPACK_IMPORTED_MODULE_0__vec2__[\"a\" /* default */],\n    vec3: __WEBPACK_IMPORTED_MODULE_1__vec3__[\"a\" /* default */],\n    vec4: __WEBPACK_IMPORTED_MODULE_2__vec4__[\"a\" /* default */],\n    mat2: __WEBPACK_IMPORTED_MODULE_3__mat2__[\"a\" /* default */],\n    mat2d: __WEBPACK_IMPORTED_MODULE_4__mat2d__[\"a\" /* default */],\n    mat3: __WEBPACK_IMPORTED_MODULE_5__mat3__[\"a\" /* default */],\n    mat4: __WEBPACK_IMPORTED_MODULE_6__mat4__[\"a\" /* default */],\n    quat: __WEBPACK_IMPORTED_MODULE_7__quat__[\"a\" /* default */]\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9pbmRleC5qcz8wYTM1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGZpbGVvdmVydmlldyBnbC1tYXRyaXggLSBIaWdoIHBlcmZvcm1hbmNlIG1hdHJpeCBhbmQgdmVjdG9yIG9wZXJhdGlvbnNcbiAqIEBhdXRob3IgQnJhbmRvbiBKb25lc1xuICogQGF1dGhvciBDb2xpbiBNYWNLZW56aWUgSVZcbiAqIEB2ZXJzaW9uIDIuMi4yXG4gKi9cblxuLyogQ29weXJpZ2h0IChjKSAyMDEzLCBCcmFuZG9uIEpvbmVzLCBDb2xpbiBNYWNLZW56aWUgSVYuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5cblJlZGlzdHJpYnV0aW9uIGFuZCB1c2UgaW4gc291cmNlIGFuZCBiaW5hcnkgZm9ybXMsIHdpdGggb3Igd2l0aG91dCBtb2RpZmljYXRpb24sXG5hcmUgcGVybWl0dGVkIHByb3ZpZGVkIHRoYXQgdGhlIGZvbGxvd2luZyBjb25kaXRpb25zIGFyZSBtZXQ6XG5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgb2Ygc291cmNlIGNvZGUgbXVzdCByZXRhaW4gdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsIHRoaXNcbiAgICBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lci5cbiAgKiBSZWRpc3RyaWJ1dGlvbnMgaW4gYmluYXJ5IGZvcm0gbXVzdCByZXByb2R1Y2UgdGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UsXG4gICAgdGhpcyBsaXN0IG9mIGNvbmRpdGlvbnMgYW5kIHRoZSBmb2xsb3dpbmcgZGlzY2xhaW1lciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuICAgIGFuZC9vciBvdGhlciBtYXRlcmlhbHMgcHJvdmlkZWQgd2l0aCB0aGUgZGlzdHJpYnV0aW9uLlxuXG5USElTIFNPRlRXQVJFIElTIFBST1ZJREVEIEJZIFRIRSBDT1BZUklHSFQgSE9MREVSUyBBTkQgQ09OVFJJQlVUT1JTIFwiQVMgSVNcIiBBTkRcbkFOWSBFWFBSRVNTIE9SIElNUExJRUQgV0FSUkFOVElFUywgSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFRIRSBJTVBMSUVEXG5XQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSBBTkQgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQVJFXG5ESVNDTEFJTUVELiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQ09QWVJJR0hUIEhPTERFUiBPUiBDT05UUklCVVRPUlMgQkUgTElBQkxFIEZPUlxuQU5ZIERJUkVDVCwgSU5ESVJFQ1QsIElOQ0lERU5UQUwsIFNQRUNJQUwsIEVYRU1QTEFSWSwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTXG4oSU5DTFVESU5HLCBCVVQgTk9UIExJTUlURUQgVE8sIFBST0NVUkVNRU5UIE9GIFNVQlNUSVRVVEUgR09PRFMgT1IgU0VSVklDRVM7XG5MT1NTIE9GIFVTRSwgREFUQSwgT1IgUFJPRklUUzsgT1IgQlVTSU5FU1MgSU5URVJSVVBUSU9OKSBIT1dFVkVSIENBVVNFRCBBTkQgT05cbkFOWSBUSEVPUlkgT0YgTElBQklMSVRZLCBXSEVUSEVSIElOIENPTlRSQUNULCBTVFJJQ1QgTElBQklMSVRZLCBPUiBUT1JUXG4oSU5DTFVESU5HIE5FR0xJR0VOQ0UgT1IgT1RIRVJXSVNFKSBBUklTSU5HIElOIEFOWSBXQVkgT1VUIE9GIFRIRSBVU0UgT0YgVEhJU1xuU09GVFdBUkUsIEVWRU4gSUYgQURWSVNFRCBPRiBUSEUgUE9TU0lCSUxJVFkgT0YgU1VDSCBEQU1BR0UuICovXG5cbmltcG9ydCB2ZWMyIGZyb20gJy4vdmVjMic7XG5pbXBvcnQgdmVjMyBmcm9tICcuL3ZlYzMnO1xuaW1wb3J0IHZlYzQgZnJvbSAnLi92ZWM0JztcbmltcG9ydCBtYXQyIGZyb20gJy4vbWF0Mic7XG5pbXBvcnQgbWF0MmQgZnJvbSAnLi9tYXQyZCc7XG5pbXBvcnQgbWF0MyBmcm9tICcuL21hdDMnO1xuaW1wb3J0IG1hdDQgZnJvbSAnLi9tYXQ0JztcbmltcG9ydCBxdWF0IGZyb20gJy4vcXVhdCc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICB2ZWMyOiB2ZWMyLFxuICAgIHZlYzM6IHZlYzMsXG4gICAgdmVjNDogdmVjNCxcbiAgICBtYXQyOiBtYXQyLFxuICAgIG1hdDJkOiBtYXQyZCxcbiAgICBtYXQzOiBtYXQzLFxuICAgIG1hdDQ6IG1hdDQsXG4gICAgcXVhdDogcXVhdFxufTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9nbG1hdHJpeC9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMTcwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///170\n");

/***/ }),
/* 171 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_Cache__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__ = __webpack_require__(9);\n\n\n\n\nvar tmpBoundingBox = new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */]();\n\n\n/**\n * @constructor clay.InstancedMesh\n * @extends clay.Mesh\n */\nvar InstancedMesh = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend(function () {\n    return /** @lends clay.InstancedMesh# */ {\n\n        /**\n         * Instances array. Each object in array must have node property\n         * @type Array\n         * @example\n         *  var node = new clay.Node()\n         *  instancedMesh.instances.push({\n         *      node: node\n         *  });\n         */\n        instances: [],\n\n        instancedAttributes: {},\n\n        _attributesSymbols: []\n    };\n}, function () {\n    this._cache = new __WEBPACK_IMPORTED_MODULE_1__core_Cache__[\"a\" /* default */]();\n\n    this.createInstancedAttribute('instanceMat1', 'float', 4, 1);\n    this.createInstancedAttribute('instanceMat2', 'float', 4, 1);\n    this.createInstancedAttribute('instanceMat3', 'float', 4, 1);\n}, {\n\n    isInstancedMesh: function () { return true; },\n\n    getInstanceCount: function () {\n        return this.instances.length;\n    },\n\n    removeAttribute: function (symbol) {\n        var idx = this._attributesSymbols.indexOf(symbol);\n        if (idx >= 0) {\n            this._attributesSymbols.splice(idx, 1);\n        }\n        delete this.instancedAttributes[symbol];\n    },\n\n    createInstancedAttribute: function (symbol, type, size, divisor) {\n        if (this.instancedAttributes[symbol]) {\n            return;\n        }\n        this.instancedAttributes[symbol] = {\n            symbol: symbol,\n            type: type,\n            size: size,\n            divisor: divisor == null ? 1 : divisor,\n            value: null\n        };\n\n        this._attributesSymbols.push(symbol);\n    },\n\n    getInstancedAttributesBuffers: function (renderer) {\n\n        var cache = this._cache;\n\n        cache.use(renderer.__uid__);\n\n        var buffers = cache.get('buffers') || [];\n\n        if (cache.isDirty('dirty')) {\n            var gl = renderer.gl;\n\n            for (var i = 0; i < this._attributesSymbols.length; i++) {\n                var attr = this.instancedAttributes[this._attributesSymbols[i]];\n\n                var bufferObj = buffers[i];\n                if (!bufferObj) {\n                    bufferObj = {\n                        buffer: gl.createBuffer()\n                    };\n                    buffers[i] = bufferObj;\n                }\n                bufferObj.symbol = attr.symbol;\n                bufferObj.divisor = attr.divisor;\n                bufferObj.size = attr.size;\n                bufferObj.type = attr.type;\n\n                gl.bindBuffer(gl.ARRAY_BUFFER, bufferObj.buffer);\n                gl.bufferData(gl.ARRAY_BUFFER, attr.value, gl.DYNAMIC_DRAW);\n            }\n\n            cache.fresh('dirty');\n\n            cache.put('buffers', buffers);\n        }\n\n        return buffers;\n    },\n\n    update: function (forceUpdateWorld) {\n        __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].prototype.update.call(this, forceUpdateWorld);\n\n        var arraySize = this.getInstanceCount() * 4;\n        var instancedAttributes = this.instancedAttributes;\n\n        var instanceMat1 = instancedAttributes.instanceMat1.value;\n        var instanceMat2 = instancedAttributes.instanceMat2.value;\n        var instanceMat3 = instancedAttributes.instanceMat3.value;\n        if (!instanceMat1 || instanceMat1.length !== arraySize) {\n            instanceMat1 = instancedAttributes.instanceMat1.value = new Float32Array(arraySize);\n            instanceMat2 = instancedAttributes.instanceMat2.value = new Float32Array(arraySize);\n            instanceMat3 = instancedAttributes.instanceMat3.value = new Float32Array(arraySize);\n        }\n\n        var sourceBoundingBox = (this.skeleton && this.skeleton.boundingBox) || this.geometry.boundingBox;\n        var needUpdateBoundingBox = sourceBoundingBox != null && (this.castShadow || this.frustumCulling);\n        if (needUpdateBoundingBox && this.instances.length > 0) {\n            this.boundingBox = this.boundingBox || new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */]();\n\n            this.boundingBox.min.set(Infinity, Infinity, Infinity);\n            this.boundingBox.max.set(-Infinity, -Infinity, -Infinity);\n        }\n        else {\n            this.boundingBox = null;\n        }\n\n        for (var i = 0; i < this.instances.length; i++) {\n            var instance = this.instances[i];\n            var node = instance.node;\n\n            if (!node) {\n                throw new Error('Instance must include node');\n            }\n            var transform = node.worldTransform.array;\n            var i4 = i * 4;\n            instanceMat1[i4] = transform[0];\n            instanceMat1[i4 + 1] = transform[1];\n            instanceMat1[i4 + 2] = transform[2];\n            instanceMat1[i4 + 3] = transform[12];\n\n            instanceMat2[i4] = transform[4];\n            instanceMat2[i4 + 1] = transform[5];\n            instanceMat2[i4 + 2] = transform[6];\n            instanceMat2[i4 + 3] = transform[13];\n\n            instanceMat3[i4] = transform[8];\n            instanceMat3[i4 + 1] = transform[9];\n            instanceMat3[i4 + 2] = transform[10];\n            instanceMat3[i4 + 3] = transform[14];\n\n            // Update bounding box\n            if (needUpdateBoundingBox) {\n                tmpBoundingBox.transformFrom(sourceBoundingBox, node.worldTransform);\n                this.boundingBox.union(tmpBoundingBox, this.boundingBox);\n            }\n        }\n\n        this._cache.dirty('dirty');\n    }\n});\n\n/* unused harmony default export */ var _unused_webpack_default_export = (InstancedMesh);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9JbnN0YW5jZWRNZXNoLmpzPzc0YjIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1lc2ggZnJvbSAnLi9NZXNoJztcbmltcG9ydCBDYWNoZSBmcm9tICcuL2NvcmUvQ2FjaGUnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4vbWF0aC9Cb3VuZGluZ0JveCc7XG5cbnZhciB0bXBCb3VuZGluZ0JveCA9IG5ldyBCb3VuZGluZ0JveCgpO1xuXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuSW5zdGFuY2VkTWVzaFxuICogQGV4dGVuZHMgY2xheS5NZXNoXG4gKi9cbnZhciBJbnN0YW5jZWRNZXNoID0gTWVzaC5leHRlbmQoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkuSW5zdGFuY2VkTWVzaCMgKi8ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbnN0YW5jZXMgYXJyYXkuIEVhY2ggb2JqZWN0IGluIGFycmF5IG11c3QgaGF2ZSBub2RlIHByb3BlcnR5XG4gICAgICAgICAqIEB0eXBlIEFycmF5XG4gICAgICAgICAqIEBleGFtcGxlXG4gICAgICAgICAqICB2YXIgbm9kZSA9IG5ldyBjbGF5Lk5vZGUoKVxuICAgICAgICAgKiAgaW5zdGFuY2VkTWVzaC5pbnN0YW5jZXMucHVzaCh7XG4gICAgICAgICAqICAgICAgbm9kZTogbm9kZVxuICAgICAgICAgKiAgfSk7XG4gICAgICAgICAqL1xuICAgICAgICBpbnN0YW5jZXM6IFtdLFxuXG4gICAgICAgIGluc3RhbmNlZEF0dHJpYnV0ZXM6IHt9LFxuXG4gICAgICAgIF9hdHRyaWJ1dGVzU3ltYm9sczogW11cbiAgICB9O1xufSwgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NhY2hlID0gbmV3IENhY2hlKCk7XG5cbiAgICB0aGlzLmNyZWF0ZUluc3RhbmNlZEF0dHJpYnV0ZSgnaW5zdGFuY2VNYXQxJywgJ2Zsb2F0JywgNCwgMSk7XG4gICAgdGhpcy5jcmVhdGVJbnN0YW5jZWRBdHRyaWJ1dGUoJ2luc3RhbmNlTWF0MicsICdmbG9hdCcsIDQsIDEpO1xuICAgIHRoaXMuY3JlYXRlSW5zdGFuY2VkQXR0cmlidXRlKCdpbnN0YW5jZU1hdDMnLCAnZmxvYXQnLCA0LCAxKTtcbn0sIHtcblxuICAgIGlzSW5zdGFuY2VkTWVzaDogZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfSxcblxuICAgIGdldEluc3RhbmNlQ291bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzLmxlbmd0aDtcbiAgICB9LFxuXG4gICAgcmVtb3ZlQXR0cmlidXRlOiBmdW5jdGlvbiAoc3ltYm9sKSB7XG4gICAgICAgIHZhciBpZHggPSB0aGlzLl9hdHRyaWJ1dGVzU3ltYm9scy5pbmRleE9mKHN5bWJvbCk7XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy5fYXR0cmlidXRlc1N5bWJvbHMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHRoaXMuaW5zdGFuY2VkQXR0cmlidXRlc1tzeW1ib2xdO1xuICAgIH0sXG5cbiAgICBjcmVhdGVJbnN0YW5jZWRBdHRyaWJ1dGU6IGZ1bmN0aW9uIChzeW1ib2wsIHR5cGUsIHNpemUsIGRpdmlzb3IpIHtcbiAgICAgICAgaWYgKHRoaXMuaW5zdGFuY2VkQXR0cmlidXRlc1tzeW1ib2xdKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbnN0YW5jZWRBdHRyaWJ1dGVzW3N5bWJvbF0gPSB7XG4gICAgICAgICAgICBzeW1ib2w6IHN5bWJvbCxcbiAgICAgICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgICAgICBzaXplOiBzaXplLFxuICAgICAgICAgICAgZGl2aXNvcjogZGl2aXNvciA9PSBudWxsID8gMSA6IGRpdmlzb3IsXG4gICAgICAgICAgICB2YWx1ZTogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZXNTeW1ib2xzLnB1c2goc3ltYm9sKTtcbiAgICB9LFxuXG4gICAgZ2V0SW5zdGFuY2VkQXR0cmlidXRlc0J1ZmZlcnM6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuXG4gICAgICAgIHZhciBjYWNoZSA9IHRoaXMuX2NhY2hlO1xuXG4gICAgICAgIGNhY2hlLnVzZShyZW5kZXJlci5fX3VpZF9fKTtcblxuICAgICAgICB2YXIgYnVmZmVycyA9IGNhY2hlLmdldCgnYnVmZmVycycpIHx8IFtdO1xuXG4gICAgICAgIGlmIChjYWNoZS5pc0RpcnR5KCdkaXJ0eScpKSB7XG4gICAgICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9hdHRyaWJ1dGVzU3ltYm9scy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHZhciBhdHRyID0gdGhpcy5pbnN0YW5jZWRBdHRyaWJ1dGVzW3RoaXMuX2F0dHJpYnV0ZXNTeW1ib2xzW2ldXTtcblxuICAgICAgICAgICAgICAgIHZhciBidWZmZXJPYmogPSBidWZmZXJzW2ldO1xuICAgICAgICAgICAgICAgIGlmICghYnVmZmVyT2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1ZmZlck9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcjogZ2wuY3JlYXRlQnVmZmVyKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyc1tpXSA9IGJ1ZmZlck9iajtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnVmZmVyT2JqLnN5bWJvbCA9IGF0dHIuc3ltYm9sO1xuICAgICAgICAgICAgICAgIGJ1ZmZlck9iai5kaXZpc29yID0gYXR0ci5kaXZpc29yO1xuICAgICAgICAgICAgICAgIGJ1ZmZlck9iai5zaXplID0gYXR0ci5zaXplO1xuICAgICAgICAgICAgICAgIGJ1ZmZlck9iai50eXBlID0gYXR0ci50eXBlO1xuXG4gICAgICAgICAgICAgICAgZ2wuYmluZEJ1ZmZlcihnbC5BUlJBWV9CVUZGRVIsIGJ1ZmZlck9iai5idWZmZXIpO1xuICAgICAgICAgICAgICAgIGdsLmJ1ZmZlckRhdGEoZ2wuQVJSQVlfQlVGRkVSLCBhdHRyLnZhbHVlLCBnbC5EWU5BTUlDX0RSQVcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjYWNoZS5mcmVzaCgnZGlydHknKTtcblxuICAgICAgICAgICAgY2FjaGUucHV0KCdidWZmZXJzJywgYnVmZmVycyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYnVmZmVycztcbiAgICB9LFxuXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZm9yY2VVcGRhdGVXb3JsZCkge1xuICAgICAgICBNZXNoLnByb3RvdHlwZS51cGRhdGUuY2FsbCh0aGlzLCBmb3JjZVVwZGF0ZVdvcmxkKTtcblxuICAgICAgICB2YXIgYXJyYXlTaXplID0gdGhpcy5nZXRJbnN0YW5jZUNvdW50KCkgKiA0O1xuICAgICAgICB2YXIgaW5zdGFuY2VkQXR0cmlidXRlcyA9IHRoaXMuaW5zdGFuY2VkQXR0cmlidXRlcztcblxuICAgICAgICB2YXIgaW5zdGFuY2VNYXQxID0gaW5zdGFuY2VkQXR0cmlidXRlcy5pbnN0YW5jZU1hdDEudmFsdWU7XG4gICAgICAgIHZhciBpbnN0YW5jZU1hdDIgPSBpbnN0YW5jZWRBdHRyaWJ1dGVzLmluc3RhbmNlTWF0Mi52YWx1ZTtcbiAgICAgICAgdmFyIGluc3RhbmNlTWF0MyA9IGluc3RhbmNlZEF0dHJpYnV0ZXMuaW5zdGFuY2VNYXQzLnZhbHVlO1xuICAgICAgICBpZiAoIWluc3RhbmNlTWF0MSB8fCBpbnN0YW5jZU1hdDEubGVuZ3RoICE9PSBhcnJheVNpemUpIHtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MSA9IGluc3RhbmNlZEF0dHJpYnV0ZXMuaW5zdGFuY2VNYXQxLnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShhcnJheVNpemUpO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQyID0gaW5zdGFuY2VkQXR0cmlidXRlcy5pbnN0YW5jZU1hdDIudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGFycmF5U2l6ZSk7XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDMgPSBpbnN0YW5jZWRBdHRyaWJ1dGVzLmluc3RhbmNlTWF0My52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkoYXJyYXlTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzb3VyY2VCb3VuZGluZ0JveCA9ICh0aGlzLnNrZWxldG9uICYmIHRoaXMuc2tlbGV0b24uYm91bmRpbmdCb3gpIHx8IHRoaXMuZ2VvbWV0cnkuYm91bmRpbmdCb3g7XG4gICAgICAgIHZhciBuZWVkVXBkYXRlQm91bmRpbmdCb3ggPSBzb3VyY2VCb3VuZGluZ0JveCAhPSBudWxsICYmICh0aGlzLmNhc3RTaGFkb3cgfHwgdGhpcy5mcnVzdHVtQ3VsbGluZyk7XG4gICAgICAgIGlmIChuZWVkVXBkYXRlQm91bmRpbmdCb3ggJiYgdGhpcy5pbnN0YW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5ib3VuZGluZ0JveCA9IHRoaXMuYm91bmRpbmdCb3ggfHwgbmV3IEJvdW5kaW5nQm94KCk7XG5cbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWluLnNldChJbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5KTtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gubWF4LnNldCgtSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3ggPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmluc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5pbnN0YW5jZXNbaV07XG4gICAgICAgICAgICB2YXIgbm9kZSA9IGluc3RhbmNlLm5vZGU7XG5cbiAgICAgICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5zdGFuY2UgbXVzdCBpbmNsdWRlIG5vZGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB0cmFuc2Zvcm0gPSBub2RlLndvcmxkVHJhbnNmb3JtLmFycmF5O1xuICAgICAgICAgICAgdmFyIGk0ID0gaSAqIDQ7XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDFbaTRdID0gdHJhbnNmb3JtWzBdO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQxW2k0ICsgMV0gPSB0cmFuc2Zvcm1bMV07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDFbaTQgKyAyXSA9IHRyYW5zZm9ybVsyXTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MVtpNCArIDNdID0gdHJhbnNmb3JtWzEyXTtcblxuICAgICAgICAgICAgaW5zdGFuY2VNYXQyW2k0XSA9IHRyYW5zZm9ybVs0XTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0MltpNCArIDFdID0gdHJhbnNmb3JtWzVdO1xuICAgICAgICAgICAgaW5zdGFuY2VNYXQyW2k0ICsgMl0gPSB0cmFuc2Zvcm1bNl07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDJbaTQgKyAzXSA9IHRyYW5zZm9ybVsxM107XG5cbiAgICAgICAgICAgIGluc3RhbmNlTWF0M1tpNF0gPSB0cmFuc2Zvcm1bOF07XG4gICAgICAgICAgICBpbnN0YW5jZU1hdDNbaTQgKyAxXSA9IHRyYW5zZm9ybVs5XTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0M1tpNCArIDJdID0gdHJhbnNmb3JtWzEwXTtcbiAgICAgICAgICAgIGluc3RhbmNlTWF0M1tpNCArIDNdID0gdHJhbnNmb3JtWzE0XTtcblxuICAgICAgICAgICAgLy8gVXBkYXRlIGJvdW5kaW5nIGJveFxuICAgICAgICAgICAgaWYgKG5lZWRVcGRhdGVCb3VuZGluZ0JveCkge1xuICAgICAgICAgICAgICAgIHRtcEJvdW5kaW5nQm94LnRyYW5zZm9ybUZyb20oc291cmNlQm91bmRpbmdCb3gsIG5vZGUud29ybGRUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYm91bmRpbmdCb3gudW5pb24odG1wQm91bmRpbmdCb3gsIHRoaXMuYm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY2FjaGUuZGlydHkoJ2RpcnR5Jyk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEluc3RhbmNlZE1lc2g7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL0luc3RhbmNlZE1lc2guanNcbi8vIG1vZHVsZSBpZCA9IDE3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///171\n");

/***/ }),
/* 172 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n\n\n/**\n * @constructor clay.light.Sphere\n * @extends {clay.Light}\n */\nvar SphereLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(\n/** @lends clay.light.Sphere# */\n{\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    radius: 5\n}, {\n\n    type: 'SPHERE_LIGHT',\n\n    uniformTemplates: {\n        sphereLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n        sphereLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n        sphereLightRadius: {\n            type: '1f',\n            value: function(instance) {\n                return instance.radius;\n            }\n        },\n        sphereLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SphereLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9saWdodC9TcGhlcmUuanM/ODYxYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTGlnaHQgZnJvbSAnLi4vTGlnaHQnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LmxpZ2h0LlNwaGVyZVxuICogQGV4dGVuZHMge2NsYXkuTGlnaHR9XG4gKi9cbnZhciBTcGhlcmVMaWdodCA9IExpZ2h0LmV4dGVuZChcbi8qKiBAbGVuZHMgY2xheS5saWdodC5TcGhlcmUjICovXG57XG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYW5nZTogMTAwLFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICByYWRpdXM6IDVcbn0sIHtcblxuICAgIHR5cGU6ICdTUEhFUkVfTElHSFQnLFxuXG4gICAgdW5pZm9ybVRlbXBsYXRlczoge1xuICAgICAgICBzcGhlcmVMaWdodFBvc2l0aW9uOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLmdldFdvcmxkUG9zaXRpb24oKS5hcnJheTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BoZXJlTGlnaHRSYW5nZToge1xuICAgICAgICAgICAgdHlwZTogJzFmJyxcbiAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZS5yYW5nZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgc3BoZXJlTGlnaHRSYWRpdXM6IHtcbiAgICAgICAgICAgIHR5cGU6ICcxZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UucmFkaXVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBzcGhlcmVMaWdodENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdKmludGVuc2l0eSwgY29sb3JbMV0qaW50ZW5zaXR5LCBjb2xvclsyXSppbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFNwaGVyZUxpZ2h0O1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL2xpZ2h0L1NwaGVyZS5qc1xuLy8gbW9kdWxlIGlkID0gMTcyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///172\n");

/***/ }),
/* 173 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Light__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n\n\n\n/**\n * @constructor clay.light.Tube\n * @extends {clay.Light}\n */\nvar TubeLight = __WEBPACK_IMPORTED_MODULE_0__Light__[\"a\" /* default */].extend(\n/** @lends clay.light.Tube# */\n{\n    /**\n     * @type {number}\n     */\n    range: 100,\n\n    /**\n     * @type {number}\n     */\n    length: 10\n}, {\n\n    type: 'TUBE_LIGHT',\n\n    uniformTemplates: {\n        tubeLightPosition: {\n            type: '3f',\n            value: function(instance) {\n                return instance.getWorldPosition().array;\n            }\n        },\n\n        tubeLightExtend: {\n            type: '3f',\n            value: (function() {\n                var x = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n                return function(instance) {\n                    // Extend in x axis\n                    return x.copy(instance.worldTransform.x)\n                        .normalize().scale(instance.length / 2).array;\n                };\n            })()\n        },\n\n        tubeLightRange: {\n            type: '1f',\n            value: function(instance) {\n                return instance.range;\n            }\n        },\n\n        tubeLightColor: {\n            type: '3f',\n            value: function(instance) {\n                var color = instance.color;\n                var intensity = instance.intensity;\n                return [color[0]*intensity, color[1]*intensity, color[2]*intensity];\n            }\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TubeLight);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTczLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9saWdodC9UdWJlLmpzP2Q2MzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IExpZ2h0IGZyb20gJy4uL0xpZ2h0JztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkubGlnaHQuVHViZVxuICogQGV4dGVuZHMge2NsYXkuTGlnaHR9XG4gKi9cbnZhciBUdWJlTGlnaHQgPSBMaWdodC5leHRlbmQoXG4vKiogQGxlbmRzIGNsYXkubGlnaHQuVHViZSMgKi9cbntcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHJhbmdlOiAxMDAsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIGxlbmd0aDogMTBcbn0sIHtcblxuICAgIHR5cGU6ICdUVUJFX0xJR0hUJyxcblxuICAgIHVuaWZvcm1UZW1wbGF0ZXM6IHtcbiAgICAgICAgdHViZUxpZ2h0UG9zaXRpb246IHtcbiAgICAgICAgICAgIHR5cGU6ICczZicsXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oaW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2UuZ2V0V29ybGRQb3NpdGlvbigpLmFycmF5O1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHR1YmVMaWdodEV4dGVuZDoge1xuICAgICAgICAgICAgdHlwZTogJzNmJyxcbiAgICAgICAgICAgIHZhbHVlOiAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHggPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihpbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBFeHRlbmQgaW4geCBheGlzXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB4LmNvcHkoaW5zdGFuY2Uud29ybGRUcmFuc2Zvcm0ueClcbiAgICAgICAgICAgICAgICAgICAgICAgIC5ub3JtYWxpemUoKS5zY2FsZShpbnN0YW5jZS5sZW5ndGggLyAyKS5hcnJheTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkoKVxuICAgICAgICB9LFxuXG4gICAgICAgIHR1YmVMaWdodFJhbmdlOiB7XG4gICAgICAgICAgICB0eXBlOiAnMWYnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlLnJhbmdlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHR1YmVMaWdodENvbG9yOiB7XG4gICAgICAgICAgICB0eXBlOiAnM2YnLFxuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKGluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvbG9yID0gaW5zdGFuY2UuY29sb3I7XG4gICAgICAgICAgICAgICAgdmFyIGludGVuc2l0eSA9IGluc3RhbmNlLmludGVuc2l0eTtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2NvbG9yWzBdKmludGVuc2l0eSwgY29sb3JbMV0qaW50ZW5zaXR5LCBjb2xvclsyXSppbnRlbnNpdHldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFR1YmVMaWdodDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9saWdodC9UdWJlLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///173\n");

/***/ }),
/* 174 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__createCompositor__ = __webpack_require__(62);\n\n\n\n\n/**\n * @constructor clay.loader.FX\n * @extends clay.core.Base\n */\nvar FXLoader = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(/** @lends clay.loader.FX# */ {\n    /**\n     * @type {string}\n     */\n    rootPath: '',\n    /**\n     * @type {string}\n     */\n    textureRootPath: '',\n    /**\n     * @type {string}\n     */\n    shaderRootPath: '',\n\n    /**\n     * @type {clay.Scene}\n     */\n    scene: null,\n\n    /**\n     * @type {clay.Camera}\n     */\n    camera: null\n},\n/** @lends clay.loader.FX.prototype */\n{\n    /**\n     * @param  {string} url\n     */\n    load: function(url) {\n        var self = this;\n\n        if (!this.rootPath) {\n            this.rootPath = url.slice(0, url.lastIndexOf('/'));\n        }\n\n        __WEBPACK_IMPORTED_MODULE_1__core_vendor__[\"a\" /* default */].request.get({\n            url: url,\n            onprogress: function(percent, loaded, total) {\n                self.trigger('progress', percent, loaded, total);\n            },\n            onerror: function(e) {\n                self.trigger('error', e);\n            },\n            responseType: 'text',\n            onload: function (data) {\n                Object(__WEBPACK_IMPORTED_MODULE_2__createCompositor__[\"a\" /* default */])(JSON.parse(data), {\n                    textureRootPath: this.textureRootPath || this.rootPath,\n                    camera: this.camera,\n                    scene: this.scene\n                });\n            }\n        });\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FXLoader);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9sb2FkZXIvRlguanM/ZjVjZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IHZlbmRvciBmcm9tICcuLi9jb3JlL3ZlbmRvcic7XG5pbXBvcnQgY3JlYXRlQ29tcG9zaXRvciBmcm9tICcuLi9jcmVhdGVDb21wb3NpdG9yJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3IgY2xheS5sb2FkZXIuRlhcbiAqIEBleHRlbmRzIGNsYXkuY29yZS5CYXNlXG4gKi9cbnZhciBGWExvYWRlciA9IEJhc2UuZXh0ZW5kKC8qKiBAbGVuZHMgY2xheS5sb2FkZXIuRlgjICovIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHJvb3RQYXRoOiAnJyxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIHRleHR1cmVSb290UGF0aDogJycsXG4gICAgLyoqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBzaGFkZXJSb290UGF0aDogJycsXG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Y2xheS5TY2VuZX1cbiAgICAgKi9cbiAgICBzY2VuZTogbnVsbCxcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtjbGF5LkNhbWVyYX1cbiAgICAgKi9cbiAgICBjYW1lcmE6IG51bGxcbn0sXG4vKiogQGxlbmRzIGNsYXkubG9hZGVyLkZYLnByb3RvdHlwZSAqL1xue1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge3N0cmluZ30gdXJsXG4gICAgICovXG4gICAgbG9hZDogZnVuY3Rpb24odXJsKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBpZiAoIXRoaXMucm9vdFBhdGgpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdFBhdGggPSB1cmwuc2xpY2UoMCwgdXJsLmxhc3RJbmRleE9mKCcvJykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVuZG9yLnJlcXVlc3QuZ2V0KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgb25wcm9ncmVzczogZnVuY3Rpb24ocGVyY2VudCwgbG9hZGVkLCB0b3RhbCkge1xuICAgICAgICAgICAgICAgIHNlbGYudHJpZ2dlcigncHJvZ3Jlc3MnLCBwZXJjZW50LCBsb2FkZWQsIHRvdGFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi50cmlnZ2VyKCdlcnJvcicsIGUpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNyZWF0ZUNvbXBvc2l0b3IoSlNPTi5wYXJzZShkYXRhKSwge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0dXJlUm9vdFBhdGg6IHRoaXMudGV4dHVyZVJvb3RQYXRoIHx8IHRoaXMucm9vdFBhdGgsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYTogdGhpcy5jYW1lcmEsXG4gICAgICAgICAgICAgICAgICAgIHNjZW5lOiB0aGlzLnNjZW5lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBGWExvYWRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9sb2FkZXIvRlguanNcbi8vIG1vZHVsZSBpZCA9IDE3NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///174\n");

/***/ }),
/* 175 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__ = __webpack_require__(109);\n\n\n/**\n * @constructor\n * @alias clay.Matrix2\n */\nvar Matrix2 = function() {\n\n    /**\n     * Storage of Matrix2\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix2#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix2#\n     */\n    this._dirty = true;\n};\n\nMatrix2.prototype = {\n\n    constructor: Matrix2,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Clone a new Matrix2\n     * @return {clay.Matrix2}\n     */\n    clone: function() {\n        return (new Matrix2()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix2}\n     */\n    adjoint: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix2}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix2}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix2} a\n     * @return {clay.Matrix2}\n     */\n    mulLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix2} b\n     * @return {clay.Matrix2}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix2} a\n     * @return {clay.Matrix2}\n     */\n    multiplyLeft: function(a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix2}\n     */\n    rotate: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix2}\n     */\n    scale: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n/**\n * @param  {Matrix2} out\n * @param  {Matrix2} a\n * @return {Matrix2}\n */\nMatrix2.adjoint = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @return {clay.Matrix2}\n */\nMatrix2.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} a\n * @return {number}\n */\nMatrix2.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @return {clay.Matrix2}\n */\nMatrix2.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @return {clay.Matrix2}\n */\nMatrix2.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Matrix2} b\n * @return {clay.Matrix2}\n */\nMatrix2.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Matrix2} b\n * @return {clay.Matrix2}\n */\nMatrix2.multiply = Matrix2.mul;\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {number}   rad\n * @return {clay.Matrix2}\n */\nMatrix2.rotate = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2} out\n * @param  {clay.Matrix2} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2}\n */\nMatrix2.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @param  {Matrix2} out\n * @param  {Matrix2} a\n * @return {Matrix2}\n */\nMatrix2.transpose = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix2);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL01hdHJpeDIuanM/YzkyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWF0MiBmcm9tICcuLi9nbG1hdHJpeC9tYXQyJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5Lk1hdHJpeDJcbiAqL1xudmFyIE1hdHJpeDIgPSBmdW5jdGlvbigpIHtcblxuICAgIC8qKlxuICAgICAqIFN0b3JhZ2Ugb2YgTWF0cml4MlxuICAgICAqIEBuYW1lIGFycmF5XG4gICAgICogQHR5cGUge0Zsb2F0MzJBcnJheX1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5NYXRyaXgyI1xuICAgICAqL1xuICAgIHRoaXMuYXJyYXkgPSBtYXQyLmNyZWF0ZSgpO1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4MiNcbiAgICAgKi9cbiAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG59O1xuXG5NYXRyaXgyLnByb3RvdHlwZSA9IHtcblxuICAgIGNvbnN0cnVjdG9yOiBNYXRyaXgyLFxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvbXBvbmVudHMgZnJvbSBhcnJheVxuICAgICAqIEBwYXJhbSAge0Zsb2F0MzJBcnJheXxudW1iZXJbXX0gYXJyXG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5W2ldID0gYXJyW2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBNYXRyaXgyXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIChuZXcgTWF0cml4MigpKS5jb3B5KHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBjb3B5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDIuY29weSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBhZGp1Z2F0ZSBvZiBzZWxmLCBpbi1wbGFjZVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBhZGpvaW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0Mi5hZGpvaW50KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgbWF0cml4IGRldGVybWluYW50XG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIGRldGVybWluYW50OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG1hdDIuZGV0ZXJtaW5hbnQodGhpcy5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byBhIGlkZW50aXR5IG1hdHJpeFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBpZGVudGl0eTogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDIuaWRlbnRpdHkodGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEludmVydCBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIGludmVydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDIuaW52ZXJ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXV0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbWF0Mi5tdWwodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdWx0aXBseUxlZnRcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgbXVsTGVmdDogZnVuY3Rpb24oYSkge1xuICAgICAgICBtYXQyLm11bCh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBtdWx0aXBseTogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyLm11bHRpcGx5KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBhIGFuZCBzZWxmLCBhIGlzIG9uIHRoZSBsZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICAgICAqL1xuICAgIG11bHRpcGx5TGVmdDogZnVuY3Rpb24oYSkge1xuICAgICAgICBtYXQyLm11bHRpcGx5KHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgc2VsZiBieSBhIGdpdmVuIHJhZGlhblxuICAgICAqIEBwYXJhbSAge251bWJlcn0gICByYWRcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgcm90YXRlOiBmdW5jdGlvbihyYWQpIHtcbiAgICAgICAgbWF0Mi5yb3RhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgcmFkKTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2NhbGUgc2VsZiBieSBzXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgc1xuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24odikge1xuICAgICAgICBtYXQyLnNjYWxlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVHJhbnNwb3NlIHNlbGYsIGluLXBsYWNlLlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAgICAgKi9cbiAgICB0cmFuc3Bvc2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICBtYXQyLnRyYW5zcG9zZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgdG9TdHJpbmc6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge01hdHJpeDJ9IG91dFxuICogQHBhcmFtICB7TWF0cml4Mn0gYVxuICogQHJldHVybiB7TWF0cml4Mn1cbiAqL1xuTWF0cml4Mi5hZGpvaW50ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0Mi5hZGpvaW50KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICovXG5NYXRyaXgyLmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBtYXQyLmNvcHkob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTWF0cml4Mi5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gbWF0Mi5kZXRlcm1pbmFudChhLmFycmF5KTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAqL1xuTWF0cml4Mi5pZGVudGl0eSA9IGZ1bmN0aW9uKG91dCkge1xuICAgIG1hdDIuaWRlbnRpdHkob3V0LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gKi9cbk1hdHJpeDIuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0Mi5pbnZlcnQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4Mn1cbiAqL1xuTWF0cml4Mi5tdWwgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBtYXQyLm11bChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBiXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gKi9cbk1hdHJpeDIubXVsdGlwbHkgPSBNYXRyaXgyLm11bDtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJ9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gKi9cbk1hdHJpeDIucm90YXRlID0gZnVuY3Rpb24ob3V0LCBhLCByYWQpIHtcbiAgICBtYXQyLnJvdGF0ZShvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4Mn0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyfVxuICovXG5NYXRyaXgyLnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCB2KSB7XG4gICAgbWF0Mi5zY2FsZShvdXQuYXJyYXksIGEuYXJyYXksIHYuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtNYXRyaXgyfSBvdXRcbiAqIEBwYXJhbSAge01hdHJpeDJ9IGFcbiAqIEByZXR1cm4ge01hdHJpeDJ9XG4gKi9cbk1hdHJpeDIudHJhbnNwb3NlID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0Mi50cmFuc3Bvc2Uob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWF0cml4MjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL01hdHJpeDIuanNcbi8vIG1vZHVsZSBpZCA9IDE3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///175\n");

/***/ }),
/* 176 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__ = __webpack_require__(110);\n\n\n/**\n * @constructor\n * @alias clay.Matrix2d\n */\nvar Matrix2d = function() {\n    /**\n     * Storage of Matrix2d\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix2d#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix2d#\n     */\n    this._dirty = true;\n};\n\nMatrix2d.prototype = {\n\n    constructor: Matrix2d,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Clone a new Matrix2d\n     * @return {clay.Matrix2d}\n     */\n    clone: function() {\n        return (new Matrix2d()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix2d}\n     */\n    identity: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix2d}\n     */\n    invert: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix2d}\n     */\n    mulLeft: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(this.array, b.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix2d} b\n     * @return {clay.Matrix2d}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix2d}\n     */\n    multiplyLeft: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].multiply(this.array, b.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix2d}\n     */\n    rotate: function(rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix2d}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].scale(this.array, this.array, s.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v\n     * @param  {clay.Vector2}  v\n     * @return {clay.Matrix2d}\n     */\n    translate: function(v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix2d}\n */\nMatrix2d.copy = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} a\n * @return {number}\n */\nMatrix2d.determinant = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @return {clay.Matrix2d}\n */\nMatrix2d.identity = function(out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix2d}\n */\nMatrix2d.invert = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].invert(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Matrix2d} b\n * @return {clay.Matrix2d}\n */\nMatrix2d.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Matrix2d} b\n * @return {clay.Matrix2d}\n */\nMatrix2d.multiply = Matrix2d.mul;\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {number}   rad\n * @return {clay.Matrix2d}\n */\nMatrix2d.rotate = function(out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2d}\n */\nMatrix2d.scale = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix2d} out\n * @param  {clay.Matrix2d} a\n * @param  {clay.Vector2}  v\n * @return {clay.Matrix2d}\n */\nMatrix2d.translate = function(out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat2d__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix2d);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL01hdHJpeDJkLmpzP2EwODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hdDJkIGZyb20gJy4uL2dsbWF0cml4L21hdDJkJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5Lk1hdHJpeDJkXG4gKi9cbnZhciBNYXRyaXgyZCA9IGZ1bmN0aW9uKCkge1xuICAgIC8qKlxuICAgICAqIFN0b3JhZ2Ugb2YgTWF0cml4MmRcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4MmQjXG4gICAgICovXG4gICAgdGhpcy5hcnJheSA9IG1hdDJkLmNyZWF0ZSgpO1xuXG4gICAgLyoqXG4gICAgICogQG5hbWUgX2RpcnR5XG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4MmQjXG4gICAgICovXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xufTtcblxuTWF0cml4MmQucHJvdG90eXBlID0ge1xuXG4gICAgY29uc3RydWN0b3I6IE1hdHJpeDJkLFxuXG4gICAgLyoqXG4gICAgICogU2V0IGNvbXBvbmVudHMgZnJvbSBhcnJheVxuICAgICAqIEBwYXJhbSAge0Zsb2F0MzJBcnJheXxudW1iZXJbXX0gYXJyXG4gICAgICovXG4gICAgc2V0QXJyYXk6IGZ1bmN0aW9uIChhcnIpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5W2ldID0gYXJyW2ldO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBNYXRyaXgyZFxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgY2xvbmU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBNYXRyaXgyZCgpKS5jb3B5KHRoaXMpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDb3B5IGZyb20gYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgbWF0MmQuY29weSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIG1hdHJpeCBkZXRlcm1pbmFudFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkZXRlcm1pbmFudDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBtYXQyZC5kZXRlcm1pbmFudCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIGEgaWRlbnRpdHkgbWF0cml4XG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBpZGVudGl0eTogZnVuY3Rpb24oKSB7XG4gICAgICAgIG1hdDJkLmlkZW50aXR5KHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJbnZlcnQgc2VsZlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgaW52ZXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgbWF0MmQuaW52ZXJ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXV0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIG11bDogZnVuY3Rpb24oYikge1xuICAgICAgICBtYXQyZC5tdWwodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBtdWx0aXBseUxlZnRcbiAgICAgKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBtdWxMZWZ0OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDJkLm11bCh0aGlzLmFycmF5LCBiLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTXVsdGlwbHkgc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIG11bHRpcGx5OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDJkLm11bHRpcGx5KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBhIGFuZCBzZWxmLCBhIGlzIG9uIHRoZSBsZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gICAgICovXG4gICAgbXVsdGlwbHlMZWZ0OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIG1hdDJkLm11bHRpcGx5KHRoaXMuYXJyYXksIGIuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSb3RhdGUgc2VsZiBieSBhIGdpdmVuIHJhZGlhblxuICAgICAqIEBwYXJhbSAge251bWJlcn0gICByYWRcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIHJvdGF0ZTogZnVuY3Rpb24ocmFkKSB7XG4gICAgICAgIG1hdDJkLnJvdGF0ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCByYWQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBzZWxmIGJ5IHNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICBzXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24ocykge1xuICAgICAgICBtYXQyZC5zY2FsZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhbnNsYXRlIHNlbGYgYnkgdlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gIHZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICAgICAqL1xuICAgIHRyYW5zbGF0ZTogZnVuY3Rpb24odikge1xuICAgICAgICBtYXQyZC50cmFuc2xhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSwgdi5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHRvU3RyaW5nOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuICdbJyArIEFycmF5LnByb3RvdHlwZS5qb2luLmNhbGwodGhpcy5hcnJheSwgJywnKSArICddJztcbiAgICB9LFxuXG4gICAgdG9BcnJheTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5hcnJheSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4MmR9XG4gKi9cbk1hdHJpeDJkLmNvcHkgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICBtYXQyZC5jb3B5KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG5NYXRyaXgyZC5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uKGEpIHtcbiAgICByZXR1cm4gbWF0MmQuZGV0ZXJtaW5hbnQoYS5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQuaWRlbnRpdHkgPSBmdW5jdGlvbihvdXQpIHtcbiAgICBtYXQyZC5pZGVudGl0eShvdXQuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQuaW52ZXJ0ID0gZnVuY3Rpb24ob3V0LCBhKSB7XG4gICAgbWF0MmQuaW52ZXJ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBiXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICovXG5NYXRyaXgyZC5tdWwgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICBtYXQyZC5tdWwob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYVxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gYlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgyZH1cbiAqL1xuTWF0cml4MmQubXVsdGlwbHkgPSBNYXRyaXgyZC5tdWw7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICovXG5NYXRyaXgyZC5yb3RhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHJhZCkge1xuICAgIG1hdDJkLnJvdGF0ZShvdXQuYXJyYXksIGEuYXJyYXksIHJhZCk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICB2XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICovXG5NYXRyaXgyZC5zY2FsZSA9IGZ1bmN0aW9uKG91dCwgYSwgdikge1xuICAgIG1hdDJkLnNjYWxlKG91dC5hcnJheSwgYS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgyZH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICB2XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJkfVxuICovXG5NYXRyaXgyZC50cmFuc2xhdGUgPSBmdW5jdGlvbihvdXQsIGEsIHYpIHtcbiAgICBtYXQyZC50cmFuc2xhdGUob3V0LmFycmF5LCBhLmFycmF5LCB2LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWF0cml4MmQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXgyZC5qc1xuLy8gbW9kdWxlIGlkID0gMTc2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///176\n");

/***/ }),
/* 177 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__ = __webpack_require__(32);\n\n\n/**\n * @constructor\n * @alias clay.Matrix3\n */\nvar Matrix3 = function () {\n\n    /**\n     * Storage of Matrix3\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Matrix3#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].create();\n\n    /**\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Matrix3#\n     */\n    this._dirty = true;\n};\n\nMatrix3.prototype = {\n\n    constructor: Matrix3,\n\n    /**\n     * Set components from array\n     * @param  {Float32Array|number[]} arr\n     */\n    setArray: function (arr) {\n        for (var i = 0; i < this.array.length; i++) {\n            this.array[i] = arr[i];\n        }\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculate the adjugate of self, in-place\n     * @return {clay.Matrix3}\n     */\n    adjoint: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].adjoint(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Matrix3\n     * @return {clay.Matrix3}\n     */\n    clone: function () {\n        return (new Matrix3()).copy(this);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    copy: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculate matrix determinant\n     * @return {number}\n     */\n    determinant: function () {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].determinant(this.array);\n    },\n\n    /**\n     * Copy the values from Matrix2d a\n     * @param  {clay.Matrix2d} a\n     * @return {clay.Matrix3}\n     */\n    fromMat2d: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat2d(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Copies the upper-left 3x3 values of Matrix4\n     * @param  {clay.Matrix4} a\n     * @return {clay.Matrix3}\n     */\n    fromMat4: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat4(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Calculates a rotation matrix from the given quaternion\n     * @param  {clay.Quaternion} q\n     * @return {clay.Matrix3}\n     */\n    fromQuat: function (q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromQuat(this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set to a identity matrix\n     * @return {clay.Matrix3}\n     */\n    identity: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].identity(this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Invert self\n     * @return {clay.Matrix3}\n     */\n    invert: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].invert(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for mutiply\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    mul: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiplyLeft\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    mulLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply self and b\n     * @param  {clay.Matrix3} b\n     * @return {clay.Matrix3}\n     */\n    multiply: function (b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Multiply a and self, a is on the left\n     * @param  {clay.Matrix3} a\n     * @return {clay.Matrix3}\n     */\n    multiplyLeft: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].multiply(this.array, a.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Rotate self by a given radian\n     * @param  {number}   rad\n     * @return {clay.Matrix3}\n     */\n    rotate: function (rad) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].rotate(this.array, this.array, rad);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self by s\n     * @param  {clay.Vector2}  s\n     * @return {clay.Matrix3}\n     */\n    scale: function (v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].scale(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Translate self by v\n     * @param  {clay.Vector2}  v\n     * @return {clay.Matrix3}\n     */\n    translate: function (v) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].translate(this.array, this.array, v.array);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n     * @param {clay.Matrix4} a\n     */\n    normalFromMat4: function (a) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].normalFromMat4(this.array, a.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transpose self, in-place.\n     * @return {clay.Matrix2}\n     */\n    transpose: function () {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].transpose(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function () {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.adjoint = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].adjoint(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.copy = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].copy(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} a\n * @return {number}\n */\nMatrix3.determinant = function (a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].determinant(a.array);\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @return {clay.Matrix3}\n */\nMatrix3.identity = function (out) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].identity(out.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.invert = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].invert(out.array, a.array);\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Matrix3} b\n * @return {clay.Matrix3}\n */\nMatrix3.mul = function (out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].mul(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Matrix3} b\n * @return {clay.Matrix3}\n */\nMatrix3.multiply = Matrix3.mul;\n\n/**\n * @param  {clay.Matrix3}  out\n * @param  {clay.Matrix2d} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromMat2d = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat2d(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromMat4 = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromMat4(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3}    out\n * @param  {clay.Quaternion} a\n * @return {clay.Matrix3}\n */\nMatrix3.fromQuat = function (out, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].fromQuat(out.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix4} a\n * @return {clay.Matrix3}\n */\nMatrix3.normalFromMat4 = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].normalFromMat4(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {number}  rad\n * @return {clay.Matrix3}\n */\nMatrix3.rotate = function (out, a, rad) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].rotate(out.array, a.array, rad);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Vector2} v\n * @return {clay.Matrix3}\n */\nMatrix3.scale = function (out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].scale(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @return {clay.Matrix3}\n */\nMatrix3.transpose = function (out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].transpose(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Matrix3} out\n * @param  {clay.Matrix3} a\n * @param  {clay.Vector2} v\n * @return {clay.Matrix3}\n */\nMatrix3.translate = function (out, a, v) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_mat3__[\"a\" /* default */].translate(out.array, a.array, v.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Matrix3);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL01hdHJpeDMuanM/Y2E1MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbWF0MyBmcm9tICcuLi9nbG1hdHJpeC9tYXQzJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5Lk1hdHJpeDNcbiAqL1xudmFyIE1hdHJpeDMgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAvKipcbiAgICAgKiBTdG9yYWdlIG9mIE1hdHJpeDNcbiAgICAgKiBAbmFtZSBhcnJheVxuICAgICAqIEB0eXBlIHtGbG9hdDMyQXJyYXl9XG4gICAgICogQG1lbWJlck9mIGNsYXkuTWF0cml4MyNcbiAgICAgKi9cbiAgICB0aGlzLmFycmF5ID0gbWF0My5jcmVhdGUoKTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIF9kaXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5Lk1hdHJpeDMjXG4gICAgICovXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xufTtcblxuTWF0cml4My5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogTWF0cml4MyxcblxuICAgIC8qKlxuICAgICAqIFNldCBjb21wb25lbnRzIGZyb20gYXJyYXlcbiAgICAgKiBAcGFyYW0gIHtGbG9hdDMyQXJyYXl8bnVtYmVyW119IGFyclxuICAgICAqL1xuICAgIHNldEFycmF5OiBmdW5jdGlvbiAoYXJyKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5hcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5hcnJheVtpXSA9IGFycltpXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIHRoZSBhZGp1Z2F0ZSBvZiBzZWxmLCBpbi1wbGFjZVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBhZGpvaW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hdDMuYWRqb2ludCh0aGlzLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2xvbmUgYSBuZXcgTWF0cml4M1xuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gKG5ldyBNYXRyaXgzKCkpLmNvcHkodGhpcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgZnJvbSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIG1hdDMuY29weSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlIG1hdHJpeCBkZXRlcm1pbmFudFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkZXRlcm1pbmFudDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gbWF0My5kZXRlcm1pbmFudCh0aGlzLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29weSB0aGUgdmFsdWVzIGZyb20gTWF0cml4MmQgYVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4MmR9IGFcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgZnJvbU1hdDJkOiBmdW5jdGlvbiAoYSkge1xuICAgICAgICBtYXQzLmZyb21NYXQyZCh0aGlzLmFycmF5LCBhLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29waWVzIHRoZSB1cHBlci1sZWZ0IDN4MyB2YWx1ZXMgb2YgTWF0cml4NFxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBmcm9tTWF0NDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgbWF0My5mcm9tTWF0NCh0aGlzLmFycmF5LCBhLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBhIHJvdGF0aW9uIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBxdWF0ZXJuaW9uXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIGZyb21RdWF0OiBmdW5jdGlvbiAocSkge1xuICAgICAgICBtYXQzLmZyb21RdWF0KHRoaXMuYXJyYXksIHEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gYSBpZGVudGl0eSBtYXRyaXhcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgaWRlbnRpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbWF0My5pZGVudGl0eSh0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW52ZXJ0IHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gICAgICovXG4gICAgaW52ZXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hdDMuaW52ZXJ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXV0aXBseVxuICAgICAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICBtdWw6IGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIG1hdDMubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlMZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIG11bExlZnQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIG1hdDMubXVsKHRoaXMuYXJyYXksIGEuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBzZWxmIGFuZCBiXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBiXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIG11bHRpcGx5OiBmdW5jdGlvbiAoYikge1xuICAgICAgICBtYXQzLm11bHRpcGx5KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdWx0aXBseSBhIGFuZCBzZWxmLCBhIGlzIG9uIHRoZSBsZWZ0XG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIG11bHRpcGx5TGVmdDogZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgbWF0My5tdWx0aXBseSh0aGlzLmFycmF5LCBhLmFycmF5LCB0aGlzLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUm90YXRlIHNlbGYgYnkgYSBnaXZlbiByYWRpYW5cbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICAgcmFkXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIHJvdGF0ZTogZnVuY3Rpb24gKHJhZCkge1xuICAgICAgICBtYXQzLnJvdGF0ZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCByYWQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTY2FsZSBzZWxmIGJ5IHNcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjJ9ICBzXG4gICAgICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICAgICAqL1xuICAgIHNjYWxlOiBmdW5jdGlvbiAodikge1xuICAgICAgICBtYXQzLnNjYWxlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2xhdGUgc2VsZiBieSB2XG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSAgdlxuICAgICAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAgICAgKi9cbiAgICB0cmFuc2xhdGU6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIG1hdDMudHJhbnNsYXRlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHYuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQ2FsY3VsYXRlcyBhIDN4MyBub3JtYWwgbWF0cml4ICh0cmFuc3Bvc2UgaW52ZXJzZSkgZnJvbSB0aGUgNHg0IG1hdHJpeFxuICAgICAqIEBwYXJhbSB7Y2xheS5NYXRyaXg0fSBhXG4gICAgICovXG4gICAgbm9ybWFsRnJvbU1hdDQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIG1hdDMubm9ybWFsRnJvbU1hdDQodGhpcy5hcnJheSwgYS5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFRyYW5zcG9zZSBzZWxmLCBpbi1wbGFjZS5cbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDJ9XG4gICAgICovXG4gICAgdHJhbnNwb3NlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG1hdDMudHJhbnNwb3NlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gJ1snICsgQXJyYXkucHJvdG90eXBlLmpvaW4uY2FsbCh0aGlzLmFycmF5LCAnLCcpICsgJ10nO1xuICAgIH0sXG5cbiAgICB0b0FycmF5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLmFycmF5KTtcbiAgICB9XG59O1xuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuYWRqb2ludCA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLmFkam9pbnQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuY29weSA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLmNvcHkob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuTWF0cml4My5kZXRlcm1pbmFudCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgcmV0dXJuIG1hdDMuZGV0ZXJtaW5hbnQoYS5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuaWRlbnRpdHkgPSBmdW5jdGlvbiAob3V0KSB7XG4gICAgbWF0My5pZGVudGl0eShvdXQuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5pbnZlcnQgPSBmdW5jdGlvbiAob3V0LCBhKSB7XG4gICAgbWF0My5pbnZlcnQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGJcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5tdWwgPSBmdW5jdGlvbiAob3V0LCBhLCBiKSB7XG4gICAgbWF0My5tdWwob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLm11bHRpcGx5ID0gTWF0cml4My5tdWw7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSAgb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDJkfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuZnJvbU1hdDJkID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIG1hdDMuZnJvbU1hdDJkKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gYVxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLmZyb21NYXQ0ID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIG1hdDMuZnJvbU1hdDQob3V0LmFycmF5LCBhLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9ICAgIG91dFxuICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMuZnJvbVF1YXQgPSBmdW5jdGlvbiAob3V0LCBxKSB7XG4gICAgbWF0My5mcm9tUXVhdChvdXQuYXJyYXksIHEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDR9IGFcbiAqIEByZXR1cm4ge2NsYXkuTWF0cml4M31cbiAqL1xuTWF0cml4My5ub3JtYWxGcm9tTWF0NCA9IGZ1bmN0aW9uIChvdXQsIGEpIHtcbiAgICBtYXQzLm5vcm1hbEZyb21NYXQ0KG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHBhcmFtICB7bnVtYmVyfSAgcmFkXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMucm90YXRlID0gZnVuY3Rpb24gKG91dCwgYSwgcmFkKSB7XG4gICAgbWF0My5yb3RhdGUob3V0LmFycmF5LCBhLmFycmF5LCByYWQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gb3V0XG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yMn0gdlxuICogQHJldHVybiB7Y2xheS5NYXRyaXgzfVxuICovXG5NYXRyaXgzLnNjYWxlID0gZnVuY3Rpb24gKG91dCwgYSwgdikge1xuICAgIG1hdDMuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCB2LmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5Lk1hdHJpeDN9IG91dFxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBhXG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMudHJhbnNwb3NlID0gZnVuY3Rpb24gKG91dCwgYSkge1xuICAgIG1hdDMudHJhbnNwb3NlKG91dC5hcnJheSwgYS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5NYXRyaXgzfSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4M30gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3IyfSB2XG4gKiBAcmV0dXJuIHtjbGF5Lk1hdHJpeDN9XG4gKi9cbk1hdHJpeDMudHJhbnNsYXRlID0gZnVuY3Rpb24gKG91dCwgYSwgdikge1xuICAgIG1hdDMudHJhbnNsYXRlKG91dC5hcnJheSwgYS5hcnJheSwgdi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IE1hdHJpeDM7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9NYXRyaXgzLmpzXG4vLyBtb2R1bGUgaWQgPSAxNzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///177\n");

/***/ }),
/* 178 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__ = __webpack_require__(31);\n\n\n/**\n * @constructor\n * @alias clay.Vector4\n * @param {number} x\n * @param {number} y\n * @param {number} z\n * @param {number} w\n */\nvar Vector4 = function(x, y, z, w) {\n\n    x = x || 0;\n    y = y || 0;\n    z = z || 0;\n    w = w || 0;\n\n    /**\n     * Storage of Vector4, read and write of x, y, z, w will change the values in array\n     * All methods also operate on the array instead of x, y, z, w components\n     * @name array\n     * @type {Float32Array}\n     * @memberOf clay.Vector4#\n     */\n    this.array = __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].fromValues(x, y, z, w);\n\n    /**\n     * Dirty flag is used by the Node to determine\n     * if the matrix is updated to latest\n     * @name _dirty\n     * @type {boolean}\n     * @memberOf clay.Vector4#\n     */\n    this._dirty = true;\n};\n\nVector4.prototype = {\n\n    constructor: Vector4,\n\n    /**\n     * Add b to self\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    add: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].add(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y and z components\n     * @param  {number}  x\n     * @param  {number}  y\n     * @param  {number}  z\n     * @param  {number}  w\n     * @return {clay.Vector4}\n     */\n    set: function(x, y, z, w) {\n        this.array[0] = x;\n        this.array[1] = y;\n        this.array[2] = z;\n        this.array[3] = w;\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Set x, y, z and w components from array\n     * @param  {Float32Array|number[]} arr\n     * @return {clay.Vector4}\n     */\n    setArray: function(arr) {\n        this.array[0] = arr[0];\n        this.array[1] = arr[1];\n        this.array[2] = arr[2];\n        this.array[3] = arr[3];\n\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Clone a new Vector4\n     * @return {clay.Vector4}\n     */\n    clone: function() {\n        return new Vector4(this.x, this.y, this.z, this.w);\n    },\n\n    /**\n     * Copy from b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    copy: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].copy(this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for distance\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    dist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dist(this.array, b.array);\n    },\n\n    /**\n     * Distance between self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    distance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].distance(this.array, b.array);\n    },\n\n    /**\n     * Alias for divide\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    div: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].div(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Divide self by b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    divide: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].divide(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Dot product of self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    dot: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dot(this.array, b.array);\n    },\n\n    /**\n     * Alias of length\n     * @return {number}\n     */\n    len: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].len(this.array);\n    },\n\n    /**\n     * Calculate the length\n     * @return {number}\n     */\n    length: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].length(this.array);\n    },\n    /**\n     * Linear interpolation between a and b\n     * @param  {clay.Vector4} a\n     * @param  {clay.Vector4} b\n     * @param  {number}  t\n     * @return {clay.Vector4}\n     */\n    lerp: function(a, b, t) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].lerp(this.array, a.array, b.array, t);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Minimum of self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    min: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].min(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Maximum of self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    max: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].max(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for multiply\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    mul: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].mul(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Mutiply self and b\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    multiply: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].multiply(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Negate self\n     * @return {clay.Vector4}\n     */\n    negate: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].negate(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Normalize self\n     * @return {clay.Vector4}\n     */\n    normalize: function() {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].normalize(this.array, this.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Generate random x, y, z, w components with a given scale\n     * @param  {number} scale\n     * @return {clay.Vector4}\n     */\n    random: function(scale) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].random(this.array, scale);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Scale self\n     * @param  {number}  scale\n     * @return {clay.Vector4}\n     */\n    scale: function(s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scale(this.array, this.array, s);\n        this._dirty = true;\n        return this;\n    },\n    /**\n     * Scale b and add to self\n     * @param  {clay.Vector4} b\n     * @param  {number}  scale\n     * @return {clay.Vector4}\n     */\n    scaleAndAdd: function(b, s) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scaleAndAdd(this.array, this.array, b.array, s);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Alias for squaredDistance\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    sqrDist: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrDist(this.array, b.array);\n    },\n\n    /**\n     * Squared distance between self and b\n     * @param  {clay.Vector4} b\n     * @return {number}\n     */\n    squaredDistance: function(b) {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].squaredDistance(this.array, b.array);\n    },\n\n    /**\n     * Alias for squaredLength\n     * @return {number}\n     */\n    sqrLen: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrLen(this.array);\n    },\n\n    /**\n     * Squared length of self\n     * @return {number}\n     */\n    squaredLength: function() {\n        return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].squaredLength(this.array);\n    },\n\n    /**\n     * Alias for subtract\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    sub: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sub(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Subtract b from self\n     * @param  {clay.Vector4} b\n     * @return {clay.Vector4}\n     */\n    subtract: function(b) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].subtract(this.array, this.array, b.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Matrix4 m\n     * @param  {clay.Matrix4} m\n     * @return {clay.Vector4}\n     */\n    transformMat4: function(m) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformMat4(this.array, this.array, m.array);\n        this._dirty = true;\n        return this;\n    },\n\n    /**\n     * Transform self with a Quaternion q\n     * @param  {clay.Quaternion} q\n     * @return {clay.Vector4}\n     */\n    transformQuat: function(q) {\n        __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformQuat(this.array, this.array, q.array);\n        this._dirty = true;\n        return this;\n    },\n\n    toString: function() {\n        return '[' + Array.prototype.join.call(this.array, ',') + ']';\n    },\n\n    toArray: function () {\n        return Array.prototype.slice.call(this.array);\n    }\n};\n\nvar defineProperty = Object.defineProperty;\n// Getter and Setter\nif (defineProperty) {\n\n    var proto = Vector4.prototype;\n    /**\n     * @name x\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'x', {\n        get: function () {\n            return this.array[0];\n        },\n        set: function (value) {\n            this.array[0] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name y\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'y', {\n        get: function () {\n            return this.array[1];\n        },\n        set: function (value) {\n            this.array[1] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name z\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'z', {\n        get: function () {\n            return this.array[2];\n        },\n        set: function (value) {\n            this.array[2] = value;\n            this._dirty = true;\n        }\n    });\n\n    /**\n     * @name w\n     * @type {number}\n     * @memberOf clay.Vector4\n     * @instance\n     */\n    defineProperty(proto, 'w', {\n        get: function () {\n            return this.array[3];\n        },\n        set: function (value) {\n            this.array[3] = value;\n            this._dirty = true;\n        }\n    });\n}\n\n// Supply methods that are not in place\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.add = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].add(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {number}  x\n * @param  {number}  y\n * @param  {number}  z\n * @return {clay.Vector4}\n */\nVector4.set = function(out, x, y, z, w) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].set(out.array, x, y, z, w);\n    out._dirty = true;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.copy = function(out, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].copy(out.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.dist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].distance(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.distance = Vector4.dist;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.div = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].divide(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.divide = Vector4.div;\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.dot = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].dot(a.array, b.array);\n};\n\n/**\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.len = function(b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].length(b.array);\n};\n\n// Vector4.length = Vector4.len;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @param  {number}  t\n * @return {clay.Vector4}\n */\nVector4.lerp = function(out, a, b, t) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].lerp(out.array, a.array, b.array, t);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.min = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].min(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.max = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].max(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.mul = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].multiply(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.multiply = Vector4.mul;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @return {clay.Vector4}\n */\nVector4.negate = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].negate(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @return {clay.Vector4}\n */\nVector4.normalize = function(out, a) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].normalize(out.array, a.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.random = function(out, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].random(out.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.scale = function(out, a, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scale(out.array, a.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @param  {number}  scale\n * @return {clay.Vector4}\n */\nVector4.scaleAndAdd = function(out, a, b, scale) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].scaleAndAdd(out.array, a.array, b.array, scale);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.sqrDist = function(a, b) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrDist(a.array, b.array);\n};\n\n/**\n * @function\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {number}\n */\nVector4.squaredDistance = Vector4.sqrDist;\n\n/**\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.sqrLen = function(a) {\n    return __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].sqrLen(a.array);\n};\n/**\n * @function\n * @param  {clay.Vector4} a\n * @return {number}\n */\nVector4.squaredLength = Vector4.sqrLen;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.sub = function(out, a, b) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].subtract(out.array, a.array, b.array);\n    out._dirty = true;\n    return out;\n};\n/**\n * @function\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Vector4} b\n * @return {clay.Vector4}\n */\nVector4.subtract = Vector4.sub;\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Matrix4} m\n * @return {clay.Vector4}\n */\nVector4.transformMat4 = function(out, a, m) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformMat4(out.array, a.array, m.array);\n    out._dirty = true;\n    return out;\n};\n\n/**\n * @param  {clay.Vector4} out\n * @param  {clay.Vector4} a\n * @param  {clay.Quaternion} q\n * @return {clay.Vector4}\n */\nVector4.transformQuat = function(out, a, q) {\n    __WEBPACK_IMPORTED_MODULE_0__glmatrix_vec4__[\"a\" /* default */].transformQuat(out.array, a.array, q.array);\n    out._dirty = true;\n    return out;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Vector4);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9tYXRoL1ZlY3RvcjQuanM/ZmJhMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdmVjNCBmcm9tICcuLi9nbG1hdHJpeC92ZWM0JztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBhbGlhcyBjbGF5LlZlY3RvcjRcbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICogQHBhcmFtIHtudW1iZXJ9IHpcbiAqIEBwYXJhbSB7bnVtYmVyfSB3XG4gKi9cbnZhciBWZWN0b3I0ID0gZnVuY3Rpb24oeCwgeSwgeiwgdykge1xuXG4gICAgeCA9IHggfHwgMDtcbiAgICB5ID0geSB8fCAwO1xuICAgIHogPSB6IHx8IDA7XG4gICAgdyA9IHcgfHwgMDtcblxuICAgIC8qKlxuICAgICAqIFN0b3JhZ2Ugb2YgVmVjdG9yNCwgcmVhZCBhbmQgd3JpdGUgb2YgeCwgeSwgeiwgdyB3aWxsIGNoYW5nZSB0aGUgdmFsdWVzIGluIGFycmF5XG4gICAgICogQWxsIG1ldGhvZHMgYWxzbyBvcGVyYXRlIG9uIHRoZSBhcnJheSBpbnN0ZWFkIG9mIHgsIHksIHosIHcgY29tcG9uZW50c1xuICAgICAqIEBuYW1lIGFycmF5XG4gICAgICogQHR5cGUge0Zsb2F0MzJBcnJheX1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS5WZWN0b3I0I1xuICAgICAqL1xuICAgIHRoaXMuYXJyYXkgPSB2ZWM0LmZyb21WYWx1ZXMoeCwgeSwgeiwgdyk7XG5cbiAgICAvKipcbiAgICAgKiBEaXJ0eSBmbGFnIGlzIHVzZWQgYnkgdGhlIE5vZGUgdG8gZGV0ZXJtaW5lXG4gICAgICogaWYgdGhlIG1hdHJpeCBpcyB1cGRhdGVkIHRvIGxhdGVzdFxuICAgICAqIEBuYW1lIF9kaXJ0eVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjQjXG4gICAgICovXG4gICAgdGhpcy5fZGlydHkgPSB0cnVlO1xufTtcblxuVmVjdG9yNC5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVmVjdG9yNCxcblxuICAgIC8qKlxuICAgICAqIEFkZCBiIHRvIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgYWRkOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQuYWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgeCwgeSBhbmQgeiBjb21wb25lbnRzXG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICAgICAqIEBwYXJhbSAge251bWJlcn0gIHlcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB6XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSAgd1xuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKHgsIHksIHosIHcpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IHg7XG4gICAgICAgIHRoaXMuYXJyYXlbMV0gPSB5O1xuICAgICAgICB0aGlzLmFycmF5WzJdID0gejtcbiAgICAgICAgdGhpcy5hcnJheVszXSA9IHc7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB4LCB5LCB6IGFuZCB3IGNvbXBvbmVudHMgZnJvbSBhcnJheVxuICAgICAqIEBwYXJhbSAge0Zsb2F0MzJBcnJheXxudW1iZXJbXX0gYXJyXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIHNldEFycmF5OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgdGhpcy5hcnJheVswXSA9IGFyclswXTtcbiAgICAgICAgdGhpcy5hcnJheVsxXSA9IGFyclsxXTtcbiAgICAgICAgdGhpcy5hcnJheVsyXSA9IGFyclsyXTtcbiAgICAgICAgdGhpcy5hcnJheVszXSA9IGFyclszXTtcblxuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDbG9uZSBhIG5ldyBWZWN0b3I0XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWZWN0b3I0KHRoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMudyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvcHkgZnJvbSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGNvcHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjNC5jb3B5KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgZGlzdGFuY2VcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGlzdDogZnVuY3Rpb24oYikge1xuICAgICAgICByZXR1cm4gdmVjNC5kaXN0KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXN0YW5jZSBiZXR3ZWVuIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZGlzdGFuY2U6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuZGlzdGFuY2UodGhpcy5hcnJheSwgYi5hcnJheSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEFsaWFzIGZvciBkaXZpZGVcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgZGl2OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQuZGl2KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBEaXZpZGUgc2VsZiBieSBiXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGRpdmlkZTogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0LmRpdmlkZSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogRG90IHByb2R1Y3Qgb2Ygc2VsZiBhbmQgYlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBkb3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuZG90KHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBvZiBsZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgbGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQubGVuKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBDYWxjdWxhdGUgdGhlIGxlbmd0aFxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBsZW5ndGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVjNC5sZW5ndGgodGhpcy5hcnJheSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBMaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIGEgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICB0XG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIGxlcnA6IGZ1bmN0aW9uKGEsIGIsIHQpIHtcbiAgICAgICAgdmVjNC5sZXJwKHRoaXMuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNaW5pbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgbWluOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQubWluKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIG9mIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgbWF4OiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQubWF4KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3IgbXVsdGlwbHlcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgbXVsOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQubXVsKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBNdXRpcGx5IHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgbXVsdGlwbHk6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgdmVjNC5tdWx0aXBseSh0aGlzLmFycmF5LCB0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICAgICAgdGhpcy5fZGlydHkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogTmVnYXRlIHNlbGZcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgbmVnYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmVjNC5uZWdhdGUodGhpcy5hcnJheSwgdGhpcy5hcnJheSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE5vcm1hbGl6ZSBzZWxmXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIG5vcm1hbGl6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZlYzQubm9ybWFsaXplKHRoaXMuYXJyYXksIHRoaXMuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSByYW5kb20geCwgeSwgeiwgdyBjb21wb25lbnRzIHdpdGggYSBnaXZlbiBzY2FsZVxuICAgICAqIEBwYXJhbSAge251bWJlcn0gc2NhbGVcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgcmFuZG9tOiBmdW5jdGlvbihzY2FsZSkge1xuICAgICAgICB2ZWM0LnJhbmRvbSh0aGlzLmFycmF5LCBzY2FsZSk7XG4gICAgICAgIHRoaXMuX2RpcnR5ID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNjYWxlIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBzY2FsZTogZnVuY3Rpb24ocykge1xuICAgICAgICB2ZWM0LnNjYWxlKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHMpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogU2NhbGUgYiBhbmQgYWRkIHRvIHNlbGZcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBzY2FsZUFuZEFkZDogZnVuY3Rpb24oYiwgcykge1xuICAgICAgICB2ZWM0LnNjYWxlQW5kQWRkKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXksIHMpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3F1YXJlZERpc3RhbmNlXG4gICAgICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxckRpc3Q6IGZ1bmN0aW9uKGIpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuc3FyRGlzdCh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIHNlbGYgYW5kIGJcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3F1YXJlZERpc3RhbmNlOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHJldHVybiB2ZWM0LnNxdWFyZWREaXN0YW5jZSh0aGlzLmFycmF5LCBiLmFycmF5KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQWxpYXMgZm9yIHNxdWFyZWRMZW5ndGhcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3FyTGVuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHZlYzQuc3FyTGVuKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTcXVhcmVkIGxlbmd0aCBvZiBzZWxmXG4gICAgICogQHJldHVybiB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNxdWFyZWRMZW5ndGg6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdmVjNC5zcXVhcmVkTGVuZ3RoKHRoaXMuYXJyYXkpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBbGlhcyBmb3Igc3VidHJhY3RcbiAgICAgKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAgICAgKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gICAgICovXG4gICAgc3ViOiBmdW5jdGlvbihiKSB7XG4gICAgICAgIHZlYzQuc3ViKHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdWJ0cmFjdCBiIGZyb20gc2VsZlxuICAgICAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICAgICAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAgICAgKi9cbiAgICBzdWJ0cmFjdDogZnVuY3Rpb24oYikge1xuICAgICAgICB2ZWM0LnN1YnRyYWN0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIGIuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgTWF0cml4NCBtXG4gICAgICogQHBhcmFtICB7Y2xheS5NYXRyaXg0fSBtXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIHRyYW5zZm9ybU1hdDQ6IGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgdmVjNC50cmFuc2Zvcm1NYXQ0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIG0uYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUcmFuc2Zvcm0gc2VsZiB3aXRoIGEgUXVhdGVybmlvbiBxXG4gICAgICogQHBhcmFtICB7Y2xheS5RdWF0ZXJuaW9ufSBxXG4gICAgICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICAgICAqL1xuICAgIHRyYW5zZm9ybVF1YXQ6IGZ1bmN0aW9uKHEpIHtcbiAgICAgICAgdmVjNC50cmFuc2Zvcm1RdWF0KHRoaXMuYXJyYXksIHRoaXMuYXJyYXksIHEuYXJyYXkpO1xuICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiAnWycgKyBBcnJheS5wcm90b3R5cGUuam9pbi5jYWxsKHRoaXMuYXJyYXksICcsJykgKyAnXSc7XG4gICAgfSxcblxuICAgIHRvQXJyYXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHRoaXMuYXJyYXkpO1xuICAgIH1cbn07XG5cbnZhciBkZWZpbmVQcm9wZXJ0eSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eTtcbi8vIEdldHRlciBhbmQgU2V0dGVyXG5pZiAoZGVmaW5lUHJvcGVydHkpIHtcblxuICAgIHZhciBwcm90byA9IFZlY3RvcjQucHJvdG90eXBlO1xuICAgIC8qKlxuICAgICAqIEBuYW1lIHhcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3gnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMF07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHlcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3knLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMV07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzFdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHpcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3onLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbMl07XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzJdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEBuYW1lIHdcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqIEBtZW1iZXJPZiBjbGF5LlZlY3RvcjRcbiAgICAgKiBAaW5zdGFuY2VcbiAgICAgKi9cbiAgICBkZWZpbmVQcm9wZXJ0eShwcm90bywgJ3cnLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXJyYXlbM107XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmFycmF5WzNdID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLl9kaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gU3VwcGx5IG1ldGhvZHMgdGhhdCBhcmUgbm90IGluIHBsYWNlXG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQuYWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjNC5hZGQob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7bnVtYmVyfSAgeFxuICogQHBhcmFtICB7bnVtYmVyfSAgeVxuICogQHBhcmFtICB7bnVtYmVyfSAgelxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnNldCA9IGZ1bmN0aW9uKG91dCwgeCwgeSwgeiwgdykge1xuICAgIHZlYzQuc2V0KG91dC5hcnJheSwgeCwgeSwgeiwgdyk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5jb3B5ID0gZnVuY3Rpb24ob3V0LCBiKSB7XG4gICAgdmVjNC5jb3B5KG91dC5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yNC5kaXN0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWM0LmRpc3RhbmNlKGEuYXJyYXksIGIuYXJyYXkpO1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuZGlzdGFuY2UgPSBWZWN0b3I0LmRpc3Q7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQuZGl2ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjNC5kaXZpZGUob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LmRpdmlkZSA9IFZlY3RvcjQuZGl2O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuZG90ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWM0LmRvdChhLmFycmF5LCBiLmFycmF5KTtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQubGVuID0gZnVuY3Rpb24oYikge1xuICAgIHJldHVybiB2ZWM0Lmxlbmd0aChiLmFycmF5KTtcbn07XG5cbi8vIFZlY3RvcjQubGVuZ3RoID0gVmVjdG9yNC5sZW47XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICB0XG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubGVycCA9IGZ1bmN0aW9uKG91dCwgYSwgYiwgdCkge1xuICAgIHZlYzQubGVycChvdXQuYXJyYXksIGEuYXJyYXksIGIuYXJyYXksIHQpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0Lm1pbiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzQubWluKG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcmV0dXJuIHtjbGF5LlZlY3RvcjR9XG4gKi9cblZlY3RvcjQubWF4ID0gZnVuY3Rpb24ob3V0LCBhLCBiKSB7XG4gICAgdmVjNC5tYXgob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5tdWwgPSBmdW5jdGlvbihvdXQsIGEsIGIpIHtcbiAgICB2ZWM0Lm11bHRpcGx5KG91dC5hcnJheSwgYS5hcnJheSwgYi5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5tdWx0aXBseSA9IFZlY3RvcjQubXVsO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5uZWdhdGUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2ZWM0Lm5lZ2F0ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5ub3JtYWxpemUgPSBmdW5jdGlvbihvdXQsIGEpIHtcbiAgICB2ZWM0Lm5vcm1hbGl6ZShvdXQuYXJyYXksIGEuYXJyYXkpO1xuICAgIG91dC5fZGlydHkgPSB0cnVlO1xuICAgIHJldHVybiBvdXQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnJhbmRvbSA9IGZ1bmN0aW9uKG91dCwgc2NhbGUpIHtcbiAgICB2ZWM0LnJhbmRvbShvdXQuYXJyYXksIHNjYWxlKTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnNjYWxlID0gZnVuY3Rpb24ob3V0LCBhLCBzY2FsZSkge1xuICAgIHZlYzQuc2NhbGUob3V0LmFycmF5LCBhLmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBvdXRcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYVxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBiXG4gKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsZVxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnNjYWxlQW5kQWRkID0gZnVuY3Rpb24ob3V0LCBhLCBiLCBzY2FsZSkge1xuICAgIHZlYzQuc2NhbGVBbmRBZGQob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5LCBzY2FsZSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yNC5zcXJEaXN0ID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiB2ZWM0LnNxckRpc3QoYS5hcnJheSwgYi5hcnJheSk7XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuVmVjdG9yNC5zcXVhcmVkRGlzdGFuY2UgPSBWZWN0b3I0LnNxckRpc3Q7XG5cbi8qKlxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuc3FyTGVuID0gZnVuY3Rpb24oYSkge1xuICAgIHJldHVybiB2ZWM0LnNxckxlbihhLmFycmF5KTtcbn07XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cblZlY3RvcjQuc3F1YXJlZExlbmd0aCA9IFZlY3RvcjQuc3FyTGVuO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gYlxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnN1YiA9IGZ1bmN0aW9uKG91dCwgYSwgYikge1xuICAgIHZlYzQuc3VidHJhY3Qob3V0LmFycmF5LCBhLmFycmF5LCBiLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGJcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC5zdWJ0cmFjdCA9IFZlY3RvcjQuc3ViO1xuXG4vKipcbiAqIEBwYXJhbSAge2NsYXkuVmVjdG9yNH0gb3V0XG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IGFcbiAqIEBwYXJhbSAge2NsYXkuTWF0cml4NH0gbVxuICogQHJldHVybiB7Y2xheS5WZWN0b3I0fVxuICovXG5WZWN0b3I0LnRyYW5zZm9ybU1hdDQgPSBmdW5jdGlvbihvdXQsIGEsIG0pIHtcbiAgICB2ZWM0LnRyYW5zZm9ybU1hdDQob3V0LmFycmF5LCBhLmFycmF5LCBtLmFycmF5KTtcbiAgICBvdXQuX2RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gb3V0O1xufTtcblxuLyoqXG4gKiBAcGFyYW0gIHtjbGF5LlZlY3RvcjR9IG91dFxuICogQHBhcmFtICB7Y2xheS5WZWN0b3I0fSBhXG4gKiBAcGFyYW0gIHtjbGF5LlF1YXRlcm5pb259IHFcbiAqIEByZXR1cm4ge2NsYXkuVmVjdG9yNH1cbiAqL1xuVmVjdG9yNC50cmFuc2Zvcm1RdWF0ID0gZnVuY3Rpb24ob3V0LCBhLCBxKSB7XG4gICAgdmVjNC50cmFuc2Zvcm1RdWF0KG91dC5hcnJheSwgYS5hcnJheSwgcS5hcnJheSk7XG4gICAgb3V0Ll9kaXJ0eSA9IHRydWU7XG4gICAgcmV0dXJuIG91dDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IFZlY3RvcjQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvbWF0aC9WZWN0b3I0LmpzXG4vLyBtb2R1bGUgaWQgPSAxNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///178\n");

/***/ }),
/* 179 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Particle__ = __webpack_require__(112);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Value__ = __webpack_require__(111);\n\n\n\n\n\n/**\n * @constructor clay.particle.Emitter\n * @extends clay.core.Base\n */\nvar Emitter = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend( /** @lends clay.particle.Emitter# */ {\n    /**\n     * Maximum number of particles created by this emitter\n     * @type {number}\n     */\n    max: 1000,\n    /**\n     * Number of particles created by this emitter each shot\n     * @type {number}\n     */\n    amount: 20,\n\n    // Init status for each particle\n    /**\n     * Particle life generator\n     * @type {?clay.Value.<number>}\n     */\n    life: null,\n    /**\n     * Particle position generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    position: null,\n    /**\n     * Particle rotation generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    rotation: null,\n    /**\n     * Particle velocity generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    velocity: null,\n    /**\n     * Particle angular velocity generator\n     * @type {?clay.Value.<clay.Vector3>}\n     */\n    angularVelocity: null,\n    /**\n     * Particle sprite size generator\n     * @type {?clay.Value.<number>}\n     */\n    spriteSize: null,\n    /**\n     * Particle weight generator\n     * @type {?clay.Value.<number>}\n     */\n    weight: null,\n\n    _particlePool: null\n\n}, function() {\n\n    this._particlePool = [];\n\n    // TODO Reduce heap memory\n    for (var i = 0; i < this.max; i++) {\n        var particle = new __WEBPACK_IMPORTED_MODULE_2__Particle__[\"a\" /* default */]();\n        particle.emitter = this;\n        this._particlePool.push(particle);\n\n        if (this.velocity) {\n            particle.velocity = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        }\n        if (this.angularVelocity) {\n            particle.angularVelocity = new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]();\n        }\n    }\n},\n/** @lends clay.particle.Emitter.prototype */\n{\n    /**\n     * Emitter number of particles and push them to a given particle list. Emmit number is defined by amount property\n     * @param  {Array.<clay.particle.Particle>} out\n     */\n    emit: function(out) {\n        var amount = Math.min(this._particlePool.length, this.amount);\n\n        var particle;\n        for (var i = 0; i < amount; i++) {\n            particle = this._particlePool.pop();\n            // Initialize particle status\n            if (this.position) {\n                this.position.get(particle.position);\n            }\n            if (this.rotation) {\n                this.rotation.get(particle.rotation);\n            }\n            if (this.velocity) {\n                this.velocity.get(particle.velocity);\n            }\n            if (this.angularVelocity) {\n                this.angularVelocity.get(particle.angularVelocity);\n            }\n            if (this.life) {\n                particle.life = this.life.get();\n            }\n            if (this.spriteSize) {\n                particle.spriteSize = this.spriteSize.get();\n            }\n            if (this.weight) {\n                particle.weight = this.weight.get();\n            }\n            particle.age = 0;\n\n            out.push(particle);\n        }\n    },\n    /**\n     * Kill a dead particle and put it back in the pool\n     * @param  {clay.particle.Particle} particle\n     */\n    kill: function(particle) {\n        this._particlePool.push(particle);\n    }\n});\n\n/**\n * Create a constant 1d value generator. Alias for {@link clay.Value.constant}\n * @function clay.particle.Emitter.constant\n */\nEmitter.constant = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].constant;\n\n/**\n * Create a constant vector value(2d or 3d) generator. Alias for {@link clay.Value.vector}\n * @function clay.particle.Emitter.vector\n */\nEmitter.vector = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].vector;\n\n/**\n * Create a random 1d value generator. Alias for {@link clay.Value.random1D}\n * @function clay.particle.Emitter.random1D\n */\nEmitter.random1D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random1D;\n\n/**\n * Create a random 2d value generator. Alias for {@link clay.Value.random2D}\n * @function clay.particle.Emitter.random2D\n */\nEmitter.random2D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random2D;\n\n/**\n * Create a random 3d value generator. Alias for {@link clay.Value.random3D}\n * @function clay.particle.Emitter.random3D\n */\nEmitter.random3D = __WEBPACK_IMPORTED_MODULE_3__math_Value__[\"a\" /* default */].random3D;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Emitter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTc5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9FbWl0dGVyLmpzP2U0ODYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgUGFydGljbGUgZnJvbSAnLi9QYXJ0aWNsZSc7XG5pbXBvcnQgVmFsdWUgZnJvbSAnLi4vbWF0aC9WYWx1ZSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGFydGljbGUuRW1pdHRlclxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIEVtaXR0ZXIgPSBCYXNlLmV4dGVuZCggLyoqIEBsZW5kcyBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIjICovIHtcbiAgICAvKipcbiAgICAgKiBNYXhpbXVtIG51bWJlciBvZiBwYXJ0aWNsZXMgY3JlYXRlZCBieSB0aGlzIGVtaXR0ZXJcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIG1heDogMTAwMCxcbiAgICAvKipcbiAgICAgKiBOdW1iZXIgb2YgcGFydGljbGVzIGNyZWF0ZWQgYnkgdGhpcyBlbWl0dGVyIGVhY2ggc2hvdFxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgYW1vdW50OiAyMCxcblxuICAgIC8vIEluaXQgc3RhdHVzIGZvciBlYWNoIHBhcnRpY2xlXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgbGlmZSBnZW5lcmF0b3JcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmFsdWUuPG51bWJlcj59XG4gICAgICovXG4gICAgbGlmZTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBQYXJ0aWNsZSBwb3NpdGlvbiBnZW5lcmF0b3JcbiAgICAgKiBAdHlwZSB7P2NsYXkuVmFsdWUuPGNsYXkuVmVjdG9yMz59XG4gICAgICovXG4gICAgcG9zaXRpb246IG51bGwsXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgcm90YXRpb24gZ2VuZXJhdG9yXG4gICAgICogQHR5cGUgez9jbGF5LlZhbHVlLjxjbGF5LlZlY3RvcjM+fVxuICAgICAqL1xuICAgIHJvdGF0aW9uOiBudWxsLFxuICAgIC8qKlxuICAgICAqIFBhcnRpY2xlIHZlbG9jaXR5IGdlbmVyYXRvclxuICAgICAqIEB0eXBlIHs/Y2xheS5WYWx1ZS48Y2xheS5WZWN0b3IzPn1cbiAgICAgKi9cbiAgICB2ZWxvY2l0eTogbnVsbCxcbiAgICAvKipcbiAgICAgKiBQYXJ0aWNsZSBhbmd1bGFyIHZlbG9jaXR5IGdlbmVyYXRvclxuICAgICAqIEB0eXBlIHs/Y2xheS5WYWx1ZS48Y2xheS5WZWN0b3IzPn1cbiAgICAgKi9cbiAgICBhbmd1bGFyVmVsb2NpdHk6IG51bGwsXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgc3ByaXRlIHNpemUgZ2VuZXJhdG9yXG4gICAgICogQHR5cGUgez9jbGF5LlZhbHVlLjxudW1iZXI+fVxuICAgICAqL1xuICAgIHNwcml0ZVNpemU6IG51bGwsXG4gICAgLyoqXG4gICAgICogUGFydGljbGUgd2VpZ2h0IGdlbmVyYXRvclxuICAgICAqIEB0eXBlIHs/Y2xheS5WYWx1ZS48bnVtYmVyPn1cbiAgICAgKi9cbiAgICB3ZWlnaHQ6IG51bGwsXG5cbiAgICBfcGFydGljbGVQb29sOiBudWxsXG5cbn0sIGZ1bmN0aW9uKCkge1xuXG4gICAgdGhpcy5fcGFydGljbGVQb29sID0gW107XG5cbiAgICAvLyBUT0RPIFJlZHVjZSBoZWFwIG1lbW9yeVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXg7IGkrKykge1xuICAgICAgICB2YXIgcGFydGljbGUgPSBuZXcgUGFydGljbGUoKTtcbiAgICAgICAgcGFydGljbGUuZW1pdHRlciA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3BhcnRpY2xlUG9vbC5wdXNoKHBhcnRpY2xlKTtcblxuICAgICAgICBpZiAodGhpcy52ZWxvY2l0eSkge1xuICAgICAgICAgICAgcGFydGljbGUudmVsb2NpdHkgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFuZ3VsYXJWZWxvY2l0eSkge1xuICAgICAgICAgICAgcGFydGljbGUuYW5ndWxhclZlbG9jaXR5ID0gbmV3IFZlY3RvcjMoKTtcbiAgICAgICAgfVxuICAgIH1cbn0sXG4vKiogQGxlbmRzIGNsYXkucGFydGljbGUuRW1pdHRlci5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBFbWl0dGVyIG51bWJlciBvZiBwYXJ0aWNsZXMgYW5kIHB1c2ggdGhlbSB0byBhIGdpdmVuIHBhcnRpY2xlIGxpc3QuIEVtbWl0IG51bWJlciBpcyBkZWZpbmVkIGJ5IGFtb3VudCBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSAge0FycmF5LjxjbGF5LnBhcnRpY2xlLlBhcnRpY2xlPn0gb3V0XG4gICAgICovXG4gICAgZW1pdDogZnVuY3Rpb24ob3V0KSB7XG4gICAgICAgIHZhciBhbW91bnQgPSBNYXRoLm1pbih0aGlzLl9wYXJ0aWNsZVBvb2wubGVuZ3RoLCB0aGlzLmFtb3VudCk7XG5cbiAgICAgICAgdmFyIHBhcnRpY2xlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFtb3VudDsgaSsrKSB7XG4gICAgICAgICAgICBwYXJ0aWNsZSA9IHRoaXMuX3BhcnRpY2xlUG9vbC5wb3AoKTtcbiAgICAgICAgICAgIC8vIEluaXRpYWxpemUgcGFydGljbGUgc3RhdHVzXG4gICAgICAgICAgICBpZiAodGhpcy5wb3NpdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24uZ2V0KHBhcnRpY2xlLnBvc2l0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLnJvdGF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yb3RhdGlvbi5nZXQocGFydGljbGUucm90YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMudmVsb2NpdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZlbG9jaXR5LmdldChwYXJ0aWNsZS52ZWxvY2l0eSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5hbmd1bGFyVmVsb2NpdHkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuZ3VsYXJWZWxvY2l0eS5nZXQocGFydGljbGUuYW5ndWxhclZlbG9jaXR5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmxpZmUpIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS5saWZlID0gdGhpcy5saWZlLmdldCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuc3ByaXRlU2l6ZSkge1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlLnNwcml0ZVNpemUgPSB0aGlzLnNwcml0ZVNpemUuZ2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy53ZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNsZS53ZWlnaHQgPSB0aGlzLndlaWdodC5nZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhcnRpY2xlLmFnZSA9IDA7XG5cbiAgICAgICAgICAgIG91dC5wdXNoKHBhcnRpY2xlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLyoqXG4gICAgICogS2lsbCBhIGRlYWQgcGFydGljbGUgYW5kIHB1dCBpdCBiYWNrIGluIHRoZSBwb29sXG4gICAgICogQHBhcmFtICB7Y2xheS5wYXJ0aWNsZS5QYXJ0aWNsZX0gcGFydGljbGVcbiAgICAgKi9cbiAgICBraWxsOiBmdW5jdGlvbihwYXJ0aWNsZSkge1xuICAgICAgICB0aGlzLl9wYXJ0aWNsZVBvb2wucHVzaChwYXJ0aWNsZSk7XG4gICAgfVxufSk7XG5cbi8qKlxuICogQ3JlYXRlIGEgY29uc3RhbnQgMWQgdmFsdWUgZ2VuZXJhdG9yLiBBbGlhcyBmb3Ige0BsaW5rIGNsYXkuVmFsdWUuY29uc3RhbnR9XG4gKiBAZnVuY3Rpb24gY2xheS5wYXJ0aWNsZS5FbWl0dGVyLmNvbnN0YW50XG4gKi9cbkVtaXR0ZXIuY29uc3RhbnQgPSBWYWx1ZS5jb25zdGFudDtcblxuLyoqXG4gKiBDcmVhdGUgYSBjb25zdGFudCB2ZWN0b3IgdmFsdWUoMmQgb3IgM2QpIGdlbmVyYXRvci4gQWxpYXMgZm9yIHtAbGluayBjbGF5LlZhbHVlLnZlY3Rvcn1cbiAqIEBmdW5jdGlvbiBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIudmVjdG9yXG4gKi9cbkVtaXR0ZXIudmVjdG9yID0gVmFsdWUudmVjdG9yO1xuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmRvbSAxZCB2YWx1ZSBnZW5lcmF0b3IuIEFsaWFzIGZvciB7QGxpbmsgY2xheS5WYWx1ZS5yYW5kb20xRH1cbiAqIEBmdW5jdGlvbiBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIucmFuZG9tMURcbiAqL1xuRW1pdHRlci5yYW5kb20xRCA9IFZhbHVlLnJhbmRvbTFEO1xuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmRvbSAyZCB2YWx1ZSBnZW5lcmF0b3IuIEFsaWFzIGZvciB7QGxpbmsgY2xheS5WYWx1ZS5yYW5kb20yRH1cbiAqIEBmdW5jdGlvbiBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIucmFuZG9tMkRcbiAqL1xuRW1pdHRlci5yYW5kb20yRCA9IFZhbHVlLnJhbmRvbTJEO1xuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmRvbSAzZCB2YWx1ZSBnZW5lcmF0b3IuIEFsaWFzIGZvciB7QGxpbmsgY2xheS5WYWx1ZS5yYW5kb20zRH1cbiAqIEBmdW5jdGlvbiBjbGF5LnBhcnRpY2xlLkVtaXR0ZXIucmFuZG9tM0RcbiAqL1xuRW1pdHRlci5yYW5kb20zRCA9IFZhbHVlLnJhbmRvbTNEO1xuXG5leHBvcnQgZGVmYXVsdCBFbWl0dGVyO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BhcnRpY2xlL0VtaXR0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE3OVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///179\n");

/***/ }),
/* 180 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Field__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__ = __webpack_require__(5);\n\n\n\n\n/**\n * @constructor clay.particle.ForceField\n * @extends clay.particle.Field\n */\nvar ForceField = __WEBPACK_IMPORTED_MODULE_0__Field__[\"a\" /* default */].extend(function() {\n    return {\n        force: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */]()\n    };\n}, {\n    applyTo: function(velocity, position, weight, deltaTime) {\n        if (weight > 0) {\n            __WEBPACK_IMPORTED_MODULE_2__glmatrix_vec3__[\"a\" /* default */].scaleAndAdd(velocity.array, velocity.array, this.force.array, deltaTime / weight);\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ForceField);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9Gb3JjZUZpZWxkLmpzP2FiOGIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEZpZWxkIGZyb20gJy4vRmllbGQnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCB2ZWMzIGZyb20gJy4uL2dsbWF0cml4L3ZlYzMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBhcnRpY2xlLkZvcmNlRmllbGRcbiAqIEBleHRlbmRzIGNsYXkucGFydGljbGUuRmllbGRcbiAqL1xudmFyIEZvcmNlRmllbGQgPSBGaWVsZC5leHRlbmQoZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZm9yY2U6IG5ldyBWZWN0b3IzKClcbiAgICB9O1xufSwge1xuICAgIGFwcGx5VG86IGZ1bmN0aW9uKHZlbG9jaXR5LCBwb3NpdGlvbiwgd2VpZ2h0LCBkZWx0YVRpbWUpIHtcbiAgICAgICAgaWYgKHdlaWdodCA+IDApIHtcbiAgICAgICAgICAgIHZlYzMuc2NhbGVBbmRBZGQodmVsb2NpdHkuYXJyYXksIHZlbG9jaXR5LmFycmF5LCB0aGlzLmZvcmNlLmFycmF5LCBkZWx0YVRpbWUgLyB3ZWlnaHQpO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEZvcmNlRmllbGQ7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGFydGljbGUvRm9yY2VGaWVsZC5qc1xuLy8gbW9kdWxlIGlkID0gMTgwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///180\n");

/***/ }),
/* 181 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Renderable__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__particle_glsl_js__ = __webpack_require__(182);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]['import'](__WEBPACK_IMPORTED_MODULE_4__particle_glsl_js__[\"a\" /* default */]);\n\nvar particleShader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.particle.vertex'), __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.particle.fragment'));\n\n/**\n * @constructor clay.particle.ParticleRenderable\n * @extends clay.Renderable\n *\n * @example\n *     var particleRenderable = new clay.particle.ParticleRenderable({\n *         spriteAnimationTileX: 4,\n *         spriteAnimationTileY: 4,\n *         spriteAnimationRepeat: 1\n *     });\n *     scene.add(particleRenderable);\n *     // Enable uv animation in the shader\n *     particleRenderable.material.define('both', 'UV_ANIMATION');\n *     var Emitter = clay.particle.Emitter;\n *     var Vector3 = clay.Vector3;\n *     var emitter = new Emitter({\n *         max: 2000,\n *         amount: 100,\n *         life: Emitter.random1D(10, 20),\n *         position: Emitter.vector(new Vector3()),\n *         velocity: Emitter.random3D(new Vector3(-10, 0, -10), new Vector3(10, 0, 10));\n *     });\n *     particleRenderable.addEmitter(emitter);\n *     var gravityField = new clay.particle.ForceField();\n *     gravityField.force.y = -10;\n *     particleRenderable.addField(gravityField);\n *     ...\n *     animation.on('frame', function(frameTime) {\n *         particleRenderable.updateParticles(frameTime);\n *         renderer.render(scene, camera);\n *     });\n */\nvar ParticleRenderable = __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].extend(/** @lends clay.particle.ParticleRenderable# */ {\n    /**\n     * @type {boolean}\n     */\n    loop: true,\n    /**\n     * @type {boolean}\n     */\n    oneshot: false,\n    /**\n     * Duration of particle system in milliseconds\n     * @type {number}\n     */\n    duration: 1,\n\n    // UV Animation\n    /**\n     * @type {number}\n     */\n    spriteAnimationTileX: 1,\n    /**\n     * @type {number}\n     */\n    spriteAnimationTileY: 1,\n    /**\n     * @type {number}\n     */\n    spriteAnimationRepeat: 0,\n\n    mode: __WEBPACK_IMPORTED_MODULE_0__Renderable__[\"a\" /* default */].POINTS,\n\n    ignorePicking: true,\n\n    _elapsedTime: 0,\n\n    _emitting: true\n\n}, function(){\n\n    this.geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */]({\n        dynamic: true\n    });\n\n    if (!this.material) {\n        this.material = new __WEBPACK_IMPORTED_MODULE_2__Material__[\"a\" /* default */]({\n            shader: particleShader,\n            transparent: true,\n            depthMask: false\n        });\n\n        this.material.enableTexture('sprite');\n    }\n\n    this._particles = [];\n    this._fields = [];\n    this._emitters = [];\n},\n/** @lends clay.particle.ParticleRenderable.prototype */\n{\n\n    culling: false,\n\n    frustumCulling: false,\n\n    castShadow: false,\n    receiveShadow: false,\n\n    /**\n     * Add emitter\n     * @param {clay.particle.Emitter} emitter\n     */\n    addEmitter: function(emitter) {\n        this._emitters.push(emitter);\n    },\n\n    /**\n     * Remove emitter\n     * @param {clay.particle.Emitter} emitter\n     */\n    removeEmitter: function(emitter) {\n        this._emitters.splice(this._emitters.indexOf(emitter), 1);\n    },\n\n    /**\n     * Add field\n     * @param {clay.particle.Field} field\n     */\n    addField: function(field) {\n        this._fields.push(field);\n    },\n\n    /**\n     * Remove field\n     * @param {clay.particle.Field} field\n     */\n    removeField: function(field) {\n        this._fields.splice(this._fields.indexOf(field), 1);\n    },\n\n    /**\n     * Reset the particle system.\n     */\n    reset: function() {\n        // Put all the particles back\n        for (var i = 0; i < this._particles.length; i++) {\n            var p = this._particles[i];\n            p.emitter.kill(p);\n        }\n        this._particles.length = 0;\n        this._elapsedTime = 0;\n        this._emitting = true;\n    },\n\n    /**\n     * @param  {number} deltaTime\n     */\n    updateParticles: function(deltaTime) {\n\n        // MS => Seconds\n        deltaTime /= 1000;\n        this._elapsedTime += deltaTime;\n\n        var particles = this._particles;\n\n        if (this._emitting) {\n            for (var i = 0; i < this._emitters.length; i++) {\n                this._emitters[i].emit(particles);\n            }\n            if (this.oneshot) {\n                this._emitting = false;\n            }\n        }\n\n        // Aging\n        var len = particles.length;\n        for (var i = 0; i < len;) {\n            var p = particles[i];\n            p.age += deltaTime;\n            if (p.age >= p.life) {\n                p.emitter.kill(p);\n                particles[i] = particles[len-1];\n                particles.pop();\n                len--;\n            } else {\n                i++;\n            }\n        }\n\n        for (var i = 0; i < len; i++) {\n            // Update\n            var p = particles[i];\n            if (this._fields.length > 0) {\n                for (var j = 0; j < this._fields.length; j++) {\n                    this._fields[j].applyTo(p.velocity, p.position, p.weight, deltaTime);\n                }\n            }\n            p.update(deltaTime);\n        }\n\n        this._updateVertices();\n    },\n\n    _updateVertices: function() {\n        var geometry = this.geometry;\n        // If has uv animation\n        var animTileX = this.spriteAnimationTileX;\n        var animTileY = this.spriteAnimationTileY;\n        var animRepeat = this.spriteAnimationRepeat;\n        var nUvAnimFrame = animTileY * animTileX * animRepeat;\n        var hasUvAnimation = nUvAnimFrame > 1;\n        var positions = geometry.attributes.position.value;\n        // Put particle status in normal\n        var normals = geometry.attributes.normal.value;\n        var uvs = geometry.attributes.texcoord0.value;\n        var uvs2 = geometry.attributes.texcoord1.value;\n\n        var len = this._particles.length;\n        if (!positions || positions.length !== len * 3) {\n            // TODO Optimize\n            positions = geometry.attributes.position.value = new Float32Array(len * 3);\n            normals = geometry.attributes.normal.value = new Float32Array(len * 3);\n            if (hasUvAnimation) {\n                uvs = geometry.attributes.texcoord0.value = new Float32Array(len * 2);\n                uvs2 = geometry.attributes.texcoord1.value = new Float32Array(len * 2);\n            }\n        }\n\n        var invAnimTileX = 1 / animTileX;\n        for (var i = 0; i < len; i++) {\n            var particle = this._particles[i];\n            var offset = i * 3;\n            for (var j = 0; j < 3; j++) {\n                positions[offset + j] = particle.position.array[j];\n                normals[offset] = particle.age / particle.life;\n                // normals[offset + 1] = particle.rotation;\n                normals[offset + 1] = 0;\n                normals[offset + 2] = particle.spriteSize;\n            }\n            var offset2 = i * 2;\n            if (hasUvAnimation) {\n                // TODO\n                var p = particle.age / particle.life;\n                var stage = Math.round(p * (nUvAnimFrame - 1)) * animRepeat;\n                var v = Math.floor(stage * invAnimTileX);\n                var u = stage - v * animTileX;\n                uvs[offset2] = u / animTileX;\n                uvs[offset2 + 1] = 1 - v / animTileY;\n                uvs2[offset2] = (u + 1) / animTileX;\n                uvs2[offset2 + 1] = 1 - (v + 1) / animTileY;\n            }\n        }\n\n        geometry.dirty();\n    },\n\n    /**\n     * @return {boolean}\n     */\n    isFinished: function() {\n        return this._elapsedTime > this.duration && !this.loop;\n    },\n\n    /**\n     * @param  {clay.Renderer} renderer\n     */\n    dispose: function(renderer) {\n        // Put all the particles back\n        for (var i = 0; i < this._particles.length; i++) {\n            var p = this._particles[i];\n            p.emitter.kill(p);\n        }\n        this.geometry.dispose(renderer);\n        // TODO Dispose texture ?\n    },\n\n    /**\n     * @return {clay.particle.ParticleRenderable}\n     */\n    clone: function() {\n        var particleRenderable = new ParticleRenderable({\n            material: this.material\n        });\n        particleRenderable.loop = this.loop;\n        particleRenderable.duration = this.duration;\n        particleRenderable.oneshot = this.oneshot;\n        particleRenderable.spriteAnimationRepeat = this.spriteAnimationRepeat;\n        particleRenderable.spriteAnimationTileY = this.spriteAnimationTileY;\n        particleRenderable.spriteAnimationTileX = this.spriteAnimationTileX;\n\n        particleRenderable.position.copy(this.position);\n        particleRenderable.rotation.copy(this.rotation);\n        particleRenderable.scale.copy(this.scale);\n\n        for (var i = 0; i < this._children.length; i++) {\n            particleRenderable.add(this._children[i].clone());\n        }\n        return particleRenderable;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ParticleRenderable);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9QYXJ0aWNsZVJlbmRlcmFibGUuanM/NTA1YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVuZGVyYWJsZSBmcm9tICcuLi9SZW5kZXJhYmxlJztcblxuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9NYXRlcmlhbCc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5cbmltcG9ydCBwYXJ0aWNsZUVzc2wgZnJvbSAnLi9wYXJ0aWNsZS5nbHNsLmpzJztcblNoYWRlclsnaW1wb3J0J10ocGFydGljbGVFc3NsKTtcblxudmFyIHBhcnRpY2xlU2hhZGVyID0gbmV3IFNoYWRlcihTaGFkZXIuc291cmNlKCdjbGF5LnBhcnRpY2xlLnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnBhcnRpY2xlLmZyYWdtZW50JykpO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvciBjbGF5LnBhcnRpY2xlLlBhcnRpY2xlUmVuZGVyYWJsZVxuICogQGV4dGVuZHMgY2xheS5SZW5kZXJhYmxlXG4gKlxuICogQGV4YW1wbGVcbiAqICAgICB2YXIgcGFydGljbGVSZW5kZXJhYmxlID0gbmV3IGNsYXkucGFydGljbGUuUGFydGljbGVSZW5kZXJhYmxlKHtcbiAqICAgICAgICAgc3ByaXRlQW5pbWF0aW9uVGlsZVg6IDQsXG4gKiAgICAgICAgIHNwcml0ZUFuaW1hdGlvblRpbGVZOiA0LFxuICogICAgICAgICBzcHJpdGVBbmltYXRpb25SZXBlYXQ6IDFcbiAqICAgICB9KTtcbiAqICAgICBzY2VuZS5hZGQocGFydGljbGVSZW5kZXJhYmxlKTtcbiAqICAgICAvLyBFbmFibGUgdXYgYW5pbWF0aW9uIGluIHRoZSBzaGFkZXJcbiAqICAgICBwYXJ0aWNsZVJlbmRlcmFibGUubWF0ZXJpYWwuZGVmaW5lKCdib3RoJywgJ1VWX0FOSU1BVElPTicpO1xuICogICAgIHZhciBFbWl0dGVyID0gY2xheS5wYXJ0aWNsZS5FbWl0dGVyO1xuICogICAgIHZhciBWZWN0b3IzID0gY2xheS5WZWN0b3IzO1xuICogICAgIHZhciBlbWl0dGVyID0gbmV3IEVtaXR0ZXIoe1xuICogICAgICAgICBtYXg6IDIwMDAsXG4gKiAgICAgICAgIGFtb3VudDogMTAwLFxuICogICAgICAgICBsaWZlOiBFbWl0dGVyLnJhbmRvbTFEKDEwLCAyMCksXG4gKiAgICAgICAgIHBvc2l0aW9uOiBFbWl0dGVyLnZlY3RvcihuZXcgVmVjdG9yMygpKSxcbiAqICAgICAgICAgdmVsb2NpdHk6IEVtaXR0ZXIucmFuZG9tM0QobmV3IFZlY3RvcjMoLTEwLCAwLCAtMTApLCBuZXcgVmVjdG9yMygxMCwgMCwgMTApKTtcbiAqICAgICB9KTtcbiAqICAgICBwYXJ0aWNsZVJlbmRlcmFibGUuYWRkRW1pdHRlcihlbWl0dGVyKTtcbiAqICAgICB2YXIgZ3Jhdml0eUZpZWxkID0gbmV3IGNsYXkucGFydGljbGUuRm9yY2VGaWVsZCgpO1xuICogICAgIGdyYXZpdHlGaWVsZC5mb3JjZS55ID0gLTEwO1xuICogICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5hZGRGaWVsZChncmF2aXR5RmllbGQpO1xuICogICAgIC4uLlxuICogICAgIGFuaW1hdGlvbi5vbignZnJhbWUnLCBmdW5jdGlvbihmcmFtZVRpbWUpIHtcbiAqICAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnVwZGF0ZVBhcnRpY2xlcyhmcmFtZVRpbWUpO1xuICogICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gKiAgICAgfSk7XG4gKi9cbnZhciBQYXJ0aWNsZVJlbmRlcmFibGUgPSBSZW5kZXJhYmxlLmV4dGVuZCgvKiogQGxlbmRzIGNsYXkucGFydGljbGUuUGFydGljbGVSZW5kZXJhYmxlIyAqLyB7XG4gICAgLyoqXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgbG9vcDogdHJ1ZSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBvbmVzaG90OiBmYWxzZSxcbiAgICAvKipcbiAgICAgKiBEdXJhdGlvbiBvZiBwYXJ0aWNsZSBzeXN0ZW0gaW4gbWlsbGlzZWNvbmRzXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBkdXJhdGlvbjogMSxcblxuICAgIC8vIFVWIEFuaW1hdGlvblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICovXG4gICAgc3ByaXRlQW5pbWF0aW9uVGlsZVg6IDEsXG4gICAgLyoqXG4gICAgICogQHR5cGUge251bWJlcn1cbiAgICAgKi9cbiAgICBzcHJpdGVBbmltYXRpb25UaWxlWTogMSxcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAqL1xuICAgIHNwcml0ZUFuaW1hdGlvblJlcGVhdDogMCxcblxuICAgIG1vZGU6IFJlbmRlcmFibGUuUE9JTlRTLFxuXG4gICAgaWdub3JlUGlja2luZzogdHJ1ZSxcblxuICAgIF9lbGFwc2VkVGltZTogMCxcblxuICAgIF9lbWl0dGluZzogdHJ1ZVxuXG59LCBmdW5jdGlvbigpe1xuXG4gICAgdGhpcy5nZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgICAgIGR5bmFtaWM6IHRydWVcbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5tYXRlcmlhbCkge1xuICAgICAgICB0aGlzLm1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgIHNoYWRlcjogcGFydGljbGVTaGFkZXIsXG4gICAgICAgICAgICB0cmFuc3BhcmVudDogdHJ1ZSxcbiAgICAgICAgICAgIGRlcHRoTWFzazogZmFsc2VcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5tYXRlcmlhbC5lbmFibGVUZXh0dXJlKCdzcHJpdGUnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9wYXJ0aWNsZXMgPSBbXTtcbiAgICB0aGlzLl9maWVsZHMgPSBbXTtcbiAgICB0aGlzLl9lbWl0dGVycyA9IFtdO1xufSxcbi8qKiBAbGVuZHMgY2xheS5wYXJ0aWNsZS5QYXJ0aWNsZVJlbmRlcmFibGUucHJvdG90eXBlICovXG57XG5cbiAgICBjdWxsaW5nOiBmYWxzZSxcblxuICAgIGZydXN0dW1DdWxsaW5nOiBmYWxzZSxcblxuICAgIGNhc3RTaGFkb3c6IGZhbHNlLFxuICAgIHJlY2VpdmVTaGFkb3c6IGZhbHNlLFxuXG4gICAgLyoqXG4gICAgICogQWRkIGVtaXR0ZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkucGFydGljbGUuRW1pdHRlcn0gZW1pdHRlclxuICAgICAqL1xuICAgIGFkZEVtaXR0ZXI6IGZ1bmN0aW9uKGVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5fZW1pdHRlcnMucHVzaChlbWl0dGVyKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGVtaXR0ZXJcbiAgICAgKiBAcGFyYW0ge2NsYXkucGFydGljbGUuRW1pdHRlcn0gZW1pdHRlclxuICAgICAqL1xuICAgIHJlbW92ZUVtaXR0ZXI6IGZ1bmN0aW9uKGVtaXR0ZXIpIHtcbiAgICAgICAgdGhpcy5fZW1pdHRlcnMuc3BsaWNlKHRoaXMuX2VtaXR0ZXJzLmluZGV4T2YoZW1pdHRlciksIDEpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBBZGQgZmllbGRcbiAgICAgKiBAcGFyYW0ge2NsYXkucGFydGljbGUuRmllbGR9IGZpZWxkXG4gICAgICovXG4gICAgYWRkRmllbGQ6IGZ1bmN0aW9uKGZpZWxkKSB7XG4gICAgICAgIHRoaXMuX2ZpZWxkcy5wdXNoKGZpZWxkKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGZpZWxkXG4gICAgICogQHBhcmFtIHtjbGF5LnBhcnRpY2xlLkZpZWxkfSBmaWVsZFxuICAgICAqL1xuICAgIHJlbW92ZUZpZWxkOiBmdW5jdGlvbihmaWVsZCkge1xuICAgICAgICB0aGlzLl9maWVsZHMuc3BsaWNlKHRoaXMuX2ZpZWxkcy5pbmRleE9mKGZpZWxkKSwgMSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlc2V0IHRoZSBwYXJ0aWNsZSBzeXN0ZW0uXG4gICAgICovXG4gICAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBQdXQgYWxsIHRoZSBwYXJ0aWNsZXMgYmFja1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3BhcnRpY2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHAgPSB0aGlzLl9wYXJ0aWNsZXNbaV07XG4gICAgICAgICAgICBwLmVtaXR0ZXIua2lsbChwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9wYXJ0aWNsZXMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5fZWxhcHNlZFRpbWUgPSAwO1xuICAgICAgICB0aGlzLl9lbWl0dGluZyA9IHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSAge251bWJlcn0gZGVsdGFUaW1lXG4gICAgICovXG4gICAgdXBkYXRlUGFydGljbGVzOiBmdW5jdGlvbihkZWx0YVRpbWUpIHtcblxuICAgICAgICAvLyBNUyA9PiBTZWNvbmRzXG4gICAgICAgIGRlbHRhVGltZSAvPSAxMDAwO1xuICAgICAgICB0aGlzLl9lbGFwc2VkVGltZSArPSBkZWx0YVRpbWU7XG5cbiAgICAgICAgdmFyIHBhcnRpY2xlcyA9IHRoaXMuX3BhcnRpY2xlcztcblxuICAgICAgICBpZiAodGhpcy5fZW1pdHRpbmcpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZW1pdHRlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9lbWl0dGVyc1tpXS5lbWl0KHBhcnRpY2xlcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5vbmVzaG90KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fZW1pdHRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFnaW5nXG4gICAgICAgIHZhciBsZW4gPSBwYXJ0aWNsZXMubGVuZ3RoO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjspIHtcbiAgICAgICAgICAgIHZhciBwID0gcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgcC5hZ2UgKz0gZGVsdGFUaW1lO1xuICAgICAgICAgICAgaWYgKHAuYWdlID49IHAubGlmZSkge1xuICAgICAgICAgICAgICAgIHAuZW1pdHRlci5raWxsKHApO1xuICAgICAgICAgICAgICAgIHBhcnRpY2xlc1tpXSA9IHBhcnRpY2xlc1tsZW4tMV07XG4gICAgICAgICAgICAgICAgcGFydGljbGVzLnBvcCgpO1xuICAgICAgICAgICAgICAgIGxlbi0tO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAvLyBVcGRhdGVcbiAgICAgICAgICAgIHZhciBwID0gcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2ZpZWxkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB0aGlzLl9maWVsZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZmllbGRzW2pdLmFwcGx5VG8ocC52ZWxvY2l0eSwgcC5wb3NpdGlvbiwgcC53ZWlnaHQsIGRlbHRhVGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcC51cGRhdGUoZGVsdGFUaW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZlcnRpY2VzKCk7XG4gICAgfSxcblxuICAgIF91cGRhdGVWZXJ0aWNlczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBnZW9tZXRyeSA9IHRoaXMuZ2VvbWV0cnk7XG4gICAgICAgIC8vIElmIGhhcyB1diBhbmltYXRpb25cbiAgICAgICAgdmFyIGFuaW1UaWxlWCA9IHRoaXMuc3ByaXRlQW5pbWF0aW9uVGlsZVg7XG4gICAgICAgIHZhciBhbmltVGlsZVkgPSB0aGlzLnNwcml0ZUFuaW1hdGlvblRpbGVZO1xuICAgICAgICB2YXIgYW5pbVJlcGVhdCA9IHRoaXMuc3ByaXRlQW5pbWF0aW9uUmVwZWF0O1xuICAgICAgICB2YXIgblV2QW5pbUZyYW1lID0gYW5pbVRpbGVZICogYW5pbVRpbGVYICogYW5pbVJlcGVhdDtcbiAgICAgICAgdmFyIGhhc1V2QW5pbWF0aW9uID0gblV2QW5pbUZyYW1lID4gMTtcbiAgICAgICAgdmFyIHBvc2l0aW9ucyA9IGdlb21ldHJ5LmF0dHJpYnV0ZXMucG9zaXRpb24udmFsdWU7XG4gICAgICAgIC8vIFB1dCBwYXJ0aWNsZSBzdGF0dXMgaW4gbm9ybWFsXG4gICAgICAgIHZhciBub3JtYWxzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwudmFsdWU7XG4gICAgICAgIHZhciB1dnMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMC52YWx1ZTtcbiAgICAgICAgdmFyIHV2czIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMS52YWx1ZTtcblxuICAgICAgICB2YXIgbGVuID0gdGhpcy5fcGFydGljbGVzLmxlbmd0aDtcbiAgICAgICAgaWYgKCFwb3NpdGlvbnMgfHwgcG9zaXRpb25zLmxlbmd0aCAhPT0gbGVuICogMykge1xuICAgICAgICAgICAgLy8gVE9ETyBPcHRpbWl6ZVxuICAgICAgICAgICAgcG9zaXRpb25zID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbi52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkobGVuICogMyk7XG4gICAgICAgICAgICBub3JtYWxzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGxlbiAqIDMpO1xuICAgICAgICAgICAgaWYgKGhhc1V2QW5pbWF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdXZzID0gZ2VvbWV0cnkuYXR0cmlidXRlcy50ZXhjb29yZDAudmFsdWUgPSBuZXcgRmxvYXQzMkFycmF5KGxlbiAqIDIpO1xuICAgICAgICAgICAgICAgIHV2czIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMS52YWx1ZSA9IG5ldyBGbG9hdDMyQXJyYXkobGVuICogMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaW52QW5pbVRpbGVYID0gMSAvIGFuaW1UaWxlWDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHBhcnRpY2xlID0gdGhpcy5fcGFydGljbGVzW2ldO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IGkgKiAzO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCAzOyBqKyspIHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnNbb2Zmc2V0ICsgal0gPSBwYXJ0aWNsZS5wb3NpdGlvbi5hcnJheVtqXTtcbiAgICAgICAgICAgICAgICBub3JtYWxzW29mZnNldF0gPSBwYXJ0aWNsZS5hZ2UgLyBwYXJ0aWNsZS5saWZlO1xuICAgICAgICAgICAgICAgIC8vIG5vcm1hbHNbb2Zmc2V0ICsgMV0gPSBwYXJ0aWNsZS5yb3RhdGlvbjtcbiAgICAgICAgICAgICAgICBub3JtYWxzW29mZnNldCArIDFdID0gMDtcbiAgICAgICAgICAgICAgICBub3JtYWxzW29mZnNldCArIDJdID0gcGFydGljbGUuc3ByaXRlU2l6ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvZmZzZXQyID0gaSAqIDI7XG4gICAgICAgICAgICBpZiAoaGFzVXZBbmltYXRpb24pIHtcbiAgICAgICAgICAgICAgICAvLyBUT0RPXG4gICAgICAgICAgICAgICAgdmFyIHAgPSBwYXJ0aWNsZS5hZ2UgLyBwYXJ0aWNsZS5saWZlO1xuICAgICAgICAgICAgICAgIHZhciBzdGFnZSA9IE1hdGgucm91bmQocCAqIChuVXZBbmltRnJhbWUgLSAxKSkgKiBhbmltUmVwZWF0O1xuICAgICAgICAgICAgICAgIHZhciB2ID0gTWF0aC5mbG9vcihzdGFnZSAqIGludkFuaW1UaWxlWCk7XG4gICAgICAgICAgICAgICAgdmFyIHUgPSBzdGFnZSAtIHYgKiBhbmltVGlsZVg7XG4gICAgICAgICAgICAgICAgdXZzW29mZnNldDJdID0gdSAvIGFuaW1UaWxlWDtcbiAgICAgICAgICAgICAgICB1dnNbb2Zmc2V0MiArIDFdID0gMSAtIHYgLyBhbmltVGlsZVk7XG4gICAgICAgICAgICAgICAgdXZzMltvZmZzZXQyXSA9ICh1ICsgMSkgLyBhbmltVGlsZVg7XG4gICAgICAgICAgICAgICAgdXZzMltvZmZzZXQyICsgMV0gPSAxIC0gKHYgKyAxKSAvIGFuaW1UaWxlWTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGdlb21ldHJ5LmRpcnR5KCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNGaW5pc2hlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9lbGFwc2VkVGltZSA+IHRoaXMuZHVyYXRpb24gJiYgIXRoaXMubG9vcDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtICB7Y2xheS5SZW5kZXJlcn0gcmVuZGVyZXJcbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbihyZW5kZXJlcikge1xuICAgICAgICAvLyBQdXQgYWxsIHRoZSBwYXJ0aWNsZXMgYmFja1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX3BhcnRpY2xlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHAgPSB0aGlzLl9wYXJ0aWNsZXNbaV07XG4gICAgICAgICAgICBwLmVtaXR0ZXIua2lsbChwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmdlb21ldHJ5LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICAvLyBUT0RPIERpc3Bvc2UgdGV4dHVyZSA/XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge2NsYXkucGFydGljbGUuUGFydGljbGVSZW5kZXJhYmxlfVxuICAgICAqL1xuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHBhcnRpY2xlUmVuZGVyYWJsZSA9IG5ldyBQYXJ0aWNsZVJlbmRlcmFibGUoe1xuICAgICAgICAgICAgbWF0ZXJpYWw6IHRoaXMubWF0ZXJpYWxcbiAgICAgICAgfSk7XG4gICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5sb29wID0gdGhpcy5sb29wO1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUuZHVyYXRpb24gPSB0aGlzLmR1cmF0aW9uO1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUub25lc2hvdCA9IHRoaXMub25lc2hvdDtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnNwcml0ZUFuaW1hdGlvblJlcGVhdCA9IHRoaXMuc3ByaXRlQW5pbWF0aW9uUmVwZWF0O1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUuc3ByaXRlQW5pbWF0aW9uVGlsZVkgPSB0aGlzLnNwcml0ZUFuaW1hdGlvblRpbGVZO1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUuc3ByaXRlQW5pbWF0aW9uVGlsZVggPSB0aGlzLnNwcml0ZUFuaW1hdGlvblRpbGVYO1xuXG4gICAgICAgIHBhcnRpY2xlUmVuZGVyYWJsZS5wb3NpdGlvbi5jb3B5KHRoaXMucG9zaXRpb24pO1xuICAgICAgICBwYXJ0aWNsZVJlbmRlcmFibGUucm90YXRpb24uY29weSh0aGlzLnJvdGF0aW9uKTtcbiAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLnNjYWxlLmNvcHkodGhpcy5zY2FsZSk7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgcGFydGljbGVSZW5kZXJhYmxlLmFkZCh0aGlzLl9jaGlsZHJlbltpXS5jbG9uZSgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFydGljbGVSZW5kZXJhYmxlO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBQYXJ0aWNsZVJlbmRlcmFibGU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGFydGljbGUvUGFydGljbGVSZW5kZXJhYmxlLmpzXG4vLyBtb2R1bGUgaWQgPSAxODFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///181\n");

/***/ }),
/* 182 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.particle.vertex\\nuniform mat4 worldView : WORLDVIEW;\\nuniform mat4 projection : PROJECTION;\\nattribute vec3 position : POSITION;\\nattribute vec3 normal : NORMAL;\\n#ifdef UV_ANIMATION\\nattribute vec2 texcoord0 : TEXCOORD_0;\\nattribute vec2 texcoord1 : TEXCOORD_1;\\nvarying vec2 v_Uv0;\\nvarying vec2 v_Uv1;\\n#endif\\nvarying float v_Age;\\nvoid main() {\\n v_Age = normal.x;\\n float rotation = normal.y;\\n vec4 worldViewPosition = worldView * vec4(position, 1.0);\\n gl_Position = projection * worldViewPosition;\\n float w = gl_Position.w;\\n gl_PointSize = normal.z * projection[0].x / w;\\n #ifdef UV_ANIMATION\\n v_Uv0 = texcoord0;\\n v_Uv1 = texcoord1;\\n #endif\\n}\\n@end\\n@export clay.particle.fragment\\nuniform sampler2D sprite;\\nuniform sampler2D gradient;\\nuniform vec3 color : [1.0, 1.0, 1.0];\\nuniform float alpha : 1.0;\\nvarying float v_Age;\\n#ifdef UV_ANIMATION\\nvarying vec2 v_Uv0;\\nvarying vec2 v_Uv1;\\n#endif\\nvoid main() {\\n vec4 color = vec4(color, alpha);\\n #ifdef SPRITE_ENABLED\\n #ifdef UV_ANIMATION\\n color *= texture2D(sprite, mix(v_Uv0, v_Uv1, gl_PointCoord));\\n #else\\n color *= texture2D(sprite, gl_PointCoord);\\n #endif\\n #endif\\n #ifdef GRADIENT_ENABLED\\n color *= texture2D(gradient, vec2(v_Age, 0.5));\\n #endif\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9wYXJ0aWNsZS5nbHNsLmpzP2YxYTEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNsYXkucGFydGljbGUudmVydGV4XFxudW5pZm9ybSBtYXQ0IHdvcmxkVmlldyA6IFdPUkxEVklFVztcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbiA6IFBST0pFQ1RJT047XFxuYXR0cmlidXRlIHZlYzMgcG9zaXRpb24gOiBQT1NJVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBub3JtYWwgOiBOT1JNQUw7XFxuI2lmZGVmIFVWX0FOSU1BVElPTlxcbmF0dHJpYnV0ZSB2ZWMyIHRleGNvb3JkMCA6IFRFWENPT1JEXzA7XFxuYXR0cmlidXRlIHZlYzIgdGV4Y29vcmQxIDogVEVYQ09PUkRfMTtcXG52YXJ5aW5nIHZlYzIgdl9VdjA7XFxudmFyeWluZyB2ZWMyIHZfVXYxO1xcbiNlbmRpZlxcbnZhcnlpbmcgZmxvYXQgdl9BZ2U7XFxudm9pZCBtYWluKCkge1xcbiB2X0FnZSA9IG5vcm1hbC54O1xcbiBmbG9hdCByb3RhdGlvbiA9IG5vcm1hbC55O1xcbiB2ZWM0IHdvcmxkVmlld1Bvc2l0aW9uID0gd29ybGRWaWV3ICogdmVjNChwb3NpdGlvbiwgMS4wKTtcXG4gZ2xfUG9zaXRpb24gPSBwcm9qZWN0aW9uICogd29ybGRWaWV3UG9zaXRpb247XFxuIGZsb2F0IHcgPSBnbF9Qb3NpdGlvbi53O1xcbiBnbF9Qb2ludFNpemUgPSBub3JtYWwueiAqIHByb2plY3Rpb25bMF0ueCAvIHc7XFxuICNpZmRlZiBVVl9BTklNQVRJT05cXG4gdl9VdjAgPSB0ZXhjb29yZDA7XFxuIHZfVXYxID0gdGV4Y29vcmQxO1xcbiAjZW5kaWZcXG59XFxuQGVuZFxcbkBleHBvcnQgY2xheS5wYXJ0aWNsZS5mcmFnbWVudFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNwcml0ZTtcXG51bmlmb3JtIHNhbXBsZXIyRCBncmFkaWVudDtcXG51bmlmb3JtIHZlYzMgY29sb3IgOiBbMS4wLCAxLjAsIDEuMF07XFxudW5pZm9ybSBmbG9hdCBhbHBoYSA6IDEuMDtcXG52YXJ5aW5nIGZsb2F0IHZfQWdlO1xcbiNpZmRlZiBVVl9BTklNQVRJT05cXG52YXJ5aW5nIHZlYzIgdl9VdjA7XFxudmFyeWluZyB2ZWMyIHZfVXYxO1xcbiNlbmRpZlxcbnZvaWQgbWFpbigpIHtcXG4gdmVjNCBjb2xvciA9IHZlYzQoY29sb3IsIGFscGhhKTtcXG4gI2lmZGVmIFNQUklURV9FTkFCTEVEXFxuICNpZmRlZiBVVl9BTklNQVRJT05cXG4gY29sb3IgKj0gdGV4dHVyZTJEKHNwcml0ZSwgbWl4KHZfVXYwLCB2X1V2MSwgZ2xfUG9pbnRDb29yZCkpO1xcbiAjZWxzZVxcbiBjb2xvciAqPSB0ZXh0dXJlMkQoc3ByaXRlLCBnbF9Qb2ludENvb3JkKTtcXG4gI2VuZGlmXFxuICNlbmRpZlxcbiAjaWZkZWYgR1JBRElFTlRfRU5BQkxFRFxcbiBjb2xvciAqPSB0ZXh0dXJlMkQoZ3JhZGllbnQsIHZlYzIodl9BZ2UsIDAuNSkpO1xcbiAjZW5kaWZcXG4gZ2xfRnJhZ0NvbG9yID0gY29sb3I7XFxufVxcbkBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wYXJ0aWNsZS9wYXJ0aWNsZS5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxODJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///182\n");

/***/ }),
/* 183 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Texture2D__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__color_glsl_js__ = __webpack_require__(184);\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_5__color_glsl_js__[\"a\" /* default */]);\n\n/**\n * Pixel picking is gpu based picking, which is fast and accurate.\n * But not like ray picking, it can't get the intersection point and triangle.\n * @constructor clay.picking.PixelPicking\n * @extends clay.core.Base\n */\nvar PixelPicking = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.picking.PixelPicking# */ {\n        /**\n         * Target renderer\n         * @type {clay.Renderer}\n         */\n        renderer: null,\n        /**\n         * Downsample ratio of hidden frame buffer\n         * @type {number}\n         */\n        downSampleRatio: 1,\n\n        width: 100,\n        height: 100,\n\n        lookupOffset: 1,\n\n        _frameBuffer: null,\n        _texture: null,\n        _shader: null,\n\n        _idMaterials: [],\n        _lookupTable: [],\n\n        _meshMaterials: [],\n\n        _idOffset: 0\n    };\n}, function() {\n    if (this.renderer) {\n        this.width = this.renderer.getWidth();\n        this.height = this.renderer.getHeight();\n    }\n    this._init();\n}, /** @lends clay.picking.PixelPicking.prototype */ {\n    _init: function() {\n        this._texture = new __WEBPACK_IMPORTED_MODULE_2__Texture2D__[\"a\" /* default */]({\n            width: this.width * this.downSampleRatio,\n            height: this.height * this.downSampleRatio\n        });\n        this._frameBuffer = new __WEBPACK_IMPORTED_MODULE_1__FrameBuffer__[\"a\" /* default */]();\n\n        this._shader = new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */](__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.picking.color.vertex'), __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.picking.color.fragment'));\n    },\n    /**\n     * Set picking presision\n     * @param {number} ratio\n     */\n    setPrecision: function(ratio) {\n        this._texture.width = this.width * ratio;\n        this._texture.height = this.height * ratio;\n        this.downSampleRatio = ratio;\n    },\n    resize: function(width, height) {\n        this._texture.width = width * this.downSampleRatio;\n        this._texture.height = height * this.downSampleRatio;\n        this.width = width;\n        this.height = height;\n        this._texture.dirty();\n    },\n    /**\n     * Update the picking framebuffer\n     * @param {number} ratio\n     */\n    update: function(scene, camera) {\n        var renderer = this.renderer;\n        if (renderer.getWidth() !== this.width || renderer.getHeight() !== this.height) {\n            this.resize(renderer.width, renderer.height);\n        }\n\n        this._frameBuffer.attach(this._texture);\n        this._frameBuffer.bind(renderer);\n        this._idOffset = this.lookupOffset;\n        this._setMaterial(scene);\n        renderer.render(scene, camera);\n        this._restoreMaterial();\n        this._frameBuffer.unbind(renderer);\n    },\n\n    _setMaterial: function(root) {\n        for (var i =0; i < root._children.length; i++) {\n            var child = root._children[i];\n            if (child.geometry && child.material && child.material.shader) {\n                var id = this._idOffset++;\n                var idx = id - this.lookupOffset;\n                var material = this._idMaterials[idx];\n                if (!material) {\n                    material = new __WEBPACK_IMPORTED_MODULE_4__Material__[\"a\" /* default */]({\n                        shader: this._shader\n                    });\n                    var color = packID(id);\n                    color[0] /= 255;\n                    color[1] /= 255;\n                    color[2] /= 255;\n                    color[3] = 1.0;\n                    material.set('color', color);\n                    this._idMaterials[idx] = material;\n                }\n                this._meshMaterials[idx] = child.material;\n                this._lookupTable[idx] = child;\n                child.material = material;\n            }\n            if (child._children.length) {\n                this._setMaterial(child);\n            }\n        }\n    },\n\n    /**\n     * Pick the object\n     * @param  {number} x Mouse position x\n     * @param  {number} y Mouse position y\n     * @return {clay.Node}\n     */\n    pick: function(x, y) {\n        var renderer = this.renderer;\n\n        var ratio = this.downSampleRatio;\n        x = Math.ceil(ratio * x);\n        y = Math.ceil(ratio * (this.height - y));\n\n        this._frameBuffer.bind(renderer);\n        var pixel = new Uint8Array(4);\n        var _gl = renderer.gl;\n        // TODO out of bounds ?\n        // preserveDrawingBuffer ?\n        _gl.readPixels(x, y, 1, 1, _gl.RGBA, _gl.UNSIGNED_BYTE, pixel);\n        this._frameBuffer.unbind(renderer);\n        // Skip interpolated pixel because of anti alias\n        if (pixel[3] === 255) {\n            var id = unpackID(pixel[0], pixel[1], pixel[2]);\n            if (id) {\n                var el = this._lookupTable[id - this.lookupOffset];\n                return el;\n            }\n        }\n    },\n\n    _restoreMaterial: function() {\n        for (var i = 0; i < this._lookupTable.length; i++) {\n            this._lookupTable[i].material = this._meshMaterials[i];\n        }\n    },\n\n    dispose: function(renderer) {\n        this._frameBuffer.dispose(renderer);\n    }\n});\n\nfunction packID(id){\n    var r = id >> 16;\n    var g = (id - (r << 8)) >> 8;\n    var b = id - (r << 16) - (g<<8);\n    return [r, g, b];\n}\n\nfunction unpackID(r, g, b){\n    return (r << 16) + (g<<8) + b;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (PixelPicking);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTgzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9waWNraW5nL1BpeGVsUGlja2luZy5qcz9hNDE5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBCYXNlIGZyb20gJy4uL2NvcmUvQmFzZSc7XG5pbXBvcnQgRnJhbWVCdWZmZXIgZnJvbSAnLi4vRnJhbWVCdWZmZXInO1xuaW1wb3J0IFRleHR1cmUyRCBmcm9tICcuLi9UZXh0dXJlMkQnO1xuaW1wb3J0IFNoYWRlciBmcm9tICcuLi9TaGFkZXInO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL01hdGVyaWFsJztcblxuaW1wb3J0IGNvbG9yRXNzbCBmcm9tICcuL2NvbG9yLmdsc2wuanMnO1xuU2hhZGVyLmltcG9ydChjb2xvckVzc2wpO1xuXG4vKipcbiAqIFBpeGVsIHBpY2tpbmcgaXMgZ3B1IGJhc2VkIHBpY2tpbmcsIHdoaWNoIGlzIGZhc3QgYW5kIGFjY3VyYXRlLlxuICogQnV0IG5vdCBsaWtlIHJheSBwaWNraW5nLCBpdCBjYW4ndCBnZXQgdGhlIGludGVyc2VjdGlvbiBwb2ludCBhbmQgdHJpYW5nbGUuXG4gKiBAY29uc3RydWN0b3IgY2xheS5waWNraW5nLlBpeGVsUGlja2luZ1xuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIFBpeGVsUGlja2luZyA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkucGlja2luZy5QaXhlbFBpY2tpbmcjICovIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRhcmdldCByZW5kZXJlclxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5SZW5kZXJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHJlbmRlcmVyOiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogRG93bnNhbXBsZSByYXRpbyBvZiBoaWRkZW4gZnJhbWUgYnVmZmVyXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBkb3duU2FtcGxlUmF0aW86IDEsXG5cbiAgICAgICAgd2lkdGg6IDEwMCxcbiAgICAgICAgaGVpZ2h0OiAxMDAsXG5cbiAgICAgICAgbG9va3VwT2Zmc2V0OiAxLFxuXG4gICAgICAgIF9mcmFtZUJ1ZmZlcjogbnVsbCxcbiAgICAgICAgX3RleHR1cmU6IG51bGwsXG4gICAgICAgIF9zaGFkZXI6IG51bGwsXG5cbiAgICAgICAgX2lkTWF0ZXJpYWxzOiBbXSxcbiAgICAgICAgX2xvb2t1cFRhYmxlOiBbXSxcblxuICAgICAgICBfbWVzaE1hdGVyaWFsczogW10sXG5cbiAgICAgICAgX2lkT2Zmc2V0OiAwXG4gICAgfTtcbn0sIGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLnJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMud2lkdGggPSB0aGlzLnJlbmRlcmVyLmdldFdpZHRoKCk7XG4gICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy5yZW5kZXJlci5nZXRIZWlnaHQoKTtcbiAgICB9XG4gICAgdGhpcy5faW5pdCgpO1xufSwgLyoqIEBsZW5kcyBjbGF5LnBpY2tpbmcuUGl4ZWxQaWNraW5nLnByb3RvdHlwZSAqLyB7XG4gICAgX2luaXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLl90ZXh0dXJlID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgICAgICB3aWR0aDogdGhpcy53aWR0aCAqIHRoaXMuZG93blNhbXBsZVJhdGlvLFxuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLmhlaWdodCAqIHRoaXMuZG93blNhbXBsZVJhdGlvXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuXG4gICAgICAgIHRoaXMuX3NoYWRlciA9IG5ldyBTaGFkZXIoU2hhZGVyLnNvdXJjZSgnY2xheS5waWNraW5nLmNvbG9yLnZlcnRleCcpLCBTaGFkZXIuc291cmNlKCdjbGF5LnBpY2tpbmcuY29sb3IuZnJhZ21lbnQnKSk7XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBTZXQgcGlja2luZyBwcmVzaXNpb25cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gcmF0aW9cbiAgICAgKi9cbiAgICBzZXRQcmVjaXNpb246IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgICAgIHRoaXMuX3RleHR1cmUud2lkdGggPSB0aGlzLndpZHRoICogcmF0aW87XG4gICAgICAgIHRoaXMuX3RleHR1cmUuaGVpZ2h0ID0gdGhpcy5oZWlnaHQgKiByYXRpbztcbiAgICAgICAgdGhpcy5kb3duU2FtcGxlUmF0aW8gPSByYXRpbztcbiAgICB9LFxuICAgIHJlc2l6ZTogZnVuY3Rpb24od2lkdGgsIGhlaWdodCkge1xuICAgICAgICB0aGlzLl90ZXh0dXJlLndpZHRoID0gd2lkdGggKiB0aGlzLmRvd25TYW1wbGVSYXRpbztcbiAgICAgICAgdGhpcy5fdGV4dHVyZS5oZWlnaHQgPSBoZWlnaHQgKiB0aGlzLmRvd25TYW1wbGVSYXRpbztcbiAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fdGV4dHVyZS5kaXJ0eSgpO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwaWNraW5nIGZyYW1lYnVmZmVyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhdGlvXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbihzY2VuZSwgY2FtZXJhKSB7XG4gICAgICAgIHZhciByZW5kZXJlciA9IHRoaXMucmVuZGVyZXI7XG4gICAgICAgIGlmIChyZW5kZXJlci5nZXRXaWR0aCgpICE9PSB0aGlzLndpZHRoIHx8IHJlbmRlcmVyLmdldEhlaWdodCgpICE9PSB0aGlzLmhlaWdodCkge1xuICAgICAgICAgICAgdGhpcy5yZXNpemUocmVuZGVyZXIud2lkdGgsIHJlbmRlcmVyLmhlaWdodCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci5hdHRhY2godGhpcy5fdGV4dHVyZSk7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9pZE9mZnNldCA9IHRoaXMubG9va3VwT2Zmc2V0O1xuICAgICAgICB0aGlzLl9zZXRNYXRlcmlhbChzY2VuZSk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgICAgICAgdGhpcy5fcmVzdG9yZU1hdGVyaWFsKCk7XG4gICAgICAgIHRoaXMuX2ZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG4gICAgfSxcblxuICAgIF9zZXRNYXRlcmlhbDogZnVuY3Rpb24ocm9vdCkge1xuICAgICAgICBmb3IgKHZhciBpID0wOyBpIDwgcm9vdC5fY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBjaGlsZCA9IHJvb3QuX2NoaWxkcmVuW2ldO1xuICAgICAgICAgICAgaWYgKGNoaWxkLmdlb21ldHJ5ICYmIGNoaWxkLm1hdGVyaWFsICYmIGNoaWxkLm1hdGVyaWFsLnNoYWRlcikge1xuICAgICAgICAgICAgICAgIHZhciBpZCA9IHRoaXMuX2lkT2Zmc2V0Kys7XG4gICAgICAgICAgICAgICAgdmFyIGlkeCA9IGlkIC0gdGhpcy5sb29rdXBPZmZzZXQ7XG4gICAgICAgICAgICAgICAgdmFyIG1hdGVyaWFsID0gdGhpcy5faWRNYXRlcmlhbHNbaWR4XTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNoYWRlcjogdGhpcy5fc2hhZGVyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29sb3IgPSBwYWNrSUQoaWQpO1xuICAgICAgICAgICAgICAgICAgICBjb2xvclswXSAvPSAyNTU7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yWzFdIC89IDI1NTtcbiAgICAgICAgICAgICAgICAgICAgY29sb3JbMl0gLz0gMjU1O1xuICAgICAgICAgICAgICAgICAgICBjb2xvclszXSA9IDEuMDtcbiAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWwuc2V0KCdjb2xvcicsIGNvbG9yKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faWRNYXRlcmlhbHNbaWR4XSA9IG1hdGVyaWFsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLl9tZXNoTWF0ZXJpYWxzW2lkeF0gPSBjaGlsZC5tYXRlcmlhbDtcbiAgICAgICAgICAgICAgICB0aGlzLl9sb29rdXBUYWJsZVtpZHhdID0gY2hpbGQ7XG4gICAgICAgICAgICAgICAgY2hpbGQubWF0ZXJpYWwgPSBtYXRlcmlhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjaGlsZC5fY2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0TWF0ZXJpYWwoY2hpbGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFBpY2sgdGhlIG9iamVjdFxuICAgICAqIEBwYXJhbSAge251bWJlcn0geCBNb3VzZSBwb3NpdGlvbiB4XG4gICAgICogQHBhcmFtICB7bnVtYmVyfSB5IE1vdXNlIHBvc2l0aW9uIHlcbiAgICAgKiBAcmV0dXJuIHtjbGF5Lk5vZGV9XG4gICAgICovXG4gICAgcGljazogZnVuY3Rpb24oeCwgeSkge1xuICAgICAgICB2YXIgcmVuZGVyZXIgPSB0aGlzLnJlbmRlcmVyO1xuXG4gICAgICAgIHZhciByYXRpbyA9IHRoaXMuZG93blNhbXBsZVJhdGlvO1xuICAgICAgICB4ID0gTWF0aC5jZWlsKHJhdGlvICogeCk7XG4gICAgICAgIHkgPSBNYXRoLmNlaWwocmF0aW8gKiAodGhpcy5oZWlnaHQgLSB5KSk7XG5cbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgICAgIHZhciBwaXhlbCA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgICAgICB2YXIgX2dsID0gcmVuZGVyZXIuZ2w7XG4gICAgICAgIC8vIFRPRE8gb3V0IG9mIGJvdW5kcyA/XG4gICAgICAgIC8vIHByZXNlcnZlRHJhd2luZ0J1ZmZlciA/XG4gICAgICAgIF9nbC5yZWFkUGl4ZWxzKHgsIHksIDEsIDEsIF9nbC5SR0JBLCBfZ2wuVU5TSUdORURfQllURSwgcGl4ZWwpO1xuICAgICAgICB0aGlzLl9mcmFtZUJ1ZmZlci51bmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAvLyBTa2lwIGludGVycG9sYXRlZCBwaXhlbCBiZWNhdXNlIG9mIGFudGkgYWxpYXNcbiAgICAgICAgaWYgKHBpeGVsWzNdID09PSAyNTUpIHtcbiAgICAgICAgICAgIHZhciBpZCA9IHVucGFja0lEKHBpeGVsWzBdLCBwaXhlbFsxXSwgcGl4ZWxbMl0pO1xuICAgICAgICAgICAgaWYgKGlkKSB7XG4gICAgICAgICAgICAgICAgdmFyIGVsID0gdGhpcy5fbG9va3VwVGFibGVbaWQgLSB0aGlzLmxvb2t1cE9mZnNldF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9yZXN0b3JlTWF0ZXJpYWw6IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2xvb2t1cFRhYmxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLl9sb29rdXBUYWJsZVtpXS5tYXRlcmlhbCA9IHRoaXMuX21lc2hNYXRlcmlhbHNbaV07XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZGlzcG9zZTogZnVuY3Rpb24ocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fZnJhbWVCdWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIHBhY2tJRChpZCl7XG4gICAgdmFyIHIgPSBpZCA+PiAxNjtcbiAgICB2YXIgZyA9IChpZCAtIChyIDw8IDgpKSA+PiA4O1xuICAgIHZhciBiID0gaWQgLSAociA8PCAxNikgLSAoZzw8OCk7XG4gICAgcmV0dXJuIFtyLCBnLCBiXTtcbn1cblxuZnVuY3Rpb24gdW5wYWNrSUQociwgZywgYil7XG4gICAgcmV0dXJuIChyIDw8IDE2KSArIChnPDw4KSArIGI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBpeGVsUGlja2luZztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9waWNraW5nL1BpeGVsUGlja2luZy5qc1xuLy8gbW9kdWxlIGlkID0gMTgzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///183\n");

/***/ }),
/* 184 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.picking.color.vertex\\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\\nattribute vec3 position : POSITION;\\n@import clay.chunk.skinning_header\\nvoid main(){\\n vec3 skinnedPosition = position;\\n #ifdef SKINNING\\n @import clay.chunk.skin_matrix\\n skinnedPosition = (skinMatrixWS * vec4(position, 1.0)).xyz;\\n #endif\\n gl_Position = worldViewProjection * vec4(skinnedPosition, 1.0);\\n}\\n@end\\n@end\\n@export clay.picking.color.fragment\\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\\nvoid main() {\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9waWNraW5nL2NvbG9yLmdsc2wuanM/ZDIxOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2xheS5waWNraW5nLmNvbG9yLnZlcnRleFxcbnVuaWZvcm0gbWF0NCB3b3JsZFZpZXdQcm9qZWN0aW9uIDogV09STERWSUVXUFJPSkVDVElPTjtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbiA6IFBPU0lUSU9OO1xcbkBpbXBvcnQgY2xheS5jaHVuay5za2lubmluZ19oZWFkZXJcXG52b2lkIG1haW4oKXtcXG4gdmVjMyBza2lubmVkUG9zaXRpb24gPSBwb3NpdGlvbjtcXG4gI2lmZGVmIFNLSU5OSU5HXFxuIEBpbXBvcnQgY2xheS5jaHVuay5za2luX21hdHJpeFxcbiBza2lubmVkUG9zaXRpb24gPSAoc2tpbk1hdHJpeFdTICogdmVjNChwb3NpdGlvbiwgMS4wKSkueHl6O1xcbiAjZW5kaWZcXG4gZ2xfUG9zaXRpb24gPSB3b3JsZFZpZXdQcm9qZWN0aW9uICogdmVjNChza2lubmVkUG9zaXRpb24sIDEuMCk7XFxufVxcbkBlbmRcXG5AZW5kXFxuQGV4cG9ydCBjbGF5LnBpY2tpbmcuY29sb3IuZnJhZ21lbnRcXG51bmlmb3JtIHZlYzQgY29sb3IgOiBbMS4wLCAxLjAsIDEuMCwgMS4wXTtcXG52b2lkIG1haW4oKSB7XFxuIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGlja2luZy9jb2xvci5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAxODRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///184\n");

/***/ }),
/* 185 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n\n\n\n\nvar doc = typeof document === 'undefined' ? {} : document;\n\n/**\n * @constructor clay.plugin.FreeControl\n * @example\n *     var control = new clay.plugin.FreeControl({\n *         target: camera,\n *         domElement: renderer.canvas\n *     });\n *     ...\n *     timeline.on('frame', function(frameTime) {\n *         control.update(frameTime);\n *         renderer.render(scene, camera);\n *     });\n */\nvar FreeControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n    return /** @lends clay.plugin.FreeControl# */ {\n        /**\n         * Scene node to control, mostly it is a camera\n         * @type {clay.Node}\n         */\n        target: null,\n\n        /**\n         * Target dom to bind with mouse events\n         * @type {HTMLElement}\n         */\n        domElement: null,\n\n        /**\n         * Mouse move sensitivity\n         * @type {number}\n         */\n        sensitivity: 1,\n\n        /**\n         * Target move speed\n         * @type {number}\n         */\n        speed: 0.4,\n\n        /**\n         * Up axis\n         * @type {clay.Vector3}\n         */\n        up: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](0, 1, 0),\n\n        /**\n         * If lock vertical movement\n         * @type {boolean}\n         */\n        verticalMoveLock: false,\n\n        /**\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        _moveForward: false,\n        _moveBackward: false,\n        _moveLeft: false,\n        _moveRight: false,\n\n        _offsetPitch: 0,\n        _offsetRoll: 0\n    };\n}, function() {\n    this._lockChange = this._lockChange.bind(this);\n    this._keyDown = this._keyDown.bind(this);\n    this._keyUp = this._keyUp.bind(this);\n    this._mouseMove = this._mouseMove.bind(this);\n\n    if (this.domElement) {\n        this.init();\n    }\n},\n/** @lends clay.plugin.FreeControl.prototype */\n{\n    /**\n     * init control\n     */\n    init: function() {\n        // Use pointer lock\n        // http://www.html5rocks.com/en/tutorials/pointerlock/intro/\n        var el = this.domElement;\n\n        //Must request pointer lock after click event, can't not do it directly\n        //Why ? ?\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(el, 'click', this._requestPointerLock);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'pointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'mozpointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'webkitpointerlockchange', this._lockChange);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'keydown', this._keyDown);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'keyup', this._keyUp);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this._detectMovementChange, this);\n        }\n    },\n\n    /**\n     * Dispose control\n     */\n    dispose: function() {\n\n        var el = this.domElement;\n\n        el.exitPointerLock = el.exitPointerLock\n            || el.mozExitPointerLock\n            || el.webkitExitPointerLock;\n\n        if (el.exitPointerLock) {\n            el.exitPointerLock();\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(el, 'click', this._requestPointerLock);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'pointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'mozpointerlockchange', this._lockChange);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'webkitpointerlockchange', this._lockChange);\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'keydown', this._keyDown);\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'keyup', this._keyUp);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this._detectMovementChange);\n        }\n    },\n\n    _requestPointerLock: function() {\n        var el = this;\n        el.requestPointerLock = el.requestPointerLock\n            || el.mozRequestPointerLock\n            || el.webkitRequestPointerLock;\n\n        el.requestPointerLock();\n    },\n\n    /**\n     * Control update. Should be invoked every frame\n     * @param {number} frameTime Frame time\n     */\n    update: function (frameTime) {\n        var target = this.target;\n\n        var position = this.target.position;\n        var xAxis = target.localTransform.x.normalize();\n        var zAxis = target.localTransform.z.normalize();\n\n        if (this.verticalMoveLock) {\n            zAxis.y = 0;\n            zAxis.normalize();\n        }\n\n        var speed = this.speed * frameTime / 20;\n\n        if (this._moveForward) {\n            // Opposite direction of z\n            position.scaleAndAdd(zAxis, -speed);\n        }\n        if (this._moveBackward) {\n            position.scaleAndAdd(zAxis, speed);\n        }\n        if (this._moveLeft) {\n            position.scaleAndAdd(xAxis, -speed / 2);\n        }\n        if (this._moveRight) {\n            position.scaleAndAdd(xAxis, speed / 2);\n        }\n\n        target.rotateAround(target.position, this.up, -this._offsetPitch * frameTime * Math.PI / 360);\n        var xAxis = target.localTransform.x;\n        target.rotateAround(target.position, xAxis, -this._offsetRoll * frameTime * Math.PI / 360);\n\n        this._offsetRoll = this._offsetPitch = 0;\n    },\n\n    _lockChange: function() {\n        if (\n            doc.pointerLockElement === this.domElement\n            || doc.mozPointerLockElement === this.domElement\n            || doc.webkitPointerLockElement === this.domElement\n        ) {\n            __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(doc, 'mousemove', this._mouseMove, false);\n        }\n        else {\n            __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(doc, 'mousemove', this._mouseMove);\n        }\n    },\n\n    _mouseMove: function(e) {\n        var dx = e.movementX || e.mozMovementX || e.webkitMovementX || 0;\n        var dy = e.movementY || e.mozMovementY || e.webkitMovementY || 0;\n\n        this._offsetPitch += dx * this.sensitivity / 200;\n        this._offsetRoll += dy * this.sensitivity / 200;\n\n        // Trigger change event to remind renderer do render\n        this.trigger('change');\n    },\n\n    _detectMovementChange: function (frameTime) {\n        if (this._moveForward || this._moveBackward || this._moveLeft || this._moveRight) {\n            this.trigger('change');\n        }\n        this.update(frameTime);\n    },\n\n    _keyDown: function(e) {\n        switch(e.keyCode) {\n            case 87: //w\n            case 37: //up arrow\n                this._moveForward = true;\n                break;\n            case 83: //s\n            case 40: //down arrow\n                this._moveBackward = true;\n                break;\n            case 65: //a\n            case 37: //left arrow\n                this._moveLeft = true;\n                break;\n            case 68: //d\n            case 39: //right arrow\n                this._moveRight = true;\n                break;\n        }\n        // Trigger change event to remind renderer do render\n        this.trigger('change');\n    },\n\n    _keyUp: function(e) {\n        switch(e.keyCode) {\n            case 87: //w\n            case 37: //up arrow\n                this._moveForward = false;\n                break;\n            case 83: //s\n            case 40: //down arrow\n                this._moveBackward = false;\n                break;\n            case 65: //a\n            case 37: //left arrow\n                this._moveLeft = false;\n                break;\n            case 68: //d\n            case 39: //right arrow\n                this._moveRight = false;\n                break;\n        }\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (FreeControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vRnJlZUNvbnRyb2wuanM/N2QwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuXG52YXIgZG9jID0gdHlwZW9mIGRvY3VtZW50ID09PSAndW5kZWZpbmVkJyA/IHt9IDogZG9jdW1lbnQ7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGx1Z2luLkZyZWVDb250cm9sXG4gKiBAZXhhbXBsZVxuICogICAgIHZhciBjb250cm9sID0gbmV3IGNsYXkucGx1Z2luLkZyZWVDb250cm9sKHtcbiAqICAgICAgICAgdGFyZ2V0OiBjYW1lcmEsXG4gKiAgICAgICAgIGRvbUVsZW1lbnQ6IHJlbmRlcmVyLmNhbnZhc1xuICogICAgIH0pO1xuICogICAgIC4uLlxuICogICAgIHRpbWVsaW5lLm9uKCdmcmFtZScsIGZ1bmN0aW9uKGZyYW1lVGltZSkge1xuICogICAgICAgICBjb250cm9sLnVwZGF0ZShmcmFtZVRpbWUpO1xuICogICAgICAgICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7XG4gKiAgICAgfSk7XG4gKi9cbnZhciBGcmVlQ29udHJvbCA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkucGx1Z2luLkZyZWVDb250cm9sIyAqLyB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTY2VuZSBub2RlIHRvIGNvbnRyb2wsIG1vc3RseSBpdCBpcyBhIGNhbWVyYVxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYXJnZXQgZG9tIHRvIGJpbmQgd2l0aCBtb3VzZSBldmVudHNcbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgZG9tRWxlbWVudDogbnVsbCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogTW91c2UgbW92ZSBzZW5zaXRpdml0eVxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgc2Vuc2l0aXZpdHk6IDEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRhcmdldCBtb3ZlIHNwZWVkXG4gICAgICAgICAqIEB0eXBlIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBzcGVlZDogMC40LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBVcCBheGlzXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICAgICAqL1xuICAgICAgICB1cDogbmV3IFZlY3RvcjMoMCwgMSwgMCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIGxvY2sgdmVydGljYWwgbW92ZW1lbnRcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB2ZXJ0aWNhbE1vdmVMb2NrOiBmYWxzZSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVGltZWxpbmV9XG4gICAgICAgICAqL1xuICAgICAgICB0aW1lbGluZTogbnVsbCxcblxuICAgICAgICBfbW92ZUZvcndhcmQ6IGZhbHNlLFxuICAgICAgICBfbW92ZUJhY2t3YXJkOiBmYWxzZSxcbiAgICAgICAgX21vdmVMZWZ0OiBmYWxzZSxcbiAgICAgICAgX21vdmVSaWdodDogZmFsc2UsXG5cbiAgICAgICAgX29mZnNldFBpdGNoOiAwLFxuICAgICAgICBfb2Zmc2V0Um9sbDogMFxuICAgIH07XG59LCBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9sb2NrQ2hhbmdlID0gdGhpcy5fbG9ja0NoYW5nZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2tleURvd24gPSB0aGlzLl9rZXlEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5fa2V5VXAgPSB0aGlzLl9rZXlVcC5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX21vdXNlTW92ZSA9IHRoaXMuX21vdXNlTW92ZS5iaW5kKHRoaXMpO1xuXG4gICAgaWYgKHRoaXMuZG9tRWxlbWVudCkge1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG59LFxuLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5GcmVlQ29udHJvbC5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBpbml0IGNvbnRyb2xcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVXNlIHBvaW50ZXIgbG9ja1xuICAgICAgICAvLyBodHRwOi8vd3d3Lmh0bWw1cm9ja3MuY29tL2VuL3R1dG9yaWFscy9wb2ludGVybG9jay9pbnRyby9cbiAgICAgICAgdmFyIGVsID0gdGhpcy5kb21FbGVtZW50O1xuXG4gICAgICAgIC8vTXVzdCByZXF1ZXN0IHBvaW50ZXIgbG9jayBhZnRlciBjbGljayBldmVudCwgY2FuJ3Qgbm90IGRvIGl0IGRpcmVjdGx5XG4gICAgICAgIC8vV2h5ID8gP1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihlbCwgJ2NsaWNrJywgdGhpcy5fcmVxdWVzdFBvaW50ZXJMb2NrKTtcblxuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdwb2ludGVybG9ja2NoYW5nZScsIHRoaXMuX2xvY2tDaGFuZ2UpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb2MsICdtb3pwb2ludGVybG9ja2NoYW5nZScsIHRoaXMuX2xvY2tDaGFuZ2UpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb2MsICd3ZWJraXRwb2ludGVybG9ja2NoYW5nZScsIHRoaXMuX2xvY2tDaGFuZ2UpO1xuXG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvYywgJ2tleWRvd24nLCB0aGlzLl9rZXlEb3duKTtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jLCAna2V5dXAnLCB0aGlzLl9rZXlVcCk7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZWxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZWxpbmUub24oJ2ZyYW1lJywgdGhpcy5fZGV0ZWN0TW92ZW1lbnRDaGFuZ2UsIHRoaXMpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgY29udHJvbFxuICAgICAqL1xuICAgIGRpc3Bvc2U6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBlbCA9IHRoaXMuZG9tRWxlbWVudDtcblxuICAgICAgICBlbC5leGl0UG9pbnRlckxvY2sgPSBlbC5leGl0UG9pbnRlckxvY2tcbiAgICAgICAgICAgIHx8IGVsLm1vekV4aXRQb2ludGVyTG9ja1xuICAgICAgICAgICAgfHwgZWwud2Via2l0RXhpdFBvaW50ZXJMb2NrO1xuXG4gICAgICAgIGlmIChlbC5leGl0UG9pbnRlckxvY2spIHtcbiAgICAgICAgICAgIGVsLmV4aXRQb2ludGVyTG9jaygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZWwsICdjbGljaycsIHRoaXMuX3JlcXVlc3RQb2ludGVyTG9jayk7XG5cbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAncG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnbW96cG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9jLCAnd2Via2l0cG9pbnRlcmxvY2tjaGFuZ2UnLCB0aGlzLl9sb2NrQ2hhbmdlKTtcblxuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdrZXlkb3duJywgdGhpcy5fa2V5RG93bik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvYywgJ2tleXVwJywgdGhpcy5fa2V5VXApO1xuXG4gICAgICAgIGlmICh0aGlzLnRpbWVsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVsaW5lLm9mZignZnJhbWUnLCB0aGlzLl9kZXRlY3RNb3ZlbWVudENoYW5nZSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3JlcXVlc3RQb2ludGVyTG9jazogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXM7XG4gICAgICAgIGVsLnJlcXVlc3RQb2ludGVyTG9jayA9IGVsLnJlcXVlc3RQb2ludGVyTG9ja1xuICAgICAgICAgICAgfHwgZWwubW96UmVxdWVzdFBvaW50ZXJMb2NrXG4gICAgICAgICAgICB8fCBlbC53ZWJraXRSZXF1ZXN0UG9pbnRlckxvY2s7XG5cbiAgICAgICAgZWwucmVxdWVzdFBvaW50ZXJMb2NrKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIENvbnRyb2wgdXBkYXRlLiBTaG91bGQgYmUgaW52b2tlZCBldmVyeSBmcmFtZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBmcmFtZVRpbWUgRnJhbWUgdGltZVxuICAgICAqL1xuICAgIHVwZGF0ZTogZnVuY3Rpb24gKGZyYW1lVGltZSkge1xuICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy50YXJnZXQucG9zaXRpb247XG4gICAgICAgIHZhciB4QXhpcyA9IHRhcmdldC5sb2NhbFRyYW5zZm9ybS54Lm5vcm1hbGl6ZSgpO1xuICAgICAgICB2YXIgekF4aXMgPSB0YXJnZXQubG9jYWxUcmFuc2Zvcm0uei5ub3JtYWxpemUoKTtcblxuICAgICAgICBpZiAodGhpcy52ZXJ0aWNhbE1vdmVMb2NrKSB7XG4gICAgICAgICAgICB6QXhpcy55ID0gMDtcbiAgICAgICAgICAgIHpBeGlzLm5vcm1hbGl6ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHNwZWVkID0gdGhpcy5zcGVlZCAqIGZyYW1lVGltZSAvIDIwO1xuXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlRm9yd2FyZCkge1xuICAgICAgICAgICAgLy8gT3Bwb3NpdGUgZGlyZWN0aW9uIG9mIHpcbiAgICAgICAgICAgIHBvc2l0aW9uLnNjYWxlQW5kQWRkKHpBeGlzLCAtc3BlZWQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlQmFja3dhcmQpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uLnNjYWxlQW5kQWRkKHpBeGlzLCBzcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmVMZWZ0KSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5zY2FsZUFuZEFkZCh4QXhpcywgLXNwZWVkIC8gMik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmVSaWdodCkge1xuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoeEF4aXMsIHNwZWVkIC8gMik7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQucm90YXRlQXJvdW5kKHRhcmdldC5wb3NpdGlvbiwgdGhpcy51cCwgLXRoaXMuX29mZnNldFBpdGNoICogZnJhbWVUaW1lICogTWF0aC5QSSAvIDM2MCk7XG4gICAgICAgIHZhciB4QXhpcyA9IHRhcmdldC5sb2NhbFRyYW5zZm9ybS54O1xuICAgICAgICB0YXJnZXQucm90YXRlQXJvdW5kKHRhcmdldC5wb3NpdGlvbiwgeEF4aXMsIC10aGlzLl9vZmZzZXRSb2xsICogZnJhbWVUaW1lICogTWF0aC5QSSAvIDM2MCk7XG5cbiAgICAgICAgdGhpcy5fb2Zmc2V0Um9sbCA9IHRoaXMuX29mZnNldFBpdGNoID0gMDtcbiAgICB9LFxuXG4gICAgX2xvY2tDaGFuZ2U6IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBkb2MucG9pbnRlckxvY2tFbGVtZW50ID09PSB0aGlzLmRvbUVsZW1lbnRcbiAgICAgICAgICAgIHx8IGRvYy5tb3pQb2ludGVyTG9ja0VsZW1lbnQgPT09IHRoaXMuZG9tRWxlbWVudFxuICAgICAgICAgICAgfHwgZG9jLndlYmtpdFBvaW50ZXJMb2NrRWxlbWVudCA9PT0gdGhpcy5kb21FbGVtZW50XG4gICAgICAgICkge1xuICAgICAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9jLCAnbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb2MsICdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmUpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9tb3VzZU1vdmU6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdmFyIGR4ID0gZS5tb3ZlbWVudFggfHwgZS5tb3pNb3ZlbWVudFggfHwgZS53ZWJraXRNb3ZlbWVudFggfHwgMDtcbiAgICAgICAgdmFyIGR5ID0gZS5tb3ZlbWVudFkgfHwgZS5tb3pNb3ZlbWVudFkgfHwgZS53ZWJraXRNb3ZlbWVudFkgfHwgMDtcblxuICAgICAgICB0aGlzLl9vZmZzZXRQaXRjaCArPSBkeCAqIHRoaXMuc2Vuc2l0aXZpdHkgLyAyMDA7XG4gICAgICAgIHRoaXMuX29mZnNldFJvbGwgKz0gZHkgKiB0aGlzLnNlbnNpdGl2aXR5IC8gMjAwO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50IHRvIHJlbWluZCByZW5kZXJlciBkbyByZW5kZXJcbiAgICAgICAgdGhpcy50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICB9LFxuXG4gICAgX2RldGVjdE1vdmVtZW50Q2hhbmdlOiBmdW5jdGlvbiAoZnJhbWVUaW1lKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb3ZlRm9yd2FyZCB8fCB0aGlzLl9tb3ZlQmFja3dhcmQgfHwgdGhpcy5fbW92ZUxlZnQgfHwgdGhpcy5fbW92ZVJpZ2h0KSB7XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlKGZyYW1lVGltZSk7XG4gICAgfSxcblxuICAgIF9rZXlEb3duOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHN3aXRjaChlLmtleUNvZGUpIHtcbiAgICAgICAgICAgIGNhc2UgODc6IC8vd1xuICAgICAgICAgICAgY2FzZSAzNzogLy91cCBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgODM6IC8vc1xuICAgICAgICAgICAgY2FzZSA0MDogLy9kb3duIGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUJhY2t3YXJkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjU6IC8vYVxuICAgICAgICAgICAgY2FzZSAzNzogLy9sZWZ0IGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA2ODogLy9kXG4gICAgICAgICAgICBjYXNlIDM5OiAvL3JpZ2h0IGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZVJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZSBldmVudCB0byByZW1pbmQgcmVuZGVyZXIgZG8gcmVuZGVyXG4gICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgfSxcblxuICAgIF9rZXlVcDogZnVuY3Rpb24oZSkge1xuICAgICAgICBzd2l0Y2goZS5rZXlDb2RlKSB7XG4gICAgICAgICAgICBjYXNlIDg3OiAvL3dcbiAgICAgICAgICAgIGNhc2UgMzc6IC8vdXAgYXJyb3dcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlRm9yd2FyZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA4MzogLy9zXG4gICAgICAgICAgICBjYXNlIDQwOiAvL2Rvd24gYXJyb3dcbiAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlQmFja3dhcmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjU6IC8vYVxuICAgICAgICAgICAgY2FzZSAzNzogLy9sZWZ0IGFycm93XG4gICAgICAgICAgICAgICAgdGhpcy5fbW92ZUxlZnQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNjg6IC8vZFxuICAgICAgICAgICAgY2FzZSAzOTogLy9yaWdodCBhcnJvd1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdmVSaWdodCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEZyZWVDb250cm9sO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9GcmVlQ29udHJvbC5qc1xuLy8gbW9kdWxlIGlkID0gMTg1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///185\n");

/***/ }),
/* 186 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__core_vendor__ = __webpack_require__(4);\n\n\n\n\n/**\n * Gamepad Control plugin.\n *\n * @constructor clay.plugin.GamepadControl\n *\n * @example\n *   init: function(app) {\n *     this._gamepadControl = new clay.plugin.GamepadControl({\n *         target: camera,\n *         onStandardGamepadReady: customCallback\n *     });\n *   },\n *\n *   loop: function(app) {\n *     this._gamepadControl.update(app.frameTime);\n *   }\n */\nvar GamepadControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function() {\n\n    return /** @lends clay.plugin.GamepadControl# */ {\n\n        /**\n         * Scene node to control, mostly it is a camera.\n         *\n         * @type {clay.Node}\n         */\n        target: null,\n\n        /**\n         * Move speed.\n         *\n         * @type {number}\n         */\n        moveSpeed: 0.1,\n\n        /**\n         * Look around speed.\n         *\n         * @type {number}\n         */\n        lookAroundSpeed: 0.1,\n\n        /**\n         * Up axis.\n         *\n         * @type {clay.Vector3}\n         */\n        up: new __WEBPACK_IMPORTED_MODULE_1__math_Vector3__[\"a\" /* default */](0, 1, 0),\n\n        /**\n         * Timeline.\n         *\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        /**\n         * Function to be called when a standard gamepad is ready to use.\n         *\n         * @type {function}\n         */\n        onStandardGamepadReady: function(gamepad){},\n\n        /**\n         * Function to be called when a gamepad is disconnected.\n         *\n         * @type {function}\n         */\n        onGamepadDisconnected: function(gamepad){},\n\n        // Private properties:\n\n        _moveForward: false,\n        _moveBackward: false,\n        _moveLeft: false,\n        _moveRight: false,\n\n        _offsetPitch: 0,\n        _offsetRoll: 0,\n\n        _connectedGamepadIndex: 0,\n        _standardGamepadAvailable: false,\n        _gamepadAxisThreshold: 0.3\n\n    };\n\n}, function() {\n\n    this._checkGamepadCompatibility = this._checkGamepadCompatibility.bind(this);\n    this._disconnectGamepad = this._disconnectGamepad.bind(this);\n    this._getStandardGamepad = this._getStandardGamepad.bind(this);\n    this._scanPressedGamepadButtons = this._scanPressedGamepadButtons.bind(this);\n    this._scanInclinedGamepadAxes = this._scanInclinedGamepadAxes.bind(this);\n\n    this.update = this.update.bind(this);\n\n    // If browser supports Gamepad API:\n    if (typeof navigator.getGamepads === 'function') {\n        this.init();\n    }\n\n},\n/** @lends clay.plugin.GamepadControl.prototype */\n{\n    /**\n     * Init. control.\n     */\n    init: function() {\n\n        /**\n         * When user begins to interact with connected gamepad:\n         *\n         * @see https://w3c.github.io/gamepad/#dom-gamepadevent\n         */\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(window, 'gamepadconnected', this._checkGamepadCompatibility);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this.update);\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].addEventListener(window, 'gamepaddisconnected', this._disconnectGamepad);\n\n    },\n\n    /**\n     * Dispose control.\n     */\n    dispose: function() {\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(window, 'gamepadconnected', this._checkGamepadCompatibility);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this.update);\n        }\n\n        __WEBPACK_IMPORTED_MODULE_2__core_vendor__[\"a\" /* default */].removeEventListener(window, 'gamepaddisconnected', this._disconnectGamepad);\n\n    },\n\n    /**\n     * Control's update. Should be invoked every frame.\n     *\n     * @param {number} frameTime Frame time.\n     */\n    update: function (frameTime) {\n\n        if (!this._standardGamepadAvailable) {\n            return;\n        }\n\n        this._scanPressedGamepadButtons();\n        this._scanInclinedGamepadAxes();\n\n        // Update target depending on user input.\n\n        var target = this.target;\n\n        var position = this.target.position;\n        var xAxis = target.localTransform.x.normalize();\n        var zAxis = target.localTransform.z.normalize();\n\n        var moveSpeed = this.moveSpeed * frameTime / 20;\n\n        if (this._moveForward) {\n            // Opposite direction of z.\n            position.scaleAndAdd(zAxis, -moveSpeed);\n        }\n        if (this._moveBackward) {\n            position.scaleAndAdd(zAxis, moveSpeed);\n        }\n        if (this._moveLeft) {\n            position.scaleAndAdd(xAxis, -moveSpeed);\n        }\n        if (this._moveRight) {\n            position.scaleAndAdd(xAxis, moveSpeed);\n        }\n\n        target.rotateAround(target.position, this.up, -this._offsetPitch * frameTime * Math.PI / 360);\n        var xAxis = target.localTransform.x;\n        target.rotateAround(target.position, xAxis, -this._offsetRoll * frameTime * Math.PI / 360);\n\n        /*\n         * If necessary: trigger `update` event.\n         * XXX This can economize rendering OPs.\n         */\n        if (this._moveForward === true || this._moveBackward === true || this._moveLeft === true\n            || this._moveRight === true || this._offsetPitch !== 0 || this._offsetRoll !== 0)\n        {\n            this.trigger('update');\n        }\n\n        // Reset values to avoid lost of control.\n\n        this._moveForward = this._moveBackward = this._moveLeft = this._moveRight = false;\n        this._offsetPitch = this._offsetRoll = 0;\n\n    },\n\n    // Private methods:\n\n    _checkGamepadCompatibility: function(event) {\n\n        /**\n         * If connected gamepad has a **standard** layout:\n         *\n         * @see https://w3c.github.io/gamepad/#remapping about standard.\n         */\n        if (event.gamepad.mapping === 'standard') {\n\n            this._standardGamepadIndex = event.gamepad.index;\n            this._standardGamepadAvailable = true;\n\n            this.onStandardGamepadReady(event.gamepad);\n\n        }\n\n    },\n\n    _disconnectGamepad: function(event) {\n\n        this._standardGamepadAvailable = false;\n\n        this.onGamepadDisconnected(event.gamepad);\n\n    },\n\n    _getStandardGamepad: function() {\n\n        return navigator.getGamepads()[this._standardGamepadIndex];\n\n    },\n\n    _scanPressedGamepadButtons: function() {\n\n        var gamepadButtons = this._getStandardGamepad().buttons;\n\n        // For each gamepad button:\n        for (var gamepadButtonId = 0; gamepadButtonId < gamepadButtons.length; gamepadButtonId++) {\n\n            // Get user input.\n            var gamepadButton = gamepadButtons[gamepadButtonId];\n\n            if (gamepadButton.pressed) {\n\n                switch (gamepadButtonId) {\n\n                    // D-pad Up\n                    case 12:\n                        this._moveForward = true;\n                        break;\n\n                    // D-pad Down\n                    case 13:\n                        this._moveBackward = true;\n                        break;\n\n                    // D-pad Left\n                    case 14:\n                        this._moveLeft = true;\n                        break;\n\n                    // D-pad Right\n                    case 15:\n                        this._moveRight = true;\n                        break;\n\n                }\n\n            }\n\n        }\n\n    },\n\n    _scanInclinedGamepadAxes: function() {\n\n        var gamepadAxes = this._getStandardGamepad().axes;\n\n        // For each gamepad axis:\n        for (var gamepadAxisId = 0; gamepadAxisId < gamepadAxes.length; gamepadAxisId++) {\n\n            // Get user input.\n            var gamepadAxis = gamepadAxes[gamepadAxisId];\n\n            // XXX We use a threshold because axes are never neutral.\n            if (Math.abs(gamepadAxis) > this._gamepadAxisThreshold) {\n\n                switch (gamepadAxisId) {\n\n                    // Left stick X±\n                    case 0:\n                        this._moveLeft = gamepadAxis < 0;\n                        this._moveRight = gamepadAxis > 0;\n                        break;\n\n                    // Left stick Y±\n                    case 1:\n                        this._moveForward = gamepadAxis < 0;\n                        this._moveBackward = gamepadAxis > 0;\n                        break;\n\n                    // Right stick X±\n                    case 2:\n                        this._offsetPitch += gamepadAxis * this.lookAroundSpeed;\n                        break;\n\n                    // Right stick Y±\n                    case 3:\n                        this._offsetRoll += gamepadAxis * this.lookAroundSpeed;\n                        break;\n\n                }\n\n            }\n\n        }\n\n    }\n\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (GamepadControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vR2FtZXBhZENvbnRyb2wuanM/Mjc4NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuXG4vKipcbiAqIEdhbWVwYWQgQ29udHJvbCBwbHVnaW4uXG4gKlxuICogQGNvbnN0cnVjdG9yIGNsYXkucGx1Z2luLkdhbWVwYWRDb250cm9sXG4gKlxuICogQGV4YW1wbGVcbiAqICAgaW5pdDogZnVuY3Rpb24oYXBwKSB7XG4gKiAgICAgdGhpcy5fZ2FtZXBhZENvbnRyb2wgPSBuZXcgY2xheS5wbHVnaW4uR2FtZXBhZENvbnRyb2woe1xuICogICAgICAgICB0YXJnZXQ6IGNhbWVyYSxcbiAqICAgICAgICAgb25TdGFuZGFyZEdhbWVwYWRSZWFkeTogY3VzdG9tQ2FsbGJhY2tcbiAqICAgICB9KTtcbiAqICAgfSxcbiAqXG4gKiAgIGxvb3A6IGZ1bmN0aW9uKGFwcCkge1xuICogICAgIHRoaXMuX2dhbWVwYWRDb250cm9sLnVwZGF0ZShhcHAuZnJhbWVUaW1lKTtcbiAqICAgfVxuICovXG52YXIgR2FtZXBhZENvbnRyb2wgPSBCYXNlLmV4dGVuZChmdW5jdGlvbigpIHtcblxuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkucGx1Z2luLkdhbWVwYWRDb250cm9sIyAqLyB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNjZW5lIG5vZGUgdG8gY29udHJvbCwgbW9zdGx5IGl0IGlzIGEgY2FtZXJhLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNb3ZlIHNwZWVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgbW92ZVNwZWVkOiAwLjEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvb2sgYXJvdW5kIHNwZWVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgbG9va0Fyb3VuZFNwZWVkOiAwLjEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFVwIGF4aXMuXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtjbGF5LlZlY3RvcjN9XG4gICAgICAgICAqL1xuICAgICAgICB1cDogbmV3IFZlY3RvcjMoMCwgMSwgMCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRpbWVsaW5lLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UaW1lbGluZX1cbiAgICAgICAgICovXG4gICAgICAgIHRpbWVsaW5lOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhIHN0YW5kYXJkIGdhbWVwYWQgaXMgcmVhZHkgdG8gdXNlLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBvblN0YW5kYXJkR2FtZXBhZFJlYWR5OiBmdW5jdGlvbihnYW1lcGFkKXt9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhIGdhbWVwYWQgaXMgZGlzY29ubmVjdGVkLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7ZnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICBvbkdhbWVwYWREaXNjb25uZWN0ZWQ6IGZ1bmN0aW9uKGdhbWVwYWQpe30sXG5cbiAgICAgICAgLy8gUHJpdmF0ZSBwcm9wZXJ0aWVzOlxuXG4gICAgICAgIF9tb3ZlRm9yd2FyZDogZmFsc2UsXG4gICAgICAgIF9tb3ZlQmFja3dhcmQ6IGZhbHNlLFxuICAgICAgICBfbW92ZUxlZnQ6IGZhbHNlLFxuICAgICAgICBfbW92ZVJpZ2h0OiBmYWxzZSxcblxuICAgICAgICBfb2Zmc2V0UGl0Y2g6IDAsXG4gICAgICAgIF9vZmZzZXRSb2xsOiAwLFxuXG4gICAgICAgIF9jb25uZWN0ZWRHYW1lcGFkSW5kZXg6IDAsXG4gICAgICAgIF9zdGFuZGFyZEdhbWVwYWRBdmFpbGFibGU6IGZhbHNlLFxuICAgICAgICBfZ2FtZXBhZEF4aXNUaHJlc2hvbGQ6IDAuM1xuXG4gICAgfTtcblxufSwgZnVuY3Rpb24oKSB7XG5cbiAgICB0aGlzLl9jaGVja0dhbWVwYWRDb21wYXRpYmlsaXR5ID0gdGhpcy5fY2hlY2tHYW1lcGFkQ29tcGF0aWJpbGl0eS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2Rpc2Nvbm5lY3RHYW1lcGFkID0gdGhpcy5fZGlzY29ubmVjdEdhbWVwYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9nZXRTdGFuZGFyZEdhbWVwYWQgPSB0aGlzLl9nZXRTdGFuZGFyZEdhbWVwYWQuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9zY2FuUHJlc3NlZEdhbWVwYWRCdXR0b25zID0gdGhpcy5fc2NhblByZXNzZWRHYW1lcGFkQnV0dG9ucy5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX3NjYW5JbmNsaW5lZEdhbWVwYWRBeGVzID0gdGhpcy5fc2NhbkluY2xpbmVkR2FtZXBhZEF4ZXMuYmluZCh0aGlzKTtcblxuICAgIHRoaXMudXBkYXRlID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcblxuICAgIC8vIElmIGJyb3dzZXIgc3VwcG9ydHMgR2FtZXBhZCBBUEk6XG4gICAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5pbml0KCk7XG4gICAgfVxuXG59LFxuLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5HYW1lcGFkQ29udHJvbC5wcm90b3R5cGUgKi9cbntcbiAgICAvKipcbiAgICAgKiBJbml0LiBjb250cm9sLlxuICAgICAqL1xuICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIHVzZXIgYmVnaW5zIHRvIGludGVyYWN0IHdpdGggY29ubmVjdGVkIGdhbWVwYWQ6XG4gICAgICAgICAqXG4gICAgICAgICAqIEBzZWUgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL2dhbWVwYWQvI2RvbS1nYW1lcGFkZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKHdpbmRvdywgJ2dhbWVwYWRjb25uZWN0ZWQnLCB0aGlzLl9jaGVja0dhbWVwYWRDb21wYXRpYmlsaXR5KTtcblxuICAgICAgICBpZiAodGhpcy50aW1lbGluZSkge1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZS5vbignZnJhbWUnLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgIH1cblxuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcih3aW5kb3csICdnYW1lcGFkZGlzY29ubmVjdGVkJywgdGhpcy5fZGlzY29ubmVjdEdhbWVwYWQpO1xuXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UgY29udHJvbC5cbiAgICAgKi9cbiAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcblxuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcih3aW5kb3csICdnYW1lcGFkY29ubmVjdGVkJywgdGhpcy5fY2hlY2tHYW1lcGFkQ29tcGF0aWJpbGl0eSk7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZWxpbmUpIHtcbiAgICAgICAgICAgIHRoaXMudGltZWxpbmUub2ZmKCdmcmFtZScsIHRoaXMudXBkYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKHdpbmRvdywgJ2dhbWVwYWRkaXNjb25uZWN0ZWQnLCB0aGlzLl9kaXNjb25uZWN0R2FtZXBhZCk7XG5cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ29udHJvbCdzIHVwZGF0ZS4gU2hvdWxkIGJlIGludm9rZWQgZXZlcnkgZnJhbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gZnJhbWVUaW1lIEZyYW1lIHRpbWUuXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZnJhbWVUaW1lKSB7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9zdGFuZGFyZEdhbWVwYWRBdmFpbGFibGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3NjYW5QcmVzc2VkR2FtZXBhZEJ1dHRvbnMoKTtcbiAgICAgICAgdGhpcy5fc2NhbkluY2xpbmVkR2FtZXBhZEF4ZXMoKTtcblxuICAgICAgICAvLyBVcGRhdGUgdGFyZ2V0IGRlcGVuZGluZyBvbiB1c2VyIGlucHV0LlxuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblxuICAgICAgICB2YXIgcG9zaXRpb24gPSB0aGlzLnRhcmdldC5wb3NpdGlvbjtcbiAgICAgICAgdmFyIHhBeGlzID0gdGFyZ2V0LmxvY2FsVHJhbnNmb3JtLngubm9ybWFsaXplKCk7XG4gICAgICAgIHZhciB6QXhpcyA9IHRhcmdldC5sb2NhbFRyYW5zZm9ybS56Lm5vcm1hbGl6ZSgpO1xuXG4gICAgICAgIHZhciBtb3ZlU3BlZWQgPSB0aGlzLm1vdmVTcGVlZCAqIGZyYW1lVGltZSAvIDIwO1xuXG4gICAgICAgIGlmICh0aGlzLl9tb3ZlRm9yd2FyZCkge1xuICAgICAgICAgICAgLy8gT3Bwb3NpdGUgZGlyZWN0aW9uIG9mIHouXG4gICAgICAgICAgICBwb3NpdGlvbi5zY2FsZUFuZEFkZCh6QXhpcywgLW1vdmVTcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmVCYWNrd2FyZCkge1xuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoekF4aXMsIG1vdmVTcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmVMZWZ0KSB7XG4gICAgICAgICAgICBwb3NpdGlvbi5zY2FsZUFuZEFkZCh4QXhpcywgLW1vdmVTcGVlZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX21vdmVSaWdodCkge1xuICAgICAgICAgICAgcG9zaXRpb24uc2NhbGVBbmRBZGQoeEF4aXMsIG1vdmVTcGVlZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0YXJnZXQucm90YXRlQXJvdW5kKHRhcmdldC5wb3NpdGlvbiwgdGhpcy51cCwgLXRoaXMuX29mZnNldFBpdGNoICogZnJhbWVUaW1lICogTWF0aC5QSSAvIDM2MCk7XG4gICAgICAgIHZhciB4QXhpcyA9IHRhcmdldC5sb2NhbFRyYW5zZm9ybS54O1xuICAgICAgICB0YXJnZXQucm90YXRlQXJvdW5kKHRhcmdldC5wb3NpdGlvbiwgeEF4aXMsIC10aGlzLl9vZmZzZXRSb2xsICogZnJhbWVUaW1lICogTWF0aC5QSSAvIDM2MCk7XG5cbiAgICAgICAgLypcbiAgICAgICAgICogSWYgbmVjZXNzYXJ5OiB0cmlnZ2VyIGB1cGRhdGVgIGV2ZW50LlxuICAgICAgICAgKiBYWFggVGhpcyBjYW4gZWNvbm9taXplIHJlbmRlcmluZyBPUHMuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAodGhpcy5fbW92ZUZvcndhcmQgPT09IHRydWUgfHwgdGhpcy5fbW92ZUJhY2t3YXJkID09PSB0cnVlIHx8IHRoaXMuX21vdmVMZWZ0ID09PSB0cnVlXG4gICAgICAgICAgICB8fCB0aGlzLl9tb3ZlUmlnaHQgPT09IHRydWUgfHwgdGhpcy5fb2Zmc2V0UGl0Y2ggIT09IDAgfHwgdGhpcy5fb2Zmc2V0Um9sbCAhPT0gMClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCd1cGRhdGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc2V0IHZhbHVlcyB0byBhdm9pZCBsb3N0IG9mIGNvbnRyb2wuXG5cbiAgICAgICAgdGhpcy5fbW92ZUZvcndhcmQgPSB0aGlzLl9tb3ZlQmFja3dhcmQgPSB0aGlzLl9tb3ZlTGVmdCA9IHRoaXMuX21vdmVSaWdodCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9vZmZzZXRQaXRjaCA9IHRoaXMuX29mZnNldFJvbGwgPSAwO1xuXG4gICAgfSxcblxuICAgIC8vIFByaXZhdGUgbWV0aG9kczpcblxuICAgIF9jaGVja0dhbWVwYWRDb21wYXRpYmlsaXR5OiBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiBjb25uZWN0ZWQgZ2FtZXBhZCBoYXMgYSAqKnN0YW5kYXJkKiogbGF5b3V0OlxuICAgICAgICAgKlxuICAgICAgICAgKiBAc2VlIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby9nYW1lcGFkLyNyZW1hcHBpbmcgYWJvdXQgc3RhbmRhcmQuXG4gICAgICAgICAqL1xuICAgICAgICBpZiAoZXZlbnQuZ2FtZXBhZC5tYXBwaW5nID09PSAnc3RhbmRhcmQnKSB7XG5cbiAgICAgICAgICAgIHRoaXMuX3N0YW5kYXJkR2FtZXBhZEluZGV4ID0gZXZlbnQuZ2FtZXBhZC5pbmRleDtcbiAgICAgICAgICAgIHRoaXMuX3N0YW5kYXJkR2FtZXBhZEF2YWlsYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMub25TdGFuZGFyZEdhbWVwYWRSZWFkeShldmVudC5nYW1lcGFkKTtcblxuICAgICAgICB9XG5cbiAgICB9LFxuXG4gICAgX2Rpc2Nvbm5lY3RHYW1lcGFkOiBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgIHRoaXMuX3N0YW5kYXJkR2FtZXBhZEF2YWlsYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIHRoaXMub25HYW1lcGFkRGlzY29ubmVjdGVkKGV2ZW50LmdhbWVwYWQpO1xuXG4gICAgfSxcblxuICAgIF9nZXRTdGFuZGFyZEdhbWVwYWQ6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3IuZ2V0R2FtZXBhZHMoKVt0aGlzLl9zdGFuZGFyZEdhbWVwYWRJbmRleF07XG5cbiAgICB9LFxuXG4gICAgX3NjYW5QcmVzc2VkR2FtZXBhZEJ1dHRvbnM6IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIHZhciBnYW1lcGFkQnV0dG9ucyA9IHRoaXMuX2dldFN0YW5kYXJkR2FtZXBhZCgpLmJ1dHRvbnM7XG5cbiAgICAgICAgLy8gRm9yIGVhY2ggZ2FtZXBhZCBidXR0b246XG4gICAgICAgIGZvciAodmFyIGdhbWVwYWRCdXR0b25JZCA9IDA7IGdhbWVwYWRCdXR0b25JZCA8IGdhbWVwYWRCdXR0b25zLmxlbmd0aDsgZ2FtZXBhZEJ1dHRvbklkKyspIHtcblxuICAgICAgICAgICAgLy8gR2V0IHVzZXIgaW5wdXQuXG4gICAgICAgICAgICB2YXIgZ2FtZXBhZEJ1dHRvbiA9IGdhbWVwYWRCdXR0b25zW2dhbWVwYWRCdXR0b25JZF07XG5cbiAgICAgICAgICAgIGlmIChnYW1lcGFkQnV0dG9uLnByZXNzZWQpIHtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZXBhZEJ1dHRvbklkKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gRC1wYWQgVXBcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVGb3J3YXJkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEQtcGFkIERvd25cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVCYWNrd2FyZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyBELXBhZCBMZWZ0XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTQ6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlTGVmdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyBELXBhZCBSaWdodFxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE1OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZVJpZ2h0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgfSxcblxuICAgIF9zY2FuSW5jbGluZWRHYW1lcGFkQXhlczogZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgdmFyIGdhbWVwYWRBeGVzID0gdGhpcy5fZ2V0U3RhbmRhcmRHYW1lcGFkKCkuYXhlcztcblxuICAgICAgICAvLyBGb3IgZWFjaCBnYW1lcGFkIGF4aXM6XG4gICAgICAgIGZvciAodmFyIGdhbWVwYWRBeGlzSWQgPSAwOyBnYW1lcGFkQXhpc0lkIDwgZ2FtZXBhZEF4ZXMubGVuZ3RoOyBnYW1lcGFkQXhpc0lkKyspIHtcblxuICAgICAgICAgICAgLy8gR2V0IHVzZXIgaW5wdXQuXG4gICAgICAgICAgICB2YXIgZ2FtZXBhZEF4aXMgPSBnYW1lcGFkQXhlc1tnYW1lcGFkQXhpc0lkXTtcblxuICAgICAgICAgICAgLy8gWFhYIFdlIHVzZSBhIHRocmVzaG9sZCBiZWNhdXNlIGF4ZXMgYXJlIG5ldmVyIG5ldXRyYWwuXG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZ2FtZXBhZEF4aXMpID4gdGhpcy5fZ2FtZXBhZEF4aXNUaHJlc2hvbGQpIHtcblxuICAgICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZXBhZEF4aXNJZCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIExlZnQgc3RpY2sgWMKxXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vdmVMZWZ0ID0gZ2FtZXBhZEF4aXMgPCAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZVJpZ2h0ID0gZ2FtZXBhZEF4aXMgPiAwO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gTGVmdCBzdGljayBZwrFcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW92ZUZvcndhcmQgPSBnYW1lcGFkQXhpcyA8IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb3ZlQmFja3dhcmQgPSBnYW1lcGFkQXhpcyA+IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAvLyBSaWdodCBzdGljayBYwrFcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fb2Zmc2V0UGl0Y2ggKz0gZ2FtZXBhZEF4aXMgKiB0aGlzLmxvb2tBcm91bmRTcGVlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJpZ2h0IHN0aWNrIFnCsVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9vZmZzZXRSb2xsICs9IGdhbWVwYWRBeGlzICogdGhpcy5sb29rQXJvdW5kU3BlZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH1cblxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEdhbWVwYWRDb250cm9sO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9HYW1lcGFkQ29udHJvbC5qc1xuLy8gbW9kdWxlIGlkID0gMTg2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///186\n");

/***/ }),
/* 187 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Plane__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__math_Ray__ = __webpack_require__(38);\n\n\n\n\n\n\nvar uvs = [[0, 0], [0, 1], [1, 1], [1, 0]];\nvar tris = [0, 1, 2, 2, 3, 0];\n\nvar InfinitePlane = __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */].extend({\n\n    camera: null,\n\n    plane: null,\n\n    maxGrid: 0,\n\n    // TODO\n    frustumCulling: false\n\n}, function () {\n    var geometry = this.geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */]({\n        dynamic: true\n    });\n    geometry.attributes.position.init(6);\n    geometry.attributes.normal.init(6);\n    geometry.attributes.texcoord0.init(6);\n    geometry.indices = new Uint16Array(6);\n\n    this.plane = new __WEBPACK_IMPORTED_MODULE_2__math_Plane__[\"a\" /* default */]();\n}, {\n\n    updateGeometry: function () {\n\n        var coords = this._unProjectGrid();\n        if (!coords) {\n            return;\n        }\n        var positionAttr = this.geometry.attributes.position;\n        var normalAttr = this.geometry.attributes.normal;\n        var texcoords = this.geometry.attributes.texcoord0;\n        var indices = this.geometry.indices;\n\n        for (var i = 0; i < 6; i++) {\n            var idx = tris[i];\n            positionAttr.set(i, coords[idx].array);\n            normalAttr.set(i, this.plane.normal.array);\n            texcoords.set(i, uvs[idx]);\n            indices[i] = i;\n        }\n        this.geometry.dirty();\n    },\n\n    // http://fileadmin.cs.lth.se/graphics/theses/projects/projgrid/\n    _unProjectGrid: (function () {\n\n        var planeViewSpace = new __WEBPACK_IMPORTED_MODULE_2__math_Plane__[\"a\" /* default */]();\n        var lines = [\n            0, 1, 0, 2, 1, 3, 2, 3,\n            4, 5, 4, 6, 5, 7, 6, 7,\n            0, 4, 1, 5, 2, 6, 3, 7\n        ];\n\n        var start = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n        var end = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]();\n\n        var points = [];\n\n        // 1----2\n        // |    |\n        // 0----3\n        var coords = [];\n        for (var i = 0; i < 4; i++) {\n            coords[i] = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */](0, 0);\n        }\n\n        var ray = new __WEBPACK_IMPORTED_MODULE_4__math_Ray__[\"a\" /* default */]();\n\n        return function () {\n            planeViewSpace.copy(this.plane);\n            planeViewSpace.applyTransform(this.camera.viewMatrix);\n\n            var frustumVertices = this.camera.frustum.vertices;\n\n            var nPoints = 0;\n            // Intersect with lines of frustum\n            for (var i = 0; i < 12; i++) {\n                start.array = frustumVertices[lines[i * 2]];\n                end.array = frustumVertices[lines[i * 2 + 1]];\n\n                var point = planeViewSpace.intersectLine(start, end, points[nPoints]);\n                if (point) {\n                    if (!points[nPoints]) {\n                        points[nPoints] = point;\n                    }\n                    nPoints++;\n                }\n            }\n            if (nPoints === 0) {\n                return;\n            }\n            for (var i = 0; i < nPoints; i++) {\n                points[i].applyProjection(this.camera.projectionMatrix);\n            }\n            var minX = points[0].array[0];\n            var minY = points[0].array[1];\n            var maxX = points[0].array[0];\n            var maxY = points[0].array[1];\n            for (var i = 1; i < nPoints; i++) {\n                maxX = Math.max(maxX, points[i].array[0]);\n                maxY = Math.max(maxY, points[i].array[1]);\n                minX = Math.min(minX, points[i].array[0]);\n                minY = Math.min(minY, points[i].array[1]);\n            }\n            if (minX == maxX || minY == maxY) {\n                return;\n            }\n            coords[0].array[0] = minX;\n            coords[0].array[1] = minY;\n            coords[1].array[0] = minX;\n            coords[1].array[1] = maxY;\n            coords[2].array[0] = maxX;\n            coords[2].array[1] = maxY;\n            coords[3].array[0] = maxX;\n            coords[3].array[1] = minY;\n\n            for (var i = 0; i < 4; i++) {\n                this.camera.castRay(coords[i], ray);\n                ray.intersectPlane(this.plane, coords[i]);\n            }\n\n            return coords;\n        };\n    })()\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (InfinitePlane);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vSW5maW5pdGVQbGFuZS5qcz9hMTBiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBNZXNoIGZyb20gJy4uL01lc2gnO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL0dlb21ldHJ5JztcbmltcG9ydCBQbGFuZSBmcm9tICcuLi9tYXRoL1BsYW5lJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4uL21hdGgvVmVjdG9yMyc7XG5pbXBvcnQgUmF5IGZyb20gJy4uL21hdGgvUmF5JztcblxudmFyIHV2cyA9IFtbMCwgMF0sIFswLCAxXSwgWzEsIDFdLCBbMSwgMF1dO1xudmFyIHRyaXMgPSBbMCwgMSwgMiwgMiwgMywgMF07XG5cbnZhciBJbmZpbml0ZVBsYW5lID0gTWVzaC5leHRlbmQoe1xuXG4gICAgY2FtZXJhOiBudWxsLFxuXG4gICAgcGxhbmU6IG51bGwsXG5cbiAgICBtYXhHcmlkOiAwLFxuXG4gICAgLy8gVE9ET1xuICAgIGZydXN0dW1DdWxsaW5nOiBmYWxzZVxuXG59LCBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGdlb21ldHJ5ID0gdGhpcy5nZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgICAgIGR5bmFtaWM6IHRydWVcbiAgICB9KTtcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uLmluaXQoNik7XG4gICAgZ2VvbWV0cnkuYXR0cmlidXRlcy5ub3JtYWwuaW5pdCg2KTtcbiAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMC5pbml0KDYpO1xuICAgIGdlb21ldHJ5LmluZGljZXMgPSBuZXcgVWludDE2QXJyYXkoNik7XG5cbiAgICB0aGlzLnBsYW5lID0gbmV3IFBsYW5lKCk7XG59LCB7XG5cbiAgICB1cGRhdGVHZW9tZXRyeTogZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBjb29yZHMgPSB0aGlzLl91blByb2plY3RHcmlkKCk7XG4gICAgICAgIGlmICghY29vcmRzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBvc2l0aW9uQXR0ciA9IHRoaXMuZ2VvbWV0cnkuYXR0cmlidXRlcy5wb3NpdGlvbjtcbiAgICAgICAgdmFyIG5vcm1hbEF0dHIgPSB0aGlzLmdlb21ldHJ5LmF0dHJpYnV0ZXMubm9ybWFsO1xuICAgICAgICB2YXIgdGV4Y29vcmRzID0gdGhpcy5nZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMDtcbiAgICAgICAgdmFyIGluZGljZXMgPSB0aGlzLmdlb21ldHJ5LmluZGljZXM7XG5cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA2OyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpZHggPSB0cmlzW2ldO1xuICAgICAgICAgICAgcG9zaXRpb25BdHRyLnNldChpLCBjb29yZHNbaWR4XS5hcnJheSk7XG4gICAgICAgICAgICBub3JtYWxBdHRyLnNldChpLCB0aGlzLnBsYW5lLm5vcm1hbC5hcnJheSk7XG4gICAgICAgICAgICB0ZXhjb29yZHMuc2V0KGksIHV2c1tpZHhdKTtcbiAgICAgICAgICAgIGluZGljZXNbaV0gPSBpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZ2VvbWV0cnkuZGlydHkoKTtcbiAgICB9LFxuXG4gICAgLy8gaHR0cDovL2ZpbGVhZG1pbi5jcy5sdGguc2UvZ3JhcGhpY3MvdGhlc2VzL3Byb2plY3RzL3Byb2pncmlkL1xuICAgIF91blByb2plY3RHcmlkOiAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBwbGFuZVZpZXdTcGFjZSA9IG5ldyBQbGFuZSgpO1xuICAgICAgICB2YXIgbGluZXMgPSBbXG4gICAgICAgICAgICAwLCAxLCAwLCAyLCAxLCAzLCAyLCAzLFxuICAgICAgICAgICAgNCwgNSwgNCwgNiwgNSwgNywgNiwgNyxcbiAgICAgICAgICAgIDAsIDQsIDEsIDUsIDIsIDYsIDMsIDdcbiAgICAgICAgXTtcblxuICAgICAgICB2YXIgc3RhcnQgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgZW5kID0gbmV3IFZlY3RvcjMoKTtcblxuICAgICAgICB2YXIgcG9pbnRzID0gW107XG5cbiAgICAgICAgLy8gMS0tLS0yXG4gICAgICAgIC8vIHwgICAgfFxuICAgICAgICAvLyAwLS0tLTNcbiAgICAgICAgdmFyIGNvb3JkcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDQ7IGkrKykge1xuICAgICAgICAgICAgY29vcmRzW2ldID0gbmV3IFZlY3RvcjMoMCwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmF5ID0gbmV3IFJheSgpO1xuXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwbGFuZVZpZXdTcGFjZS5jb3B5KHRoaXMucGxhbmUpO1xuICAgICAgICAgICAgcGxhbmVWaWV3U3BhY2UuYXBwbHlUcmFuc2Zvcm0odGhpcy5jYW1lcmEudmlld01hdHJpeCk7XG5cbiAgICAgICAgICAgIHZhciBmcnVzdHVtVmVydGljZXMgPSB0aGlzLmNhbWVyYS5mcnVzdHVtLnZlcnRpY2VzO1xuXG4gICAgICAgICAgICB2YXIgblBvaW50cyA9IDA7XG4gICAgICAgICAgICAvLyBJbnRlcnNlY3Qgd2l0aCBsaW5lcyBvZiBmcnVzdHVtXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBzdGFydC5hcnJheSA9IGZydXN0dW1WZXJ0aWNlc1tsaW5lc1tpICogMl1dO1xuICAgICAgICAgICAgICAgIGVuZC5hcnJheSA9IGZydXN0dW1WZXJ0aWNlc1tsaW5lc1tpICogMiArIDFdXTtcblxuICAgICAgICAgICAgICAgIHZhciBwb2ludCA9IHBsYW5lVmlld1NwYWNlLmludGVyc2VjdExpbmUoc3RhcnQsIGVuZCwgcG9pbnRzW25Qb2ludHNdKTtcbiAgICAgICAgICAgICAgICBpZiAocG9pbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFwb2ludHNbblBvaW50c10pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50c1tuUG9pbnRzXSA9IHBvaW50O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5Qb2ludHMrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoblBvaW50cyA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgblBvaW50czsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcG9pbnRzW2ldLmFwcGx5UHJvamVjdGlvbih0aGlzLmNhbWVyYS5wcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBtaW5YID0gcG9pbnRzWzBdLmFycmF5WzBdO1xuICAgICAgICAgICAgdmFyIG1pblkgPSBwb2ludHNbMF0uYXJyYXlbMV07XG4gICAgICAgICAgICB2YXIgbWF4WCA9IHBvaW50c1swXS5hcnJheVswXTtcbiAgICAgICAgICAgIHZhciBtYXhZID0gcG9pbnRzWzBdLmFycmF5WzFdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBuUG9pbnRzOyBpKyspIHtcbiAgICAgICAgICAgICAgICBtYXhYID0gTWF0aC5tYXgobWF4WCwgcG9pbnRzW2ldLmFycmF5WzBdKTtcbiAgICAgICAgICAgICAgICBtYXhZID0gTWF0aC5tYXgobWF4WSwgcG9pbnRzW2ldLmFycmF5WzFdKTtcbiAgICAgICAgICAgICAgICBtaW5YID0gTWF0aC5taW4obWluWCwgcG9pbnRzW2ldLmFycmF5WzBdKTtcbiAgICAgICAgICAgICAgICBtaW5ZID0gTWF0aC5taW4obWluWSwgcG9pbnRzW2ldLmFycmF5WzFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtaW5YID09IG1heFggfHwgbWluWSA9PSBtYXhZKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29vcmRzWzBdLmFycmF5WzBdID0gbWluWDtcbiAgICAgICAgICAgIGNvb3Jkc1swXS5hcnJheVsxXSA9IG1pblk7XG4gICAgICAgICAgICBjb29yZHNbMV0uYXJyYXlbMF0gPSBtaW5YO1xuICAgICAgICAgICAgY29vcmRzWzFdLmFycmF5WzFdID0gbWF4WTtcbiAgICAgICAgICAgIGNvb3Jkc1syXS5hcnJheVswXSA9IG1heFg7XG4gICAgICAgICAgICBjb29yZHNbMl0uYXJyYXlbMV0gPSBtYXhZO1xuICAgICAgICAgICAgY29vcmRzWzNdLmFycmF5WzBdID0gbWF4WDtcbiAgICAgICAgICAgIGNvb3Jkc1szXS5hcnJheVsxXSA9IG1pblk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jYW1lcmEuY2FzdFJheShjb29yZHNbaV0sIHJheSk7XG4gICAgICAgICAgICAgICAgcmF5LmludGVyc2VjdFBsYW5lKHRoaXMucGxhbmUsIGNvb3Jkc1tpXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb29yZHM7XG4gICAgICAgIH07XG4gICAgfSkoKVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEluZmluaXRlUGxhbmU7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvcGx1Z2luL0luZmluaXRlUGxhbmUuanNcbi8vIG1vZHVsZSBpZCA9IDE4N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///187\n");

/***/ }),
/* 188 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__math_Vector2__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Vector3__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__GestureMgr__ = __webpack_require__(114);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_vendor__ = __webpack_require__(4);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n\n\n\n\n\n\n\nvar MOUSE_BUTTON_KEY_MAP = {\n    left: 0,\n    middle: 1,\n    right: 2\n};\n\nfunction firstNotNull() {\n    for (var i = 0, len = arguments.length; i < len; i++) {\n        if (arguments[i] != null) {\n            return arguments[i];\n        }\n    }\n}\n\nfunction convertToArray(val) {\n    if (!Array.isArray(val)) {\n        val = [val, val];\n    }\n    return val;\n}\n\n/**\n * @constructor\n * @alias clay.plugin.OrbitControl\n * @extends clay.core.Base\n */\nvar OrbitControl = __WEBPACK_IMPORTED_MODULE_0__core_Base__[\"a\" /* default */].extend(function () {\n\n    return /** @lends clay.plugin.OrbitControl# */ {\n\n        /**\n         * @type {clay.Timeline}\n         */\n        timeline: null,\n\n        /**\n         * @type {HTMLElement}\n         */\n        domElement: null,\n\n        /**\n         * @type {clay.Node}\n         */\n        target: null,\n        /**\n         * @type {clay.Vector3}\n         */\n        _center: new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */](),\n\n        /**\n         * Minimum distance to the center\n         * @type {number}\n         * @default 0.5\n         */\n        minDistance: 0.1,\n\n        /**\n         * Maximum distance to the center\n         * @type {number}\n         * @default 2\n         */\n        maxDistance: 1000,\n\n        /**\n         * Only available when camera is orthographic\n         */\n        maxOrthographicSize: 300,\n\n        /**\n         * Only available when camera is orthographic\n         */\n        minOrthographicSize: 30,\n\n        /**\n         * Aspect of orthographic camera\n         * Only available when camera is orthographic\n         */\n        orthographicAspect: 1,\n\n        /**\n         * Minimum alpha rotation\n         */\n        minAlpha: -90,\n\n        /**\n         * Maximum alpha rotation\n         */\n        maxAlpha: 90,\n\n        /**\n         * Minimum beta rotation\n         */\n        minBeta: -Infinity,\n        /**\n         * Maximum beta rotation\n         */\n        maxBeta: Infinity,\n\n        /**\n         * Start auto rotating after still for the given time\n         */\n        autoRotateAfterStill: 0,\n\n        /**\n         * Direction of autoRotate. cw or ccw when looking top down.\n         */\n        autoRotateDirection: 'cw',\n\n        /**\n         * Degree per second\n         */\n        autoRotateSpeed: 60,\n\n        panMouseButton: 'middle',\n        rotateMouseButton: 'left',\n\n        /**\n         * Pan or rotate\n         * @type {String}\n         */\n        _mode: 'rotate',\n\n        /**\n         * @param {number}\n         */\n        damping: 0.8,\n\n        /**\n         * @param {number}\n         */\n        rotateSensitivity: 1,\n\n        /**\n         * @param {number}\n         */\n        zoomSensitivity: 1,\n\n        /**\n         * @param {number}\n         */\n        panSensitivity: 1,\n\n        _needsUpdate: false,\n\n        _rotating: false,\n\n        // Rotation around yAxis\n        _phi: 0,\n        // Rotation around xAxis\n        _theta: 0,\n\n        _mouseX: 0,\n        _mouseY: 0,\n\n        _rotateVelocity: new __WEBPACK_IMPORTED_MODULE_1__math_Vector2__[\"a\" /* default */](),\n\n        _panVelocity: new __WEBPACK_IMPORTED_MODULE_1__math_Vector2__[\"a\" /* default */](),\n\n        _distance: 20,\n\n        _zoomSpeed: 0,\n\n        _stillTimeout: 0,\n\n        _animators: [],\n\n        _gestureMgr: new __WEBPACK_IMPORTED_MODULE_3__GestureMgr__[\"a\" /* default */]()\n    };\n}, function () {\n    // Each OrbitControl has it's own handler\n    this._mouseDownHandler = this._mouseDownHandler.bind(this);\n    this._mouseWheelHandler = this._mouseWheelHandler.bind(this);\n    this._mouseMoveHandler = this._mouseMoveHandler.bind(this);\n    this._mouseUpHandler = this._mouseUpHandler.bind(this);\n    this._pinchHandler = this._pinchHandler.bind(this);\n\n    this.init();\n}, /** @lends clay.plugin.OrbitControl# */ {\n    /**\n     * Initialize.\n     * Mouse event binding\n     */\n    init: function () {\n        var dom = this.domElement;\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchstart', this._mouseDownHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mousedown', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'wheel', this._mouseWheelHandler);\n\n        if (this.timeline) {\n            this.timeline.on('frame', this.update, this);\n        }\n        if (this.target) {\n            this.decomposeTransform();\n        }\n    },\n\n    /**\n     * Dispose.\n     * Mouse event unbinding\n     */\n    dispose: function () {\n        var dom = this.domElement;\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchstart', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchend', this._mouseUpHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousedown', this._mouseDownHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'wheel', this._mouseWheelHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        if (this.timeline) {\n            this.timeline.off('frame', this.update);\n        }\n        this.stopAllAnimation();\n    },\n\n    /**\n     * Get distance\n     * @return {number}\n     */\n    getDistance: function () {\n        return this._distance;\n    },\n\n    /**\n     * Set distance\n     * @param {number} distance\n     */\n    setDistance: function (distance) {\n        this._distance = distance;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Get size of orthographic viewing volume\n     * @return {number}\n     */\n    getOrthographicSize: function () {\n        return this._orthoSize;\n    },\n\n    /**\n     * Set size of orthographic viewing volume\n     * @param {number} size\n     */\n    setOrthographicSize: function (size) {\n        this._orthoSize = size;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Get alpha rotation\n     * Alpha angle for top-down rotation. Positive to rotate to top.\n     *\n     * Which means camera rotation around x axis.\n     */\n    getAlpha: function () {\n        return this._theta / Math.PI * 180;\n    },\n\n    /**\n     * Get beta rotation\n     * Beta angle for left-right rotation. Positive to rotate to right.\n     *\n     * Which means camera rotation around y axis.\n     */\n    getBeta: function () {\n        return -this._phi / Math.PI * 180;\n    },\n\n    /**\n     * Get control center\n     * @return {Array.<number>}\n     */\n    getCenter: function () {\n        return this._center.toArray();\n    },\n\n    /**\n     * Set alpha rotation angle\n     * @param {number} alpha\n     */\n    setAlpha: function (alpha) {\n        alpha = Math.max(Math.min(this.maxAlpha, alpha), this.minAlpha);\n\n        this._theta = alpha / 180 * Math.PI;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Set beta rotation angle\n     * @param {number} beta\n     */\n    setBeta: function (beta) {\n        beta = Math.max(Math.min(this.maxBeta, beta), this.minBeta);\n\n        this._phi = -beta / 180 * Math.PI;\n        this._needsUpdate = true;\n    },\n\n    /**\n     * Set control center\n     * @param {Array.<number>} center\n     */\n    setCenter: function (centerArr) {\n        this._center.setArray(centerArr);\n    },\n\n    setOption: function (opts) {\n        opts = opts || {};\n\n        ['autoRotate', 'autoRotateAfterStill',\n            'autoRotateDirection', 'autoRotateSpeed',\n            'damping',\n            'minDistance', 'maxDistance',\n            'minOrthographicSize', 'maxOrthographicSize', 'orthographicAspect',\n            'minAlpha', 'maxAlpha', 'minBeta', 'maxBeta',\n            'rotateSensitivity', 'zoomSensitivity', 'panSensitivity'\n        ].forEach(function (key) {\n            if (opts[key] != null) {\n                this[key] = opts[key];\n            }\n        }, this);\n\n        if (opts.distance != null) {\n            this.setDistance(opts.distance);\n        }\n        if (opts.orthographicSize != null) {\n            this.setOrthographicSize(opts.orthographicSize);\n        }\n\n        if (opts.alpha != null) {\n            this.setAlpha(opts.alpha);\n        }\n        if (opts.beta != null) {\n            this.setBeta(opts.beta);\n        }\n\n        if (opts.center) {\n            this.setCenter(opts.center);\n        }\n\n        if (this.target) {\n            this._updateTransform();\n            this.target.update();\n        }\n    },\n\n    /**\n     * @param {Object} opts\n     * @param {number} opts.distance\n     * @param {number} opts.orthographicSize\n     * @param {number} opts.alpha\n     * @param {number} opts.beta\n     * @param {Array.<number>} opts.center\n     * @param {number} [opts.duration=1000]\n     * @param {number} [opts.easing='linear']\n     * @param {number} [opts.done]\n     */\n    animateTo: function (opts) {\n        var self = this;\n\n        var obj = {};\n        var target = {};\n        var timeline = this.timeline;\n        if (!timeline) {\n            return;\n        }\n        if (opts.distance != null) {\n            obj.distance = this.getDistance();\n            target.distance = opts.distance;\n        }\n        if (opts.orthographicSize != null) {\n            obj.orthographicSize = this.getOrthographicSize();\n            target.orthographicSize = opts.orthographicSize;\n        }\n        if (opts.alpha != null) {\n            obj.alpha = this.getAlpha();\n            target.alpha = opts.alpha;\n        }\n        if (opts.beta != null) {\n            obj.beta = this.getBeta();\n            target.beta = opts.beta;\n        }\n        if (opts.center != null) {\n            obj.center = this.getCenter();\n            target.center = opts.center;\n        }\n\n        return this._addAnimator(\n            timeline.animate(obj)\n                .when(opts.duration || 1000, target)\n                .during(function () {\n                    if (obj.alpha != null) {\n                        self.setAlpha(obj.alpha);\n                    }\n                    if (obj.beta != null) {\n                        self.setBeta(obj.beta);\n                    }\n                    if (obj.distance != null) {\n                        self.setDistance(obj.distance);\n                    }\n                    if (obj.orthographicSize != null) {\n                        self.setOrthographicSize(obj.orthographicSize);\n                    }\n                    if (obj.center != null) {\n                        self.setCenter(obj.center);\n                    }\n                    self._needsUpdate = true;\n                })\n                .done(opts.done)\n        ).start(opts.easing || 'linear');\n    },\n\n    /**\n     * Stop all animations\n     */\n    stopAllAnimation: function () {\n        for (var i = 0; i < this._animators.length; i++) {\n            this._animators[i].stop();\n        }\n        this._animators.length = 0;\n    },\n\n    _isAnimating: function () {\n        return this._animators.length > 0;\n    },\n    /**\n     * Call update each frame\n     * @param  {number} deltaTime Frame time\n     */\n    update: function (deltaTime) {\n\n        deltaTime = deltaTime || 16;\n\n        if (this._rotating) {\n            var radian = (this.autoRotateDirection === 'cw' ? 1 : -1)\n                * this.autoRotateSpeed / 180 * Math.PI;\n            this._phi -= radian * deltaTime / 1000;\n            this._needsUpdate = true;\n        }\n        else if (this._rotateVelocity.len() > 0) {\n            this._needsUpdate = true;\n        }\n\n        if (Math.abs(this._zoomSpeed) > 0.01 || this._panVelocity.len() > 0) {\n            this._needsUpdate = true;\n        }\n\n        if (!this._needsUpdate) {\n            return;\n        }\n\n        // Fixed deltaTime\n        this._updateDistanceOrSize(Math.min(deltaTime, 50));\n        this._updatePan(Math.min(deltaTime, 50));\n\n        this._updateRotate(Math.min(deltaTime, 50));\n\n        this._updateTransform();\n\n        this.target.update();\n\n        this.trigger('update');\n\n        this._needsUpdate = false;\n    },\n\n    _updateRotate: function (deltaTime) {\n        var velocity = this._rotateVelocity;\n        this._phi = velocity.y * deltaTime / 20 + this._phi;\n        this._theta = velocity.x * deltaTime / 20 + this._theta;\n\n        this.setAlpha(this.getAlpha());\n        this.setBeta(this.getBeta());\n\n        this._vectorDamping(velocity, this.damping);\n    },\n\n    _updateDistanceOrSize: function (deltaTime) {\n        this._setDistance(this._distance + this._zoomSpeed * deltaTime / 20);\n        if (!(this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */])) {\n            this._setOrthoSize(this._orthoSize + this._zoomSpeed * deltaTime / 20);\n        }\n\n        this._zoomSpeed *= Math.pow(this.damping, deltaTime / 16);\n    },\n\n    _setDistance: function (distance) {\n        this._distance = Math.max(Math.min(distance, this.maxDistance), this.minDistance);\n    },\n\n    _setOrthoSize: function (size) {\n        this._orthoSize = Math.max(Math.min(size, this.maxOrthographicSize), this.minOrthographicSize);\n        var camera = this.target;\n        var cameraHeight = this._orthoSize;\n        // TODO\n        var cameraWidth = cameraHeight * this.orthographicAspect;\n        camera.left = -cameraWidth / 2;\n        camera.right = cameraWidth / 2;\n        camera.top = cameraHeight / 2;\n        camera.bottom = -cameraHeight / 2;\n    },\n\n    _updatePan: function (deltaTime) {\n        var velocity = this._panVelocity;\n        var len = this._distance;\n\n        var target = this.target;\n        var yAxis = target.worldTransform.y;\n        var xAxis = target.worldTransform.x;\n\n        // PENDING\n        this._center\n            .scaleAndAdd(xAxis, -velocity.x * len / 200)\n            .scaleAndAdd(yAxis, -velocity.y * len / 200);\n\n        this._vectorDamping(velocity, 0);\n\n        velocity.x = velocity.y = 0;\n    },\n\n    _updateTransform: function () {\n        var camera = this.target;\n\n        var dir = new __WEBPACK_IMPORTED_MODULE_2__math_Vector3__[\"a\" /* default */]();\n        var theta = this._theta + Math.PI / 2;\n        var phi = this._phi + Math.PI / 2;\n        var r = Math.sin(theta);\n\n        dir.x = r * Math.cos(phi);\n        dir.y = -Math.cos(theta);\n        dir.z = r * Math.sin(phi);\n\n        camera.position.copy(this._center).scaleAndAdd(dir, this._distance);\n        camera.rotation.identity()\n            // First around y, then around x\n            .rotateY(-this._phi)\n            .rotateX(-this._theta);\n    },\n\n    _startCountingStill: function () {\n        clearTimeout(this._stillTimeout);\n\n        var time = this.autoRotateAfterStill;\n        var self = this;\n        if (!isNaN(time) && time > 0) {\n            this._stillTimeout = setTimeout(function () {\n                self._rotating = true;\n            }, time * 1000);\n        }\n    },\n\n    _vectorDamping: function (v, damping) {\n        var speed = v.len();\n        speed = speed * damping;\n        if (speed < 1e-4) {\n            speed = 0;\n        }\n        v.normalize().scale(speed);\n    },\n\n    decomposeTransform: function () {\n        if (!this.target) {\n            return;\n        }\n\n        this.target.updateWorldTransform();\n\n        var forward = this.target.worldTransform.z;\n        var alpha = Math.asin(forward.y);\n        var beta = Math.atan2(forward.x, forward.z);\n\n        this._theta = alpha;\n        this._phi = -beta;\n\n        this.setBeta(this.getBeta());\n        this.setAlpha(this.getAlpha());\n\n        this._setDistance(this.target.position.dist(this._center));\n        if (!(this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */])){\n            this._setOrthoSize(this.target.top - this.target.bottom);\n        }\n    },\n\n    _mouseDownHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var x = e.clientX;\n        var y = e.clientY;\n        // Touch\n        if (e.targetTouches) {\n            var touch = e.targetTouches[0];\n            x = touch.clientX;\n            y = touch.clientY;\n\n            this._mode = 'rotate';\n\n            this._processGesture(e, 'start');\n        }\n        else {\n            if (e.button === MOUSE_BUTTON_KEY_MAP[this.rotateMouseButton]) {\n                this._mode = 'rotate';\n            }\n            else if (e.button === MOUSE_BUTTON_KEY_MAP[this.panMouseButton]) {\n                this._mode = 'pan';\n\n                /**\n                 * Vendors like Mozilla provide a mouse-driven panning feature\n                 * that is activated when the middle mouse button is pressed.\n                 *\n                 * @see https://w3c.github.io/uievents/#event-type-mousedown\n                 */\n                e.preventDefault();\n            }\n            else {\n                this._mode = null;\n            }\n        }\n\n        var dom = this.domElement;\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'touchend', this._mouseUpHandler);\n\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].addEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        // Reset rotate velocity\n        this._rotateVelocity.set(0, 0);\n        this._rotating = false;\n        if (this.autoRotate) {\n            this._startCountingStill();\n        }\n\n        this._mouseX = x;\n        this._mouseY = y;\n    },\n\n    _mouseMoveHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var x = e.clientX;\n        var y = e.clientY;\n\n        var haveGesture;\n        // Touch\n        if (e.targetTouches) {\n            var touch = e.targetTouches[0];\n            x = touch.clientX;\n            y = touch.clientY;\n\n            haveGesture = this._processGesture(e, 'change');\n        }\n\n        var panSensitivity = convertToArray(this.panSensitivity);\n        var rotateSensitivity = convertToArray(this.rotateSensitivity);\n\n        if (!haveGesture) {\n            if (this._mode === 'rotate') {\n                this._rotateVelocity.y += (x - this._mouseX) / this.domElement.clientWidth * 2 * rotateSensitivity[0];\n                this._rotateVelocity.x += (y - this._mouseY) / this.domElement.clientHeight * 2 * rotateSensitivity[1];\n            }\n            else if (this._mode === 'pan') {\n                this._panVelocity.x += (x - this._mouseX) / this.domElement.clientWidth * panSensitivity[0] * 400;\n                this._panVelocity.y += (-y + this._mouseY) / this.domElement.clientHeight * panSensitivity[1] * 400;\n            }\n        }\n\n        this._mouseX = x;\n        this._mouseY = y;\n\n        e.preventDefault && e.preventDefault();\n    },\n\n    _mouseWheelHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        var delta = e.deltaY;\n        if (delta === 0) {\n            return;\n        }\n        this._zoomHandler(e, delta > 0 ? 1 : -1);\n    },\n\n    _pinchHandler: function (e) {\n        if (this._isAnimating()) {\n            return;\n        }\n        this._zoomHandler(e, e.pinchScale > 1 ? 0.4 : -0.4);\n    },\n\n    _zoomHandler: function (e, delta) {\n\n        var speed;\n        if (this.target instanceof __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]) {\n            speed = Math.max(Math.max(Math.min(\n                this._distance - this.minDistance,\n                this.maxDistance - this._distance\n            )) / 20, 0.5);\n        }\n        else {\n            speed = Math.max(Math.max(Math.min(\n                this._orthoSize - this.minOrthographicSize,\n                this.maxOrthographicSize - this._orthoSize\n            )) / 20, 0.5);\n        }\n\n        this._zoomSpeed = (delta > 0 ? -1 : 1) * speed * this.zoomSensitivity;\n\n        this._rotating = false;\n\n        if (this.autoRotate && this._mode === 'rotate') {\n            this._startCountingStill();\n        }\n\n        e.preventDefault && e.preventDefault();\n    },\n\n    _mouseUpHandler: function (event) {\n        var dom = this.domElement;\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchmove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'touchend', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mousemove', this._mouseMoveHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseup', this._mouseUpHandler);\n        __WEBPACK_IMPORTED_MODULE_4__core_vendor__[\"a\" /* default */].removeEventListener(dom, 'mouseout', this._mouseUpHandler);\n\n        this._processGesture(event, 'end');\n    },\n\n    _addAnimator: function (animator) {\n        var animators = this._animators;\n        animators.push(animator);\n        animator.done(function () {\n            var idx = animators.indexOf(animator);\n            if (idx >= 0) {\n                animators.splice(idx, 1);\n            }\n        });\n        return animator;\n    },\n\n\n    _processGesture: function (event, stage) {\n        var gestureMgr = this._gestureMgr;\n\n        stage === 'start' && gestureMgr.clear();\n\n        var gestureInfo = gestureMgr.recognize(\n            event,\n            null,\n            this.domElement\n        );\n\n        stage === 'end' && gestureMgr.clear();\n\n        // Do not do any preventDefault here. Upper application do that if necessary.\n        if (gestureInfo) {\n            var type = gestureInfo.type;\n            event.gestureEvent = type;\n\n            this._pinchHandler(gestureInfo.event);\n        }\n\n        return gestureInfo;\n    }\n});\n\n/**\n * If auto rotate the target\n * @type {boolean}\n * @default false\n */\nObject.defineProperty(OrbitControl.prototype, 'autoRotate', {\n    get: function () {\n        return this._autoRotate;\n    },\n    set: function (val) {\n        this._autoRotate = val;\n        this._rotating = val;\n    }\n});\n\nObject.defineProperty(OrbitControl.prototype, 'target', {\n    get: function () {\n        return this._target;\n    },\n    set: function (val) {\n        if (val && val.target) {\n            this.setCenter(val.target.toArray());\n        }\n        this._target = val;\n        this.decomposeTransform();\n    }\n});\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (OrbitControl);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9wbHVnaW4vT3JiaXRDb250cm9sLmpzPzRlNWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJhc2UgZnJvbSAnLi4vY29yZS9CYXNlJztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4uL21hdGgvVmVjdG9yMic7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuLi9tYXRoL1ZlY3RvcjMnO1xuaW1wb3J0IEdlc3R1cmVNZ3IgZnJvbSAnLi9HZXN0dXJlTWdyJztcbmltcG9ydCB2ZW5kb3IgZnJvbSAnLi4vY29yZS92ZW5kb3InO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5cbnZhciBNT1VTRV9CVVRUT05fS0VZX01BUCA9IHtcbiAgICBsZWZ0OiAwLFxuICAgIG1pZGRsZTogMSxcbiAgICByaWdodDogMlxufTtcblxuZnVuY3Rpb24gZmlyc3ROb3ROdWxsKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50c1tpXSAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJndW1lbnRzW2ldO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjb252ZXJ0VG9BcnJheSh2YWwpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwgPSBbdmFsLCB2YWxdO1xuICAgIH1cbiAgICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIGNsYXkucGx1Z2luLk9yYml0Q29udHJvbFxuICogQGV4dGVuZHMgY2xheS5jb3JlLkJhc2VcbiAqL1xudmFyIE9yYml0Q29udHJvbCA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcblxuICAgIHJldHVybiAvKiogQGxlbmRzIGNsYXkucGx1Z2luLk9yYml0Q29udHJvbCMgKi8ge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5UaW1lbGluZX1cbiAgICAgICAgICovXG4gICAgICAgIHRpbWVsaW5lOiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBkb21FbGVtZW50OiBudWxsLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Y2xheS5Ob2RlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGFyZ2V0OiBudWxsLFxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge2NsYXkuVmVjdG9yM31cbiAgICAgICAgICovXG4gICAgICAgIF9jZW50ZXI6IG5ldyBWZWN0b3IzKCksXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pbmltdW0gZGlzdGFuY2UgdG8gdGhlIGNlbnRlclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAwLjVcbiAgICAgICAgICovXG4gICAgICAgIG1pbkRpc3RhbmNlOiAwLjEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1heGltdW0gZGlzdGFuY2UgdG8gdGhlIGNlbnRlclxuICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfVxuICAgICAgICAgKiBAZGVmYXVsdCAyXG4gICAgICAgICAqL1xuICAgICAgICBtYXhEaXN0YW5jZTogMTAwMCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogT25seSBhdmFpbGFibGUgd2hlbiBjYW1lcmEgaXMgb3J0aG9ncmFwaGljXG4gICAgICAgICAqL1xuICAgICAgICBtYXhPcnRob2dyYXBoaWNTaXplOiAzMDAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gY2FtZXJhIGlzIG9ydGhvZ3JhcGhpY1xuICAgICAgICAgKi9cbiAgICAgICAgbWluT3J0aG9ncmFwaGljU2l6ZTogMzAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFzcGVjdCBvZiBvcnRob2dyYXBoaWMgY2FtZXJhXG4gICAgICAgICAqIE9ubHkgYXZhaWxhYmxlIHdoZW4gY2FtZXJhIGlzIG9ydGhvZ3JhcGhpY1xuICAgICAgICAgKi9cbiAgICAgICAgb3J0aG9ncmFwaGljQXNwZWN0OiAxLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNaW5pbXVtIGFscGhhIHJvdGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBtaW5BbHBoYTogLTkwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXhpbXVtIGFscGhhIHJvdGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBtYXhBbHBoYTogOTAsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1pbmltdW0gYmV0YSByb3RhdGlvblxuICAgICAgICAgKi9cbiAgICAgICAgbWluQmV0YTogLUluZmluaXR5LFxuICAgICAgICAvKipcbiAgICAgICAgICogTWF4aW11bSBiZXRhIHJvdGF0aW9uXG4gICAgICAgICAqL1xuICAgICAgICBtYXhCZXRhOiBJbmZpbml0eSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU3RhcnQgYXV0byByb3RhdGluZyBhZnRlciBzdGlsbCBmb3IgdGhlIGdpdmVuIHRpbWVcbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Sb3RhdGVBZnRlclN0aWxsOiAwLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXJlY3Rpb24gb2YgYXV0b1JvdGF0ZS4gY3cgb3IgY2N3IHdoZW4gbG9va2luZyB0b3AgZG93bi5cbiAgICAgICAgICovXG4gICAgICAgIGF1dG9Sb3RhdGVEaXJlY3Rpb246ICdjdycsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZ3JlZSBwZXIgc2Vjb25kXG4gICAgICAgICAqL1xuICAgICAgICBhdXRvUm90YXRlU3BlZWQ6IDYwLFxuXG4gICAgICAgIHBhbk1vdXNlQnV0dG9uOiAnbWlkZGxlJyxcbiAgICAgICAgcm90YXRlTW91c2VCdXR0b246ICdsZWZ0JyxcblxuICAgICAgICAvKipcbiAgICAgICAgICogUGFuIG9yIHJvdGF0ZVxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgX21vZGU6ICdyb3RhdGUnLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcGFyYW0ge251bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIGRhbXBpbmc6IDAuOCxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICByb3RhdGVTZW5zaXRpdml0eTogMSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB6b29tU2Vuc2l0aXZpdHk6IDEsXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgcGFuU2Vuc2l0aXZpdHk6IDEsXG5cbiAgICAgICAgX25lZWRzVXBkYXRlOiBmYWxzZSxcblxuICAgICAgICBfcm90YXRpbmc6IGZhbHNlLFxuXG4gICAgICAgIC8vIFJvdGF0aW9uIGFyb3VuZCB5QXhpc1xuICAgICAgICBfcGhpOiAwLFxuICAgICAgICAvLyBSb3RhdGlvbiBhcm91bmQgeEF4aXNcbiAgICAgICAgX3RoZXRhOiAwLFxuXG4gICAgICAgIF9tb3VzZVg6IDAsXG4gICAgICAgIF9tb3VzZVk6IDAsXG5cbiAgICAgICAgX3JvdGF0ZVZlbG9jaXR5OiBuZXcgVmVjdG9yMigpLFxuXG4gICAgICAgIF9wYW5WZWxvY2l0eTogbmV3IFZlY3RvcjIoKSxcblxuICAgICAgICBfZGlzdGFuY2U6IDIwLFxuXG4gICAgICAgIF96b29tU3BlZWQ6IDAsXG5cbiAgICAgICAgX3N0aWxsVGltZW91dDogMCxcblxuICAgICAgICBfYW5pbWF0b3JzOiBbXSxcblxuICAgICAgICBfZ2VzdHVyZU1ncjogbmV3IEdlc3R1cmVNZ3IoKVxuICAgIH07XG59LCBmdW5jdGlvbiAoKSB7XG4gICAgLy8gRWFjaCBPcmJpdENvbnRyb2wgaGFzIGl0J3Mgb3duIGhhbmRsZXJcbiAgICB0aGlzLl9tb3VzZURvd25IYW5kbGVyID0gdGhpcy5fbW91c2VEb3duSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX21vdXNlV2hlZWxIYW5kbGVyID0gdGhpcy5fbW91c2VXaGVlbEhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5fbW91c2VNb3ZlSGFuZGxlci5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5fbW91c2VVcEhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICB0aGlzLl9waW5jaEhhbmRsZXIgPSB0aGlzLl9waW5jaEhhbmRsZXIuYmluZCh0aGlzKTtcblxuICAgIHRoaXMuaW5pdCgpO1xufSwgLyoqIEBsZW5kcyBjbGF5LnBsdWdpbi5PcmJpdENvbnRyb2wjICovIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplLlxuICAgICAqIE1vdXNlIGV2ZW50IGJpbmRpbmdcbiAgICAgKi9cbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkb20gPSB0aGlzLmRvbUVsZW1lbnQ7XG5cbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCAndG91Y2hzdGFydCcsIHRoaXMuX21vdXNlRG93bkhhbmRsZXIpO1xuXG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlZG93bicsIHRoaXMuX21vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICd3aGVlbCcsIHRoaXMuX21vdXNlV2hlZWxIYW5kbGVyKTtcblxuICAgICAgICBpZiAodGhpcy50aW1lbGluZSkge1xuICAgICAgICAgICAgdGhpcy50aW1lbGluZS5vbignZnJhbWUnLCB0aGlzLnVwZGF0ZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLmRlY29tcG9zZVRyYW5zZm9ybSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIERpc3Bvc2UuXG4gICAgICogTW91c2UgZXZlbnQgdW5iaW5kaW5nXG4gICAgICovXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZG9tID0gdGhpcy5kb21FbGVtZW50O1xuXG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNoc3RhcnQnLCB0aGlzLl9tb3VzZURvd25IYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAndG91Y2htb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNoZW5kJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlZG93bicsIHRoaXMuX21vdXNlRG93bkhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAnbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAnd2hlZWwnLCB0aGlzLl9tb3VzZVdoZWVsSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlb3V0JywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIGlmICh0aGlzLnRpbWVsaW5lKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVsaW5lLm9mZignZnJhbWUnLCB0aGlzLnVwZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdG9wQWxsQW5pbWF0aW9uKCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEdldCBkaXN0YW5jZVxuICAgICAqIEByZXR1cm4ge251bWJlcn1cbiAgICAgKi9cbiAgICBnZXREaXN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzdGFuY2U7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBkaXN0YW5jZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkaXN0YW5jZVxuICAgICAqL1xuICAgIHNldERpc3RhbmNlOiBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5fZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZXQgc2l6ZSBvZiBvcnRob2dyYXBoaWMgdmlld2luZyB2b2x1bWVcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0T3J0aG9ncmFwaGljU2l6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fb3J0aG9TaXplO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgc2l6ZSBvZiBvcnRob2dyYXBoaWMgdmlld2luZyB2b2x1bWVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gc2l6ZVxuICAgICAqL1xuICAgIHNldE9ydGhvZ3JhcGhpY1NpemU6IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgICAgIHRoaXMuX29ydGhvU2l6ZSA9IHNpemU7XG4gICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGFscGhhIHJvdGF0aW9uXG4gICAgICogQWxwaGEgYW5nbGUgZm9yIHRvcC1kb3duIHJvdGF0aW9uLiBQb3NpdGl2ZSB0byByb3RhdGUgdG8gdG9wLlxuICAgICAqXG4gICAgICogV2hpY2ggbWVhbnMgY2FtZXJhIHJvdGF0aW9uIGFyb3VuZCB4IGF4aXMuXG4gICAgICovXG4gICAgZ2V0QWxwaGE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RoZXRhIC8gTWF0aC5QSSAqIDE4MDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGJldGEgcm90YXRpb25cbiAgICAgKiBCZXRhIGFuZ2xlIGZvciBsZWZ0LXJpZ2h0IHJvdGF0aW9uLiBQb3NpdGl2ZSB0byByb3RhdGUgdG8gcmlnaHQuXG4gICAgICpcbiAgICAgKiBXaGljaCBtZWFucyBjYW1lcmEgcm90YXRpb24gYXJvdW5kIHkgYXhpcy5cbiAgICAgKi9cbiAgICBnZXRCZXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiAtdGhpcy5fcGhpIC8gTWF0aC5QSSAqIDE4MDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogR2V0IGNvbnRyb2wgY2VudGVyXG4gICAgICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59XG4gICAgICovXG4gICAgZ2V0Q2VudGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jZW50ZXIudG9BcnJheSgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgYWxwaGEgcm90YXRpb24gYW5nbGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gYWxwaGFcbiAgICAgKi9cbiAgICBzZXRBbHBoYTogZnVuY3Rpb24gKGFscGhhKSB7XG4gICAgICAgIGFscGhhID0gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5tYXhBbHBoYSwgYWxwaGEpLCB0aGlzLm1pbkFscGhhKTtcblxuICAgICAgICB0aGlzLl90aGV0YSA9IGFscGhhIC8gMTgwICogTWF0aC5QSTtcbiAgICAgICAgdGhpcy5fbmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgYmV0YSByb3RhdGlvbiBhbmdsZVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiZXRhXG4gICAgICovXG4gICAgc2V0QmV0YTogZnVuY3Rpb24gKGJldGEpIHtcbiAgICAgICAgYmV0YSA9IE1hdGgubWF4KE1hdGgubWluKHRoaXMubWF4QmV0YSwgYmV0YSksIHRoaXMubWluQmV0YSk7XG5cbiAgICAgICAgdGhpcy5fcGhpID0gLWJldGEgLyAxODAgKiBNYXRoLlBJO1xuICAgICAgICB0aGlzLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFNldCBjb250cm9sIGNlbnRlclxuICAgICAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGNlbnRlclxuICAgICAqL1xuICAgIHNldENlbnRlcjogZnVuY3Rpb24gKGNlbnRlckFycikge1xuICAgICAgICB0aGlzLl9jZW50ZXIuc2V0QXJyYXkoY2VudGVyQXJyKTtcbiAgICB9LFxuXG4gICAgc2V0T3B0aW9uOiBmdW5jdGlvbiAob3B0cykge1xuICAgICAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgICAgICBbJ2F1dG9Sb3RhdGUnLCAnYXV0b1JvdGF0ZUFmdGVyU3RpbGwnLFxuICAgICAgICAgICAgJ2F1dG9Sb3RhdGVEaXJlY3Rpb24nLCAnYXV0b1JvdGF0ZVNwZWVkJyxcbiAgICAgICAgICAgICdkYW1waW5nJyxcbiAgICAgICAgICAgICdtaW5EaXN0YW5jZScsICdtYXhEaXN0YW5jZScsXG4gICAgICAgICAgICAnbWluT3J0aG9ncmFwaGljU2l6ZScsICdtYXhPcnRob2dyYXBoaWNTaXplJywgJ29ydGhvZ3JhcGhpY0FzcGVjdCcsXG4gICAgICAgICAgICAnbWluQWxwaGEnLCAnbWF4QWxwaGEnLCAnbWluQmV0YScsICdtYXhCZXRhJyxcbiAgICAgICAgICAgICdyb3RhdGVTZW5zaXRpdml0eScsICd6b29tU2Vuc2l0aXZpdHknLCAncGFuU2Vuc2l0aXZpdHknXG4gICAgICAgIF0uZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICBpZiAob3B0c1trZXldICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSBvcHRzW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMpO1xuXG4gICAgICAgIGlmIChvcHRzLmRpc3RhbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGlzdGFuY2Uob3B0cy5kaXN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMub3J0aG9ncmFwaGljU2l6ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNldE9ydGhvZ3JhcGhpY1NpemUob3B0cy5vcnRob2dyYXBoaWNTaXplKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzLmFscGhhICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0QWxwaGEob3B0cy5hbHBoYSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuYmV0YSAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnNldEJldGEob3B0cy5iZXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzLmNlbnRlcikge1xuICAgICAgICAgICAgdGhpcy5zZXRDZW50ZXIob3B0cy5jZW50ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0LnVwZGF0ZSgpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRzXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMuZGlzdGFuY2VcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0cy5vcnRob2dyYXBoaWNTaXplXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG9wdHMuYWxwaGFcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb3B0cy5iZXRhXG4gICAgICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gb3B0cy5jZW50ZXJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZHVyYXRpb249MTAwMF1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuZWFzaW5nPSdsaW5lYXInXVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5kb25lXVxuICAgICAqL1xuICAgIGFuaW1hdGVUbzogZnVuY3Rpb24gKG9wdHMpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgdmFyIHRhcmdldCA9IHt9O1xuICAgICAgICB2YXIgdGltZWxpbmUgPSB0aGlzLnRpbWVsaW5lO1xuICAgICAgICBpZiAoIXRpbWVsaW5lKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuZGlzdGFuY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgb2JqLmRpc3RhbmNlID0gdGhpcy5nZXREaXN0YW5jZSgpO1xuICAgICAgICAgICAgdGFyZ2V0LmRpc3RhbmNlID0gb3B0cy5kaXN0YW5jZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5vcnRob2dyYXBoaWNTaXplICE9IG51bGwpIHtcbiAgICAgICAgICAgIG9iai5vcnRob2dyYXBoaWNTaXplID0gdGhpcy5nZXRPcnRob2dyYXBoaWNTaXplKCk7XG4gICAgICAgICAgICB0YXJnZXQub3J0aG9ncmFwaGljU2l6ZSA9IG9wdHMub3J0aG9ncmFwaGljU2l6ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5hbHBoYSAhPSBudWxsKSB7XG4gICAgICAgICAgICBvYmouYWxwaGEgPSB0aGlzLmdldEFscGhhKCk7XG4gICAgICAgICAgICB0YXJnZXQuYWxwaGEgPSBvcHRzLmFscGhhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmJldGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgb2JqLmJldGEgPSB0aGlzLmdldEJldGEoKTtcbiAgICAgICAgICAgIHRhcmdldC5iZXRhID0gb3B0cy5iZXRhO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmNlbnRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICBvYmouY2VudGVyID0gdGhpcy5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIHRhcmdldC5jZW50ZXIgPSBvcHRzLmNlbnRlcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLl9hZGRBbmltYXRvcihcbiAgICAgICAgICAgIHRpbWVsaW5lLmFuaW1hdGUob2JqKVxuICAgICAgICAgICAgICAgIC53aGVuKG9wdHMuZHVyYXRpb24gfHwgMTAwMCwgdGFyZ2V0KVxuICAgICAgICAgICAgICAgIC5kdXJpbmcoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmFscGhhICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0QWxwaGEob2JqLmFscGhhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmJldGEgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRCZXRhKG9iai5iZXRhKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmRpc3RhbmNlICE9IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuc2V0RGlzdGFuY2Uob2JqLmRpc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLm9ydGhvZ3JhcGhpY1NpemUgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5zZXRPcnRob2dyYXBoaWNTaXplKG9iai5vcnRob2dyYXBoaWNTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqLmNlbnRlciAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLnNldENlbnRlcihvYmouY2VudGVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLl9uZWVkc1VwZGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuZG9uZShvcHRzLmRvbmUpXG4gICAgICAgICkuc3RhcnQob3B0cy5lYXNpbmcgfHwgJ2xpbmVhcicpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTdG9wIGFsbCBhbmltYXRpb25zXG4gICAgICovXG4gICAgc3RvcEFsbEFuaW1hdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuX2FuaW1hdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0b3JzW2ldLnN0b3AoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hbmltYXRvcnMubGVuZ3RoID0gMDtcbiAgICB9LFxuXG4gICAgX2lzQW5pbWF0aW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hbmltYXRvcnMubGVuZ3RoID4gMDtcbiAgICB9LFxuICAgIC8qKlxuICAgICAqIENhbGwgdXBkYXRlIGVhY2ggZnJhbWVcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IGRlbHRhVGltZSBGcmFtZSB0aW1lXG4gICAgICovXG4gICAgdXBkYXRlOiBmdW5jdGlvbiAoZGVsdGFUaW1lKSB7XG5cbiAgICAgICAgZGVsdGFUaW1lID0gZGVsdGFUaW1lIHx8IDE2O1xuXG4gICAgICAgIGlmICh0aGlzLl9yb3RhdGluZykge1xuICAgICAgICAgICAgdmFyIHJhZGlhbiA9ICh0aGlzLmF1dG9Sb3RhdGVEaXJlY3Rpb24gPT09ICdjdycgPyAxIDogLTEpXG4gICAgICAgICAgICAgICAgKiB0aGlzLmF1dG9Sb3RhdGVTcGVlZCAvIDE4MCAqIE1hdGguUEk7XG4gICAgICAgICAgICB0aGlzLl9waGkgLT0gcmFkaWFuICogZGVsdGFUaW1lIC8gMTAwMDtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0aGlzLl9yb3RhdGVWZWxvY2l0eS5sZW4oKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChNYXRoLmFicyh0aGlzLl96b29tU3BlZWQpID4gMC4wMSB8fCB0aGlzLl9wYW5WZWxvY2l0eS5sZW4oKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5fbmVlZHNVcGRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpeGVkIGRlbHRhVGltZVxuICAgICAgICB0aGlzLl91cGRhdGVEaXN0YW5jZU9yU2l6ZShNYXRoLm1pbihkZWx0YVRpbWUsIDUwKSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVBhbihNYXRoLm1pbihkZWx0YVRpbWUsIDUwKSk7XG5cbiAgICAgICAgdGhpcy5fdXBkYXRlUm90YXRlKE1hdGgubWluKGRlbHRhVGltZSwgNTApKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVUcmFuc2Zvcm0oKTtcblxuICAgICAgICB0aGlzLnRhcmdldC51cGRhdGUoKTtcblxuICAgICAgICB0aGlzLnRyaWdnZXIoJ3VwZGF0ZScpO1xuXG4gICAgICAgIHRoaXMuX25lZWRzVXBkYXRlID0gZmFsc2U7XG4gICAgfSxcblxuICAgIF91cGRhdGVSb3RhdGU6IGZ1bmN0aW9uIChkZWx0YVRpbWUpIHtcbiAgICAgICAgdmFyIHZlbG9jaXR5ID0gdGhpcy5fcm90YXRlVmVsb2NpdHk7XG4gICAgICAgIHRoaXMuX3BoaSA9IHZlbG9jaXR5LnkgKiBkZWx0YVRpbWUgLyAyMCArIHRoaXMuX3BoaTtcbiAgICAgICAgdGhpcy5fdGhldGEgPSB2ZWxvY2l0eS54ICogZGVsdGFUaW1lIC8gMjAgKyB0aGlzLl90aGV0YTtcblxuICAgICAgICB0aGlzLnNldEFscGhhKHRoaXMuZ2V0QWxwaGEoKSk7XG4gICAgICAgIHRoaXMuc2V0QmV0YSh0aGlzLmdldEJldGEoKSk7XG5cbiAgICAgICAgdGhpcy5fdmVjdG9yRGFtcGluZyh2ZWxvY2l0eSwgdGhpcy5kYW1waW5nKTtcbiAgICB9LFxuXG4gICAgX3VwZGF0ZURpc3RhbmNlT3JTaXplOiBmdW5jdGlvbiAoZGVsdGFUaW1lKSB7XG4gICAgICAgIHRoaXMuX3NldERpc3RhbmNlKHRoaXMuX2Rpc3RhbmNlICsgdGhpcy5fem9vbVNwZWVkICogZGVsdGFUaW1lIC8gMjApO1xuICAgICAgICBpZiAoISh0aGlzLnRhcmdldCBpbnN0YW5jZW9mIFBlcnNwZWN0aXZlQ2FtZXJhKSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0T3J0aG9TaXplKHRoaXMuX29ydGhvU2l6ZSArIHRoaXMuX3pvb21TcGVlZCAqIGRlbHRhVGltZSAvIDIwKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3pvb21TcGVlZCAqPSBNYXRoLnBvdyh0aGlzLmRhbXBpbmcsIGRlbHRhVGltZSAvIDE2KTtcbiAgICB9LFxuXG4gICAgX3NldERpc3RhbmNlOiBmdW5jdGlvbiAoZGlzdGFuY2UpIHtcbiAgICAgICAgdGhpcy5fZGlzdGFuY2UgPSBNYXRoLm1heChNYXRoLm1pbihkaXN0YW5jZSwgdGhpcy5tYXhEaXN0YW5jZSksIHRoaXMubWluRGlzdGFuY2UpO1xuICAgIH0sXG5cbiAgICBfc2V0T3J0aG9TaXplOiBmdW5jdGlvbiAoc2l6ZSkge1xuICAgICAgICB0aGlzLl9vcnRob1NpemUgPSBNYXRoLm1heChNYXRoLm1pbihzaXplLCB0aGlzLm1heE9ydGhvZ3JhcGhpY1NpemUpLCB0aGlzLm1pbk9ydGhvZ3JhcGhpY1NpemUpO1xuICAgICAgICB2YXIgY2FtZXJhID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIHZhciBjYW1lcmFIZWlnaHQgPSB0aGlzLl9vcnRob1NpemU7XG4gICAgICAgIC8vIFRPRE9cbiAgICAgICAgdmFyIGNhbWVyYVdpZHRoID0gY2FtZXJhSGVpZ2h0ICogdGhpcy5vcnRob2dyYXBoaWNBc3BlY3Q7XG4gICAgICAgIGNhbWVyYS5sZWZ0ID0gLWNhbWVyYVdpZHRoIC8gMjtcbiAgICAgICAgY2FtZXJhLnJpZ2h0ID0gY2FtZXJhV2lkdGggLyAyO1xuICAgICAgICBjYW1lcmEudG9wID0gY2FtZXJhSGVpZ2h0IC8gMjtcbiAgICAgICAgY2FtZXJhLmJvdHRvbSA9IC1jYW1lcmFIZWlnaHQgLyAyO1xuICAgIH0sXG5cbiAgICBfdXBkYXRlUGFuOiBmdW5jdGlvbiAoZGVsdGFUaW1lKSB7XG4gICAgICAgIHZhciB2ZWxvY2l0eSA9IHRoaXMuX3BhblZlbG9jaXR5O1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5fZGlzdGFuY2U7XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICB2YXIgeUF4aXMgPSB0YXJnZXQud29ybGRUcmFuc2Zvcm0ueTtcbiAgICAgICAgdmFyIHhBeGlzID0gdGFyZ2V0LndvcmxkVHJhbnNmb3JtLng7XG5cbiAgICAgICAgLy8gUEVORElOR1xuICAgICAgICB0aGlzLl9jZW50ZXJcbiAgICAgICAgICAgIC5zY2FsZUFuZEFkZCh4QXhpcywgLXZlbG9jaXR5LnggKiBsZW4gLyAyMDApXG4gICAgICAgICAgICAuc2NhbGVBbmRBZGQoeUF4aXMsIC12ZWxvY2l0eS55ICogbGVuIC8gMjAwKTtcblxuICAgICAgICB0aGlzLl92ZWN0b3JEYW1waW5nKHZlbG9jaXR5LCAwKTtcblxuICAgICAgICB2ZWxvY2l0eS54ID0gdmVsb2NpdHkueSA9IDA7XG4gICAgfSxcblxuICAgIF91cGRhdGVUcmFuc2Zvcm06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGNhbWVyYSA9IHRoaXMudGFyZ2V0O1xuXG4gICAgICAgIHZhciBkaXIgPSBuZXcgVmVjdG9yMygpO1xuICAgICAgICB2YXIgdGhldGEgPSB0aGlzLl90aGV0YSArIE1hdGguUEkgLyAyO1xuICAgICAgICB2YXIgcGhpID0gdGhpcy5fcGhpICsgTWF0aC5QSSAvIDI7XG4gICAgICAgIHZhciByID0gTWF0aC5zaW4odGhldGEpO1xuXG4gICAgICAgIGRpci54ID0gciAqIE1hdGguY29zKHBoaSk7XG4gICAgICAgIGRpci55ID0gLU1hdGguY29zKHRoZXRhKTtcbiAgICAgICAgZGlyLnogPSByICogTWF0aC5zaW4ocGhpKTtcblxuICAgICAgICBjYW1lcmEucG9zaXRpb24uY29weSh0aGlzLl9jZW50ZXIpLnNjYWxlQW5kQWRkKGRpciwgdGhpcy5fZGlzdGFuY2UpO1xuICAgICAgICBjYW1lcmEucm90YXRpb24uaWRlbnRpdHkoKVxuICAgICAgICAgICAgLy8gRmlyc3QgYXJvdW5kIHksIHRoZW4gYXJvdW5kIHhcbiAgICAgICAgICAgIC5yb3RhdGVZKC10aGlzLl9waGkpXG4gICAgICAgICAgICAucm90YXRlWCgtdGhpcy5fdGhldGEpO1xuICAgIH0sXG5cbiAgICBfc3RhcnRDb3VudGluZ1N0aWxsOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9zdGlsbFRpbWVvdXQpO1xuXG4gICAgICAgIHZhciB0aW1lID0gdGhpcy5hdXRvUm90YXRlQWZ0ZXJTdGlsbDtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoIWlzTmFOKHRpbWUpICYmIHRpbWUgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGlsbFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9yb3RhdGluZyA9IHRydWU7XG4gICAgICAgICAgICB9LCB0aW1lICogMTAwMCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgX3ZlY3RvckRhbXBpbmc6IGZ1bmN0aW9uICh2LCBkYW1waW5nKSB7XG4gICAgICAgIHZhciBzcGVlZCA9IHYubGVuKCk7XG4gICAgICAgIHNwZWVkID0gc3BlZWQgKiBkYW1waW5nO1xuICAgICAgICBpZiAoc3BlZWQgPCAxZS00KSB7XG4gICAgICAgICAgICBzcGVlZCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdi5ub3JtYWxpemUoKS5zY2FsZShzcGVlZCk7XG4gICAgfSxcblxuICAgIGRlY29tcG9zZVRyYW5zZm9ybTogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMudGFyZ2V0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRhcmdldC51cGRhdGVXb3JsZFRyYW5zZm9ybSgpO1xuXG4gICAgICAgIHZhciBmb3J3YXJkID0gdGhpcy50YXJnZXQud29ybGRUcmFuc2Zvcm0uejtcbiAgICAgICAgdmFyIGFscGhhID0gTWF0aC5hc2luKGZvcndhcmQueSk7XG4gICAgICAgIHZhciBiZXRhID0gTWF0aC5hdGFuMihmb3J3YXJkLngsIGZvcndhcmQueik7XG5cbiAgICAgICAgdGhpcy5fdGhldGEgPSBhbHBoYTtcbiAgICAgICAgdGhpcy5fcGhpID0gLWJldGE7XG5cbiAgICAgICAgdGhpcy5zZXRCZXRhKHRoaXMuZ2V0QmV0YSgpKTtcbiAgICAgICAgdGhpcy5zZXRBbHBoYSh0aGlzLmdldEFscGhhKCkpO1xuXG4gICAgICAgIHRoaXMuX3NldERpc3RhbmNlKHRoaXMudGFyZ2V0LnBvc2l0aW9uLmRpc3QodGhpcy5fY2VudGVyKSk7XG4gICAgICAgIGlmICghKHRoaXMudGFyZ2V0IGluc3RhbmNlb2YgUGVyc3BlY3RpdmVDYW1lcmEpKXtcbiAgICAgICAgICAgIHRoaXMuX3NldE9ydGhvU2l6ZSh0aGlzLnRhcmdldC50b3AgLSB0aGlzLnRhcmdldC5ib3R0b20pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIF9tb3VzZURvd25IYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB4ID0gZS5jbGllbnRYO1xuICAgICAgICB2YXIgeSA9IGUuY2xpZW50WTtcbiAgICAgICAgLy8gVG91Y2hcbiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcykge1xuICAgICAgICAgICAgdmFyIHRvdWNoID0gZS50YXJnZXRUb3VjaGVzWzBdO1xuICAgICAgICAgICAgeCA9IHRvdWNoLmNsaWVudFg7XG4gICAgICAgICAgICB5ID0gdG91Y2guY2xpZW50WTtcblxuICAgICAgICAgICAgdGhpcy5fbW9kZSA9ICdyb3RhdGUnO1xuXG4gICAgICAgICAgICB0aGlzLl9wcm9jZXNzR2VzdHVyZShlLCAnc3RhcnQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmIChlLmJ1dHRvbiA9PT0gTU9VU0VfQlVUVE9OX0tFWV9NQVBbdGhpcy5yb3RhdGVNb3VzZUJ1dHRvbl0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb2RlID0gJ3JvdGF0ZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChlLmJ1dHRvbiA9PT0gTU9VU0VfQlVUVE9OX0tFWV9NQVBbdGhpcy5wYW5Nb3VzZUJ1dHRvbl0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9tb2RlID0gJ3Bhbic7XG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBWZW5kb3JzIGxpa2UgTW96aWxsYSBwcm92aWRlIGEgbW91c2UtZHJpdmVuIHBhbm5pbmcgZmVhdHVyZVxuICAgICAgICAgICAgICAgICAqIHRoYXQgaXMgYWN0aXZhdGVkIHdoZW4gdGhlIG1pZGRsZSBtb3VzZSBidXR0b24gaXMgcHJlc3NlZC5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEBzZWUgaHR0cHM6Ly93M2MuZ2l0aHViLmlvL3VpZXZlbnRzLyNldmVudC10eXBlLW1vdXNlZG93blxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuX21vZGUgPSBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGRvbSA9IHRoaXMuZG9tRWxlbWVudDtcbiAgICAgICAgdmVuZG9yLmFkZEV2ZW50TGlzdGVuZXIoZG9tLCAndG91Y2htb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNoZW5kJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIHZlbmRvci5hZGRFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IuYWRkRXZlbnRMaXN0ZW5lcihkb20sICdtb3VzZW91dCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblxuICAgICAgICAvLyBSZXNldCByb3RhdGUgdmVsb2NpdHlcbiAgICAgICAgdGhpcy5fcm90YXRlVmVsb2NpdHkuc2V0KDAsIDApO1xuICAgICAgICB0aGlzLl9yb3RhdGluZyA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5hdXRvUm90YXRlKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGFydENvdW50aW5nU3RpbGwoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX21vdXNlWCA9IHg7XG4gICAgICAgIHRoaXMuX21vdXNlWSA9IHk7XG4gICAgfSxcblxuICAgIF9tb3VzZU1vdmVIYW5kbGVyOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAodGhpcy5faXNBbmltYXRpbmcoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciB4ID0gZS5jbGllbnRYO1xuICAgICAgICB2YXIgeSA9IGUuY2xpZW50WTtcblxuICAgICAgICB2YXIgaGF2ZUdlc3R1cmU7XG4gICAgICAgIC8vIFRvdWNoXG4gICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMpIHtcbiAgICAgICAgICAgIHZhciB0b3VjaCA9IGUudGFyZ2V0VG91Y2hlc1swXTtcbiAgICAgICAgICAgIHggPSB0b3VjaC5jbGllbnRYO1xuICAgICAgICAgICAgeSA9IHRvdWNoLmNsaWVudFk7XG5cbiAgICAgICAgICAgIGhhdmVHZXN0dXJlID0gdGhpcy5fcHJvY2Vzc0dlc3R1cmUoZSwgJ2NoYW5nZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHBhblNlbnNpdGl2aXR5ID0gY29udmVydFRvQXJyYXkodGhpcy5wYW5TZW5zaXRpdml0eSk7XG4gICAgICAgIHZhciByb3RhdGVTZW5zaXRpdml0eSA9IGNvbnZlcnRUb0FycmF5KHRoaXMucm90YXRlU2Vuc2l0aXZpdHkpO1xuXG4gICAgICAgIGlmICghaGF2ZUdlc3R1cmUpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9tb2RlID09PSAncm90YXRlJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JvdGF0ZVZlbG9jaXR5LnkgKz0gKHggLSB0aGlzLl9tb3VzZVgpIC8gdGhpcy5kb21FbGVtZW50LmNsaWVudFdpZHRoICogMiAqIHJvdGF0ZVNlbnNpdGl2aXR5WzBdO1xuICAgICAgICAgICAgICAgIHRoaXMuX3JvdGF0ZVZlbG9jaXR5LnggKz0gKHkgLSB0aGlzLl9tb3VzZVkpIC8gdGhpcy5kb21FbGVtZW50LmNsaWVudEhlaWdodCAqIDIgKiByb3RhdGVTZW5zaXRpdml0eVsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuX21vZGUgPT09ICdwYW4nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fcGFuVmVsb2NpdHkueCArPSAoeCAtIHRoaXMuX21vdXNlWCkgLyB0aGlzLmRvbUVsZW1lbnQuY2xpZW50V2lkdGggKiBwYW5TZW5zaXRpdml0eVswXSAqIDQwMDtcbiAgICAgICAgICAgICAgICB0aGlzLl9wYW5WZWxvY2l0eS55ICs9ICgteSArIHRoaXMuX21vdXNlWSkgLyB0aGlzLmRvbUVsZW1lbnQuY2xpZW50SGVpZ2h0ICogcGFuU2Vuc2l0aXZpdHlbMV0gKiA0MDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9tb3VzZVggPSB4O1xuICAgICAgICB0aGlzLl9tb3VzZVkgPSB5O1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBfbW91c2VXaGVlbEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0FuaW1hdGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlbHRhID0gZS5kZWx0YVk7XG4gICAgICAgIGlmIChkZWx0YSA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3pvb21IYW5kbGVyKGUsIGRlbHRhID4gMCA/IDEgOiAtMSk7XG4gICAgfSxcblxuICAgIF9waW5jaEhhbmRsZXI6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0FuaW1hdGluZygpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fem9vbUhhbmRsZXIoZSwgZS5waW5jaFNjYWxlID4gMSA/IDAuNCA6IC0wLjQpO1xuICAgIH0sXG5cbiAgICBfem9vbUhhbmRsZXI6IGZ1bmN0aW9uIChlLCBkZWx0YSkge1xuXG4gICAgICAgIHZhciBzcGVlZDtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0IGluc3RhbmNlb2YgUGVyc3BlY3RpdmVDYW1lcmEpIHtcbiAgICAgICAgICAgIHNwZWVkID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4oXG4gICAgICAgICAgICAgICAgdGhpcy5fZGlzdGFuY2UgLSB0aGlzLm1pbkRpc3RhbmNlLFxuICAgICAgICAgICAgICAgIHRoaXMubWF4RGlzdGFuY2UgLSB0aGlzLl9kaXN0YW5jZVxuICAgICAgICAgICAgKSkgLyAyMCwgMC41KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHNwZWVkID0gTWF0aC5tYXgoTWF0aC5tYXgoTWF0aC5taW4oXG4gICAgICAgICAgICAgICAgdGhpcy5fb3J0aG9TaXplIC0gdGhpcy5taW5PcnRob2dyYXBoaWNTaXplLFxuICAgICAgICAgICAgICAgIHRoaXMubWF4T3J0aG9ncmFwaGljU2l6ZSAtIHRoaXMuX29ydGhvU2l6ZVxuICAgICAgICAgICAgKSkgLyAyMCwgMC41KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3pvb21TcGVlZCA9IChkZWx0YSA+IDAgPyAtMSA6IDEpICogc3BlZWQgKiB0aGlzLnpvb21TZW5zaXRpdml0eTtcblxuICAgICAgICB0aGlzLl9yb3RhdGluZyA9IGZhbHNlO1xuXG4gICAgICAgIGlmICh0aGlzLmF1dG9Sb3RhdGUgJiYgdGhpcy5fbW9kZSA9PT0gJ3JvdGF0ZScpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0Q291bnRpbmdTdGlsbCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCAmJiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSxcblxuICAgIF9tb3VzZVVwSGFuZGxlcjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhciBkb20gPSB0aGlzLmRvbUVsZW1lbnQ7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ3RvdWNobW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuICAgICAgICB2ZW5kb3IucmVtb3ZlRXZlbnRMaXN0ZW5lcihkb20sICd0b3VjaGVuZCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcbiAgICAgICAgdmVuZG9yLnJlbW92ZUV2ZW50TGlzdGVuZXIoZG9tLCAnbW91c2Vtb3ZlJywgdGhpcy5fbW91c2VNb3ZlSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNldXAnLCB0aGlzLl9tb3VzZVVwSGFuZGxlcik7XG4gICAgICAgIHZlbmRvci5yZW1vdmVFdmVudExpc3RlbmVyKGRvbSwgJ21vdXNlb3V0JywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXG4gICAgICAgIHRoaXMuX3Byb2Nlc3NHZXN0dXJlKGV2ZW50LCAnZW5kJyk7XG4gICAgfSxcblxuICAgIF9hZGRBbmltYXRvcjogZnVuY3Rpb24gKGFuaW1hdG9yKSB7XG4gICAgICAgIHZhciBhbmltYXRvcnMgPSB0aGlzLl9hbmltYXRvcnM7XG4gICAgICAgIGFuaW1hdG9ycy5wdXNoKGFuaW1hdG9yKTtcbiAgICAgICAgYW5pbWF0b3IuZG9uZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgaWR4ID0gYW5pbWF0b3JzLmluZGV4T2YoYW5pbWF0b3IpO1xuICAgICAgICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgYW5pbWF0b3JzLnNwbGljZShpZHgsIDEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGFuaW1hdG9yO1xuICAgIH0sXG5cblxuICAgIF9wcm9jZXNzR2VzdHVyZTogZnVuY3Rpb24gKGV2ZW50LCBzdGFnZSkge1xuICAgICAgICB2YXIgZ2VzdHVyZU1nciA9IHRoaXMuX2dlc3R1cmVNZ3I7XG5cbiAgICAgICAgc3RhZ2UgPT09ICdzdGFydCcgJiYgZ2VzdHVyZU1nci5jbGVhcigpO1xuXG4gICAgICAgIHZhciBnZXN0dXJlSW5mbyA9IGdlc3R1cmVNZ3IucmVjb2duaXplKFxuICAgICAgICAgICAgZXZlbnQsXG4gICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50XG4gICAgICAgICk7XG5cbiAgICAgICAgc3RhZ2UgPT09ICdlbmQnICYmIGdlc3R1cmVNZ3IuY2xlYXIoKTtcblxuICAgICAgICAvLyBEbyBub3QgZG8gYW55IHByZXZlbnREZWZhdWx0IGhlcmUuIFVwcGVyIGFwcGxpY2F0aW9uIGRvIHRoYXQgaWYgbmVjZXNzYXJ5LlxuICAgICAgICBpZiAoZ2VzdHVyZUluZm8pIHtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZ2VzdHVyZUluZm8udHlwZTtcbiAgICAgICAgICAgIGV2ZW50Lmdlc3R1cmVFdmVudCA9IHR5cGU7XG5cbiAgICAgICAgICAgIHRoaXMuX3BpbmNoSGFuZGxlcihnZXN0dXJlSW5mby5ldmVudCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2VzdHVyZUluZm87XG4gICAgfVxufSk7XG5cbi8qKlxuICogSWYgYXV0byByb3RhdGUgdGhlIHRhcmdldFxuICogQHR5cGUge2Jvb2xlYW59XG4gKiBAZGVmYXVsdCBmYWxzZVxuICovXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoT3JiaXRDb250cm9sLnByb3RvdHlwZSwgJ2F1dG9Sb3RhdGUnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvUm90YXRlO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgIHRoaXMuX2F1dG9Sb3RhdGUgPSB2YWw7XG4gICAgICAgIHRoaXMuX3JvdGF0aW5nID0gdmFsO1xuICAgIH1cbn0pO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoT3JiaXRDb250cm9sLnByb3RvdHlwZSwgJ3RhcmdldCcsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RhcmdldDtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICBpZiAodmFsICYmIHZhbC50YXJnZXQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q2VudGVyKHZhbC50YXJnZXQudG9BcnJheSgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl90YXJnZXQgPSB2YWw7XG4gICAgICAgIHRoaXMuZGVjb21wb3NlVHJhbnNmb3JtKCk7XG4gICAgfVxufSk7XG5cblxuZXhwb3J0IGRlZmF1bHQgT3JiaXRDb250cm9sO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gL1VzZXJzL2xhbmcvRGV2ZWxvcC9jbGF5Z2wvc3JjL3BsdWdpbi9PcmJpdENvbnRyb2wuanNcbi8vIG1vZHVsZSBpZCA9IDE4OFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///188\n");

/***/ }),
/* 189 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/**\n * StaticGeometry can not be changed once they've been setup\n */\n\n/**\n * @constructor clay.StaticGeometry\n * @extends clay.Geometry\n */\nvar StaticGeometry = __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */].extend({\n    dynamic: false\n});\n/* unused harmony default export */ var _unused_webpack_default_export = (StaticGeometry);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTg5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9TdGF0aWNHZW9tZXRyeS5qcz82NjFjIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU3RhdGljR2VvbWV0cnkgY2FuIG5vdCBiZSBjaGFuZ2VkIG9uY2UgdGhleSd2ZSBiZWVuIHNldHVwXG4gKi9cbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuL0dlb21ldHJ5Jztcbi8qKlxuICogQGNvbnN0cnVjdG9yIGNsYXkuU3RhdGljR2VvbWV0cnlcbiAqIEBleHRlbmRzIGNsYXkuR2VvbWV0cnlcbiAqL1xudmFyIFN0YXRpY0dlb21ldHJ5ID0gR2VvbWV0cnkuZXh0ZW5kKHtcbiAgICBkeW5hbWljOiBmYWxzZVxufSk7XG5leHBvcnQgZGVmYXVsdCBTdGF0aWNHZW9tZXRyeTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy9TdGF0aWNHZW9tZXRyeS5qc1xuLy8gbW9kdWxlIGlkID0gMTg5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///189\n");

/***/ }),
/* 190 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// KTX loader\n// Modified from https://github.com/mrdoob/three.js/blob/dev/examples/js/loaders/KTXLoader.js\n\nvar HEADER_LEN = 12 + (13 * 4); // identifier + header elements (not including key value meta-data pairs)\n\nfunction getUint32(buffer, offset, littleEndian) {\n    var a;\n    var b;\n    var c;\n    var d;\n    if (littleEndian) {\n        a = buffer[offset];\n        b = buffer[offset + 1];\n        c = buffer[offset + 2];\n        d = buffer[offset + 3];\n    }\n    else {\n        a = buffer[offset + 3];\n        b = buffer[offset + 2];\n        c = buffer[offset + 1];\n        d = buffer[offset];\n    }\n    return ((d << 24) >>> 0) + ((c << 16) | (b << 8) | a);\n}\n\nfunction parse(arraybuffer, loadMipmaps) {\n\n    var facesExpected = 1;\n    // Test that it is a ktx formatted file, based on the first 12 bytes, character representation is:\n    // '´', 'K', 'T', 'X', ' ', '1', '1', 'ª', '\\r', '\\n', '\\x1A', '\\n'\n    // 0xAB, 0x4B, 0x54, 0x58, 0x20, 0x31, 0x31, 0xBB, 0x0D, 0x0A, 0x1A, 0x0A\n    var data = new Uint8Array(arraybuffer);\n    if (data[0] !== 0xAB\n        || data[1] !== 0x4B\n        || data[2] !== 0x54\n        || data[3] !== 0x58\n        || data[4] !== 0x20\n        || data[5] !== 0x31\n        || data[6] !== 0x31\n        || data[7] !== 0xBB\n        || data[8] !== 0x0D\n        || data[9] !== 0x0A\n        || data[10] !== 0x1A\n        || data[11] !== 0x0A) {\n        console.error('texture missing KTX identifier' );\n        return;\n\n    }\n\n    // load the reset of the header in native 32 bit uint\n    var dataSize = Uint32Array.BYTES_PER_ELEMENT;\n    var offset = 12;\n    // var headerDataView = new DataView( this.arrayBuffer, 12, 13 * dataSize );\n    var endianness = getUint32(data, offset, true);\n    var littleEndian = endianness === 0x04030201;\n\n    var glType = getUint32(data, offset + 1 * dataSize, littleEndian); // must be 0 for compressed textures\n    var glTypeSize = getUint32(data, offset + 2 * dataSize, littleEndian); // must be 1 for compressed textures\n    var glFormat = getUint32(data, offset + 3 * dataSize, littleEndian); // must be 0 for compressed textures\n    var glInternalFormat = getUint32(data, offset + 4 * dataSize, littleEndian); // the value of arg passed to gl.compressedTexImage2D(,,x,,,,)\n    var glBaseInternalFormat = getUint32(data, offset + 5 * dataSize, littleEndian); // specify GL_RGB, GL_RGBA, GL_ALPHA, etc (un-compressed only)\n    var pixelWidth = getUint32(data, offset + 6 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage2D(,,,x,,,)\n    var pixelHeight = getUint32(data, offset + 7 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage2D(,,,,x,,)\n    var pixelDepth = getUint32(data, offset + 8 * dataSize, littleEndian); // level 0 value of arg passed to gl.compressedTexImage3D(,,,,,x,,)\n    var numberOfArrayElements = getUint32(data, offset + 9 * dataSize, littleEndian); // used for texture arrays\n    var numberOfFaces = getUint32(data, offset + 10 * dataSize, littleEndian); // used for cubemap textures, should either be 1 or 6\n    var numberOfMipmapLevels = getUint32(data, offset + 11 * dataSize, littleEndian); // number of levels; disregard possibility of 0 for compressed textures\n    var bytesOfKeyValueData = getUint32(data, offset + 12 * dataSize, littleEndian); // the amount of space after the header for meta-data\n\n    // Make sure we have a compressed type.  Not only reduces work, but probably better to let dev know they are not compressing.\n    if (glType !== 0) {\n        console.warn('only compressed formats currently supported');\n        return;\n    }\n    else {\n        // value of zero is an indication to generate mipmaps @ runtime.  Not usually allowed for compressed, so disregard.\n        numberOfMipmapLevels = Math.max(1, numberOfMipmapLevels);\n    }\n    if (pixelHeight === 0 || pixelDepth !== 0) {\n        console.warn('only 2D textures currently supported');\n        return;\n    }\n    if (numberOfArrayElements !== 0) {\n        console.warn('texture arrays not currently supported');\n        return;\n    }\n    if (numberOfFaces !== facesExpected) {\n        console.warn('number of faces expected' + facesExpected + ', but found ' + numberOfFaces );\n        return;\n    }\n\n    var mipmaps = [];\n\n    // initialize width & height for level 1\n    var dataOffset = HEADER_LEN + bytesOfKeyValueData;\n    var width = pixelWidth;\n    var height = pixelHeight;\n    var mipmapCount = loadMipmaps ? numberOfMipmapLevels : 1;\n\n    for (var level = 0; level < mipmapCount; level ++) {\n        var imageSize = new Int32Array(arraybuffer, dataOffset, 1)[0]; // size per face, since not supporting array cubemaps\n        for (var face = 0; face < numberOfFaces; face ++) {\n            var byteArray = new Uint8Array(arraybuffer, dataOffset + 4, imageSize);\n            mipmaps.push({\n                pixels: byteArray,\n                width: width,\n                height: height\n            });\n\n            dataOffset += imageSize + 4; // size of the image + 4 for the imageSize field\n            dataOffset += 3 - ( ( imageSize + 3 ) % 4 ); // add padding for odd sized image\n        }\n        width = Math.max(1.0, width * 0.5);\n        height = Math.max(1.0, height * 0.5);\n    }\n    var res = {\n        width: pixelWidth,\n        height: pixelHeight,\n        format: glInternalFormat\n    };\n    if (loadMipmaps) {\n        res.mipmaps = mipmaps;\n        res.mipmapCount = numberOfMipmapLevels;\n    }\n    else {\n        res.pixels = mipmaps[0].pixels;\n    }\n    return res;\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    parse: parse\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL2t0eC5qcz8wYjYwIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEtUWCBsb2FkZXJcbi8vIE1vZGlmaWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL21yZG9vYi90aHJlZS5qcy9ibG9iL2Rldi9leGFtcGxlcy9qcy9sb2FkZXJzL0tUWExvYWRlci5qc1xuXG52YXIgSEVBREVSX0xFTiA9IDEyICsgKDEzICogNCk7IC8vIGlkZW50aWZpZXIgKyBoZWFkZXIgZWxlbWVudHMgKG5vdCBpbmNsdWRpbmcga2V5IHZhbHVlIG1ldGEtZGF0YSBwYWlycylcblxuZnVuY3Rpb24gZ2V0VWludDMyKGJ1ZmZlciwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICB2YXIgYTtcbiAgICB2YXIgYjtcbiAgICB2YXIgYztcbiAgICB2YXIgZDtcbiAgICBpZiAobGl0dGxlRW5kaWFuKSB7XG4gICAgICAgIGEgPSBidWZmZXJbb2Zmc2V0XTtcbiAgICAgICAgYiA9IGJ1ZmZlcltvZmZzZXQgKyAxXTtcbiAgICAgICAgYyA9IGJ1ZmZlcltvZmZzZXQgKyAyXTtcbiAgICAgICAgZCA9IGJ1ZmZlcltvZmZzZXQgKyAzXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGEgPSBidWZmZXJbb2Zmc2V0ICsgM107XG4gICAgICAgIGIgPSBidWZmZXJbb2Zmc2V0ICsgMl07XG4gICAgICAgIGMgPSBidWZmZXJbb2Zmc2V0ICsgMV07XG4gICAgICAgIGQgPSBidWZmZXJbb2Zmc2V0XTtcbiAgICB9XG4gICAgcmV0dXJuICgoZCA8PCAyNCkgPj4+IDApICsgKChjIDw8IDE2KSB8IChiIDw8IDgpIHwgYSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlKGFycmF5YnVmZmVyLCBsb2FkTWlwbWFwcykge1xuXG4gICAgdmFyIGZhY2VzRXhwZWN0ZWQgPSAxO1xuICAgIC8vIFRlc3QgdGhhdCBpdCBpcyBhIGt0eCBmb3JtYXR0ZWQgZmlsZSwgYmFzZWQgb24gdGhlIGZpcnN0IDEyIGJ5dGVzLCBjaGFyYWN0ZXIgcmVwcmVzZW50YXRpb24gaXM6XG4gICAgLy8gJ8K0JywgJ0snLCAnVCcsICdYJywgJyAnLCAnMScsICcxJywgJ8KqJywgJ1xccicsICdcXG4nLCAnXFx4MUEnLCAnXFxuJ1xuICAgIC8vIDB4QUIsIDB4NEIsIDB4NTQsIDB4NTgsIDB4MjAsIDB4MzEsIDB4MzEsIDB4QkIsIDB4MEQsIDB4MEEsIDB4MUEsIDB4MEFcbiAgICB2YXIgZGF0YSA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKTtcbiAgICBpZiAoZGF0YVswXSAhPT0gMHhBQlxuICAgICAgICB8fCBkYXRhWzFdICE9PSAweDRCXG4gICAgICAgIHx8IGRhdGFbMl0gIT09IDB4NTRcbiAgICAgICAgfHwgZGF0YVszXSAhPT0gMHg1OFxuICAgICAgICB8fCBkYXRhWzRdICE9PSAweDIwXG4gICAgICAgIHx8IGRhdGFbNV0gIT09IDB4MzFcbiAgICAgICAgfHwgZGF0YVs2XSAhPT0gMHgzMVxuICAgICAgICB8fCBkYXRhWzddICE9PSAweEJCXG4gICAgICAgIHx8IGRhdGFbOF0gIT09IDB4MERcbiAgICAgICAgfHwgZGF0YVs5XSAhPT0gMHgwQVxuICAgICAgICB8fCBkYXRhWzEwXSAhPT0gMHgxQVxuICAgICAgICB8fCBkYXRhWzExXSAhPT0gMHgwQSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd0ZXh0dXJlIG1pc3NpbmcgS1RYIGlkZW50aWZpZXInICk7XG4gICAgICAgIHJldHVybjtcblxuICAgIH1cblxuICAgIC8vIGxvYWQgdGhlIHJlc2V0IG9mIHRoZSBoZWFkZXIgaW4gbmF0aXZlIDMyIGJpdCB1aW50XG4gICAgdmFyIGRhdGFTaXplID0gVWludDMyQXJyYXkuQllURVNfUEVSX0VMRU1FTlQ7XG4gICAgdmFyIG9mZnNldCA9IDEyO1xuICAgIC8vIHZhciBoZWFkZXJEYXRhVmlldyA9IG5ldyBEYXRhVmlldyggdGhpcy5hcnJheUJ1ZmZlciwgMTIsIDEzICogZGF0YVNpemUgKTtcbiAgICB2YXIgZW5kaWFubmVzcyA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQsIHRydWUpO1xuICAgIHZhciBsaXR0bGVFbmRpYW4gPSBlbmRpYW5uZXNzID09PSAweDA0MDMwMjAxO1xuXG4gICAgdmFyIGdsVHlwZSA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAxICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIG11c3QgYmUgMCBmb3IgY29tcHJlc3NlZCB0ZXh0dXJlc1xuICAgIHZhciBnbFR5cGVTaXplID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDIgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gbXVzdCBiZSAxIGZvciBjb21wcmVzc2VkIHRleHR1cmVzXG4gICAgdmFyIGdsRm9ybWF0ID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDMgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gbXVzdCBiZSAwIGZvciBjb21wcmVzc2VkIHRleHR1cmVzXG4gICAgdmFyIGdsSW50ZXJuYWxGb3JtYXQgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgNCAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyB0aGUgdmFsdWUgb2YgYXJnIHBhc3NlZCB0byBnbC5jb21wcmVzc2VkVGV4SW1hZ2UyRCgsLHgsLCwsKVxuICAgIHZhciBnbEJhc2VJbnRlcm5hbEZvcm1hdCA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyA1ICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIHNwZWNpZnkgR0xfUkdCLCBHTF9SR0JBLCBHTF9BTFBIQSwgZXRjICh1bi1jb21wcmVzc2VkIG9ubHkpXG4gICAgdmFyIHBpeGVsV2lkdGggPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgNiAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBsZXZlbCAwIHZhbHVlIG9mIGFyZyBwYXNzZWQgdG8gZ2wuY29tcHJlc3NlZFRleEltYWdlMkQoLCwseCwsLClcbiAgICB2YXIgcGl4ZWxIZWlnaHQgPSBnZXRVaW50MzIoZGF0YSwgb2Zmc2V0ICsgNyAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBsZXZlbCAwIHZhbHVlIG9mIGFyZyBwYXNzZWQgdG8gZ2wuY29tcHJlc3NlZFRleEltYWdlMkQoLCwsLHgsLClcbiAgICB2YXIgcGl4ZWxEZXB0aCA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyA4ICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIGxldmVsIDAgdmFsdWUgb2YgYXJnIHBhc3NlZCB0byBnbC5jb21wcmVzc2VkVGV4SW1hZ2UzRCgsLCwsLHgsLClcbiAgICB2YXIgbnVtYmVyT2ZBcnJheUVsZW1lbnRzID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDkgKiBkYXRhU2l6ZSwgbGl0dGxlRW5kaWFuKTsgLy8gdXNlZCBmb3IgdGV4dHVyZSBhcnJheXNcbiAgICB2YXIgbnVtYmVyT2ZGYWNlcyA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAxMCAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyB1c2VkIGZvciBjdWJlbWFwIHRleHR1cmVzLCBzaG91bGQgZWl0aGVyIGJlIDEgb3IgNlxuICAgIHZhciBudW1iZXJPZk1pcG1hcExldmVscyA9IGdldFVpbnQzMihkYXRhLCBvZmZzZXQgKyAxMSAqIGRhdGFTaXplLCBsaXR0bGVFbmRpYW4pOyAvLyBudW1iZXIgb2YgbGV2ZWxzOyBkaXNyZWdhcmQgcG9zc2liaWxpdHkgb2YgMCBmb3IgY29tcHJlc3NlZCB0ZXh0dXJlc1xuICAgIHZhciBieXRlc09mS2V5VmFsdWVEYXRhID0gZ2V0VWludDMyKGRhdGEsIG9mZnNldCArIDEyICogZGF0YVNpemUsIGxpdHRsZUVuZGlhbik7IC8vIHRoZSBhbW91bnQgb2Ygc3BhY2UgYWZ0ZXIgdGhlIGhlYWRlciBmb3IgbWV0YS1kYXRhXG5cbiAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIGNvbXByZXNzZWQgdHlwZS4gIE5vdCBvbmx5IHJlZHVjZXMgd29yaywgYnV0IHByb2JhYmx5IGJldHRlciB0byBsZXQgZGV2IGtub3cgdGhleSBhcmUgbm90IGNvbXByZXNzaW5nLlxuICAgIGlmIChnbFR5cGUgIT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdvbmx5IGNvbXByZXNzZWQgZm9ybWF0cyBjdXJyZW50bHkgc3VwcG9ydGVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIHZhbHVlIG9mIHplcm8gaXMgYW4gaW5kaWNhdGlvbiB0byBnZW5lcmF0ZSBtaXBtYXBzIEAgcnVudGltZS4gIE5vdCB1c3VhbGx5IGFsbG93ZWQgZm9yIGNvbXByZXNzZWQsIHNvIGRpc3JlZ2FyZC5cbiAgICAgICAgbnVtYmVyT2ZNaXBtYXBMZXZlbHMgPSBNYXRoLm1heCgxLCBudW1iZXJPZk1pcG1hcExldmVscyk7XG4gICAgfVxuICAgIGlmIChwaXhlbEhlaWdodCA9PT0gMCB8fCBwaXhlbERlcHRoICE9PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2Fybignb25seSAyRCB0ZXh0dXJlcyBjdXJyZW50bHkgc3VwcG9ydGVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG51bWJlck9mQXJyYXlFbGVtZW50cyAhPT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3RleHR1cmUgYXJyYXlzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG51bWJlck9mRmFjZXMgIT09IGZhY2VzRXhwZWN0ZWQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCdudW1iZXIgb2YgZmFjZXMgZXhwZWN0ZWQnICsgZmFjZXNFeHBlY3RlZCArICcsIGJ1dCBmb3VuZCAnICsgbnVtYmVyT2ZGYWNlcyApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIG1pcG1hcHMgPSBbXTtcblxuICAgIC8vIGluaXRpYWxpemUgd2lkdGggJiBoZWlnaHQgZm9yIGxldmVsIDFcbiAgICB2YXIgZGF0YU9mZnNldCA9IEhFQURFUl9MRU4gKyBieXRlc09mS2V5VmFsdWVEYXRhO1xuICAgIHZhciB3aWR0aCA9IHBpeGVsV2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IHBpeGVsSGVpZ2h0O1xuICAgIHZhciBtaXBtYXBDb3VudCA9IGxvYWRNaXBtYXBzID8gbnVtYmVyT2ZNaXBtYXBMZXZlbHMgOiAxO1xuXG4gICAgZm9yICh2YXIgbGV2ZWwgPSAwOyBsZXZlbCA8IG1pcG1hcENvdW50OyBsZXZlbCArKykge1xuICAgICAgICB2YXIgaW1hZ2VTaXplID0gbmV3IEludDMyQXJyYXkoYXJyYXlidWZmZXIsIGRhdGFPZmZzZXQsIDEpWzBdOyAvLyBzaXplIHBlciBmYWNlLCBzaW5jZSBub3Qgc3VwcG9ydGluZyBhcnJheSBjdWJlbWFwc1xuICAgICAgICBmb3IgKHZhciBmYWNlID0gMDsgZmFjZSA8IG51bWJlck9mRmFjZXM7IGZhY2UgKyspIHtcbiAgICAgICAgICAgIHZhciBieXRlQXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheWJ1ZmZlciwgZGF0YU9mZnNldCArIDQsIGltYWdlU2l6ZSk7XG4gICAgICAgICAgICBtaXBtYXBzLnB1c2goe1xuICAgICAgICAgICAgICAgIHBpeGVsczogYnl0ZUFycmF5LFxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGRhdGFPZmZzZXQgKz0gaW1hZ2VTaXplICsgNDsgLy8gc2l6ZSBvZiB0aGUgaW1hZ2UgKyA0IGZvciB0aGUgaW1hZ2VTaXplIGZpZWxkXG4gICAgICAgICAgICBkYXRhT2Zmc2V0ICs9IDMgLSAoICggaW1hZ2VTaXplICsgMyApICUgNCApOyAvLyBhZGQgcGFkZGluZyBmb3Igb2RkIHNpemVkIGltYWdlXG4gICAgICAgIH1cbiAgICAgICAgd2lkdGggPSBNYXRoLm1heCgxLjAsIHdpZHRoICogMC41KTtcbiAgICAgICAgaGVpZ2h0ID0gTWF0aC5tYXgoMS4wLCBoZWlnaHQgKiAwLjUpO1xuICAgIH1cbiAgICB2YXIgcmVzID0ge1xuICAgICAgICB3aWR0aDogcGl4ZWxXaWR0aCxcbiAgICAgICAgaGVpZ2h0OiBwaXhlbEhlaWdodCxcbiAgICAgICAgZm9ybWF0OiBnbEludGVybmFsRm9ybWF0XG4gICAgfTtcbiAgICBpZiAobG9hZE1pcG1hcHMpIHtcbiAgICAgICAgcmVzLm1pcG1hcHMgPSBtaXBtYXBzO1xuICAgICAgICByZXMubWlwbWFwQ291bnQgPSBudW1iZXJPZk1pcG1hcExldmVscztcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJlcy5waXhlbHMgPSBtaXBtYXBzWzBdLnBpeGVscztcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICAgIHBhcnNlOiBwYXJzZVxufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdXRpbC9rdHguanNcbi8vIG1vZHVsZSBpZCA9IDE5MFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///190\n");

/***/ }),
/* 191 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__ = __webpack_require__(15);\n// TODO test\n\n\n\n\n\n\n\n/**\n * @namespace clay.util.mesh\n */\nvar meshUtil = {\n\n    /**\n     * Merge multiple meshes to one.\n     * Note that these meshes must have the same material\n     *\n     * @param {Array.<clay.Mesh>} meshes\n     * @param {boolean} applyWorldTransform\n     * @return {clay.Mesh}\n     * @memberOf clay.util.mesh\n     */\n    merge: function (meshes, applyWorldTransform) {\n\n        if (! meshes.length) {\n            return;\n        }\n\n        var templateMesh = meshes[0];\n        var templateGeo = templateMesh.geometry;\n        var material = templateMesh.material;\n\n        var geometry = new __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */]({\n            dynamic: false\n        });\n        geometry.boundingBox = new __WEBPACK_IMPORTED_MODULE_3__math_BoundingBox__[\"a\" /* default */]();\n\n        var attributeNames = templateGeo.getEnabledAttributes();\n\n        for (var i = 0; i < attributeNames.length; i++) {\n            var name = attributeNames[i];\n            var attr = templateGeo.attributes[name];\n            // Extend custom attributes\n            if (!geometry.attributes[name]) {\n                geometry.attributes[name] = attr.clone(false);\n            }\n        }\n\n        var inverseTransposeMatrix = __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].create();\n        // Initialize the array data and merge bounding box\n        var nVertex = 0;\n        var nFace = 0;\n        for (var k = 0; k < meshes.length; k++) {\n            var currentGeo = meshes[k].geometry;\n            if (currentGeo.boundingBox) {\n                currentGeo.boundingBox.applyTransform(applyWorldTransform ? meshes[k].worldTransform : meshes[k].localTransform);\n                geometry.boundingBox.union(currentGeo.boundingBox);\n            }\n            nVertex += currentGeo.vertexCount;\n            nFace += currentGeo.triangleCount;\n        }\n        for (var n = 0; n < attributeNames.length; n++) {\n            var name = attributeNames[n];\n            var attrib = geometry.attributes[name];\n            attrib.init(nVertex);\n        }\n        if (nVertex >= 0xffff) {\n            geometry.indices = new Uint32Array(nFace * 3);\n        }\n        else {\n            geometry.indices = new Uint16Array(nFace * 3);\n        }\n\n        var vertexOffset = 0;\n        var indicesOffset = 0;\n        var useIndices = templateGeo.isUseIndices();\n\n        for (var mm = 0; mm < meshes.length; mm++) {\n            var mesh = meshes[mm];\n            var currentGeo = mesh.geometry;\n\n            var nVertex = currentGeo.vertexCount;\n\n            var matrix = applyWorldTransform ? mesh.worldTransform.array : mesh.localTransform.array;\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].invert(inverseTransposeMatrix, matrix);\n            __WEBPACK_IMPORTED_MODULE_5__glmatrix_mat4__[\"a\" /* default */].transpose(inverseTransposeMatrix, inverseTransposeMatrix);\n\n            for (var nn = 0; nn < attributeNames.length; nn++) {\n                var name = attributeNames[nn];\n                var currentAttr = currentGeo.attributes[name];\n                var targetAttr = geometry.attributes[name];\n                // Skip the unused attributes;\n                if (!currentAttr.value.length) {\n                    continue;\n                }\n                var len = currentAttr.value.length;\n                var size = currentAttr.size;\n                var offset = vertexOffset * size;\n                var count = len / size;\n                for (var i = 0; i < len; i++) {\n                    targetAttr.value[offset + i] = currentAttr.value[i];\n                }\n                // Transform position, normal and tangent\n                if (name === 'position') {\n                    __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].forEach(targetAttr.value, size, offset, count, __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].transformMat4, matrix);\n                }\n                else if (name === 'normal' || name === 'tangent') {\n                    __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].forEach(targetAttr.value, size, offset, count, __WEBPACK_IMPORTED_MODULE_4__glmatrix_vec3__[\"a\" /* default */].transformMat4, inverseTransposeMatrix);\n                }\n            }\n\n            if (useIndices) {\n                var len = currentGeo.indices.length;\n                for (var i = 0; i < len; i++) {\n                    geometry.indices[i + indicesOffset] = currentGeo.indices[i] + vertexOffset;\n                }\n                indicesOffset += len;\n            }\n\n            vertexOffset += nVertex;\n        }\n\n        return new __WEBPACK_IMPORTED_MODULE_1__Mesh__[\"a\" /* default */]({\n            material: material,\n            geometry: geometry\n        });\n    },\n\n    /**\n     * Split mesh into sub meshes, each mesh will have maxJointNumber joints.\n     * @param {clay.Mesh} mesh\n     * @param {number} maxJointNumber\n     * @param {boolean} inPlace\n     * @return {clay.Node}\n     *\n     * @memberOf clay.util.mesh\n     */\n\n    // FIXME, Have issues on some models\n    splitByJoints: function (mesh, maxJointNumber, inPlace) {\n        var geometry = mesh.geometry;\n        var skeleton = mesh.skeleton;\n        var material = mesh.material;\n        var joints = mesh.joints;\n        if (!geometry || !skeleton || !joints.length) {\n            return;\n        }\n        if (joints.length < maxJointNumber) {\n            return mesh;\n        }\n\n\n        var indices = geometry.indices;\n\n        var faceLen = geometry.triangleCount;\n        var rest = faceLen;\n        var isFaceAdded = [];\n        var jointValues = geometry.attributes.joint.value;\n        for (var i = 0; i < faceLen; i++) {\n            isFaceAdded[i] = false;\n        }\n        var addedJointIdxPerFace = [];\n\n        var buckets = [];\n\n        var getJointByIndex = function (idx) {\n            return joints[idx];\n        };\n        while (rest > 0) {\n            var bucketTriangles = [];\n            var bucketJointReverseMap = [];\n            var bucketJoints = [];\n            var subJointNumber = 0;\n            for (var i = 0; i < joints.length; i++) {\n                bucketJointReverseMap[i] = -1;\n            }\n            for (var f = 0; f < faceLen; f++) {\n                if (isFaceAdded[f]) {\n                    continue;\n                }\n                var canAddToBucket = true;\n                var addedNumber = 0;\n                for (var i = 0; i < 3; i++) {\n\n                    var idx = indices[f * 3 + i];\n\n                    for (var j = 0; j < 4; j++) {\n                        var jointIdx = jointValues[idx * 4 + j];\n\n                        if (jointIdx >= 0) {\n                            if (bucketJointReverseMap[jointIdx] === -1) {\n                                if (subJointNumber < maxJointNumber) {\n                                    bucketJointReverseMap[jointIdx] = subJointNumber;\n                                    bucketJoints[subJointNumber++] = jointIdx;\n                                    addedJointIdxPerFace[addedNumber++] = jointIdx;\n                                }\n                                else {\n                                    canAddToBucket = false;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!canAddToBucket) {\n                    // Reverse operation\n                    for (var i = 0; i < addedNumber; i++) {\n                        bucketJointReverseMap[addedJointIdxPerFace[i]] = -1;\n                        bucketJoints.pop();\n                        subJointNumber--;\n                    }\n                }\n                else {\n                    bucketTriangles.push(indices.subarray(f * 3, (f + 1) * 3));\n\n                    isFaceAdded[f] = true;\n                    rest--;\n                }\n            }\n            buckets.push({\n                triangles: bucketTriangles,\n                joints: bucketJoints.map(getJointByIndex),\n                jointReverseMap: bucketJointReverseMap\n            });\n        }\n\n        var root = new __WEBPACK_IMPORTED_MODULE_2__Node__[\"a\" /* default */]({\n            name: mesh.name\n        });\n        var attribNames = geometry.getEnabledAttributes();\n\n        attribNames.splice(attribNames.indexOf('joint'), 1);\n        // Map from old vertex index to new vertex index\n        var newIndices = [];\n        for (var b = 0; b < buckets.length; b++) {\n            var bucket = buckets[b];\n            var jointReverseMap = bucket.jointReverseMap;\n            var subJointNumber = bucket.joints.length;\n\n            var subGeo = new __WEBPACK_IMPORTED_MODULE_0__Geometry__[\"a\" /* default */]();\n\n            var subMesh = new __WEBPACK_IMPORTED_MODULE_1__Mesh__[\"a\" /* default */]({\n                name: [mesh.name, i].join('-'),\n                // DON'T clone material.\n                material: material,\n                geometry: subGeo,\n                skeleton: skeleton,\n                joints: bucket.joints.slice()\n            });\n            var nVertex = 0;\n            var nVertex2 = geometry.vertexCount;\n            for (var i = 0; i < nVertex2; i++) {\n                newIndices[i] = -1;\n            }\n            // Count sub geo number\n            for (var f = 0; f < bucket.triangles.length; f++) {\n                var face = bucket.triangles[f];\n                for (var i = 0; i < 3; i++) {\n                    var idx = face[i];\n                    if (newIndices[idx] === -1) {\n                        newIndices[idx] = nVertex;\n                        nVertex++;\n                    }\n                }\n            }\n            for (var a = 0; a < attribNames.length; a++) {\n                var attribName = attribNames[a];\n                var subAttrib = subGeo.attributes[attribName];\n                subAttrib.init(nVertex);\n            }\n            subGeo.attributes.joint.value = new Float32Array(nVertex * 4);\n\n            if (nVertex > 0xffff) {\n                subGeo.indices = new Uint32Array(bucket.triangles.length * 3);\n            }\n            else {\n                subGeo.indices = new Uint16Array(bucket.triangles.length * 3);\n            }\n\n            var indicesOffset = 0;\n            nVertex = 0;\n            for (var i = 0; i < nVertex2; i++) {\n                newIndices[i] = -1;\n            }\n\n            for (var f = 0; f < bucket.triangles.length; f++) {\n                var triangle = bucket.triangles[f];\n                for (var i = 0; i < 3; i++) {\n\n                    var idx = triangle[i];\n\n                    if (newIndices[idx] === -1) {\n                        newIndices[idx] = nVertex;\n                        for (var a = 0; a < attribNames.length; a++) {\n                            var attribName = attribNames[a];\n                            var attrib = geometry.attributes[attribName];\n                            var subAttrib = subGeo.attributes[attribName];\n                            var size = attrib.size;\n\n                            for (var j = 0; j < size; j++) {\n                                subAttrib.value[nVertex * size + j] = attrib.value[idx * size + j];\n                            }\n                        }\n                        for (var j = 0; j < 4; j++) {\n                            var jointIdx = geometry.attributes.joint.value[idx * 4 + j];\n                            var offset = nVertex * 4 + j;\n                            if (jointIdx >= 0) {\n                                subGeo.attributes.joint.value[offset] = jointReverseMap[jointIdx];\n                            }\n                            else {\n                                subGeo.attributes.joint.value[offset] = -1;\n                            }\n                        }\n                        nVertex++;\n                    }\n                    subGeo.indices[indicesOffset++] = newIndices[idx];\n                }\n            }\n            subGeo.updateBoundingBox();\n\n            root.add(subMesh);\n        }\n        var children = mesh.children();\n        for (var i = 0; i < children.length; i++) {\n            root.add(children[i]);\n        }\n        root.position.copy(mesh.position);\n        root.rotation.copy(mesh.rotation);\n        root.scale.copy(mesh.scale);\n\n        if (inPlace) {\n            if (mesh.getParent()) {\n                var parent = mesh.getParent();\n                parent.remove(mesh);\n                parent.add(root);\n            }\n        }\n        return root;\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (meshUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL21lc2guanM/NDJmOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPIHRlc3RcbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgTWVzaCBmcm9tICcuLi9NZXNoJztcbmltcG9ydCBOb2RlIGZyb20gJy4uL05vZGUnO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4uL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IHZlYzMgZnJvbSAnLi4vZ2xtYXRyaXgvdmVjMyc7XG5pbXBvcnQgbWF0NCBmcm9tICcuLi9nbG1hdHJpeC9tYXQ0JztcblxuLyoqXG4gKiBAbmFtZXNwYWNlIGNsYXkudXRpbC5tZXNoXG4gKi9cbnZhciBtZXNoVXRpbCA9IHtcblxuICAgIC8qKlxuICAgICAqIE1lcmdlIG11bHRpcGxlIG1lc2hlcyB0byBvbmUuXG4gICAgICogTm90ZSB0aGF0IHRoZXNlIG1lc2hlcyBtdXN0IGhhdmUgdGhlIHNhbWUgbWF0ZXJpYWxcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPGNsYXkuTWVzaD59IG1lc2hlc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gYXBwbHlXb3JsZFRyYW5zZm9ybVxuICAgICAqIEByZXR1cm4ge2NsYXkuTWVzaH1cbiAgICAgKiBAbWVtYmVyT2YgY2xheS51dGlsLm1lc2hcbiAgICAgKi9cbiAgICBtZXJnZTogZnVuY3Rpb24gKG1lc2hlcywgYXBwbHlXb3JsZFRyYW5zZm9ybSkge1xuXG4gICAgICAgIGlmICghIG1lc2hlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0ZW1wbGF0ZU1lc2ggPSBtZXNoZXNbMF07XG4gICAgICAgIHZhciB0ZW1wbGF0ZUdlbyA9IHRlbXBsYXRlTWVzaC5nZW9tZXRyeTtcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gdGVtcGxhdGVNZXNoLm1hdGVyaWFsO1xuXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeSh7XG4gICAgICAgICAgICBkeW5hbWljOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgZ2VvbWV0cnkuYm91bmRpbmdCb3ggPSBuZXcgQm91bmRpbmdCb3goKTtcblxuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZXMgPSB0ZW1wbGF0ZUdlby5nZXRFbmFibGVkQXR0cmlidXRlcygpO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXR0cmlidXRlTmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlTmFtZXNbaV07XG4gICAgICAgICAgICB2YXIgYXR0ciA9IHRlbXBsYXRlR2VvLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICAvLyBFeHRlbmQgY3VzdG9tIGF0dHJpYnV0ZXNcbiAgICAgICAgICAgIGlmICghZ2VvbWV0cnkuYXR0cmlidXRlc1tuYW1lXSkge1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5LmF0dHJpYnV0ZXNbbmFtZV0gPSBhdHRyLmNsb25lKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbnZlcnNlVHJhbnNwb3NlTWF0cml4ID0gbWF0NC5jcmVhdGUoKTtcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgYXJyYXkgZGF0YSBhbmQgbWVyZ2UgYm91bmRpbmcgYm94XG4gICAgICAgIHZhciBuVmVydGV4ID0gMDtcbiAgICAgICAgdmFyIG5GYWNlID0gMDtcbiAgICAgICAgZm9yICh2YXIgayA9IDA7IGsgPCBtZXNoZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgIHZhciBjdXJyZW50R2VvID0gbWVzaGVzW2tdLmdlb21ldHJ5O1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRHZW8uYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50R2VvLmJvdW5kaW5nQm94LmFwcGx5VHJhbnNmb3JtKGFwcGx5V29ybGRUcmFuc2Zvcm0gPyBtZXNoZXNba10ud29ybGRUcmFuc2Zvcm0gOiBtZXNoZXNba10ubG9jYWxUcmFuc2Zvcm0pO1xuICAgICAgICAgICAgICAgIGdlb21ldHJ5LmJvdW5kaW5nQm94LnVuaW9uKGN1cnJlbnRHZW8uYm91bmRpbmdCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgblZlcnRleCArPSBjdXJyZW50R2VvLnZlcnRleENvdW50O1xuICAgICAgICAgICAgbkZhY2UgKz0gY3VycmVudEdlby50cmlhbmdsZUNvdW50O1xuICAgICAgICB9XG4gICAgICAgIGZvciAodmFyIG4gPSAwOyBuIDwgYXR0cmlidXRlTmFtZXMubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gYXR0cmlidXRlTmFtZXNbbl07XG4gICAgICAgICAgICB2YXIgYXR0cmliID0gZ2VvbWV0cnkuYXR0cmlidXRlc1tuYW1lXTtcbiAgICAgICAgICAgIGF0dHJpYi5pbml0KG5WZXJ0ZXgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuVmVydGV4ID49IDB4ZmZmZikge1xuICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShuRmFjZSAqIDMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZ2VvbWV0cnkuaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheShuRmFjZSAqIDMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHZlcnRleE9mZnNldCA9IDA7XG4gICAgICAgIHZhciBpbmRpY2VzT2Zmc2V0ID0gMDtcbiAgICAgICAgdmFyIHVzZUluZGljZXMgPSB0ZW1wbGF0ZUdlby5pc1VzZUluZGljZXMoKTtcblxuICAgICAgICBmb3IgKHZhciBtbSA9IDA7IG1tIDwgbWVzaGVzLmxlbmd0aDsgbW0rKykge1xuICAgICAgICAgICAgdmFyIG1lc2ggPSBtZXNoZXNbbW1dO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRHZW8gPSBtZXNoLmdlb21ldHJ5O1xuXG4gICAgICAgICAgICB2YXIgblZlcnRleCA9IGN1cnJlbnRHZW8udmVydGV4Q291bnQ7XG5cbiAgICAgICAgICAgIHZhciBtYXRyaXggPSBhcHBseVdvcmxkVHJhbnNmb3JtID8gbWVzaC53b3JsZFRyYW5zZm9ybS5hcnJheSA6IG1lc2gubG9jYWxUcmFuc2Zvcm0uYXJyYXk7XG4gICAgICAgICAgICBtYXQ0LmludmVydChpbnZlcnNlVHJhbnNwb3NlTWF0cml4LCBtYXRyaXgpO1xuICAgICAgICAgICAgbWF0NC50cmFuc3Bvc2UoaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCwgaW52ZXJzZVRyYW5zcG9zZU1hdHJpeCk7XG5cbiAgICAgICAgICAgIGZvciAodmFyIG5uID0gMDsgbm4gPCBhdHRyaWJ1dGVOYW1lcy5sZW5ndGg7IG5uKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGF0dHJpYnV0ZU5hbWVzW25uXTtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudEF0dHIgPSBjdXJyZW50R2VvLmF0dHJpYnV0ZXNbbmFtZV07XG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldEF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzW25hbWVdO1xuICAgICAgICAgICAgICAgIC8vIFNraXAgdGhlIHVudXNlZCBhdHRyaWJ1dGVzO1xuICAgICAgICAgICAgICAgIGlmICghY3VycmVudEF0dHIudmFsdWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbGVuID0gY3VycmVudEF0dHIudmFsdWUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHZhciBzaXplID0gY3VycmVudEF0dHIuc2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gdmVydGV4T2Zmc2V0ICogc2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSBsZW4gLyBzaXplO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0QXR0ci52YWx1ZVtvZmZzZXQgKyBpXSA9IGN1cnJlbnRBdHRyLnZhbHVlW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBUcmFuc2Zvcm0gcG9zaXRpb24sIG5vcm1hbCBhbmQgdGFuZ2VudFxuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAncG9zaXRpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIHZlYzMuZm9yRWFjaCh0YXJnZXRBdHRyLnZhbHVlLCBzaXplLCBvZmZzZXQsIGNvdW50LCB2ZWMzLnRyYW5zZm9ybU1hdDQsIG1hdHJpeCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKG5hbWUgPT09ICdub3JtYWwnIHx8IG5hbWUgPT09ICd0YW5nZW50Jykge1xuICAgICAgICAgICAgICAgICAgICB2ZWMzLmZvckVhY2godGFyZ2V0QXR0ci52YWx1ZSwgc2l6ZSwgb2Zmc2V0LCBjb3VudCwgdmVjMy50cmFuc2Zvcm1NYXQ0LCBpbnZlcnNlVHJhbnNwb3NlTWF0cml4KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh1c2VJbmRpY2VzKSB7XG4gICAgICAgICAgICAgICAgdmFyIGxlbiA9IGN1cnJlbnRHZW8uaW5kaWNlcy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBnZW9tZXRyeS5pbmRpY2VzW2kgKyBpbmRpY2VzT2Zmc2V0XSA9IGN1cnJlbnRHZW8uaW5kaWNlc1tpXSArIHZlcnRleE9mZnNldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaW5kaWNlc09mZnNldCArPSBsZW47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZlcnRleE9mZnNldCArPSBuVmVydGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5ldyBNZXNoKHtcbiAgICAgICAgICAgIG1hdGVyaWFsOiBtYXRlcmlhbCxcbiAgICAgICAgICAgIGdlb21ldHJ5OiBnZW9tZXRyeVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogU3BsaXQgbWVzaCBpbnRvIHN1YiBtZXNoZXMsIGVhY2ggbWVzaCB3aWxsIGhhdmUgbWF4Sm9pbnROdW1iZXIgam9pbnRzLlxuICAgICAqIEBwYXJhbSB7Y2xheS5NZXNofSBtZXNoXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IG1heEpvaW50TnVtYmVyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBpblBsYWNlXG4gICAgICogQHJldHVybiB7Y2xheS5Ob2RlfVxuICAgICAqXG4gICAgICogQG1lbWJlck9mIGNsYXkudXRpbC5tZXNoXG4gICAgICovXG5cbiAgICAvLyBGSVhNRSwgSGF2ZSBpc3N1ZXMgb24gc29tZSBtb2RlbHNcbiAgICBzcGxpdEJ5Sm9pbnRzOiBmdW5jdGlvbiAobWVzaCwgbWF4Sm9pbnROdW1iZXIsIGluUGxhY2UpIHtcbiAgICAgICAgdmFyIGdlb21ldHJ5ID0gbWVzaC5nZW9tZXRyeTtcbiAgICAgICAgdmFyIHNrZWxldG9uID0gbWVzaC5za2VsZXRvbjtcbiAgICAgICAgdmFyIG1hdGVyaWFsID0gbWVzaC5tYXRlcmlhbDtcbiAgICAgICAgdmFyIGpvaW50cyA9IG1lc2guam9pbnRzO1xuICAgICAgICBpZiAoIWdlb21ldHJ5IHx8ICFza2VsZXRvbiB8fCAham9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChqb2ludHMubGVuZ3RoIDwgbWF4Sm9pbnROdW1iZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBtZXNoO1xuICAgICAgICB9XG5cblxuICAgICAgICB2YXIgaW5kaWNlcyA9IGdlb21ldHJ5LmluZGljZXM7XG5cbiAgICAgICAgdmFyIGZhY2VMZW4gPSBnZW9tZXRyeS50cmlhbmdsZUNvdW50O1xuICAgICAgICB2YXIgcmVzdCA9IGZhY2VMZW47XG4gICAgICAgIHZhciBpc0ZhY2VBZGRlZCA9IFtdO1xuICAgICAgICB2YXIgam9pbnRWYWx1ZXMgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmpvaW50LnZhbHVlO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZhY2VMZW47IGkrKykge1xuICAgICAgICAgICAgaXNGYWNlQWRkZWRbaV0gPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWRkZWRKb2ludElkeFBlckZhY2UgPSBbXTtcblxuICAgICAgICB2YXIgYnVja2V0cyA9IFtdO1xuXG4gICAgICAgIHZhciBnZXRKb2ludEJ5SW5kZXggPSBmdW5jdGlvbiAoaWR4KSB7XG4gICAgICAgICAgICByZXR1cm4gam9pbnRzW2lkeF07XG4gICAgICAgIH07XG4gICAgICAgIHdoaWxlIChyZXN0ID4gMCkge1xuICAgICAgICAgICAgdmFyIGJ1Y2tldFRyaWFuZ2xlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIGJ1Y2tldEpvaW50UmV2ZXJzZU1hcCA9IFtdO1xuICAgICAgICAgICAgdmFyIGJ1Y2tldEpvaW50cyA9IFtdO1xuICAgICAgICAgICAgdmFyIHN1YkpvaW50TnVtYmVyID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgam9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgYnVja2V0Sm9pbnRSZXZlcnNlTWFwW2ldID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGZhY2VMZW47IGYrKykge1xuICAgICAgICAgICAgICAgIGlmIChpc0ZhY2VBZGRlZFtmXSkge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIGNhbkFkZFRvQnVja2V0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWROdW1iZXIgPSAwO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IGluZGljZXNbZiAqIDMgKyBpXTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IDQ7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGpvaW50SWR4ID0gam9pbnRWYWx1ZXNbaWR4ICogNCArIGpdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoam9pbnRJZHggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChidWNrZXRKb2ludFJldmVyc2VNYXBbam9pbnRJZHhdID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3ViSm9pbnROdW1iZXIgPCBtYXhKb2ludE51bWJlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Sm9pbnRSZXZlcnNlTWFwW2pvaW50SWR4XSA9IHN1YkpvaW50TnVtYmVyO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Sm9pbnRzW3N1YkpvaW50TnVtYmVyKytdID0gam9pbnRJZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZGRlZEpvaW50SWR4UGVyRmFjZVthZGRlZE51bWJlcisrXSA9IGpvaW50SWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuQWRkVG9CdWNrZXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoIWNhbkFkZFRvQnVja2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJldmVyc2Ugb3BlcmF0aW9uXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYWRkZWROdW1iZXI7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Sm9pbnRSZXZlcnNlTWFwW2FkZGVkSm9pbnRJZHhQZXJGYWNlW2ldXSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnVja2V0Sm9pbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc3ViSm9pbnROdW1iZXItLTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnVja2V0VHJpYW5nbGVzLnB1c2goaW5kaWNlcy5zdWJhcnJheShmICogMywgKGYgKyAxKSAqIDMpKTtcblxuICAgICAgICAgICAgICAgICAgICBpc0ZhY2VBZGRlZFtmXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc3QtLTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBidWNrZXRzLnB1c2goe1xuICAgICAgICAgICAgICAgIHRyaWFuZ2xlczogYnVja2V0VHJpYW5nbGVzLFxuICAgICAgICAgICAgICAgIGpvaW50czogYnVja2V0Sm9pbnRzLm1hcChnZXRKb2ludEJ5SW5kZXgpLFxuICAgICAgICAgICAgICAgIGpvaW50UmV2ZXJzZU1hcDogYnVja2V0Sm9pbnRSZXZlcnNlTWFwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByb290ID0gbmV3IE5vZGUoe1xuICAgICAgICAgICAgbmFtZTogbWVzaC5uYW1lXG4gICAgICAgIH0pO1xuICAgICAgICB2YXIgYXR0cmliTmFtZXMgPSBnZW9tZXRyeS5nZXRFbmFibGVkQXR0cmlidXRlcygpO1xuXG4gICAgICAgIGF0dHJpYk5hbWVzLnNwbGljZShhdHRyaWJOYW1lcy5pbmRleE9mKCdqb2ludCcpLCAxKTtcbiAgICAgICAgLy8gTWFwIGZyb20gb2xkIHZlcnRleCBpbmRleCB0byBuZXcgdmVydGV4IGluZGV4XG4gICAgICAgIHZhciBuZXdJbmRpY2VzID0gW107XG4gICAgICAgIGZvciAodmFyIGIgPSAwOyBiIDwgYnVja2V0cy5sZW5ndGg7IGIrKykge1xuICAgICAgICAgICAgdmFyIGJ1Y2tldCA9IGJ1Y2tldHNbYl07XG4gICAgICAgICAgICB2YXIgam9pbnRSZXZlcnNlTWFwID0gYnVja2V0LmpvaW50UmV2ZXJzZU1hcDtcbiAgICAgICAgICAgIHZhciBzdWJKb2ludE51bWJlciA9IGJ1Y2tldC5qb2ludHMubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgc3ViR2VvID0gbmV3IEdlb21ldHJ5KCk7XG5cbiAgICAgICAgICAgIHZhciBzdWJNZXNoID0gbmV3IE1lc2goe1xuICAgICAgICAgICAgICAgIG5hbWU6IFttZXNoLm5hbWUsIGldLmpvaW4oJy0nKSxcbiAgICAgICAgICAgICAgICAvLyBET04nVCBjbG9uZSBtYXRlcmlhbC5cbiAgICAgICAgICAgICAgICBtYXRlcmlhbDogbWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgZ2VvbWV0cnk6IHN1YkdlbyxcbiAgICAgICAgICAgICAgICBza2VsZXRvbjogc2tlbGV0b24sXG4gICAgICAgICAgICAgICAgam9pbnRzOiBidWNrZXQuam9pbnRzLnNsaWNlKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdmFyIG5WZXJ0ZXggPSAwO1xuICAgICAgICAgICAgdmFyIG5WZXJ0ZXgyID0gZ2VvbWV0cnkudmVydGV4Q291bnQ7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5WZXJ0ZXgyOyBpKyspIHtcbiAgICAgICAgICAgICAgICBuZXdJbmRpY2VzW2ldID0gLTE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBDb3VudCBzdWIgZ2VvIG51bWJlclxuICAgICAgICAgICAgZm9yICh2YXIgZiA9IDA7IGYgPCBidWNrZXQudHJpYW5nbGVzLmxlbmd0aDsgZisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZhY2UgPSBidWNrZXQudHJpYW5nbGVzW2ZdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpZHggPSBmYWNlW2ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAobmV3SW5kaWNlc1tpZHhdID09PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kaWNlc1tpZHhdID0gblZlcnRleDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5WZXJ0ZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgYXR0cmliTmFtZXMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgYXR0cmliTmFtZSA9IGF0dHJpYk5hbWVzW2FdO1xuICAgICAgICAgICAgICAgIHZhciBzdWJBdHRyaWIgPSBzdWJHZW8uYXR0cmlidXRlc1thdHRyaWJOYW1lXTtcbiAgICAgICAgICAgICAgICBzdWJBdHRyaWIuaW5pdChuVmVydGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Ykdlby5hdHRyaWJ1dGVzLmpvaW50LnZhbHVlID0gbmV3IEZsb2F0MzJBcnJheShuVmVydGV4ICogNCk7XG5cbiAgICAgICAgICAgIGlmIChuVmVydGV4ID4gMHhmZmZmKSB7XG4gICAgICAgICAgICAgICAgc3ViR2VvLmluZGljZXMgPSBuZXcgVWludDMyQXJyYXkoYnVja2V0LnRyaWFuZ2xlcy5sZW5ndGggKiAzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1Ykdlby5pbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KGJ1Y2tldC50cmlhbmdsZXMubGVuZ3RoICogMyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbmRpY2VzT2Zmc2V0ID0gMDtcbiAgICAgICAgICAgIG5WZXJ0ZXggPSAwO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuVmVydGV4MjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmV3SW5kaWNlc1tpXSA9IC0xO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBmID0gMDsgZiA8IGJ1Y2tldC50cmlhbmdsZXMubGVuZ3RoOyBmKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgdHJpYW5nbGUgPSBidWNrZXQudHJpYW5nbGVzW2ZdO1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgMzsgaSsrKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkeCA9IHRyaWFuZ2xlW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdJbmRpY2VzW2lkeF0gPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmRpY2VzW2lkeF0gPSBuVmVydGV4O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBhdHRyaWJOYW1lcy5sZW5ndGg7IGErKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdHRyaWJOYW1lID0gYXR0cmliTmFtZXNbYV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYiA9IGdlb21ldHJ5LmF0dHJpYnV0ZXNbYXR0cmliTmFtZV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YkF0dHJpYiA9IHN1Ykdlby5hdHRyaWJ1dGVzW2F0dHJpYk5hbWVdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaXplID0gYXR0cmliLnNpemU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHNpemU7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWJBdHRyaWIudmFsdWVbblZlcnRleCAqIHNpemUgKyBqXSA9IGF0dHJpYi52YWx1ZVtpZHggKiBzaXplICsgal07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA0OyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgam9pbnRJZHggPSBnZW9tZXRyeS5hdHRyaWJ1dGVzLmpvaW50LnZhbHVlW2lkeCAqIDQgKyBqXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gblZlcnRleCAqIDQgKyBqO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqb2ludElkeCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ykdlby5hdHRyaWJ1dGVzLmpvaW50LnZhbHVlW29mZnNldF0gPSBqb2ludFJldmVyc2VNYXBbam9pbnRJZHhdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3ViR2VvLmF0dHJpYnV0ZXMuam9pbnQudmFsdWVbb2Zmc2V0XSA9IC0xO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5WZXJ0ZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzdWJHZW8uaW5kaWNlc1tpbmRpY2VzT2Zmc2V0KytdID0gbmV3SW5kaWNlc1tpZHhdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHN1Ykdlby51cGRhdGVCb3VuZGluZ0JveCgpO1xuXG4gICAgICAgICAgICByb290LmFkZChzdWJNZXNoKTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY2hpbGRyZW4gPSBtZXNoLmNoaWxkcmVuKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJvb3QuYWRkKGNoaWxkcmVuW2ldKTtcbiAgICAgICAgfVxuICAgICAgICByb290LnBvc2l0aW9uLmNvcHkobWVzaC5wb3NpdGlvbik7XG4gICAgICAgIHJvb3Qucm90YXRpb24uY29weShtZXNoLnJvdGF0aW9uKTtcbiAgICAgICAgcm9vdC5zY2FsZS5jb3B5KG1lc2guc2NhbGUpO1xuXG4gICAgICAgIGlmIChpblBsYWNlKSB7XG4gICAgICAgICAgICBpZiAobWVzaC5nZXRQYXJlbnQoKSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSBtZXNoLmdldFBhcmVudCgpO1xuICAgICAgICAgICAgICAgIHBhcmVudC5yZW1vdmUobWVzaCk7XG4gICAgICAgICAgICAgICAgcGFyZW50LmFkZChyb290KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcm9vdDtcbiAgICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBtZXNoVXRpbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL21lc2guanNcbi8vIG1vZHVsZSBpZCA9IDE5MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///191\n");

/***/ }),
/* 192 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_util__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__math_Vector3__ = __webpack_require__(3);\n\n\n\n\n\nvar META = {\n    version: 1.0,\n    type: 'Geometry',\n    generator: 'util.transferable.toObject'\n};\n\n/**\n * @alias clay.util.transferable\n */\nvar transferableUtil = {\n    /**\n     * Convert geometry to a object containing transferable data\n     * @param {Geometry} geometry geometry\n     * @param {Boolean} shallow whether shallow copy\n     * @returns {Object} { data : data, buffers : buffers }, buffers is the transferable list\n     */\n    toObject : function (geometry, shallow) {\n        if (!geometry) {\n            return null;\n        }\n        var data = {\n            metadata : __WEBPACK_IMPORTED_MODULE_0__core_util__[\"a\" /* default */].extend({}, META)\n        };\n        //transferable buffers\n        var buffers = [];\n\n        //dynamic\n        data.dynamic = geometry.dynamic;\n\n        //bounding box\n        if (geometry.boundingBox) {\n            data.boundingBox = {\n                min : geometry.boundingBox.min.toArray(),\n                max : geometry.boundingBox.max.toArray()\n            };\n        }\n\n        //indices\n        if (geometry.indices && geometry.indices.length > 0) {\n            data.indices = copyIfNecessary(geometry.indices, shallow);\n            buffers.push(data.indices.buffer);\n        }\n\n        //attributes\n        data.attributes = {};\n        for (var p in geometry.attributes) {\n            if (geometry.attributes.hasOwnProperty(p)) {\n                var attr = geometry.attributes[p];\n                //ignore empty attributes\n                if (attr && attr.value && attr.value.length > 0) {\n                    attr = data.attributes[p] = copyAttribute(attr, shallow);\n                    buffers.push(attr.value.buffer);\n                }\n            }\n        }\n\n        return {\n            data : data,\n            buffers : buffers\n        };\n    },\n\n    /**\n     * Reproduce a geometry from object generated by toObject\n     * @param {Object} object object generated by toObject\n     * @returns {Geometry} geometry\n     */\n    toGeometry : function (object) {\n        if (!object) {\n            return null;\n        }\n        if (object.data && object.buffers) {\n            return transferableUtil.toGeometry(object.data);\n        }\n        if (!object.metadata || object.metadata.generator !== META.generator) {\n            throw new Error('[util.transferable.toGeometry] the object is not generated by util.transferable.');\n        }\n\n        //basic options\n        var options = {\n            dynamic : object.dynamic,\n            indices : object.indices\n        };\n\n        if (object.boundingBox) {\n            var min = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]().setArray(object.boundingBox.min);\n            var max = new __WEBPACK_IMPORTED_MODULE_3__math_Vector3__[\"a\" /* default */]().setArray(object.boundingBox.max);\n            options.boundingBox = new __WEBPACK_IMPORTED_MODULE_2__math_BoundingBox__[\"a\" /* default */](min, max);\n        }\n\n        var geometry = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */](options);\n\n        //attributes\n        for (var p in object.attributes) {\n            if (object.attributes.hasOwnProperty(p)) {\n                var attr = object.attributes[p];\n                geometry.attributes[p] = new __WEBPACK_IMPORTED_MODULE_1__Geometry__[\"a\" /* default */].Attribute(attr.name, attr.type, attr.size, attr.semantic);\n                geometry.attributes[p].value = attr.value;\n            }\n        }\n\n        return geometry;\n    }\n\n}\n\nfunction copyAttribute(attr, shallow) {\n    return {\n        name : attr.name,\n        type : attr.type,\n        size : attr.size,\n        semantic : attr.semantic,\n        value : copyIfNecessary(attr.value, shallow)\n    };\n}\n\nfunction copyIfNecessary(arr, shallow) {\n    if (!shallow) {\n        return new arr.constructor(arr);\n    } else {\n        return arr;\n    }\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (transferableUtil);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3RyYW5zZmVyYWJsZS5qcz81ZGM0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB1dGlsIGZyb20gJy4uL2NvcmUvdXRpbCc7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vR2VvbWV0cnknO1xuaW1wb3J0IEJvdW5kaW5nQm94IGZyb20gJy4uL21hdGgvQm91bmRpbmdCb3gnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi4vbWF0aC9WZWN0b3IzJztcblxudmFyIE1FVEEgPSB7XG4gICAgdmVyc2lvbjogMS4wLFxuICAgIHR5cGU6ICdHZW9tZXRyeScsXG4gICAgZ2VuZXJhdG9yOiAndXRpbC50cmFuc2ZlcmFibGUudG9PYmplY3QnXG59O1xuXG4vKipcbiAqIEBhbGlhcyBjbGF5LnV0aWwudHJhbnNmZXJhYmxlXG4gKi9cbnZhciB0cmFuc2ZlcmFibGVVdGlsID0ge1xuICAgIC8qKlxuICAgICAqIENvbnZlcnQgZ2VvbWV0cnkgdG8gYSBvYmplY3QgY29udGFpbmluZyB0cmFuc2ZlcmFibGUgZGF0YVxuICAgICAqIEBwYXJhbSB7R2VvbWV0cnl9IGdlb21ldHJ5IGdlb21ldHJ5XG4gICAgICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93IHdoZXRoZXIgc2hhbGxvdyBjb3B5XG4gICAgICogQHJldHVybnMge09iamVjdH0geyBkYXRhIDogZGF0YSwgYnVmZmVycyA6IGJ1ZmZlcnMgfSwgYnVmZmVycyBpcyB0aGUgdHJhbnNmZXJhYmxlIGxpc3RcbiAgICAgKi9cbiAgICB0b09iamVjdCA6IGZ1bmN0aW9uIChnZW9tZXRyeSwgc2hhbGxvdykge1xuICAgICAgICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGF0YSA9IHtcbiAgICAgICAgICAgIG1ldGFkYXRhIDogdXRpbC5leHRlbmQoe30sIE1FVEEpXG4gICAgICAgIH07XG4gICAgICAgIC8vdHJhbnNmZXJhYmxlIGJ1ZmZlcnNcbiAgICAgICAgdmFyIGJ1ZmZlcnMgPSBbXTtcblxuICAgICAgICAvL2R5bmFtaWNcbiAgICAgICAgZGF0YS5keW5hbWljID0gZ2VvbWV0cnkuZHluYW1pYztcblxuICAgICAgICAvL2JvdW5kaW5nIGJveFxuICAgICAgICBpZiAoZ2VvbWV0cnkuYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIGRhdGEuYm91bmRpbmdCb3ggPSB7XG4gICAgICAgICAgICAgICAgbWluIDogZ2VvbWV0cnkuYm91bmRpbmdCb3gubWluLnRvQXJyYXkoKSxcbiAgICAgICAgICAgICAgICBtYXggOiBnZW9tZXRyeS5ib3VuZGluZ0JveC5tYXgudG9BcnJheSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy9pbmRpY2VzXG4gICAgICAgIGlmIChnZW9tZXRyeS5pbmRpY2VzICYmIGdlb21ldHJ5LmluZGljZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZGF0YS5pbmRpY2VzID0gY29weUlmTmVjZXNzYXJ5KGdlb21ldHJ5LmluZGljZXMsIHNoYWxsb3cpO1xuICAgICAgICAgICAgYnVmZmVycy5wdXNoKGRhdGEuaW5kaWNlcy5idWZmZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9hdHRyaWJ1dGVzXG4gICAgICAgIGRhdGEuYXR0cmlidXRlcyA9IHt9O1xuICAgICAgICBmb3IgKHZhciBwIGluIGdlb21ldHJ5LmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGlmIChnZW9tZXRyeS5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBnZW9tZXRyeS5hdHRyaWJ1dGVzW3BdO1xuICAgICAgICAgICAgICAgIC8vaWdub3JlIGVtcHR5IGF0dHJpYnV0ZXNcbiAgICAgICAgICAgICAgICBpZiAoYXR0ciAmJiBhdHRyLnZhbHVlICYmIGF0dHIudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBhdHRyID0gZGF0YS5hdHRyaWJ1dGVzW3BdID0gY29weUF0dHJpYnV0ZShhdHRyLCBzaGFsbG93KTtcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVycy5wdXNoKGF0dHIudmFsdWUuYnVmZmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YSA6IGRhdGEsXG4gICAgICAgICAgICBidWZmZXJzIDogYnVmZmVyc1xuICAgICAgICB9O1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXByb2R1Y2UgYSBnZW9tZXRyeSBmcm9tIG9iamVjdCBnZW5lcmF0ZWQgYnkgdG9PYmplY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IG9iamVjdCBnZW5lcmF0ZWQgYnkgdG9PYmplY3RcbiAgICAgKiBAcmV0dXJucyB7R2VvbWV0cnl9IGdlb21ldHJ5XG4gICAgICovXG4gICAgdG9HZW9tZXRyeSA6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgaWYgKCFvYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvYmplY3QuZGF0YSAmJiBvYmplY3QuYnVmZmVycykge1xuICAgICAgICAgICAgcmV0dXJuIHRyYW5zZmVyYWJsZVV0aWwudG9HZW9tZXRyeShvYmplY3QuZGF0YSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFvYmplY3QubWV0YWRhdGEgfHwgb2JqZWN0Lm1ldGFkYXRhLmdlbmVyYXRvciAhPT0gTUVUQS5nZW5lcmF0b3IpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignW3V0aWwudHJhbnNmZXJhYmxlLnRvR2VvbWV0cnldIHRoZSBvYmplY3QgaXMgbm90IGdlbmVyYXRlZCBieSB1dGlsLnRyYW5zZmVyYWJsZS4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vYmFzaWMgb3B0aW9uc1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICAgIGR5bmFtaWMgOiBvYmplY3QuZHluYW1pYyxcbiAgICAgICAgICAgIGluZGljZXMgOiBvYmplY3QuaW5kaWNlc1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChvYmplY3QuYm91bmRpbmdCb3gpIHtcbiAgICAgICAgICAgIHZhciBtaW4gPSBuZXcgVmVjdG9yMygpLnNldEFycmF5KG9iamVjdC5ib3VuZGluZ0JveC5taW4pO1xuICAgICAgICAgICAgdmFyIG1heCA9IG5ldyBWZWN0b3IzKCkuc2V0QXJyYXkob2JqZWN0LmJvdW5kaW5nQm94Lm1heCk7XG4gICAgICAgICAgICBvcHRpb25zLmJvdW5kaW5nQm94ID0gbmV3IEJvdW5kaW5nQm94KG1pbiwgbWF4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeShvcHRpb25zKTtcblxuICAgICAgICAvL2F0dHJpYnV0ZXNcbiAgICAgICAgZm9yICh2YXIgcCBpbiBvYmplY3QuYXR0cmlidXRlcykge1xuICAgICAgICAgICAgaWYgKG9iamVjdC5hdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF0dHIgPSBvYmplY3QuYXR0cmlidXRlc1twXTtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW3BdID0gbmV3IEdlb21ldHJ5LkF0dHJpYnV0ZShhdHRyLm5hbWUsIGF0dHIudHlwZSwgYXR0ci5zaXplLCBhdHRyLnNlbWFudGljKTtcbiAgICAgICAgICAgICAgICBnZW9tZXRyeS5hdHRyaWJ1dGVzW3BdLnZhbHVlID0gYXR0ci52YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBnZW9tZXRyeTtcbiAgICB9XG5cbn1cblxuZnVuY3Rpb24gY29weUF0dHJpYnV0ZShhdHRyLCBzaGFsbG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZSA6IGF0dHIubmFtZSxcbiAgICAgICAgdHlwZSA6IGF0dHIudHlwZSxcbiAgICAgICAgc2l6ZSA6IGF0dHIuc2l6ZSxcbiAgICAgICAgc2VtYW50aWMgOiBhdHRyLnNlbWFudGljLFxuICAgICAgICB2YWx1ZSA6IGNvcHlJZk5lY2Vzc2FyeShhdHRyLnZhbHVlLCBzaGFsbG93KVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGNvcHlJZk5lY2Vzc2FyeShhcnIsIHNoYWxsb3cpIHtcbiAgICBpZiAoIXNoYWxsb3cpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhcnIuY29uc3RydWN0b3IoYXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdHJhbnNmZXJhYmxlVXRpbDtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy91dGlsL3RyYW5zZmVyYWJsZS5qc1xuLy8gbW9kdWxlIGlkID0gMTkyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///192\n");

/***/ }),
/* 193 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/**\n * @name clay.version\n */\n/* unused harmony default export */ var _unused_webpack_default_export = ('1.3.0');\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ZXJzaW9uLmpzPzk2YmUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbmFtZSBjbGF5LnZlcnNpb25cbiAqL1xuZXhwb3J0IGRlZmF1bHQgJzEuMy4wJztcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ZXJzaW9uLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///193\n");

/***/ }),
/* 194 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Mesh__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__Material__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__Geometry__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__Shader__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__core_Base__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__output_glsl_js__ = __webpack_require__(195);\n// https://github.com/googlevr/webvr-polyfill/blob/master/src/cardboard-distorter.js\n\n// Use webvr may have scale problem.\n// https://github.com/googlevr/webvr-polyfill/issues/140\n// https://github.com/googlevr/webvr-polyfill/search?q=SCALE&type=Issues&utf8=%E2%9C%93\n// https://github.com/googlevr/webvr-polyfill/issues/147\n\n\n\n\n\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].import(__WEBPACK_IMPORTED_MODULE_6__output_glsl_js__[\"a\" /* default */]);\n\nfunction lerp (a, b, t) {\n    return a * (1 - t) + b * t;\n}\n\nvar CardboardDistorter = __WEBPACK_IMPORTED_MODULE_4__core_Base__[\"a\" /* default */].extend(function () {\n    return {\n\n        clearColor: [0, 0, 0, 1],\n\n        _mesh: new __WEBPACK_IMPORTED_MODULE_0__Mesh__[\"a\" /* default */]({\n            geometry: new __WEBPACK_IMPORTED_MODULE_2__Geometry__[\"a\" /* default */]({\n                dynamic: true\n            }),\n            culling: false,\n            material: new __WEBPACK_IMPORTED_MODULE_1__Material__[\"a\" /* default */]({\n                // FIXME Why disable depthMask will be wrong\n                // depthMask: false,\n                depthTest: false,\n                shader: new __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */]({\n                    vertex: __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.vr.disorter.output.vertex'),\n                    fragment: __WEBPACK_IMPORTED_MODULE_3__Shader__[\"a\" /* default */].source('clay.vr.disorter.output.fragment')\n                })\n            })\n        }),\n        _fakeCamera: new __WEBPACK_IMPORTED_MODULE_5__camera_Perspective__[\"a\" /* default */]()\n    };\n}, {\n\n    render: function (renderer, sourceTexture) {\n        var clearColor = this.clearColor;\n        var gl = renderer.gl;\n        gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n        gl.clear(gl.COLOR_BUFFER_BIT);\n\n        gl.disable(gl.BLEND);\n\n        this._mesh.material.set('texture', sourceTexture);\n\n        // Full size?\n        renderer.saveViewport();\n        renderer.setViewport(0, 0, renderer.getWidth(), renderer.getHeight());\n        renderer.renderPass([this._mesh], this._fakeCamera);\n        renderer.restoreViewport();\n        // this._mesh.material.shader.bind(renderer);\n        // this._mesh.material.bind(renderer);\n        // this._mesh.render(renderer.gl);\n    },\n\n    updateFromVRDisplay: function (vrDisplay) {\n\n        // FIXME\n        if (vrDisplay.deviceInfo_) {\n            // Hardcoded mesh size\n            this._updateMesh(20, 20, vrDisplay.deviceInfo_);\n        }\n        else {\n            console.warn('Cant get vrDisplay.deviceInfo_, seems code changed');\n        }\n    },\n\n    _updateMesh: function (width, height, deviceInfo) {\n\n        var positionAttr = this._mesh.geometry.attributes.position;\n        var texcoordAttr = this._mesh.geometry.attributes.texcoord0;\n        positionAttr.init(2 * width * height);\n        texcoordAttr.init(2 * width * height);\n\n        var lensFrustum = deviceInfo.getLeftEyeVisibleTanAngles();\n        var noLensFrustum = deviceInfo.getLeftEyeNoLensTanAngles();\n        var viewport = deviceInfo.getLeftEyeVisibleScreenRect(noLensFrustum);\n        var vidx = 0;\n\n        var pos = [];\n        var uv = [];\n\n        // Vertices\n        for (var e = 0; e < 2; e++) {\n            for (var j = 0; j < height; j++) {\n                for (var i = 0; i < width; i++, vidx++) {\n                    var u = i / (width - 1);\n                    var v = j / (height - 1);\n\n                    // Grid points regularly spaced in StreoScreen, and barrel distorted in\n                    // the mesh.\n                    var s = u;\n                    var t = v;\n                    var x = lerp(lensFrustum[0], lensFrustum[2], u);\n                    var y = lerp(lensFrustum[3], lensFrustum[1], v);\n                    var d = Math.sqrt(x * x + y * y);\n                    var r = deviceInfo.distortion.distortInverse(d);\n                    var p = x * r / d;\n                    var q = y * r / d;\n                    u = (p - noLensFrustum[0]) / (noLensFrustum[2] - noLensFrustum[0]);\n                    v = (q - noLensFrustum[3]) / (noLensFrustum[1] - noLensFrustum[3]);\n\n                    // Convert u,v to mesh screen coordinates.\n                    var aspect = deviceInfo.device.widthMeters / deviceInfo.device.heightMeters;\n\n                    // FIXME: The original Unity plugin multiplied U by the aspect ratio\n                    // and didn't multiply either value by 2, but that seems to get it\n                    // really close to correct looking for me. I hate this kind of \"Don't\n                    // know why it works\" code though, and wold love a more logical\n                    // explanation of what needs to happen here.\n                    u = (viewport.x + u * viewport.width - 0.5) * 2.0; //* aspect;\n                    v = (viewport.y + v * viewport.height - 0.5) * 2.0;\n\n                    pos[0] = u;\n                    pos[1] = v;\n                    pos[2] = 0;\n\n                    uv[0] = s * 0.5 + e * 0.5;\n                    uv[1] = t;\n\n                    positionAttr.set(vidx, pos);\n                    texcoordAttr.set(vidx, uv);\n                }\n            }\n\n            var w = lensFrustum[2] - lensFrustum[0];\n            lensFrustum[0] = -(w + lensFrustum[0]);\n            lensFrustum[2] = w - lensFrustum[2];\n            w = noLensFrustum[2] - noLensFrustum[0];\n            noLensFrustum[0] = -(w + noLensFrustum[0]);\n            noLensFrustum[2] = w - noLensFrustum[2];\n            viewport.x = 1 - (viewport.x + viewport.width);\n        }\n\n        // Indices\n        var indices = new Uint16Array(2 * (width - 1) * (height - 1) * 6);\n        var halfwidth = width / 2;\n        var halfheight = height / 2;\n        var vidx = 0;\n        var iidx = 0;\n        for (var e = 0; e < 2; e++) {\n            for (var j = 0; j < height; j++) {\n                for (var i = 0; i < width; i++, vidx++) {\n                    if (i === 0 || j === 0) {\n                        continue;\n                    }\n                    // Build a quad.  Lower right and upper left quadrants have quads with\n                    // the triangle diagonal flipped to get the vignette to interpolate\n                    // correctly.\n                    if ((i <= halfwidth) == (j <= halfheight)) {\n                        // Quad diagonal lower left to upper right.\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - width - 1;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx - width - 1;\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - 1;\n                    }\n                    else {\n                        // Quad diagonal upper left to lower right.\n                        indices[iidx++] = vidx - 1;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx;\n                        indices[iidx++] = vidx - width;\n                        indices[iidx++] = vidx - 1;\n                        indices[iidx++] = vidx - width - 1;\n                    }\n                }\n            }\n        }\n\n        this._mesh.geometry.indices = indices;\n\n        this._mesh.geometry.dirty();\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (CardboardDistorter);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ci9DYXJkYm9hcmREaXN0b3J0ZXIuanM/OWZiZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xldnIvd2VidnItcG9seWZpbGwvYmxvYi9tYXN0ZXIvc3JjL2NhcmRib2FyZC1kaXN0b3J0ZXIuanNcblxuLy8gVXNlIHdlYnZyIG1heSBoYXZlIHNjYWxlIHByb2JsZW0uXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xldnIvd2VidnItcG9seWZpbGwvaXNzdWVzLzE0MFxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZXZyL3dlYnZyLXBvbHlmaWxsL3NlYXJjaD9xPVNDQUxFJnR5cGU9SXNzdWVzJnV0Zjg9JUUyJTlDJTkzXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xldnIvd2VidnItcG9seWZpbGwvaXNzdWVzLzE0N1xuXG5cbmltcG9ydCBNZXNoIGZyb20gJy4uL01lc2gnO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL01hdGVyaWFsJztcbmltcG9ydCBHZW9tZXRyeSBmcm9tICcuLi9HZW9tZXRyeSc7XG5pbXBvcnQgU2hhZGVyIGZyb20gJy4uL1NoYWRlcic7XG5pbXBvcnQgQmFzZSBmcm9tICcuLi9jb3JlL0Jhc2UnO1xuaW1wb3J0IFBlcnNwZWN0aXZlQ2FtZXJhIGZyb20gJy4uL2NhbWVyYS9QZXJzcGVjdGl2ZSc7XG5cbmltcG9ydCBvdXRwdXRFc3NsIGZyb20gJy4vb3V0cHV0Lmdsc2wuanMnO1xuXG5TaGFkZXIuaW1wb3J0KG91dHB1dEVzc2wpO1xuXG5mdW5jdGlvbiBsZXJwIChhLCBiLCB0KSB7XG4gICAgcmV0dXJuIGEgKiAoMSAtIHQpICsgYiAqIHQ7XG59XG5cbnZhciBDYXJkYm9hcmREaXN0b3J0ZXIgPSBCYXNlLmV4dGVuZChmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHtcblxuICAgICAgICBjbGVhckNvbG9yOiBbMCwgMCwgMCwgMV0sXG5cbiAgICAgICAgX21lc2g6IG5ldyBNZXNoKHtcbiAgICAgICAgICAgIGdlb21ldHJ5OiBuZXcgR2VvbWV0cnkoe1xuICAgICAgICAgICAgICAgIGR5bmFtaWM6IHRydWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgY3VsbGluZzogZmFsc2UsXG4gICAgICAgICAgICBtYXRlcmlhbDogbmV3IE1hdGVyaWFsKHtcbiAgICAgICAgICAgICAgICAvLyBGSVhNRSBXaHkgZGlzYWJsZSBkZXB0aE1hc2sgd2lsbCBiZSB3cm9uZ1xuICAgICAgICAgICAgICAgIC8vIGRlcHRoTWFzazogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGVwdGhUZXN0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBzaGFkZXI6IG5ldyBTaGFkZXIoe1xuICAgICAgICAgICAgICAgICAgICB2ZXJ0ZXg6IFNoYWRlci5zb3VyY2UoJ2NsYXkudnIuZGlzb3J0ZXIub3V0cHV0LnZlcnRleCcpLFxuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS52ci5kaXNvcnRlci5vdXRwdXQuZnJhZ21lbnQnKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSxcbiAgICAgICAgX2Zha2VDYW1lcmE6IG5ldyBQZXJzcGVjdGl2ZUNhbWVyYSgpXG4gICAgfTtcbn0sIHtcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBzb3VyY2VUZXh0dXJlKSB7XG4gICAgICAgIHZhciBjbGVhckNvbG9yID0gdGhpcy5jbGVhckNvbG9yO1xuICAgICAgICB2YXIgZ2wgPSByZW5kZXJlci5nbDtcbiAgICAgICAgZ2wuY2xlYXJDb2xvcihjbGVhckNvbG9yWzBdLCBjbGVhckNvbG9yWzFdLCBjbGVhckNvbG9yWzJdLCBjbGVhckNvbG9yWzNdKTtcbiAgICAgICAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7XG5cbiAgICAgICAgZ2wuZGlzYWJsZShnbC5CTEVORCk7XG5cbiAgICAgICAgdGhpcy5fbWVzaC5tYXRlcmlhbC5zZXQoJ3RleHR1cmUnLCBzb3VyY2VUZXh0dXJlKTtcblxuICAgICAgICAvLyBGdWxsIHNpemU/XG4gICAgICAgIHJlbmRlcmVyLnNhdmVWaWV3cG9ydCgpO1xuICAgICAgICByZW5kZXJlci5zZXRWaWV3cG9ydCgwLCAwLCByZW5kZXJlci5nZXRXaWR0aCgpLCByZW5kZXJlci5nZXRIZWlnaHQoKSk7XG4gICAgICAgIHJlbmRlcmVyLnJlbmRlclBhc3MoW3RoaXMuX21lc2hdLCB0aGlzLl9mYWtlQ2FtZXJhKTtcbiAgICAgICAgcmVuZGVyZXIucmVzdG9yZVZpZXdwb3J0KCk7XG4gICAgICAgIC8vIHRoaXMuX21lc2gubWF0ZXJpYWwuc2hhZGVyLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAvLyB0aGlzLl9tZXNoLm1hdGVyaWFsLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICAvLyB0aGlzLl9tZXNoLnJlbmRlcihyZW5kZXJlci5nbCk7XG4gICAgfSxcblxuICAgIHVwZGF0ZUZyb21WUkRpc3BsYXk6IGZ1bmN0aW9uICh2ckRpc3BsYXkpIHtcblxuICAgICAgICAvLyBGSVhNRVxuICAgICAgICBpZiAodnJEaXNwbGF5LmRldmljZUluZm9fKSB7XG4gICAgICAgICAgICAvLyBIYXJkY29kZWQgbWVzaCBzaXplXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVNZXNoKDIwLCAyMCwgdnJEaXNwbGF5LmRldmljZUluZm9fKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignQ2FudCBnZXQgdnJEaXNwbGF5LmRldmljZUluZm9fLCBzZWVtcyBjb2RlIGNoYW5nZWQnKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBfdXBkYXRlTWVzaDogZnVuY3Rpb24gKHdpZHRoLCBoZWlnaHQsIGRldmljZUluZm8pIHtcblxuICAgICAgICB2YXIgcG9zaXRpb25BdHRyID0gdGhpcy5fbWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnBvc2l0aW9uO1xuICAgICAgICB2YXIgdGV4Y29vcmRBdHRyID0gdGhpcy5fbWVzaC5nZW9tZXRyeS5hdHRyaWJ1dGVzLnRleGNvb3JkMDtcbiAgICAgICAgcG9zaXRpb25BdHRyLmluaXQoMiAqIHdpZHRoICogaGVpZ2h0KTtcbiAgICAgICAgdGV4Y29vcmRBdHRyLmluaXQoMiAqIHdpZHRoICogaGVpZ2h0KTtcblxuICAgICAgICB2YXIgbGVuc0ZydXN0dW0gPSBkZXZpY2VJbmZvLmdldExlZnRFeWVWaXNpYmxlVGFuQW5nbGVzKCk7XG4gICAgICAgIHZhciBub0xlbnNGcnVzdHVtID0gZGV2aWNlSW5mby5nZXRMZWZ0RXllTm9MZW5zVGFuQW5nbGVzKCk7XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IGRldmljZUluZm8uZ2V0TGVmdEV5ZVZpc2libGVTY3JlZW5SZWN0KG5vTGVuc0ZydXN0dW0pO1xuICAgICAgICB2YXIgdmlkeCA9IDA7XG5cbiAgICAgICAgdmFyIHBvcyA9IFtdO1xuICAgICAgICB2YXIgdXYgPSBbXTtcblxuICAgICAgICAvLyBWZXJ0aWNlc1xuICAgICAgICBmb3IgKHZhciBlID0gMDsgZSA8IDI7IGUrKykge1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBoZWlnaHQ7IGorKykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgd2lkdGg7IGkrKywgdmlkeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1ID0gaSAvICh3aWR0aCAtIDEpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IGogLyAoaGVpZ2h0IC0gMSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gR3JpZCBwb2ludHMgcmVndWxhcmx5IHNwYWNlZCBpbiBTdHJlb1NjcmVlbiwgYW5kIGJhcnJlbCBkaXN0b3J0ZWQgaW5cbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG1lc2guXG4gICAgICAgICAgICAgICAgICAgIHZhciBzID0gdTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHQgPSB2O1xuICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGxlcnAobGVuc0ZydXN0dW1bMF0sIGxlbnNGcnVzdHVtWzJdLCB1KTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHkgPSBsZXJwKGxlbnNGcnVzdHVtWzNdLCBsZW5zRnJ1c3R1bVsxXSwgdik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgciA9IGRldmljZUluZm8uZGlzdG9ydGlvbi5kaXN0b3J0SW52ZXJzZShkKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHAgPSB4ICogciAvIGQ7XG4gICAgICAgICAgICAgICAgICAgIHZhciBxID0geSAqIHIgLyBkO1xuICAgICAgICAgICAgICAgICAgICB1ID0gKHAgLSBub0xlbnNGcnVzdHVtWzBdKSAvIChub0xlbnNGcnVzdHVtWzJdIC0gbm9MZW5zRnJ1c3R1bVswXSk7XG4gICAgICAgICAgICAgICAgICAgIHYgPSAocSAtIG5vTGVuc0ZydXN0dW1bM10pIC8gKG5vTGVuc0ZydXN0dW1bMV0gLSBub0xlbnNGcnVzdHVtWzNdKTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBDb252ZXJ0IHUsdiB0byBtZXNoIHNjcmVlbiBjb29yZGluYXRlcy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFzcGVjdCA9IGRldmljZUluZm8uZGV2aWNlLndpZHRoTWV0ZXJzIC8gZGV2aWNlSW5mby5kZXZpY2UuaGVpZ2h0TWV0ZXJzO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBUaGUgb3JpZ2luYWwgVW5pdHkgcGx1Z2luIG11bHRpcGxpZWQgVSBieSB0aGUgYXNwZWN0IHJhdGlvXG4gICAgICAgICAgICAgICAgICAgIC8vIGFuZCBkaWRuJ3QgbXVsdGlwbHkgZWl0aGVyIHZhbHVlIGJ5IDIsIGJ1dCB0aGF0IHNlZW1zIHRvIGdldCBpdFxuICAgICAgICAgICAgICAgICAgICAvLyByZWFsbHkgY2xvc2UgdG8gY29ycmVjdCBsb29raW5nIGZvciBtZS4gSSBoYXRlIHRoaXMga2luZCBvZiBcIkRvbid0XG4gICAgICAgICAgICAgICAgICAgIC8vIGtub3cgd2h5IGl0IHdvcmtzXCIgY29kZSB0aG91Z2gsIGFuZCB3b2xkIGxvdmUgYSBtb3JlIGxvZ2ljYWxcbiAgICAgICAgICAgICAgICAgICAgLy8gZXhwbGFuYXRpb24gb2Ygd2hhdCBuZWVkcyB0byBoYXBwZW4gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgdSA9ICh2aWV3cG9ydC54ICsgdSAqIHZpZXdwb3J0LndpZHRoIC0gMC41KSAqIDIuMDsgLy8qIGFzcGVjdDtcbiAgICAgICAgICAgICAgICAgICAgdiA9ICh2aWV3cG9ydC55ICsgdiAqIHZpZXdwb3J0LmhlaWdodCAtIDAuNSkgKiAyLjA7XG5cbiAgICAgICAgICAgICAgICAgICAgcG9zWzBdID0gdTtcbiAgICAgICAgICAgICAgICAgICAgcG9zWzFdID0gdjtcbiAgICAgICAgICAgICAgICAgICAgcG9zWzJdID0gMDtcblxuICAgICAgICAgICAgICAgICAgICB1dlswXSA9IHMgKiAwLjUgKyBlICogMC41O1xuICAgICAgICAgICAgICAgICAgICB1dlsxXSA9IHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25BdHRyLnNldCh2aWR4LCBwb3MpO1xuICAgICAgICAgICAgICAgICAgICB0ZXhjb29yZEF0dHIuc2V0KHZpZHgsIHV2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3ID0gbGVuc0ZydXN0dW1bMl0gLSBsZW5zRnJ1c3R1bVswXTtcbiAgICAgICAgICAgIGxlbnNGcnVzdHVtWzBdID0gLSh3ICsgbGVuc0ZydXN0dW1bMF0pO1xuICAgICAgICAgICAgbGVuc0ZydXN0dW1bMl0gPSB3IC0gbGVuc0ZydXN0dW1bMl07XG4gICAgICAgICAgICB3ID0gbm9MZW5zRnJ1c3R1bVsyXSAtIG5vTGVuc0ZydXN0dW1bMF07XG4gICAgICAgICAgICBub0xlbnNGcnVzdHVtWzBdID0gLSh3ICsgbm9MZW5zRnJ1c3R1bVswXSk7XG4gICAgICAgICAgICBub0xlbnNGcnVzdHVtWzJdID0gdyAtIG5vTGVuc0ZydXN0dW1bMl07XG4gICAgICAgICAgICB2aWV3cG9ydC54ID0gMSAtICh2aWV3cG9ydC54ICsgdmlld3BvcnQud2lkdGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSW5kaWNlc1xuICAgICAgICB2YXIgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheSgyICogKHdpZHRoIC0gMSkgKiAoaGVpZ2h0IC0gMSkgKiA2KTtcbiAgICAgICAgdmFyIGhhbGZ3aWR0aCA9IHdpZHRoIC8gMjtcbiAgICAgICAgdmFyIGhhbGZoZWlnaHQgPSBoZWlnaHQgLyAyO1xuICAgICAgICB2YXIgdmlkeCA9IDA7XG4gICAgICAgIHZhciBpaWR4ID0gMDtcbiAgICAgICAgZm9yICh2YXIgZSA9IDA7IGUgPCAyOyBlKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgaGVpZ2h0OyBqKyspIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHdpZHRoOyBpKyssIHZpZHgrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBqID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBCdWlsZCBhIHF1YWQuICBMb3dlciByaWdodCBhbmQgdXBwZXIgbGVmdCBxdWFkcmFudHMgaGF2ZSBxdWFkcyB3aXRoXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoZSB0cmlhbmdsZSBkaWFnb25hbCBmbGlwcGVkIHRvIGdldCB0aGUgdmlnbmV0dGUgdG8gaW50ZXJwb2xhdGVcbiAgICAgICAgICAgICAgICAgICAgLy8gY29ycmVjdGx5LlxuICAgICAgICAgICAgICAgICAgICBpZiAoKGkgPD0gaGFsZndpZHRoKSA9PSAoaiA8PSBoYWxmaGVpZ2h0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUXVhZCBkaWFnb25hbCBsb3dlciBsZWZ0IHRvIHVwcGVyIHJpZ2h0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSB3aWR0aCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGggLSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZGljZXNbaWlkeCsrXSA9IHZpZHggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUXVhZCBkaWFnb25hbCB1cHBlciBsZWZ0IHRvIGxvd2VyIHJpZ2h0LlxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4O1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIHdpZHRoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kaWNlc1tpaWR4KytdID0gdmlkeCAtIDE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRpY2VzW2lpZHgrK10gPSB2aWR4IC0gd2lkdGggLSAxO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fbWVzaC5nZW9tZXRyeS5pbmRpY2VzID0gaW5kaWNlcztcblxuICAgICAgICB0aGlzLl9tZXNoLmdlb21ldHJ5LmRpcnR5KCk7XG4gICAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IENhcmRib2FyZERpc3RvcnRlcjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ci9DYXJkYm9hcmREaXN0b3J0ZXIuanNcbi8vIG1vZHVsZSBpZCA9IDE5NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///194\n");

/***/ }),
/* 195 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export clay.vr.disorter.output.vertex\\nattribute vec2 texcoord: TEXCOORD_0;\\nattribute vec3 position: POSITION;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n v_Texcoord = texcoord;\\n gl_Position = vec4(position.xy, 0.5, 1.0);\\n}\\n@end\\n@export clay.vr.disorter.output.fragment\\nuniform sampler2D texture;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n gl_FragColor = texture2D(texture, v_Texcoord);\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ci9vdXRwdXQuZ2xzbC5qcz9iMTkzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiQGV4cG9ydCBjbGF5LnZyLmRpc29ydGVyLm91dHB1dC52ZXJ0ZXhcXG5hdHRyaWJ1dGUgdmVjMiB0ZXhjb29yZDogVEVYQ09PUkRfMDtcXG5hdHRyaWJ1dGUgdmVjMyBwb3NpdGlvbjogUE9TSVRJT047XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudm9pZCBtYWluKClcXG57XFxuIHZfVGV4Y29vcmQgPSB0ZXhjb29yZDtcXG4gZ2xfUG9zaXRpb24gPSB2ZWM0KHBvc2l0aW9uLnh5LCAwLjUsIDEuMCk7XFxufVxcbkBlbmRcXG5AZXhwb3J0IGNsYXkudnIuZGlzb3J0ZXIub3V0cHV0LmZyYWdtZW50XFxudW5pZm9ybSBzYW1wbGVyMkQgdGV4dHVyZTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKVxcbntcXG4gZ2xfRnJhZ0NvbG9yID0gdGV4dHVyZTJEKHRleHR1cmUsIHZfVGV4Y29vcmQpO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdnIvb3V0cHV0Lmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDE5NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///195\n");

/***/ }),
/* 196 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__Node__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__ = __webpack_require__(14);\n\n\n\n\nvar tmpProjectionMatrix = new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */]();\n\nvar StereoCamera = __WEBPACK_IMPORTED_MODULE_0__Node__[\"a\" /* default */].extend(function () {\n    return {\n\n        aspect: 0.5,\n\n        _leftCamera: new __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__[\"a\" /* default */](),\n\n        _rightCamera: new __WEBPACK_IMPORTED_MODULE_1__camera_Perspective__[\"a\" /* default */](),\n\n        _eyeLeft: new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */](),\n        _eyeRight: new __WEBPACK_IMPORTED_MODULE_2__math_Matrix4__[\"a\" /* default */](),\n\n        _frameData: null\n    };\n}, {\n\n    updateFromCamera: function (camera, focus, zoom, eyeSep) {\n        if (camera.transformNeedsUpdate()) {\n            console.warn('Node transform is not updated');\n        }\n\n        focus = focus == null ? 10 : focus;\n        zoom = zoom == null ? 1 : zoom;\n        eyeSep = eyeSep == null ? 0.064 : eyeSep;\n\n        var fov = camera.fov;\n        var aspect = camera.aspect * this.aspect;\n        var near = camera.near;\n\n        // Off-axis stereoscopic effect based on\n        // http://paulbourke.net/stereographics/stereorender/\n\n        tmpProjectionMatrix.copy(camera.projectionMatrix);\n        var eyeSep = eyeSep / 2;\n        var eyeSepOnProjection = eyeSep * near / focus;\n        var ymax = (near * Math.tan(Math.PI / 180 * fov * 0.5 ) ) / zoom;\n        var xmin, xmax;\n\n        // translate xOffset\n        this._eyeLeft.array[12] = - eyeSep;\n        this._eyeRight.array[12] = eyeSep;\n\n        // for left eye\n        xmin = - ymax * aspect + eyeSepOnProjection;\n        xmax = ymax * aspect + eyeSepOnProjection;\n\n        tmpProjectionMatrix.array[0] = 2 * near / (xmax - xmin);\n        tmpProjectionMatrix.array[8] = (xmax + xmin ) / (xmax - xmin);\n\n        this._leftCamera.projectionMatrix.copy(tmpProjectionMatrix);\n\n        // for right eye\n        xmin = - ymax * aspect - eyeSepOnProjection;\n        xmax = ymax * aspect - eyeSepOnProjection;\n\n        tmpProjectionMatrix.array[0] = 2 * near / (xmax - xmin);\n        tmpProjectionMatrix.array[8] = (xmax + xmin ) / (xmax - xmin);\n\n        this._rightCamera.projectionMatrix.copy(tmpProjectionMatrix);\n\n        this._leftCamera.worldTransform\n            .copy(camera.worldTransform)\n            .multiply(this._eyeLeft);\n\n        this._rightCamera.worldTransform\n            .copy(camera.worldTransform)\n            .multiply(this._eyeRight);\n\n        this._leftCamera.decomposeWorldTransform();\n        this._leftCamera.decomposeProjectionMatrix();\n\n        this._rightCamera.decomposeWorldTransform();\n        this._rightCamera.decomposeProjectionMatrix();\n    },\n\n    updateFromVRDisplay: function (vrDisplay, parentNode) {\n\n        if (typeof VRFrameData === 'undefined') {\n            return;\n        }\n\n        var frameData = this._frameData || (this._frameData = new VRFrameData());\n        vrDisplay.getFrameData(frameData);\n        var leftCamera = this._leftCamera;\n        var rightCamera = this._rightCamera;\n\n        leftCamera.projectionMatrix.setArray(frameData.leftProjectionMatrix);\n        leftCamera.decomposeProjectionMatrix();\n        leftCamera.viewMatrix.setArray(frameData.leftViewMatrix);\n        leftCamera.setViewMatrix(leftCamera.viewMatrix);\n\n        rightCamera.projectionMatrix.setArray(frameData.rightProjectionMatrix);\n        rightCamera.decomposeProjectionMatrix();\n        rightCamera.viewMatrix.setArray(frameData.rightViewMatrix);\n        rightCamera.setViewMatrix(rightCamera.viewMatrix);\n\n        if (parentNode && parentNode.worldTransform) {\n            if (parentNode.transformNeedsUpdate()) {\n                console.warn('Node transform is not updated');\n            }\n            leftCamera.worldTransform.multiplyLeft(parentNode.worldTransform);\n            leftCamera.decomposeWorldTransform();\n            rightCamera.worldTransform.multiplyLeft(parentNode.worldTransform);\n            rightCamera.decomposeWorldTransform();\n        }\n    },\n\n    getLeftCamera: function () {\n        return this._leftCamera;\n    },\n\n    getRightCamera: function () {\n        return this._rightCamera;\n    }\n});\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (StereoCamera);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy9Vc2Vycy9sYW5nL0RldmVsb3AvY2xheWdsL3NyYy92ci9TdGVyZW9DYW1lcmEuanM/MGI4YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQmFzZSBmcm9tICcuLi9Ob2RlJztcbmltcG9ydCBDYW1lcmEgZnJvbSAnLi4vY2FtZXJhL1BlcnNwZWN0aXZlJztcbmltcG9ydCBNYXRyaXg0IGZyb20gJy4uL21hdGgvTWF0cml4NCc7XG5cbnZhciB0bXBQcm9qZWN0aW9uTWF0cml4ID0gbmV3IE1hdHJpeDQoKTtcblxudmFyIFN0ZXJlb0NhbWVyYSA9IEJhc2UuZXh0ZW5kKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4ge1xuXG4gICAgICAgIGFzcGVjdDogMC41LFxuXG4gICAgICAgIF9sZWZ0Q2FtZXJhOiBuZXcgQ2FtZXJhKCksXG5cbiAgICAgICAgX3JpZ2h0Q2FtZXJhOiBuZXcgQ2FtZXJhKCksXG5cbiAgICAgICAgX2V5ZUxlZnQ6IG5ldyBNYXRyaXg0KCksXG4gICAgICAgIF9leWVSaWdodDogbmV3IE1hdHJpeDQoKSxcblxuICAgICAgICBfZnJhbWVEYXRhOiBudWxsXG4gICAgfTtcbn0sIHtcblxuICAgIHVwZGF0ZUZyb21DYW1lcmE6IGZ1bmN0aW9uIChjYW1lcmEsIGZvY3VzLCB6b29tLCBleWVTZXApIHtcbiAgICAgICAgaWYgKGNhbWVyYS50cmFuc2Zvcm1OZWVkc1VwZGF0ZSgpKSB7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vZGUgdHJhbnNmb3JtIGlzIG5vdCB1cGRhdGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBmb2N1cyA9IGZvY3VzID09IG51bGwgPyAxMCA6IGZvY3VzO1xuICAgICAgICB6b29tID0gem9vbSA9PSBudWxsID8gMSA6IHpvb207XG4gICAgICAgIGV5ZVNlcCA9IGV5ZVNlcCA9PSBudWxsID8gMC4wNjQgOiBleWVTZXA7XG5cbiAgICAgICAgdmFyIGZvdiA9IGNhbWVyYS5mb3Y7XG4gICAgICAgIHZhciBhc3BlY3QgPSBjYW1lcmEuYXNwZWN0ICogdGhpcy5hc3BlY3Q7XG4gICAgICAgIHZhciBuZWFyID0gY2FtZXJhLm5lYXI7XG5cbiAgICAgICAgLy8gT2ZmLWF4aXMgc3RlcmVvc2NvcGljIGVmZmVjdCBiYXNlZCBvblxuICAgICAgICAvLyBodHRwOi8vcGF1bGJvdXJrZS5uZXQvc3RlcmVvZ3JhcGhpY3Mvc3RlcmVvcmVuZGVyL1xuXG4gICAgICAgIHRtcFByb2plY3Rpb25NYXRyaXguY29weShjYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgIHZhciBleWVTZXAgPSBleWVTZXAgLyAyO1xuICAgICAgICB2YXIgZXllU2VwT25Qcm9qZWN0aW9uID0gZXllU2VwICogbmVhciAvIGZvY3VzO1xuICAgICAgICB2YXIgeW1heCA9IChuZWFyICogTWF0aC50YW4oTWF0aC5QSSAvIDE4MCAqIGZvdiAqIDAuNSApICkgLyB6b29tO1xuICAgICAgICB2YXIgeG1pbiwgeG1heDtcblxuICAgICAgICAvLyB0cmFuc2xhdGUgeE9mZnNldFxuICAgICAgICB0aGlzLl9leWVMZWZ0LmFycmF5WzEyXSA9IC0gZXllU2VwO1xuICAgICAgICB0aGlzLl9leWVSaWdodC5hcnJheVsxMl0gPSBleWVTZXA7XG5cbiAgICAgICAgLy8gZm9yIGxlZnQgZXllXG4gICAgICAgIHhtaW4gPSAtIHltYXggKiBhc3BlY3QgKyBleWVTZXBPblByb2plY3Rpb247XG4gICAgICAgIHhtYXggPSB5bWF4ICogYXNwZWN0ICsgZXllU2VwT25Qcm9qZWN0aW9uO1xuXG4gICAgICAgIHRtcFByb2plY3Rpb25NYXRyaXguYXJyYXlbMF0gPSAyICogbmVhciAvICh4bWF4IC0geG1pbik7XG4gICAgICAgIHRtcFByb2plY3Rpb25NYXRyaXguYXJyYXlbOF0gPSAoeG1heCArIHhtaW4gKSAvICh4bWF4IC0geG1pbik7XG5cbiAgICAgICAgdGhpcy5fbGVmdENhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmNvcHkodG1wUHJvamVjdGlvbk1hdHJpeCk7XG5cbiAgICAgICAgLy8gZm9yIHJpZ2h0IGV5ZVxuICAgICAgICB4bWluID0gLSB5bWF4ICogYXNwZWN0IC0gZXllU2VwT25Qcm9qZWN0aW9uO1xuICAgICAgICB4bWF4ID0geW1heCAqIGFzcGVjdCAtIGV5ZVNlcE9uUHJvamVjdGlvbjtcblxuICAgICAgICB0bXBQcm9qZWN0aW9uTWF0cml4LmFycmF5WzBdID0gMiAqIG5lYXIgLyAoeG1heCAtIHhtaW4pO1xuICAgICAgICB0bXBQcm9qZWN0aW9uTWF0cml4LmFycmF5WzhdID0gKHhtYXggKyB4bWluICkgLyAoeG1heCAtIHhtaW4pO1xuXG4gICAgICAgIHRoaXMuX3JpZ2h0Q2FtZXJhLnByb2plY3Rpb25NYXRyaXguY29weSh0bXBQcm9qZWN0aW9uTWF0cml4KTtcblxuICAgICAgICB0aGlzLl9sZWZ0Q2FtZXJhLndvcmxkVHJhbnNmb3JtXG4gICAgICAgICAgICAuY29weShjYW1lcmEud29ybGRUcmFuc2Zvcm0pXG4gICAgICAgICAgICAubXVsdGlwbHkodGhpcy5fZXllTGVmdCk7XG5cbiAgICAgICAgdGhpcy5fcmlnaHRDYW1lcmEud29ybGRUcmFuc2Zvcm1cbiAgICAgICAgICAgIC5jb3B5KGNhbWVyYS53b3JsZFRyYW5zZm9ybSlcbiAgICAgICAgICAgIC5tdWx0aXBseSh0aGlzLl9leWVSaWdodCk7XG5cbiAgICAgICAgdGhpcy5fbGVmdENhbWVyYS5kZWNvbXBvc2VXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICB0aGlzLl9sZWZ0Q2FtZXJhLmRlY29tcG9zZVByb2plY3Rpb25NYXRyaXgoKTtcblxuICAgICAgICB0aGlzLl9yaWdodENhbWVyYS5kZWNvbXBvc2VXb3JsZFRyYW5zZm9ybSgpO1xuICAgICAgICB0aGlzLl9yaWdodENhbWVyYS5kZWNvbXBvc2VQcm9qZWN0aW9uTWF0cml4KCk7XG4gICAgfSxcblxuICAgIHVwZGF0ZUZyb21WUkRpc3BsYXk6IGZ1bmN0aW9uICh2ckRpc3BsYXksIHBhcmVudE5vZGUpIHtcblxuICAgICAgICBpZiAodHlwZW9mIFZSRnJhbWVEYXRhID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGZyYW1lRGF0YSA9IHRoaXMuX2ZyYW1lRGF0YSB8fCAodGhpcy5fZnJhbWVEYXRhID0gbmV3IFZSRnJhbWVEYXRhKCkpO1xuICAgICAgICB2ckRpc3BsYXkuZ2V0RnJhbWVEYXRhKGZyYW1lRGF0YSk7XG4gICAgICAgIHZhciBsZWZ0Q2FtZXJhID0gdGhpcy5fbGVmdENhbWVyYTtcbiAgICAgICAgdmFyIHJpZ2h0Q2FtZXJhID0gdGhpcy5fcmlnaHRDYW1lcmE7XG5cbiAgICAgICAgbGVmdENhbWVyYS5wcm9qZWN0aW9uTWF0cml4LnNldEFycmF5KGZyYW1lRGF0YS5sZWZ0UHJvamVjdGlvbk1hdHJpeCk7XG4gICAgICAgIGxlZnRDYW1lcmEuZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICBsZWZ0Q2FtZXJhLnZpZXdNYXRyaXguc2V0QXJyYXkoZnJhbWVEYXRhLmxlZnRWaWV3TWF0cml4KTtcbiAgICAgICAgbGVmdENhbWVyYS5zZXRWaWV3TWF0cml4KGxlZnRDYW1lcmEudmlld01hdHJpeCk7XG5cbiAgICAgICAgcmlnaHRDYW1lcmEucHJvamVjdGlvbk1hdHJpeC5zZXRBcnJheShmcmFtZURhdGEucmlnaHRQcm9qZWN0aW9uTWF0cml4KTtcbiAgICAgICAgcmlnaHRDYW1lcmEuZGVjb21wb3NlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgICByaWdodENhbWVyYS52aWV3TWF0cml4LnNldEFycmF5KGZyYW1lRGF0YS5yaWdodFZpZXdNYXRyaXgpO1xuICAgICAgICByaWdodENhbWVyYS5zZXRWaWV3TWF0cml4KHJpZ2h0Q2FtZXJhLnZpZXdNYXRyaXgpO1xuXG4gICAgICAgIGlmIChwYXJlbnROb2RlICYmIHBhcmVudE5vZGUud29ybGRUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGlmIChwYXJlbnROb2RlLnRyYW5zZm9ybU5lZWRzVXBkYXRlKCkpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vZGUgdHJhbnNmb3JtIGlzIG5vdCB1cGRhdGVkJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZWZ0Q2FtZXJhLndvcmxkVHJhbnNmb3JtLm11bHRpcGx5TGVmdChwYXJlbnROb2RlLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIGxlZnRDYW1lcmEuZGVjb21wb3NlV29ybGRUcmFuc2Zvcm0oKTtcbiAgICAgICAgICAgIHJpZ2h0Q2FtZXJhLndvcmxkVHJhbnNmb3JtLm11bHRpcGx5TGVmdChwYXJlbnROb2RlLndvcmxkVHJhbnNmb3JtKTtcbiAgICAgICAgICAgIHJpZ2h0Q2FtZXJhLmRlY29tcG9zZVdvcmxkVHJhbnNmb3JtKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0TGVmdENhbWVyYTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGVmdENhbWVyYTtcbiAgICB9LFxuXG4gICAgZ2V0UmlnaHRDYW1lcmE6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JpZ2h0Q2FtZXJhO1xuICAgIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBTdGVyZW9DYW1lcmE7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAvVXNlcnMvbGFuZy9EZXZlbG9wL2NsYXlnbC9zcmMvdnIvU3RlcmVvQ2FtZXJhLmpzXG4vLyBtb2R1bGUgaWQgPSAxOTZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///196\n");

/***/ }),
/* 197 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__SSAOPass__ = __webpack_require__(198);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__SSRPass__ = __webpack_require__(200);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__ = __webpack_require__(202);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__composite_js__ = __webpack_require__(203);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__DOF_glsl_js__ = __webpack_require__(204);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__temporalBlend_glsl_js__ = __webpack_require__(205);\n\n\n\n\n\n\n\n\n\n\n\nvar GBuffer = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"o\" /* deferred */].GBuffer;\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_5__DOF_glsl_js__[\"a\" /* default */]);\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_6__temporalBlend_glsl_js__[\"a\" /* default */]);\n\nvar commonOutputs = {\n    color: {\n        parameters: {\n            width: function (renderer) {\n                return renderer.getWidth();\n            },\n            height: function (renderer) {\n                return renderer.getHeight();\n            }\n        }\n    }\n};\n\nvar FINAL_NODES_CHAIN = ['composite', 'FXAA'];\n\nfunction EffectCompositor() {\n\n    this._gBufferPass = new GBuffer({\n        renderTransparent: true,\n        enableTargetTexture3: false,\n        enableTargetTexture4: true\n    });\n\n    this._compositor = Object(__WEBPACK_IMPORTED_MODULE_0_claygl__[\"n\" /* createCompositor */])(__WEBPACK_IMPORTED_MODULE_4__composite_js__[\"a\" /* default */]);\n\n    var sourceNode = this._compositor.getNodeByName('source');\n    var cocNode = this._compositor.getNodeByName('coc');\n\n    this._sourceNode = sourceNode;\n    this._cocNode = cocNode;\n    this._compositeNode = this._compositor.getNodeByName('composite');\n    this._fxaaNode = this._compositor.getNodeByName('FXAA');\n\n    this._dofBlurNodes = [\n        'dof_blur_far_1', 'dof_blur_far_2', 'dof_blur_far_3', 'dof_blur_far_4', 'dof_blur_far_final',\n        'dof_blur_near_1', 'dof_blur_near_2', 'dof_blur_near_3', 'dof_blur_near_4', 'dof_blur_near_final'\n    ].map(function (name) {\n        return this._compositor.getNodeByName(name);\n    }, this);\n\n    this._dofFarFieldNode = this._compositor.getNodeByName('dof_separate_far');\n    this._dofNearFieldNode = this._compositor.getNodeByName('dof_separate_near');\n    this._dofCompositeNode = this._compositor.getNodeByName('dof_composite');\n\n    this._dofBlurKernel = null;\n    this._dofBlurKernelSize = new Float32Array(0);\n\n    this._finalNodesChain = FINAL_NODES_CHAIN.map(function (name) {\n        return this._compositor.getNodeByName(name);\n    }, this);\n\n    var gBufferObj = {\n        normalTexture: this._gBufferPass.getTargetTexture1(),\n        depthTexture: this._gBufferPass.getTargetTexture2(),\n        albedoTexture: this._gBufferPass.getTargetTexture3(),\n        velocityTexture: this._gBufferPass.getTargetTexture4()\n    };\n    this._ssaoPass = new __WEBPACK_IMPORTED_MODULE_1__SSAOPass__[\"a\" /* default */](gBufferObj);\n    this._ssrPass = new __WEBPACK_IMPORTED_MODULE_2__SSRPass__[\"a\" /* default */](gBufferObj);\n}\n\nEffectCompositor.prototype.resize = function (width, height, dpr) {\n    dpr = dpr || 1;\n    width = width * dpr;\n    height = height * dpr;\n    this._gBufferPass.resize(width, height);\n};\n\nEffectCompositor.prototype._ifRenderNormalPass = function () {\n    // return this._enableSSAO || this._enableEdge || this._enableSSR;\n    return true;\n};\n\nEffectCompositor.prototype._getPrevNode = function (node) {\n    var idx = FINAL_NODES_CHAIN.indexOf(node.name) - 1;\n    var prevNode = this._finalNodesChain[idx];\n    while (prevNode && !this._compositor.getNodeByName(prevNode.name)) {\n        idx -= 1;\n        prevNode = this._finalNodesChain[idx];\n    }\n    return prevNode;\n};\nEffectCompositor.prototype._getNextNode = function (node) {\n    var idx = FINAL_NODES_CHAIN.indexOf(node.name) + 1;\n    var nextNode = this._finalNodesChain[idx];\n    while (nextNode && !this._compositor.getNodeByName(nextNode.name)) {\n        idx += 1;\n        nextNode = this._finalNodesChain[idx];\n    }\n    return nextNode;\n};\nEffectCompositor.prototype._addChainNode = function (node) {\n    var prevNode = this._getPrevNode(node);\n    var nextNode = this._getNextNode(node);\n    if (!prevNode) {\n        return;\n    }\n\n    prevNode.outputs = commonOutputs;\n    node.inputs.texture = prevNode.name;\n    if (nextNode) {\n        node.outputs = commonOutputs;\n        nextNode.inputs.texture = node.name;\n    }\n    else {\n        node.outputs = null;\n    }\n    this._compositor.addNode(node);\n};\nEffectCompositor.prototype._removeChainNode = function (node) {\n    var prevNode = this._getPrevNode(node);\n    var nextNode = this._getNextNode(node);\n    if (!prevNode) {\n        return;\n    }\n\n    if (nextNode) {\n        prevNode.outputs = commonOutputs;\n        nextNode.inputs.texture = prevNode.name;\n    }\n    else {\n        prevNode.outputs = null;\n    }\n    this._compositor.removeNode(node);\n};\n/**\n * Update normal\n */\nEffectCompositor.prototype.updateGBuffer = function (renderer, scene, camera, frame) {\n    if (this._ifRenderNormalPass()) {\n        this._gBufferPass.update(renderer, scene, camera);\n    }\n};\n\n/**\n * Render SSAO after render the scene, before compositing\n */\nEffectCompositor.prototype.updateSSAO = function (renderer, scene, camera, frame) {\n    this._ssaoPass.update(renderer, camera, frame);\n};\n\nEffectCompositor.prototype.updateSSR = function (renderer, scene, camera, sourceTexture, reflectionSourceTexture, frame) {\n    this._ssrPass.setSSAOTexture(\n        this._enableSSAO ? this._ssaoPass.getTargetTexture() : null\n    );\n    this._ssrPass.update(renderer, camera, sourceTexture, reflectionSourceTexture, frame);\n};\n\n/**\n * Enable SSAO effect\n */\nEffectCompositor.prototype.enableSSAO = function () {\n    this._enableSSAO = true;\n};\n\n/**\n * Disable SSAO effect\n */\nEffectCompositor.prototype.disableSSAO = function () {\n    this._enableSSAO = false;\n};\n\nEffectCompositor.prototype.enableVelocityBuffer = function () {\n    this._gBufferPass.enableTargetTexture4 = true;\n};\nEffectCompositor.prototype.disableVelocityBuffer = function () {\n    this._gBufferPass.enableTargetTexture4 = false;\n};\n\n/**\n * Enable SSR effect\n */\nEffectCompositor.prototype.enableSSR = function () {\n    this._enableSSR = true;\n};\n/**\n * Disable SSR effect\n */\nEffectCompositor.prototype.disableSSR = function () {\n    this._enableSSR = false;\n};\n\n/**\n * Render SSAO after render the scene, before compositing\n */\nEffectCompositor.prototype.getSSAOTexture = function () {\n    return this._ssaoPass.getTargetTexture();\n};\n\nEffectCompositor.prototype.getSSRTexture = function () {\n    return this._ssrPass.getTargetTexture();\n};\n\n\nEffectCompositor.prototype.getVelocityTexture = function () {\n    return this._gBufferPass.getTargetTexture4();\n};\nEffectCompositor.prototype.getDepthTexture = function () {\n    return this._gBufferPass.getTargetTexture2();\n};\n\n/**\n * Disable fxaa effect\n */\nEffectCompositor.prototype.disableFXAA = function () {\n    this._removeChainNode(this._fxaaNode);\n};\n\n/**\n * Enable fxaa effect\n */\nEffectCompositor.prototype.enableFXAA = function () {\n    this._addChainNode(this._fxaaNode);\n};\n\n/**\n * Enable bloom effect\n */\nEffectCompositor.prototype.enableBloom = function () {\n    this._compositeNode.inputs.bloom = 'bloom_composite';\n    this._compositor.dirty();\n};\n\n/**\n * Disable bloom effect\n */\nEffectCompositor.prototype.disableBloom = function () {\n    this._compositeNode.inputs.bloom = null;\n    this._compositor.dirty();\n};\n\n/**\n * Enable depth of field effect\n */\nEffectCompositor.prototype.enableDOF = function () {\n    this._compositeNode.inputs.texture = 'dof_composite';\n    this._compositor.dirty();\n};\n/**\n * Disable depth of field effect\n */\nEffectCompositor.prototype.disableDOF = function () {\n    this._compositeNode.inputs.texture = 'source';\n    this._compositor.dirty();\n};\n\n/**\n * Enable color correction\n */\nEffectCompositor.prototype.enableColorCorrection = function () {\n    this._compositeNode.define('COLOR_CORRECTION');\n    this._enableColorCorrection = true;\n};\n/**\n * Disable color correction\n */\nEffectCompositor.prototype.disableColorCorrection = function () {\n    this._compositeNode.undefine('COLOR_CORRECTION');\n    this._enableColorCorrection = false;\n};\n\n/**\n * Enable edge detection\n */\nEffectCompositor.prototype.enableEdge = function () {\n    this._enableEdge = true;\n};\n\n/**\n * Disable edge detection\n */\nEffectCompositor.prototype.disableEdge = function () {\n    this._enableEdge = false;\n};\n\n/**\n * Set bloom intensity\n * @param {number} value\n */\nEffectCompositor.prototype.setBloomIntensity = function (value) {\n    if (value == null) {\n        return;\n    }\n    this._compositeNode.setParameter('bloomIntensity', value);\n};\n\nEffectCompositor.prototype.setSSAOParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'quality':\n            // PENDING\n            var kernelSize = ({\n                low: 6,\n                medium: 12,\n                high: 32,\n                ultra: 62\n            })[value] || 12;\n            this._ssaoPass.setParameter('kernelSize', kernelSize);\n            break;\n        case 'radius':\n            this._ssaoPass.setParameter(name, value);\n            this._ssaoPass.setParameter('bias', value / 50);\n            break;\n        case 'intensity':\n        case 'temporalFilter':\n            this._ssaoPass.setParameter(name, value);\n            break;\n    }\n};\n\nEffectCompositor.prototype.setDOFParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'focalDistance':\n        case 'focalRange':\n        case 'aperture':\n            this._cocNode.setParameter(name, value);\n            break;\n        case 'blurRadius':\n            this._dofBlurRadius = value;\n            break;\n        // case 'quality':\n        //     this._dofBlurKernel = poissonKernel[value] || poissonKernel.medium;\n        //     var kernelSize = this._dofBlurKernel.length / 2;\n        //     for (var i = 0; i < this._dofBlurNodes.length; i++) {\n        //         this._dofBlurNodes[i].define('POISSON_KERNEL_SIZE', kernelSize);\n        //     }\n        //     break;\n    }\n};\n\nEffectCompositor.prototype.setSSRParameter = function (name, value) {\n    if (value == null) {\n        return;\n    }\n    switch (name) {\n        case 'quality':\n            // PENDING\n            var maxIteration = ({\n                low: 10,\n                medium: 15,\n                high: 30,\n                ultra: 80\n            })[value] || 20;\n            var pixelStride = ({\n                low: 32,\n                medium: 16,\n                high: 8,\n                ultra: 4\n            })[value] || 16;\n            this._ssrPass.setParameter('maxIteration', maxIteration);\n            this._ssrPass.setParameter('pixelStride', pixelStride);\n            break;\n        case 'maxRoughness':\n            this._ssrPass.setParameter('minGlossiness', Math.max(Math.min(1.0 - value, 1.0), 0.0));\n            break;\n        default:\n            console.warn('Unkown SSR parameter ' + name);\n    }\n};\n\n/**\n * Set color of edge\n */\nEffectCompositor.prototype.setEdgeColor = function (value) {\n    // if (value == null) {\n    //     return;\n    // }\n    // this._edgePass.setParameter('edgeColor', value);\n};\n\nEffectCompositor.prototype.setExposure = function (value) {\n    if (value == null) {\n        return;\n    }\n    this._compositeNode.setParameter('exposure', Math.pow(2, value));\n};\n\nEffectCompositor.prototype.setColorLookupTexture = function (image, api) {\n    // this._compositeNode.pass.material.setTextureImage('lut', this._enableColorCorrection ? image : 'none', api, {\n    //     minFilter: Texture.NEAREST,\n    //     magFilter: Texture.NEAREST,\n    //     flipY: false\n    // });\n};\nEffectCompositor.prototype.setColorCorrection = function (type, value) {\n    this._compositeNode.setParameter(type, value);\n};\n\nEffectCompositor.prototype.composite = function (renderer, scene, camera, sourceTexture, depthTexture, frame) {\n    this._sourceNode.texture = sourceTexture;\n\n    this._cocNode.setParameter('depth', depthTexture);\n\n    // var blurKernel = this._dofBlurKernel;\n\n    var maxCoc = this._dofBlurRadius || 10;\n    maxCoc /= renderer.getHeight();\n    // var minCoc = 1 / renderer.getHeight();\n    var minCoc = 0;\n    // var jitter = Math.random();\n    for (var i = 0; i < this._dofBlurNodes.length; i++) {\n        var blurNode = this._dofBlurNodes[i];\n        blurNode.setParameter('kernel1', __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__[\"a\" /* default */].component1);\n        blurNode.setParameter('kernel2', __WEBPACK_IMPORTED_MODULE_3__circularSeparateKernel__[\"a\" /* default */].component2);\n        blurNode.setParameter('maxCoc', maxCoc);\n        blurNode.setParameter('minCoc', minCoc);\n    }\n    this._cocNode.setParameter('maxCoc', maxCoc);\n    this._dofCompositeNode.setParameter('maxCoc', maxCoc);\n    this._dofCompositeNode.setParameter('minCoc', minCoc);\n    this._dofFarFieldNode.setParameter('minCoc', minCoc / maxCoc);\n    this._dofNearFieldNode.setParameter('minCoc', minCoc / maxCoc);\n\n    this._cocNode.setParameter('zNear', camera.near);\n    this._cocNode.setParameter('zFar', camera.far);\n\n    this._compositor.render(renderer);\n};\n\nEffectCompositor.prototype.isSSRFinished = function (frame) {\n    return this._ssrPass ? this._ssrPass.isFinished(frame) : true;\n};\n\nEffectCompositor.prototype.isSSAOFinished = function (frame) {\n    return this._ssaoPass ? this._ssaoPass.isFinished(frame) : true;\n};\n\nEffectCompositor.prototype.isSSREnabled = function () {\n    return this._enableSSR;\n};\n\nEffectCompositor.prototype.dispose = function (renderer) {\n    this._compositor.dispose(renderer);\n\n    this._gBufferPass.dispose(renderer);\n    this._ssaoPass.dispose(renderer);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (EffectCompositor);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRWZmZWN0Q29tcG9zaXRvci5qcz84ZmQ3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNoYWRlciwgVGV4dHVyZTJELCBUZXh0dXJlLCBGcmFtZUJ1ZmZlciwgY3JlYXRlQ29tcG9zaXRvciwgZGVmZXJyZWQsIHNoYWRlciB9IGZyb20gJ2NsYXlnbCc7XG5cbmltcG9ydCBTU0FPUGFzcyBmcm9tICcuL1NTQU9QYXNzJztcbmltcG9ydCBTU1JQYXNzIGZyb20gJy4vU1NSUGFzcyc7XG5pbXBvcnQgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbCBmcm9tICcuL2NpcmN1bGFyU2VwYXJhdGVLZXJuZWwnO1xuXG5pbXBvcnQgZWZmZWN0SnNvbiBmcm9tICcuL2NvbXBvc2l0ZS5qcyc7XG5cbmltcG9ydCBkb2ZDb2RlIGZyb20gJy4vRE9GLmdsc2wuanMnO1xuaW1wb3J0IHRlbXBvcmFsQmxlbmRDb2RlIGZyb20gJy4vdGVtcG9yYWxCbGVuZC5nbHNsLmpzJztcblxudmFyIEdCdWZmZXIgPSBkZWZlcnJlZC5HQnVmZmVyO1xuXG5TaGFkZXIuaW1wb3J0KGRvZkNvZGUpO1xuXG5TaGFkZXIuaW1wb3J0KHRlbXBvcmFsQmxlbmRDb2RlKTtcblxudmFyIGNvbW1vbk91dHB1dHMgPSB7XG4gICAgY29sb3I6IHtcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgd2lkdGg6IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgICAgICAgICAgICAgIHJldHVybiByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGhlaWdodDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyLmdldEhlaWdodCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIEZJTkFMX05PREVTX0NIQUlOID0gWydjb21wb3NpdGUnLCAnRlhBQSddO1xuXG5mdW5jdGlvbiBFZmZlY3RDb21wb3NpdG9yKCkge1xuXG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MgPSBuZXcgR0J1ZmZlcih7XG4gICAgICAgIHJlbmRlclRyYW5zcGFyZW50OiB0cnVlLFxuICAgICAgICBlbmFibGVUYXJnZXRUZXh0dXJlMzogZmFsc2UsXG4gICAgICAgIGVuYWJsZVRhcmdldFRleHR1cmU0OiB0cnVlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jb21wb3NpdG9yID0gY3JlYXRlQ29tcG9zaXRvcihlZmZlY3RKc29uKTtcblxuICAgIHZhciBzb3VyY2VOb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdzb3VyY2UnKTtcbiAgICB2YXIgY29jTm9kZSA9IHRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZSgnY29jJyk7XG5cbiAgICB0aGlzLl9zb3VyY2VOb2RlID0gc291cmNlTm9kZTtcbiAgICB0aGlzLl9jb2NOb2RlID0gY29jTm9kZTtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdjb21wb3NpdGUnKTtcbiAgICB0aGlzLl9meGFhTm9kZSA9IHRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZSgnRlhBQScpO1xuXG4gICAgdGhpcy5fZG9mQmx1ck5vZGVzID0gW1xuICAgICAgICAnZG9mX2JsdXJfZmFyXzEnLCAnZG9mX2JsdXJfZmFyXzInLCAnZG9mX2JsdXJfZmFyXzMnLCAnZG9mX2JsdXJfZmFyXzQnLCAnZG9mX2JsdXJfZmFyX2ZpbmFsJyxcbiAgICAgICAgJ2RvZl9ibHVyX25lYXJfMScsICdkb2ZfYmx1cl9uZWFyXzInLCAnZG9mX2JsdXJfbmVhcl8zJywgJ2RvZl9ibHVyX25lYXJfNCcsICdkb2ZfYmx1cl9uZWFyX2ZpbmFsJ1xuICAgIF0ubWFwKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUobmFtZSk7XG4gICAgfSwgdGhpcyk7XG5cbiAgICB0aGlzLl9kb2ZGYXJGaWVsZE5vZGUgPSB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUoJ2RvZl9zZXBhcmF0ZV9mYXInKTtcbiAgICB0aGlzLl9kb2ZOZWFyRmllbGROb2RlID0gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKCdkb2Zfc2VwYXJhdGVfbmVhcicpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUgPSB0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUoJ2RvZl9jb21wb3NpdGUnKTtcblxuICAgIHRoaXMuX2RvZkJsdXJLZXJuZWwgPSBudWxsO1xuICAgIHRoaXMuX2RvZkJsdXJLZXJuZWxTaXplID0gbmV3IEZsb2F0MzJBcnJheSgwKTtcblxuICAgIHRoaXMuX2ZpbmFsTm9kZXNDaGFpbiA9IEZJTkFMX05PREVTX0NIQUlOLm1hcChmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcG9zaXRvci5nZXROb2RlQnlOYW1lKG5hbWUpO1xuICAgIH0sIHRoaXMpO1xuXG4gICAgdmFyIGdCdWZmZXJPYmogPSB7XG4gICAgICAgIG5vcm1hbFRleHR1cmU6IHRoaXMuX2dCdWZmZXJQYXNzLmdldFRhcmdldFRleHR1cmUxKCksXG4gICAgICAgIGRlcHRoVGV4dHVyZTogdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTIoKSxcbiAgICAgICAgYWxiZWRvVGV4dHVyZTogdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTMoKSxcbiAgICAgICAgdmVsb2NpdHlUZXh0dXJlOiB0aGlzLl9nQnVmZmVyUGFzcy5nZXRUYXJnZXRUZXh0dXJlNCgpXG4gICAgfTtcbiAgICB0aGlzLl9zc2FvUGFzcyA9IG5ldyBTU0FPUGFzcyhnQnVmZmVyT2JqKTtcbiAgICB0aGlzLl9zc3JQYXNzID0gbmV3IFNTUlBhc3MoZ0J1ZmZlck9iaik7XG59XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnJlc2l6ZSA9IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0LCBkcHIpIHtcbiAgICBkcHIgPSBkcHIgfHwgMTtcbiAgICB3aWR0aCA9IHdpZHRoICogZHByO1xuICAgIGhlaWdodCA9IGhlaWdodCAqIGRwcjtcbiAgICB0aGlzLl9nQnVmZmVyUGFzcy5yZXNpemUod2lkdGgsIGhlaWdodCk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5faWZSZW5kZXJOb3JtYWxQYXNzID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIHJldHVybiB0aGlzLl9lbmFibGVTU0FPIHx8IHRoaXMuX2VuYWJsZUVkZ2UgfHwgdGhpcy5fZW5hYmxlU1NSO1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuX2dldFByZXZOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgaWR4ID0gRklOQUxfTk9ERVNfQ0hBSU4uaW5kZXhPZihub2RlLm5hbWUpIC0gMTtcbiAgICB2YXIgcHJldk5vZGUgPSB0aGlzLl9maW5hbE5vZGVzQ2hhaW5baWR4XTtcbiAgICB3aGlsZSAocHJldk5vZGUgJiYgIXRoaXMuX2NvbXBvc2l0b3IuZ2V0Tm9kZUJ5TmFtZShwcmV2Tm9kZS5uYW1lKSkge1xuICAgICAgICBpZHggLT0gMTtcbiAgICAgICAgcHJldk5vZGUgPSB0aGlzLl9maW5hbE5vZGVzQ2hhaW5baWR4XTtcbiAgICB9XG4gICAgcmV0dXJuIHByZXZOb2RlO1xufTtcbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLl9nZXROZXh0Tm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIGlkeCA9IEZJTkFMX05PREVTX0NIQUlOLmluZGV4T2Yobm9kZS5uYW1lKSArIDE7XG4gICAgdmFyIG5leHROb2RlID0gdGhpcy5fZmluYWxOb2Rlc0NoYWluW2lkeF07XG4gICAgd2hpbGUgKG5leHROb2RlICYmICF0aGlzLl9jb21wb3NpdG9yLmdldE5vZGVCeU5hbWUobmV4dE5vZGUubmFtZSkpIHtcbiAgICAgICAgaWR4ICs9IDE7XG4gICAgICAgIG5leHROb2RlID0gdGhpcy5fZmluYWxOb2Rlc0NoYWluW2lkeF07XG4gICAgfVxuICAgIHJldHVybiBuZXh0Tm9kZTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5fYWRkQ2hhaW5Ob2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB2YXIgcHJldk5vZGUgPSB0aGlzLl9nZXRQcmV2Tm9kZShub2RlKTtcbiAgICB2YXIgbmV4dE5vZGUgPSB0aGlzLl9nZXROZXh0Tm9kZShub2RlKTtcbiAgICBpZiAoIXByZXZOb2RlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBwcmV2Tm9kZS5vdXRwdXRzID0gY29tbW9uT3V0cHV0cztcbiAgICBub2RlLmlucHV0cy50ZXh0dXJlID0gcHJldk5vZGUubmFtZTtcbiAgICBpZiAobmV4dE5vZGUpIHtcbiAgICAgICAgbm9kZS5vdXRwdXRzID0gY29tbW9uT3V0cHV0cztcbiAgICAgICAgbmV4dE5vZGUuaW5wdXRzLnRleHR1cmUgPSBub2RlLm5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBub2RlLm91dHB1dHMgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9jb21wb3NpdG9yLmFkZE5vZGUobm9kZSk7XG59O1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuX3JlbW92ZUNoYWluTm9kZSA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgdmFyIHByZXZOb2RlID0gdGhpcy5fZ2V0UHJldk5vZGUobm9kZSk7XG4gICAgdmFyIG5leHROb2RlID0gdGhpcy5fZ2V0TmV4dE5vZGUobm9kZSk7XG4gICAgaWYgKCFwcmV2Tm9kZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5leHROb2RlKSB7XG4gICAgICAgIHByZXZOb2RlLm91dHB1dHMgPSBjb21tb25PdXRwdXRzO1xuICAgICAgICBuZXh0Tm9kZS5pbnB1dHMudGV4dHVyZSA9IHByZXZOb2RlLm5hbWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcmV2Tm9kZS5vdXRwdXRzID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5fY29tcG9zaXRvci5yZW1vdmVOb2RlKG5vZGUpO1xufTtcbi8qKlxuICogVXBkYXRlIG5vcm1hbFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS51cGRhdGVHQnVmZmVyID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBzY2VuZSwgY2FtZXJhLCBmcmFtZSkge1xuICAgIGlmICh0aGlzLl9pZlJlbmRlck5vcm1hbFBhc3MoKSkge1xuICAgICAgICB0aGlzLl9nQnVmZmVyUGFzcy51cGRhdGUocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEpO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmVuZGVyIFNTQU8gYWZ0ZXIgcmVuZGVyIHRoZSBzY2VuZSwgYmVmb3JlIGNvbXBvc2l0aW5nXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnVwZGF0ZVNTQU8gPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIGZyYW1lKSB7XG4gICAgdGhpcy5fc3Nhb1Bhc3MudXBkYXRlKHJlbmRlcmVyLCBjYW1lcmEsIGZyYW1lKTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnVwZGF0ZVNTUiA9IGZ1bmN0aW9uIChyZW5kZXJlciwgc2NlbmUsIGNhbWVyYSwgc291cmNlVGV4dHVyZSwgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUsIGZyYW1lKSB7XG4gICAgdGhpcy5fc3NyUGFzcy5zZXRTU0FPVGV4dHVyZShcbiAgICAgICAgdGhpcy5fZW5hYmxlU1NBTyA/IHRoaXMuX3NzYW9QYXNzLmdldFRhcmdldFRleHR1cmUoKSA6IG51bGxcbiAgICApO1xuICAgIHRoaXMuX3NzclBhc3MudXBkYXRlKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleHR1cmUsIHJlZmxlY3Rpb25Tb3VyY2VUZXh0dXJlLCBmcmFtZSk7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBTU0FPIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVTU0FPID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTQU8gPSB0cnVlO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIFNTQU8gZWZmZWN0XG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc2FibGVTU0FPID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTQU8gPSBmYWxzZTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZVZlbG9jaXR5QnVmZmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2dCdWZmZXJQYXNzLmVuYWJsZVRhcmdldFRleHR1cmU0ID0gdHJ1ZTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlVmVsb2NpdHlCdWZmZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MuZW5hYmxlVGFyZ2V0VGV4dHVyZTQgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogRW5hYmxlIFNTUiBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZW5hYmxlU1NSID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZVNTUiA9IHRydWU7XG59O1xuLyoqXG4gKiBEaXNhYmxlIFNTUiBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZGlzYWJsZVNTUiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9lbmFibGVTU1IgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogUmVuZGVyIFNTQU8gYWZ0ZXIgcmVuZGVyIHRoZSBzY2VuZSwgYmVmb3JlIGNvbXBvc2l0aW5nXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmdldFNTQU9UZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zc2FvUGFzcy5nZXRUYXJnZXRUZXh0dXJlKCk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5nZXRTU1JUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9zc3JQYXNzLmdldFRhcmdldFRleHR1cmUoKTtcbn07XG5cblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZ2V0VmVsb2NpdHlUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl9nQnVmZmVyUGFzcy5nZXRUYXJnZXRUZXh0dXJlNCgpO1xufTtcbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmdldERlcHRoVGV4dHVyZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ0J1ZmZlclBhc3MuZ2V0VGFyZ2V0VGV4dHVyZTIoKTtcbn07XG5cbi8qKlxuICogRGlzYWJsZSBmeGFhIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlRlhBQSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yZW1vdmVDaGFpbk5vZGUodGhpcy5fZnhhYU5vZGUpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgZnhhYSBlZmZlY3RcbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZW5hYmxlRlhBQSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9hZGRDaGFpbk5vZGUodGhpcy5fZnhhYU5vZGUpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgYmxvb20gZWZmZWN0XG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZUJsb29tID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuaW5wdXRzLmJsb29tID0gJ2Jsb29tX2NvbXBvc2l0ZSc7XG4gICAgdGhpcy5fY29tcG9zaXRvci5kaXJ0eSgpO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIGJsb29tIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlQmxvb20gPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY29tcG9zaXRlTm9kZS5pbnB1dHMuYmxvb20gPSBudWxsO1xuICAgIHRoaXMuX2NvbXBvc2l0b3IuZGlydHkoKTtcbn07XG5cbi8qKlxuICogRW5hYmxlIGRlcHRoIG9mIGZpZWxkIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVET0YgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fY29tcG9zaXRlTm9kZS5pbnB1dHMudGV4dHVyZSA9ICdkb2ZfY29tcG9zaXRlJztcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpcnR5KCk7XG59O1xuLyoqXG4gKiBEaXNhYmxlIGRlcHRoIG9mIGZpZWxkIGVmZmVjdFxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5kaXNhYmxlRE9GID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuaW5wdXRzLnRleHR1cmUgPSAnc291cmNlJztcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpcnR5KCk7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBjb2xvciBjb3JyZWN0aW9uXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmVuYWJsZUNvbG9yQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLmRlZmluZSgnQ09MT1JfQ09SUkVDVElPTicpO1xuICAgIHRoaXMuX2VuYWJsZUNvbG9yQ29ycmVjdGlvbiA9IHRydWU7XG59O1xuLyoqXG4gKiBEaXNhYmxlIGNvbG9yIGNvcnJlY3Rpb25cbiAqL1xuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuZGlzYWJsZUNvbG9yQ29ycmVjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnVuZGVmaW5lKCdDT0xPUl9DT1JSRUNUSU9OJyk7XG4gICAgdGhpcy5fZW5hYmxlQ29sb3JDb3JyZWN0aW9uID0gZmFsc2U7XG59O1xuXG4vKipcbiAqIEVuYWJsZSBlZGdlIGRldGVjdGlvblxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5lbmFibGVFZGdlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZUVkZ2UgPSB0cnVlO1xufTtcblxuLyoqXG4gKiBEaXNhYmxlIGVkZ2UgZGV0ZWN0aW9uXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc2FibGVFZGdlID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2VuYWJsZUVkZ2UgPSBmYWxzZTtcbn07XG5cbi8qKlxuICogU2V0IGJsb29tIGludGVuc2l0eVxuICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gKi9cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLnNldEJsb29tSW50ZW5zaXR5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnNldFBhcmFtZXRlcignYmxvb21JbnRlbnNpdHknLCB2YWx1ZSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRTU0FPUGFyYW1ldGVyID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBzd2l0Y2ggKG5hbWUpIHtcbiAgICAgICAgY2FzZSAncXVhbGl0eSc6XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICB2YXIga2VybmVsU2l6ZSA9ICh7XG4gICAgICAgICAgICAgICAgbG93OiA2LFxuICAgICAgICAgICAgICAgIG1lZGl1bTogMTIsXG4gICAgICAgICAgICAgICAgaGlnaDogMzIsXG4gICAgICAgICAgICAgICAgdWx0cmE6IDYyXG4gICAgICAgICAgICB9KVt2YWx1ZV0gfHwgMTI7XG4gICAgICAgICAgICB0aGlzLl9zc2FvUGFzcy5zZXRQYXJhbWV0ZXIoJ2tlcm5lbFNpemUnLCBrZXJuZWxTaXplKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdyYWRpdXMnOlxuICAgICAgICAgICAgdGhpcy5fc3Nhb1Bhc3Muc2V0UGFyYW1ldGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFBhcmFtZXRlcignYmlhcycsIHZhbHVlIC8gNTApO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ2ludGVuc2l0eSc6XG4gICAgICAgIGNhc2UgJ3RlbXBvcmFsRmlsdGVyJzpcbiAgICAgICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFBhcmFtZXRlcihuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICB9XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRET0ZQYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICBjYXNlICdmb2NhbERpc3RhbmNlJzpcbiAgICAgICAgY2FzZSAnZm9jYWxSYW5nZSc6XG4gICAgICAgIGNhc2UgJ2FwZXJ0dXJlJzpcbiAgICAgICAgICAgIHRoaXMuX2NvY05vZGUuc2V0UGFyYW1ldGVyKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdibHVyUmFkaXVzJzpcbiAgICAgICAgICAgIHRoaXMuX2RvZkJsdXJSYWRpdXMgPSB2YWx1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAvLyBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgLy8gICAgIHRoaXMuX2RvZkJsdXJLZXJuZWwgPSBwb2lzc29uS2VybmVsW3ZhbHVlXSB8fCBwb2lzc29uS2VybmVsLm1lZGl1bTtcbiAgICAgICAgLy8gICAgIHZhciBrZXJuZWxTaXplID0gdGhpcy5fZG9mQmx1cktlcm5lbC5sZW5ndGggLyAyO1xuICAgICAgICAvLyAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLl9kb2ZCbHVyTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLl9kb2ZCbHVyTm9kZXNbaV0uZGVmaW5lKCdQT0lTU09OX0tFUk5FTF9TSVpFJywga2VybmVsU2l6ZSk7XG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vICAgICBicmVhaztcbiAgICB9XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRTU1JQYXJhbWV0ZXIgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICBjYXNlICdxdWFsaXR5JzpcbiAgICAgICAgICAgIC8vIFBFTkRJTkdcbiAgICAgICAgICAgIHZhciBtYXhJdGVyYXRpb24gPSAoe1xuICAgICAgICAgICAgICAgIGxvdzogMTAsXG4gICAgICAgICAgICAgICAgbWVkaXVtOiAxNSxcbiAgICAgICAgICAgICAgICBoaWdoOiAzMCxcbiAgICAgICAgICAgICAgICB1bHRyYTogODBcbiAgICAgICAgICAgIH0pW3ZhbHVlXSB8fCAyMDtcbiAgICAgICAgICAgIHZhciBwaXhlbFN0cmlkZSA9ICh7XG4gICAgICAgICAgICAgICAgbG93OiAzMixcbiAgICAgICAgICAgICAgICBtZWRpdW06IDE2LFxuICAgICAgICAgICAgICAgIGhpZ2g6IDgsXG4gICAgICAgICAgICAgICAgdWx0cmE6IDRcbiAgICAgICAgICAgIH0pW3ZhbHVlXSB8fCAxNjtcbiAgICAgICAgICAgIHRoaXMuX3NzclBhc3Muc2V0UGFyYW1ldGVyKCdtYXhJdGVyYXRpb24nLCBtYXhJdGVyYXRpb24pO1xuICAgICAgICAgICAgdGhpcy5fc3NyUGFzcy5zZXRQYXJhbWV0ZXIoJ3BpeGVsU3RyaWRlJywgcGl4ZWxTdHJpZGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ21heFJvdWdobmVzcyc6XG4gICAgICAgICAgICB0aGlzLl9zc3JQYXNzLnNldFBhcmFtZXRlcignbWluR2xvc3NpbmVzcycsIE1hdGgubWF4KE1hdGgubWluKDEuMCAtIHZhbHVlLCAxLjApLCAwLjApKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmtvd24gU1NSIHBhcmFtZXRlciAnICsgbmFtZSk7XG4gICAgfVxufTtcblxuLyoqXG4gKiBTZXQgY29sb3Igb2YgZWRnZVxuICovXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRFZGdlQ29sb3IgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAvLyBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIC8vICAgICByZXR1cm47XG4gICAgLy8gfVxuICAgIC8vIHRoaXMuX2VkZ2VQYXNzLnNldFBhcmFtZXRlcignZWRnZUNvbG9yJywgdmFsdWUpO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuc2V0RXhwb3N1cmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2NvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdleHBvc3VyZScsIE1hdGgucG93KDIsIHZhbHVlKSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRDb2xvckxvb2t1cFRleHR1cmUgPSBmdW5jdGlvbiAoaW1hZ2UsIGFwaSkge1xuICAgIC8vIHRoaXMuX2NvbXBvc2l0ZU5vZGUucGFzcy5tYXRlcmlhbC5zZXRUZXh0dXJlSW1hZ2UoJ2x1dCcsIHRoaXMuX2VuYWJsZUNvbG9yQ29ycmVjdGlvbiA/IGltYWdlIDogJ25vbmUnLCBhcGksIHtcbiAgICAvLyAgICAgbWluRmlsdGVyOiBUZXh0dXJlLk5FQVJFU1QsXG4gICAgLy8gICAgIG1hZ0ZpbHRlcjogVGV4dHVyZS5ORUFSRVNULFxuICAgIC8vICAgICBmbGlwWTogZmFsc2VcbiAgICAvLyB9KTtcbn07XG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5zZXRDb2xvckNvcnJlY3Rpb24gPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHtcbiAgICB0aGlzLl9jb21wb3NpdGVOb2RlLnNldFBhcmFtZXRlcih0eXBlLCB2YWx1ZSk7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5jb21wb3NpdGUgPSBmdW5jdGlvbiAocmVuZGVyZXIsIHNjZW5lLCBjYW1lcmEsIHNvdXJjZVRleHR1cmUsIGRlcHRoVGV4dHVyZSwgZnJhbWUpIHtcbiAgICB0aGlzLl9zb3VyY2VOb2RlLnRleHR1cmUgPSBzb3VyY2VUZXh0dXJlO1xuXG4gICAgdGhpcy5fY29jTm9kZS5zZXRQYXJhbWV0ZXIoJ2RlcHRoJywgZGVwdGhUZXh0dXJlKTtcblxuICAgIC8vIHZhciBibHVyS2VybmVsID0gdGhpcy5fZG9mQmx1cktlcm5lbDtcblxuICAgIHZhciBtYXhDb2MgPSB0aGlzLl9kb2ZCbHVyUmFkaXVzIHx8IDEwO1xuICAgIG1heENvYyAvPSByZW5kZXJlci5nZXRIZWlnaHQoKTtcbiAgICAvLyB2YXIgbWluQ29jID0gMSAvIHJlbmRlcmVyLmdldEhlaWdodCgpO1xuICAgIHZhciBtaW5Db2MgPSAwO1xuICAgIC8vIHZhciBqaXR0ZXIgPSBNYXRoLnJhbmRvbSgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5fZG9mQmx1ck5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBibHVyTm9kZSA9IHRoaXMuX2RvZkJsdXJOb2Rlc1tpXTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdrZXJuZWwxJywgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5jb21wb25lbnQxKTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdrZXJuZWwyJywgY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5jb21wb25lbnQyKTtcbiAgICAgICAgYmx1ck5vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgICAgICBibHVyTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyk7XG4gICAgfVxuICAgIHRoaXMuX2NvY05vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdtYXhDb2MnLCBtYXhDb2MpO1xuICAgIHRoaXMuX2RvZkNvbXBvc2l0ZU5vZGUuc2V0UGFyYW1ldGVyKCdtaW5Db2MnLCBtaW5Db2MpO1xuICAgIHRoaXMuX2RvZkZhckZpZWxkTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyAvIG1heENvYyk7XG4gICAgdGhpcy5fZG9mTmVhckZpZWxkTm9kZS5zZXRQYXJhbWV0ZXIoJ21pbkNvYycsIG1pbkNvYyAvIG1heENvYyk7XG5cbiAgICB0aGlzLl9jb2NOb2RlLnNldFBhcmFtZXRlcignek5lYXInLCBjYW1lcmEubmVhcik7XG4gICAgdGhpcy5fY29jTm9kZS5zZXRQYXJhbWV0ZXIoJ3pGYXInLCBjYW1lcmEuZmFyKTtcblxuICAgIHRoaXMuX2NvbXBvc2l0b3IucmVuZGVyKHJlbmRlcmVyKTtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmlzU1NSRmluaXNoZWQgPSBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3NyUGFzcyA/IHRoaXMuX3NzclBhc3MuaXNGaW5pc2hlZChmcmFtZSkgOiB0cnVlO1xufTtcblxuRWZmZWN0Q29tcG9zaXRvci5wcm90b3R5cGUuaXNTU0FPRmluaXNoZWQgPSBmdW5jdGlvbiAoZnJhbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3Nhb1Bhc3MgPyB0aGlzLl9zc2FvUGFzcy5pc0ZpbmlzaGVkKGZyYW1lKSA6IHRydWU7XG59O1xuXG5FZmZlY3RDb21wb3NpdG9yLnByb3RvdHlwZS5pc1NTUkVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VuYWJsZVNTUjtcbn07XG5cbkVmZmVjdENvbXBvc2l0b3IucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9jb21wb3NpdG9yLmRpc3Bvc2UocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZ0J1ZmZlclBhc3MuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fc3Nhb1Bhc3MuZGlzcG9zZShyZW5kZXJlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBFZmZlY3RDb21wb3NpdG9yO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRWZmZWN0Q29tcG9zaXRvci5qc1xuLy8gbW9kdWxlIGlkID0gMTk3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///197\n");

/***/ }),
/* 198 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__halton__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__SSAO_glsl_js__ = __webpack_require__(199);\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_2__SSAO_glsl_js__[\"a\" /* default */]);\n\nfunction generateNoiseData(size) {\n    var data = new Uint8Array(size * size * 4);\n    var n = 0;\n    var v3 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"k\" /* Vector3 */]();\n\n    for (var i = 0; i < size; i++) {\n        for (var j = 0; j < size; j++) {\n            v3.set(Math.random() * 2 - 1, Math.random() * 2 - 1, 0).normalize();\n            data[n++] = (v3.x * 0.5 + 0.5) * 255;\n            data[n++] = (v3.y * 0.5 + 0.5) * 255;\n            data[n++] = 0;\n            data[n++] = 255;\n        }\n    }\n    return data;\n}\n\nfunction generateNoiseTexture(size) {\n    return new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        pixels: generateNoiseData(size),\n        wrapS: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].REPEAT,\n        wrapT: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].REPEAT,\n        width: size,\n        height: size\n    });\n}\n\nfunction generateKernel(size, offset, hemisphere) {\n    var kernel = new Float32Array(size * 3);\n    offset = offset || 0;\n    for (var i = 0; i < size; i++) {\n        var phi = Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i + offset, 2) * (hemisphere ? 1 : 2) * Math.PI;\n        var theta = Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i + offset, 3) * Math.PI;\n        var r = Math.random();\n        var x = Math.cos(phi) * Math.sin(theta) * r;\n        var y = Math.cos(theta) * r;\n        var z = Math.sin(phi) * Math.sin(theta) * r;\n\n        kernel[i * 3] = x;\n        kernel[i * 3 + 1] = y;\n        kernel[i * 3 + 2] = z;\n    }\n    return kernel;\n}\n\nfunction SSAOPass(opt) {\n    opt = opt || {};\n\n    this._ssaoPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssao.estimate')\n    });\n    this._blendPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.temporalBlend')\n    });\n    this._blurPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssao.blur')\n    });\n    this._framebuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]();\n\n    this._ssaoTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._prevTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n    this._currTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._blurTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]();\n\n    this._depthTex = opt.depthTexture;\n    this._normalTex = opt.normalTexture;\n    this._velocityTex = opt.velocityTexture;\n\n    this.setNoiseSize(4);\n    this.setKernelSize(opt.kernelSize || 12);\n    if (opt.radius != null) {\n        this.setParameter('radius', opt.radius);\n    }\n    if (opt.power != null) {\n        this.setParameter('power', opt.power);\n    }\n\n    if (!this._normalTex) {\n        this._ssaoPass.material.disableTexture('normalTex');\n        this._blurPass.material.disableTexture('normalTex');\n    }\n    if (!this._depthTex) {\n        this._blurPass.material.disableTexture('depthTex');\n    }\n\n    this._blurPass.material.setUniform('normalTex', this._normalTex);\n    this._blurPass.material.setUniform('depthTex', this._depthTex);\n\n\n    this._temporalFilter = true;\n\n    this._frame = 0;\n}\n\nSSAOPass.prototype.setDepthTexture = function (depthTex) {\n    this._depthTex = depthTex;\n};\n\nSSAOPass.prototype.setNormalTexture = function (normalTex) {\n    this._normalTex = normalTex;\n    this._ssaoPass.material[normalTex ? 'enableTexture' : 'disableTexture']('normalTex');\n    // Switch between hemisphere and shere kernel.\n    this.setKernelSize(this._kernelSize);\n};\n\nSSAOPass.prototype.update = function (renderer, camera, frame) {\n\n    var width = renderer.getWidth();\n    var height = renderer.getHeight();\n\n    var ssaoPass = this._ssaoPass;\n    var blurPass = this._blurPass;\n    var blendPass = this._blendPass;\n\n    this._frame++;\n\n    ssaoPass.setUniform('kernel', this._kernels[\n        (this._temporalFilter ? this._frame : frame) % this._kernels.length\n    ]);\n    ssaoPass.setUniform('depthTex', this._depthTex);\n    if (this._normalTex != null) {\n        ssaoPass.setUniform('normalTex', this._normalTex);\n    }\n    ssaoPass.setUniform('depthTexSize', [this._depthTex.width, this._depthTex.height]);\n\n    var viewInverseTranspose = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n    __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].transpose(viewInverseTranspose, camera.worldTransform);\n\n    ssaoPass.setUniform('projection', camera.projectionMatrix.array);\n    ssaoPass.setUniform('projectionInv', camera.invProjectionMatrix.array);\n    ssaoPass.setUniform('viewInverseTranspose', viewInverseTranspose.array);\n\n    var ssaoTexture = this._ssaoTexture;\n    var blurTexture = this._blurTexture;\n\n    var prevTexture = this._prevTexture;\n    var currTexture = this._currTexture;\n\n    ssaoTexture.width = width;\n    ssaoTexture.height = height;\n    blurTexture.width = width;\n    blurTexture.height = height;\n    prevTexture.width = width;\n    prevTexture.height = height;\n    currTexture.width = width;\n    currTexture.height = height;\n\n    this._framebuffer.attach(ssaoTexture);\n    this._framebuffer.bind(renderer);\n    renderer.gl.clearColor(1, 1, 1, 1);\n    renderer.gl.clear(renderer.gl.COLOR_BUFFER_BIT);\n    ssaoPass.render(renderer);\n\n    if (this._temporalFilter) {\n        this._framebuffer.attach(currTexture);\n        blendPass.setUniform('prevTex', prevTexture);\n        blendPass.setUniform('currTex', ssaoTexture);\n        blendPass.setUniform('velocityTex', this._velocityTex);\n        blendPass.render(renderer);\n    }\n\n    blurPass.setUniform('textureSize', [width, height]);\n    blurPass.setUniform('projection', camera.projectionMatrix.array);\n    this._framebuffer.attach(blurTexture);\n    blurPass.setUniform('direction', 0);\n    blurPass.setUniform('ssaoTexture', this._temporalFilter ? currTexture : ssaoTexture);\n    blurPass.render(renderer);\n\n    this._framebuffer.attach(ssaoTexture);\n    blurPass.setUniform('direction', 1);\n    blurPass.setUniform('ssaoTexture', blurTexture);\n    blurPass.render(renderer);\n\n    this._framebuffer.unbind(renderer);\n\n    // Restore clear\n    var clearColor = renderer.clearColor;\n    renderer.gl.clearColor(clearColor[0], clearColor[1], clearColor[2], clearColor[3]);\n\n    // Swap texture\n    var tmp = this._prevTexture;\n    this._prevTexture = this._currTexture;\n    this._currTexture = tmp;\n};\n\nSSAOPass.prototype.getTargetTexture = function () {\n    return this._ssaoTexture;\n};\n\nSSAOPass.prototype.setParameter = function (name, val) {\n    if (name === 'noiseTexSize') {\n        this.setNoiseSize(val);\n    }\n    else if (name === 'kernelSize') {\n        this.setKernelSize(val);\n    }\n    else if (name === 'intensity') {\n        this._ssaoPass.material.set('intensity', val);\n    }\n    else if (name === 'temporalFilter') {\n        this._temporalFilter = val;\n    }\n    else {\n        this._ssaoPass.setUniform(name, val);\n    }\n};\n\nSSAOPass.prototype.setKernelSize = function (size) {\n    this._kernelSize = size;\n    this._ssaoPass.material.define('fragment', 'KERNEL_SIZE', size);\n    this._kernels = this._kernels || [];\n    for (var i = 0; i < 30; i++) {\n        this._kernels[i] = generateKernel(size, i * size, !!this._normalTex);\n    }\n};\n\nSSAOPass.prototype.setNoiseSize = function (size) {\n    var texture = this._ssaoPass.getUniform('noiseTex');\n    if (!texture) {\n        texture = generateNoiseTexture(size);\n        this._ssaoPass.setUniform('noiseTex', generateNoiseTexture(size));\n    }\n    else {\n        texture.data = generateNoiseData(size);\n        texture.width = texture.height = size;\n        texture.dirty();\n    }\n\n    this._ssaoPass.setUniform('noiseTexSize', [size, size]);\n};\n\nSSAOPass.prototype.dispose = function (renderer) {\n    this._blurTexture.dispose(renderer);\n    this._ssaoTexture.dispose(renderer);\n    this._prevTexture.dispose(renderer);\n    this._currTexture.dispose(renderer);\n};\n\nSSAOPass.prototype.isFinished = function (frame) {\n    return frame > 30;\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SSAOPass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NBT1Bhc3MuanM/NmU4NyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXRyaXg0LCBWZWN0b3IzLCBUZXh0dXJlMkQsIFRleHR1cmUsIGNvbXBvc2l0b3IsIEZyYW1lQnVmZmVyLCBTaGFkZXIgfSBmcm9tICdjbGF5Z2wnO1xuXG52YXIgUGFzcyA9IGNvbXBvc2l0b3IuUGFzcztcbmltcG9ydCBoYWx0b24gZnJvbSAnLi9oYWx0b24nO1xuXG5pbXBvcnQgU1NBT0dMU0xDb2RlIGZyb20gJy4vU1NBTy5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChTU0FPR0xTTENvZGUpO1xuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vaXNlRGF0YShzaXplKSB7XG4gICAgdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheShzaXplICogc2l6ZSAqIDQpO1xuICAgIHZhciBuID0gMDtcbiAgICB2YXIgdjMgPSBuZXcgVmVjdG9yMygpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgICAgICAgIHYzLnNldChNYXRoLnJhbmRvbSgpICogMiAtIDEsIE1hdGgucmFuZG9tKCkgKiAyIC0gMSwgMCkubm9ybWFsaXplKCk7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAodjMueCAqIDAuNSArIDAuNSkgKiAyNTU7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAodjMueSAqIDAuNSArIDAuNSkgKiAyNTU7XG4gICAgICAgICAgICBkYXRhW24rK10gPSAwO1xuICAgICAgICAgICAgZGF0YVtuKytdID0gMjU1O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vaXNlVGV4dHVyZShzaXplKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICBwaXhlbHM6IGdlbmVyYXRlTm9pc2VEYXRhKHNpemUpLFxuICAgICAgICB3cmFwUzogVGV4dHVyZS5SRVBFQVQsXG4gICAgICAgIHdyYXBUOiBUZXh0dXJlLlJFUEVBVCxcbiAgICAgICAgd2lkdGg6IHNpemUsXG4gICAgICAgIGhlaWdodDogc2l6ZVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZUtlcm5lbChzaXplLCBvZmZzZXQsIGhlbWlzcGhlcmUpIHtcbiAgICB2YXIga2VybmVsID0gbmV3IEZsb2F0MzJBcnJheShzaXplICogMyk7XG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHx8IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgICAgdmFyIHBoaSA9IGhhbHRvbihpICsgb2Zmc2V0LCAyKSAqIChoZW1pc3BoZXJlID8gMSA6IDIpICogTWF0aC5QSTtcbiAgICAgICAgdmFyIHRoZXRhID0gaGFsdG9uKGkgKyBvZmZzZXQsIDMpICogTWF0aC5QSTtcbiAgICAgICAgdmFyIHIgPSBNYXRoLnJhbmRvbSgpO1xuICAgICAgICB2YXIgeCA9IE1hdGguY29zKHBoaSkgKiBNYXRoLnNpbih0aGV0YSkgKiByO1xuICAgICAgICB2YXIgeSA9IE1hdGguY29zKHRoZXRhKSAqIHI7XG4gICAgICAgIHZhciB6ID0gTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKHRoZXRhKSAqIHI7XG5cbiAgICAgICAga2VybmVsW2kgKiAzXSA9IHg7XG4gICAgICAgIGtlcm5lbFtpICogMyArIDFdID0geTtcbiAgICAgICAga2VybmVsW2kgKiAzICsgMl0gPSB6O1xuICAgIH1cbiAgICByZXR1cm4ga2VybmVsO1xufVxuXG5mdW5jdGlvbiBTU0FPUGFzcyhvcHQpIHtcbiAgICBvcHQgPSBvcHQgfHwge307XG5cbiAgICB0aGlzLl9zc2FvUGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci5zc2FvLmVzdGltYXRlJylcbiAgICB9KTtcbiAgICB0aGlzLl9ibGVuZFBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIudGVtcG9yYWxCbGVuZCcpXG4gICAgfSk7XG4gICAgdGhpcy5fYmx1clBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIuc3Nhby5ibHVyJylcbiAgICB9KTtcbiAgICB0aGlzLl9mcmFtZWJ1ZmZlciA9IG5ldyBGcmFtZUJ1ZmZlcigpO1xuXG4gICAgdGhpcy5fc3Nhb1RleHR1cmUgPSBuZXcgVGV4dHVyZTJEKCk7XG5cbiAgICB0aGlzLl9wcmV2VGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoKTtcbiAgICB0aGlzLl9jdXJyVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoKTtcblxuICAgIHRoaXMuX2JsdXJUZXh0dXJlID0gbmV3IFRleHR1cmUyRCgpO1xuXG4gICAgdGhpcy5fZGVwdGhUZXggPSBvcHQuZGVwdGhUZXh0dXJlO1xuICAgIHRoaXMuX25vcm1hbFRleCA9IG9wdC5ub3JtYWxUZXh0dXJlO1xuICAgIHRoaXMuX3ZlbG9jaXR5VGV4ID0gb3B0LnZlbG9jaXR5VGV4dHVyZTtcblxuICAgIHRoaXMuc2V0Tm9pc2VTaXplKDQpO1xuICAgIHRoaXMuc2V0S2VybmVsU2l6ZShvcHQua2VybmVsU2l6ZSB8fCAxMik7XG4gICAgaWYgKG9wdC5yYWRpdXMgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcigncmFkaXVzJywgb3B0LnJhZGl1cyk7XG4gICAgfVxuICAgIGlmIChvcHQucG93ZXIgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnNldFBhcmFtZXRlcigncG93ZXInLCBvcHQucG93ZXIpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fbm9ybWFsVGV4KSB7XG4gICAgICAgIHRoaXMuX3NzYW9QYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdub3JtYWxUZXgnKTtcbiAgICAgICAgdGhpcy5fYmx1clBhc3MubWF0ZXJpYWwuZGlzYWJsZVRleHR1cmUoJ25vcm1hbFRleCcpO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuX2RlcHRoVGV4KSB7XG4gICAgICAgIHRoaXMuX2JsdXJQYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdkZXB0aFRleCcpO1xuICAgIH1cblxuICAgIHRoaXMuX2JsdXJQYXNzLm1hdGVyaWFsLnNldFVuaWZvcm0oJ25vcm1hbFRleCcsIHRoaXMuX25vcm1hbFRleCk7XG4gICAgdGhpcy5fYmx1clBhc3MubWF0ZXJpYWwuc2V0VW5pZm9ybSgnZGVwdGhUZXgnLCB0aGlzLl9kZXB0aFRleCk7XG5cblxuICAgIHRoaXMuX3RlbXBvcmFsRmlsdGVyID0gdHJ1ZTtcblxuICAgIHRoaXMuX2ZyYW1lID0gMDtcbn1cblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldERlcHRoVGV4dHVyZSA9IGZ1bmN0aW9uIChkZXB0aFRleCkge1xuICAgIHRoaXMuX2RlcHRoVGV4ID0gZGVwdGhUZXg7XG59O1xuXG5TU0FPUGFzcy5wcm90b3R5cGUuc2V0Tm9ybWFsVGV4dHVyZSA9IGZ1bmN0aW9uIChub3JtYWxUZXgpIHtcbiAgICB0aGlzLl9ub3JtYWxUZXggPSBub3JtYWxUZXg7XG4gICAgdGhpcy5fc3Nhb1Bhc3MubWF0ZXJpYWxbbm9ybWFsVGV4ID8gJ2VuYWJsZVRleHR1cmUnIDogJ2Rpc2FibGVUZXh0dXJlJ10oJ25vcm1hbFRleCcpO1xuICAgIC8vIFN3aXRjaCBiZXR3ZWVuIGhlbWlzcGhlcmUgYW5kIHNoZXJlIGtlcm5lbC5cbiAgICB0aGlzLnNldEtlcm5lbFNpemUodGhpcy5fa2VybmVsU2l6ZSk7XG59O1xuXG5TU0FPUGFzcy5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHJlbmRlcmVyLCBjYW1lcmEsIGZyYW1lKSB7XG5cbiAgICB2YXIgd2lkdGggPSByZW5kZXJlci5nZXRXaWR0aCgpO1xuICAgIHZhciBoZWlnaHQgPSByZW5kZXJlci5nZXRIZWlnaHQoKTtcblxuICAgIHZhciBzc2FvUGFzcyA9IHRoaXMuX3NzYW9QYXNzO1xuICAgIHZhciBibHVyUGFzcyA9IHRoaXMuX2JsdXJQYXNzO1xuICAgIHZhciBibGVuZFBhc3MgPSB0aGlzLl9ibGVuZFBhc3M7XG5cbiAgICB0aGlzLl9mcmFtZSsrO1xuXG4gICAgc3Nhb1Bhc3Muc2V0VW5pZm9ybSgna2VybmVsJywgdGhpcy5fa2VybmVsc1tcbiAgICAgICAgKHRoaXMuX3RlbXBvcmFsRmlsdGVyID8gdGhpcy5fZnJhbWUgOiBmcmFtZSkgJSB0aGlzLl9rZXJuZWxzLmxlbmd0aFxuICAgIF0pO1xuICAgIHNzYW9QYXNzLnNldFVuaWZvcm0oJ2RlcHRoVGV4JywgdGhpcy5fZGVwdGhUZXgpO1xuICAgIGlmICh0aGlzLl9ub3JtYWxUZXggIT0gbnVsbCkge1xuICAgICAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCdub3JtYWxUZXgnLCB0aGlzLl9ub3JtYWxUZXgpO1xuICAgIH1cbiAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCdkZXB0aFRleFNpemUnLCBbdGhpcy5fZGVwdGhUZXgud2lkdGgsIHRoaXMuX2RlcHRoVGV4LmhlaWdodF0pO1xuXG4gICAgdmFyIHZpZXdJbnZlcnNlVHJhbnNwb3NlID0gbmV3IE1hdHJpeDQoKTtcbiAgICBNYXRyaXg0LnRyYW5zcG9zZSh2aWV3SW52ZXJzZVRyYW5zcG9zZSwgY2FtZXJhLndvcmxkVHJhbnNmb3JtKTtcblxuICAgIHNzYW9QYXNzLnNldFVuaWZvcm0oJ3Byb2plY3Rpb24nLCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeC5hcnJheSk7XG4gICAgc3Nhb1Bhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbkludicsIGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBzc2FvUGFzcy5zZXRVbmlmb3JtKCd2aWV3SW52ZXJzZVRyYW5zcG9zZScsIHZpZXdJbnZlcnNlVHJhbnNwb3NlLmFycmF5KTtcblxuICAgIHZhciBzc2FvVGV4dHVyZSA9IHRoaXMuX3NzYW9UZXh0dXJlO1xuICAgIHZhciBibHVyVGV4dHVyZSA9IHRoaXMuX2JsdXJUZXh0dXJlO1xuXG4gICAgdmFyIHByZXZUZXh0dXJlID0gdGhpcy5fcHJldlRleHR1cmU7XG4gICAgdmFyIGN1cnJUZXh0dXJlID0gdGhpcy5fY3VyclRleHR1cmU7XG5cbiAgICBzc2FvVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIHNzYW9UZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBibHVyVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIGJsdXJUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBwcmV2VGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIHByZXZUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcbiAgICBjdXJyVGV4dHVyZS53aWR0aCA9IHdpZHRoO1xuICAgIGN1cnJUZXh0dXJlLmhlaWdodCA9IGhlaWdodDtcblxuICAgIHRoaXMuX2ZyYW1lYnVmZmVyLmF0dGFjaChzc2FvVGV4dHVyZSk7XG4gICAgdGhpcy5fZnJhbWVidWZmZXIuYmluZChyZW5kZXJlcik7XG4gICAgcmVuZGVyZXIuZ2wuY2xlYXJDb2xvcigxLCAxLCAxLCAxKTtcbiAgICByZW5kZXJlci5nbC5jbGVhcihyZW5kZXJlci5nbC5DT0xPUl9CVUZGRVJfQklUKTtcbiAgICBzc2FvUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgaWYgKHRoaXMuX3RlbXBvcmFsRmlsdGVyKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lYnVmZmVyLmF0dGFjaChjdXJyVGV4dHVyZSk7XG4gICAgICAgIGJsZW5kUGFzcy5zZXRVbmlmb3JtKCdwcmV2VGV4JywgcHJldlRleHR1cmUpO1xuICAgICAgICBibGVuZFBhc3Muc2V0VW5pZm9ybSgnY3VyclRleCcsIHNzYW9UZXh0dXJlKTtcbiAgICAgICAgYmxlbmRQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4JywgdGhpcy5fdmVsb2NpdHlUZXgpO1xuICAgICAgICBibGVuZFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICB9XG5cbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCd0ZXh0dXJlU2l6ZScsIFt3aWR0aCwgaGVpZ2h0XSk7XG4gICAgYmx1clBhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICB0aGlzLl9mcmFtZWJ1ZmZlci5hdHRhY2goYmx1clRleHR1cmUpO1xuICAgIGJsdXJQYXNzLnNldFVuaWZvcm0oJ2RpcmVjdGlvbicsIDApO1xuICAgIGJsdXJQYXNzLnNldFVuaWZvcm0oJ3NzYW9UZXh0dXJlJywgdGhpcy5fdGVtcG9yYWxGaWx0ZXIgPyBjdXJyVGV4dHVyZSA6IHNzYW9UZXh0dXJlKTtcbiAgICBibHVyUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIuYXR0YWNoKHNzYW9UZXh0dXJlKTtcbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCdkaXJlY3Rpb24nLCAxKTtcbiAgICBibHVyUGFzcy5zZXRVbmlmb3JtKCdzc2FvVGV4dHVyZScsIGJsdXJUZXh0dXJlKTtcbiAgICBibHVyUGFzcy5yZW5kZXIocmVuZGVyZXIpO1xuXG4gICAgdGhpcy5fZnJhbWVidWZmZXIudW5iaW5kKHJlbmRlcmVyKTtcblxuICAgIC8vIFJlc3RvcmUgY2xlYXJcbiAgICB2YXIgY2xlYXJDb2xvciA9IHJlbmRlcmVyLmNsZWFyQ29sb3I7XG4gICAgcmVuZGVyZXIuZ2wuY2xlYXJDb2xvcihjbGVhckNvbG9yWzBdLCBjbGVhckNvbG9yWzFdLCBjbGVhckNvbG9yWzJdLCBjbGVhckNvbG9yWzNdKTtcblxuICAgIC8vIFN3YXAgdGV4dHVyZVxuICAgIHZhciB0bXAgPSB0aGlzLl9wcmV2VGV4dHVyZTtcbiAgICB0aGlzLl9wcmV2VGV4dHVyZSA9IHRoaXMuX2N1cnJUZXh0dXJlO1xuICAgIHRoaXMuX2N1cnJUZXh0dXJlID0gdG1wO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLmdldFRhcmdldFRleHR1cmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NzYW9UZXh0dXJlO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldFBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWwpIHtcbiAgICBpZiAobmFtZSA9PT0gJ25vaXNlVGV4U2l6ZScpIHtcbiAgICAgICAgdGhpcy5zZXROb2lzZVNpemUodmFsKTtcbiAgICB9XG4gICAgZWxzZSBpZiAobmFtZSA9PT0gJ2tlcm5lbFNpemUnKSB7XG4gICAgICAgIHRoaXMuc2V0S2VybmVsU2l6ZSh2YWwpO1xuICAgIH1cbiAgICBlbHNlIGlmIChuYW1lID09PSAnaW50ZW5zaXR5Jykge1xuICAgICAgICB0aGlzLl9zc2FvUGFzcy5tYXRlcmlhbC5zZXQoJ2ludGVuc2l0eScsIHZhbCk7XG4gICAgfVxuICAgIGVsc2UgaWYgKG5hbWUgPT09ICd0ZW1wb3JhbEZpbHRlcicpIHtcbiAgICAgICAgdGhpcy5fdGVtcG9yYWxGaWx0ZXIgPSB2YWw7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9zc2FvUGFzcy5zZXRVbmlmb3JtKG5hbWUsIHZhbCk7XG4gICAgfVxufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldEtlcm5lbFNpemUgPSBmdW5jdGlvbiAoc2l6ZSkge1xuICAgIHRoaXMuX2tlcm5lbFNpemUgPSBzaXplO1xuICAgIHRoaXMuX3NzYW9QYXNzLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnS0VSTkVMX1NJWkUnLCBzaXplKTtcbiAgICB0aGlzLl9rZXJuZWxzID0gdGhpcy5fa2VybmVscyB8fCBbXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDMwOyBpKyspIHtcbiAgICAgICAgdGhpcy5fa2VybmVsc1tpXSA9IGdlbmVyYXRlS2VybmVsKHNpemUsIGkgKiBzaXplLCAhIXRoaXMuX25vcm1hbFRleCk7XG4gICAgfVxufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLnNldE5vaXNlU2l6ZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gICAgdmFyIHRleHR1cmUgPSB0aGlzLl9zc2FvUGFzcy5nZXRVbmlmb3JtKCdub2lzZVRleCcpO1xuICAgIGlmICghdGV4dHVyZSkge1xuICAgICAgICB0ZXh0dXJlID0gZ2VuZXJhdGVOb2lzZVRleHR1cmUoc2l6ZSk7XG4gICAgICAgIHRoaXMuX3NzYW9QYXNzLnNldFVuaWZvcm0oJ25vaXNlVGV4JywgZ2VuZXJhdGVOb2lzZVRleHR1cmUoc2l6ZSkpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGV4dHVyZS5kYXRhID0gZ2VuZXJhdGVOb2lzZURhdGEoc2l6ZSk7XG4gICAgICAgIHRleHR1cmUud2lkdGggPSB0ZXh0dXJlLmhlaWdodCA9IHNpemU7XG4gICAgICAgIHRleHR1cmUuZGlydHkoKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zc2FvUGFzcy5zZXRVbmlmb3JtKCdub2lzZVRleFNpemUnLCBbc2l6ZSwgc2l6ZV0pO1xufTtcblxuU1NBT1Bhc3MucHJvdG90eXBlLmRpc3Bvc2UgPSBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICB0aGlzLl9ibHVyVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9zc2FvVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9wcmV2VGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICB0aGlzLl9jdXJyVGV4dHVyZS5kaXNwb3NlKHJlbmRlcmVyKTtcbn07XG5cblNTQU9QYXNzLnByb3RvdHlwZS5pc0ZpbmlzaGVkID0gZnVuY3Rpb24gKGZyYW1lKSB7XG4gICAgcmV0dXJuIGZyYW1lID4gMzA7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTU0FPUGFzcztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTQU9QYXNzLmpzXG4vLyBtb2R1bGUgaWQgPSAxOThcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///198\n");

/***/ }),
/* 199 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.ssao.estimate\\n#define SHADER_NAME SSAO\\nuniform sampler2D depthTex;\\nuniform sampler2D normalTex;\\nuniform sampler2D noiseTex;\\nuniform vec2 depthTexSize;\\nuniform vec2 noiseTexSize;\\nuniform mat4 projection;\\nuniform mat4 projectionInv;\\nuniform mat4 viewInverseTranspose;\\nuniform vec3 kernel[KERNEL_SIZE];\\nuniform float radius : 1;\\nuniform float power : 1;\\nuniform float bias: 0.01;\\nuniform float intensity: 1.0;\\nvarying vec2 v_Texcoord;\\nfloat ssaoEstimator(in vec3 originPos, in vec3 N, in mat3 kernelBasis) {\\n float occlusion = 0.0;\\n for (int i = 0; i < KERNEL_SIZE; i++) {\\n vec3 samplePos = kernel[i];\\n#ifdef NORMALTEX_ENABLED\\n samplePos = kernelBasis * samplePos;\\n#endif\\n samplePos = samplePos * radius + originPos;\\n vec4 texCoord = projection * vec4(samplePos, 1.0);\\n texCoord.xy /= texCoord.w;\\n texCoord.xy = texCoord.xy * 0.5 + 0.5;\\n vec4 depthTexel = texture2D(depthTex, texCoord.xy);\\n float z = depthTexel.r * 2.0 - 1.0;\\n#ifdef ALCHEMY\\n vec4 projectedPos = vec4(texCoord.xy * 2.0 - 1.0, z, 1.0);\\n vec4 p4 = projectionInv * projectedPos;\\n p4.xyz /= p4.w;\\n vec3 cDir = p4.xyz - originPos;\\n float vv = dot(cDir, cDir);\\n float vn = dot(cDir, N);\\n float radius2 = radius * radius;\\n vn = max(vn + p4.z * bias, 0.0);\\n float f = max(radius2 - vv, 0.0) / radius2;\\n occlusion += f * f * f * max(vn / (0.01 + vv), 0.0);\\n#else\\n if (projection[3][3] == 0.0) {\\n z = projection[3][2] / (z * projection[2][3] - projection[2][2]);\\n }\\n else {\\n z = (z - projection[3][2]) / projection[2][2];\\n }\\n float factor = step(samplePos.z, z - bias);\\n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - z));\\n occlusion += rangeCheck * factor;\\n#endif\\n }\\n#ifdef NORMALTEX_ENABLED\\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\\n#else\\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\\n#endif\\n return pow(occlusion, power);\\n}\\nvoid main()\\n{\\n vec2 uv = v_Texcoord;\\n vec4 depthTexel = texture2D(depthTex, uv);\\n#ifdef NORMALTEX_ENABLED\\n vec2 texelSize = 1.0 / depthTexSize;\\n vec4 tex = texture2D(normalTex, uv);\\n vec3 r = texture2D(normalTex, uv + vec2(texelSize.x, 0.0)).rgb;\\n vec3 l = texture2D(normalTex, uv + vec2(-texelSize.x, 0.0)).rgb;\\n vec3 t = texture2D(normalTex, uv + vec2(0.0, -texelSize.y)).rgb;\\n vec3 b = texture2D(normalTex, uv + vec2(0.0, texelSize.y)).rgb;\\n if (dot(tex.rgb, tex.rgb) == 0.0\\n || dot(r, r) == 0.0 || dot(l, l) == 0.0\\n || dot(t, t) == 0.0 || dot(b, b) == 0.0\\n ) {\\n gl_FragColor = vec4(1.0);\\n return;\\n }\\n vec3 N = tex.rgb * 2.0 - 1.0;\\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * uv;\\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\\n vec3 T = normalize(rvec - N * dot(rvec, N));\\n vec3 BT = normalize(cross(N, T));\\n mat3 kernelBasis = mat3(T, BT, N);\\n#else\\n if (depthTexel.r > 0.99999) {\\n gl_FragColor = vec4(1.0);\\n return;\\n }\\n mat3 kernelBasis;\\n#endif\\n float z = depthTexel.r * 2.0 - 1.0;\\n vec4 projectedPos = vec4(uv * 2.0 - 1.0, z, 1.0);\\n vec4 p4 = projectionInv * projectedPos;\\n vec3 position = p4.xyz / p4.w;\\n float ao = ssaoEstimator(position, N, kernelBasis);\\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\\n gl_FragColor = vec4(vec3(ao), 1.0);\\n}\\n@end\\n@export car.ssao.blur\\n#define SHADER_NAME SSAO_BLUR\\nuniform sampler2D ssaoTexture;\\n#ifdef NORMALTEX_ENABLED\\nuniform sampler2D normalTex;\\n#endif\\nvarying vec2 v_Texcoord;\\nuniform vec2 textureSize;\\nuniform float blurSize : 1.0;\\nuniform int direction: 0.0;\\n#ifdef DEPTHTEX_ENABLED\\nuniform sampler2D depthTex;\\nuniform mat4 projection;\\nuniform float depthRange : 0.05;\\nfloat getLinearDepth(vec2 coord)\\n{\\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\n#endif\\nvoid main()\\n{\\n float kernel[5];\\n kernel[0] = 0.122581;\\n kernel[1] = 0.233062;\\n kernel[2] = 0.288713;\\n kernel[3] = 0.233062;\\n kernel[4] = 0.122581;\\n vec2 off = vec2(0.0);\\n if (direction == 0) {\\n off[0] = blurSize / textureSize.x;\\n }\\n else {\\n off[1] = blurSize / textureSize.y;\\n }\\n vec2 coord = v_Texcoord;\\n float sum = 0.0;\\n float weightAll = 0.0;\\n#ifdef NORMALTEX_ENABLED\\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\\n#endif\\n#if defined(DEPTHTEX_ENABLED)\\n float centerDepth = getLinearDepth(v_Texcoord);\\n#endif\\n for (int i = 0; i < 5; i++) {\\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\\n float w = kernel[i];\\n#ifdef NORMALTEX_ENABLED\\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\\n#endif\\n#ifdef DEPTHTEX_ENABLED\\n float d = getLinearDepth(coord);\\n w *= (1.0 - smoothstep(0.0, 1.0, abs(centerDepth - d) / depthRange));\\n#endif\\n weightAll += w;\\n sum += texture2D(ssaoTexture, coord).r * w;\\n }\\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\\n}\\n@end\\n\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTk5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NBTy5nbHNsLmpzPzAyYTUiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci5zc2FvLmVzdGltYXRlXFxuI2RlZmluZSBTSEFERVJfTkFNRSBTU0FPXFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIG5vaXNlVGV4O1xcbnVuaWZvcm0gdmVjMiBkZXB0aFRleFNpemU7XFxudW5pZm9ybSB2ZWMyIG5vaXNlVGV4U2l6ZTtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbjtcXG51bmlmb3JtIG1hdDQgcHJvamVjdGlvbkludjtcXG51bmlmb3JtIG1hdDQgdmlld0ludmVyc2VUcmFuc3Bvc2U7XFxudW5pZm9ybSB2ZWMzIGtlcm5lbFtLRVJORUxfU0laRV07XFxudW5pZm9ybSBmbG9hdCByYWRpdXMgOiAxO1xcbnVuaWZvcm0gZmxvYXQgcG93ZXIgOiAxO1xcbnVuaWZvcm0gZmxvYXQgYmlhczogMC4wMTtcXG51bmlmb3JtIGZsb2F0IGludGVuc2l0eTogMS4wO1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbmZsb2F0IHNzYW9Fc3RpbWF0b3IoaW4gdmVjMyBvcmlnaW5Qb3MsIGluIHZlYzMgTiwgaW4gbWF0MyBrZXJuZWxCYXNpcykge1xcbiBmbG9hdCBvY2NsdXNpb24gPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgS0VSTkVMX1NJWkU7IGkrKykge1xcbiB2ZWMzIHNhbXBsZVBvcyA9IGtlcm5lbFtpXTtcXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gc2FtcGxlUG9zID0ga2VybmVsQmFzaXMgKiBzYW1wbGVQb3M7XFxuI2VuZGlmXFxuIHNhbXBsZVBvcyA9IHNhbXBsZVBvcyAqIHJhZGl1cyArIG9yaWdpblBvcztcXG4gdmVjNCB0ZXhDb29yZCA9IHByb2plY3Rpb24gKiB2ZWM0KHNhbXBsZVBvcywgMS4wKTtcXG4gdGV4Q29vcmQueHkgLz0gdGV4Q29vcmQudztcXG4gdGV4Q29vcmQueHkgPSB0ZXhDb29yZC54eSAqIDAuNSArIDAuNTtcXG4gdmVjNCBkZXB0aFRleGVsID0gdGV4dHVyZTJEKGRlcHRoVGV4LCB0ZXhDb29yZC54eSk7XFxuIGZsb2F0IHogPSBkZXB0aFRleGVsLnIgKiAyLjAgLSAxLjA7XFxuI2lmZGVmIEFMQ0hFTVlcXG4gdmVjNCBwcm9qZWN0ZWRQb3MgPSB2ZWM0KHRleENvb3JkLnh5ICogMi4wIC0gMS4wLCB6LCAxLjApO1xcbiB2ZWM0IHA0ID0gcHJvamVjdGlvbkludiAqIHByb2plY3RlZFBvcztcXG4gcDQueHl6IC89IHA0Lnc7XFxuIHZlYzMgY0RpciA9IHA0Lnh5eiAtIG9yaWdpblBvcztcXG4gZmxvYXQgdnYgPSBkb3QoY0RpciwgY0Rpcik7XFxuIGZsb2F0IHZuID0gZG90KGNEaXIsIE4pO1xcbiBmbG9hdCByYWRpdXMyID0gcmFkaXVzICogcmFkaXVzO1xcbiB2biA9IG1heCh2biArIHA0LnogKiBiaWFzLCAwLjApO1xcbiBmbG9hdCBmID0gbWF4KHJhZGl1czIgLSB2diwgMC4wKSAvIHJhZGl1czI7XFxuIG9jY2x1c2lvbiArPSBmICogZiAqIGYgKiBtYXgodm4gLyAoMC4wMSArIHZ2KSwgMC4wKTtcXG4jZWxzZVxcbiBpZiAocHJvamVjdGlvblszXVszXSA9PSAwLjApIHtcXG4geiA9IHByb2plY3Rpb25bM11bMl0gLyAoeiAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG4gfVxcbiBlbHNlIHtcXG4geiA9ICh6IC0gcHJvamVjdGlvblszXVsyXSkgLyBwcm9qZWN0aW9uWzJdWzJdO1xcbiB9XFxuIGZsb2F0IGZhY3RvciA9IHN0ZXAoc2FtcGxlUG9zLnosIHogLSBiaWFzKTtcXG4gZmxvYXQgcmFuZ2VDaGVjayA9IHNtb290aHN0ZXAoMC4wLCAxLjAsIHJhZGl1cyAvIGFicyhvcmlnaW5Qb3MueiAtIHopKTtcXG4gb2NjbHVzaW9uICs9IHJhbmdlQ2hlY2sgKiBmYWN0b3I7XFxuI2VuZGlmXFxuIH1cXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gb2NjbHVzaW9uID0gMS4wIC0gb2NjbHVzaW9uIC8gZmxvYXQoS0VSTkVMX1NJWkUpO1xcbiNlbHNlXFxuIG9jY2x1c2lvbiA9IDEuMCAtIGNsYW1wKChvY2NsdXNpb24gLyBmbG9hdChLRVJORUxfU0laRSkgLSAwLjYpICogMi41LCAwLjAsIDEuMCk7XFxuI2VuZGlmXFxuIHJldHVybiBwb3cob2NjbHVzaW9uLCBwb3dlcik7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIHV2ID0gdl9UZXhjb29yZDtcXG4gdmVjNCBkZXB0aFRleGVsID0gdGV4dHVyZTJEKGRlcHRoVGV4LCB1dik7XFxuI2lmZGVmIE5PUk1BTFRFWF9FTkFCTEVEXFxuIHZlYzIgdGV4ZWxTaXplID0gMS4wIC8gZGVwdGhUZXhTaXplO1xcbiB2ZWM0IHRleCA9IHRleHR1cmUyRChub3JtYWxUZXgsIHV2KTtcXG4gdmVjMyByID0gdGV4dHVyZTJEKG5vcm1hbFRleCwgdXYgKyB2ZWMyKHRleGVsU2l6ZS54LCAwLjApKS5yZ2I7XFxuIHZlYzMgbCA9IHRleHR1cmUyRChub3JtYWxUZXgsIHV2ICsgdmVjMigtdGV4ZWxTaXplLngsIDAuMCkpLnJnYjtcXG4gdmVjMyB0ID0gdGV4dHVyZTJEKG5vcm1hbFRleCwgdXYgKyB2ZWMyKDAuMCwgLXRleGVsU2l6ZS55KSkucmdiO1xcbiB2ZWMzIGIgPSB0ZXh0dXJlMkQobm9ybWFsVGV4LCB1diArIHZlYzIoMC4wLCB0ZXhlbFNpemUueSkpLnJnYjtcXG4gaWYgKGRvdCh0ZXgucmdiLCB0ZXgucmdiKSA9PSAwLjBcXG4gfHwgZG90KHIsIHIpID09IDAuMCB8fCBkb3QobCwgbCkgPT0gMC4wXFxuIHx8IGRvdCh0LCB0KSA9PSAwLjAgfHwgZG90KGIsIGIpID09IDAuMFxcbiApIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiByZXR1cm47XFxuIH1cXG4gdmVjMyBOID0gdGV4LnJnYiAqIDIuMCAtIDEuMDtcXG4gTiA9ICh2aWV3SW52ZXJzZVRyYW5zcG9zZSAqIHZlYzQoTiwgMC4wKSkueHl6O1xcbiB2ZWMyIG5vaXNlVGV4Q29vcmQgPSBkZXB0aFRleFNpemUgLyB2ZWMyKG5vaXNlVGV4U2l6ZSkgKiB1djtcXG4gdmVjMyBydmVjID0gdGV4dHVyZTJEKG5vaXNlVGV4LCBub2lzZVRleENvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIHZlYzMgVCA9IG5vcm1hbGl6ZShydmVjIC0gTiAqIGRvdChydmVjLCBOKSk7XFxuIHZlYzMgQlQgPSBub3JtYWxpemUoY3Jvc3MoTiwgVCkpO1xcbiBtYXQzIGtlcm5lbEJhc2lzID0gbWF0MyhULCBCVCwgTik7XFxuI2Vsc2VcXG4gaWYgKGRlcHRoVGV4ZWwuciA+IDAuOTk5OTkpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjApO1xcbiByZXR1cm47XFxuIH1cXG4gbWF0MyBrZXJuZWxCYXNpcztcXG4jZW5kaWZcXG4gZmxvYXQgeiA9IGRlcHRoVGV4ZWwuciAqIDIuMCAtIDEuMDtcXG4gdmVjNCBwcm9qZWN0ZWRQb3MgPSB2ZWM0KHV2ICogMi4wIC0gMS4wLCB6LCAxLjApO1xcbiB2ZWM0IHA0ID0gcHJvamVjdGlvbkludiAqIHByb2plY3RlZFBvcztcXG4gdmVjMyBwb3NpdGlvbiA9IHA0Lnh5eiAvIHA0Lnc7XFxuIGZsb2F0IGFvID0gc3Nhb0VzdGltYXRvcihwb3NpdGlvbiwgTiwga2VybmVsQmFzaXMpO1xcbiBhbyA9IGNsYW1wKDEuMCAtICgxLjAgLSBhbykgKiBpbnRlbnNpdHksIDAuMCwgMS4wKTtcXG4gZ2xfRnJhZ0NvbG9yID0gdmVjNCh2ZWMzKGFvKSwgMS4wKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2FyLnNzYW8uYmx1clxcbiNkZWZpbmUgU0hBREVSX05BTUUgU1NBT19CTFVSXFxudW5pZm9ybSBzYW1wbGVyMkQgc3Nhb1RleHR1cmU7XFxuI2lmZGVmIE5PUk1BTFRFWF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgbm9ybWFsVGV4O1xcbiNlbmRpZlxcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZTtcXG51bmlmb3JtIGZsb2F0IGJsdXJTaXplIDogMS4wO1xcbnVuaWZvcm0gaW50IGRpcmVjdGlvbjogMC4wO1xcbiNpZmRlZiBERVBUSFRFWF9FTkFCTEVEXFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBmbG9hdCBkZXB0aFJhbmdlIDogMC4wNTtcXG5mbG9hdCBnZXRMaW5lYXJEZXB0aCh2ZWMyIGNvb3JkKVxcbntcXG4gZmxvYXQgZGVwdGggPSB0ZXh0dXJlMkQoZGVwdGhUZXgsIGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiByZXR1cm4gcHJvamVjdGlvblszXVsyXSAvIChkZXB0aCAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG59XFxuI2VuZGlmXFxudm9pZCBtYWluKClcXG57XFxuIGZsb2F0IGtlcm5lbFs1XTtcXG4ga2VybmVsWzBdID0gMC4xMjI1ODE7XFxuIGtlcm5lbFsxXSA9IDAuMjMzMDYyO1xcbiBrZXJuZWxbMl0gPSAwLjI4ODcxMztcXG4ga2VybmVsWzNdID0gMC4yMzMwNjI7XFxuIGtlcm5lbFs0XSA9IDAuMTIyNTgxO1xcbiB2ZWMyIG9mZiA9IHZlYzIoMC4wKTtcXG4gaWYgKGRpcmVjdGlvbiA9PSAwKSB7XFxuIG9mZlswXSA9IGJsdXJTaXplIC8gdGV4dHVyZVNpemUueDtcXG4gfVxcbiBlbHNlIHtcXG4gb2ZmWzFdID0gYmx1clNpemUgLyB0ZXh0dXJlU2l6ZS55O1xcbiB9XFxuIHZlYzIgY29vcmQgPSB2X1RleGNvb3JkO1xcbiBmbG9hdCBzdW0gPSAwLjA7XFxuIGZsb2F0IHdlaWdodEFsbCA9IDAuMDtcXG4jaWZkZWYgTk9STUFMVEVYX0VOQUJMRURcXG4gdmVjMyBjZW50ZXJOb3JtYWwgPSB0ZXh0dXJlMkQobm9ybWFsVGV4LCB2X1RleGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuI2VuZGlmXFxuI2lmIGRlZmluZWQoREVQVEhURVhfRU5BQkxFRClcXG4gZmxvYXQgY2VudGVyRGVwdGggPSBnZXRMaW5lYXJEZXB0aCh2X1RleGNvb3JkKTtcXG4jZW5kaWZcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCA1OyBpKyspIHtcXG4gdmVjMiBjb29yZCA9IGNsYW1wKHZfVGV4Y29vcmQgKyB2ZWMyKGZsb2F0KGkpIC0gMi4wKSAqIG9mZiwgdmVjMigwLjApLCB2ZWMyKDEuMCkpO1xcbiBmbG9hdCB3ID0ga2VybmVsW2ldO1xcbiNpZmRlZiBOT1JNQUxURVhfRU5BQkxFRFxcbiB2ZWMzIG5vcm1hbCA9IHRleHR1cmUyRChub3JtYWxUZXgsIGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIHcgKj0gY2xhbXAoZG90KG5vcm1hbCwgY2VudGVyTm9ybWFsKSwgMC4wLCAxLjApO1xcbiNlbmRpZlxcbiNpZmRlZiBERVBUSFRFWF9FTkFCTEVEXFxuIGZsb2F0IGQgPSBnZXRMaW5lYXJEZXB0aChjb29yZCk7XFxuIHcgKj0gKDEuMCAtIHNtb290aHN0ZXAoMC4wLCAxLjAsIGFicyhjZW50ZXJEZXB0aCAtIGQpIC8gZGVwdGhSYW5nZSkpO1xcbiNlbmRpZlxcbiB3ZWlnaHRBbGwgKz0gdztcXG4gc3VtICs9IHRleHR1cmUyRChzc2FvVGV4dHVyZSwgY29vcmQpLnIgKiB3O1xcbiB9XFxuIGdsX0ZyYWdDb2xvciA9IHZlYzQodmVjMyhzdW0gLyB3ZWlnaHRBbGwpLCAxLjApO1xcbn1cXG5AZW5kXFxuXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTQU8uZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMTk5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///199\n");

/***/ }),
/* 200 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__SSR_glsl_js__ = __webpack_require__(201);\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n// import halton from './halton';\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_1__SSR_glsl_js__[\"a\" /* default */]);\n\n// function generateNormals(size, offset, hemisphere) {\n//     var kernel = new Float32Array(size * 3);\n//     offset = offset || 0;\n//     for (var i = 0; i < size; i++) {\n//         var phi = halton(i + offset, 2) * (hemisphere ? 1 : 2) * Math.PI / 2;\n//         var theta = halton(i + offset, 3) * 2 * Math.PI;\n//         var x = Math.cos(theta) * Math.sin(phi);\n//         var y = Math.sin(theta) * Math.sin(phi);\n//         var z = Math.cos(phi);\n//         kernel[i * 3] = x;\n//         kernel[i * 3 + 1] = y;\n//         kernel[i * 3 + 2] = z;\n//     }\n//     return kernel;\n// }\n\nfunction SSRPass(opt) {\n    opt = opt || {};\n\n    this._ssrPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.main'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blurPass1 = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.blur'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blurPass2 = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.ssr.blur'),\n        clearColor: [0, 0, 0, 0]\n    });\n    this._blendPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('clay.compositor.blend')\n    });\n    this._blendPass.material.disableTexturesAll();\n    this._blendPass.material.enableTexture(['texture1', 'texture2']);\n\n    this._ssrPass.setUniform('gBufferTexture1', opt.normalTexture);\n    this._ssrPass.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass1.setUniform('gBufferTexture1', opt.normalTexture);\n    this._blurPass1.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass2.setUniform('gBufferTexture1', opt.normalTexture);\n    this._blurPass2.setUniform('gBufferTexture2', opt.depthTexture);\n\n    this._blurPass2.material.define('fragment', 'VERTICAL');\n    this._blurPass2.material.define('fragment', 'BLEND');\n\n    this._ssrTexture = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._texture2 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._texture3 = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n\n    this._frameBuffer = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]({\n        depthBuffer: false\n    });\n\n    this._normalDistribution = null;\n\n    this._downScale = 1;\n}\n\nSSRPass.prototype.setAmbientCubemap = function (specularCubemap, brdfLookup, specularIntensity) {\n    this._ssrPass.material.set('specularCubemap', specularCubemap);\n    this._ssrPass.material.set('brdfLookup', brdfLookup);\n    this._ssrPass.material.set('specularIntensity', specularIntensity);\n\n    var enableSpecularMap = specularCubemap && specularIntensity;\n    this._ssrPass.material[enableSpecularMap ? 'enableTexture' : 'disableTexture']('specularCubemap');\n};\n\nSSRPass.prototype.update = function (renderer, camera, sourceTexture, reflectionSourceTexture, frame) {\n    var width = renderer.getWidth();\n    var height = renderer.getHeight();\n    var ssrTexture = this._ssrTexture;\n    var texture2 = this._texture2;\n    var texture3 = this._texture3;\n    ssrTexture.width = width / this._downScale;\n    ssrTexture.height = height / this._downScale;\n\n    texture2.width = texture3.width = width;\n    texture2.height = texture3.height = height;\n\n    var frameBuffer = this._frameBuffer;\n\n    var ssrPass = this._ssrPass;\n    var blurPass1 = this._blurPass1;\n    var blurPass2 = this._blurPass2;\n\n    var toViewSpace = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n    __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].transpose(toViewSpace, camera.worldTransform);\n\n    ssrPass.setUniform('sourceTexture', reflectionSourceTexture);\n    ssrPass.setUniform('projection', camera.projectionMatrix.array);\n    ssrPass.setUniform('projectionInv', camera.invProjectionMatrix.array);\n    ssrPass.setUniform('toViewSpace', toViewSpace.array);\n    ssrPass.setUniform('nearZ', camera.near);\n    ssrPass.setUniform('jitterOffset', Math.random());\n\n    blurPass1.setUniform('textureSize', [ssrTexture.width, ssrTexture.height]);\n    blurPass2.setUniform('textureSize', [width, height]);\n    blurPass2.setUniform('sourceTexture', sourceTexture);\n\n    blurPass1.setUniform('projection', camera.projectionMatrix.array);\n    blurPass2.setUniform('projection', camera.projectionMatrix.array);\n\n    frameBuffer.attach(ssrTexture);\n    frameBuffer.bind(renderer);\n    ssrPass.render(renderer);\n\n    frameBuffer.attach(texture2);\n    blurPass1.setUniform('texture', ssrTexture);\n    blurPass1.render(renderer);\n\n    frameBuffer.attach(texture3);\n    blurPass2.setUniform('texture', texture2);\n    blurPass2.render(renderer);\n    frameBuffer.unbind(renderer);\n};\n\nSSRPass.prototype.getTargetTexture = function () {\n    return this._texture3;\n};\n\nSSRPass.prototype.setParameter = function (name, val) {\n    if (name === 'maxIteration') {\n        this._ssrPass.material.define('fragment', 'MAX_ITERATION', val);\n    }\n    else {\n        this._ssrPass.setUniform(name, val);\n    }\n};\n\nSSRPass.prototype.setSSAOTexture = function (texture) {\n    var blendPass = this._blurPass2;\n    if (texture) {\n        blendPass.material.enableTexture('ssaoTex');\n        blendPass.material.set('ssaoTex', texture);\n    }\n    else {\n        blendPass.material.disableTexture('ssaoTex');\n    }\n};\n\nSSRPass.prototype.isFinished = function (frame) {\n    return true;\n};\n\nSSRPass.prototype.dispose = function (renderer) {\n    this._ssrTexture.dispose(renderer);\n    this._texture2.dispose(renderer);\n    this._texture3.dispose(renderer);\n    this._prevTexture.dispose(renderer);\n    this._currentTexture.dispose(renderer);\n    this._frameBuffer.dispose(renderer);\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (SSRPass);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSUGFzcy5qcz9hOWY3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1hdHJpeDQsIFRleHR1cmUyRCwgVGV4dHVyZSwgY29tcG9zaXRvciwgRnJhbWVCdWZmZXIsIFNoYWRlciwgdXRpbCB9IGZyb20gJ2NsYXlnbCc7XG5cbnZhciBQYXNzID0gY29tcG9zaXRvci5QYXNzO1xuXG4vLyBpbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuaW1wb3J0IFNTUkdMU0xDb2RlIGZyb20gJy4vU1NSLmdsc2wuanMnO1xuXG5TaGFkZXIuaW1wb3J0KFNTUkdMU0xDb2RlKTtcblxuLy8gZnVuY3Rpb24gZ2VuZXJhdGVOb3JtYWxzKHNpemUsIG9mZnNldCwgaGVtaXNwaGVyZSkge1xuLy8gICAgIHZhciBrZXJuZWwgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUgKiAzKTtcbi8vICAgICBvZmZzZXQgPSBvZmZzZXQgfHwgMDtcbi8vICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuLy8gICAgICAgICB2YXIgcGhpID0gaGFsdG9uKGkgKyBvZmZzZXQsIDIpICogKGhlbWlzcGhlcmUgPyAxIDogMikgKiBNYXRoLlBJIC8gMjtcbi8vICAgICAgICAgdmFyIHRoZXRhID0gaGFsdG9uKGkgKyBvZmZzZXQsIDMpICogMiAqIE1hdGguUEk7XG4vLyAgICAgICAgIHZhciB4ID0gTWF0aC5jb3ModGhldGEpICogTWF0aC5zaW4ocGhpKTtcbi8vICAgICAgICAgdmFyIHkgPSBNYXRoLnNpbih0aGV0YSkgKiBNYXRoLnNpbihwaGkpO1xuLy8gICAgICAgICB2YXIgeiA9IE1hdGguY29zKHBoaSk7XG4vLyAgICAgICAgIGtlcm5lbFtpICogM10gPSB4O1xuLy8gICAgICAgICBrZXJuZWxbaSAqIDMgKyAxXSA9IHk7XG4vLyAgICAgICAgIGtlcm5lbFtpICogMyArIDJdID0gejtcbi8vICAgICB9XG4vLyAgICAgcmV0dXJuIGtlcm5lbDtcbi8vIH1cblxuZnVuY3Rpb24gU1NSUGFzcyhvcHQpIHtcbiAgICBvcHQgPSBvcHQgfHwge307XG5cbiAgICB0aGlzLl9zc3JQYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2FyLnNzci5tYWluJyksXG4gICAgICAgIGNsZWFyQ29sb3I6IFswLCAwLCAwLCAwXVxuICAgIH0pO1xuICAgIHRoaXMuX2JsdXJQYXNzMSA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci5zc3IuYmx1cicpLFxuICAgICAgICBjbGVhckNvbG9yOiBbMCwgMCwgMCwgMF1cbiAgICB9KTtcbiAgICB0aGlzLl9ibHVyUGFzczIgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjYXIuc3NyLmJsdXInKSxcbiAgICAgICAgY2xlYXJDb2xvcjogWzAsIDAsIDAsIDBdXG4gICAgfSk7XG4gICAgdGhpcy5fYmxlbmRQYXNzID0gbmV3IFBhc3Moe1xuICAgICAgICBmcmFnbWVudDogU2hhZGVyLnNvdXJjZSgnY2xheS5jb21wb3NpdG9yLmJsZW5kJylcbiAgICB9KTtcbiAgICB0aGlzLl9ibGVuZFBhc3MubWF0ZXJpYWwuZGlzYWJsZVRleHR1cmVzQWxsKCk7XG4gICAgdGhpcy5fYmxlbmRQYXNzLm1hdGVyaWFsLmVuYWJsZVRleHR1cmUoWyd0ZXh0dXJlMScsICd0ZXh0dXJlMiddKTtcblxuICAgIHRoaXMuX3NzclBhc3Muc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgb3B0Lm5vcm1hbFRleHR1cmUpO1xuICAgIHRoaXMuX3NzclBhc3Muc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUyJywgb3B0LmRlcHRoVGV4dHVyZSk7XG5cbiAgICB0aGlzLl9ibHVyUGFzczEuc2V0VW5pZm9ybSgnZ0J1ZmZlclRleHR1cmUxJywgb3B0Lm5vcm1hbFRleHR1cmUpO1xuICAgIHRoaXMuX2JsdXJQYXNzMS5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTInLCBvcHQuZGVwdGhUZXh0dXJlKTtcblxuICAgIHRoaXMuX2JsdXJQYXNzMi5zZXRVbmlmb3JtKCdnQnVmZmVyVGV4dHVyZTEnLCBvcHQubm9ybWFsVGV4dHVyZSk7XG4gICAgdGhpcy5fYmx1clBhc3MyLnNldFVuaWZvcm0oJ2dCdWZmZXJUZXh0dXJlMicsIG9wdC5kZXB0aFRleHR1cmUpO1xuXG4gICAgdGhpcy5fYmx1clBhc3MyLm1hdGVyaWFsLmRlZmluZSgnZnJhZ21lbnQnLCAnVkVSVElDQUwnKTtcbiAgICB0aGlzLl9ibHVyUGFzczIubWF0ZXJpYWwuZGVmaW5lKCdmcmFnbWVudCcsICdCTEVORCcpO1xuXG4gICAgdGhpcy5fc3NyVGV4dHVyZSA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcbiAgICB0aGlzLl90ZXh0dXJlMiA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcbiAgICB0aGlzLl90ZXh0dXJlMyA9IG5ldyBUZXh0dXJlMkQoe1xuICAgICAgICB0eXBlOiBUZXh0dXJlLkhBTEZfRkxPQVRcbiAgICB9KTtcblxuICAgIHRoaXMuX2ZyYW1lQnVmZmVyID0gbmV3IEZyYW1lQnVmZmVyKHtcbiAgICAgICAgZGVwdGhCdWZmZXI6IGZhbHNlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9ub3JtYWxEaXN0cmlidXRpb24gPSBudWxsO1xuXG4gICAgdGhpcy5fZG93blNjYWxlID0gMTtcbn1cblxuU1NSUGFzcy5wcm90b3R5cGUuc2V0QW1iaWVudEN1YmVtYXAgPSBmdW5jdGlvbiAoc3BlY3VsYXJDdWJlbWFwLCBicmRmTG9va3VwLCBzcGVjdWxhckludGVuc2l0eSkge1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWwuc2V0KCdzcGVjdWxhckN1YmVtYXAnLCBzcGVjdWxhckN1YmVtYXApO1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWwuc2V0KCdicmRmTG9va3VwJywgYnJkZkxvb2t1cCk7XG4gICAgdGhpcy5fc3NyUGFzcy5tYXRlcmlhbC5zZXQoJ3NwZWN1bGFySW50ZW5zaXR5Jywgc3BlY3VsYXJJbnRlbnNpdHkpO1xuXG4gICAgdmFyIGVuYWJsZVNwZWN1bGFyTWFwID0gc3BlY3VsYXJDdWJlbWFwICYmIHNwZWN1bGFySW50ZW5zaXR5O1xuICAgIHRoaXMuX3NzclBhc3MubWF0ZXJpYWxbZW5hYmxlU3BlY3VsYXJNYXAgPyAnZW5hYmxlVGV4dHVyZScgOiAnZGlzYWJsZVRleHR1cmUnXSgnc3BlY3VsYXJDdWJlbWFwJyk7XG59O1xuXG5TU1JQYXNzLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAocmVuZGVyZXIsIGNhbWVyYSwgc291cmNlVGV4dHVyZSwgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUsIGZyYW1lKSB7XG4gICAgdmFyIHdpZHRoID0gcmVuZGVyZXIuZ2V0V2lkdGgoKTtcbiAgICB2YXIgaGVpZ2h0ID0gcmVuZGVyZXIuZ2V0SGVpZ2h0KCk7XG4gICAgdmFyIHNzclRleHR1cmUgPSB0aGlzLl9zc3JUZXh0dXJlO1xuICAgIHZhciB0ZXh0dXJlMiA9IHRoaXMuX3RleHR1cmUyO1xuICAgIHZhciB0ZXh0dXJlMyA9IHRoaXMuX3RleHR1cmUzO1xuICAgIHNzclRleHR1cmUud2lkdGggPSB3aWR0aCAvIHRoaXMuX2Rvd25TY2FsZTtcbiAgICBzc3JUZXh0dXJlLmhlaWdodCA9IGhlaWdodCAvIHRoaXMuX2Rvd25TY2FsZTtcblxuICAgIHRleHR1cmUyLndpZHRoID0gdGV4dHVyZTMud2lkdGggPSB3aWR0aDtcbiAgICB0ZXh0dXJlMi5oZWlnaHQgPSB0ZXh0dXJlMy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICB2YXIgZnJhbWVCdWZmZXIgPSB0aGlzLl9mcmFtZUJ1ZmZlcjtcblxuICAgIHZhciBzc3JQYXNzID0gdGhpcy5fc3NyUGFzcztcbiAgICB2YXIgYmx1clBhc3MxID0gdGhpcy5fYmx1clBhc3MxO1xuICAgIHZhciBibHVyUGFzczIgPSB0aGlzLl9ibHVyUGFzczI7XG5cbiAgICB2YXIgdG9WaWV3U3BhY2UgPSBuZXcgTWF0cml4NCgpO1xuICAgIE1hdHJpeDQudHJhbnNwb3NlKHRvVmlld1NwYWNlLCBjYW1lcmEud29ybGRUcmFuc2Zvcm0pO1xuXG4gICAgc3NyUGFzcy5zZXRVbmlmb3JtKCdzb3VyY2VUZXh0dXJlJywgcmVmbGVjdGlvblNvdXJjZVRleHR1cmUpO1xuICAgIHNzclBhc3Muc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBzc3JQYXNzLnNldFVuaWZvcm0oJ3Byb2plY3Rpb25JbnYnLCBjYW1lcmEuaW52UHJvamVjdGlvbk1hdHJpeC5hcnJheSk7XG4gICAgc3NyUGFzcy5zZXRVbmlmb3JtKCd0b1ZpZXdTcGFjZScsIHRvVmlld1NwYWNlLmFycmF5KTtcbiAgICBzc3JQYXNzLnNldFVuaWZvcm0oJ25lYXJaJywgY2FtZXJhLm5lYXIpO1xuICAgIHNzclBhc3Muc2V0VW5pZm9ybSgnaml0dGVyT2Zmc2V0JywgTWF0aC5yYW5kb20oKSk7XG5cbiAgICBibHVyUGFzczEuc2V0VW5pZm9ybSgndGV4dHVyZVNpemUnLCBbc3NyVGV4dHVyZS53aWR0aCwgc3NyVGV4dHVyZS5oZWlnaHRdKTtcbiAgICBibHVyUGFzczIuc2V0VW5pZm9ybSgndGV4dHVyZVNpemUnLCBbd2lkdGgsIGhlaWdodF0pO1xuICAgIGJsdXJQYXNzMi5zZXRVbmlmb3JtKCdzb3VyY2VUZXh0dXJlJywgc291cmNlVGV4dHVyZSk7XG5cbiAgICBibHVyUGFzczEuc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcbiAgICBibHVyUGFzczIuc2V0VW5pZm9ybSgncHJvamVjdGlvbicsIGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LmFycmF5KTtcblxuICAgIGZyYW1lQnVmZmVyLmF0dGFjaChzc3JUZXh0dXJlKTtcbiAgICBmcmFtZUJ1ZmZlci5iaW5kKHJlbmRlcmVyKTtcbiAgICBzc3JQYXNzLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICBmcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZTIpO1xuICAgIGJsdXJQYXNzMS5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgc3NyVGV4dHVyZSk7XG4gICAgYmx1clBhc3MxLnJlbmRlcihyZW5kZXJlcik7XG5cbiAgICBmcmFtZUJ1ZmZlci5hdHRhY2godGV4dHVyZTMpO1xuICAgIGJsdXJQYXNzMi5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdGV4dHVyZTIpO1xuICAgIGJsdXJQYXNzMi5yZW5kZXIocmVuZGVyZXIpO1xuICAgIGZyYW1lQnVmZmVyLnVuYmluZChyZW5kZXJlcik7XG59O1xuXG5TU1JQYXNzLnByb3RvdHlwZS5nZXRUYXJnZXRUZXh0dXJlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLl90ZXh0dXJlMztcbn07XG5cblNTUlBhc3MucHJvdG90eXBlLnNldFBhcmFtZXRlciA9IGZ1bmN0aW9uIChuYW1lLCB2YWwpIHtcbiAgICBpZiAobmFtZSA9PT0gJ21heEl0ZXJhdGlvbicpIHtcbiAgICAgICAgdGhpcy5fc3NyUGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ01BWF9JVEVSQVRJT04nLCB2YWwpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgdGhpcy5fc3NyUGFzcy5zZXRVbmlmb3JtKG5hbWUsIHZhbCk7XG4gICAgfVxufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuc2V0U1NBT1RleHR1cmUgPSBmdW5jdGlvbiAodGV4dHVyZSkge1xuICAgIHZhciBibGVuZFBhc3MgPSB0aGlzLl9ibHVyUGFzczI7XG4gICAgaWYgKHRleHR1cmUpIHtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLmVuYWJsZVRleHR1cmUoJ3NzYW9UZXgnKTtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLnNldCgnc3Nhb1RleCcsIHRleHR1cmUpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgYmxlbmRQYXNzLm1hdGVyaWFsLmRpc2FibGVUZXh0dXJlKCdzc2FvVGV4Jyk7XG4gICAgfVxufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuaXNGaW5pc2hlZCA9IGZ1bmN0aW9uIChmcmFtZSkge1xuICAgIHJldHVybiB0cnVlO1xufTtcblxuU1NSUGFzcy5wcm90b3R5cGUuZGlzcG9zZSA9IGZ1bmN0aW9uIChyZW5kZXJlcikge1xuICAgIHRoaXMuX3NzclRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fdGV4dHVyZTIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fdGV4dHVyZTMuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fcHJldlRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fY3VycmVudFRleHR1cmUuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgdGhpcy5fZnJhbWVCdWZmZXIuZGlzcG9zZShyZW5kZXJlcik7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBTU1JQYXNzO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSUGFzcy5qc1xuLy8gbW9kdWxlIGlkID0gMjAwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///200\n");

/***/ }),
/* 201 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.ssr.main\\n#define SHADER_NAME SSR\\n#define MAX_ITERATION 20;\\n#define MAX_BINARY_SEARCH_ITERATION 5;\\nuniform sampler2D sourceTexture;\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform mat4 projection;\\nuniform mat4 projectionInv;\\nuniform mat4 toViewSpace;\\nuniform float maxRayDistance = 4;\\nuniform float pixelStride = 16;\\nuniform float pixelStrideZCutoff = 10;\\nuniform float screenEdgeFadeStart = 0.9;\\nuniform float eyeFadeStart = 0.4;uniform float eyeFadeEnd = 0.8;\\nuniform float minGlossiness = 0.2;uniform float zThicknessThreshold = 0.1;\\nuniform float jitterOffset = 0;\\nuniform float nearZ;\\nuniform vec2 viewportSize: VIEWPORT_SIZE;\\nuniform float maxMipmapLevel = 5;\\nvarying vec2 v_Texcoord;\\n#ifdef DEPTH_DECODE\\n@import clay.util.decode_float\\n#endif\\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\\n{\\n vec4 depthTexel = texture2D(depthTexture, uv);\\n#ifdef DEPTH_DECODE\\n return decodeFloat(depthTexel) * 2.0 - 1.0;\\n#else\\n return depthTexel.r * 2.0 - 1.0;\\n#endif\\n}\\nfloat linearDepth(float depth)\\n{\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\\n{\\n if (rayZFar > rayZNear)\\n {\\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\\n }\\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\\n}\\nbool traceScreenSpaceRay(\\n vec3 rayOrigin, vec3 rayDir, float jitter,\\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\\n)\\n{\\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\\n vec4 H1 = projection * vec4(rayEnd, 1.0);\\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\\n vec2 delta = P1 - P0;\\n bool permute = false;\\n if (abs(delta.x) < abs(delta.y)) {\\n permute = true;\\n delta = delta.yx;\\n P0 = P0.yx;\\n P1 = P1.yx;\\n }\\n float stepDir = sign(delta.x);\\n float invdx = stepDir / delta.x;\\n vec3 dQ = (Q1 - Q0) * invdx;\\n float dk = (k1 - k0) * invdx;\\n vec2 dP = vec2(stepDir, delta.y * invdx);\\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\\n float pixStride = 1.0 + strideScaler * pixelStride;\\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\\n vec4 pqk = vec4(P0, Q0.z, k0);\\n vec4 dPQK = vec4(dP, dQ.z, dk);\\n pqk += dPQK * jitter;\\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\\n float rayZNear;\\n bool intersect = false;\\n vec2 texelSize = 1.0 / viewportSize;\\n iterationCount = 0.0;\\n for (int i = 0; i < MAX_ITERATION; i++)\\n {\\n pqk += dPQK;\\n rayZNear = rayZFar;\\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\\n hitPixel = permute ? pqk.yx : pqk.xy;\\n hitPixel *= texelSize;\\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\\n iterationCount += 1.0;\\n if (intersect) {\\n break;\\n }\\n }\\n if (pixStride > 1.0 && intersect && iterationCount > 1.0)\\n {\\n pqk -= dPQK;\\n dPQK /= pixStride;\\n float originalStride = pixStride * 0.5;\\n float stride = originalStride;\\n rayZNear = pqk.z / pqk.w;\\n rayZFar = rayZNear;\\n for (int j = 0; j < MAX_BINARY_SEARCH_ITERATION; j++)\\n {\\n pqk += dPQK * stride;\\n rayZNear = rayZFar;\\n rayZFar = (dPQK.z * -0.5 + pqk.z) / (dPQK.w * -0.5 + pqk.w);\\n hitPixel = permute ? pqk.yx : pqk.xy;\\n hitPixel *= texelSize;\\n originalStride *= 0.5;\\n stride = rayIntersectDepth(rayZNear, rayZFar, hitPixel) ? -originalStride : originalStride;\\n }\\n }\\n Q0.xy += dQ.xy * iterationCount;\\n Q0.z = pqk.z;\\n hitPoint = Q0 / pqk.w;\\n return intersect;\\n}\\nfloat calculateAlpha(\\n float iterationCount, float reflectivity,\\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\\n)\\n{\\n float alpha = clamp(reflectivity, 0.0, 1.0);\\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\\n float _eyeFadeStart = eyeFadeStart;\\n float _eyeFadeEnd = eyeFadeEnd;\\n if (_eyeFadeStart > _eyeFadeEnd) {\\n float tmp = _eyeFadeEnd;\\n _eyeFadeEnd = _eyeFadeStart;\\n _eyeFadeStart = tmp;\\n }\\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\\n return alpha;\\n}\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\\n discard;\\n }\\n float g = normalAndGloss.a;\\n if (g <= minGlossiness) {\\n discard;\\n }\\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\\n vec3 N = normalAndGloss.rgb * 2.0 - 1.0;\\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\\n vec4 pos = projectionInv * projectedPos;\\n vec3 rayOrigin = pos.xyz / pos.w;\\n vec3 rayDir = normalize(reflect(normalize(rayOrigin), N));\\n vec2 hitPixel;\\n vec3 hitPoint;\\n float iterationCount;\\n vec2 uv2 = v_Texcoord * viewportSize;\\n float jitter = fract((uv2.x + uv2.y) * 0.25 + jitterOffset);\\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\\n float dist = distance(rayOrigin, hitPoint);\\n float alpha = calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir) * float(intersect);\\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\\n if (dot(hitNormal, rayDir) >= 0.0) {\\n discard;\\n }\\n if (!intersect) {\\n discard;\\n }\\n vec4 color = decodeHDR(texture2D(sourceTexture, hitPixel));\\n gl_FragColor = encodeHDR(vec4(color.rgb * alpha, color.a));\\n}\\n@end\\n@export car.ssr.blur\\nuniform sampler2D texture;\\nuniform sampler2D gBufferTexture1;\\nuniform sampler2D gBufferTexture2;\\nuniform mat4 projection;\\nuniform float depthRange : 0.05;\\nvarying vec2 v_Texcoord;\\nuniform vec2 textureSize;\\nuniform float blurSize : 1.0;\\n#ifdef BLEND\\n #ifdef SSAOTEX_ENABLED\\nuniform sampler2D ssaoTex;\\n #endif\\nuniform sampler2D sourceTexture;\\n#endif\\nfloat getLinearDepth(vec2 coord)\\n{\\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\\n}\\n@import clay.util.rgbm\\nvoid main()\\n{\\n @import clay.compositor.kernel.gaussian_9\\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\\n float g = centerNTexel.a;\\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\\n#ifdef VERTICAL\\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\\n#else\\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\\n#endif\\n vec2 coord = v_Texcoord;\\n vec4 sum = vec4(0.0);\\n float weightAll = 0.0;\\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\\n float cD = getLinearDepth(v_Texcoord);\\n for (int i = 0; i < 9; i++) {\\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\\n float w = gaussianKernel[i]\\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\\n float d = getLinearDepth(coord);\\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\\n weightAll += w;\\n sum += decodeHDR(texture2D(texture, coord)) * w;\\n }\\n#ifdef BLEND\\n float aoFactor = 1.0;\\n #ifdef SSAOTEX_ENABLED\\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\\n #endif\\n gl_FragColor = encodeHDR(\\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\\n );\\n#else\\n gl_FragColor = encodeHDR(sum / weightAll);\\n#endif\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvU1NSLmdsc2wuanM/YWI3NSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2FyLnNzci5tYWluXFxuI2RlZmluZSBTSEFERVJfTkFNRSBTU1JcXG4jZGVmaW5lIE1BWF9JVEVSQVRJT04gMjA7XFxuI2RlZmluZSBNQVhfQklOQVJZX1NFQVJDSF9JVEVSQVRJT04gNTtcXG51bmlmb3JtIHNhbXBsZXIyRCBzb3VyY2VUZXh0dXJlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTI7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb25JbnY7XFxudW5pZm9ybSBtYXQ0IHRvVmlld1NwYWNlO1xcbnVuaWZvcm0gZmxvYXQgbWF4UmF5RGlzdGFuY2UgPSA0O1xcbnVuaWZvcm0gZmxvYXQgcGl4ZWxTdHJpZGUgPSAxNjtcXG51bmlmb3JtIGZsb2F0IHBpeGVsU3RyaWRlWkN1dG9mZiA9IDEwO1xcbnVuaWZvcm0gZmxvYXQgc2NyZWVuRWRnZUZhZGVTdGFydCA9IDAuOTtcXG51bmlmb3JtIGZsb2F0IGV5ZUZhZGVTdGFydCA9IDAuNDt1bmlmb3JtIGZsb2F0IGV5ZUZhZGVFbmQgPSAwLjg7XFxudW5pZm9ybSBmbG9hdCBtaW5HbG9zc2luZXNzID0gMC4yO3VuaWZvcm0gZmxvYXQgelRoaWNrbmVzc1RocmVzaG9sZCA9IDAuMTtcXG51bmlmb3JtIGZsb2F0IGppdHRlck9mZnNldCA9IDA7XFxudW5pZm9ybSBmbG9hdCBuZWFyWjtcXG51bmlmb3JtIHZlYzIgdmlld3BvcnRTaXplOiBWSUVXUE9SVF9TSVpFO1xcbnVuaWZvcm0gZmxvYXQgbWF4TWlwbWFwTGV2ZWwgPSA1O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbiNpZmRlZiBERVBUSF9ERUNPREVcXG5AaW1wb3J0IGNsYXkudXRpbC5kZWNvZGVfZmxvYXRcXG4jZW5kaWZcXG5mbG9hdCBmZXRjaERlcHRoKHNhbXBsZXIyRCBkZXB0aFRleHR1cmUsIHZlYzIgdXYpXFxue1xcbiB2ZWM0IGRlcHRoVGV4ZWwgPSB0ZXh0dXJlMkQoZGVwdGhUZXh0dXJlLCB1dik7XFxuI2lmZGVmIERFUFRIX0RFQ09ERVxcbiByZXR1cm4gZGVjb2RlRmxvYXQoZGVwdGhUZXhlbCkgKiAyLjAgLSAxLjA7XFxuI2Vsc2VcXG4gcmV0dXJuIGRlcHRoVGV4ZWwuciAqIDIuMCAtIDEuMDtcXG4jZW5kaWZcXG59XFxuZmxvYXQgbGluZWFyRGVwdGgoZmxvYXQgZGVwdGgpXFxue1xcbiByZXR1cm4gcHJvamVjdGlvblszXVsyXSAvIChkZXB0aCAqIHByb2plY3Rpb25bMl1bM10gLSBwcm9qZWN0aW9uWzJdWzJdKTtcXG59XFxuYm9vbCByYXlJbnRlcnNlY3REZXB0aChmbG9hdCByYXlaTmVhciwgZmxvYXQgcmF5WkZhciwgdmVjMiBoaXRQaXhlbClcXG57XFxuIGlmIChyYXlaRmFyID4gcmF5Wk5lYXIpXFxuIHtcXG4gZmxvYXQgdCA9IHJheVpGYXI7IHJheVpGYXIgPSByYXlaTmVhcjsgcmF5Wk5lYXIgPSB0O1xcbiB9XFxuIGZsb2F0IGNhbWVyYVogPSBsaW5lYXJEZXB0aChmZXRjaERlcHRoKGdCdWZmZXJUZXh0dXJlMiwgaGl0UGl4ZWwpKTtcXG4gcmV0dXJuIHJheVpGYXIgPD0gY2FtZXJhWiAmJiByYXlaTmVhciA+PSBjYW1lcmFaIC0gelRoaWNrbmVzc1RocmVzaG9sZDtcXG59XFxuYm9vbCB0cmFjZVNjcmVlblNwYWNlUmF5KFxcbiB2ZWMzIHJheU9yaWdpbiwgdmVjMyByYXlEaXIsIGZsb2F0IGppdHRlcixcXG4gb3V0IHZlYzIgaGl0UGl4ZWwsIG91dCB2ZWMzIGhpdFBvaW50LCBvdXQgZmxvYXQgaXRlcmF0aW9uQ291bnRcXG4pXFxue1xcbiBmbG9hdCByYXlMZW5ndGggPSAoKHJheU9yaWdpbi56ICsgcmF5RGlyLnogKiBtYXhSYXlEaXN0YW5jZSkgPiAtbmVhclopXFxuID8gKC1uZWFyWiAtIHJheU9yaWdpbi56KSAvIHJheURpci56IDogbWF4UmF5RGlzdGFuY2U7XFxuIHZlYzMgcmF5RW5kID0gcmF5T3JpZ2luICsgcmF5RGlyICogcmF5TGVuZ3RoO1xcbiB2ZWM0IEgwID0gcHJvamVjdGlvbiAqIHZlYzQocmF5T3JpZ2luLCAxLjApO1xcbiB2ZWM0IEgxID0gcHJvamVjdGlvbiAqIHZlYzQocmF5RW5kLCAxLjApO1xcbiBmbG9hdCBrMCA9IDEuMCAvIEgwLncsIGsxID0gMS4wIC8gSDEudztcXG4gdmVjMyBRMCA9IHJheU9yaWdpbiAqIGswLCBRMSA9IHJheUVuZCAqIGsxO1xcbiB2ZWMyIFAwID0gKEgwLnh5ICogazAgKiAwLjUgKyAwLjUpICogdmlld3BvcnRTaXplO1xcbiB2ZWMyIFAxID0gKEgxLnh5ICogazEgKiAwLjUgKyAwLjUpICogdmlld3BvcnRTaXplO1xcbiBQMSArPSBkb3QoUDEgLSBQMCwgUDEgLSBQMCkgPCAwLjAwMDEgPyAwLjAxIDogMC4wO1xcbiB2ZWMyIGRlbHRhID0gUDEgLSBQMDtcXG4gYm9vbCBwZXJtdXRlID0gZmFsc2U7XFxuIGlmIChhYnMoZGVsdGEueCkgPCBhYnMoZGVsdGEueSkpIHtcXG4gcGVybXV0ZSA9IHRydWU7XFxuIGRlbHRhID0gZGVsdGEueXg7XFxuIFAwID0gUDAueXg7XFxuIFAxID0gUDEueXg7XFxuIH1cXG4gZmxvYXQgc3RlcERpciA9IHNpZ24oZGVsdGEueCk7XFxuIGZsb2F0IGludmR4ID0gc3RlcERpciAvIGRlbHRhLng7XFxuIHZlYzMgZFEgPSAoUTEgLSBRMCkgKiBpbnZkeDtcXG4gZmxvYXQgZGsgPSAoazEgLSBrMCkgKiBpbnZkeDtcXG4gdmVjMiBkUCA9IHZlYzIoc3RlcERpciwgZGVsdGEueSAqIGludmR4KTtcXG4gZmxvYXQgc3RyaWRlU2NhbGVyID0gMS4wIC0gbWluKDEuMCwgLXJheU9yaWdpbi56IC8gcGl4ZWxTdHJpZGVaQ3V0b2ZmKTtcXG4gZmxvYXQgcGl4U3RyaWRlID0gMS4wICsgc3RyaWRlU2NhbGVyICogcGl4ZWxTdHJpZGU7XFxuIGRQICo9IHBpeFN0cmlkZTsgZFEgKj0gcGl4U3RyaWRlOyBkayAqPSBwaXhTdHJpZGU7XFxuIHZlYzQgcHFrID0gdmVjNChQMCwgUTAueiwgazApO1xcbiB2ZWM0IGRQUUsgPSB2ZWM0KGRQLCBkUS56LCBkayk7XFxuIHBxayArPSBkUFFLICogaml0dGVyO1xcbiBmbG9hdCByYXlaRmFyID0gKGRQUUsueiAqIDAuNSArIHBxay56KSAvIChkUFFLLncgKiAwLjUgKyBwcWsudyk7XFxuIGZsb2F0IHJheVpOZWFyO1xcbiBib29sIGludGVyc2VjdCA9IGZhbHNlO1xcbiB2ZWMyIHRleGVsU2l6ZSA9IDEuMCAvIHZpZXdwb3J0U2l6ZTtcXG4gaXRlcmF0aW9uQ291bnQgPSAwLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgTUFYX0lURVJBVElPTjsgaSsrKVxcbiB7XFxuIHBxayArPSBkUFFLO1xcbiByYXlaTmVhciA9IHJheVpGYXI7XFxuIHJheVpGYXIgPSAoZFBRSy56ICogMC41ICsgcHFrLnopIC8gKGRQUUsudyAqIDAuNSArIHBxay53KTtcXG4gaGl0UGl4ZWwgPSBwZXJtdXRlID8gcHFrLnl4IDogcHFrLnh5O1xcbiBoaXRQaXhlbCAqPSB0ZXhlbFNpemU7XFxuIGludGVyc2VjdCA9IHJheUludGVyc2VjdERlcHRoKHJheVpOZWFyLCByYXlaRmFyLCBoaXRQaXhlbCk7XFxuIGl0ZXJhdGlvbkNvdW50ICs9IDEuMDtcXG4gaWYgKGludGVyc2VjdCkge1xcbiBicmVhaztcXG4gfVxcbiB9XFxuIGlmIChwaXhTdHJpZGUgPiAxLjAgJiYgaW50ZXJzZWN0ICYmIGl0ZXJhdGlvbkNvdW50ID4gMS4wKVxcbiB7XFxuIHBxayAtPSBkUFFLO1xcbiBkUFFLIC89IHBpeFN0cmlkZTtcXG4gZmxvYXQgb3JpZ2luYWxTdHJpZGUgPSBwaXhTdHJpZGUgKiAwLjU7XFxuIGZsb2F0IHN0cmlkZSA9IG9yaWdpbmFsU3RyaWRlO1xcbiByYXlaTmVhciA9IHBxay56IC8gcHFrLnc7XFxuIHJheVpGYXIgPSByYXlaTmVhcjtcXG4gZm9yIChpbnQgaiA9IDA7IGogPCBNQVhfQklOQVJZX1NFQVJDSF9JVEVSQVRJT047IGorKylcXG4ge1xcbiBwcWsgKz0gZFBRSyAqIHN0cmlkZTtcXG4gcmF5Wk5lYXIgPSByYXlaRmFyO1xcbiByYXlaRmFyID0gKGRQUUsueiAqIC0wLjUgKyBwcWsueikgLyAoZFBRSy53ICogLTAuNSArIHBxay53KTtcXG4gaGl0UGl4ZWwgPSBwZXJtdXRlID8gcHFrLnl4IDogcHFrLnh5O1xcbiBoaXRQaXhlbCAqPSB0ZXhlbFNpemU7XFxuIG9yaWdpbmFsU3RyaWRlICo9IDAuNTtcXG4gc3RyaWRlID0gcmF5SW50ZXJzZWN0RGVwdGgocmF5Wk5lYXIsIHJheVpGYXIsIGhpdFBpeGVsKSA/IC1vcmlnaW5hbFN0cmlkZSA6IG9yaWdpbmFsU3RyaWRlO1xcbiB9XFxuIH1cXG4gUTAueHkgKz0gZFEueHkgKiBpdGVyYXRpb25Db3VudDtcXG4gUTAueiA9IHBxay56O1xcbiBoaXRQb2ludCA9IFEwIC8gcHFrLnc7XFxuIHJldHVybiBpbnRlcnNlY3Q7XFxufVxcbmZsb2F0IGNhbGN1bGF0ZUFscGhhKFxcbiBmbG9hdCBpdGVyYXRpb25Db3VudCwgZmxvYXQgcmVmbGVjdGl2aXR5LFxcbiB2ZWMyIGhpdFBpeGVsLCB2ZWMzIGhpdFBvaW50LCBmbG9hdCBkaXN0LCB2ZWMzIHJheURpclxcbilcXG57XFxuIGZsb2F0IGFscGhhID0gY2xhbXAocmVmbGVjdGl2aXR5LCAwLjAsIDEuMCk7XFxuIGFscGhhICo9IDEuMCAtIChpdGVyYXRpb25Db3VudCAvIGZsb2F0KE1BWF9JVEVSQVRJT04pKTtcXG4gdmVjMiBoaXRQaXhlbE5EQyA9IGhpdFBpeGVsICogMi4wIC0gMS4wO1xcbiBmbG9hdCBtYXhEaW1lbnNpb24gPSBtaW4oMS4wLCBtYXgoYWJzKGhpdFBpeGVsTkRDLngpLCBhYnMoaGl0UGl4ZWxOREMueSkpKTtcXG4gYWxwaGEgKj0gMS4wIC0gbWF4KDAuMCwgbWF4RGltZW5zaW9uIC0gc2NyZWVuRWRnZUZhZGVTdGFydCkgLyAoMS4wIC0gc2NyZWVuRWRnZUZhZGVTdGFydCk7XFxuIGZsb2F0IF9leWVGYWRlU3RhcnQgPSBleWVGYWRlU3RhcnQ7XFxuIGZsb2F0IF9leWVGYWRlRW5kID0gZXllRmFkZUVuZDtcXG4gaWYgKF9leWVGYWRlU3RhcnQgPiBfZXllRmFkZUVuZCkge1xcbiBmbG9hdCB0bXAgPSBfZXllRmFkZUVuZDtcXG4gX2V5ZUZhZGVFbmQgPSBfZXllRmFkZVN0YXJ0O1xcbiBfZXllRmFkZVN0YXJ0ID0gdG1wO1xcbiB9XFxuIGZsb2F0IGV5ZURpciA9IGNsYW1wKHJheURpci56LCBfZXllRmFkZVN0YXJ0LCBfZXllRmFkZUVuZCk7XFxuIGFscGhhICo9IDEuMCAtIChleWVEaXIgLSBfZXllRmFkZVN0YXJ0KSAvIChfZXllRmFkZUVuZCAtIF9leWVGYWRlU3RhcnQpO1xcbiBhbHBoYSAqPSAxLjAgLSBjbGFtcChkaXN0IC8gbWF4UmF5RGlzdGFuY2UsIDAuMCwgMS4wKTtcXG4gcmV0dXJuIGFscGhhO1xcbn1cXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIHZlYzQgbm9ybWFsQW5kR2xvc3MgPSB0ZXh0dXJlMkQoZ0J1ZmZlclRleHR1cmUxLCB2X1RleGNvb3JkKTtcXG4gaWYgKGRvdChub3JtYWxBbmRHbG9zcy5yZ2IsIHZlYzMoMS4wKSkgPT0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gZmxvYXQgZyA9IG5vcm1hbEFuZEdsb3NzLmE7XFxuIGlmIChnIDw9IG1pbkdsb3NzaW5lc3MpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiBmbG9hdCByZWZsZWN0aXZpdHkgPSAoZyAtIG1pbkdsb3NzaW5lc3MpIC8gKDEuMCAtIG1pbkdsb3NzaW5lc3MpO1xcbiB2ZWMzIE4gPSBub3JtYWxBbmRHbG9zcy5yZ2IgKiAyLjAgLSAxLjA7XFxuIE4gPSBub3JtYWxpemUoKHRvVmlld1NwYWNlICogdmVjNChOLCAwLjApKS54eXopO1xcbiB2ZWM0IHByb2plY3RlZFBvcyA9IHZlYzQodl9UZXhjb29yZCAqIDIuMCAtIDEuMCwgZmV0Y2hEZXB0aChnQnVmZmVyVGV4dHVyZTIsIHZfVGV4Y29vcmQpLCAxLjApO1xcbiB2ZWM0IHBvcyA9IHByb2plY3Rpb25JbnYgKiBwcm9qZWN0ZWRQb3M7XFxuIHZlYzMgcmF5T3JpZ2luID0gcG9zLnh5eiAvIHBvcy53O1xcbiB2ZWMzIHJheURpciA9IG5vcm1hbGl6ZShyZWZsZWN0KG5vcm1hbGl6ZShyYXlPcmlnaW4pLCBOKSk7XFxuIHZlYzIgaGl0UGl4ZWw7XFxuIHZlYzMgaGl0UG9pbnQ7XFxuIGZsb2F0IGl0ZXJhdGlvbkNvdW50O1xcbiB2ZWMyIHV2MiA9IHZfVGV4Y29vcmQgKiB2aWV3cG9ydFNpemU7XFxuIGZsb2F0IGppdHRlciA9IGZyYWN0KCh1djIueCArIHV2Mi55KSAqIDAuMjUgKyBqaXR0ZXJPZmZzZXQpO1xcbiBib29sIGludGVyc2VjdCA9IHRyYWNlU2NyZWVuU3BhY2VSYXkocmF5T3JpZ2luLCByYXlEaXIsIGppdHRlciwgaGl0UGl4ZWwsIGhpdFBvaW50LCBpdGVyYXRpb25Db3VudCk7XFxuIGZsb2F0IGRpc3QgPSBkaXN0YW5jZShyYXlPcmlnaW4sIGhpdFBvaW50KTtcXG4gZmxvYXQgYWxwaGEgPSBjYWxjdWxhdGVBbHBoYShpdGVyYXRpb25Db3VudCwgcmVmbGVjdGl2aXR5LCBoaXRQaXhlbCwgaGl0UG9pbnQsIGRpc3QsIHJheURpcikgKiBmbG9hdChpbnRlcnNlY3QpO1xcbiB2ZWMzIGhpdE5vcm1hbCA9IHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIGhpdFBpeGVsKS5yZ2IgKiAyLjAgLSAxLjA7XFxuIGhpdE5vcm1hbCA9IG5vcm1hbGl6ZSgodG9WaWV3U3BhY2UgKiB2ZWM0KGhpdE5vcm1hbCwgMC4wKSkueHl6KTtcXG4gaWYgKGRvdChoaXROb3JtYWwsIHJheURpcikgPj0gMC4wKSB7XFxuIGRpc2NhcmQ7XFxuIH1cXG4gaWYgKCFpbnRlcnNlY3QpIHtcXG4gZGlzY2FyZDtcXG4gfVxcbiB2ZWM0IGNvbG9yID0gZGVjb2RlSERSKHRleHR1cmUyRChzb3VyY2VUZXh0dXJlLCBoaXRQaXhlbCkpO1xcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIodmVjNChjb2xvci5yZ2IgKiBhbHBoYSwgY29sb3IuYSkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuc3NyLmJsdXJcXG51bmlmb3JtIHNhbXBsZXIyRCB0ZXh0dXJlO1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdCdWZmZXJUZXh0dXJlMTtcXG51bmlmb3JtIHNhbXBsZXIyRCBnQnVmZmVyVGV4dHVyZTI7XFxudW5pZm9ybSBtYXQ0IHByb2plY3Rpb247XFxudW5pZm9ybSBmbG9hdCBkZXB0aFJhbmdlIDogMC4wNTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemU7XFxudW5pZm9ybSBmbG9hdCBibHVyU2l6ZSA6IDEuMDtcXG4jaWZkZWYgQkxFTkRcXG4gI2lmZGVmIFNTQU9URVhfRU5BQkxFRFxcbnVuaWZvcm0gc2FtcGxlcjJEIHNzYW9UZXg7XFxuICNlbmRpZlxcbnVuaWZvcm0gc2FtcGxlcjJEIHNvdXJjZVRleHR1cmU7XFxuI2VuZGlmXFxuZmxvYXQgZ2V0TGluZWFyRGVwdGgodmVjMiBjb29yZClcXG57XFxuIGZsb2F0IGRlcHRoID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMiwgY29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuIHJldHVybiBwcm9qZWN0aW9uWzNdWzJdIC8gKGRlcHRoICogcHJvamVjdGlvblsyXVszXSAtIHByb2plY3Rpb25bMl1bMl0pO1xcbn1cXG5AaW1wb3J0IGNsYXkudXRpbC5yZ2JtXFxudm9pZCBtYWluKClcXG57XFxuIEBpbXBvcnQgY2xheS5jb21wb3NpdG9yLmtlcm5lbC5nYXVzc2lhbl85XFxuIHZlYzQgY2VudGVyTlRleGVsID0gdGV4dHVyZTJEKGdCdWZmZXJUZXh0dXJlMSwgdl9UZXhjb29yZCk7XFxuIGZsb2F0IGcgPSBjZW50ZXJOVGV4ZWwuYTtcXG4gZmxvYXQgbWF4Qmx1clNpemUgPSBjbGFtcCgxLjAgLSBnLCAwLjAsIDEuMCkgKiBibHVyU2l6ZTtcXG4jaWZkZWYgVkVSVElDQUxcXG4gdmVjMiBvZmYgPSB2ZWMyKDAuMCwgbWF4Qmx1clNpemUgLyB0ZXh0dXJlU2l6ZS55KTtcXG4jZWxzZVxcbiB2ZWMyIG9mZiA9IHZlYzIobWF4Qmx1clNpemUgLyB0ZXh0dXJlU2l6ZS54LCAwLjApO1xcbiNlbmRpZlxcbiB2ZWMyIGNvb3JkID0gdl9UZXhjb29yZDtcXG4gdmVjNCBzdW0gPSB2ZWM0KDAuMCk7XFxuIGZsb2F0IHdlaWdodEFsbCA9IDAuMDtcXG4gdmVjMyBjTiA9IGNlbnRlck5UZXhlbC5yZ2IgKiAyLjAgLSAxLjA7XFxuIGZsb2F0IGNEID0gZ2V0TGluZWFyRGVwdGgodl9UZXhjb29yZCk7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgOTsgaSsrKSB7XFxuIHZlYzIgY29vcmQgPSBjbGFtcCgoZmxvYXQoaSkgLSA0LjApICogb2ZmICsgdl9UZXhjb29yZCwgdmVjMigwLjApLCB2ZWMyKDEuMCkpO1xcbiBmbG9hdCB3ID0gZ2F1c3NpYW5LZXJuZWxbaV1cXG4gKiBjbGFtcChkb3QoY04sIHRleHR1cmUyRChnQnVmZmVyVGV4dHVyZTEsIGNvb3JkKS5yZ2IgKiAyLjAgLSAxLjApLCAwLjAsIDEuMCk7XFxuIGZsb2F0IGQgPSBnZXRMaW5lYXJEZXB0aChjb29yZCk7XFxuIHcgKj0gKDEuMCAtIHNtb290aHN0ZXAoYWJzKGNEIC0gZCkgLyBkZXB0aFJhbmdlLCAwLjAsIDEuMCkpO1xcbiB3ZWlnaHRBbGwgKz0gdztcXG4gc3VtICs9IGRlY29kZUhEUih0ZXh0dXJlMkQodGV4dHVyZSwgY29vcmQpKSAqIHc7XFxuIH1cXG4jaWZkZWYgQkxFTkRcXG4gZmxvYXQgYW9GYWN0b3IgPSAxLjA7XFxuICNpZmRlZiBTU0FPVEVYX0VOQUJMRURcXG4gYW9GYWN0b3IgPSB0ZXh0dXJlMkQoc3Nhb1RleCwgdl9UZXhjb29yZCkucjtcXG4gI2VuZGlmXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihcXG4gc3VtIC8gd2VpZ2h0QWxsICogYW9GYWN0b3IgKyBkZWNvZGVIRFIodGV4dHVyZTJEKHNvdXJjZVRleHR1cmUsIHZfVGV4Y29vcmQpKVxcbiApO1xcbiNlbHNlXFxuIGdsX0ZyYWdDb2xvciA9IGVuY29kZUhEUihzdW0gLyB3ZWlnaHRBbGwpO1xcbiNlbmRpZlxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1NTUi5nbHNsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///201\n");

/***/ }),
/* 202 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    component1: [\n        0.014096,-0.022658, 0.055991,0.004413,\n        -0.020612,-0.025574, 0.019188,0.000000,\n        -0.038708,0.006957, 0.000000,0.049223,\n        -0.021449,0.040468, 0.018301,0.099929,\n        0.013015,0.050223, 0.054845,0.114689,\n        0.042178,0.038585, 0.085769,0.097080,\n        0.057972,0.019812, 0.102517,0.068674,\n        0.063647,0.005252, 0.108535,0.046643,\n        0.064754,0.000000, 0.109709,0.038697,\n        0.063647,0.005252, 0.108535,0.046643,\n        0.057972,0.019812, 0.102517,0.068674,\n        0.042178,0.038585, 0.085769,0.097080,\n        0.013015,0.050223, 0.054845,0.114689,\n        -0.021449,0.040468, 0.018301,0.099929,\n        -0.038708,0.006957, 0.000000,0.049223,\n        -0.020612,-0.025574, 0.019188,0.000000,\n        0.014096,-0.022658, 0.055991,0.00441\n    ],\n    component2: [\n        0.000115,0.009116, 0.000000,0.051147,\n        0.005324,0.013416, 0.009311,0.075276,\n        0.013753,0.016519, 0.024376,0.092685,\n        0.024700,0.017215, 0.043940,0.096591,\n        0.036693,0.015064, 0.065375,0.084521,\n        0.047976,0.010684, 0.085539,0.059948,\n        0.057015,0.005570, 0.101695,0.031254,\n        0.062782,0.001529, 0.112002,0.008578,\n        0.064754,0.000000, 0.115526,0.000000,\n        0.062782,0.001529, 0.112002,0.008578,\n        0.057015,0.005570, 0.101695,0.031254,\n        0.047976,0.010684, 0.085539,0.059948,\n        0.036693,0.015064, 0.065375,0.084521,\n        0.024700,0.017215, 0.043940,0.096591,\n        0.013753,0.016519, 0.024376,0.092685,\n        0.005324,0.013416, 0.009311,0.075276,\n        0.000115,0.009116, 0.000000,0.05114\n    ]\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvY2lyY3VsYXJTZXBhcmF0ZUtlcm5lbC5qcz9kYzRmIl0sInNvdXJjZXNDb250ZW50IjpbIlxuZXhwb3J0IGRlZmF1bHQge1xuICAgIGNvbXBvbmVudDE6IFtcbiAgICAgICAgMC4wMTQwOTYsLTAuMDIyNjU4LCAwLjA1NTk5MSwwLjAwNDQxMyxcbiAgICAgICAgLTAuMDIwNjEyLC0wLjAyNTU3NCwgMC4wMTkxODgsMC4wMDAwMDAsXG4gICAgICAgIC0wLjAzODcwOCwwLjAwNjk1NywgMC4wMDAwMDAsMC4wNDkyMjMsXG4gICAgICAgIC0wLjAyMTQ0OSwwLjA0MDQ2OCwgMC4wMTgzMDEsMC4wOTk5MjksXG4gICAgICAgIDAuMDEzMDE1LDAuMDUwMjIzLCAwLjA1NDg0NSwwLjExNDY4OSxcbiAgICAgICAgMC4wNDIxNzgsMC4wMzg1ODUsIDAuMDg1NzY5LDAuMDk3MDgwLFxuICAgICAgICAwLjA1Nzk3MiwwLjAxOTgxMiwgMC4xMDI1MTcsMC4wNjg2NzQsXG4gICAgICAgIDAuMDYzNjQ3LDAuMDA1MjUyLCAwLjEwODUzNSwwLjA0NjY0MyxcbiAgICAgICAgMC4wNjQ3NTQsMC4wMDAwMDAsIDAuMTA5NzA5LDAuMDM4Njk3LFxuICAgICAgICAwLjA2MzY0NywwLjAwNTI1MiwgMC4xMDg1MzUsMC4wNDY2NDMsXG4gICAgICAgIDAuMDU3OTcyLDAuMDE5ODEyLCAwLjEwMjUxNywwLjA2ODY3NCxcbiAgICAgICAgMC4wNDIxNzgsMC4wMzg1ODUsIDAuMDg1NzY5LDAuMDk3MDgwLFxuICAgICAgICAwLjAxMzAxNSwwLjA1MDIyMywgMC4wNTQ4NDUsMC4xMTQ2ODksXG4gICAgICAgIC0wLjAyMTQ0OSwwLjA0MDQ2OCwgMC4wMTgzMDEsMC4wOTk5MjksXG4gICAgICAgIC0wLjAzODcwOCwwLjAwNjk1NywgMC4wMDAwMDAsMC4wNDkyMjMsXG4gICAgICAgIC0wLjAyMDYxMiwtMC4wMjU1NzQsIDAuMDE5MTg4LDAuMDAwMDAwLFxuICAgICAgICAwLjAxNDA5NiwtMC4wMjI2NTgsIDAuMDU1OTkxLDAuMDA0NDFcbiAgICBdLFxuICAgIGNvbXBvbmVudDI6IFtcbiAgICAgICAgMC4wMDAxMTUsMC4wMDkxMTYsIDAuMDAwMDAwLDAuMDUxMTQ3LFxuICAgICAgICAwLjAwNTMyNCwwLjAxMzQxNiwgMC4wMDkzMTEsMC4wNzUyNzYsXG4gICAgICAgIDAuMDEzNzUzLDAuMDE2NTE5LCAwLjAyNDM3NiwwLjA5MjY4NSxcbiAgICAgICAgMC4wMjQ3MDAsMC4wMTcyMTUsIDAuMDQzOTQwLDAuMDk2NTkxLFxuICAgICAgICAwLjAzNjY5MywwLjAxNTA2NCwgMC4wNjUzNzUsMC4wODQ1MjEsXG4gICAgICAgIDAuMDQ3OTc2LDAuMDEwNjg0LCAwLjA4NTUzOSwwLjA1OTk0OCxcbiAgICAgICAgMC4wNTcwMTUsMC4wMDU1NzAsIDAuMTAxNjk1LDAuMDMxMjU0LFxuICAgICAgICAwLjA2Mjc4MiwwLjAwMTUyOSwgMC4xMTIwMDIsMC4wMDg1NzgsXG4gICAgICAgIDAuMDY0NzU0LDAuMDAwMDAwLCAwLjExNTUyNiwwLjAwMDAwMCxcbiAgICAgICAgMC4wNjI3ODIsMC4wMDE1MjksIDAuMTEyMDAyLDAuMDA4NTc4LFxuICAgICAgICAwLjA1NzAxNSwwLjAwNTU3MCwgMC4xMDE2OTUsMC4wMzEyNTQsXG4gICAgICAgIDAuMDQ3OTc2LDAuMDEwNjg0LCAwLjA4NTUzOSwwLjA1OTk0OCxcbiAgICAgICAgMC4wMzY2OTMsMC4wMTUwNjQsIDAuMDY1Mzc1LDAuMDg0NTIxLFxuICAgICAgICAwLjAyNDcwMCwwLjAxNzIxNSwgMC4wNDM5NDAsMC4wOTY1OTEsXG4gICAgICAgIDAuMDEzNzUzLDAuMDE2NTE5LCAwLjAyNDM3NiwwLjA5MjY4NSxcbiAgICAgICAgMC4wMDUzMjQsMC4wMTM0MTYsIDAuMDA5MzExLDAuMDc1Mjc2LFxuICAgICAgICAwLjAwMDExNSwwLjAwOTExNiwgMC4wMDAwMDAsMC4wNTExNFxuICAgIF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9jaXJjdWxhclNlcGFyYXRlS2VybmVsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///202\n");

/***/ }),
/* 203 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var DOF_BLUR_OUTPUTS = {\n    'color': {\n        'parameters': {\n            'width': 'expr(width / 2.0 * 1.0)',\n            'height': 'expr(height / 2.0 * 1.0)',\n            'type': 'HALF_FLOAT'\n        }\n    }\n};\n\nvar DOF_BLUR_PARAMETERS = {\n    'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )'\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    'type' : 'compositor',\n    'nodes' : [\n        {\n            'name': 'source',\n            'type': 'texture',\n            'outputs': {\n                'color': {}\n            }\n        },\n        {\n            'name': 'source_half',\n            'shader': '#source(clay.compositor.downsample)',\n            'inputs': {\n                'texture': 'source'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0 / 2)',\n                        'height': 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0, height * 1.0] )'\n            }\n        },\n\n\n        {\n            'name' : 'bright',\n            'shader' : '#source(clay.compositor.bright)',\n            'inputs' : {\n                'texture' : 'source_half'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'threshold' : 2,\n                'scale': 4,\n                'textureSize': 'expr([width * 1.0 / 2, height / 2])'\n            }\n        },\n\n        {\n            'name': 'bright_downsample_4',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 2, height / 2] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_8',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_4'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 4, height / 4] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_16',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_8'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 8, height / 8] )'\n            }\n        },\n        {\n            'name': 'bright_downsample_32',\n            'shader' : '#source(clay.compositor.downsample)',\n            'inputs' : {\n                'texture' : 'bright_downsample_16'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 32)',\n                        'height' : 'expr(height * 1.0 / 32)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'textureSize': 'expr( [width * 1.0 / 16, height / 16] )'\n            }\n        },\n\n\n        {\n            'name' : 'bright_upsample_16_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_32'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 32, height / 32] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_16_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_16_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 16)',\n                        'height' : 'expr(height * 1.0 / 16)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 32, height * 1.0 / 32] )'\n            }\n        },\n\n\n\n        {\n            'name' : 'bright_upsample_8_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_16'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 16, height * 1.0 / 16] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_8_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_8_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 16, height * 1.0 / 16] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_8_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_8_blur_v',\n                'texture2' : 'bright_upsample_16_blur_v'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 8)',\n                        'height' : 'expr(height * 1.0 / 8)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n        {\n            'name' : 'bright_upsample_4_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_8'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 8, height * 1.0 / 8] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_4_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_4_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 8, height * 1.0 / 8] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_4_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_4_blur_v',\n                'texture2' : 'bright_upsample_8_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 4)',\n                        'height' : 'expr(height * 1.0 / 4)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n\n\n\n        {\n            'name' : 'bright_upsample_2_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_downsample_4'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 4, height * 1.0 / 4] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_2_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_2_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 4, height * 1.0 / 4] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_2_blend',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_2_blur_v',\n                'texture2' : 'bright_upsample_4_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0 / 2)',\n                        'height' : 'expr(height * 1.0 / 2)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n\n        {\n            'name' : 'bright_upsample_full_blur_h',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 0.0,\n                'textureSize': 'expr( [width * 1.0 / 2, height * 1.0 / 2] )'\n            }\n        },\n        {\n            'name' : 'bright_upsample_full_blur_v',\n            'shader' : '#source(clay.compositor.gaussian_blur)',\n            'inputs' : {\n                'texture' : 'bright_upsample_full_blur_h'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'blurSize' : 1,\n                'blurDir': 1.0,\n                'textureSize': 'expr( [width * 1.0 / 2, height * 1.0 / 2] )'\n            }\n        },\n        {\n            'name' : 'bloom_composite',\n            'shader' : '#source(clay.compositor.blend)',\n            'inputs' : {\n                'texture1' : 'bright_upsample_full_blur_v',\n                'texture2' : 'bright_upsample_2_blend'\n            },\n            'outputs' : {\n                'color' : {\n                    'parameters' : {\n                        'width' : 'expr(width * 1.0)',\n                        'height' : 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters' : {\n                'weight1' : 0.3,\n                'weight2' : 0.7\n            }\n        },\n\n\n        {\n            'name': 'coc',\n            'shader': '#source(car.dof.coc)',\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            }\n        },\n\n        {\n            'name': 'coc_dilate_1',\n            'shader': '#source(car.dof.dilateCoc)',\n            'inputs': {\n                'cocTex': 'coc'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters': {\n                'textureSize': 'expr( [width / 1.0 * 1.0, height / 1.0 * 1.0] )'\n            }\n        },\n\n        {\n            'name': 'coc_dilate_2',\n            'shader': '#source(car.dof.dilateCoc)',\n            'inputs': {\n                'cocTex': 'coc_dilate_1'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'parameters': {\n                'textureSize': 'expr( [width / 1.0 * 1.0, height / 1.0 * 1.0] )'\n            },\n            'defines': {\n                'VERTICAL': null\n            }\n        },\n\n        {\n            'name': 'dof_separate_far',\n            'shader': '#source(car.dof.separate)',\n            'inputs': {\n                'mainTex': 'source',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'defines': {\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_separate_near',\n            'shader': '#source(car.dof.separate)',\n            'inputs': {\n                'mainTex': 'source',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS\n        },\n\n        {\n            'name': 'dof_blur_far_1',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'R_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_far_2',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'G_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n\n        {\n            'name': 'dof_blur_far_3',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'B_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n\n        {\n            'name': 'dof_blur_far_4',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_far',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'A_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_far_final',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'rTex': 'dof_blur_far_1',\n                'gTex': 'dof_blur_far_2',\n                'bTex': 'dof_blur_far_3',\n                'aTex': 'dof_blur_far_4',\n                'cocTex': 'coc'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'FINAL_PASS': null,\n                'FARFIELD': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_1',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'R_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_2',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'G_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_3',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'B_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_4',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'mainTex': 'dof_separate_near',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'A_PASS': null\n            }\n        },\n\n        {\n            'name': 'dof_blur_near_final',\n            'shader': '#source(car.dof.blur)',\n            'inputs': {\n                'rTex': 'dof_blur_near_1',\n                'gTex': 'dof_blur_near_2',\n                'bTex': 'dof_blur_near_3',\n                'aTex': 'dof_blur_near_4',\n                'cocTex': 'coc',\n                'dilateCocTex': 'coc_dilate_2'\n            },\n            'outputs': DOF_BLUR_OUTPUTS,\n            'parameters': DOF_BLUR_PARAMETERS,\n            'defines': {\n                'FINAL_PASS': null\n            }\n        },\n\n        // {\n        //     'name': 'dof_blur_near_alpha_h',\n        //     'shader': '#source(car.dof.blurNearAlpha)',\n        //     'inputs': {\n        //         'mainTex': 'dof_blur_near_final',\n        //         'cocTex': 'coc_dilate_2'\n        //     },\n        //     'outputs': DOF_BLUR_OUTPUTS,\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )',\n        //         'blurDir': 0\n        //     }\n        // },\n\n\n        // {\n        //     'name': 'dof_blur_near_alpha_v',\n        //     'shader': '#source(car.dof.blurNearAlpha)',\n        //     'inputs': {\n        //         'mainTex': 'dof_blur_near_alpha_h',\n        //         'cocTex': 'coc_dilate_2'\n        //     },\n        //     'outputs': DOF_BLUR_OUTPUTS,\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )',\n        //         'blurDir': 1\n        //     }\n        // },\n\n\n\n        // {\n        //     'name': 'dof_blur_upsample',\n        //     'shader': '#source(car.dof.extraBlur)',\n        //     'inputs': {\n        //         'blur': 'dof_blur',\n        //         'cocTex': 'coc'\n        //     },\n        //     'outputs': {\n        //         'color': {\n        //             'parameters': {\n        //                 'width': 'expr(width * 1.0)',\n        //                 'height': 'expr(height * 1.0)',\n        //                 'type': 'HALF_FLOAT'\n        //             }\n        //         }\n        //     },\n        //     'parameters': {\n        //         'textureSize': 'expr( [width / 2.0 * 1.0, height / 2.0 * 1.0] )'\n        //     }\n        // },\n\n        {\n            'name': 'dof_composite',\n            'shader': '#source(car.dof.composite)',\n            'inputs': {\n                'sharpTex': 'source',\n                'farTex': 'dof_blur_far_final',\n                'nearTex': 'dof_blur_near_final',\n                'cocTex': 'coc'\n            },\n            'outputs': {\n                'color': {\n                    'parameters': {\n                        'width': 'expr(width * 1.0)',\n                        'height': 'expr(height * 1.0)',\n                        'type': 'HALF_FLOAT'\n                    }\n                }\n            },\n            'defines': {\n                // DEBUG: 4\n            }\n        },\n        {\n            'name' : 'composite',\n            'shader' : '#source(clay.compositor.hdr.composite)',\n            'inputs' : {\n                'texture': 'source',\n                'bloom' : 'bloom_composite'\n            },\n            'defines': {\n                // Images are all premultiplied alpha before composite because of blending.\n                // 'PREMULTIPLY_ALPHA': null,\n                // 'DEBUG': 1\n            }\n        },\n        {\n            'name' : 'FXAA',\n            'shader' : '#source(clay.compositor.fxaa)',\n            'inputs' : {\n                'texture' : 'composite'\n            }\n        }\n    ]\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvY29tcG9zaXRlLmpzPzBlZjgiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIERPRl9CTFVSX09VVFBVVFMgPSB7XG4gICAgJ2NvbG9yJzoge1xuICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoIC8gMi4wICogMS4wKScsXG4gICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0IC8gMi4wICogMS4wKScsXG4gICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICB9XG4gICAgfVxufTtcblxudmFyIERPRl9CTFVSX1BBUkFNRVRFUlMgPSB7XG4gICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAvIDIuMCAqIDEuMCwgaGVpZ2h0IC8gMi4wICogMS4wXSApJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQge1xuICAgICd0eXBlJyA6ICdjb21wb3NpdG9yJyxcbiAgICAnbm9kZXMnIDogW1xuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgJ3R5cGUnOiAndGV4dHVyZScsXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdzb3VyY2VfaGFsZicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiAnc291cmNlJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzoge1xuICAgICAgICAgICAgICAgICdjb2xvcic6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnOiAnZXhwcih3aWR0aCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wLCBoZWlnaHQgKiAxLjBdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmJyaWdodCknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ3NvdXJjZV9oYWxmJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd0aHJlc2hvbGQnIDogMixcbiAgICAgICAgICAgICAgICAnc2NhbGUnOiA0LFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAvIDJdKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdicmlnaHRfZG93bnNhbXBsZV80JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gNCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzgnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZG93bnNhbXBsZSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDQsIGhlaWdodCAvIDRdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzE2JyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHRfZG93bnNhbXBsZV84J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyAxNiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAxNiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDgsIGhlaWdodCAvIDhdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2JyaWdodF9kb3duc2FtcGxlXzMyJyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmRvd25zYW1wbGUpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlJyA6ICdicmlnaHRfZG93bnNhbXBsZV8xNidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMzIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMzIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAxNiwgaGVpZ2h0IC8gMTZdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfaCcsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X2Rvd25zYW1wbGVfMzInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDE2KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDE2KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDAuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gMzIsIGhlaWdodCAvIDMyXSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfdicsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzE2X2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMTYpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMTYpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMS4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAzMiwgaGVpZ2h0ICogMS4wIC8gMzJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfOF9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzE2J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA4KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMC4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyAxNiwgaGVpZ2h0ICogMS4wIC8gMTZdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfOF9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV84X2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyA4KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDEuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gMTYsIGhlaWdodCAqIDEuMCAvIDE2XSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzhfYmxlbmQnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzhfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV8xNl9ibHVyX3YnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDgpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gOCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ3dlaWdodDEnIDogMC4zLFxuICAgICAgICAgICAgICAgICd3ZWlnaHQyJyA6IDAuN1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV80X2JsdXJfaCcsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X2Rvd25zYW1wbGVfOCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gNCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDAuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gOCwgaGVpZ2h0ICogMS4wIC8gOF0gKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV80X2JsdXJfdicsXG4gICAgICAgICAgICAnc2hhZGVyJyA6ICcjc291cmNlKGNsYXkuY29tcG9zaXRvci5nYXVzc2lhbl9ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmx1cl9oJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICdibHVyU2l6ZScgOiAxLFxuICAgICAgICAgICAgICAgICdibHVyRGlyJzogMS4wLFxuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggKiAxLjAgLyA4LCBoZWlnaHQgKiAxLjAgLyA4XSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmxlbmQnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlXzRfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV84X2JsZW5kJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjAgLyA0KScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCAvIDQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICd3ZWlnaHQxJyA6IDAuMyxcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MicgOiAwLjdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfMl9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF9kb3duc2FtcGxlXzQnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnIDoge1xuICAgICAgICAgICAgICAgICdjb2xvcicgOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCcgOiAnZXhwcih3aWR0aCAqIDEuMCAvIDIpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAwLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDQsIGhlaWdodCAqIDEuMCAvIDRdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfMl9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnYmx1clNpemUnIDogMSxcbiAgICAgICAgICAgICAgICAnYmx1ckRpcic6IDEuMCxcbiAgICAgICAgICAgICAgICAndGV4dHVyZVNpemUnOiAnZXhwciggW3dpZHRoICogMS4wIC8gNCwgaGVpZ2h0ICogMS4wIC8gNF0gKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsZW5kJyxcbiAgICAgICAgICAgICdzaGFkZXInIDogJyNzb3VyY2UoY2xheS5jb21wb3NpdG9yLmJsZW5kKScsXG4gICAgICAgICAgICAnaW5wdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAndGV4dHVyZTEnIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsdXJfdicsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmUyJyA6ICdicmlnaHRfdXBzYW1wbGVfNF9ibGVuZCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wIC8gMiknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2hlaWdodCcgOiAnZXhwcihoZWlnaHQgKiAxLjAgLyAyKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MScgOiAwLjMsXG4gICAgICAgICAgICAgICAgJ3dlaWdodDInIDogMC43XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfZnVsbF9ibHVyX2gnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAwLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAqIDEuMCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdicmlnaHRfdXBzYW1wbGVfZnVsbF9ibHVyX3YnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZ2F1c3NpYW5fYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2JyaWdodF91cHNhbXBsZV9mdWxsX2JsdXJfaCdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJyA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ3BhcmFtZXRlcnMnIDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJyA6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JyA6ICdleHByKGhlaWdodCAqIDEuMCknLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnSEFMRl9GTE9BVCdcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgJ2JsdXJTaXplJyA6IDEsXG4gICAgICAgICAgICAgICAgJ2JsdXJEaXInOiAxLjAsXG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAqIDEuMCAvIDIsIGhlaWdodCAqIDEuMCAvIDJdICknXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdibG9vbV9jb21wb3NpdGUnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuYmxlbmQpJyxcbiAgICAgICAgICAgICdpbnB1dHMnIDoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlMScgOiAnYnJpZ2h0X3Vwc2FtcGxlX2Z1bGxfYmx1cl92JyxcbiAgICAgICAgICAgICAgICAndGV4dHVyZTInIDogJ2JyaWdodF91cHNhbXBsZV8yX2JsZW5kJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJyA6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InIDoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycycgOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnd2lkdGgnIDogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnIDogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJyA6IHtcbiAgICAgICAgICAgICAgICAnd2VpZ2h0MScgOiAwLjMsXG4gICAgICAgICAgICAgICAgJ3dlaWdodDInIDogMC43XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdjb2MnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuY29jKScsXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnY29jX2RpbGF0ZV8xJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmRpbGF0ZUNvYyknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnY29sb3InOiB7XG4gICAgICAgICAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2V4cHIod2lkdGggKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdoZWlnaHQnOiAnZXhwcihoZWlnaHQgKiAxLjApJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ0hBTEZfRkxPQVQnXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmVTaXplJzogJ2V4cHIoIFt3aWR0aCAvIDEuMCAqIDEuMCwgaGVpZ2h0IC8gMS4wICogMS4wXSApJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2NvY19kaWxhdGVfMicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5kaWxhdGVDb2MpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2NfZGlsYXRlXzEnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAxLjAgKiAxLjAsIGhlaWdodCAvIDEuMCAqIDEuMF0gKSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnVkVSVElDQUwnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5zZXBhcmF0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5zZXBhcmF0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdzb3VyY2UnLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUU1xuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX2Zhcl8xJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ1JfUEFTUyc6IG51bGwsXG4gICAgICAgICAgICAgICAgJ0ZBUkZJRUxEJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX2Zhcl8yJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX2ZhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0dfUEFTUyc6IG51bGwsXG4gICAgICAgICAgICAgICAgJ0ZBUkZJRUxEJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfZmFyXzMnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfZmFyJyxcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYydcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IERPRl9CTFVSX09VVFBVVFMsXG4gICAgICAgICAgICAncGFyYW1ldGVycyc6IERPRl9CTFVSX1BBUkFNRVRFUlMsXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnQl9QQVNTJzogbnVsbCxcbiAgICAgICAgICAgICAgICAnRkFSRklFTEQnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9mYXJfNCcsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdtYWluVGV4JzogJ2RvZl9zZXBhcmF0ZV9mYXInLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdBX1BBU1MnOiBudWxsLFxuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9mYXJfZmluYWwnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnclRleCc6ICdkb2ZfYmx1cl9mYXJfMScsXG4gICAgICAgICAgICAgICAgJ2dUZXgnOiAnZG9mX2JsdXJfZmFyXzInLFxuICAgICAgICAgICAgICAgICdiVGV4JzogJ2RvZl9ibHVyX2Zhcl8zJyxcbiAgICAgICAgICAgICAgICAnYVRleCc6ICdkb2ZfYmx1cl9mYXJfNCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0ZJTkFMX1BBU1MnOiBudWxsLFxuICAgICAgICAgICAgICAgICdGQVJGSUVMRCc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyXzEnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdSX1BBU1MnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfbmVhcl8yJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmJsdXIpJyxcbiAgICAgICAgICAgICdpbnB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ21haW5UZXgnOiAnZG9mX3NlcGFyYXRlX25lYXInLFxuICAgICAgICAgICAgICAgICdjb2NUZXgnOiAnY29jJyxcbiAgICAgICAgICAgICAgICAnZGlsYXRlQ29jVGV4JzogJ2NvY19kaWxhdGVfMidcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnb3V0cHV0cyc6IERPRl9CTFVSX09VVFBVVFMsXG4gICAgICAgICAgICAncGFyYW1ldGVycyc6IERPRl9CTFVSX1BBUkFNRVRFUlMsXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAnR19QQVNTJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJzogJ2RvZl9ibHVyX25lYXJfMycsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdtYWluVGV4JzogJ2RvZl9zZXBhcmF0ZV9uZWFyJyxcbiAgICAgICAgICAgICAgICAnY29jVGV4JzogJ2NvYycsXG4gICAgICAgICAgICAgICAgJ2RpbGF0ZUNvY1RleCc6ICdjb2NfZGlsYXRlXzInXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiBET0ZfQkxVUl9PVVRQVVRTLFxuICAgICAgICAgICAgJ3BhcmFtZXRlcnMnOiBET0ZfQkxVUl9QQVJBTUVURVJTLFxuICAgICAgICAgICAgJ2RlZmluZXMnOiB7XG4gICAgICAgICAgICAgICAgJ0JfUEFTUyc6IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyXzQnLFxuICAgICAgICAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ciknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnbWFpblRleCc6ICdkb2Zfc2VwYXJhdGVfbmVhcicsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdBX1BBU1MnOiBudWxsXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnOiAnZG9mX2JsdXJfbmVhcl9maW5hbCcsXG4gICAgICAgICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyKScsXG4gICAgICAgICAgICAnaW5wdXRzJzoge1xuICAgICAgICAgICAgICAgICdyVGV4JzogJ2RvZl9ibHVyX25lYXJfMScsXG4gICAgICAgICAgICAgICAgJ2dUZXgnOiAnZG9mX2JsdXJfbmVhcl8yJyxcbiAgICAgICAgICAgICAgICAnYlRleCc6ICdkb2ZfYmx1cl9uZWFyXzMnLFxuICAgICAgICAgICAgICAgICdhVGV4JzogJ2RvZl9ibHVyX25lYXJfNCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnLFxuICAgICAgICAgICAgICAgICdkaWxhdGVDb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgICAgICdwYXJhbWV0ZXJzJzogRE9GX0JMVVJfUEFSQU1FVEVSUyxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgICdGSU5BTF9QQVNTJzogbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgICduYW1lJzogJ2RvZl9ibHVyX25lYXJfYWxwaGFfaCcsXG4gICAgICAgIC8vICAgICAnc2hhZGVyJzogJyNzb3VyY2UoY2FyLmRvZi5ibHVyTmVhckFscGhhKScsXG4gICAgICAgIC8vICAgICAnaW5wdXRzJzoge1xuICAgICAgICAvLyAgICAgICAgICdtYWluVGV4JzogJ2RvZl9ibHVyX25lYXJfZmluYWwnLFxuICAgICAgICAvLyAgICAgICAgICdjb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKScsXG4gICAgICAgIC8vICAgICAgICAgJ2JsdXJEaXInOiAwXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG5cblxuICAgICAgICAvLyB7XG4gICAgICAgIC8vICAgICAnbmFtZSc6ICdkb2ZfYmx1cl9uZWFyX2FscGhhX3YnLFxuICAgICAgICAvLyAgICAgJ3NoYWRlcic6ICcjc291cmNlKGNhci5kb2YuYmx1ck5lYXJBbHBoYSknLFxuICAgICAgICAvLyAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgLy8gICAgICAgICAnbWFpblRleCc6ICdkb2ZfYmx1cl9uZWFyX2FscGhhX2gnLFxuICAgICAgICAvLyAgICAgICAgICdjb2NUZXgnOiAnY29jX2RpbGF0ZV8yJ1xuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdvdXRwdXRzJzogRE9GX0JMVVJfT1VUUFVUUyxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKScsXG4gICAgICAgIC8vICAgICAgICAgJ2JsdXJEaXInOiAxXG4gICAgICAgIC8vICAgICB9XG4gICAgICAgIC8vIH0sXG5cblxuXG4gICAgICAgIC8vIHtcbiAgICAgICAgLy8gICAgICduYW1lJzogJ2RvZl9ibHVyX3Vwc2FtcGxlJyxcbiAgICAgICAgLy8gICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmV4dHJhQmx1ciknLFxuICAgICAgICAvLyAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgLy8gICAgICAgICAnYmx1cic6ICdkb2ZfYmx1cicsXG4gICAgICAgIC8vICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgIC8vICAgICB9LFxuICAgICAgICAvLyAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgIC8vICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAvLyAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgLy8gICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgIC8vICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAvLyAgICAgICAgICAgICB9XG4gICAgICAgIC8vICAgICAgICAgfVxuICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgLy8gICAgICdwYXJhbWV0ZXJzJzoge1xuICAgICAgICAvLyAgICAgICAgICd0ZXh0dXJlU2l6ZSc6ICdleHByKCBbd2lkdGggLyAyLjAgKiAxLjAsIGhlaWdodCAvIDIuMCAqIDEuMF0gKSdcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfSxcblxuICAgICAgICB7XG4gICAgICAgICAgICAnbmFtZSc6ICdkb2ZfY29tcG9zaXRlJyxcbiAgICAgICAgICAgICdzaGFkZXInOiAnI3NvdXJjZShjYXIuZG9mLmNvbXBvc2l0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cyc6IHtcbiAgICAgICAgICAgICAgICAnc2hhcnBUZXgnOiAnc291cmNlJyxcbiAgICAgICAgICAgICAgICAnZmFyVGV4JzogJ2RvZl9ibHVyX2Zhcl9maW5hbCcsXG4gICAgICAgICAgICAgICAgJ25lYXJUZXgnOiAnZG9mX2JsdXJfbmVhcl9maW5hbCcsXG4gICAgICAgICAgICAgICAgJ2NvY1RleCc6ICdjb2MnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dHMnOiB7XG4gICAgICAgICAgICAgICAgJ2NvbG9yJzoge1xuICAgICAgICAgICAgICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd3aWR0aCc6ICdleHByKHdpZHRoICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJ2V4cHIoaGVpZ2h0ICogMS4wKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdIQUxGX0ZMT0FUJ1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdkZWZpbmVzJzoge1xuICAgICAgICAgICAgICAgIC8vIERFQlVHOiA0XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICAgICduYW1lJyA6ICdjb21wb3NpdGUnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuaGRyLmNvbXBvc2l0ZSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnOiAnc291cmNlJyxcbiAgICAgICAgICAgICAgICAnYmxvb20nIDogJ2Jsb29tX2NvbXBvc2l0ZSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnZGVmaW5lcyc6IHtcbiAgICAgICAgICAgICAgICAvLyBJbWFnZXMgYXJlIGFsbCBwcmVtdWx0aXBsaWVkIGFscGhhIGJlZm9yZSBjb21wb3NpdGUgYmVjYXVzZSBvZiBibGVuZGluZy5cbiAgICAgICAgICAgICAgICAvLyAnUFJFTVVMVElQTFlfQUxQSEEnOiBudWxsLFxuICAgICAgICAgICAgICAgIC8vICdERUJVRyc6IDFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgICAgJ25hbWUnIDogJ0ZYQUEnLFxuICAgICAgICAgICAgJ3NoYWRlcicgOiAnI3NvdXJjZShjbGF5LmNvbXBvc2l0b3IuZnhhYSknLFxuICAgICAgICAgICAgJ2lucHV0cycgOiB7XG4gICAgICAgICAgICAgICAgJ3RleHR1cmUnIDogJ2NvbXBvc2l0ZSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIF1cbn07XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvY2xheWdsLWFkdmFuY2VkLXJlbmRlcmVyL3NyYy9jb21wb3NpdGUuanNcbi8vIG1vZHVsZSBpZCA9IDIwM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///203\n");

/***/ }),
/* 204 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.dof.coc\\nuniform sampler2D depth;\\nuniform float zNear = 0.1;\\nuniform float zFar = 2000;\\nuniform float focalDistance = 10;\\nuniform float focalLength = 50;\\nuniform float aperture = 5.6;\\nuniform float maxCoc;\\nuniform float _filmHeight = 0.024;\\nvarying vec2 v_Texcoord;\\n@import clay.util.encode_float\\nvoid main()\\n{\\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\\n float f = focalLength / 1000.0;\\n float s1 = max(f, focalDistance);\\n float coeff = f * f / (aperture * (s1 - f) * _filmHeight * 2.0);\\n float coc = (dist - focalDistance) * coeff / max(dist, 1e-5);\\n coc /= maxCoc;\\n gl_FragColor = vec4(clamp(coc * 0.5 + 0.5, 0.0, 1.0), 0.0, 0.0, 1.0);\\n}\\n@end\\n@export car.dof.composite\\n#define DEBUG 0\\nuniform sampler2D sharpTex;\\nuniform sampler2D nearTex;\\nuniform sampler2D farTex;\\nuniform sampler2D cocTex;\\nuniform float maxCoc;\\nuniform float minCoc;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n float coc = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n vec4 nearTexel = decodeHDR(texture2D(nearTex, v_Texcoord));\\n vec4 farTexel = decodeHDR(texture2D(farTex, v_Texcoord));\\n vec4 sharpTexel = decodeHDR(texture2D(sharpTex, v_Texcoord));\\n float nfa = clamp(nearTexel.a, 0.0, 1.0);\\n float ffa = smoothstep(minCoc / maxCoc, 0.2, coc);\\n ffa *= clamp(farTexel.a, 0.0, 1.0);\\n gl_FragColor.rgb = mix(mix(sharpTexel.rgb, farTexel.rgb, ffa), nearTexel.rgb, nfa);\\n gl_FragColor.a = max(max(sharpTexel.a, nfa), clamp(farTexel.a, 0.0, 1.0));\\n}\\n@end\\n@export car.dof.separate\\nuniform sampler2D mainTex;\\nuniform sampler2D cocTex;\\nuniform float minCoc;\\nvarying vec2 v_Texcoord;\\n@import clay.util.rgbm\\nvoid main()\\n{\\n vec4 color = decodeHDR(texture2D(mainTex, v_Texcoord));\\n float coc = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n#ifdef FARFIELD\\n color *= step(0.0, coc);\\n#else\\n color.a *= step(minCoc, -coc);\\n#endif\\n gl_FragColor = encodeHDR(color);\\n}\\n@end\\n@export car.dof.dilateCoc\\n#define SHADER_NAME dilateCoc\\nuniform sampler2D cocTex;\\nuniform vec2 textureSize;\\nvarying vec2 v_Texcoord;\\nvoid main()\\n{\\n#ifdef VERTICAL\\n vec2 offset = vec2(0.0, 1.0 / textureSize.y);\\n#else\\n vec2 offset = vec2(1.0 / textureSize.x, 0.0);\\n#endif\\n float coc0 = 1.0;\\n for (int i = 0; i < 17; i++) {\\n vec2 duv = (float(i) - 8.0) * offset * 1.5;\\n float coc = texture2D(cocTex, v_Texcoord + duv).r * 2.0 - 1.0;\\n coc *= pow(1.0 - abs(float(i) - 8.0) / 10.0, 2.0);\\n coc0 = min(coc0, coc);\\n }\\n gl_FragColor = vec4(coc0 * 0.5 + 0.5, 0.0, 0.0, 1.0);\\n}\\n@end\\n@export car.dof.blur\\n#define KERNEL_SIZE 17\\nconst vec2 kernel1Weight = vec2(0.411259,-0.548794);\\nconst vec2 kernel2Weight = vec2(0.513282,4.561110);\\nuniform vec4 kernel1[KERNEL_SIZE];\\nuniform vec4 kernel2[KERNEL_SIZE];\\n#ifdef FINAL_PASS\\nuniform sampler2D rTex;\\nuniform sampler2D gTex;\\nuniform sampler2D bTex;\\nuniform sampler2D aTex;\\n#endif\\nuniform sampler2D mainTex;\\nuniform sampler2D cocTex;\\nuniform sampler2D dilateCocTex;\\nuniform float maxCoc;\\nuniform float minCoc;\\nuniform vec2 textureSize;\\nvarying vec2 v_Texcoord;\\nvec2 multComplex(vec2 p, vec2 q)\\n{\\n return vec2(p.x*q.x-p.y*q.y, p.x*q.y+p.y*q.x);\\n}\\nfloat GetSmallestCoc(vec2 uv)\\n{\\n vec2 k = 1.0 / textureSize;\\n float coc = texture2D(cocTex, uv).r;\\n vec4 around = vec4(\\n texture2D(cocTex, uv - k).r,\\n texture2D(cocTex, uv + vec2(k.x, -k.y)).r,\\n texture2D(cocTex, uv + vec2(-k.x, k.y)).r,\\n texture2D(cocTex, uv + k).r\\n );\\n return min(min(min(min(around.x, around.y), around.z), around.w), coc);\\n}\\n@import clay.util.rgbm\\n@import clay.util.float\\nvoid main()\\n{\\n float halfKernelSize = float(KERNEL_SIZE / 2);\\n vec2 texelSize = 1.0 / textureSize;\\n float weight = 0.0;\\n#ifdef FARFIELD\\n float coc0 = texture2D(cocTex, v_Texcoord).r * 2.0 - 1.0;\\n#else\\n float coc0 = -(texture2D(dilateCocTex, v_Texcoord).r * 2.0 - 1.0);\\n#endif\\n if (coc0 <= 0.0) {\\n gl_FragColor = vec4(0.0);\\n return;\\n }\\n coc0 *= maxCoc;\\n#ifdef FINAL_PASS\\n vec4 valR = vec4(0.0);\\n vec4 valG = vec4(0.0);\\n vec4 valB = vec4(0.0);\\n vec4 valA = vec4(0.0);\\n vec2 offset = vec2(0.0, abs(coc0) / halfKernelSize);\\n#else\\n vec4 val = vec4(0.0);\\n vec2 offset = vec2(texelSize.x / texelSize.y * abs(coc0) / halfKernelSize, 0.0);\\n#endif\\n for (int i = 0; i < KERNEL_SIZE; i++) {\\n vec2 duv = (float(i) - halfKernelSize) * offset;\\n float dist = length(duv);\\n vec2 uv = clamp(v_Texcoord + duv, vec2(0.0), vec2(1.0));\\n#ifdef FARFIELD\\n float coc = GetSmallestCoc(uv) * 2.0 - 1.0;\\n#else\\n float coc = texture2D(cocTex, uv).r * 2.0 - 1.0;\\n#endif\\n coc *= maxCoc;\\n float w = 1.0;\\n#ifdef FARFIELD\\n w *= step(dist, coc);\\n#endif\\n weight += w;\\n vec4 c0c1 = vec4(kernel1[i].xy, kernel2[i].xy);\\n#ifdef FINAL_PASS\\n vec4 rTexel = texture2D(rTex, uv) * w;\\n vec4 gTexel = texture2D(gTex, uv) * w;\\n vec4 bTexel = texture2D(bTex, uv) * w;\\n vec4 aTexel = texture2D(aTex, uv) * w;\\n valR.xy += multComplex(rTexel.xy,c0c1.xy);\\n valR.zw += multComplex(rTexel.zw,c0c1.zw);\\n valG.xy += multComplex(gTexel.xy,c0c1.xy);\\n valG.zw += multComplex(gTexel.zw,c0c1.zw);\\n valB.xy += multComplex(bTexel.xy,c0c1.xy);\\n valB.zw += multComplex(bTexel.zw,c0c1.zw);\\n valA.xy += multComplex(aTexel.xy,c0c1.xy);\\n valA.zw += multComplex(aTexel.zw,c0c1.zw);\\n#else\\n vec4 color = texture2D(mainTex, uv);\\n float tmp;\\n #if defined(R_PASS)\\n tmp = color.r;\\n #elif defined(G_PASS)\\n tmp = color.g;\\n #elif defined(B_PASS)\\n tmp = color.b;\\n #elif defined(A_PASS)\\n tmp = color.a;\\n #endif\\n val += tmp * c0c1 * w;\\n#endif\\n }\\n weight /= float(KERNEL_SIZE);\\n weight = max(weight, 0.0001);\\n#ifdef FINAL_PASS\\n valR /= weight;\\n valG /= weight;\\n valB /= weight;\\n valA /= weight;\\n float r = dot(valR.xy,kernel1Weight)+dot(valR.zw,kernel2Weight);\\n float g = dot(valG.xy,kernel1Weight)+dot(valG.zw,kernel2Weight);\\n float b = dot(valB.xy,kernel1Weight)+dot(valB.zw,kernel2Weight);\\n float a = dot(valA.xy,kernel1Weight)+dot(valA.zw,kernel2Weight);\\n gl_FragColor = vec4(r, g, b, a);\\n#else\\n val /= weight;\\n gl_FragColor = val;\\n#endif\\n}\\n@end\\n// @end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRE9GLmdsc2wuanM/ZTFiZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIkBleHBvcnQgY2FyLmRvZi5jb2NcXG51bmlmb3JtIHNhbXBsZXIyRCBkZXB0aDtcXG51bmlmb3JtIGZsb2F0IHpOZWFyID0gMC4xO1xcbnVuaWZvcm0gZmxvYXQgekZhciA9IDIwMDA7XFxudW5pZm9ybSBmbG9hdCBmb2NhbERpc3RhbmNlID0gMTA7XFxudW5pZm9ybSBmbG9hdCBmb2NhbExlbmd0aCA9IDUwO1xcbnVuaWZvcm0gZmxvYXQgYXBlcnR1cmUgPSA1LjY7XFxudW5pZm9ybSBmbG9hdCBtYXhDb2M7XFxudW5pZm9ybSBmbG9hdCBfZmlsbUhlaWdodCA9IDAuMDI0O1xcbnZhcnlpbmcgdmVjMiB2X1RleGNvb3JkO1xcbkBpbXBvcnQgY2xheS51dGlsLmVuY29kZV9mbG9hdFxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCB6ID0gdGV4dHVyZTJEKGRlcHRoLCB2X1RleGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiBmbG9hdCBkaXN0ID0gMi4wICogek5lYXIgKiB6RmFyIC8gKHpGYXIgKyB6TmVhciAtIHogKiAoekZhciAtIHpOZWFyKSk7XFxuIGZsb2F0IGYgPSBmb2NhbExlbmd0aCAvIDEwMDAuMDtcXG4gZmxvYXQgczEgPSBtYXgoZiwgZm9jYWxEaXN0YW5jZSk7XFxuIGZsb2F0IGNvZWZmID0gZiAqIGYgLyAoYXBlcnR1cmUgKiAoczEgLSBmKSAqIF9maWxtSGVpZ2h0ICogMi4wKTtcXG4gZmxvYXQgY29jID0gKGRpc3QgLSBmb2NhbERpc3RhbmNlKSAqIGNvZWZmIC8gbWF4KGRpc3QsIDFlLTUpO1xcbiBjb2MgLz0gbWF4Q29jO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNsYW1wKGNvYyAqIDAuNSArIDAuNSwgMC4wLCAxLjApLCAwLjAsIDAuMCwgMS4wKTtcXG59XFxuQGVuZFxcbkBleHBvcnQgY2FyLmRvZi5jb21wb3NpdGVcXG4jZGVmaW5lIERFQlVHIDBcXG51bmlmb3JtIHNhbXBsZXIyRCBzaGFycFRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBuZWFyVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGZhclRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjb2NUZXg7XFxudW5pZm9ybSBmbG9hdCBtYXhDb2M7XFxudW5pZm9ybSBmbG9hdCBtaW5Db2M7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB2X1RleGNvb3JkKS5yICogMi4wIC0gMS4wO1xcbiB2ZWM0IG5lYXJUZXhlbCA9IGRlY29kZUhEUih0ZXh0dXJlMkQobmVhclRleCwgdl9UZXhjb29yZCkpO1xcbiB2ZWM0IGZhclRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRChmYXJUZXgsIHZfVGV4Y29vcmQpKTtcXG4gdmVjNCBzaGFycFRleGVsID0gZGVjb2RlSERSKHRleHR1cmUyRChzaGFycFRleCwgdl9UZXhjb29yZCkpO1xcbiBmbG9hdCBuZmEgPSBjbGFtcChuZWFyVGV4ZWwuYSwgMC4wLCAxLjApO1xcbiBmbG9hdCBmZmEgPSBzbW9vdGhzdGVwKG1pbkNvYyAvIG1heENvYywgMC4yLCBjb2MpO1xcbiBmZmEgKj0gY2xhbXAoZmFyVGV4ZWwuYSwgMC4wLCAxLjApO1xcbiBnbF9GcmFnQ29sb3IucmdiID0gbWl4KG1peChzaGFycFRleGVsLnJnYiwgZmFyVGV4ZWwucmdiLCBmZmEpLCBuZWFyVGV4ZWwucmdiLCBuZmEpO1xcbiBnbF9GcmFnQ29sb3IuYSA9IG1heChtYXgoc2hhcnBUZXhlbC5hLCBuZmEpLCBjbGFtcChmYXJUZXhlbC5hLCAwLjAsIDEuMCkpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLnNlcGFyYXRlXFxudW5pZm9ybSBzYW1wbGVyMkQgbWFpblRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjb2NUZXg7XFxudW5pZm9ybSBmbG9hdCBtaW5Db2M7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxuQGltcG9ydCBjbGF5LnV0aWwucmdibVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWM0IGNvbG9yID0gZGVjb2RlSERSKHRleHR1cmUyRChtYWluVGV4LCB2X1RleGNvb3JkKSk7XFxuIGZsb2F0IGNvYyA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuI2lmZGVmIEZBUkZJRUxEXFxuIGNvbG9yICo9IHN0ZXAoMC4wLCBjb2MpO1xcbiNlbHNlXFxuIGNvbG9yLmEgKj0gc3RlcChtaW5Db2MsIC1jb2MpO1xcbiNlbmRpZlxcbiBnbF9GcmFnQ29sb3IgPSBlbmNvZGVIRFIoY29sb3IpO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLmRpbGF0ZUNvY1xcbiNkZWZpbmUgU0hBREVSX05BTUUgZGlsYXRlQ29jXFxudW5pZm9ybSBzYW1wbGVyMkQgY29jVGV4O1xcbnVuaWZvcm0gdmVjMiB0ZXh0dXJlU2l6ZTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKVxcbntcXG4jaWZkZWYgVkVSVElDQUxcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKDAuMCwgMS4wIC8gdGV4dHVyZVNpemUueSk7XFxuI2Vsc2VcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKDEuMCAvIHRleHR1cmVTaXplLngsIDAuMCk7XFxuI2VuZGlmXFxuIGZsb2F0IGNvYzAgPSAxLjA7XFxuIGZvciAoaW50IGkgPSAwOyBpIDwgMTc7IGkrKykge1xcbiB2ZWMyIGR1diA9IChmbG9hdChpKSAtIDguMCkgKiBvZmZzZXQgKiAxLjU7XFxuIGZsb2F0IGNvYyA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQgKyBkdXYpLnIgKiAyLjAgLSAxLjA7XFxuIGNvYyAqPSBwb3coMS4wIC0gYWJzKGZsb2F0KGkpIC0gOC4wKSAvIDEwLjAsIDIuMCk7XFxuIGNvYzAgPSBtaW4oY29jMCwgY29jKTtcXG4gfVxcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KGNvYzAgKiAwLjUgKyAwLjUsIDAuMCwgMC4wLCAxLjApO1xcbn1cXG5AZW5kXFxuQGV4cG9ydCBjYXIuZG9mLmJsdXJcXG4jZGVmaW5lIEtFUk5FTF9TSVpFIDE3XFxuY29uc3QgdmVjMiBrZXJuZWwxV2VpZ2h0ID0gdmVjMigwLjQxMTI1OSwtMC41NDg3OTQpO1xcbmNvbnN0IHZlYzIga2VybmVsMldlaWdodCA9IHZlYzIoMC41MTMyODIsNC41NjExMTApO1xcbnVuaWZvcm0gdmVjNCBrZXJuZWwxW0tFUk5FTF9TSVpFXTtcXG51bmlmb3JtIHZlYzQga2VybmVsMltLRVJORUxfU0laRV07XFxuI2lmZGVmIEZJTkFMX1BBU1NcXG51bmlmb3JtIHNhbXBsZXIyRCByVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGdUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgYlRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBhVGV4O1xcbiNlbmRpZlxcbnVuaWZvcm0gc2FtcGxlcjJEIG1haW5UZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgY29jVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGRpbGF0ZUNvY1RleDtcXG51bmlmb3JtIGZsb2F0IG1heENvYztcXG51bmlmb3JtIGZsb2F0IG1pbkNvYztcXG51bmlmb3JtIHZlYzIgdGV4dHVyZVNpemU7XFxudmFyeWluZyB2ZWMyIHZfVGV4Y29vcmQ7XFxudmVjMiBtdWx0Q29tcGxleCh2ZWMyIHAsIHZlYzIgcSlcXG57XFxuIHJldHVybiB2ZWMyKHAueCpxLngtcC55KnEueSwgcC54KnEueStwLnkqcS54KTtcXG59XFxuZmxvYXQgR2V0U21hbGxlc3RDb2ModmVjMiB1dilcXG57XFxuIHZlYzIgayA9IDEuMCAvIHRleHR1cmVTaXplO1xcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB1dikucjtcXG4gdmVjNCBhcm91bmQgPSB2ZWM0KFxcbiB0ZXh0dXJlMkQoY29jVGV4LCB1diAtIGspLnIsXFxuIHRleHR1cmUyRChjb2NUZXgsIHV2ICsgdmVjMihrLngsIC1rLnkpKS5yLFxcbiB0ZXh0dXJlMkQoY29jVGV4LCB1diArIHZlYzIoLWsueCwgay55KSkucixcXG4gdGV4dHVyZTJEKGNvY1RleCwgdXYgKyBrKS5yXFxuICk7XFxuIHJldHVybiBtaW4obWluKG1pbihtaW4oYXJvdW5kLngsIGFyb3VuZC55KSwgYXJvdW5kLnopLCBhcm91bmQudyksIGNvYyk7XFxufVxcbkBpbXBvcnQgY2xheS51dGlsLnJnYm1cXG5AaW1wb3J0IGNsYXkudXRpbC5mbG9hdFxcbnZvaWQgbWFpbigpXFxue1xcbiBmbG9hdCBoYWxmS2VybmVsU2l6ZSA9IGZsb2F0KEtFUk5FTF9TSVpFIC8gMik7XFxuIHZlYzIgdGV4ZWxTaXplID0gMS4wIC8gdGV4dHVyZVNpemU7XFxuIGZsb2F0IHdlaWdodCA9IDAuMDtcXG4jaWZkZWYgRkFSRklFTERcXG4gZmxvYXQgY29jMCA9IHRleHR1cmUyRChjb2NUZXgsIHZfVGV4Y29vcmQpLnIgKiAyLjAgLSAxLjA7XFxuI2Vsc2VcXG4gZmxvYXQgY29jMCA9IC0odGV4dHVyZTJEKGRpbGF0ZUNvY1RleCwgdl9UZXhjb29yZCkuciAqIDIuMCAtIDEuMCk7XFxuI2VuZGlmXFxuIGlmIChjb2MwIDw9IDAuMCkge1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KDAuMCk7XFxuIHJldHVybjtcXG4gfVxcbiBjb2MwICo9IG1heENvYztcXG4jaWZkZWYgRklOQUxfUEFTU1xcbiB2ZWM0IHZhbFIgPSB2ZWM0KDAuMCk7XFxuIHZlYzQgdmFsRyA9IHZlYzQoMC4wKTtcXG4gdmVjNCB2YWxCID0gdmVjNCgwLjApO1xcbiB2ZWM0IHZhbEEgPSB2ZWM0KDAuMCk7XFxuIHZlYzIgb2Zmc2V0ID0gdmVjMigwLjAsIGFicyhjb2MwKSAvIGhhbGZLZXJuZWxTaXplKTtcXG4jZWxzZVxcbiB2ZWM0IHZhbCA9IHZlYzQoMC4wKTtcXG4gdmVjMiBvZmZzZXQgPSB2ZWMyKHRleGVsU2l6ZS54IC8gdGV4ZWxTaXplLnkgKiBhYnMoY29jMCkgLyBoYWxmS2VybmVsU2l6ZSwgMC4wKTtcXG4jZW5kaWZcXG4gZm9yIChpbnQgaSA9IDA7IGkgPCBLRVJORUxfU0laRTsgaSsrKSB7XFxuIHZlYzIgZHV2ID0gKGZsb2F0KGkpIC0gaGFsZktlcm5lbFNpemUpICogb2Zmc2V0O1xcbiBmbG9hdCBkaXN0ID0gbGVuZ3RoKGR1dik7XFxuIHZlYzIgdXYgPSBjbGFtcCh2X1RleGNvb3JkICsgZHV2LCB2ZWMyKDAuMCksIHZlYzIoMS4wKSk7XFxuI2lmZGVmIEZBUkZJRUxEXFxuIGZsb2F0IGNvYyA9IEdldFNtYWxsZXN0Q29jKHV2KSAqIDIuMCAtIDEuMDtcXG4jZWxzZVxcbiBmbG9hdCBjb2MgPSB0ZXh0dXJlMkQoY29jVGV4LCB1dikuciAqIDIuMCAtIDEuMDtcXG4jZW5kaWZcXG4gY29jICo9IG1heENvYztcXG4gZmxvYXQgdyA9IDEuMDtcXG4jaWZkZWYgRkFSRklFTERcXG4gdyAqPSBzdGVwKGRpc3QsIGNvYyk7XFxuI2VuZGlmXFxuIHdlaWdodCArPSB3O1xcbiB2ZWM0IGMwYzEgPSB2ZWM0KGtlcm5lbDFbaV0ueHksIGtlcm5lbDJbaV0ueHkpO1xcbiNpZmRlZiBGSU5BTF9QQVNTXFxuIHZlYzQgclRleGVsID0gdGV4dHVyZTJEKHJUZXgsIHV2KSAqIHc7XFxuIHZlYzQgZ1RleGVsID0gdGV4dHVyZTJEKGdUZXgsIHV2KSAqIHc7XFxuIHZlYzQgYlRleGVsID0gdGV4dHVyZTJEKGJUZXgsIHV2KSAqIHc7XFxuIHZlYzQgYVRleGVsID0gdGV4dHVyZTJEKGFUZXgsIHV2KSAqIHc7XFxuIHZhbFIueHkgKz0gbXVsdENvbXBsZXgoclRleGVsLnh5LGMwYzEueHkpO1xcbiB2YWxSLnp3ICs9IG11bHRDb21wbGV4KHJUZXhlbC56dyxjMGMxLnp3KTtcXG4gdmFsRy54eSArPSBtdWx0Q29tcGxleChnVGV4ZWwueHksYzBjMS54eSk7XFxuIHZhbEcuencgKz0gbXVsdENvbXBsZXgoZ1RleGVsLnp3LGMwYzEuencpO1xcbiB2YWxCLnh5ICs9IG11bHRDb21wbGV4KGJUZXhlbC54eSxjMGMxLnh5KTtcXG4gdmFsQi56dyArPSBtdWx0Q29tcGxleChiVGV4ZWwuencsYzBjMS56dyk7XFxuIHZhbEEueHkgKz0gbXVsdENvbXBsZXgoYVRleGVsLnh5LGMwYzEueHkpO1xcbiB2YWxBLnp3ICs9IG11bHRDb21wbGV4KGFUZXhlbC56dyxjMGMxLnp3KTtcXG4jZWxzZVxcbiB2ZWM0IGNvbG9yID0gdGV4dHVyZTJEKG1haW5UZXgsIHV2KTtcXG4gZmxvYXQgdG1wO1xcbiAjaWYgZGVmaW5lZChSX1BBU1MpXFxuIHRtcCA9IGNvbG9yLnI7XFxuICNlbGlmIGRlZmluZWQoR19QQVNTKVxcbiB0bXAgPSBjb2xvci5nO1xcbiAjZWxpZiBkZWZpbmVkKEJfUEFTUylcXG4gdG1wID0gY29sb3IuYjtcXG4gI2VsaWYgZGVmaW5lZChBX1BBU1MpXFxuIHRtcCA9IGNvbG9yLmE7XFxuICNlbmRpZlxcbiB2YWwgKz0gdG1wICogYzBjMSAqIHc7XFxuI2VuZGlmXFxuIH1cXG4gd2VpZ2h0IC89IGZsb2F0KEtFUk5FTF9TSVpFKTtcXG4gd2VpZ2h0ID0gbWF4KHdlaWdodCwgMC4wMDAxKTtcXG4jaWZkZWYgRklOQUxfUEFTU1xcbiB2YWxSIC89IHdlaWdodDtcXG4gdmFsRyAvPSB3ZWlnaHQ7XFxuIHZhbEIgLz0gd2VpZ2h0O1xcbiB2YWxBIC89IHdlaWdodDtcXG4gZmxvYXQgciA9IGRvdCh2YWxSLnh5LGtlcm5lbDFXZWlnaHQpK2RvdCh2YWxSLnp3LGtlcm5lbDJXZWlnaHQpO1xcbiBmbG9hdCBnID0gZG90KHZhbEcueHksa2VybmVsMVdlaWdodCkrZG90KHZhbEcuencsa2VybmVsMldlaWdodCk7XFxuIGZsb2F0IGIgPSBkb3QodmFsQi54eSxrZXJuZWwxV2VpZ2h0KStkb3QodmFsQi56dyxrZXJuZWwyV2VpZ2h0KTtcXG4gZmxvYXQgYSA9IGRvdCh2YWxBLnh5LGtlcm5lbDFXZWlnaHQpK2RvdCh2YWxBLnp3LGtlcm5lbDJXZWlnaHQpO1xcbiBnbF9GcmFnQ29sb3IgPSB2ZWM0KHIsIGcsIGIsIGEpO1xcbiNlbHNlXFxuIHZhbCAvPSB3ZWlnaHQ7XFxuIGdsX0ZyYWdDb2xvciA9IHZhbDtcXG4jZW5kaWZcXG59XFxuQGVuZFxcbi8vIEBlbmRcIjtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvRE9GLmdsc2wuanNcbi8vIG1vZHVsZSBpZCA9IDIwNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///204\n");

/***/ }),
/* 205 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.temporalBlend\\nuniform sampler2D prevTex;\\nuniform sampler2D currTex;\\nuniform sampler2D velocityTex;\\nuniform float stillBlending = 0.95;\\nuniform float motionBlending = 0.5;\\nvarying vec2 v_Texcoord;\\nvoid main() {\\n vec4 vel = texture2D(velocityTex, v_Texcoord);\\n vec2 motion = vel.rg - 0.5;\\n vec4 curr = texture2D(currTex, v_Texcoord);\\n vec4 prev = texture2D(prevTex, v_Texcoord - motion);\\n if (vel.a < 0.01) {\\n gl_FragColor = curr;\\n }\\n else {\\n float motionLength = length(motion);\\n float weight = clamp(\\n mix(stillBlending, motionBlending, motionLength * 1000.0),\\n motionBlending, stillBlending\\n );\\n gl_FragColor = mix(curr, prev, weight);\\n }\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvdGVtcG9yYWxCbGVuZC5nbHNsLmpzP2VmNmMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci50ZW1wb3JhbEJsZW5kXFxudW5pZm9ybSBzYW1wbGVyMkQgcHJldlRleDtcXG51bmlmb3JtIHNhbXBsZXIyRCBjdXJyVGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIHZlbG9jaXR5VGV4O1xcbnVuaWZvcm0gZmxvYXQgc3RpbGxCbGVuZGluZyA9IDAuOTU7XFxudW5pZm9ybSBmbG9hdCBtb3Rpb25CbGVuZGluZyA9IDAuNTtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG52b2lkIG1haW4oKSB7XFxuIHZlYzQgdmVsID0gdGV4dHVyZTJEKHZlbG9jaXR5VGV4LCB2X1RleGNvb3JkKTtcXG4gdmVjMiBtb3Rpb24gPSB2ZWwucmcgLSAwLjU7XFxuIHZlYzQgY3VyciA9IHRleHR1cmUyRChjdXJyVGV4LCB2X1RleGNvb3JkKTtcXG4gdmVjNCBwcmV2ID0gdGV4dHVyZTJEKHByZXZUZXgsIHZfVGV4Y29vcmQgLSBtb3Rpb24pO1xcbiBpZiAodmVsLmEgPCAwLjAxKSB7XFxuIGdsX0ZyYWdDb2xvciA9IGN1cnI7XFxuIH1cXG4gZWxzZSB7XFxuIGZsb2F0IG1vdGlvbkxlbmd0aCA9IGxlbmd0aChtb3Rpb24pO1xcbiBmbG9hdCB3ZWlnaHQgPSBjbGFtcChcXG4gbWl4KHN0aWxsQmxlbmRpbmcsIG1vdGlvbkJsZW5kaW5nLCBtb3Rpb25MZW5ndGggKiAxMDAwLjApLFxcbiBtb3Rpb25CbGVuZGluZywgc3RpbGxCbGVuZGluZ1xcbiApO1xcbiBnbF9GcmFnQ29sb3IgPSBtaXgoY3VyciwgcHJldiwgd2VpZ2h0KTtcXG4gfVxcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL3RlbXBvcmFsQmxlbmQuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///205\n");

/***/ }),
/* 206 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_claygl__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__halton__ = __webpack_require__(64);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__TAA3_glsl_js__ = __webpack_require__(207);\n// Temporal Super Sample for static Scene\n\n\nvar Pass = __WEBPACK_IMPORTED_MODULE_0_claygl__[\"m\" /* compositor */].Pass;\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].import(__WEBPACK_IMPORTED_MODULE_2__TAA3_glsl_js__[\"a\" /* default */]);\n\nfunction TemporalSuperSampling (opt) {\n    opt = opt || {};\n    var haltonSequence = [];\n\n    for (var i = 0; i < 30; i++) {\n        haltonSequence.push([\n            Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i, 2), Object(__WEBPACK_IMPORTED_MODULE_1__halton__[\"a\" /* default */])(i, 3)\n        ]);\n    }\n\n    this._haltonSequence = haltonSequence;\n\n    this._frame = 0;\n\n    // Frame texture before temporal supersampling\n    this._prevFrameTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n    this._outputTex = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"i\" /* Texture2D */]({\n        type: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"h\" /* Texture */].HALF_FLOAT\n    });\n\n    this._taaPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('car.taa')\n    });\n\n    this._velocityTex = opt.velocityTexture;\n\n    this._depthTex = opt.depthTexture;\n\n    this._taaFb = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"a\" /* FrameBuffer */]({\n        depthBuffer: false\n    });\n\n    this._outputPass = new Pass({\n        fragment: __WEBPACK_IMPORTED_MODULE_0_claygl__[\"g\" /* Shader */].source('clay.compositor.output'),\n        // TODO, alpha is premultiplied?\n        blendWithPrevious: true\n    });\n    this._outputPass.material.define('fragment', 'OUTPUT_ALPHA');\n    this._outputPass.material.blend = function (_gl) {\n        // FIXME.\n        // Output is premultiplied alpha when BLEND is enabled ?\n        // http://stackoverflow.com/questions/2171085/opengl-blending-with-previous-contents-of-framebuffer\n        _gl.blendEquationSeparate(_gl.FUNC_ADD, _gl.FUNC_ADD);\n        _gl.blendFuncSeparate(_gl.ONE, _gl.ONE_MINUS_SRC_ALPHA, _gl.ONE, _gl.ONE_MINUS_SRC_ALPHA);\n    };\n}\n\nTemporalSuperSampling.prototype = {\n\n    constructor: TemporalSuperSampling,\n\n    /**\n     * Jitter camera projectionMatrix\n     * @parma {clay.Renderer} renderer\n     * @param {clay.Camera} camera\n     */\n    jitterProjection: function (renderer, camera) {\n        var offset = this._haltonSequence[this._frame % this._haltonSequence.length];\n        var viewport = renderer.viewport;\n        var dpr = viewport.devicePixelRatio || renderer.getDevicePixelRatio();\n        var width = viewport.width * dpr;\n        var height = viewport.height * dpr;\n\n        var translationMat = new __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */]();\n        translationMat.array[12] = (offset[0] * 2.0 - 1.0) / width;\n        translationMat.array[13] = (offset[1] * 2.0 - 1.0) / height;\n\n        __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].mul(camera.projectionMatrix, translationMat, camera.projectionMatrix);\n\n        __WEBPACK_IMPORTED_MODULE_0_claygl__[\"d\" /* Matrix4 */].invert(camera.invProjectionMatrix, camera.projectionMatrix);\n    },\n\n    getJitterOffset: function (renderer) {\n        var offset = this._haltonSequence[this._frame % this._haltonSequence.length];\n        var viewport = renderer.viewport;\n        var dpr = viewport.devicePixelRatio || renderer.getDevicePixelRatio();\n        var width = viewport.width * dpr;\n        var height = viewport.height * dpr;\n\n        return [\n            offset[0] / width,\n            offset[1] / height\n        ];\n    },\n\n    /**\n     * Reset accumulating frame\n     */\n    resetFrame: function () {\n        this._frame = 0;\n    },\n\n    /**\n     * Return current frame\n     */\n    getFrame: function () {\n        return this._frame;\n    },\n\n    getTargetTexture: function () {\n        return this._prevFrameTex;\n    },\n\n    // getPrevFrameTexture: function () {\n    //     return this._outputTex;\n    // },\n\n    resize: function (width, height) {\n        this._prevFrameTex.width = width;\n        this._prevFrameTex.height = height;\n\n        this._outputTex.width = width;\n        this._outputTex.height = height;\n    },\n\n    isFinished: function () {\n        return this._frame >= this._haltonSequence.length;\n    },\n\n    render: function (renderer, camera, sourceTex, still, output) {\n        var taaPass = this._taaPass;\n\n        taaPass.setUniform('jitterOffset', this.getJitterOffset(renderer));\n        taaPass.setUniform('velocityTex', this._velocityTex);\n        taaPass.setUniform('prevTex', this._prevFrameTex);\n        taaPass.setUniform('currTex', sourceTex);\n        taaPass.setUniform('depthTex', this._depthTex);\n        taaPass.setUniform('texelSize', [1 / sourceTex.width, 1 / sourceTex.height]);\n        taaPass.setUniform('velocityTexelSize', [1 / this._depthTex.width, 1 / this._depthTex.height]);\n\n        taaPass.setUniform('still', !!still);\n\n        if (still) {\n            taaPass.setUniform('stillBlending', this._frame === 0 ? 0 : 0.95);\n        }\n\n        this._taaFb.attach(this._outputTex);\n        this._taaFb.bind(renderer);\n        taaPass.render(renderer);\n        this._taaFb.unbind(renderer);\n\n        if (output) {\n            this._outputPass.setUniform('texture', this._outputTex);\n            this._outputPass.render(renderer);\n        }\n\n        // Swap texture\n        var tmp = this._prevFrameTex;\n        this._prevFrameTex = this._outputTex;\n        this._outputTex = tmp;\n\n        this._frame++;\n    },\n\n    dispose: function (renderer) {\n        this._taaFb.dispose(renderer);\n        this._prevFrameTex.dispose(renderer);\n        this._outputTex.dispose(renderer);\n        this._outputPass.dispose(renderer);\n        this._taaPass.dispose(renderer);\n    }\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TemporalSuperSampling);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvVGVtcG9yYWxTdXBlclNhbXBsaW5nLmpzPzIwYTEiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGVtcG9yYWwgU3VwZXIgU2FtcGxlIGZvciBzdGF0aWMgU2NlbmVcbmltcG9ydCB7IGNvbXBvc2l0b3IsIEZyYW1lQnVmZmVyLCBUZXh0dXJlMkQsIFRleHR1cmUsIFNoYWRlciwgTWF0cml4NCB9IGZyb20gJ2NsYXlnbCc7XG5cbnZhciBQYXNzID0gY29tcG9zaXRvci5QYXNzO1xuXG5pbXBvcnQgaGFsdG9uIGZyb20gJy4vaGFsdG9uJztcblxuaW1wb3J0IFRBQUdMU0xDb2RlIGZyb20gJy4vVEFBMy5nbHNsLmpzJztcblxuU2hhZGVyLmltcG9ydChUQUFHTFNMQ29kZSk7XG5cbmZ1bmN0aW9uIFRlbXBvcmFsU3VwZXJTYW1wbGluZyAob3B0KSB7XG4gICAgb3B0ID0gb3B0IHx8IHt9O1xuICAgIHZhciBoYWx0b25TZXF1ZW5jZSA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzMDsgaSsrKSB7XG4gICAgICAgIGhhbHRvblNlcXVlbmNlLnB1c2goW1xuICAgICAgICAgICAgaGFsdG9uKGksIDIpLCBoYWx0b24oaSwgMylcbiAgICAgICAgXSk7XG4gICAgfVxuXG4gICAgdGhpcy5faGFsdG9uU2VxdWVuY2UgPSBoYWx0b25TZXF1ZW5jZTtcblxuICAgIHRoaXMuX2ZyYW1lID0gMDtcblxuICAgIC8vIEZyYW1lIHRleHR1cmUgYmVmb3JlIHRlbXBvcmFsIHN1cGVyc2FtcGxpbmdcbiAgICB0aGlzLl9wcmV2RnJhbWVUZXggPSBuZXcgVGV4dHVyZTJEKHtcbiAgICAgICAgdHlwZTogVGV4dHVyZS5IQUxGX0ZMT0FUXG4gICAgfSk7XG4gICAgdGhpcy5fb3V0cHV0VGV4ID0gbmV3IFRleHR1cmUyRCh7XG4gICAgICAgIHR5cGU6IFRleHR1cmUuSEFMRl9GTE9BVFxuICAgIH0pO1xuXG4gICAgdGhpcy5fdGFhUGFzcyA9IG5ldyBQYXNzKHtcbiAgICAgICAgZnJhZ21lbnQ6IFNoYWRlci5zb3VyY2UoJ2Nhci50YWEnKVxuICAgIH0pO1xuXG4gICAgdGhpcy5fdmVsb2NpdHlUZXggPSBvcHQudmVsb2NpdHlUZXh0dXJlO1xuXG4gICAgdGhpcy5fZGVwdGhUZXggPSBvcHQuZGVwdGhUZXh0dXJlO1xuXG4gICAgdGhpcy5fdGFhRmIgPSBuZXcgRnJhbWVCdWZmZXIoe1xuICAgICAgICBkZXB0aEJ1ZmZlcjogZmFsc2VcbiAgICB9KTtcblxuICAgIHRoaXMuX291dHB1dFBhc3MgPSBuZXcgUGFzcyh7XG4gICAgICAgIGZyYWdtZW50OiBTaGFkZXIuc291cmNlKCdjbGF5LmNvbXBvc2l0b3Iub3V0cHV0JyksXG4gICAgICAgIC8vIFRPRE8sIGFscGhhIGlzIHByZW11bHRpcGxpZWQ/XG4gICAgICAgIGJsZW5kV2l0aFByZXZpb3VzOiB0cnVlXG4gICAgfSk7XG4gICAgdGhpcy5fb3V0cHV0UGFzcy5tYXRlcmlhbC5kZWZpbmUoJ2ZyYWdtZW50JywgJ09VVFBVVF9BTFBIQScpO1xuICAgIHRoaXMuX291dHB1dFBhc3MubWF0ZXJpYWwuYmxlbmQgPSBmdW5jdGlvbiAoX2dsKSB7XG4gICAgICAgIC8vIEZJWE1FLlxuICAgICAgICAvLyBPdXRwdXQgaXMgcHJlbXVsdGlwbGllZCBhbHBoYSB3aGVuIEJMRU5EIGlzIGVuYWJsZWQgP1xuICAgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzIxNzEwODUvb3BlbmdsLWJsZW5kaW5nLXdpdGgtcHJldmlvdXMtY29udGVudHMtb2YtZnJhbWVidWZmZXJcbiAgICAgICAgX2dsLmJsZW5kRXF1YXRpb25TZXBhcmF0ZShfZ2wuRlVOQ19BREQsIF9nbC5GVU5DX0FERCk7XG4gICAgICAgIF9nbC5ibGVuZEZ1bmNTZXBhcmF0ZShfZ2wuT05FLCBfZ2wuT05FX01JTlVTX1NSQ19BTFBIQSwgX2dsLk9ORSwgX2dsLk9ORV9NSU5VU19TUkNfQUxQSEEpO1xuICAgIH07XG59XG5cblRlbXBvcmFsU3VwZXJTYW1wbGluZy5wcm90b3R5cGUgPSB7XG5cbiAgICBjb25zdHJ1Y3RvcjogVGVtcG9yYWxTdXBlclNhbXBsaW5nLFxuXG4gICAgLyoqXG4gICAgICogSml0dGVyIGNhbWVyYSBwcm9qZWN0aW9uTWF0cml4XG4gICAgICogQHBhcm1hIHtjbGF5LlJlbmRlcmVyfSByZW5kZXJlclxuICAgICAqIEBwYXJhbSB7Y2xheS5DYW1lcmF9IGNhbWVyYVxuICAgICAqL1xuICAgIGppdHRlclByb2plY3Rpb246IGZ1bmN0aW9uIChyZW5kZXJlciwgY2FtZXJhKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9oYWx0b25TZXF1ZW5jZVt0aGlzLl9mcmFtZSAlIHRoaXMuX2hhbHRvblNlcXVlbmNlLmxlbmd0aF07XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHJlbmRlcmVyLnZpZXdwb3J0O1xuICAgICAgICB2YXIgZHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbyB8fCByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIHZhciB3aWR0aCA9IHZpZXdwb3J0LndpZHRoICogZHByO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIHZhciB0cmFuc2xhdGlvbk1hdCA9IG5ldyBNYXRyaXg0KCk7XG4gICAgICAgIHRyYW5zbGF0aW9uTWF0LmFycmF5WzEyXSA9IChvZmZzZXRbMF0gKiAyLjAgLSAxLjApIC8gd2lkdGg7XG4gICAgICAgIHRyYW5zbGF0aW9uTWF0LmFycmF5WzEzXSA9IChvZmZzZXRbMV0gKiAyLjAgLSAxLjApIC8gaGVpZ2h0O1xuXG4gICAgICAgIE1hdHJpeDQubXVsKGNhbWVyYS5wcm9qZWN0aW9uTWF0cml4LCB0cmFuc2xhdGlvbk1hdCwgY2FtZXJhLnByb2plY3Rpb25NYXRyaXgpO1xuXG4gICAgICAgIE1hdHJpeDQuaW52ZXJ0KGNhbWVyYS5pbnZQcm9qZWN0aW9uTWF0cml4LCBjYW1lcmEucHJvamVjdGlvbk1hdHJpeCk7XG4gICAgfSxcblxuICAgIGdldEppdHRlck9mZnNldDogZnVuY3Rpb24gKHJlbmRlcmVyKSB7XG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLl9oYWx0b25TZXF1ZW5jZVt0aGlzLl9mcmFtZSAlIHRoaXMuX2hhbHRvblNlcXVlbmNlLmxlbmd0aF07XG4gICAgICAgIHZhciB2aWV3cG9ydCA9IHJlbmRlcmVyLnZpZXdwb3J0O1xuICAgICAgICB2YXIgZHByID0gdmlld3BvcnQuZGV2aWNlUGl4ZWxSYXRpbyB8fCByZW5kZXJlci5nZXREZXZpY2VQaXhlbFJhdGlvKCk7XG4gICAgICAgIHZhciB3aWR0aCA9IHZpZXdwb3J0LndpZHRoICogZHByO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdmlld3BvcnQuaGVpZ2h0ICogZHByO1xuXG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICBvZmZzZXRbMF0gLyB3aWR0aCxcbiAgICAgICAgICAgIG9mZnNldFsxXSAvIGhlaWdodFxuICAgICAgICBdO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXNldCBhY2N1bXVsYXRpbmcgZnJhbWVcbiAgICAgKi9cbiAgICByZXNldEZyYW1lOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2ZyYW1lID0gMDtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIGN1cnJlbnQgZnJhbWVcbiAgICAgKi9cbiAgICBnZXRGcmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZnJhbWU7XG4gICAgfSxcblxuICAgIGdldFRhcmdldFRleHR1cmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ByZXZGcmFtZVRleDtcbiAgICB9LFxuXG4gICAgLy8gZ2V0UHJldkZyYW1lVGV4dHVyZTogZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICByZXR1cm4gdGhpcy5fb3V0cHV0VGV4O1xuICAgIC8vIH0sXG5cbiAgICByZXNpemU6IGZ1bmN0aW9uICh3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX3ByZXZGcmFtZVRleC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9wcmV2RnJhbWVUZXguaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICAgIHRoaXMuX291dHB1dFRleC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9vdXRwdXRUZXguaGVpZ2h0ID0gaGVpZ2h0O1xuICAgIH0sXG5cbiAgICBpc0ZpbmlzaGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mcmFtZSA+PSB0aGlzLl9oYWx0b25TZXF1ZW5jZS5sZW5ndGg7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gKHJlbmRlcmVyLCBjYW1lcmEsIHNvdXJjZVRleCwgc3RpbGwsIG91dHB1dCkge1xuICAgICAgICB2YXIgdGFhUGFzcyA9IHRoaXMuX3RhYVBhc3M7XG5cbiAgICAgICAgdGFhUGFzcy5zZXRVbmlmb3JtKCdqaXR0ZXJPZmZzZXQnLCB0aGlzLmdldEppdHRlck9mZnNldChyZW5kZXJlcikpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4JywgdGhpcy5fdmVsb2NpdHlUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ByZXZUZXgnLCB0aGlzLl9wcmV2RnJhbWVUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ2N1cnJUZXgnLCBzb3VyY2VUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ2RlcHRoVGV4JywgdGhpcy5fZGVwdGhUZXgpO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3RleGVsU2l6ZScsIFsxIC8gc291cmNlVGV4LndpZHRoLCAxIC8gc291cmNlVGV4LmhlaWdodF0pO1xuICAgICAgICB0YWFQYXNzLnNldFVuaWZvcm0oJ3ZlbG9jaXR5VGV4ZWxTaXplJywgWzEgLyB0aGlzLl9kZXB0aFRleC53aWR0aCwgMSAvIHRoaXMuX2RlcHRoVGV4LmhlaWdodF0pO1xuXG4gICAgICAgIHRhYVBhc3Muc2V0VW5pZm9ybSgnc3RpbGwnLCAhIXN0aWxsKTtcblxuICAgICAgICBpZiAoc3RpbGwpIHtcbiAgICAgICAgICAgIHRhYVBhc3Muc2V0VW5pZm9ybSgnc3RpbGxCbGVuZGluZycsIHRoaXMuX2ZyYW1lID09PSAwID8gMCA6IDAuOTUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdGFhRmIuYXR0YWNoKHRoaXMuX291dHB1dFRleCk7XG4gICAgICAgIHRoaXMuX3RhYUZiLmJpbmQocmVuZGVyZXIpO1xuICAgICAgICB0YWFQYXNzLnJlbmRlcihyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX3RhYUZiLnVuYmluZChyZW5kZXJlcik7XG5cbiAgICAgICAgaWYgKG91dHB1dCkge1xuICAgICAgICAgICAgdGhpcy5fb3V0cHV0UGFzcy5zZXRVbmlmb3JtKCd0ZXh0dXJlJywgdGhpcy5fb3V0cHV0VGV4KTtcbiAgICAgICAgICAgIHRoaXMuX291dHB1dFBhc3MucmVuZGVyKHJlbmRlcmVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFN3YXAgdGV4dHVyZVxuICAgICAgICB2YXIgdG1wID0gdGhpcy5fcHJldkZyYW1lVGV4O1xuICAgICAgICB0aGlzLl9wcmV2RnJhbWVUZXggPSB0aGlzLl9vdXRwdXRUZXg7XG4gICAgICAgIHRoaXMuX291dHB1dFRleCA9IHRtcDtcblxuICAgICAgICB0aGlzLl9mcmFtZSsrO1xuICAgIH0sXG5cbiAgICBkaXNwb3NlOiBmdW5jdGlvbiAocmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5fdGFhRmIuZGlzcG9zZShyZW5kZXJlcik7XG4gICAgICAgIHRoaXMuX3ByZXZGcmFtZVRleC5kaXNwb3NlKHJlbmRlcmVyKTtcbiAgICAgICAgdGhpcy5fb3V0cHV0VGV4LmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl9vdXRwdXRQYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgICAgICB0aGlzLl90YWFQYXNzLmRpc3Bvc2UocmVuZGVyZXIpO1xuICAgIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBvcmFsU3VwZXJTYW1wbGluZztcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1RlbXBvcmFsU3VwZXJTYW1wbGluZy5qc1xuLy8gbW9kdWxlIGlkID0gMjA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///206\n");

/***/ }),
/* 207 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (\"@export car.taa\\n#define SHADER_NAME TAA3\\nuniform sampler2D prevTex;\\nuniform sampler2D currTex;\\nuniform sampler2D velocityTex;\\nuniform sampler2D depthTex;\\nuniform vec2 texelSize;\\nuniform vec2 velocityTexelSize;\\nuniform vec2 jitterOffset;\\nuniform bool still;\\nuniform float stillBlending = 0.95;\\nuniform float motionBlending = 0.85;\\nuniform float sharpness = 0.25;\\nuniform float motionAmplification = 6000;\\nvarying vec2 v_Texcoord;\\nfloat Luminance(vec4 color)\\n{\\n return dot(color.rgb, vec3(0.2125, 0.7154, 0.0721));\\n}\\nfloat compareDepth(float a, float b)\\n{\\n return step(a, b);\\n}\\nvec2 GetClosestFragment(vec2 uv)\\n{\\n vec2 k = velocityTexelSize.xy;\\n vec4 neighborhood = vec4(\\n texture2D(depthTex, uv - k).r,\\n texture2D(depthTex, uv + vec2(k.x, -k.y)).r,\\n texture2D(depthTex, uv + vec2(-k.x, k.y)).r,\\n texture2D(depthTex, uv + k).r\\n );\\n vec3 result = vec3(0.0, 0.0, texture2D(depthTex, uv));\\n result = mix(result, vec3(-1.0, -1.0, neighborhood.x), compareDepth(neighborhood.x, result.z));\\n result = mix(result, vec3( 1.0, -1.0, neighborhood.y), compareDepth(neighborhood.y, result.z));\\n result = mix(result, vec3(-1.0, 1.0, neighborhood.z), compareDepth(neighborhood.z, result.z));\\n result = mix(result, vec3( 1.0, 1.0, neighborhood.w), compareDepth(neighborhood.w, result.z));\\n return (uv + result.xy * k);\\n}\\nvec4 ClipToAABB(vec4 color, vec3 minimum, vec3 maximum)\\n{\\n vec3 center = 0.5 * (maximum + minimum);\\n vec3 extents = 0.5 * (maximum - minimum);\\n vec3 offset = color.rgb - center;\\n vec3 ts = abs(extents / (offset + 0.0001));\\n float t = clamp(min(min(ts.x, ts.y), ts.z), 0.0, 1.0);\\n color.rgb = center + offset * t;\\n return color;\\n}\\nvec4 Tonemap(vec4 color)\\n{\\n return vec4(color.rgb / (Luminance(color) + 1.0), color.a);\\n}\\nvec4 Untonemap(vec4 color)\\n{\\n return vec4(color.rgb / max(1.0 - Luminance(color), 0.0001), color.a);\\n}\\nvoid main()\\n{\\n vec2 closest = GetClosestFragment(v_Texcoord);\\n vec4 motionTexel = texture2D(velocityTex, closest);\\n if (still) {\\n gl_FragColor = Untonemap(\\n mix(\\n Tonemap(texture2D(currTex, v_Texcoord)),\\n Tonemap(texture2D(prevTex, v_Texcoord)),\\n stillBlending\\n )\\n );\\n return;\\n }\\n if (motionTexel.a < 0.1) {\\n gl_FragColor = texture2D(currTex, v_Texcoord);\\n return;\\n }\\n vec2 motion = motionTexel.rg - 0.5;\\n vec2 k = texelSize.xy;\\n vec2 uv = v_Texcoord;\\n vec4 color = texture2D(currTex, uv);\\n vec4 topLeft = texture2D(currTex, uv - k * 0.5);\\n vec4 bottomRight = texture2D(currTex, uv + k * 0.5);\\n vec4 corners = 4.0 * (topLeft + bottomRight) - 2.0 * color;\\n vec4 average = (corners + color) * 0.142857;\\n vec4 history = texture2D(prevTex, v_Texcoord - motion);\\n float motionLength = length(motion);\\n vec2 luma = vec2(Luminance(average), Luminance(color));\\n float nudge = mix(4.0, 0.25, clamp(motionLength * 100.0, 0.0, 1.0)) * abs(luma.x - luma.y);\\n vec4 minimum = min(bottomRight, topLeft) - nudge;\\n vec4 maximum = max(topLeft, bottomRight) + nudge;\\n history = ClipToAABB(history, minimum.xyz, maximum.xyz);\\n float weight = clamp(\\n mix(stillBlending, motionBlending, motionLength * motionAmplification),\\n motionBlending, stillBlending\\n );\\n color = mix(Tonemap(color), Tonemap(history), weight);\\n color = Untonemap(clamp(color, 0.0, 1.0));\\n gl_FragColor = color;\\n}\\n@end\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvVEFBMy5nbHNsLmpzP2NmZTciXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCJAZXhwb3J0IGNhci50YWFcXG4jZGVmaW5lIFNIQURFUl9OQU1FIFRBQTNcXG51bmlmb3JtIHNhbXBsZXIyRCBwcmV2VGV4O1xcbnVuaWZvcm0gc2FtcGxlcjJEIGN1cnJUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgdmVsb2NpdHlUZXg7XFxudW5pZm9ybSBzYW1wbGVyMkQgZGVwdGhUZXg7XFxudW5pZm9ybSB2ZWMyIHRleGVsU2l6ZTtcXG51bmlmb3JtIHZlYzIgdmVsb2NpdHlUZXhlbFNpemU7XFxudW5pZm9ybSB2ZWMyIGppdHRlck9mZnNldDtcXG51bmlmb3JtIGJvb2wgc3RpbGw7XFxudW5pZm9ybSBmbG9hdCBzdGlsbEJsZW5kaW5nID0gMC45NTtcXG51bmlmb3JtIGZsb2F0IG1vdGlvbkJsZW5kaW5nID0gMC44NTtcXG51bmlmb3JtIGZsb2F0IHNoYXJwbmVzcyA9IDAuMjU7XFxudW5pZm9ybSBmbG9hdCBtb3Rpb25BbXBsaWZpY2F0aW9uID0gNjAwMDtcXG52YXJ5aW5nIHZlYzIgdl9UZXhjb29yZDtcXG5mbG9hdCBMdW1pbmFuY2UodmVjNCBjb2xvcilcXG57XFxuIHJldHVybiBkb3QoY29sb3IucmdiLCB2ZWMzKDAuMjEyNSwgMC43MTU0LCAwLjA3MjEpKTtcXG59XFxuZmxvYXQgY29tcGFyZURlcHRoKGZsb2F0IGEsIGZsb2F0IGIpXFxue1xcbiByZXR1cm4gc3RlcChhLCBiKTtcXG59XFxudmVjMiBHZXRDbG9zZXN0RnJhZ21lbnQodmVjMiB1dilcXG57XFxuIHZlYzIgayA9IHZlbG9jaXR5VGV4ZWxTaXplLnh5O1xcbiB2ZWM0IG5laWdoYm9yaG9vZCA9IHZlYzQoXFxuIHRleHR1cmUyRChkZXB0aFRleCwgdXYgLSBrKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgdmVjMihrLngsIC1rLnkpKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgdmVjMigtay54LCBrLnkpKS5yLFxcbiB0ZXh0dXJlMkQoZGVwdGhUZXgsIHV2ICsgaykuclxcbiApO1xcbiB2ZWMzIHJlc3VsdCA9IHZlYzMoMC4wLCAwLjAsIHRleHR1cmUyRChkZXB0aFRleCwgdXYpKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMygtMS4wLCAtMS4wLCBuZWlnaGJvcmhvb2QueCksIGNvbXBhcmVEZXB0aChuZWlnaGJvcmhvb2QueCwgcmVzdWx0LnopKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMyggMS4wLCAtMS4wLCBuZWlnaGJvcmhvb2QueSksIGNvbXBhcmVEZXB0aChuZWlnaGJvcmhvb2QueSwgcmVzdWx0LnopKTtcXG4gcmVzdWx0ID0gbWl4KHJlc3VsdCwgdmVjMygtMS4wLCAxLjAsIG5laWdoYm9yaG9vZC56KSwgY29tcGFyZURlcHRoKG5laWdoYm9yaG9vZC56LCByZXN1bHQueikpO1xcbiByZXN1bHQgPSBtaXgocmVzdWx0LCB2ZWMzKCAxLjAsIDEuMCwgbmVpZ2hib3Job29kLncpLCBjb21wYXJlRGVwdGgobmVpZ2hib3Job29kLncsIHJlc3VsdC56KSk7XFxuIHJldHVybiAodXYgKyByZXN1bHQueHkgKiBrKTtcXG59XFxudmVjNCBDbGlwVG9BQUJCKHZlYzQgY29sb3IsIHZlYzMgbWluaW11bSwgdmVjMyBtYXhpbXVtKVxcbntcXG4gdmVjMyBjZW50ZXIgPSAwLjUgKiAobWF4aW11bSArIG1pbmltdW0pO1xcbiB2ZWMzIGV4dGVudHMgPSAwLjUgKiAobWF4aW11bSAtIG1pbmltdW0pO1xcbiB2ZWMzIG9mZnNldCA9IGNvbG9yLnJnYiAtIGNlbnRlcjtcXG4gdmVjMyB0cyA9IGFicyhleHRlbnRzIC8gKG9mZnNldCArIDAuMDAwMSkpO1xcbiBmbG9hdCB0ID0gY2xhbXAobWluKG1pbih0cy54LCB0cy55KSwgdHMueiksIDAuMCwgMS4wKTtcXG4gY29sb3IucmdiID0gY2VudGVyICsgb2Zmc2V0ICogdDtcXG4gcmV0dXJuIGNvbG9yO1xcbn1cXG52ZWM0IFRvbmVtYXAodmVjNCBjb2xvcilcXG57XFxuIHJldHVybiB2ZWM0KGNvbG9yLnJnYiAvIChMdW1pbmFuY2UoY29sb3IpICsgMS4wKSwgY29sb3IuYSk7XFxufVxcbnZlYzQgVW50b25lbWFwKHZlYzQgY29sb3IpXFxue1xcbiByZXR1cm4gdmVjNChjb2xvci5yZ2IgLyBtYXgoMS4wIC0gTHVtaW5hbmNlKGNvbG9yKSwgMC4wMDAxKSwgY29sb3IuYSk7XFxufVxcbnZvaWQgbWFpbigpXFxue1xcbiB2ZWMyIGNsb3Nlc3QgPSBHZXRDbG9zZXN0RnJhZ21lbnQodl9UZXhjb29yZCk7XFxuIHZlYzQgbW90aW9uVGV4ZWwgPSB0ZXh0dXJlMkQodmVsb2NpdHlUZXgsIGNsb3Nlc3QpO1xcbiBpZiAoc3RpbGwpIHtcXG4gZ2xfRnJhZ0NvbG9yID0gVW50b25lbWFwKFxcbiBtaXgoXFxuIFRvbmVtYXAodGV4dHVyZTJEKGN1cnJUZXgsIHZfVGV4Y29vcmQpKSxcXG4gVG9uZW1hcCh0ZXh0dXJlMkQocHJldlRleCwgdl9UZXhjb29yZCkpLFxcbiBzdGlsbEJsZW5kaW5nXFxuIClcXG4gKTtcXG4gcmV0dXJuO1xcbiB9XFxuIGlmIChtb3Rpb25UZXhlbC5hIDwgMC4xKSB7XFxuIGdsX0ZyYWdDb2xvciA9IHRleHR1cmUyRChjdXJyVGV4LCB2X1RleGNvb3JkKTtcXG4gcmV0dXJuO1xcbiB9XFxuIHZlYzIgbW90aW9uID0gbW90aW9uVGV4ZWwucmcgLSAwLjU7XFxuIHZlYzIgayA9IHRleGVsU2l6ZS54eTtcXG4gdmVjMiB1diA9IHZfVGV4Y29vcmQ7XFxuIHZlYzQgY29sb3IgPSB0ZXh0dXJlMkQoY3VyclRleCwgdXYpO1xcbiB2ZWM0IHRvcExlZnQgPSB0ZXh0dXJlMkQoY3VyclRleCwgdXYgLSBrICogMC41KTtcXG4gdmVjNCBib3R0b21SaWdodCA9IHRleHR1cmUyRChjdXJyVGV4LCB1diArIGsgKiAwLjUpO1xcbiB2ZWM0IGNvcm5lcnMgPSA0LjAgKiAodG9wTGVmdCArIGJvdHRvbVJpZ2h0KSAtIDIuMCAqIGNvbG9yO1xcbiB2ZWM0IGF2ZXJhZ2UgPSAoY29ybmVycyArIGNvbG9yKSAqIDAuMTQyODU3O1xcbiB2ZWM0IGhpc3RvcnkgPSB0ZXh0dXJlMkQocHJldlRleCwgdl9UZXhjb29yZCAtIG1vdGlvbik7XFxuIGZsb2F0IG1vdGlvbkxlbmd0aCA9IGxlbmd0aChtb3Rpb24pO1xcbiB2ZWMyIGx1bWEgPSB2ZWMyKEx1bWluYW5jZShhdmVyYWdlKSwgTHVtaW5hbmNlKGNvbG9yKSk7XFxuIGZsb2F0IG51ZGdlID0gbWl4KDQuMCwgMC4yNSwgY2xhbXAobW90aW9uTGVuZ3RoICogMTAwLjAsIDAuMCwgMS4wKSkgKiBhYnMobHVtYS54IC0gbHVtYS55KTtcXG4gdmVjNCBtaW5pbXVtID0gbWluKGJvdHRvbVJpZ2h0LCB0b3BMZWZ0KSAtIG51ZGdlO1xcbiB2ZWM0IG1heGltdW0gPSBtYXgodG9wTGVmdCwgYm90dG9tUmlnaHQpICsgbnVkZ2U7XFxuIGhpc3RvcnkgPSBDbGlwVG9BQUJCKGhpc3RvcnksIG1pbmltdW0ueHl6LCBtYXhpbXVtLnh5eik7XFxuIGZsb2F0IHdlaWdodCA9IGNsYW1wKFxcbiBtaXgoc3RpbGxCbGVuZGluZywgbW90aW9uQmxlbmRpbmcsIG1vdGlvbkxlbmd0aCAqIG1vdGlvbkFtcGxpZmljYXRpb24pLFxcbiBtb3Rpb25CbGVuZGluZywgc3RpbGxCbGVuZGluZ1xcbiApO1xcbiBjb2xvciA9IG1peChUb25lbWFwKGNvbG9yKSwgVG9uZW1hcChoaXN0b3J5KSwgd2VpZ2h0KTtcXG4gY29sb3IgPSBVbnRvbmVtYXAoY2xhbXAoY29sb3IsIDAuMCwgMS4wKSk7XFxuIGdsX0ZyYWdDb2xvciA9IGNvbG9yO1xcbn1cXG5AZW5kXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9jbGF5Z2wtYWR2YW5jZWQtcmVuZGVyZXIvc3JjL1RBQTMuZ2xzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///207\n");

/***/ }),
/* 208 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    // If enable shadow\n    shadow: {\n        enable: true,\n        kernelSize: 6,\n        blurSize: 2\n    },\n\n    temporalSuperSampling: {\n        // If support dynamic scene\n        dynamic: true,\n        enable: 'auto'\n    },\n\n    // Configuration about post effects.\n    postEffect: {\n        // If enable post effects.\n        enable: true,\n        // Configuration about bloom post effect\n        bloom: {\n            // If enable bloom\n            enable: true,\n            // Intensity of bloom\n            intensity: 0.1\n        },\n        // Configuration about depth of field\n        depthOfField: {\n            enable: false,\n            // Focal distance of camera in word space.\n            focalDistance: 5,\n            // Focal range of camera in word space. in this range image will be absolutely sharp.\n            focalRange: 1,\n            // Max out of focus blur radius.\n            blurRadius: 20,\n            // fstop of camera. Smaller fstop will have shallow depth of field\n            aperture: 5.6,\n            // Blur quality. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium'\n        },\n        // Configuration about screen space ambient occulusion\n        screenSpaceAmbientOcclusion: {\n            // If enable SSAO\n            enable: false,\n            // Sampling radius in work space.\n            // Larger will produce more soft concat shadow.\n            // But also needs higher quality or it will have more obvious artifacts\n            radius: 0.2,\n            // Quality of SSAO. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium',\n            // Intensity of SSAO\n            intensity: 1,\n            temporalFilter: false\n        },\n        // Configuration about screen space reflection\n        screenSpaceReflection: {\n            enable: false,\n            // If physically corrected.\n            physical: false,\n            // Quality of SSR. 'low'|'medium'|'high'|'ultra'\n            quality: 'medium',\n            // Surface with less roughness will have reflection.\n            maxRoughness: 0.8\n        },\n        // Configuration about color correction\n        colorCorrection: {\n            // If enable color correction\n            enable: true,\n            exposure: 0,\n            brightness: 0,\n            contrast: 1,\n            saturation: 1,\n            // Lookup texture for color correction.\n            // See https://ecomfe.github.io/echarts-doc/public/cn/option-gl.html#globe.postEffect.colorCorrection.lookupTexture\n            lookupTexture: ''\n        },\n        FXAA: {\n            // If enable FXAA\n            enable: false\n        }\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvZGVmYXVsdEdyYXBoaWNDb25maWcuanM/MTM1OCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gICAgLy8gSWYgZW5hYmxlIHNoYWRvd1xuICAgIHNoYWRvdzoge1xuICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgIGtlcm5lbFNpemU6IDYsXG4gICAgICAgIGJsdXJTaXplOiAyXG4gICAgfSxcblxuICAgIHRlbXBvcmFsU3VwZXJTYW1wbGluZzoge1xuICAgICAgICAvLyBJZiBzdXBwb3J0IGR5bmFtaWMgc2NlbmVcbiAgICAgICAgZHluYW1pYzogdHJ1ZSxcbiAgICAgICAgZW5hYmxlOiAnYXV0bydcbiAgICB9LFxuXG4gICAgLy8gQ29uZmlndXJhdGlvbiBhYm91dCBwb3N0IGVmZmVjdHMuXG4gICAgcG9zdEVmZmVjdDoge1xuICAgICAgICAvLyBJZiBlbmFibGUgcG9zdCBlZmZlY3RzLlxuICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgIC8vIENvbmZpZ3VyYXRpb24gYWJvdXQgYmxvb20gcG9zdCBlZmZlY3RcbiAgICAgICAgYmxvb206IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBibG9vbVxuICAgICAgICAgICAgZW5hYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gSW50ZW5zaXR5IG9mIGJsb29tXG4gICAgICAgICAgICBpbnRlbnNpdHk6IDAuMVxuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IGRlcHRoIG9mIGZpZWxkXG4gICAgICAgIGRlcHRoT2ZGaWVsZDoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIEZvY2FsIGRpc3RhbmNlIG9mIGNhbWVyYSBpbiB3b3JkIHNwYWNlLlxuICAgICAgICAgICAgZm9jYWxEaXN0YW5jZTogNSxcbiAgICAgICAgICAgIC8vIEZvY2FsIHJhbmdlIG9mIGNhbWVyYSBpbiB3b3JkIHNwYWNlLiBpbiB0aGlzIHJhbmdlIGltYWdlIHdpbGwgYmUgYWJzb2x1dGVseSBzaGFycC5cbiAgICAgICAgICAgIGZvY2FsUmFuZ2U6IDEsXG4gICAgICAgICAgICAvLyBNYXggb3V0IG9mIGZvY3VzIGJsdXIgcmFkaXVzLlxuICAgICAgICAgICAgYmx1clJhZGl1czogMjAsXG4gICAgICAgICAgICAvLyBmc3RvcCBvZiBjYW1lcmEuIFNtYWxsZXIgZnN0b3Agd2lsbCBoYXZlIHNoYWxsb3cgZGVwdGggb2YgZmllbGRcbiAgICAgICAgICAgIGFwZXJ0dXJlOiA1LjYsXG4gICAgICAgICAgICAvLyBCbHVyIHF1YWxpdHkuICdsb3cnfCdtZWRpdW0nfCdoaWdoJ3wndWx0cmEnXG4gICAgICAgICAgICBxdWFsaXR5OiAnbWVkaXVtJ1xuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IHNjcmVlbiBzcGFjZSBhbWJpZW50IG9jY3VsdXNpb25cbiAgICAgICAgc2NyZWVuU3BhY2VBbWJpZW50T2NjbHVzaW9uOiB7XG4gICAgICAgICAgICAvLyBJZiBlbmFibGUgU1NBT1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIFNhbXBsaW5nIHJhZGl1cyBpbiB3b3JrIHNwYWNlLlxuICAgICAgICAgICAgLy8gTGFyZ2VyIHdpbGwgcHJvZHVjZSBtb3JlIHNvZnQgY29uY2F0IHNoYWRvdy5cbiAgICAgICAgICAgIC8vIEJ1dCBhbHNvIG5lZWRzIGhpZ2hlciBxdWFsaXR5IG9yIGl0IHdpbGwgaGF2ZSBtb3JlIG9idmlvdXMgYXJ0aWZhY3RzXG4gICAgICAgICAgICByYWRpdXM6IDAuMixcbiAgICAgICAgICAgIC8vIFF1YWxpdHkgb2YgU1NBTy4gJ2xvdyd8J21lZGl1bSd8J2hpZ2gnfCd1bHRyYSdcbiAgICAgICAgICAgIHF1YWxpdHk6ICdtZWRpdW0nLFxuICAgICAgICAgICAgLy8gSW50ZW5zaXR5IG9mIFNTQU9cbiAgICAgICAgICAgIGludGVuc2l0eTogMSxcbiAgICAgICAgICAgIHRlbXBvcmFsRmlsdGVyOiBmYWxzZVxuICAgICAgICB9LFxuICAgICAgICAvLyBDb25maWd1cmF0aW9uIGFib3V0IHNjcmVlbiBzcGFjZSByZWZsZWN0aW9uXG4gICAgICAgIHNjcmVlblNwYWNlUmVmbGVjdGlvbjoge1xuICAgICAgICAgICAgZW5hYmxlOiBmYWxzZSxcbiAgICAgICAgICAgIC8vIElmIHBoeXNpY2FsbHkgY29ycmVjdGVkLlxuICAgICAgICAgICAgcGh5c2ljYWw6IGZhbHNlLFxuICAgICAgICAgICAgLy8gUXVhbGl0eSBvZiBTU1IuICdsb3cnfCdtZWRpdW0nfCdoaWdoJ3wndWx0cmEnXG4gICAgICAgICAgICBxdWFsaXR5OiAnbWVkaXVtJyxcbiAgICAgICAgICAgIC8vIFN1cmZhY2Ugd2l0aCBsZXNzIHJvdWdobmVzcyB3aWxsIGhhdmUgcmVmbGVjdGlvbi5cbiAgICAgICAgICAgIG1heFJvdWdobmVzczogMC44XG4gICAgICAgIH0sXG4gICAgICAgIC8vIENvbmZpZ3VyYXRpb24gYWJvdXQgY29sb3IgY29ycmVjdGlvblxuICAgICAgICBjb2xvckNvcnJlY3Rpb246IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBjb2xvciBjb3JyZWN0aW9uXG4gICAgICAgICAgICBlbmFibGU6IHRydWUsXG4gICAgICAgICAgICBleHBvc3VyZTogMCxcbiAgICAgICAgICAgIGJyaWdodG5lc3M6IDAsXG4gICAgICAgICAgICBjb250cmFzdDogMSxcbiAgICAgICAgICAgIHNhdHVyYXRpb246IDEsXG4gICAgICAgICAgICAvLyBMb29rdXAgdGV4dHVyZSBmb3IgY29sb3IgY29ycmVjdGlvbi5cbiAgICAgICAgICAgIC8vIFNlZSBodHRwczovL2Vjb21mZS5naXRodWIuaW8vZWNoYXJ0cy1kb2MvcHVibGljL2NuL29wdGlvbi1nbC5odG1sI2dsb2JlLnBvc3RFZmZlY3QuY29sb3JDb3JyZWN0aW9uLmxvb2t1cFRleHR1cmVcbiAgICAgICAgICAgIGxvb2t1cFRleHR1cmU6ICcnXG4gICAgICAgIH0sXG4gICAgICAgIEZYQUE6IHtcbiAgICAgICAgICAgIC8vIElmIGVuYWJsZSBGWEFBXG4gICAgICAgICAgICBlbmFibGU6IGZhbHNlXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9zcmMvZGVmYXVsdEdyYXBoaWNDb25maWcuanNcbi8vIG1vZHVsZSBpZCA9IDIwOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///208\n");

/***/ }),
/* 209 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export $override */\n/* unused harmony export clone */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = merge;\n/* unused harmony export mergeAll */\n/* unused harmony export extend */\n/* unused harmony export defaults */\n/* unused harmony export createCanvas */\n/* unused harmony export getContext */\n/* unused harmony export indexOf */\n/* unused harmony export inherits */\n/* unused harmony export mixin */\n/* unused harmony export isArrayLike */\n/* unused harmony export each */\n/* unused harmony export map */\n/* unused harmony export reduce */\n/* unused harmony export filter */\n/* unused harmony export find */\n/* unused harmony export bind */\n/* unused harmony export curry */\n/* unused harmony export isArray */\n/* unused harmony export isFunction */\n/* unused harmony export isString */\n/* unused harmony export isObject */\n/* unused harmony export isBuiltInObject */\n/* unused harmony export isTypedArray */\n/* unused harmony export isDom */\n/* unused harmony export eqNaN */\n/* unused harmony export retrieve */\n/* unused harmony export retrieve2 */\n/* unused harmony export retrieve3 */\n/* unused harmony export slice */\n/* unused harmony export normalizeCssArray */\n/* unused harmony export assert */\n/* unused harmony export trim */\n/* unused harmony export setAsPrimitive */\n/* unused harmony export isPrimitive */\n/* unused harmony export createHashMap */\n/* unused harmony export concatArray */\n/* unused harmony export noop */\n/**\n * @module zrender/core/util\n */\n\n// 用于处理merge时无法遍历Date等对象的问题\nvar BUILTIN_OBJECT = {\n    '[object Function]': 1,\n    '[object RegExp]': 1,\n    '[object Date]': 1,\n    '[object Error]': 1,\n    '[object CanvasGradient]': 1,\n    '[object CanvasPattern]': 1,\n    // For node-canvas\n    '[object Image]': 1,\n    '[object Canvas]': 1\n};\n\nvar TYPED_ARRAY = {\n    '[object Int8Array]': 1,\n    '[object Uint8Array]': 1,\n    '[object Uint8ClampedArray]': 1,\n    '[object Int16Array]': 1,\n    '[object Uint16Array]': 1,\n    '[object Int32Array]': 1,\n    '[object Uint32Array]': 1,\n    '[object Float32Array]': 1,\n    '[object Float64Array]': 1\n};\n\nvar objToString = Object.prototype.toString;\n\nvar arrayProto = Array.prototype;\nvar nativeForEach = arrayProto.forEach;\nvar nativeFilter = arrayProto.filter;\nvar nativeSlice = arrayProto.slice;\nvar nativeMap = arrayProto.map;\nvar nativeReduce = arrayProto.reduce;\n\n// Avoid assign to an exported variable, for transforming to cjs.\nvar methods = {};\n\nfunction $override(name, fn) {\n    // Clear ctx instance for different environment\n    if (name === 'createCanvas') {\n        _ctx = null;\n    }\n\n    methods[name] = fn;\n}\n\n/**\n * Those data types can be cloned:\n *     Plain object, Array, TypedArray, number, string, null, undefined.\n * Those data types will be assgined using the orginal data:\n *     BUILTIN_OBJECT\n * Instance of user defined class will be cloned to a plain object, without\n * properties in prototype.\n * Other data types is not supported (not sure what will happen).\n *\n * Caution: do not support clone Date, for performance consideration.\n * (There might be a large number of date in `series.data`).\n * So date should not be modified in and out of echarts.\n *\n * @param {*} source\n * @return {*} new\n */\nfunction clone(source) {\n    if (source == null || typeof source != 'object') {\n        return source;\n    }\n\n    var result = source;\n    var typeStr = objToString.call(source);\n\n    if (typeStr === '[object Array]') {\n        if (!isPrimitive(source)) {\n            result = [];\n            for (var i = 0, len = source.length; i < len; i++) {\n                result[i] = clone(source[i]);\n            }\n        }\n    }\n    else if (TYPED_ARRAY[typeStr]) {\n        if (!isPrimitive(source)) {\n            var Ctor = source.constructor;\n            if (source.constructor.from) {\n                result = Ctor.from(source);\n            }\n            else {\n                result = new Ctor(source.length);\n                for (var i = 0, len = source.length; i < len; i++) {\n                    result[i] = clone(source[i]);\n                }\n            }\n        }\n    }\n    else if (!BUILTIN_OBJECT[typeStr] && !isPrimitive(source) && !isDom(source)) {\n        result = {};\n        for (var key in source) {\n            if (source.hasOwnProperty(key)) {\n                result[key] = clone(source[key]);\n            }\n        }\n    }\n\n    return result;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overwrite=false]\n */\nfunction merge(target, source, overwrite) {\n    // We should escapse that source is string\n    // and enter for ... in ...\n    if (!isObject(source) || !isObject(target)) {\n        return overwrite ? clone(source) : target;\n    }\n\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            var targetProp = target[key];\n            var sourceProp = source[key];\n\n            if (isObject(sourceProp)\n                && isObject(targetProp)\n                && !isArray(sourceProp)\n                && !isArray(targetProp)\n                && !isDom(sourceProp)\n                && !isDom(targetProp)\n                && !isBuiltInObject(sourceProp)\n                && !isBuiltInObject(targetProp)\n                && !isPrimitive(sourceProp)\n                && !isPrimitive(targetProp)\n            ) {\n                // 如果需要递归覆盖，就递归调用merge\n                merge(targetProp, sourceProp, overwrite);\n            }\n            else if (overwrite || !(key in target)) {\n                // 否则只处理overwrite为true，或者在目标对象中没有此属性的情况\n                // NOTE，在 target[key] 不存在的时候也是直接覆盖\n                target[key] = clone(source[key], true);\n            }\n        }\n    }\n\n    return target;\n}\n\n/**\n * @param {Array} targetAndSources The first item is target, and the rests are source.\n * @param {boolean} [overwrite=false]\n * @return {*} target\n */\nfunction mergeAll(targetAndSources, overwrite) {\n    var result = targetAndSources[0];\n    for (var i = 1, len = targetAndSources.length; i < len; i++) {\n        result = merge(result, targetAndSources[i], overwrite);\n    }\n    return result;\n}\n\n/**\n * @param {*} target\n * @param {*} source\n * @memberOf module:zrender/core/util\n */\nfunction extend(target, source) {\n    for (var key in source) {\n        if (source.hasOwnProperty(key)) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\n\n/**\n * @param {*} target\n * @param {*} source\n * @param {boolean} [overlay=false]\n * @memberOf module:zrender/core/util\n */\nfunction defaults(target, source, overlay) {\n    for (var key in source) {\n        if (source.hasOwnProperty(key)\n            && (overlay ? source[key] != null : target[key] == null)\n        ) {\n            target[key] = source[key];\n        }\n    }\n    return target;\n}\n\nvar createCanvas = function () {\n    return methods.createCanvas();\n};\n\nmethods.createCanvas = function () {\n    return document.createElement('canvas');\n};\n\n// FIXME\nvar _ctx;\n\nfunction getContext() {\n    if (!_ctx) {\n        // Use util.createCanvas instead of createCanvas\n        // because createCanvas may be overwritten in different environment\n        _ctx = createCanvas().getContext('2d');\n    }\n    return _ctx;\n}\n\n/**\n * 查询数组中元素的index\n * @memberOf module:zrender/core/util\n */\nfunction indexOf(array, value) {\n    if (array) {\n        if (array.indexOf) {\n            return array.indexOf(value);\n        }\n        for (var i = 0, len = array.length; i < len; i++) {\n            if (array[i] === value) {\n                return i;\n            }\n        }\n    }\n    return -1;\n}\n\n/**\n * 构造类继承关系\n *\n * @memberOf module:zrender/core/util\n * @param {Function} clazz 源类\n * @param {Function} baseClazz 基类\n */\nfunction inherits(clazz, baseClazz) {\n    var clazzPrototype = clazz.prototype;\n    function F() {}\n    F.prototype = baseClazz.prototype;\n    clazz.prototype = new F();\n\n    for (var prop in clazzPrototype) {\n        clazz.prototype[prop] = clazzPrototype[prop];\n    }\n    clazz.prototype.constructor = clazz;\n    clazz.superClass = baseClazz;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Object|Function} target\n * @param {Object|Function} sorce\n * @param {boolean} overlay\n */\nfunction mixin(target, source, overlay) {\n    target = 'prototype' in target ? target.prototype : target;\n    source = 'prototype' in source ? source.prototype : source;\n\n    defaults(target, source, overlay);\n}\n\n/**\n * Consider typed array.\n * @param {Array|TypedArray} data\n */\nfunction isArrayLike(data) {\n    if (! data) {\n        return;\n    }\n    if (typeof data == 'string') {\n        return false;\n    }\n    return typeof data.length == 'number';\n}\n\n/**\n * 数组或对象遍历\n * @memberOf module:zrender/core/util\n * @param {Object|Array} obj\n * @param {Function} cb\n * @param {*} [context]\n */\nfunction each(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.forEach && obj.forEach === nativeForEach) {\n        obj.forEach(cb, context);\n    }\n    else if (obj.length === +obj.length) {\n        for (var i = 0, len = obj.length; i < len; i++) {\n            cb.call(context, obj[i], i, obj);\n        }\n    }\n    else {\n        for (var key in obj) {\n            if (obj.hasOwnProperty(key)) {\n                cb.call(context, obj[key], key, obj);\n            }\n        }\n    }\n}\n\n/**\n * 数组映射\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\nfunction map(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.map && obj.map === nativeMap) {\n        return obj.map(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            result.push(cb.call(context, obj[i], i, obj));\n        }\n        return result;\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {Object} [memo]\n * @param {*} [context]\n * @return {Array}\n */\nfunction reduce(obj, cb, memo, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.reduce && obj.reduce === nativeReduce) {\n        return obj.reduce(cb, memo, context);\n    }\n    else {\n        for (var i = 0, len = obj.length; i < len; i++) {\n            memo = cb.call(context, memo, obj[i], i, obj);\n        }\n        return memo;\n    }\n}\n\n/**\n * 数组过滤\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {Array}\n */\nfunction filter(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    if (obj.filter && obj.filter === nativeFilter) {\n        return obj.filter(cb, context);\n    }\n    else {\n        var result = [];\n        for (var i = 0, len = obj.length; i < len; i++) {\n            if (cb.call(context, obj[i], i, obj)) {\n                result.push(obj[i]);\n            }\n        }\n        return result;\n    }\n}\n\n/**\n * 数组项查找\n * @memberOf module:zrender/core/util\n * @param {Array} obj\n * @param {Function} cb\n * @param {*} [context]\n * @return {*}\n */\nfunction find(obj, cb, context) {\n    if (!(obj && cb)) {\n        return;\n    }\n    for (var i = 0, len = obj.length; i < len; i++) {\n        if (cb.call(context, obj[i], i, obj)) {\n            return obj[i];\n        }\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @param {*} context\n * @return {Function}\n */\nfunction bind(func, context) {\n    var args = nativeSlice.call(arguments, 2);\n    return function () {\n        return func.apply(context, args.concat(nativeSlice.call(arguments)));\n    };\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Function} func\n * @return {Function}\n */\nfunction curry(func) {\n    var args = nativeSlice.call(arguments, 1);\n    return function () {\n        return func.apply(this, args.concat(nativeSlice.call(arguments)));\n    };\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isArray(value) {\n    return objToString.call(value) === '[object Array]';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isFunction(value) {\n    return typeof value === 'function';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isString(value) {\n    return objToString.call(value) === '[object String]';\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isObject(value) {\n    // Avoid a V8 JIT bug in Chrome 19-20.\n    // See https://code.google.com/p/v8/issues/detail?id=2291 for more details.\n    var type = typeof value;\n    return type === 'function' || (!!value && type == 'object');\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isBuiltInObject(value) {\n    return !!BUILTIN_OBJECT[objToString.call(value)];\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isTypedArray(value) {\n    return !!TYPED_ARRAY[objToString.call(value)];\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {*} value\n * @return {boolean}\n */\nfunction isDom(value) {\n    return typeof value === 'object'\n        && typeof value.nodeType === 'number'\n        && typeof value.ownerDocument === 'object';\n}\n\n/**\n * Whether is exactly NaN. Notice isNaN('a') returns true.\n * @param {*} value\n * @return {boolean}\n */\nfunction eqNaN(value) {\n    return value !== value;\n}\n\n/**\n * If value1 is not null, then return value1, otherwise judget rest of values.\n * Low performance.\n * @memberOf module:zrender/core/util\n * @return {*} Final value\n */\nfunction retrieve(values) {\n    for (var i = 0, len = arguments.length; i < len; i++) {\n        if (arguments[i] != null) {\n            return arguments[i];\n        }\n    }\n}\n\nfunction retrieve2(value0, value1) {\n    return value0 != null\n        ? value0\n        : value1;\n}\n\nfunction retrieve3(value0, value1, value2) {\n    return value0 != null\n        ? value0\n        : value1 != null\n        ? value1\n        : value2;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {Array} arr\n * @param {number} startIndex\n * @param {number} endIndex\n * @return {Array}\n */\nfunction slice() {\n    return Function.call.apply(nativeSlice, arguments);\n}\n\n/**\n * Normalize css liked array configuration\n * e.g.\n *  3 => [3, 3, 3, 3]\n *  [4, 2] => [4, 2, 4, 2]\n *  [4, 3, 2] => [4, 3, 2, 3]\n * @param {number|Array.<number>} val\n * @return {Array.<number>}\n */\nfunction normalizeCssArray(val) {\n    if (typeof (val) === 'number') {\n        return [val, val, val, val];\n    }\n    var len = val.length;\n    if (len === 2) {\n        // vertical | horizontal\n        return [val[0], val[1], val[0], val[1]];\n    }\n    else if (len === 3) {\n        // top | horizontal | bottom\n        return [val[0], val[1], val[2], val[1]];\n    }\n    return val;\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {boolean} condition\n * @param {string} message\n */\nfunction assert(condition, message) {\n    if (!condition) {\n        throw new Error(message);\n    }\n}\n\n/**\n * @memberOf module:zrender/core/util\n * @param {string} str string to be trimed\n * @return {string} trimed string\n */\nfunction trim(str) {\n    if (str == null) {\n        return null;\n    }\n    else if (typeof str.trim === 'function') {\n        return str.trim();\n    }\n    else {\n        return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '');\n    }\n}\n\nvar primitiveKey = '__ec_primitive__';\n/**\n * Set an object as primitive to be ignored traversing children in clone or merge\n */\nfunction setAsPrimitive(obj) {\n    obj[primitiveKey] = true;\n}\n\nfunction isPrimitive(obj) {\n    return obj[primitiveKey];\n}\n\n/**\n * @constructor\n * @param {Object} obj Only apply `ownProperty`.\n */\nfunction HashMap(obj) {\n    var isArr = isArray(obj);\n    var thisMap = this;\n\n    (obj instanceof HashMap)\n        ? obj.each(visit)\n        : (obj && each(obj, visit));\n\n    function visit(value, key) {\n        isArr ? thisMap.set(value, key) : thisMap.set(key, value);\n    }\n}\n\n// Add prefix to avoid conflict with Object.prototype.\n\nHashMap.prototype = {\n    constructor: HashMap,\n    // Do not provide `has` method to avoid defining what is `has`.\n    // (We usually treat `null` and `undefined` as the same, different\n    // from ES6 Map).\n    get: function (key) {\n        return this.hasOwnProperty(key) ? this[key] : null;\n    },\n    set: function (key, value) {\n        // Comparing with invocation chaining, `return value` is more commonly\n        // used in this case: `var someVal = map.set('a', genVal());`\n        return (this[key] = value);\n    },\n    // Although util.each can be performed on this hashMap directly, user\n    // should not use the exposed keys, who are prefixed.\n    each: function (cb, context) {\n        context !== void 0 && (cb = bind(cb, context));\n        for (var key in this) {\n            this.hasOwnProperty(key) && cb(this[key], key);\n        }\n    },\n    // Do not use this method if performance sensitive.\n    removeKey: function (key) {\n        delete this[key];\n    }\n};\n\nfunction createHashMap(obj) {\n    return new HashMap(obj);\n}\n\nfunction concatArray(a, b) {\n    var newArray = new a.constructor(a.length + b.length);\n    for (var i = 0; i < a.length; i++) {\n        newArray[i] = a[i];\n    }\n    var offset = a.length;\n    for (i = 0; i < b.length; i++) {\n        newArray[i + offset] = b[i];\n    }\n    return newArray;\n}\n\n\nfunction noop() {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjA5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9ub2RlX21vZHVsZXMvenJlbmRlci9zcmMvY29yZS91dGlsLmpzP2M5MWIiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbW9kdWxlIHpyZW5kZXIvY29yZS91dGlsXG4gKi9cblxuLy8g55So5LqO5aSE55CGbWVyZ2Xml7bml6Dms5XpgY3ljoZEYXRl562J5a+56LGh55qE6Zeu6aKYXG52YXIgQlVJTFRJTl9PQkpFQ1QgPSB7XG4gICAgJ1tvYmplY3QgRnVuY3Rpb25dJzogMSxcbiAgICAnW29iamVjdCBSZWdFeHBdJzogMSxcbiAgICAnW29iamVjdCBEYXRlXSc6IDEsXG4gICAgJ1tvYmplY3QgRXJyb3JdJzogMSxcbiAgICAnW29iamVjdCBDYW52YXNHcmFkaWVudF0nOiAxLFxuICAgICdbb2JqZWN0IENhbnZhc1BhdHRlcm5dJzogMSxcbiAgICAvLyBGb3Igbm9kZS1jYW52YXNcbiAgICAnW29iamVjdCBJbWFnZV0nOiAxLFxuICAgICdbb2JqZWN0IENhbnZhc10nOiAxXG59O1xuXG52YXIgVFlQRURfQVJSQVkgPSB7XG4gICAgJ1tvYmplY3QgSW50OEFycmF5XSc6IDEsXG4gICAgJ1tvYmplY3QgVWludDhBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XSc6IDEsXG4gICAgJ1tvYmplY3QgSW50MTZBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IFVpbnQxNkFycmF5XSc6IDEsXG4gICAgJ1tvYmplY3QgSW50MzJBcnJheV0nOiAxLFxuICAgICdbb2JqZWN0IFVpbnQzMkFycmF5XSc6IDEsXG4gICAgJ1tvYmplY3QgRmxvYXQzMkFycmF5XSc6IDEsXG4gICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSc6IDFcbn07XG5cbnZhciBvYmpUb1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIG5hdGl2ZUZvckVhY2ggPSBhcnJheVByb3RvLmZvckVhY2g7XG52YXIgbmF0aXZlRmlsdGVyID0gYXJyYXlQcm90by5maWx0ZXI7XG52YXIgbmF0aXZlU2xpY2UgPSBhcnJheVByb3RvLnNsaWNlO1xudmFyIG5hdGl2ZU1hcCA9IGFycmF5UHJvdG8ubWFwO1xudmFyIG5hdGl2ZVJlZHVjZSA9IGFycmF5UHJvdG8ucmVkdWNlO1xuXG4vLyBBdm9pZCBhc3NpZ24gdG8gYW4gZXhwb3J0ZWQgdmFyaWFibGUsIGZvciB0cmFuc2Zvcm1pbmcgdG8gY2pzLlxudmFyIG1ldGhvZHMgPSB7fTtcblxuZXhwb3J0IGZ1bmN0aW9uICRvdmVycmlkZShuYW1lLCBmbikge1xuICAgIC8vIENsZWFyIGN0eCBpbnN0YW5jZSBmb3IgZGlmZmVyZW50IGVudmlyb25tZW50XG4gICAgaWYgKG5hbWUgPT09ICdjcmVhdGVDYW52YXMnKSB7XG4gICAgICAgIF9jdHggPSBudWxsO1xuICAgIH1cblxuICAgIG1ldGhvZHNbbmFtZV0gPSBmbjtcbn1cblxuLyoqXG4gKiBUaG9zZSBkYXRhIHR5cGVzIGNhbiBiZSBjbG9uZWQ6XG4gKiAgICAgUGxhaW4gb2JqZWN0LCBBcnJheSwgVHlwZWRBcnJheSwgbnVtYmVyLCBzdHJpbmcsIG51bGwsIHVuZGVmaW5lZC5cbiAqIFRob3NlIGRhdGEgdHlwZXMgd2lsbCBiZSBhc3NnaW5lZCB1c2luZyB0aGUgb3JnaW5hbCBkYXRhOlxuICogICAgIEJVSUxUSU5fT0JKRUNUXG4gKiBJbnN0YW5jZSBvZiB1c2VyIGRlZmluZWQgY2xhc3Mgd2lsbCBiZSBjbG9uZWQgdG8gYSBwbGFpbiBvYmplY3QsIHdpdGhvdXRcbiAqIHByb3BlcnRpZXMgaW4gcHJvdG90eXBlLlxuICogT3RoZXIgZGF0YSB0eXBlcyBpcyBub3Qgc3VwcG9ydGVkIChub3Qgc3VyZSB3aGF0IHdpbGwgaGFwcGVuKS5cbiAqXG4gKiBDYXV0aW9uOiBkbyBub3Qgc3VwcG9ydCBjbG9uZSBEYXRlLCBmb3IgcGVyZm9ybWFuY2UgY29uc2lkZXJhdGlvbi5cbiAqIChUaGVyZSBtaWdodCBiZSBhIGxhcmdlIG51bWJlciBvZiBkYXRlIGluIGBzZXJpZXMuZGF0YWApLlxuICogU28gZGF0ZSBzaG91bGQgbm90IGJlIG1vZGlmaWVkIGluIGFuZCBvdXQgb2YgZWNoYXJ0cy5cbiAqXG4gKiBAcGFyYW0geyp9IHNvdXJjZVxuICogQHJldHVybiB7Kn0gbmV3XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZShzb3VyY2UpIHtcbiAgICBpZiAoc291cmNlID09IG51bGwgfHwgdHlwZW9mIHNvdXJjZSAhPSAnb2JqZWN0Jykge1xuICAgICAgICByZXR1cm4gc291cmNlO1xuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSBzb3VyY2U7XG4gICAgdmFyIHR5cGVTdHIgPSBvYmpUb1N0cmluZy5jYWxsKHNvdXJjZSk7XG5cbiAgICBpZiAodHlwZVN0ciA9PT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICBpZiAoIWlzUHJpbWl0aXZlKHNvdXJjZSkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGNsb25lKHNvdXJjZVtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZWxzZSBpZiAoVFlQRURfQVJSQVlbdHlwZVN0cl0pIHtcbiAgICAgICAgaWYgKCFpc1ByaW1pdGl2ZShzb3VyY2UpKSB7XG4gICAgICAgICAgICB2YXIgQ3RvciA9IHNvdXJjZS5jb25zdHJ1Y3RvcjtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuY29uc3RydWN0b3IuZnJvbSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IEN0b3IuZnJvbShzb3VyY2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IEN0b3Ioc291cmNlLmxlbmd0aCk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHNvdXJjZS5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSBjbG9uZShzb3VyY2VbaV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICghQlVJTFRJTl9PQkpFQ1RbdHlwZVN0cl0gJiYgIWlzUHJpbWl0aXZlKHNvdXJjZSkgJiYgIWlzRG9tKHNvdXJjZSkpIHtcbiAgICAgICAgcmVzdWx0ID0ge307XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtrZXldID0gY2xvbmUoc291cmNlW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0geyp9IHRhcmdldFxuICogQHBhcmFtIHsqfSBzb3VyY2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW292ZXJ3cml0ZT1mYWxzZV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1lcmdlKHRhcmdldCwgc291cmNlLCBvdmVyd3JpdGUpIHtcbiAgICAvLyBXZSBzaG91bGQgZXNjYXBzZSB0aGF0IHNvdXJjZSBpcyBzdHJpbmdcbiAgICAvLyBhbmQgZW50ZXIgZm9yIC4uLiBpbiAuLi5cbiAgICBpZiAoIWlzT2JqZWN0KHNvdXJjZSkgfHwgIWlzT2JqZWN0KHRhcmdldCkpIHtcbiAgICAgICAgcmV0dXJuIG92ZXJ3cml0ZSA/IGNsb25lKHNvdXJjZSkgOiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXRQcm9wID0gdGFyZ2V0W2tleV07XG4gICAgICAgICAgICB2YXIgc291cmNlUHJvcCA9IHNvdXJjZVtrZXldO1xuXG4gICAgICAgICAgICBpZiAoaXNPYmplY3Qoc291cmNlUHJvcClcbiAgICAgICAgICAgICAgICAmJiBpc09iamVjdCh0YXJnZXRQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc0FycmF5KHNvdXJjZVByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzQXJyYXkodGFyZ2V0UHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNEb20oc291cmNlUHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNEb20odGFyZ2V0UHJvcClcbiAgICAgICAgICAgICAgICAmJiAhaXNCdWlsdEluT2JqZWN0KHNvdXJjZVByb3ApXG4gICAgICAgICAgICAgICAgJiYgIWlzQnVpbHRJbk9iamVjdCh0YXJnZXRQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc1ByaW1pdGl2ZShzb3VyY2VQcm9wKVxuICAgICAgICAgICAgICAgICYmICFpc1ByaW1pdGl2ZSh0YXJnZXRQcm9wKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgLy8g5aaC5p6c6ZyA6KaB6YCS5b2S6KaG55uW77yM5bCx6YCS5b2S6LCD55SobWVyZ2VcbiAgICAgICAgICAgICAgICBtZXJnZSh0YXJnZXRQcm9wLCBzb3VyY2VQcm9wLCBvdmVyd3JpdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAob3ZlcndyaXRlIHx8ICEoa2V5IGluIHRhcmdldCkpIHtcbiAgICAgICAgICAgICAgICAvLyDlkKbliJnlj6rlpITnkIZvdmVyd3JpdGXkuLp0cnVl77yM5oiW6ICF5Zyo55uu5qCH5a+56LGh5Lit5rKh5pyJ5q2k5bGe5oCn55qE5oOF5Ya1XG4gICAgICAgICAgICAgICAgLy8gTk9URe+8jOWcqCB0YXJnZXRba2V5XSDkuI3lrZjlnKjnmoTml7blgJnkuZ/mmK/nm7TmjqXopobnm5ZcbiAgICAgICAgICAgICAgICB0YXJnZXRba2V5XSA9IGNsb25lKHNvdXJjZVtrZXldLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheX0gdGFyZ2V0QW5kU291cmNlcyBUaGUgZmlyc3QgaXRlbSBpcyB0YXJnZXQsIGFuZCB0aGUgcmVzdHMgYXJlIHNvdXJjZS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW292ZXJ3cml0ZT1mYWxzZV1cbiAqIEByZXR1cm4geyp9IHRhcmdldFxuICovXG5leHBvcnQgZnVuY3Rpb24gbWVyZ2VBbGwodGFyZ2V0QW5kU291cmNlcywgb3ZlcndyaXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IHRhcmdldEFuZFNvdXJjZXNbMF07XG4gICAgZm9yICh2YXIgaSA9IDEsIGxlbiA9IHRhcmdldEFuZFNvdXJjZXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcmVzdWx0ID0gbWVyZ2UocmVzdWx0LCB0YXJnZXRBbmRTb3VyY2VzW2ldLCBvdmVyd3JpdGUpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7Kn0gdGFyZ2V0XG4gKiBAcGFyYW0geyp9IHNvdXJjZVxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoc291cmNlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyp9IHRhcmdldFxuICogQHBhcmFtIHsqfSBzb3VyY2VcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW292ZXJsYXk9ZmFsc2VdXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0cyh0YXJnZXQsIHNvdXJjZSwgb3ZlcmxheSkge1xuICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZS5oYXNPd25Qcm9wZXJ0eShrZXkpXG4gICAgICAgICAgICAmJiAob3ZlcmxheSA/IHNvdXJjZVtrZXldICE9IG51bGwgOiB0YXJnZXRba2V5XSA9PSBudWxsKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cblxuZXhwb3J0IHZhciBjcmVhdGVDYW52YXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG1ldGhvZHMuY3JlYXRlQ2FudmFzKCk7XG59O1xuXG5tZXRob2RzLmNyZWF0ZUNhbnZhcyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG59O1xuXG4vLyBGSVhNRVxudmFyIF9jdHg7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0KCkge1xuICAgIGlmICghX2N0eCkge1xuICAgICAgICAvLyBVc2UgdXRpbC5jcmVhdGVDYW52YXMgaW5zdGVhZCBvZiBjcmVhdGVDYW52YXNcbiAgICAgICAgLy8gYmVjYXVzZSBjcmVhdGVDYW52YXMgbWF5IGJlIG92ZXJ3cml0dGVuIGluIGRpZmZlcmVudCBlbnZpcm9ubWVudFxuICAgICAgICBfY3R4ID0gY3JlYXRlQ2FudmFzKCkuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICB9XG4gICAgcmV0dXJuIF9jdHg7XG59XG5cbi8qKlxuICog5p+l6K+i5pWw57uE5Lit5YWD57Sg55qEaW5kZXhcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGluZGV4T2YoYXJyYXksIHZhbHVlKSB7XG4gICAgaWYgKGFycmF5KSB7XG4gICAgICAgIGlmIChhcnJheS5pbmRleE9mKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXkuaW5kZXhPZih2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoYXJyYXlbaV0gPT09IHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIOaehOmAoOexu+e7p+aJv+WFs+ezu1xuICpcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNsYXp6IOa6kOexu1xuICogQHBhcmFtIHtGdW5jdGlvbn0gYmFzZUNsYXp6IOWfuuexu1xuICovXG5leHBvcnQgZnVuY3Rpb24gaW5oZXJpdHMoY2xhenosIGJhc2VDbGF6eikge1xuICAgIHZhciBjbGF6elByb3RvdHlwZSA9IGNsYXp6LnByb3RvdHlwZTtcbiAgICBmdW5jdGlvbiBGKCkge31cbiAgICBGLnByb3RvdHlwZSA9IGJhc2VDbGF6ei5wcm90b3R5cGU7XG4gICAgY2xhenoucHJvdG90eXBlID0gbmV3IEYoKTtcblxuICAgIGZvciAodmFyIHByb3AgaW4gY2xhenpQcm90b3R5cGUpIHtcbiAgICAgICAgY2xhenoucHJvdG90eXBlW3Byb3BdID0gY2xhenpQcm90b3R5cGVbcHJvcF07XG4gICAgfVxuICAgIGNsYXp6LnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IGNsYXp6O1xuICAgIGNsYXp6LnN1cGVyQ2xhc3MgPSBiYXNlQ2xheno7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IHNvcmNlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IG92ZXJsYXlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1peGluKHRhcmdldCwgc291cmNlLCBvdmVybGF5KSB7XG4gICAgdGFyZ2V0ID0gJ3Byb3RvdHlwZScgaW4gdGFyZ2V0ID8gdGFyZ2V0LnByb3RvdHlwZSA6IHRhcmdldDtcbiAgICBzb3VyY2UgPSAncHJvdG90eXBlJyBpbiBzb3VyY2UgPyBzb3VyY2UucHJvdG90eXBlIDogc291cmNlO1xuXG4gICAgZGVmYXVsdHModGFyZ2V0LCBzb3VyY2UsIG92ZXJsYXkpO1xufVxuXG4vKipcbiAqIENvbnNpZGVyIHR5cGVkIGFycmF5LlxuICogQHBhcmFtIHtBcnJheXxUeXBlZEFycmF5fSBkYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FycmF5TGlrZShkYXRhKSB7XG4gICAgaWYgKCEgZGF0YSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0eXBlb2YgZGF0YSA9PSAnc3RyaW5nJykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0eXBlb2YgZGF0YS5sZW5ndGggPT0gJ251bWJlcic7XG59XG5cbi8qKlxuICog5pWw57uE5oiW5a+56LGh6YGN5Y6GXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVhY2gob2JqLCBjYiwgY29udGV4dCkge1xuICAgIGlmICghKG9iaiAmJiBjYikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob2JqLmZvckVhY2ggJiYgb2JqLmZvckVhY2ggPT09IG5hdGl2ZUZvckVhY2gpIHtcbiAgICAgICAgb2JqLmZvckVhY2goY2IsIGNvbnRleHQpO1xuICAgIH1cbiAgICBlbHNlIGlmIChvYmoubGVuZ3RoID09PSArb2JqLmxlbmd0aCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBjYi5jYWxsKGNvbnRleHQsIG9ialtpXSwgaSwgb2JqKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgY2IuY2FsbChjb250ZXh0LCBvYmpba2V5XSwga2V5LCBvYmopO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIOaVsOe7hOaYoOWwhFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbWFwKG9iaiwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIShvYmogJiYgY2IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9iai5tYXAgJiYgb2JqLm1hcCA9PT0gbmF0aXZlTWFwKSB7XG4gICAgICAgIHJldHVybiBvYmoubWFwKGNiLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goY2IuY2FsbChjb250ZXh0LCBvYmpbaV0sIGksIG9iaikpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7QXJyYXl9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbbWVtb11cbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZHVjZShvYmosIGNiLCBtZW1vLCBjb250ZXh0KSB7XG4gICAgaWYgKCEob2JqICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvYmoucmVkdWNlICYmIG9iai5yZWR1Y2UgPT09IG5hdGl2ZVJlZHVjZSkge1xuICAgICAgICByZXR1cm4gb2JqLnJlZHVjZShjYiwgbWVtbywgY29udGV4dCk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb2JqLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICBtZW1vID0gY2IuY2FsbChjb250ZXh0LCBtZW1vLCBvYmpbaV0sIGksIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxufVxuXG4vKipcbiAqIOaVsOe7hOi/h+a7pFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtBcnJheX0gb2JqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyKG9iaiwgY2IsIGNvbnRleHQpIHtcbiAgICBpZiAoIShvYmogJiYgY2IpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKG9iai5maWx0ZXIgJiYgb2JqLmZpbHRlciA9PT0gbmF0aXZlRmlsdGVyKSB7XG4gICAgICAgIHJldHVybiBvYmouZmlsdGVyKGNiLCBjb250ZXh0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9iai5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgaWYgKGNiLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0LnB1c2gob2JqW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn1cblxuLyoqXG4gKiDmlbDnu4Tpobnmn6Xmib5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7QXJyYXl9IG9ialxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG4gKiBAcmV0dXJuIHsqfVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmluZChvYmosIGNiLCBjb250ZXh0KSB7XG4gICAgaWYgKCEob2JqICYmIGNiKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBvYmoubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgaWYgKGNiLmNhbGwoY29udGV4dCwgb2JqW2ldLCBpLCBvYmopKSB7XG4gICAgICAgICAgICByZXR1cm4gb2JqW2ldO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiaW5kKGZ1bmMsIGNvbnRleHQpIHtcbiAgICB2YXIgYXJncyA9IG5hdGl2ZVNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzLmNvbmNhdChuYXRpdmVTbGljZS5jYWxsKGFyZ3VtZW50cykpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5leHBvcnQgZnVuY3Rpb24gY3VycnkoZnVuYykge1xuICAgIHZhciBhcmdzID0gbmF0aXZlU2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MuY29uY2F0KG5hdGl2ZVNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO1xuICAgIH07XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N0cmluZyh2YWx1ZSkge1xuICAgIHJldHVybiBvYmpUb1N0cmluZy5jYWxsKHZhbHVlKSA9PT0gJ1tvYmplY3QgU3RyaW5nXSc7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgLy8gQXZvaWQgYSBWOCBKSVQgYnVnIGluIENocm9tZSAxOS0yMC5cbiAgICAvLyBTZWUgaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTIyOTEgZm9yIG1vcmUgZGV0YWlscy5cbiAgICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgICByZXR1cm4gdHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCAoISF2YWx1ZSAmJiB0eXBlID09ICdvYmplY3QnKTtcbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNCdWlsdEluT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuICEhQlVJTFRJTl9PQkpFQ1Rbb2JqVG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgICByZXR1cm4gISFUWVBFRF9BUlJBWVtvYmpUb1N0cmluZy5jYWxsKHZhbHVlKV07XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRG9tKHZhbHVlKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCdcbiAgICAgICAgJiYgdHlwZW9mIHZhbHVlLm5vZGVUeXBlID09PSAnbnVtYmVyJ1xuICAgICAgICAmJiB0eXBlb2YgdmFsdWUub3duZXJEb2N1bWVudCA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogV2hldGhlciBpcyBleGFjdGx5IE5hTi4gTm90aWNlIGlzTmFOKCdhJykgcmV0dXJucyB0cnVlLlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVxTmFOKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZTtcbn1cblxuLyoqXG4gKiBJZiB2YWx1ZTEgaXMgbm90IG51bGwsIHRoZW4gcmV0dXJuIHZhbHVlMSwgb3RoZXJ3aXNlIGp1ZGdldCByZXN0IG9mIHZhbHVlcy5cbiAqIExvdyBwZXJmb3JtYW5jZS5cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEByZXR1cm4geyp9IEZpbmFsIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXRyaWV2ZSh2YWx1ZXMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGlmIChhcmd1bWVudHNbaV0gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldHJpZXZlMih2YWx1ZTAsIHZhbHVlMSkge1xuICAgIHJldHVybiB2YWx1ZTAgIT0gbnVsbFxuICAgICAgICA/IHZhbHVlMFxuICAgICAgICA6IHZhbHVlMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJldHJpZXZlMyh2YWx1ZTAsIHZhbHVlMSwgdmFsdWUyKSB7XG4gICAgcmV0dXJuIHZhbHVlMCAhPSBudWxsXG4gICAgICAgID8gdmFsdWUwXG4gICAgICAgIDogdmFsdWUxICE9IG51bGxcbiAgICAgICAgPyB2YWx1ZTFcbiAgICAgICAgOiB2YWx1ZTI7XG59XG5cbi8qKlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL2NvcmUvdXRpbFxuICogQHBhcmFtIHtBcnJheX0gYXJyXG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRJbmRleFxuICogQHBhcmFtIHtudW1iZXJ9IGVuZEluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNsaWNlKCkge1xuICAgIHJldHVybiBGdW5jdGlvbi5jYWxsLmFwcGx5KG5hdGl2ZVNsaWNlLCBhcmd1bWVudHMpO1xufVxuXG4vKipcbiAqIE5vcm1hbGl6ZSBjc3MgbGlrZWQgYXJyYXkgY29uZmlndXJhdGlvblxuICogZS5nLlxuICogIDMgPT4gWzMsIDMsIDMsIDNdXG4gKiAgWzQsIDJdID0+IFs0LCAyLCA0LCAyXVxuICogIFs0LCAzLCAyXSA9PiBbNCwgMywgMiwgM11cbiAqIEBwYXJhbSB7bnVtYmVyfEFycmF5LjxudW1iZXI+fSB2YWxcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplQ3NzQXJyYXkodmFsKSB7XG4gICAgaWYgKHR5cGVvZiAodmFsKSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgcmV0dXJuIFt2YWwsIHZhbCwgdmFsLCB2YWxdO1xuICAgIH1cbiAgICB2YXIgbGVuID0gdmFsLmxlbmd0aDtcbiAgICBpZiAobGVuID09PSAyKSB7XG4gICAgICAgIC8vIHZlcnRpY2FsIHwgaG9yaXpvbnRhbFxuICAgICAgICByZXR1cm4gW3ZhbFswXSwgdmFsWzFdLCB2YWxbMF0sIHZhbFsxXV07XG4gICAgfVxuICAgIGVsc2UgaWYgKGxlbiA9PT0gMykge1xuICAgICAgICAvLyB0b3AgfCBob3Jpem9udGFsIHwgYm90dG9tXG4gICAgICAgIHJldHVybiBbdmFsWzBdLCB2YWxbMV0sIHZhbFsyXSwgdmFsWzFdXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvY29yZS91dGlsXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGNvbmRpdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFzc2VydChjb25kaXRpb24sIG1lc3NhZ2UpIHtcbiAgICBpZiAoIWNvbmRpdGlvbikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci9jb3JlL3V0aWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgc3RyaW5nIHRvIGJlIHRyaW1lZFxuICogQHJldHVybiB7c3RyaW5nfSB0cmltZWQgc3RyaW5nXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmltKHN0cikge1xuICAgIGlmIChzdHIgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIHN0ci50cmltID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHJldHVybiBzdHIudHJpbSgpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpO1xuICAgIH1cbn1cblxudmFyIHByaW1pdGl2ZUtleSA9ICdfX2VjX3ByaW1pdGl2ZV9fJztcbi8qKlxuICogU2V0IGFuIG9iamVjdCBhcyBwcmltaXRpdmUgdG8gYmUgaWdub3JlZCB0cmF2ZXJzaW5nIGNoaWxkcmVuIGluIGNsb25lIG9yIG1lcmdlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRBc1ByaW1pdGl2ZShvYmopIHtcbiAgICBvYmpbcHJpbWl0aXZlS2V5XSA9IHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaW1pdGl2ZShvYmopIHtcbiAgICByZXR1cm4gb2JqW3ByaW1pdGl2ZUtleV07XG59XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqIE9ubHkgYXBwbHkgYG93blByb3BlcnR5YC5cbiAqL1xuZnVuY3Rpb24gSGFzaE1hcChvYmopIHtcbiAgICB2YXIgaXNBcnIgPSBpc0FycmF5KG9iaik7XG4gICAgdmFyIHRoaXNNYXAgPSB0aGlzO1xuXG4gICAgKG9iaiBpbnN0YW5jZW9mIEhhc2hNYXApXG4gICAgICAgID8gb2JqLmVhY2godmlzaXQpXG4gICAgICAgIDogKG9iaiAmJiBlYWNoKG9iaiwgdmlzaXQpKTtcblxuICAgIGZ1bmN0aW9uIHZpc2l0KHZhbHVlLCBrZXkpIHtcbiAgICAgICAgaXNBcnIgPyB0aGlzTWFwLnNldCh2YWx1ZSwga2V5KSA6IHRoaXNNYXAuc2V0KGtleSwgdmFsdWUpO1xuICAgIH1cbn1cblxuLy8gQWRkIHByZWZpeCB0byBhdm9pZCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUuXG5cbkhhc2hNYXAucHJvdG90eXBlID0ge1xuICAgIGNvbnN0cnVjdG9yOiBIYXNoTWFwLFxuICAgIC8vIERvIG5vdCBwcm92aWRlIGBoYXNgIG1ldGhvZCB0byBhdm9pZCBkZWZpbmluZyB3aGF0IGlzIGBoYXNgLlxuICAgIC8vIChXZSB1c3VhbGx5IHRyZWF0IGBudWxsYCBhbmQgYHVuZGVmaW5lZGAgYXMgdGhlIHNhbWUsIGRpZmZlcmVudFxuICAgIC8vIGZyb20gRVM2IE1hcCkuXG4gICAgZ2V0OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc093blByb3BlcnR5KGtleSkgPyB0aGlzW2tleV0gOiBudWxsO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuICAgICAgICAvLyBDb21wYXJpbmcgd2l0aCBpbnZvY2F0aW9uIGNoYWluaW5nLCBgcmV0dXJuIHZhbHVlYCBpcyBtb3JlIGNvbW1vbmx5XG4gICAgICAgIC8vIHVzZWQgaW4gdGhpcyBjYXNlOiBgdmFyIHNvbWVWYWwgPSBtYXAuc2V0KCdhJywgZ2VuVmFsKCkpO2BcbiAgICAgICAgcmV0dXJuICh0aGlzW2tleV0gPSB2YWx1ZSk7XG4gICAgfSxcbiAgICAvLyBBbHRob3VnaCB1dGlsLmVhY2ggY2FuIGJlIHBlcmZvcm1lZCBvbiB0aGlzIGhhc2hNYXAgZGlyZWN0bHksIHVzZXJcbiAgICAvLyBzaG91bGQgbm90IHVzZSB0aGUgZXhwb3NlZCBrZXlzLCB3aG8gYXJlIHByZWZpeGVkLlxuICAgIGVhY2g6IGZ1bmN0aW9uIChjYiwgY29udGV4dCkge1xuICAgICAgICBjb250ZXh0ICE9PSB2b2lkIDAgJiYgKGNiID0gYmluZChjYiwgY29udGV4dCkpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcykge1xuICAgICAgICAgICAgdGhpcy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIGNiKHRoaXNba2V5XSwga2V5KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgLy8gRG8gbm90IHVzZSB0aGlzIG1ldGhvZCBpZiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG4gICAgcmVtb3ZlS2V5OiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUhhc2hNYXAob2JqKSB7XG4gICAgcmV0dXJuIG5ldyBIYXNoTWFwKG9iaik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb25jYXRBcnJheShhLCBiKSB7XG4gICAgdmFyIG5ld0FycmF5ID0gbmV3IGEuY29uc3RydWN0b3IoYS5sZW5ndGggKyBiLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5ld0FycmF5W2ldID0gYVtpXTtcbiAgICB9XG4gICAgdmFyIG9mZnNldCA9IGEubGVuZ3RoO1xuICAgIGZvciAoaSA9IDA7IGkgPCBiLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG5ld0FycmF5W2kgKyBvZmZzZXRdID0gYltpXTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld0FycmF5O1xufVxuXG5cbmV4cG9ydCBmdW5jdGlvbiBub29wKCkge31cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2NsYXlnbC1hZHZhbmNlZC1yZW5kZXJlci9ub2RlX21vZHVsZXMvenJlbmRlci9zcmMvY29yZS91dGlsLmpzXG4vLyBtb2R1bGUgaWQgPSAyMDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///209\n");

/***/ }),
/* 210 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"b\"] = parse;\n/* unused harmony export lift */\n/* unused harmony export toHex */\n/* unused harmony export fastLerp */\n/* unused harmony export fastMapToColor */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lerp;\n/* unused harmony export mapToColor */\n/* unused harmony export modifyHSL */\n/* unused harmony export modifyAlpha */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = stringify;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_LRU__ = __webpack_require__(211);\n\n\nvar kCSSColorTable = {\n    'transparent': [0, 0, 0, 0], 'aliceblue': [240, 248, 255, 1],\n    'antiquewhite': [250, 235, 215, 1], 'aqua': [0, 255, 255, 1],\n    'aquamarine': [127, 255, 212, 1], 'azure': [240, 255, 255, 1],\n    'beige': [245, 245, 220, 1], 'bisque': [255, 228, 196, 1],\n    'black': [0, 0, 0, 1], 'blanchedalmond': [255, 235, 205, 1],\n    'blue': [0, 0, 255, 1], 'blueviolet': [138, 43, 226, 1],\n    'brown': [165, 42, 42, 1], 'burlywood': [222, 184, 135, 1],\n    'cadetblue': [95, 158, 160, 1], 'chartreuse': [127, 255, 0, 1],\n    'chocolate': [210, 105, 30, 1], 'coral': [255, 127, 80, 1],\n    'cornflowerblue': [100, 149, 237, 1], 'cornsilk': [255, 248, 220, 1],\n    'crimson': [220, 20, 60, 1], 'cyan': [0, 255, 255, 1],\n    'darkblue': [0, 0, 139, 1], 'darkcyan': [0, 139, 139, 1],\n    'darkgoldenrod': [184, 134, 11, 1], 'darkgray': [169, 169, 169, 1],\n    'darkgreen': [0, 100, 0, 1], 'darkgrey': [169, 169, 169, 1],\n    'darkkhaki': [189, 183, 107, 1], 'darkmagenta': [139, 0, 139, 1],\n    'darkolivegreen': [85, 107, 47, 1], 'darkorange': [255, 140, 0, 1],\n    'darkorchid': [153, 50, 204, 1], 'darkred': [139, 0, 0, 1],\n    'darksalmon': [233, 150, 122, 1], 'darkseagreen': [143, 188, 143, 1],\n    'darkslateblue': [72, 61, 139, 1], 'darkslategray': [47, 79, 79, 1],\n    'darkslategrey': [47, 79, 79, 1], 'darkturquoise': [0, 206, 209, 1],\n    'darkviolet': [148, 0, 211, 1], 'deeppink': [255, 20, 147, 1],\n    'deepskyblue': [0, 191, 255, 1], 'dimgray': [105, 105, 105, 1],\n    'dimgrey': [105, 105, 105, 1], 'dodgerblue': [30, 144, 255, 1],\n    'firebrick': [178, 34, 34, 1], 'floralwhite': [255, 250, 240, 1],\n    'forestgreen': [34, 139, 34, 1], 'fuchsia': [255, 0, 255, 1],\n    'gainsboro': [220, 220, 220, 1], 'ghostwhite': [248, 248, 255, 1],\n    'gold': [255, 215, 0, 1], 'goldenrod': [218, 165, 32, 1],\n    'gray': [128, 128, 128, 1], 'green': [0, 128, 0, 1],\n    'greenyellow': [173, 255, 47, 1], 'grey': [128, 128, 128, 1],\n    'honeydew': [240, 255, 240, 1], 'hotpink': [255, 105, 180, 1],\n    'indianred': [205, 92, 92, 1], 'indigo': [75, 0, 130, 1],\n    'ivory': [255, 255, 240, 1], 'khaki': [240, 230, 140, 1],\n    'lavender': [230, 230, 250, 1], 'lavenderblush': [255, 240, 245, 1],\n    'lawngreen': [124, 252, 0, 1], 'lemonchiffon': [255, 250, 205, 1],\n    'lightblue': [173, 216, 230, 1], 'lightcoral': [240, 128, 128, 1],\n    'lightcyan': [224, 255, 255, 1], 'lightgoldenrodyellow': [250, 250, 210, 1],\n    'lightgray': [211, 211, 211, 1], 'lightgreen': [144, 238, 144, 1],\n    'lightgrey': [211, 211, 211, 1], 'lightpink': [255, 182, 193, 1],\n    'lightsalmon': [255, 160, 122, 1], 'lightseagreen': [32, 178, 170, 1],\n    'lightskyblue': [135, 206, 250, 1], 'lightslategray': [119, 136, 153, 1],\n    'lightslategrey': [119, 136, 153, 1], 'lightsteelblue': [176, 196, 222, 1],\n    'lightyellow': [255, 255, 224, 1], 'lime': [0, 255, 0, 1],\n    'limegreen': [50, 205, 50, 1], 'linen': [250, 240, 230, 1],\n    'magenta': [255, 0, 255, 1], 'maroon': [128, 0, 0, 1],\n    'mediumaquamarine': [102, 205, 170, 1], 'mediumblue': [0, 0, 205, 1],\n    'mediumorchid': [186, 85, 211, 1], 'mediumpurple': [147, 112, 219, 1],\n    'mediumseagreen': [60, 179, 113, 1], 'mediumslateblue': [123, 104, 238, 1],\n    'mediumspringgreen': [0, 250, 154, 1], 'mediumturquoise': [72, 209, 204, 1],\n    'mediumvioletred': [199, 21, 133, 1], 'midnightblue': [25, 25, 112, 1],\n    'mintcream': [245, 255, 250, 1], 'mistyrose': [255, 228, 225, 1],\n    'moccasin': [255, 228, 181, 1], 'navajowhite': [255, 222, 173, 1],\n    'navy': [0, 0, 128, 1], 'oldlace': [253, 245, 230, 1],\n    'olive': [128, 128, 0, 1], 'olivedrab': [107, 142, 35, 1],\n    'orange': [255, 165, 0, 1], 'orangered': [255, 69, 0, 1],\n    'orchid': [218, 112, 214, 1], 'palegoldenrod': [238, 232, 170, 1],\n    'palegreen': [152, 251, 152, 1], 'paleturquoise': [175, 238, 238, 1],\n    'palevioletred': [219, 112, 147, 1], 'papayawhip': [255, 239, 213, 1],\n    'peachpuff': [255, 218, 185, 1], 'peru': [205, 133, 63, 1],\n    'pink': [255, 192, 203, 1], 'plum': [221, 160, 221, 1],\n    'powderblue': [176, 224, 230, 1], 'purple': [128, 0, 128, 1],\n    'red': [255, 0, 0, 1], 'rosybrown': [188, 143, 143, 1],\n    'royalblue': [65, 105, 225, 1], 'saddlebrown': [139, 69, 19, 1],\n    'salmon': [250, 128, 114, 1], 'sandybrown': [244, 164, 96, 1],\n    'seagreen': [46, 139, 87, 1], 'seashell': [255, 245, 238, 1],\n    'sienna': [160, 82, 45, 1], 'silver': [192, 192, 192, 1],\n    'skyblue': [135, 206, 235, 1], 'slateblue': [106, 90, 205, 1],\n    'slategray': [112, 128, 144, 1], 'slategrey': [112, 128, 144, 1],\n    'snow': [255, 250, 250, 1], 'springgreen': [0, 255, 127, 1],\n    'steelblue': [70, 130, 180, 1], 'tan': [210, 180, 140, 1],\n    'teal': [0, 128, 128, 1], 'thistle': [216, 191, 216, 1],\n    'tomato': [255, 99, 71, 1], 'turquoise': [64, 224, 208, 1],\n    'violet': [238, 130, 238, 1], 'wheat': [245, 222, 179, 1],\n    'white': [255, 255, 255, 1], 'whitesmoke': [245, 245, 245, 1],\n    'yellow': [255, 255, 0, 1], 'yellowgreen': [154, 205, 50, 1]\n};\n\nfunction clampCssByte(i) {  // Clamp to integer 0 .. 255.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\n\nfunction clampCssAngle(i) {  // Clamp to integer 0 .. 360.\n    i = Math.round(i);  // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 360 ? 360 : i;\n}\n\nfunction clampCssFloat(f) {  // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\n\nfunction parseCssInt(str) {  // int or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssByte(parseFloat(str) / 100 * 255);\n    }\n    return clampCssByte(parseInt(str, 10));\n}\n\nfunction parseCssFloat(str) {  // float or percentage.\n    if (str.length && str.charAt(str.length - 1) === '%') {\n        return clampCssFloat(parseFloat(str) / 100);\n    }\n    return clampCssFloat(parseFloat(str));\n}\n\nfunction cssHueToRgb(m1, m2, h) {\n    if (h < 0) {\n        h += 1;\n    }\n    else if (h > 1) {\n        h -= 1;\n    }\n\n    if (h * 6 < 1) {\n        return m1 + (m2 - m1) * h * 6;\n    }\n    if (h * 2 < 1) {\n        return m2;\n    }\n    if (h * 3 < 2) {\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    }\n    return m1;\n}\n\nfunction lerpNumber(a, b, p) {\n    return a + (b - a) * p;\n}\n\nfunction setRgba(out, r, g, b, a) {\n    out[0] = r; out[1] = g; out[2] = b; out[3] = a;\n    return out;\n}\nfunction copyRgba(out, a) {\n    out[0] = a[0]; out[1] = a[1]; out[2] = a[2]; out[3] = a[3];\n    return out;\n}\n\nvar colorCache = new __WEBPACK_IMPORTED_MODULE_0__core_LRU__[\"a\" /* default */](20);\nvar lastRemovedArr = null;\n\nfunction putToCache(colorStr, rgbaArr) {\n    // Reuse removed array\n    if (lastRemovedArr) {\n        copyRgba(lastRemovedArr, rgbaArr);\n    }\n    lastRemovedArr = colorCache.put(colorStr, lastRemovedArr || (rgbaArr.slice()));\n}\n\n/**\n * @param {string} colorStr\n * @param {Array.<number>} out\n * @return {Array.<number>}\n * @memberOf module:zrender/util/color\n */\nfunction parse(colorStr, rgbaArr) {\n    if (!colorStr) {\n        return;\n    }\n    rgbaArr = rgbaArr || [];\n\n    var cached = colorCache.get(colorStr);\n    if (cached) {\n        return copyRgba(rgbaArr, cached);\n    }\n\n    // colorStr may be not string\n    colorStr = colorStr + '';\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = colorStr.replace(/ /g, '').toLowerCase();\n\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable) {\n        copyRgba(rgbaArr, kCSSColorTable[str]);\n        putToCache(colorStr, rgbaArr);\n        return rgbaArr;\n    }\n\n    // #abc and #abc123 syntax.\n    if (str.charAt(0) === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xfff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                ((iv & 0xf00) >> 4) | ((iv & 0xf00) >> 8),\n                (iv & 0xf0) | ((iv & 0xf0) >> 4),\n                (iv & 0xf) | ((iv & 0xf) << 4),\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n        else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);  // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 0xffffff)) {\n                setRgba(rgbaArr, 0, 0, 0, 1);\n                return;  // Covers NaN.\n            }\n            setRgba(rgbaArr,\n                (iv & 0xff0000) >> 16,\n                (iv & 0xff00) >> 8,\n                iv & 0xff,\n                1\n            );\n            putToCache(colorStr, rgbaArr);\n            return rgbaArr;\n        }\n\n        return;\n    }\n    var op = str.indexOf('(');\n    var ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;  // To allow case fallthrough.\n        switch (fname) {\n            case 'rgba':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                alpha = parseCssFloat(params.pop()); // jshint ignore:line\n            // Fall through.\n            case 'rgb':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                setRgba(rgbaArr,\n                    parseCssInt(params[0]),\n                    parseCssInt(params[1]),\n                    parseCssInt(params[2]),\n                    alpha\n                );\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsla':\n                if (params.length !== 4) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                params[3] = parseCssFloat(params[3]);\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            case 'hsl':\n                if (params.length !== 3) {\n                    setRgba(rgbaArr, 0, 0, 0, 1);\n                    return;\n                }\n                hsla2rgba(params, rgbaArr);\n                putToCache(colorStr, rgbaArr);\n                return rgbaArr;\n            default:\n                return;\n        }\n    }\n\n    setRgba(rgbaArr, 0, 0, 0, 1);\n    return;\n}\n\n/**\n * @param {Array.<number>} hsla\n * @param {Array.<number>} rgba\n * @return {Array.<number>} rgba\n */\nfunction hsla2rgba(hsla, rgba) {\n    var h = (((parseFloat(hsla[0]) % 360) + 360) % 360) / 360;  // 0 .. 1\n    // NOTE(deanm): According to the CSS spec s/l should only be\n    // percentages, but we don't bother and let float or percentage.\n    var s = parseCssFloat(hsla[1]);\n    var l = parseCssFloat(hsla[2]);\n    var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n    var m1 = l * 2 - m2;\n\n    rgba = rgba || [];\n    setRgba(rgba,\n        clampCssByte(cssHueToRgb(m1, m2, h + 1 / 3) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h) * 255),\n        clampCssByte(cssHueToRgb(m1, m2, h - 1 / 3) * 255),\n        1\n    );\n\n    if (hsla.length === 4) {\n        rgba[3] = hsla[3];\n    }\n\n    return rgba;\n}\n\n/**\n * @param {Array.<number>} rgba\n * @return {Array.<number>} hsla\n */\nfunction rgba2hsla(rgba) {\n    if (!rgba) {\n        return;\n    }\n\n    // RGB from 0 to 255\n    var R = rgba[0] / 255;\n    var G = rgba[1] / 255;\n    var B = rgba[2] / 255;\n\n    var vMin = Math.min(R, G, B); // Min. value of RGB\n    var vMax = Math.max(R, G, B); // Max. value of RGB\n    var delta = vMax - vMin; // Delta RGB value\n\n    var L = (vMax + vMin) / 2;\n    var H;\n    var S;\n    // HSL results from 0 to 1\n    if (delta === 0) {\n        H = 0;\n        S = 0;\n    }\n    else {\n        if (L < 0.5) {\n            S = delta / (vMax + vMin);\n        }\n        else {\n            S = delta / (2 - vMax - vMin);\n        }\n\n        var deltaR = (((vMax - R) / 6) + (delta / 2)) / delta;\n        var deltaG = (((vMax - G) / 6) + (delta / 2)) / delta;\n        var deltaB = (((vMax - B) / 6) + (delta / 2)) / delta;\n\n        if (R === vMax) {\n            H = deltaB - deltaG;\n        }\n        else if (G === vMax) {\n            H = (1 / 3) + deltaR - deltaB;\n        }\n        else if (B === vMax) {\n            H = (2 / 3) + deltaG - deltaR;\n        }\n\n        if (H < 0) {\n            H += 1;\n        }\n\n        if (H > 1) {\n            H -= 1;\n        }\n    }\n\n    var hsla = [H * 360, S, L];\n\n    if (rgba[3] != null) {\n        hsla.push(rgba[3]);\n    }\n\n    return hsla;\n}\n\n/**\n * @param {string} color\n * @param {number} level\n * @return {string}\n * @memberOf module:zrender/util/color\n */\nfunction lift(color, level) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        for (var i = 0; i < 3; i++) {\n            if (level < 0) {\n                colorArr[i] = colorArr[i] * (1 - level) | 0;\n            }\n            else {\n                colorArr[i] = ((255 - colorArr[i]) * level + colorArr[i]) | 0;\n            }\n            if (colorArr[i] > 255) {\n                colorArr[i] = 255;\n            }\n            else if (color[i] < 0) {\n                colorArr[i] = 0;\n            }\n        }\n        return stringify(colorArr, colorArr.length === 4 ? 'rgba' : 'rgb');\n    }\n}\n\n/**\n * @param {string} color\n * @return {string}\n * @memberOf module:zrender/util/color\n */\nfunction toHex(color) {\n    var colorArr = parse(color);\n    if (colorArr) {\n        return ((1 << 24) + (colorArr[0] << 16) + (colorArr[1] << 8) + (+colorArr[2])).toString(16).slice(1);\n    }\n}\n\n/**\n * Map value to color. Faster than lerp methods because color is represented by rgba array.\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<Array.<number>>} colors List of rgba color array\n * @param {Array.<number>} [out] Mapped gba color array\n * @return {Array.<number>} will be null/undefined if input illegal.\n */\nfunction fastLerp(normalizedValue, colors, out) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    out = out || [];\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = colors[leftIndex];\n    var rightColor = colors[rightIndex];\n    var dv = value - leftIndex;\n    out[0] = clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv));\n    out[1] = clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv));\n    out[2] = clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv));\n    out[3] = clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv));\n\n    return out;\n}\n\n/**\n * @deprecated\n */\nvar fastMapToColor = fastLerp;\n\n/**\n * @param {number} normalizedValue A float between 0 and 1.\n * @param {Array.<string>} colors Color list.\n * @param {boolean=} fullOutput Default false.\n * @return {(string|Object)} Result color. If fullOutput,\n *                           return {color: ..., leftIndex: ..., rightIndex: ..., value: ...},\n * @memberOf module:zrender/util/color\n */\nfunction lerp(normalizedValue, colors, fullOutput) {\n    if (!(colors && colors.length)\n        || !(normalizedValue >= 0 && normalizedValue <= 1)\n    ) {\n        return;\n    }\n\n    var value = normalizedValue * (colors.length - 1);\n    var leftIndex = Math.floor(value);\n    var rightIndex = Math.ceil(value);\n    var leftColor = parse(colors[leftIndex]);\n    var rightColor = parse(colors[rightIndex]);\n    var dv = value - leftIndex;\n\n    var color = stringify(\n        [\n            clampCssByte(lerpNumber(leftColor[0], rightColor[0], dv)),\n            clampCssByte(lerpNumber(leftColor[1], rightColor[1], dv)),\n            clampCssByte(lerpNumber(leftColor[2], rightColor[2], dv)),\n            clampCssFloat(lerpNumber(leftColor[3], rightColor[3], dv))\n        ],\n        'rgba'\n    );\n\n    return fullOutput\n        ? {\n            color: color,\n            leftIndex: leftIndex,\n            rightIndex: rightIndex,\n            value: value\n        }\n        : color;\n}\n\n/**\n * @deprecated\n */\nvar mapToColor = lerp;\n\n/**\n * @param {string} color\n * @param {number=} h 0 ~ 360, ignore when null.\n * @param {number=} s 0 ~ 1, ignore when null.\n * @param {number=} l 0 ~ 1, ignore when null.\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nfunction modifyHSL(color, h, s, l) {\n    color = parse(color);\n\n    if (color) {\n        color = rgba2hsla(color);\n        h != null && (color[0] = clampCssAngle(h));\n        s != null && (color[1] = parseCssFloat(s));\n        l != null && (color[2] = parseCssFloat(l));\n\n        return stringify(hsla2rgba(color), 'rgba');\n    }\n}\n\n/**\n * @param {string} color\n * @param {number=} alpha 0 ~ 1\n * @return {string} Color string in rgba format.\n * @memberOf module:zrender/util/color\n */\nfunction modifyAlpha(color, alpha) {\n    color = parse(color);\n\n    if (color && alpha != null) {\n        color[3] = clampCssFloat(alpha);\n        return stringify(color, 'rgba');\n    }\n}\n\n/**\n * @param {Array.<number>} arrColor like [12,33,44,0.4]\n * @param {string} type 'rgba', 'hsva', ...\n * @return {string} Result color. (If input illegal, return undefined).\n */\nfunction stringify(arrColor, type) {\n    if (!arrColor || !arrColor.length) {\n        return;\n    }\n    var colorStr = arrColor[0] + ',' + arrColor[1] + ',' + arrColor[2];\n    if (type === 'rgba' || type === 'hsva' || type === 'hsla') {\n        colorStr += ',' + arrColor[3];\n    }\n    return type + '(' + colorStr + ')';\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL3Rvb2wvY29sb3IuanM/ZDgwOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgTFJVIGZyb20gJy4uL2NvcmUvTFJVJztcblxudmFyIGtDU1NDb2xvclRhYmxlID0ge1xuICAgICd0cmFuc3BhcmVudCc6IFswLCAwLCAwLCAwXSwgJ2FsaWNlYmx1ZSc6IFsyNDAsIDI0OCwgMjU1LCAxXSxcbiAgICAnYW50aXF1ZXdoaXRlJzogWzI1MCwgMjM1LCAyMTUsIDFdLCAnYXF1YSc6IFswLCAyNTUsIDI1NSwgMV0sXG4gICAgJ2FxdWFtYXJpbmUnOiBbMTI3LCAyNTUsIDIxMiwgMV0sICdhenVyZSc6IFsyNDAsIDI1NSwgMjU1LCAxXSxcbiAgICAnYmVpZ2UnOiBbMjQ1LCAyNDUsIDIyMCwgMV0sICdiaXNxdWUnOiBbMjU1LCAyMjgsIDE5NiwgMV0sXG4gICAgJ2JsYWNrJzogWzAsIDAsIDAsIDFdLCAnYmxhbmNoZWRhbG1vbmQnOiBbMjU1LCAyMzUsIDIwNSwgMV0sXG4gICAgJ2JsdWUnOiBbMCwgMCwgMjU1LCAxXSwgJ2JsdWV2aW9sZXQnOiBbMTM4LCA0MywgMjI2LCAxXSxcbiAgICAnYnJvd24nOiBbMTY1LCA0MiwgNDIsIDFdLCAnYnVybHl3b29kJzogWzIyMiwgMTg0LCAxMzUsIDFdLFxuICAgICdjYWRldGJsdWUnOiBbOTUsIDE1OCwgMTYwLCAxXSwgJ2NoYXJ0cmV1c2UnOiBbMTI3LCAyNTUsIDAsIDFdLFxuICAgICdjaG9jb2xhdGUnOiBbMjEwLCAxMDUsIDMwLCAxXSwgJ2NvcmFsJzogWzI1NSwgMTI3LCA4MCwgMV0sXG4gICAgJ2Nvcm5mbG93ZXJibHVlJzogWzEwMCwgMTQ5LCAyMzcsIDFdLCAnY29ybnNpbGsnOiBbMjU1LCAyNDgsIDIyMCwgMV0sXG4gICAgJ2NyaW1zb24nOiBbMjIwLCAyMCwgNjAsIDFdLCAnY3lhbic6IFswLCAyNTUsIDI1NSwgMV0sXG4gICAgJ2RhcmtibHVlJzogWzAsIDAsIDEzOSwgMV0sICdkYXJrY3lhbic6IFswLCAxMzksIDEzOSwgMV0sXG4gICAgJ2Rhcmtnb2xkZW5yb2QnOiBbMTg0LCAxMzQsIDExLCAxXSwgJ2RhcmtncmF5JzogWzE2OSwgMTY5LCAxNjksIDFdLFxuICAgICdkYXJrZ3JlZW4nOiBbMCwgMTAwLCAwLCAxXSwgJ2RhcmtncmV5JzogWzE2OSwgMTY5LCAxNjksIDFdLFxuICAgICdkYXJra2hha2knOiBbMTg5LCAxODMsIDEwNywgMV0sICdkYXJrbWFnZW50YSc6IFsxMzksIDAsIDEzOSwgMV0sXG4gICAgJ2RhcmtvbGl2ZWdyZWVuJzogWzg1LCAxMDcsIDQ3LCAxXSwgJ2RhcmtvcmFuZ2UnOiBbMjU1LCAxNDAsIDAsIDFdLFxuICAgICdkYXJrb3JjaGlkJzogWzE1MywgNTAsIDIwNCwgMV0sICdkYXJrcmVkJzogWzEzOSwgMCwgMCwgMV0sXG4gICAgJ2RhcmtzYWxtb24nOiBbMjMzLCAxNTAsIDEyMiwgMV0sICdkYXJrc2VhZ3JlZW4nOiBbMTQzLCAxODgsIDE0MywgMV0sXG4gICAgJ2RhcmtzbGF0ZWJsdWUnOiBbNzIsIDYxLCAxMzksIDFdLCAnZGFya3NsYXRlZ3JheSc6IFs0NywgNzksIDc5LCAxXSxcbiAgICAnZGFya3NsYXRlZ3JleSc6IFs0NywgNzksIDc5LCAxXSwgJ2Rhcmt0dXJxdW9pc2UnOiBbMCwgMjA2LCAyMDksIDFdLFxuICAgICdkYXJrdmlvbGV0JzogWzE0OCwgMCwgMjExLCAxXSwgJ2RlZXBwaW5rJzogWzI1NSwgMjAsIDE0NywgMV0sXG4gICAgJ2RlZXBza3libHVlJzogWzAsIDE5MSwgMjU1LCAxXSwgJ2RpbWdyYXknOiBbMTA1LCAxMDUsIDEwNSwgMV0sXG4gICAgJ2RpbWdyZXknOiBbMTA1LCAxMDUsIDEwNSwgMV0sICdkb2RnZXJibHVlJzogWzMwLCAxNDQsIDI1NSwgMV0sXG4gICAgJ2ZpcmVicmljayc6IFsxNzgsIDM0LCAzNCwgMV0sICdmbG9yYWx3aGl0ZSc6IFsyNTUsIDI1MCwgMjQwLCAxXSxcbiAgICAnZm9yZXN0Z3JlZW4nOiBbMzQsIDEzOSwgMzQsIDFdLCAnZnVjaHNpYSc6IFsyNTUsIDAsIDI1NSwgMV0sXG4gICAgJ2dhaW5zYm9ybyc6IFsyMjAsIDIyMCwgMjIwLCAxXSwgJ2dob3N0d2hpdGUnOiBbMjQ4LCAyNDgsIDI1NSwgMV0sXG4gICAgJ2dvbGQnOiBbMjU1LCAyMTUsIDAsIDFdLCAnZ29sZGVucm9kJzogWzIxOCwgMTY1LCAzMiwgMV0sXG4gICAgJ2dyYXknOiBbMTI4LCAxMjgsIDEyOCwgMV0sICdncmVlbic6IFswLCAxMjgsIDAsIDFdLFxuICAgICdncmVlbnllbGxvdyc6IFsxNzMsIDI1NSwgNDcsIDFdLCAnZ3JleSc6IFsxMjgsIDEyOCwgMTI4LCAxXSxcbiAgICAnaG9uZXlkZXcnOiBbMjQwLCAyNTUsIDI0MCwgMV0sICdob3RwaW5rJzogWzI1NSwgMTA1LCAxODAsIDFdLFxuICAgICdpbmRpYW5yZWQnOiBbMjA1LCA5MiwgOTIsIDFdLCAnaW5kaWdvJzogWzc1LCAwLCAxMzAsIDFdLFxuICAgICdpdm9yeSc6IFsyNTUsIDI1NSwgMjQwLCAxXSwgJ2toYWtpJzogWzI0MCwgMjMwLCAxNDAsIDFdLFxuICAgICdsYXZlbmRlcic6IFsyMzAsIDIzMCwgMjUwLCAxXSwgJ2xhdmVuZGVyYmx1c2gnOiBbMjU1LCAyNDAsIDI0NSwgMV0sXG4gICAgJ2xhd25ncmVlbic6IFsxMjQsIDI1MiwgMCwgMV0sICdsZW1vbmNoaWZmb24nOiBbMjU1LCAyNTAsIDIwNSwgMV0sXG4gICAgJ2xpZ2h0Ymx1ZSc6IFsxNzMsIDIxNiwgMjMwLCAxXSwgJ2xpZ2h0Y29yYWwnOiBbMjQwLCAxMjgsIDEyOCwgMV0sXG4gICAgJ2xpZ2h0Y3lhbic6IFsyMjQsIDI1NSwgMjU1LCAxXSwgJ2xpZ2h0Z29sZGVucm9keWVsbG93JzogWzI1MCwgMjUwLCAyMTAsIDFdLFxuICAgICdsaWdodGdyYXknOiBbMjExLCAyMTEsIDIxMSwgMV0sICdsaWdodGdyZWVuJzogWzE0NCwgMjM4LCAxNDQsIDFdLFxuICAgICdsaWdodGdyZXknOiBbMjExLCAyMTEsIDIxMSwgMV0sICdsaWdodHBpbmsnOiBbMjU1LCAxODIsIDE5MywgMV0sXG4gICAgJ2xpZ2h0c2FsbW9uJzogWzI1NSwgMTYwLCAxMjIsIDFdLCAnbGlnaHRzZWFncmVlbic6IFszMiwgMTc4LCAxNzAsIDFdLFxuICAgICdsaWdodHNreWJsdWUnOiBbMTM1LCAyMDYsIDI1MCwgMV0sICdsaWdodHNsYXRlZ3JheSc6IFsxMTksIDEzNiwgMTUzLCAxXSxcbiAgICAnbGlnaHRzbGF0ZWdyZXknOiBbMTE5LCAxMzYsIDE1MywgMV0sICdsaWdodHN0ZWVsYmx1ZSc6IFsxNzYsIDE5NiwgMjIyLCAxXSxcbiAgICAnbGlnaHR5ZWxsb3cnOiBbMjU1LCAyNTUsIDIyNCwgMV0sICdsaW1lJzogWzAsIDI1NSwgMCwgMV0sXG4gICAgJ2xpbWVncmVlbic6IFs1MCwgMjA1LCA1MCwgMV0sICdsaW5lbic6IFsyNTAsIDI0MCwgMjMwLCAxXSxcbiAgICAnbWFnZW50YSc6IFsyNTUsIDAsIDI1NSwgMV0sICdtYXJvb24nOiBbMTI4LCAwLCAwLCAxXSxcbiAgICAnbWVkaXVtYXF1YW1hcmluZSc6IFsxMDIsIDIwNSwgMTcwLCAxXSwgJ21lZGl1bWJsdWUnOiBbMCwgMCwgMjA1LCAxXSxcbiAgICAnbWVkaXVtb3JjaGlkJzogWzE4NiwgODUsIDIxMSwgMV0sICdtZWRpdW1wdXJwbGUnOiBbMTQ3LCAxMTIsIDIxOSwgMV0sXG4gICAgJ21lZGl1bXNlYWdyZWVuJzogWzYwLCAxNzksIDExMywgMV0sICdtZWRpdW1zbGF0ZWJsdWUnOiBbMTIzLCAxMDQsIDIzOCwgMV0sXG4gICAgJ21lZGl1bXNwcmluZ2dyZWVuJzogWzAsIDI1MCwgMTU0LCAxXSwgJ21lZGl1bXR1cnF1b2lzZSc6IFs3MiwgMjA5LCAyMDQsIDFdLFxuICAgICdtZWRpdW12aW9sZXRyZWQnOiBbMTk5LCAyMSwgMTMzLCAxXSwgJ21pZG5pZ2h0Ymx1ZSc6IFsyNSwgMjUsIDExMiwgMV0sXG4gICAgJ21pbnRjcmVhbSc6IFsyNDUsIDI1NSwgMjUwLCAxXSwgJ21pc3R5cm9zZSc6IFsyNTUsIDIyOCwgMjI1LCAxXSxcbiAgICAnbW9jY2FzaW4nOiBbMjU1LCAyMjgsIDE4MSwgMV0sICduYXZham93aGl0ZSc6IFsyNTUsIDIyMiwgMTczLCAxXSxcbiAgICAnbmF2eSc6IFswLCAwLCAxMjgsIDFdLCAnb2xkbGFjZSc6IFsyNTMsIDI0NSwgMjMwLCAxXSxcbiAgICAnb2xpdmUnOiBbMTI4LCAxMjgsIDAsIDFdLCAnb2xpdmVkcmFiJzogWzEwNywgMTQyLCAzNSwgMV0sXG4gICAgJ29yYW5nZSc6IFsyNTUsIDE2NSwgMCwgMV0sICdvcmFuZ2VyZWQnOiBbMjU1LCA2OSwgMCwgMV0sXG4gICAgJ29yY2hpZCc6IFsyMTgsIDExMiwgMjE0LCAxXSwgJ3BhbGVnb2xkZW5yb2QnOiBbMjM4LCAyMzIsIDE3MCwgMV0sXG4gICAgJ3BhbGVncmVlbic6IFsxNTIsIDI1MSwgMTUyLCAxXSwgJ3BhbGV0dXJxdW9pc2UnOiBbMTc1LCAyMzgsIDIzOCwgMV0sXG4gICAgJ3BhbGV2aW9sZXRyZWQnOiBbMjE5LCAxMTIsIDE0NywgMV0sICdwYXBheWF3aGlwJzogWzI1NSwgMjM5LCAyMTMsIDFdLFxuICAgICdwZWFjaHB1ZmYnOiBbMjU1LCAyMTgsIDE4NSwgMV0sICdwZXJ1JzogWzIwNSwgMTMzLCA2MywgMV0sXG4gICAgJ3BpbmsnOiBbMjU1LCAxOTIsIDIwMywgMV0sICdwbHVtJzogWzIyMSwgMTYwLCAyMjEsIDFdLFxuICAgICdwb3dkZXJibHVlJzogWzE3NiwgMjI0LCAyMzAsIDFdLCAncHVycGxlJzogWzEyOCwgMCwgMTI4LCAxXSxcbiAgICAncmVkJzogWzI1NSwgMCwgMCwgMV0sICdyb3N5YnJvd24nOiBbMTg4LCAxNDMsIDE0MywgMV0sXG4gICAgJ3JveWFsYmx1ZSc6IFs2NSwgMTA1LCAyMjUsIDFdLCAnc2FkZGxlYnJvd24nOiBbMTM5LCA2OSwgMTksIDFdLFxuICAgICdzYWxtb24nOiBbMjUwLCAxMjgsIDExNCwgMV0sICdzYW5keWJyb3duJzogWzI0NCwgMTY0LCA5NiwgMV0sXG4gICAgJ3NlYWdyZWVuJzogWzQ2LCAxMzksIDg3LCAxXSwgJ3NlYXNoZWxsJzogWzI1NSwgMjQ1LCAyMzgsIDFdLFxuICAgICdzaWVubmEnOiBbMTYwLCA4MiwgNDUsIDFdLCAnc2lsdmVyJzogWzE5MiwgMTkyLCAxOTIsIDFdLFxuICAgICdza3libHVlJzogWzEzNSwgMjA2LCAyMzUsIDFdLCAnc2xhdGVibHVlJzogWzEwNiwgOTAsIDIwNSwgMV0sXG4gICAgJ3NsYXRlZ3JheSc6IFsxMTIsIDEyOCwgMTQ0LCAxXSwgJ3NsYXRlZ3JleSc6IFsxMTIsIDEyOCwgMTQ0LCAxXSxcbiAgICAnc25vdyc6IFsyNTUsIDI1MCwgMjUwLCAxXSwgJ3NwcmluZ2dyZWVuJzogWzAsIDI1NSwgMTI3LCAxXSxcbiAgICAnc3RlZWxibHVlJzogWzcwLCAxMzAsIDE4MCwgMV0sICd0YW4nOiBbMjEwLCAxODAsIDE0MCwgMV0sXG4gICAgJ3RlYWwnOiBbMCwgMTI4LCAxMjgsIDFdLCAndGhpc3RsZSc6IFsyMTYsIDE5MSwgMjE2LCAxXSxcbiAgICAndG9tYXRvJzogWzI1NSwgOTksIDcxLCAxXSwgJ3R1cnF1b2lzZSc6IFs2NCwgMjI0LCAyMDgsIDFdLFxuICAgICd2aW9sZXQnOiBbMjM4LCAxMzAsIDIzOCwgMV0sICd3aGVhdCc6IFsyNDUsIDIyMiwgMTc5LCAxXSxcbiAgICAnd2hpdGUnOiBbMjU1LCAyNTUsIDI1NSwgMV0sICd3aGl0ZXNtb2tlJzogWzI0NSwgMjQ1LCAyNDUsIDFdLFxuICAgICd5ZWxsb3cnOiBbMjU1LCAyNTUsIDAsIDFdLCAneWVsbG93Z3JlZW4nOiBbMTU0LCAyMDUsIDUwLCAxXVxufTtcblxuZnVuY3Rpb24gY2xhbXBDc3NCeXRlKGkpIHsgIC8vIENsYW1wIHRvIGludGVnZXIgMCAuLiAyNTUuXG4gICAgaSA9IE1hdGgucm91bmQoaSk7ICAvLyBTZWVtcyB0byBiZSB3aGF0IENocm9tZSBkb2VzICh2cyB0cnVuY2F0aW9uKS5cbiAgICByZXR1cm4gaSA8IDAgPyAwIDogaSA+IDI1NSA/IDI1NSA6IGk7XG59XG5cbmZ1bmN0aW9uIGNsYW1wQ3NzQW5nbGUoaSkgeyAgLy8gQ2xhbXAgdG8gaW50ZWdlciAwIC4uIDM2MC5cbiAgICBpID0gTWF0aC5yb3VuZChpKTsgIC8vIFNlZW1zIHRvIGJlIHdoYXQgQ2hyb21lIGRvZXMgKHZzIHRydW5jYXRpb24pLlxuICAgIHJldHVybiBpIDwgMCA/IDAgOiBpID4gMzYwID8gMzYwIDogaTtcbn1cblxuZnVuY3Rpb24gY2xhbXBDc3NGbG9hdChmKSB7ICAvLyBDbGFtcCB0byBmbG9hdCAwLjAgLi4gMS4wLlxuICAgIHJldHVybiBmIDwgMCA/IDAgOiBmID4gMSA/IDEgOiBmO1xufVxuXG5mdW5jdGlvbiBwYXJzZUNzc0ludChzdHIpIHsgIC8vIGludCBvciBwZXJjZW50YWdlLlxuICAgIGlmIChzdHIubGVuZ3RoICYmIHN0ci5jaGFyQXQoc3RyLmxlbmd0aCAtIDEpID09PSAnJScpIHtcbiAgICAgICAgcmV0dXJuIGNsYW1wQ3NzQnl0ZShwYXJzZUZsb2F0KHN0cikgLyAxMDAgKiAyNTUpO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXBDc3NCeXRlKHBhcnNlSW50KHN0ciwgMTApKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VDc3NGbG9hdChzdHIpIHsgIC8vIGZsb2F0IG9yIHBlcmNlbnRhZ2UuXG4gICAgaWYgKHN0ci5sZW5ndGggJiYgc3RyLmNoYXJBdChzdHIubGVuZ3RoIC0gMSkgPT09ICclJykge1xuICAgICAgICByZXR1cm4gY2xhbXBDc3NGbG9hdChwYXJzZUZsb2F0KHN0cikgLyAxMDApO1xuICAgIH1cbiAgICByZXR1cm4gY2xhbXBDc3NGbG9hdChwYXJzZUZsb2F0KHN0cikpO1xufVxuXG5mdW5jdGlvbiBjc3NIdWVUb1JnYihtMSwgbTIsIGgpIHtcbiAgICBpZiAoaCA8IDApIHtcbiAgICAgICAgaCArPSAxO1xuICAgIH1cbiAgICBlbHNlIGlmIChoID4gMSkge1xuICAgICAgICBoIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGggKiA2IDwgMSkge1xuICAgICAgICByZXR1cm4gbTEgKyAobTIgLSBtMSkgKiBoICogNjtcbiAgICB9XG4gICAgaWYgKGggKiAyIDwgMSkge1xuICAgICAgICByZXR1cm4gbTI7XG4gICAgfVxuICAgIGlmIChoICogMyA8IDIpIHtcbiAgICAgICAgcmV0dXJuIG0xICsgKG0yIC0gbTEpICogKDIgLyAzIC0gaCkgKiA2O1xuICAgIH1cbiAgICByZXR1cm4gbTE7XG59XG5cbmZ1bmN0aW9uIGxlcnBOdW1iZXIoYSwgYiwgcCkge1xuICAgIHJldHVybiBhICsgKGIgLSBhKSAqIHA7XG59XG5cbmZ1bmN0aW9uIHNldFJnYmEob3V0LCByLCBnLCBiLCBhKSB7XG4gICAgb3V0WzBdID0gcjsgb3V0WzFdID0gZzsgb3V0WzJdID0gYjsgb3V0WzNdID0gYTtcbiAgICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gY29weVJnYmEob3V0LCBhKSB7XG4gICAgb3V0WzBdID0gYVswXTsgb3V0WzFdID0gYVsxXTsgb3V0WzJdID0gYVsyXTsgb3V0WzNdID0gYVszXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG52YXIgY29sb3JDYWNoZSA9IG5ldyBMUlUoMjApO1xudmFyIGxhc3RSZW1vdmVkQXJyID0gbnVsbDtcblxuZnVuY3Rpb24gcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycikge1xuICAgIC8vIFJldXNlIHJlbW92ZWQgYXJyYXlcbiAgICBpZiAobGFzdFJlbW92ZWRBcnIpIHtcbiAgICAgICAgY29weVJnYmEobGFzdFJlbW92ZWRBcnIsIHJnYmFBcnIpO1xuICAgIH1cbiAgICBsYXN0UmVtb3ZlZEFyciA9IGNvbG9yQ2FjaGUucHV0KGNvbG9yU3RyLCBsYXN0UmVtb3ZlZEFyciB8fCAocmdiYUFyci5zbGljZSgpKSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yU3RyXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBvdXRcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fVxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKGNvbG9yU3RyLCByZ2JhQXJyKSB7XG4gICAgaWYgKCFjb2xvclN0cikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJnYmFBcnIgPSByZ2JhQXJyIHx8IFtdO1xuXG4gICAgdmFyIGNhY2hlZCA9IGNvbG9yQ2FjaGUuZ2V0KGNvbG9yU3RyKTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBjb3B5UmdiYShyZ2JhQXJyLCBjYWNoZWQpO1xuICAgIH1cblxuICAgIC8vIGNvbG9yU3RyIG1heSBiZSBub3Qgc3RyaW5nXG4gICAgY29sb3JTdHIgPSBjb2xvclN0ciArICcnO1xuICAgIC8vIFJlbW92ZSBhbGwgd2hpdGVzcGFjZSwgbm90IGNvbXBsaWFudCwgYnV0IHNob3VsZCBqdXN0IGJlIG1vcmUgYWNjZXB0aW5nLlxuICAgIHZhciBzdHIgPSBjb2xvclN0ci5yZXBsYWNlKC8gL2csICcnKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQ29sb3Iga2V5d29yZHMgKGFuZCB0cmFuc3BhcmVudCkgbG9va3VwLlxuICAgIGlmIChzdHIgaW4ga0NTU0NvbG9yVGFibGUpIHtcbiAgICAgICAgY29weVJnYmEocmdiYUFyciwga0NTU0NvbG9yVGFibGVbc3RyXSk7XG4gICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICB9XG5cbiAgICAvLyAjYWJjIGFuZCAjYWJjMTIzIHN5bnRheC5cbiAgICBpZiAoc3RyLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSA0KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgICgoaXYgJiAweGYwMCkgPj4gNCkgfCAoKGl2ICYgMHhmMDApID4+IDgpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZjApIHwgKChpdiAmIDB4ZjApID4+IDQpLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZikgfCAoKGl2ICYgMHhmKSA8PCA0KSxcbiAgICAgICAgICAgICAgICAxXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICByZXR1cm4gcmdiYUFycjtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChzdHIubGVuZ3RoID09PSA3KSB7XG4gICAgICAgICAgICB2YXIgaXYgPSBwYXJzZUludChzdHIuc3Vic3RyKDEpLCAxNik7ICAvLyBUT0RPKGRlYW5tKTogU3RyaWN0ZXIgcGFyc2luZy5cbiAgICAgICAgICAgIGlmICghKGl2ID49IDAgJiYgaXYgPD0gMHhmZmZmZmYpKSB7XG4gICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICByZXR1cm47ICAvLyBDb3ZlcnMgTmFOLlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLFxuICAgICAgICAgICAgICAgIChpdiAmIDB4ZmYwMDAwKSA+PiAxNixcbiAgICAgICAgICAgICAgICAoaXYgJiAweGZmMDApID4+IDgsXG4gICAgICAgICAgICAgICAgaXYgJiAweGZmLFxuICAgICAgICAgICAgICAgIDFcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBwdXRUb0NhY2hlKGNvbG9yU3RyLCByZ2JhQXJyKTtcbiAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgb3AgPSBzdHIuaW5kZXhPZignKCcpO1xuICAgIHZhciBlcCA9IHN0ci5pbmRleE9mKCcpJyk7XG4gICAgaWYgKG9wICE9PSAtMSAmJiBlcCArIDEgPT09IHN0ci5sZW5ndGgpIHtcbiAgICAgICAgdmFyIGZuYW1lID0gc3RyLnN1YnN0cigwLCBvcCk7XG4gICAgICAgIHZhciBwYXJhbXMgPSBzdHIuc3Vic3RyKG9wICsgMSwgZXAgLSAob3AgKyAxKSkuc3BsaXQoJywnKTtcbiAgICAgICAgdmFyIGFscGhhID0gMTsgIC8vIFRvIGFsbG93IGNhc2UgZmFsbHRocm91Z2guXG4gICAgICAgIHN3aXRjaCAoZm5hbWUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3JnYmEnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYWxwaGEgPSBwYXJzZUNzc0Zsb2F0KHBhcmFtcy5wb3AoKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgICAgICAgLy8gRmFsbCB0aHJvdWdoLlxuICAgICAgICAgICAgY2FzZSAncmdiJzpcbiAgICAgICAgICAgICAgICBpZiAocGFyYW1zLmxlbmd0aCAhPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBzZXRSZ2JhKHJnYmFBcnIsIDAsIDAsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFycixcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzBdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzFdKSxcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VDc3NJbnQocGFyYW1zWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgYWxwaGFcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHB1dFRvQ2FjaGUoY29sb3JTdHIsIHJnYmFBcnIpO1xuICAgICAgICAgICAgICAgIHJldHVybiByZ2JhQXJyO1xuICAgICAgICAgICAgY2FzZSAnaHNsYSc6XG4gICAgICAgICAgICAgICAgaWYgKHBhcmFtcy5sZW5ndGggIT09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0UmdiYShyZ2JhQXJyLCAwLCAwLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwYXJhbXNbM10gPSBwYXJzZUNzc0Zsb2F0KHBhcmFtc1szXSk7XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBjYXNlICdoc2wnOlxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaHNsYTJyZ2JhKHBhcmFtcywgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcHV0VG9DYWNoZShjb2xvclN0ciwgcmdiYUFycik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJnYmFBcnI7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldFJnYmEocmdiYUFyciwgMCwgMCwgMCwgMSk7XG4gICAgcmV0dXJuO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IGhzbGFcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSByZ2JhXG4gKi9cbmZ1bmN0aW9uIGhzbGEycmdiYShoc2xhLCByZ2JhKSB7XG4gICAgdmFyIGggPSAoKChwYXJzZUZsb2F0KGhzbGFbMF0pICUgMzYwKSArIDM2MCkgJSAzNjApIC8gMzYwOyAgLy8gMCAuLiAxXG4gICAgLy8gTk9URShkZWFubSk6IEFjY29yZGluZyB0byB0aGUgQ1NTIHNwZWMgcy9sIHNob3VsZCBvbmx5IGJlXG4gICAgLy8gcGVyY2VudGFnZXMsIGJ1dCB3ZSBkb24ndCBib3RoZXIgYW5kIGxldCBmbG9hdCBvciBwZXJjZW50YWdlLlxuICAgIHZhciBzID0gcGFyc2VDc3NGbG9hdChoc2xhWzFdKTtcbiAgICB2YXIgbCA9IHBhcnNlQ3NzRmxvYXQoaHNsYVsyXSk7XG4gICAgdmFyIG0yID0gbCA8PSAwLjUgPyBsICogKHMgKyAxKSA6IGwgKyBzIC0gbCAqIHM7XG4gICAgdmFyIG0xID0gbCAqIDIgLSBtMjtcblxuICAgIHJnYmEgPSByZ2JhIHx8IFtdO1xuICAgIHNldFJnYmEocmdiYSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCArIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIGNsYW1wQ3NzQnl0ZShjc3NIdWVUb1JnYihtMSwgbTIsIGgpICogMjU1KSxcbiAgICAgICAgY2xhbXBDc3NCeXRlKGNzc0h1ZVRvUmdiKG0xLCBtMiwgaCAtIDEgLyAzKSAqIDI1NSksXG4gICAgICAgIDFcbiAgICApO1xuXG4gICAgaWYgKGhzbGEubGVuZ3RoID09PSA0KSB7XG4gICAgICAgIHJnYmFbM10gPSBoc2xhWzNdO1xuICAgIH1cblxuICAgIHJldHVybiByZ2JhO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXkuPG51bWJlcj59IHJnYmFcbiAqIEByZXR1cm4ge0FycmF5LjxudW1iZXI+fSBoc2xhXG4gKi9cbmZ1bmN0aW9uIHJnYmEyaHNsYShyZ2JhKSB7XG4gICAgaWYgKCFyZ2JhKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSR0IgZnJvbSAwIHRvIDI1NVxuICAgIHZhciBSID0gcmdiYVswXSAvIDI1NTtcbiAgICB2YXIgRyA9IHJnYmFbMV0gLyAyNTU7XG4gICAgdmFyIEIgPSByZ2JhWzJdIC8gMjU1O1xuXG4gICAgdmFyIHZNaW4gPSBNYXRoLm1pbihSLCBHLCBCKTsgLy8gTWluLiB2YWx1ZSBvZiBSR0JcbiAgICB2YXIgdk1heCA9IE1hdGgubWF4KFIsIEcsIEIpOyAvLyBNYXguIHZhbHVlIG9mIFJHQlxuICAgIHZhciBkZWx0YSA9IHZNYXggLSB2TWluOyAvLyBEZWx0YSBSR0IgdmFsdWVcblxuICAgIHZhciBMID0gKHZNYXggKyB2TWluKSAvIDI7XG4gICAgdmFyIEg7XG4gICAgdmFyIFM7XG4gICAgLy8gSFNMIHJlc3VsdHMgZnJvbSAwIHRvIDFcbiAgICBpZiAoZGVsdGEgPT09IDApIHtcbiAgICAgICAgSCA9IDA7XG4gICAgICAgIFMgPSAwO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgaWYgKEwgPCAwLjUpIHtcbiAgICAgICAgICAgIFMgPSBkZWx0YSAvICh2TWF4ICsgdk1pbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBTID0gZGVsdGEgLyAoMiAtIHZNYXggLSB2TWluKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBkZWx0YVIgPSAoKCh2TWF4IC0gUikgLyA2KSArIChkZWx0YSAvIDIpKSAvIGRlbHRhO1xuICAgICAgICB2YXIgZGVsdGFHID0gKCgodk1heCAtIEcpIC8gNikgKyAoZGVsdGEgLyAyKSkgLyBkZWx0YTtcbiAgICAgICAgdmFyIGRlbHRhQiA9ICgoKHZNYXggLSBCKSAvIDYpICsgKGRlbHRhIC8gMikpIC8gZGVsdGE7XG5cbiAgICAgICAgaWYgKFIgPT09IHZNYXgpIHtcbiAgICAgICAgICAgIEggPSBkZWx0YUIgLSBkZWx0YUc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoRyA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgxIC8gMykgKyBkZWx0YVIgLSBkZWx0YUI7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoQiA9PT0gdk1heCkge1xuICAgICAgICAgICAgSCA9ICgyIC8gMykgKyBkZWx0YUcgLSBkZWx0YVI7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoSCA8IDApIHtcbiAgICAgICAgICAgIEggKz0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChIID4gMSkge1xuICAgICAgICAgICAgSCAtPSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGhzbGEgPSBbSCAqIDM2MCwgUywgTF07XG5cbiAgICBpZiAocmdiYVszXSAhPSBudWxsKSB7XG4gICAgICAgIGhzbGEucHVzaChyZ2JhWzNdKTtcbiAgICB9XG5cbiAgICByZXR1cm4gaHNsYTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEBwYXJhbSB7bnVtYmVyfSBsZXZlbFxuICogQHJldHVybiB7c3RyaW5nfVxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpZnQoY29sb3IsIGxldmVsKSB7XG4gICAgdmFyIGNvbG9yQXJyID0gcGFyc2UoY29sb3IpO1xuICAgIGlmIChjb2xvckFycikge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDM7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxldmVsIDwgMCkge1xuICAgICAgICAgICAgICAgIGNvbG9yQXJyW2ldID0gY29sb3JBcnJbaV0gKiAoMSAtIGxldmVsKSB8IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9ICgoMjU1IC0gY29sb3JBcnJbaV0pICogbGV2ZWwgKyBjb2xvckFycltpXSkgfCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNvbG9yQXJyW2ldID4gMjU1KSB7XG4gICAgICAgICAgICAgICAgY29sb3JBcnJbaV0gPSAyNTU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChjb2xvcltpXSA8IDApIHtcbiAgICAgICAgICAgICAgICBjb2xvckFycltpXSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN0cmluZ2lmeShjb2xvckFyciwgY29sb3JBcnIubGVuZ3RoID09PSA0ID8gJ3JnYmEnIDogJ3JnYicpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqIEBtZW1iZXJPZiBtb2R1bGU6enJlbmRlci91dGlsL2NvbG9yXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b0hleChjb2xvcikge1xuICAgIHZhciBjb2xvckFyciA9IHBhcnNlKGNvbG9yKTtcbiAgICBpZiAoY29sb3JBcnIpIHtcbiAgICAgICAgcmV0dXJuICgoMSA8PCAyNCkgKyAoY29sb3JBcnJbMF0gPDwgMTYpICsgKGNvbG9yQXJyWzFdIDw8IDgpICsgKCtjb2xvckFyclsyXSkpLnRvU3RyaW5nKDE2KS5zbGljZSgxKTtcbiAgICB9XG59XG5cbi8qKlxuICogTWFwIHZhbHVlIHRvIGNvbG9yLiBGYXN0ZXIgdGhhbiBsZXJwIG1ldGhvZHMgYmVjYXVzZSBjb2xvciBpcyByZXByZXNlbnRlZCBieSByZ2JhIGFycmF5LlxuICogQHBhcmFtIHtudW1iZXJ9IG5vcm1hbGl6ZWRWYWx1ZSBBIGZsb2F0IGJldHdlZW4gMCBhbmQgMS5cbiAqIEBwYXJhbSB7QXJyYXkuPEFycmF5LjxudW1iZXI+Pn0gY29sb3JzIExpc3Qgb2YgcmdiYSBjb2xvciBhcnJheVxuICogQHBhcmFtIHtBcnJheS48bnVtYmVyPn0gW291dF0gTWFwcGVkIGdiYSBjb2xvciBhcnJheVxuICogQHJldHVybiB7QXJyYXkuPG51bWJlcj59IHdpbGwgYmUgbnVsbC91bmRlZmluZWQgaWYgaW5wdXQgaWxsZWdhbC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZhc3RMZXJwKG5vcm1hbGl6ZWRWYWx1ZSwgY29sb3JzLCBvdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG91dCA9IG91dCB8fCBbXTtcblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gY29sb3JzW2xlZnRJbmRleF07XG4gICAgdmFyIHJpZ2h0Q29sb3IgPSBjb2xvcnNbcmlnaHRJbmRleF07XG4gICAgdmFyIGR2ID0gdmFsdWUgLSBsZWZ0SW5kZXg7XG4gICAgb3V0WzBdID0gY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpO1xuICAgIG91dFsxXSA9IGNsYW1wQ3NzQnl0ZShsZXJwTnVtYmVyKGxlZnRDb2xvclsxXSwgcmlnaHRDb2xvclsxXSwgZHYpKTtcbiAgICBvdXRbMl0gPSBjbGFtcENzc0J5dGUobGVycE51bWJlcihsZWZ0Q29sb3JbMl0sIHJpZ2h0Q29sb3JbMl0sIGR2KSk7XG4gICAgb3V0WzNdID0gY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKTtcblxuICAgIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqL1xuZXhwb3J0IHZhciBmYXN0TWFwVG9Db2xvciA9IGZhc3RMZXJwO1xuXG4vKipcbiAqIEBwYXJhbSB7bnVtYmVyfSBub3JtYWxpemVkVmFsdWUgQSBmbG9hdCBiZXR3ZWVuIDAgYW5kIDEuXG4gKiBAcGFyYW0ge0FycmF5LjxzdHJpbmc+fSBjb2xvcnMgQ29sb3IgbGlzdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGZ1bGxPdXRwdXQgRGVmYXVsdCBmYWxzZS5cbiAqIEByZXR1cm4geyhzdHJpbmd8T2JqZWN0KX0gUmVzdWx0IGNvbG9yLiBJZiBmdWxsT3V0cHV0LFxuICogICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge2NvbG9yOiAuLi4sIGxlZnRJbmRleDogLi4uLCByaWdodEluZGV4OiAuLi4sIHZhbHVlOiAuLi59LFxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAobm9ybWFsaXplZFZhbHVlLCBjb2xvcnMsIGZ1bGxPdXRwdXQpIHtcbiAgICBpZiAoIShjb2xvcnMgJiYgY29sb3JzLmxlbmd0aClcbiAgICAgICAgfHwgIShub3JtYWxpemVkVmFsdWUgPj0gMCAmJiBub3JtYWxpemVkVmFsdWUgPD0gMSlcbiAgICApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IG5vcm1hbGl6ZWRWYWx1ZSAqIChjb2xvcnMubGVuZ3RoIC0gMSk7XG4gICAgdmFyIGxlZnRJbmRleCA9IE1hdGguZmxvb3IodmFsdWUpO1xuICAgIHZhciByaWdodEluZGV4ID0gTWF0aC5jZWlsKHZhbHVlKTtcbiAgICB2YXIgbGVmdENvbG9yID0gcGFyc2UoY29sb3JzW2xlZnRJbmRleF0pO1xuICAgIHZhciByaWdodENvbG9yID0gcGFyc2UoY29sb3JzW3JpZ2h0SW5kZXhdKTtcbiAgICB2YXIgZHYgPSB2YWx1ZSAtIGxlZnRJbmRleDtcblxuICAgIHZhciBjb2xvciA9IHN0cmluZ2lmeShcbiAgICAgICAgW1xuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzBdLCByaWdodENvbG9yWzBdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzFdLCByaWdodENvbG9yWzFdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NCeXRlKGxlcnBOdW1iZXIobGVmdENvbG9yWzJdLCByaWdodENvbG9yWzJdLCBkdikpLFxuICAgICAgICAgICAgY2xhbXBDc3NGbG9hdChsZXJwTnVtYmVyKGxlZnRDb2xvclszXSwgcmlnaHRDb2xvclszXSwgZHYpKVxuICAgICAgICBdLFxuICAgICAgICAncmdiYSdcbiAgICApO1xuXG4gICAgcmV0dXJuIGZ1bGxPdXRwdXRcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBjb2xvcjogY29sb3IsXG4gICAgICAgICAgICBsZWZ0SW5kZXg6IGxlZnRJbmRleCxcbiAgICAgICAgICAgIHJpZ2h0SW5kZXg6IHJpZ2h0SW5kZXgsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgICAgfVxuICAgICAgICA6IGNvbG9yO1xufVxuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCB2YXIgbWFwVG9Db2xvciA9IGxlcnA7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXG4gKiBAcGFyYW0ge251bWJlcj19IGggMCB+IDM2MCwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gcyAwIH4gMSwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEBwYXJhbSB7bnVtYmVyPX0gbCAwIH4gMSwgaWdub3JlIHdoZW4gbnVsbC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29sb3Igc3RyaW5nIGluIHJnYmEgZm9ybWF0LlxuICogQG1lbWJlck9mIG1vZHVsZTp6cmVuZGVyL3V0aWwvY29sb3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1vZGlmeUhTTChjb2xvciwgaCwgcywgbCkge1xuICAgIGNvbG9yID0gcGFyc2UoY29sb3IpO1xuXG4gICAgaWYgKGNvbG9yKSB7XG4gICAgICAgIGNvbG9yID0gcmdiYTJoc2xhKGNvbG9yKTtcbiAgICAgICAgaCAhPSBudWxsICYmIChjb2xvclswXSA9IGNsYW1wQ3NzQW5nbGUoaCkpO1xuICAgICAgICBzICE9IG51bGwgJiYgKGNvbG9yWzFdID0gcGFyc2VDc3NGbG9hdChzKSk7XG4gICAgICAgIGwgIT0gbnVsbCAmJiAoY29sb3JbMl0gPSBwYXJzZUNzc0Zsb2F0KGwpKTtcblxuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KGhzbGEycmdiYShjb2xvciksICdyZ2JhJyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxuICogQHBhcmFtIHtudW1iZXI9fSBhbHBoYSAwIH4gMVxuICogQHJldHVybiB7c3RyaW5nfSBDb2xvciBzdHJpbmcgaW4gcmdiYSBmb3JtYXQuXG4gKiBAbWVtYmVyT2YgbW9kdWxlOnpyZW5kZXIvdXRpbC9jb2xvclxuICovXG5leHBvcnQgZnVuY3Rpb24gbW9kaWZ5QWxwaGEoY29sb3IsIGFscGhhKSB7XG4gICAgY29sb3IgPSBwYXJzZShjb2xvcik7XG5cbiAgICBpZiAoY29sb3IgJiYgYWxwaGEgIT0gbnVsbCkge1xuICAgICAgICBjb2xvclszXSA9IGNsYW1wQ3NzRmxvYXQoYWxwaGEpO1xuICAgICAgICByZXR1cm4gc3RyaW5naWZ5KGNvbG9yLCAncmdiYScpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBhcnJDb2xvciBsaWtlIFsxMiwzMyw0NCwwLjRdXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSAncmdiYScsICdoc3ZhJywgLi4uXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJlc3VsdCBjb2xvci4gKElmIGlucHV0IGlsbGVnYWwsIHJldHVybiB1bmRlZmluZWQpLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaW5naWZ5KGFyckNvbG9yLCB0eXBlKSB7XG4gICAgaWYgKCFhcnJDb2xvciB8fCAhYXJyQ29sb3IubGVuZ3RoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGNvbG9yU3RyID0gYXJyQ29sb3JbMF0gKyAnLCcgKyBhcnJDb2xvclsxXSArICcsJyArIGFyckNvbG9yWzJdO1xuICAgIGlmICh0eXBlID09PSAncmdiYScgfHwgdHlwZSA9PT0gJ2hzdmEnIHx8IHR5cGUgPT09ICdoc2xhJykge1xuICAgICAgICBjb2xvclN0ciArPSAnLCcgKyBhcnJDb2xvclszXTtcbiAgICB9XG4gICAgcmV0dXJuIHR5cGUgKyAnKCcgKyBjb2xvclN0ciArICcpJztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL3Rvb2wvY29sb3IuanNcbi8vIG1vZHVsZSBpZCA9IDIxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///210\n");

/***/ }),
/* 211 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("// Simple LRU cache use doubly linked list\n// @module zrender/core/LRU\n\n/**\n * Simple double linked list. Compared with array, it has O(1) remove operation.\n * @constructor\n */\nvar LinkedList = function () {\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.head = null;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.tail = null;\n\n    this._len = 0;\n};\n\nvar linkedListProto = LinkedList.prototype;\n/**\n * Insert a new value at the tail\n * @param  {} val\n * @return {module:zrender/core/LRU~Entry}\n */\nlinkedListProto.insert = function (val) {\n    var entry = new Entry(val);\n    this.insertEntry(entry);\n    return entry;\n};\n\n/**\n * Insert an entry at the tail\n * @param  {module:zrender/core/LRU~Entry} entry\n */\nlinkedListProto.insertEntry = function (entry) {\n    if (!this.head) {\n        this.head = this.tail = entry;\n    }\n    else {\n        this.tail.next = entry;\n        entry.prev = this.tail;\n        entry.next = null;\n        this.tail = entry;\n    }\n    this._len++;\n};\n\n/**\n * Remove entry.\n * @param  {module:zrender/core/LRU~Entry} entry\n */\nlinkedListProto.remove = function (entry) {\n    var prev = entry.prev;\n    var next = entry.next;\n    if (prev) {\n        prev.next = next;\n    }\n    else {\n        // Is head\n        this.head = next;\n    }\n    if (next) {\n        next.prev = prev;\n    }\n    else {\n        // Is tail\n        this.tail = prev;\n    }\n    entry.next = entry.prev = null;\n    this._len--;\n};\n\n/**\n * @return {number}\n */\nlinkedListProto.len = function () {\n    return this._len;\n};\n\n/**\n * Clear list\n */\nlinkedListProto.clear = function () {\n    this.head = this.tail = null;\n    this._len = 0;\n};\n\n/**\n * @constructor\n * @param {} val\n */\nvar Entry = function (val) {\n    /**\n     * @type {}\n     */\n    this.value = val;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.next;\n\n    /**\n     * @type {module:zrender/core/LRU~Entry}\n     */\n    this.prev;\n};\n\n/**\n * LRU Cache\n * @constructor\n * @alias module:zrender/core/LRU\n */\nvar LRU = function (maxSize) {\n\n    this._list = new LinkedList();\n\n    this._map = {};\n\n    this._maxSize = maxSize || 10;\n\n    this._lastRemovedEntry = null;\n};\n\nvar LRUProto = LRU.prototype;\n\n/**\n * @param  {string} key\n * @param  {} value\n * @return {} Removed value\n */\nLRUProto.put = function (key, value) {\n    var list = this._list;\n    var map = this._map;\n    var removed = null;\n    if (map[key] == null) {\n        var len = list.len();\n        // Reuse last removed entry\n        var entry = this._lastRemovedEntry;\n\n        if (len >= this._maxSize && len > 0) {\n            // Remove the least recently used\n            var leastUsedEntry = list.head;\n            list.remove(leastUsedEntry);\n            delete map[leastUsedEntry.key];\n\n            removed = leastUsedEntry.value;\n            this._lastRemovedEntry = leastUsedEntry;\n        }\n\n        if (entry) {\n            entry.value = value;\n        }\n        else {\n            entry = new Entry(value);\n        }\n        entry.key = key;\n        list.insertEntry(entry);\n        map[key] = entry;\n    }\n\n    return removed;\n};\n\n/**\n * @param  {string} key\n * @return {}\n */\nLRUProto.get = function (key) {\n    var entry = this._map[key];\n    var list = this._list;\n    if (entry != null) {\n        // Put the latest used entry in the tail\n        if (entry !== list.tail) {\n            list.remove(entry);\n            list.insertEntry(entry);\n        }\n\n        return entry.value;\n    }\n};\n\n/**\n * Clear the cache\n */\nLRUProto.clear = function () {\n    this._list.clear();\n    this._map = {};\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (LRU);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjExLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL2NvcmUvTFJVLmpzP2RjOTkiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU2ltcGxlIExSVSBjYWNoZSB1c2UgZG91Ymx5IGxpbmtlZCBsaXN0XG4vLyBAbW9kdWxlIHpyZW5kZXIvY29yZS9MUlVcblxuLyoqXG4gKiBTaW1wbGUgZG91YmxlIGxpbmtlZCBsaXN0LiBDb21wYXJlZCB3aXRoIGFycmF5LCBpdCBoYXMgTygxKSByZW1vdmUgb3BlcmF0aW9uLlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbnZhciBMaW5rZWRMaXN0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgLyoqXG4gICAgICogQHR5cGUge21vZHVsZTp6cmVuZGVyL2NvcmUvTFJVfkVudHJ5fVxuICAgICAqL1xuICAgIHRoaXMuaGVhZCA9IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29yZS9MUlV+RW50cnl9XG4gICAgICovXG4gICAgdGhpcy50YWlsID0gbnVsbDtcblxuICAgIHRoaXMuX2xlbiA9IDA7XG59O1xuXG52YXIgbGlua2VkTGlzdFByb3RvID0gTGlua2VkTGlzdC5wcm90b3R5cGU7XG4vKipcbiAqIEluc2VydCBhIG5ldyB2YWx1ZSBhdCB0aGUgdGFpbFxuICogQHBhcmFtICB7fSB2YWxcbiAqIEByZXR1cm4ge21vZHVsZTp6cmVuZGVyL2NvcmUvTFJVfkVudHJ5fVxuICovXG5saW5rZWRMaXN0UHJvdG8uaW5zZXJ0ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIHZhciBlbnRyeSA9IG5ldyBFbnRyeSh2YWwpO1xuICAgIHRoaXMuaW5zZXJ0RW50cnkoZW50cnkpO1xuICAgIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogSW5zZXJ0IGFuIGVudHJ5IGF0IHRoZSB0YWlsXG4gKiBAcGFyYW0gIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX0gZW50cnlcbiAqL1xubGlua2VkTGlzdFByb3RvLmluc2VydEVudHJ5ID0gZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgaWYgKCF0aGlzLmhlYWQpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gZW50cnk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICB0aGlzLnRhaWwubmV4dCA9IGVudHJ5O1xuICAgICAgICBlbnRyeS5wcmV2ID0gdGhpcy50YWlsO1xuICAgICAgICBlbnRyeS5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWlsID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMuX2xlbisrO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgZW50cnkuXG4gKiBAcGFyYW0gIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX0gZW50cnlcbiAqL1xubGlua2VkTGlzdFByb3RvLnJlbW92ZSA9IGZ1bmN0aW9uIChlbnRyeSkge1xuICAgIHZhciBwcmV2ID0gZW50cnkucHJldjtcbiAgICB2YXIgbmV4dCA9IGVudHJ5Lm5leHQ7XG4gICAgaWYgKHByZXYpIHtcbiAgICAgICAgcHJldi5uZXh0ID0gbmV4dDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIGhlYWRcbiAgICAgICAgdGhpcy5oZWFkID0gbmV4dDtcbiAgICB9XG4gICAgaWYgKG5leHQpIHtcbiAgICAgICAgbmV4dC5wcmV2ID0gcHJldjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIC8vIElzIHRhaWxcbiAgICAgICAgdGhpcy50YWlsID0gcHJldjtcbiAgICB9XG4gICAgZW50cnkubmV4dCA9IGVudHJ5LnByZXYgPSBudWxsO1xuICAgIHRoaXMuX2xlbi0tO1xufTtcblxuLyoqXG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbmxpbmtlZExpc3RQcm90by5sZW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xlbjtcbn07XG5cbi8qKlxuICogQ2xlYXIgbGlzdFxuICovXG5saW5rZWRMaXN0UHJvdG8uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICB0aGlzLl9sZW4gPSAwO1xufTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7fSB2YWxcbiAqL1xudmFyIEVudHJ5ID0gZnVuY3Rpb24gKHZhbCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlIHt9XG4gICAgICovXG4gICAgdGhpcy52YWx1ZSA9IHZhbDtcblxuICAgIC8qKlxuICAgICAqIEB0eXBlIHttb2R1bGU6enJlbmRlci9jb3JlL0xSVX5FbnRyeX1cbiAgICAgKi9cbiAgICB0aGlzLm5leHQ7XG5cbiAgICAvKipcbiAgICAgKiBAdHlwZSB7bW9kdWxlOnpyZW5kZXIvY29yZS9MUlV+RW50cnl9XG4gICAgICovXG4gICAgdGhpcy5wcmV2O1xufTtcblxuLyoqXG4gKiBMUlUgQ2FjaGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQGFsaWFzIG1vZHVsZTp6cmVuZGVyL2NvcmUvTFJVXG4gKi9cbnZhciBMUlUgPSBmdW5jdGlvbiAobWF4U2l6ZSkge1xuXG4gICAgdGhpcy5fbGlzdCA9IG5ldyBMaW5rZWRMaXN0KCk7XG5cbiAgICB0aGlzLl9tYXAgPSB7fTtcblxuICAgIHRoaXMuX21heFNpemUgPSBtYXhTaXplIHx8IDEwO1xuXG4gICAgdGhpcy5fbGFzdFJlbW92ZWRFbnRyeSA9IG51bGw7XG59O1xuXG52YXIgTFJVUHJvdG8gPSBMUlUucHJvdG90eXBlO1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcGFyYW0gIHt9IHZhbHVlXG4gKiBAcmV0dXJuIHt9IFJlbW92ZWQgdmFsdWVcbiAqL1xuTFJVUHJvdG8ucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICB2YXIgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgdmFyIG1hcCA9IHRoaXMuX21hcDtcbiAgICB2YXIgcmVtb3ZlZCA9IG51bGw7XG4gICAgaWYgKG1hcFtrZXldID09IG51bGwpIHtcbiAgICAgICAgdmFyIGxlbiA9IGxpc3QubGVuKCk7XG4gICAgICAgIC8vIFJldXNlIGxhc3QgcmVtb3ZlZCBlbnRyeVxuICAgICAgICB2YXIgZW50cnkgPSB0aGlzLl9sYXN0UmVtb3ZlZEVudHJ5O1xuXG4gICAgICAgIGlmIChsZW4gPj0gdGhpcy5fbWF4U2l6ZSAmJiBsZW4gPiAwKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWRcbiAgICAgICAgICAgIHZhciBsZWFzdFVzZWRFbnRyeSA9IGxpc3QuaGVhZDtcbiAgICAgICAgICAgIGxpc3QucmVtb3ZlKGxlYXN0VXNlZEVudHJ5KTtcbiAgICAgICAgICAgIGRlbGV0ZSBtYXBbbGVhc3RVc2VkRW50cnkua2V5XTtcblxuICAgICAgICAgICAgcmVtb3ZlZCA9IGxlYXN0VXNlZEVudHJ5LnZhbHVlO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFJlbW92ZWRFbnRyeSA9IGxlYXN0VXNlZEVudHJ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgZW50cnkgPSBuZXcgRW50cnkodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVudHJ5LmtleSA9IGtleTtcbiAgICAgICAgbGlzdC5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgIG1hcFtrZXldID0gZW50cnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlbW92ZWQ7XG59O1xuXG4vKipcbiAqIEBwYXJhbSAge3N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHt9XG4gKi9cbkxSVVByb3RvLmdldCA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgZW50cnkgPSB0aGlzLl9tYXBba2V5XTtcbiAgICB2YXIgbGlzdCA9IHRoaXMuX2xpc3Q7XG4gICAgaWYgKGVudHJ5ICE9IG51bGwpIHtcbiAgICAgICAgLy8gUHV0IHRoZSBsYXRlc3QgdXNlZCBlbnRyeSBpbiB0aGUgdGFpbFxuICAgICAgICBpZiAoZW50cnkgIT09IGxpc3QudGFpbCkge1xuICAgICAgICAgICAgbGlzdC5yZW1vdmUoZW50cnkpO1xuICAgICAgICAgICAgbGlzdC5pbnNlcnRFbnRyeShlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gICAgfVxufTtcblxuLyoqXG4gKiBDbGVhciB0aGUgY2FjaGVcbiAqL1xuTFJVUHJvdG8uY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5fbGlzdC5jbGVhcigpO1xuICAgIHRoaXMuX21hcCA9IHt9O1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTFJVO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL3pyZW5kZXIvc3JjL2NvcmUvTFJVLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///211\n");

/***/ }),
/* 212 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("function TextureUI(parent, object, key, params) {\n    ControlKit.ObjectComponent.apply(this, arguments);\n\n    this._object = object;\n    this._key = key;\n\n    this._onChange = params.onChange || function () {};\n    this._getFileNameByURL = params.getFileName || function (url) { return url; };\n\n    var self = this;\n\n    var wrap = this._wrapNode;\n    wrap.setStyleClass('texture-wrap');\n\n    var img = document.createElement('img');\n    var deleteEl = document.createElement('div');\n    deleteEl.className = 'texture-delete button';\n    var uploadEl = document.createElement('div');\n    uploadEl.className = 'texture-upload button';\n\n    this._img = img;\n    this._uploadEl = uploadEl;\n\n    wrap.getElement().appendChild(img);\n    wrap.getElement().appendChild(uploadEl);\n    wrap.getElement().appendChild(deleteEl);\n\n    this.update();\n\n    var liEl = this._wrapNode.getParent().getElement();\n\n    function uploadFiles(files) {\n        var imgFile = files.filter(function (file) {\n            return file.type.match(/image/);\n        })[0];\n\n        if (imgFile) {\n            object[key] = URL.createObjectURL(imgFile);\n\n            self._onChange(imgFile, object[key]);\n\n            self.update();\n        }\n    }\n    FileAPI.event.dnd(liEl, function (over) {\n        over ? liEl.classList.add('drag-hover')\n            : liEl.classList.remove('drag-hover');\n    }, function (files) {\n        uploadFiles(files);\n    });\n\n    // Clear\n    deleteEl.addEventListener('click', function () {\n        object[key] = 'none';\n        self.update();\n        self._onChange(null, 'none');\n    });\n    uploadEl.addEventListener('click', function () {\n        var el = document.createElement('input');\n        el.type = 'file';\n        el.onchange = function (e) {\n            uploadFiles(Array.prototype.slice.call(el.files));\n        };\n        el.click();\n    });\n}\n\nTextureUI.prototype = Object.create(ControlKit.ObjectComponent.prototype);\nTextureUI.prototype.constructor = TextureUI;\n\nTextureUI.prototype.update = function () {\n    var value = this._object[this._key];\n    this._img.src = value && value.toLowerCase() !== 'none' ? value : './img/chessboard.jpg';\n    this._img.style.opacity = (value && value !== 'none') ? 1 : 0.5;\n\n    var text = this._getFileNameByURL(value) || value || 'none';;\n    this._uploadEl.innerHTML = text;\n    this._uploadEl.title = text;\n};\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (TextureUI);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL3VpL1RleHR1cmUuanM/NjRmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBUZXh0dXJlVUkocGFyZW50LCBvYmplY3QsIGtleSwgcGFyYW1zKSB7XG4gICAgQ29udHJvbEtpdC5PYmplY3RDb21wb25lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHRoaXMuX29iamVjdCA9IG9iamVjdDtcbiAgICB0aGlzLl9rZXkgPSBrZXk7XG5cbiAgICB0aGlzLl9vbkNoYW5nZSA9IHBhcmFtcy5vbkNoYW5nZSB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLl9nZXRGaWxlTmFtZUJ5VVJMID0gcGFyYW1zLmdldEZpbGVOYW1lIHx8IGZ1bmN0aW9uICh1cmwpIHsgcmV0dXJuIHVybDsgfTtcblxuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciB3cmFwID0gdGhpcy5fd3JhcE5vZGU7XG4gICAgd3JhcC5zZXRTdHlsZUNsYXNzKCd0ZXh0dXJlLXdyYXAnKTtcblxuICAgIHZhciBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICB2YXIgZGVsZXRlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBkZWxldGVFbC5jbGFzc05hbWUgPSAndGV4dHVyZS1kZWxldGUgYnV0dG9uJztcbiAgICB2YXIgdXBsb2FkRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB1cGxvYWRFbC5jbGFzc05hbWUgPSAndGV4dHVyZS11cGxvYWQgYnV0dG9uJztcblxuICAgIHRoaXMuX2ltZyA9IGltZztcbiAgICB0aGlzLl91cGxvYWRFbCA9IHVwbG9hZEVsO1xuXG4gICAgd3JhcC5nZXRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoaW1nKTtcbiAgICB3cmFwLmdldEVsZW1lbnQoKS5hcHBlbmRDaGlsZCh1cGxvYWRFbCk7XG4gICAgd3JhcC5nZXRFbGVtZW50KCkuYXBwZW5kQ2hpbGQoZGVsZXRlRWwpO1xuXG4gICAgdGhpcy51cGRhdGUoKTtcblxuICAgIHZhciBsaUVsID0gdGhpcy5fd3JhcE5vZGUuZ2V0UGFyZW50KCkuZ2V0RWxlbWVudCgpO1xuXG4gICAgZnVuY3Rpb24gdXBsb2FkRmlsZXMoZmlsZXMpIHtcbiAgICAgICAgdmFyIGltZ0ZpbGUgPSBmaWxlcy5maWx0ZXIoZnVuY3Rpb24gKGZpbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmaWxlLnR5cGUubWF0Y2goL2ltYWdlLyk7XG4gICAgICAgIH0pWzBdO1xuXG4gICAgICAgIGlmIChpbWdGaWxlKSB7XG4gICAgICAgICAgICBvYmplY3Rba2V5XSA9IFVSTC5jcmVhdGVPYmplY3RVUkwoaW1nRmlsZSk7XG5cbiAgICAgICAgICAgIHNlbGYuX29uQ2hhbmdlKGltZ0ZpbGUsIG9iamVjdFtrZXldKTtcblxuICAgICAgICAgICAgc2VsZi51cGRhdGUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBGaWxlQVBJLmV2ZW50LmRuZChsaUVsLCBmdW5jdGlvbiAob3Zlcikge1xuICAgICAgICBvdmVyID8gbGlFbC5jbGFzc0xpc3QuYWRkKCdkcmFnLWhvdmVyJylcbiAgICAgICAgICAgIDogbGlFbC5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnLWhvdmVyJyk7XG4gICAgfSwgZnVuY3Rpb24gKGZpbGVzKSB7XG4gICAgICAgIHVwbG9hZEZpbGVzKGZpbGVzKTtcbiAgICB9KTtcblxuICAgIC8vIENsZWFyXG4gICAgZGVsZXRlRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9iamVjdFtrZXldID0gJ25vbmUnO1xuICAgICAgICBzZWxmLnVwZGF0ZSgpO1xuICAgICAgICBzZWxmLl9vbkNoYW5nZShudWxsLCAnbm9uZScpO1xuICAgIH0pO1xuICAgIHVwbG9hZEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBlbC50eXBlID0gJ2ZpbGUnO1xuICAgICAgICBlbC5vbmNoYW5nZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB1cGxvYWRGaWxlcyhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlbC5maWxlcykpO1xuICAgICAgICB9O1xuICAgICAgICBlbC5jbGljaygpO1xuICAgIH0pO1xufVxuXG5UZXh0dXJlVUkucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDb250cm9sS2l0Lk9iamVjdENvbXBvbmVudC5wcm90b3R5cGUpO1xuVGV4dHVyZVVJLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFRleHR1cmVVSTtcblxuVGV4dHVyZVVJLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5fb2JqZWN0W3RoaXMuX2tleV07XG4gICAgdGhpcy5faW1nLnNyYyA9IHZhbHVlICYmIHZhbHVlLnRvTG93ZXJDYXNlKCkgIT09ICdub25lJyA/IHZhbHVlIDogJy4vaW1nL2NoZXNzYm9hcmQuanBnJztcbiAgICB0aGlzLl9pbWcuc3R5bGUub3BhY2l0eSA9ICh2YWx1ZSAmJiB2YWx1ZSAhPT0gJ25vbmUnKSA/IDEgOiAwLjU7XG5cbiAgICB2YXIgdGV4dCA9IHRoaXMuX2dldEZpbGVOYW1lQnlVUkwodmFsdWUpIHx8IHZhbHVlIHx8ICdub25lJzs7XG4gICAgdGhpcy5fdXBsb2FkRWwuaW5uZXJIVE1MID0gdGV4dDtcbiAgICB0aGlzLl91cGxvYWRFbC50aXRsZSA9IHRleHQ7XG59O1xuXG5cbmV4cG9ydCBkZWZhdWx0IFRleHR1cmVVSTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy91aS9UZXh0dXJlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///212\n");

/***/ }),
/* 213 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("Object.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__categorical_category10_js__ = __webpack_require__(214);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeCategory10\", function() { return __WEBPACK_IMPORTED_MODULE_0__categorical_category10_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__categorical_Accent_js__ = __webpack_require__(215);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeAccent\", function() { return __WEBPACK_IMPORTED_MODULE_1__categorical_Accent_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__categorical_Dark2_js__ = __webpack_require__(216);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeDark2\", function() { return __WEBPACK_IMPORTED_MODULE_2__categorical_Dark2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__categorical_Paired_js__ = __webpack_require__(217);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePaired\", function() { return __WEBPACK_IMPORTED_MODULE_3__categorical_Paired_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__categorical_Pastel1_js__ = __webpack_require__(218);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePastel1\", function() { return __WEBPACK_IMPORTED_MODULE_4__categorical_Pastel1_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__categorical_Pastel2_js__ = __webpack_require__(219);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePastel2\", function() { return __WEBPACK_IMPORTED_MODULE_5__categorical_Pastel2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__categorical_Set1_js__ = __webpack_require__(220);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet1\", function() { return __WEBPACK_IMPORTED_MODULE_6__categorical_Set1_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__categorical_Set2_js__ = __webpack_require__(221);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet2\", function() { return __WEBPACK_IMPORTED_MODULE_7__categorical_Set2_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__categorical_Set3_js__ = __webpack_require__(222);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSet3\", function() { return __WEBPACK_IMPORTED_MODULE_8__categorical_Set3_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__categorical_Tableau10_js__ = __webpack_require__(223);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeTableau10\", function() { return __WEBPACK_IMPORTED_MODULE_9__categorical_Tableau10_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__ = __webpack_require__(224);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBrBG\", function() { return __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBrBG\", function() { return __WEBPACK_IMPORTED_MODULE_10__diverging_BrBG_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__ = __webpack_require__(240);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePRGn\", function() { return __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePRGn\", function() { return __WEBPACK_IMPORTED_MODULE_11__diverging_PRGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__ = __webpack_require__(241);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePiYG\", function() { return __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePiYG\", function() { return __WEBPACK_IMPORTED_MODULE_12__diverging_PiYG_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__ = __webpack_require__(242);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuOr\", function() { return __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuOr\", function() { return __WEBPACK_IMPORTED_MODULE_13__diverging_PuOr_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__ = __webpack_require__(243);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdBu\", function() { return __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdBu\", function() { return __WEBPACK_IMPORTED_MODULE_14__diverging_RdBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__ = __webpack_require__(244);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdGy\", function() { return __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdGy\", function() { return __WEBPACK_IMPORTED_MODULE_15__diverging_RdGy_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__ = __webpack_require__(245);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdYlBu\", function() { return __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdYlBu\", function() { return __WEBPACK_IMPORTED_MODULE_16__diverging_RdYlBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__ = __webpack_require__(246);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_17__diverging_RdYlGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__ = __webpack_require__(247);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateSpectral\", function() { return __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeSpectral\", function() { return __WEBPACK_IMPORTED_MODULE_18__diverging_Spectral_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__ = __webpack_require__(248);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_19__sequential_multi_BuGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__ = __webpack_require__(249);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBuPu\", function() { return __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBuPu\", function() { return __WEBPACK_IMPORTED_MODULE_20__sequential_multi_BuPu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__ = __webpack_require__(250);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_21__sequential_multi_GnBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__ = __webpack_require__(251);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_22__sequential_multi_OrRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__ = __webpack_require__(252);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuBuGn\", function() { return __WEBPACK_IMPORTED_MODULE_23__sequential_multi_PuBuGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__ = __webpack_require__(253);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuBu\", function() { return __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuBu\", function() { return __WEBPACK_IMPORTED_MODULE_24__sequential_multi_PuBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__ = __webpack_require__(254);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePuRd\", function() { return __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePuRd\", function() { return __WEBPACK_IMPORTED_MODULE_25__sequential_multi_PuRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__ = __webpack_require__(255);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRdPu\", function() { return __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeRdPu\", function() { return __WEBPACK_IMPORTED_MODULE_26__sequential_multi_RdPu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__ = __webpack_require__(256);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlGnBu\", function() { return __WEBPACK_IMPORTED_MODULE_27__sequential_multi_YlGnBu_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__ = __webpack_require__(257);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlGn\", function() { return __WEBPACK_IMPORTED_MODULE_28__sequential_multi_YlGn_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__ = __webpack_require__(258);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlOrBr\", function() { return __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlOrBr\", function() { return __WEBPACK_IMPORTED_MODULE_29__sequential_multi_YlOrBr_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__ = __webpack_require__(259);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateYlOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeYlOrRd\", function() { return __WEBPACK_IMPORTED_MODULE_30__sequential_multi_YlOrRd_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__ = __webpack_require__(260);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateBlues\", function() { return __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeBlues\", function() { return __WEBPACK_IMPORTED_MODULE_31__sequential_single_Blues_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__ = __webpack_require__(261);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGreens\", function() { return __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGreens\", function() { return __WEBPACK_IMPORTED_MODULE_32__sequential_single_Greens_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__ = __webpack_require__(262);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateGreys\", function() { return __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeGreys\", function() { return __WEBPACK_IMPORTED_MODULE_33__sequential_single_Greys_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__ = __webpack_require__(263);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePurples\", function() { return __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemePurples\", function() { return __WEBPACK_IMPORTED_MODULE_34__sequential_single_Purples_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__ = __webpack_require__(264);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateReds\", function() { return __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeReds\", function() { return __WEBPACK_IMPORTED_MODULE_35__sequential_single_Reds_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__ = __webpack_require__(265);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateOranges\", function() { return __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"schemeOranges\", function() { return __WEBPACK_IMPORTED_MODULE_36__sequential_single_Oranges_js__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__sequential_multi_cividis_js__ = __webpack_require__(266);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCividis\", function() { return __WEBPACK_IMPORTED_MODULE_37__sequential_multi_cividis_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__sequential_multi_cubehelix_js__ = __webpack_require__(267);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCubehelixDefault\", function() { return __WEBPACK_IMPORTED_MODULE_38__sequential_multi_cubehelix_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__ = __webpack_require__(268);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateRainbow\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateWarm\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateCool\", function() { return __WEBPACK_IMPORTED_MODULE_39__sequential_multi_rainbow_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__sequential_multi_sinebow_js__ = __webpack_require__(269);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateSinebow\", function() { return __WEBPACK_IMPORTED_MODULE_40__sequential_multi_sinebow_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__sequential_multi_turbo_js__ = __webpack_require__(270);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateTurbo\", function() { return __WEBPACK_IMPORTED_MODULE_41__sequential_multi_turbo_js__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__ = __webpack_require__(271);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateViridis\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateMagma\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"c\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolateInferno\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"b\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"interpolatePlasma\", function() { return __WEBPACK_IMPORTED_MODULE_42__sequential_multi_viridis_js__[\"d\"]; });\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvaW5kZXguanM/YmJhNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lQ2F0ZWdvcnkxMH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvY2F0ZWdvcnkxMC5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZUFjY2VudH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvQWNjZW50LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lRGFyazJ9IGZyb20gXCIuL2NhdGVnb3JpY2FsL0RhcmsyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lUGFpcmVkfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9QYWlyZWQuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBzY2hlbWVQYXN0ZWwxfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9QYXN0ZWwxLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lUGFzdGVsMn0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvUGFzdGVsMi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZVNldDF9IGZyb20gXCIuL2NhdGVnb3JpY2FsL1NldDEuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBzY2hlbWVTZXQyfSBmcm9tIFwiLi9jYXRlZ29yaWNhbC9TZXQyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgc2NoZW1lU2V0M30gZnJvbSBcIi4vY2F0ZWdvcmljYWwvU2V0My5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIHNjaGVtZVRhYmxlYXUxMH0gZnJvbSBcIi4vY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCckJHLCBzY2hlbWUgYXMgc2NoZW1lQnJCR30gZnJvbSBcIi4vZGl2ZXJnaW5nL0JyQkcuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVBSR24sIHNjaGVtZSBhcyBzY2hlbWVQUkdufSBmcm9tIFwiLi9kaXZlcmdpbmcvUFJHbi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUGlZRywgc2NoZW1lIGFzIHNjaGVtZVBpWUd9IGZyb20gXCIuL2RpdmVyZ2luZy9QaVlHLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdU9yLCBzY2hlbWUgYXMgc2NoZW1lUHVPcn0gZnJvbSBcIi4vZGl2ZXJnaW5nL1B1T3IuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVJkQnUsIHNjaGVtZSBhcyBzY2hlbWVSZEJ1fSBmcm9tIFwiLi9kaXZlcmdpbmcvUmRCdS5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUmRHeSwgc2NoZW1lIGFzIHNjaGVtZVJkR3l9IGZyb20gXCIuL2RpdmVyZ2luZy9SZEd5LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZFlsQnUsIHNjaGVtZSBhcyBzY2hlbWVSZFlsQnV9IGZyb20gXCIuL2RpdmVyZ2luZy9SZFlsQnUuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZVJkWWxHbiwgc2NoZW1lIGFzIHNjaGVtZVJkWWxHbn0gZnJvbSBcIi4vZGl2ZXJnaW5nL1JkWWxHbi5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlU3BlY3RyYWwsIHNjaGVtZSBhcyBzY2hlbWVTcGVjdHJhbH0gZnJvbSBcIi4vZGl2ZXJnaW5nL1NwZWN0cmFsLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCdUduLCBzY2hlbWUgYXMgc2NoZW1lQnVHbn0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCdVB1LCBzY2hlbWUgYXMgc2NoZW1lQnVQdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVHbkJ1LCBzY2hlbWUgYXMgc2NoZW1lR25CdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVPclJkLCBzY2hlbWUgYXMgc2NoZW1lT3JSZH0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdUJ1R24sIHNjaGVtZSBhcyBzY2hlbWVQdUJ1R259IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvUHVCdUduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdUJ1LCBzY2hlbWUgYXMgc2NoZW1lUHVCdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdVJkLCBzY2hlbWUgYXMgc2NoZW1lUHVSZH0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSZFB1LCBzY2hlbWUgYXMgc2NoZW1lUmRQdX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbEduQnUsIHNjaGVtZSBhcyBzY2hlbWVZbEduQnV9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxHbkJ1LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbEduLCBzY2hlbWUgYXMgc2NoZW1lWWxHbn0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbE9yQnIsIHNjaGVtZSBhcyBzY2hlbWVZbE9yQnJ9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxPckJyLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVZbE9yUmQsIHNjaGVtZSBhcyBzY2hlbWVZbE9yUmR9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvWWxPclJkLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVCbHVlcywgc2NoZW1lIGFzIHNjaGVtZUJsdWVzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9CbHVlcy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlR3JlZW5zLCBzY2hlbWUgYXMgc2NoZW1lR3JlZW5zfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9HcmVlbnMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUdyZXlzLCBzY2hlbWUgYXMgc2NoZW1lR3JleXN9IGZyb20gXCIuL3NlcXVlbnRpYWwtc2luZ2xlL0dyZXlzLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVQdXJwbGVzLCBzY2hlbWUgYXMgc2NoZW1lUHVycGxlc30gZnJvbSBcIi4vc2VxdWVudGlhbC1zaW5nbGUvUHVycGxlcy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlUmVkcywgc2NoZW1lIGFzIHNjaGVtZVJlZHN9IGZyb20gXCIuL3NlcXVlbnRpYWwtc2luZ2xlL1JlZHMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZU9yYW5nZXMsIHNjaGVtZSBhcyBzY2hlbWVPcmFuZ2VzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLXNpbmdsZS9PcmFuZ2VzLmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVDaXZpZGlzfSBmcm9tIFwiLi9zZXF1ZW50aWFsLW11bHRpL2NpdmlkaXMuanNcIjtcbmV4cG9ydCB7ZGVmYXVsdCBhcyBpbnRlcnBvbGF0ZUN1YmVoZWxpeERlZmF1bHR9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvY3ViZWhlbGl4LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVSYWluYm93LCB3YXJtIGFzIGludGVycG9sYXRlV2FybSwgY29vbCBhcyBpbnRlcnBvbGF0ZUNvb2x9IGZyb20gXCIuL3NlcXVlbnRpYWwtbXVsdGkvcmFpbmJvdy5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlU2luZWJvd30gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzXCI7XG5leHBvcnQge2RlZmF1bHQgYXMgaW50ZXJwb2xhdGVUdXJib30gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS90dXJiby5qc1wiO1xuZXhwb3J0IHtkZWZhdWx0IGFzIGludGVycG9sYXRlVmlyaWRpcywgbWFnbWEgYXMgaW50ZXJwb2xhdGVNYWdtYSwgaW5mZXJubyBhcyBpbnRlcnBvbGF0ZUluZmVybm8sIHBsYXNtYSBhcyBpbnRlcnBvbGF0ZVBsYXNtYX0gZnJvbSBcIi4vc2VxdWVudGlhbC1tdWx0aS92aXJpZGlzLmpzXCI7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2luZGV4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///213\n");

/***/ }),
/* 214 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvY2F0ZWdvcnkxMC5qcz9iODJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCIxZjc3YjRmZjdmMGUyY2EwMmNkNjI3Mjg5NDY3YmQ4YzU2NGJlMzc3YzI3ZjdmN2ZiY2JkMjIxN2JlY2ZcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL2NhdGVnb3J5MTAuanNcbi8vIG1vZHVsZSBpZCA9IDIxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///214\n");

/***/ }),
/* 215 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvQWNjZW50LmpzPzBkMmEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcIjdmYzk3ZmJlYWVkNGZkYzA4NmZmZmY5OTM4NmNiMGYwMDI3ZmJmNWIxNzY2NjY2NlwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvQWNjZW50LmpzXG4vLyBtb2R1bGUgaWQgPSAyMTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///215\n");

/***/ }),
/* 216 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvRGFyazIuanM/MTNlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY29sb3JzKFwiMWI5ZTc3ZDk1ZjAyNzU3MGIzZTcyOThhNjZhNjFlZTZhYjAyYTY3NjFkNjY2NjY2XCIpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9jYXRlZ29yaWNhbC9EYXJrMi5qc1xuLy8gbW9kdWxlIGlkID0gMjE2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///216\n");

/***/ }),
/* 217 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFpcmVkLmpzPzA4YzkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcImE2Y2VlMzFmNzhiNGIyZGY4YTMzYTAyY2ZiOWE5OWUzMWExY2ZkYmY2ZmZmN2YwMGNhYjJkNjZhM2Q5YWZmZmY5OWIxNTkyOFwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFpcmVkLmpzXG4vLyBtb2R1bGUgaWQgPSAyMTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///217\n");

/***/ }),
/* 218 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFzdGVsMS5qcz84OTMwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJmYmI0YWViM2NkZTNjY2ViYzVkZWNiZTRmZWQ5YTZmZmZmY2NlNWQ4YmRmZGRhZWNmMmYyZjJcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1Bhc3RlbDEuanNcbi8vIG1vZHVsZSBpZCA9IDIxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///218\n");

/***/ }),
/* 219 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjE5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvUGFzdGVsMi5qcz82MTAyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJiM2UyY2RmZGNkYWNjYmQ1ZThmNGNhZTRlNmY1YzlmZmYyYWVmMWUyY2NjY2NjY2NcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1Bhc3RlbDIuanNcbi8vIG1vZHVsZSBpZCA9IDIxOVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///219\n");

/***/ }),
/* 220 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0MS5qcz9kMjc2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCJlNDFhMWMzNzdlYjg0ZGFmNGE5ODRlYTNmZjdmMDBmZmZmMzNhNjU2MjhmNzgxYmY5OTk5OTlcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDEuanNcbi8vIG1vZHVsZSBpZCA9IDIyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///220\n");

/***/ }),
/* 221 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0Mi5qcz9mNTMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCI2NmMyYTVmYzhkNjI4ZGEwY2JlNzhhYzNhNmQ4NTRmZmQ5MmZlNWM0OTRiM2IzYjNcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDIuanNcbi8vIG1vZHVsZSBpZCA9IDIyMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///221\n");

/***/ }),
/* 222 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvU2V0My5qcz80OTNjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xvcnMoXCI4ZGQzYzdmZmZmYjNiZWJhZGFmYjgwNzI4MGIxZDNmZGI0NjJiM2RlNjlmY2NkZTVkOWQ5ZDliYzgwYmRjY2ViYzVmZmVkNmZcIik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2NhdGVnb3JpY2FsL1NldDMuanNcbi8vIG1vZHVsZSBpZCA9IDIyMlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///222\n");

/***/ }),
/* 223 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzPzY3ZDkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNvbG9ycyhcIjRlNzlhN2YyOGUyY2UxNTc1OTc2YjdiMjU5YTE0ZmVkYzk0OWFmN2FhMWZmOWRhNzljNzU1ZmJhYjBhYlwiKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvY2F0ZWdvcmljYWwvVGFibGVhdTEwLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///223\n");

/***/ }),
/* 224 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL0JyQkcuanM/YmU1NSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJkOGIzNjVmNWY1ZjU1YWI0YWNcIixcbiAgXCJhNjYxMWFkZmMyN2Q4MGNkYzEwMTg1NzFcIixcbiAgXCJhNjYxMWFkZmMyN2RmNWY1ZjU4MGNkYzEwMTg1NzFcIixcbiAgXCI4YzUxMGFkOGIzNjVmNmU4YzNjN2VhZTU1YWI0YWMwMTY2NWVcIixcbiAgXCI4YzUxMGFkOGIzNjVmNmU4YzNmNWY1ZjVjN2VhZTU1YWI0YWMwMTY2NWVcIixcbiAgXCI4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWVcIixcbiAgXCI4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNmNWY1ZjVjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWVcIixcbiAgXCI1NDMwMDU4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWUwMDNjMzBcIixcbiAgXCI1NDMwMDU4YzUxMGFiZjgxMmRkZmMyN2RmNmU4YzNmNWY1ZjVjN2VhZTU4MGNkYzEzNTk3OGYwMTY2NWUwMDNjMzBcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvQnJCRy5qc1xuLy8gbW9kdWxlIGlkID0gMjI0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///224\n");

/***/ }),
/* 225 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export gray */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = lab;\n/* unused harmony export Lab */\n/* unused harmony export lch */\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = hcl;\n/* unused harmony export Hcl */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(115);\n\n\n\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"h\" /* rgbConvert */])(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nfunction gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nfunction lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nfunction Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Lab, lab, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */](\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * __WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* rad2deg */];\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nfunction lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * __WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* deg2rad */];\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Hcl, hcl, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9sYWIuanM/YWM5MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lLCB7ZXh0ZW5kfSBmcm9tIFwiLi9kZWZpbmVcIjtcbmltcG9ydCB7Q29sb3IsIHJnYkNvbnZlcnQsIFJnYn0gZnJvbSBcIi4vY29sb3JcIjtcbmltcG9ydCB7ZGVnMnJhZCwgcmFkMmRlZ30gZnJvbSBcIi4vbWF0aFwiO1xuXG4vLyBodHRwczovL29ic2VydmFibGVocS5jb20vQG1ib3N0b2NrL2xhYi1hbmQtcmdiXG52YXIgSyA9IDE4LFxuICAgIFhuID0gMC45NjQyMixcbiAgICBZbiA9IDEsXG4gICAgWm4gPSAwLjgyNTIxLFxuICAgIHQwID0gNCAvIDI5LFxuICAgIHQxID0gNiAvIDI5LFxuICAgIHQyID0gMyAqIHQxICogdDEsXG4gICAgdDMgPSB0MSAqIHQxICogdDE7XG5cbmZ1bmN0aW9uIGxhYkNvbnZlcnQobykge1xuICBpZiAobyBpbnN0YW5jZW9mIExhYikgcmV0dXJuIG5ldyBMYWIoby5sLCBvLmEsIG8uYiwgby5vcGFjaXR5KTtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIY2wpIHJldHVybiBoY2wybGFiKG8pO1xuICBpZiAoIShvIGluc3RhbmNlb2YgUmdiKSkgbyA9IHJnYkNvbnZlcnQobyk7XG4gIHZhciByID0gcmdiMmxyZ2Ioby5yKSxcbiAgICAgIGcgPSByZ2IybHJnYihvLmcpLFxuICAgICAgYiA9IHJnYjJscmdiKG8uYiksXG4gICAgICB5ID0geHl6MmxhYigoMC4yMjI1MDQ1ICogciArIDAuNzE2ODc4NiAqIGcgKyAwLjA2MDYxNjkgKiBiKSAvIFluKSwgeCwgejtcbiAgaWYgKHIgPT09IGcgJiYgZyA9PT0gYikgeCA9IHogPSB5OyBlbHNlIHtcbiAgICB4ID0geHl6MmxhYigoMC40MzYwNzQ3ICogciArIDAuMzg1MDY0OSAqIGcgKyAwLjE0MzA4MDQgKiBiKSAvIFhuKTtcbiAgICB6ID0geHl6MmxhYigoMC4wMTM5MzIyICogciArIDAuMDk3MTA0NSAqIGcgKyAwLjcxNDE3MzMgKiBiKSAvIFpuKTtcbiAgfVxuICByZXR1cm4gbmV3IExhYigxMTYgKiB5IC0gMTYsIDUwMCAqICh4IC0geSksIDIwMCAqICh5IC0geiksIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBncmF5KGwsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIG5ldyBMYWIobCwgMCwgMCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBsYWIobCwgYSwgYiwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGxhYkNvbnZlcnQobCkgOiBuZXcgTGFiKGwsIGEsIGIsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIExhYihsLCBhLCBiLCBvcGFjaXR5KSB7XG4gIHRoaXMubCA9ICtsO1xuICB0aGlzLmEgPSArYTtcbiAgdGhpcy5iID0gK2I7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5kZWZpbmUoTGFiLCBsYWIsIGV4dGVuZChDb2xvciwge1xuICBicmlnaHRlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgTGFiKHRoaXMubCArIEsgKiAoayA9PSBudWxsID8gMSA6IGspLCB0aGlzLmEsIHRoaXMuYiwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgZGFya2VyOiBmdW5jdGlvbihrKSB7XG4gICAgcmV0dXJuIG5ldyBMYWIodGhpcy5sIC0gSyAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMuYSwgdGhpcy5iLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICByZ2I6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB5ID0gKHRoaXMubCArIDE2KSAvIDExNixcbiAgICAgICAgeCA9IGlzTmFOKHRoaXMuYSkgPyB5IDogeSArIHRoaXMuYSAvIDUwMCxcbiAgICAgICAgeiA9IGlzTmFOKHRoaXMuYikgPyB5IDogeSAtIHRoaXMuYiAvIDIwMDtcbiAgICB4ID0gWG4gKiBsYWIyeHl6KHgpO1xuICAgIHkgPSBZbiAqIGxhYjJ4eXooeSk7XG4gICAgeiA9IFpuICogbGFiMnh5eih6KTtcbiAgICByZXR1cm4gbmV3IFJnYihcbiAgICAgIGxyZ2IycmdiKCAzLjEzMzg1NjEgKiB4IC0gMS42MTY4NjY3ICogeSAtIDAuNDkwNjE0NiAqIHopLFxuICAgICAgbHJnYjJyZ2IoLTAuOTc4NzY4NCAqIHggKyAxLjkxNjE0MTUgKiB5ICsgMC4wMzM0NTQwICogeiksXG4gICAgICBscmdiMnJnYiggMC4wNzE5NDUzICogeCAtIDAuMjI4OTkxNCAqIHkgKyAxLjQwNTI0MjcgKiB6KSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH1cbn0pKTtcblxuZnVuY3Rpb24geHl6MmxhYih0KSB7XG4gIHJldHVybiB0ID4gdDMgPyBNYXRoLnBvdyh0LCAxIC8gMykgOiB0IC8gdDIgKyB0MDtcbn1cblxuZnVuY3Rpb24gbGFiMnh5eih0KSB7XG4gIHJldHVybiB0ID4gdDEgPyB0ICogdCAqIHQgOiB0MiAqICh0IC0gdDApO1xufVxuXG5mdW5jdGlvbiBscmdiMnJnYih4KSB7XG4gIHJldHVybiAyNTUgKiAoeCA8PSAwLjAwMzEzMDggPyAxMi45MiAqIHggOiAxLjA1NSAqIE1hdGgucG93KHgsIDEgLyAyLjQpIC0gMC4wNTUpO1xufVxuXG5mdW5jdGlvbiByZ2IybHJnYih4KSB7XG4gIHJldHVybiAoeCAvPSAyNTUpIDw9IDAuMDQwNDUgPyB4IC8gMTIuOTIgOiBNYXRoLnBvdygoeCArIDAuMDU1KSAvIDEuMDU1LCAyLjQpO1xufVxuXG5mdW5jdGlvbiBoY2xDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBIY2wpIHJldHVybiBuZXcgSGNsKG8uaCwgby5jLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBMYWIpKSBvID0gbGFiQ29udmVydChvKTtcbiAgaWYgKG8uYSA9PT0gMCAmJiBvLmIgPT09IDApIHJldHVybiBuZXcgSGNsKE5hTiwgMCA8IG8ubCAmJiBvLmwgPCAxMDAgPyAwIDogTmFOLCBvLmwsIG8ub3BhY2l0eSk7XG4gIHZhciBoID0gTWF0aC5hdGFuMihvLmIsIG8uYSkgKiByYWQyZGVnO1xuICByZXR1cm4gbmV3IEhjbChoIDwgMCA/IGggKyAzNjAgOiBoLCBNYXRoLnNxcnQoby5hICogby5hICsgby5iICogby5iKSwgby5sLCBvLm9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGNoKGwsIGMsIGgsIG9wYWNpdHkpIHtcbiAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgPyBoY2xDb252ZXJ0KGwpIDogbmV3IEhjbChoLCBjLCBsLCBvcGFjaXR5ID09IG51bGwgPyAxIDogb3BhY2l0eSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoY2woaCwgYywgbCwgb3BhY2l0eSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IGhjbENvbnZlcnQoaCkgOiBuZXcgSGNsKGgsIGMsIGwsIG9wYWNpdHkgPT0gbnVsbCA/IDEgOiBvcGFjaXR5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEhjbChoLCBjLCBsLCBvcGFjaXR5KSB7XG4gIHRoaXMuaCA9ICtoO1xuICB0aGlzLmMgPSArYztcbiAgdGhpcy5sID0gK2w7XG4gIHRoaXMub3BhY2l0eSA9ICtvcGFjaXR5O1xufVxuXG5mdW5jdGlvbiBoY2wybGFiKG8pIHtcbiAgaWYgKGlzTmFOKG8uaCkpIHJldHVybiBuZXcgTGFiKG8ubCwgMCwgMCwgby5vcGFjaXR5KTtcbiAgdmFyIGggPSBvLmggKiBkZWcycmFkO1xuICByZXR1cm4gbmV3IExhYihvLmwsIE1hdGguY29zKGgpICogby5jLCBNYXRoLnNpbihoKSAqIG8uYywgby5vcGFjaXR5KTtcbn1cblxuZGVmaW5lKEhjbCwgaGNsLCBleHRlbmQoQ29sb3IsIHtcbiAgYnJpZ2h0ZXI6IGZ1bmN0aW9uKGspIHtcbiAgICByZXR1cm4gbmV3IEhjbCh0aGlzLmgsIHRoaXMuYywgdGhpcy5sICsgSyAqIChrID09IG51bGwgPyAxIDogayksIHRoaXMub3BhY2l0eSk7XG4gIH0sXG4gIGRhcmtlcjogZnVuY3Rpb24oaykge1xuICAgIHJldHVybiBuZXcgSGNsKHRoaXMuaCwgdGhpcy5jLCB0aGlzLmwgLSBLICogKGsgPT0gbnVsbCA/IDEgOiBrKSwgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gaGNsMmxhYih0aGlzKS5yZ2IoKTtcbiAgfVxufSkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtY29sb3Ivc3JjL2xhYi5qc1xuLy8gbW9kdWxlIGlkID0gMjI1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///225\n");

/***/ }),
/* 226 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = cubehelix;\n/* unused harmony export Cubehelix */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__define__ = __webpack_require__(68);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(67);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(115);\n\n\n\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */])) o = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"h\" /* rgbConvert */])(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * __WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* rad2deg */] - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nfunction cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nObject(__WEBPACK_IMPORTED_MODULE_0__define__[\"a\" /* default */])(Cubehelix, cubehelix, Object(__WEBPACK_IMPORTED_MODULE_0__define__[\"b\" /* extend */])(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* Color */], {\n  brighter: function(k) {\n    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* brighter */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* brighter */], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? __WEBPACK_IMPORTED_MODULE_1__color__[\"d\" /* darker */] : Math.pow(__WEBPACK_IMPORTED_MODULE_1__color__[\"d\" /* darker */], k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * __WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* deg2rad */],\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new __WEBPACK_IMPORTED_MODULE_1__color__[\"b\" /* Rgb */](\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9jdWJlaGVsaXguanM/MGVhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVmaW5lLCB7ZXh0ZW5kfSBmcm9tIFwiLi9kZWZpbmVcIjtcbmltcG9ydCB7Q29sb3IsIHJnYkNvbnZlcnQsIFJnYiwgZGFya2VyLCBicmlnaHRlcn0gZnJvbSBcIi4vY29sb3JcIjtcbmltcG9ydCB7ZGVnMnJhZCwgcmFkMmRlZ30gZnJvbSBcIi4vbWF0aFwiO1xuXG52YXIgQSA9IC0wLjE0ODYxLFxuICAgIEIgPSArMS43ODI3NyxcbiAgICBDID0gLTAuMjkyMjcsXG4gICAgRCA9IC0wLjkwNjQ5LFxuICAgIEUgPSArMS45NzI5NCxcbiAgICBFRCA9IEUgKiBELFxuICAgIEVCID0gRSAqIEIsXG4gICAgQkNfREEgPSBCICogQyAtIEQgKiBBO1xuXG5mdW5jdGlvbiBjdWJlaGVsaXhDb252ZXJ0KG8pIHtcbiAgaWYgKG8gaW5zdGFuY2VvZiBDdWJlaGVsaXgpIHJldHVybiBuZXcgQ3ViZWhlbGl4KG8uaCwgby5zLCBvLmwsIG8ub3BhY2l0eSk7XG4gIGlmICghKG8gaW5zdGFuY2VvZiBSZ2IpKSBvID0gcmdiQ29udmVydChvKTtcbiAgdmFyIHIgPSBvLnIgLyAyNTUsXG4gICAgICBnID0gby5nIC8gMjU1LFxuICAgICAgYiA9IG8uYiAvIDI1NSxcbiAgICAgIGwgPSAoQkNfREEgKiBiICsgRUQgKiByIC0gRUIgKiBnKSAvIChCQ19EQSArIEVEIC0gRUIpLFxuICAgICAgYmwgPSBiIC0gbCxcbiAgICAgIGsgPSAoRSAqIChnIC0gbCkgLSBDICogYmwpIC8gRCxcbiAgICAgIHMgPSBNYXRoLnNxcnQoayAqIGsgKyBibCAqIGJsKSAvIChFICogbCAqICgxIC0gbCkpLCAvLyBOYU4gaWYgbD0wIG9yIGw9MVxuICAgICAgaCA9IHMgPyBNYXRoLmF0YW4yKGssIGJsKSAqIHJhZDJkZWcgLSAxMjAgOiBOYU47XG4gIHJldHVybiBuZXcgQ3ViZWhlbGl4KGggPCAwID8gaCArIDM2MCA6IGgsIHMsIGwsIG8ub3BhY2l0eSk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGN1YmVoZWxpeChoLCBzLCBsLCBvcGFjaXR5KSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID8gY3ViZWhlbGl4Q29udmVydChoKSA6IG5ldyBDdWJlaGVsaXgoaCwgcywgbCwgb3BhY2l0eSA9PSBudWxsID8gMSA6IG9wYWNpdHkpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQ3ViZWhlbGl4KGgsIHMsIGwsIG9wYWNpdHkpIHtcbiAgdGhpcy5oID0gK2g7XG4gIHRoaXMucyA9ICtzO1xuICB0aGlzLmwgPSArbDtcbiAgdGhpcy5vcGFjaXR5ID0gK29wYWNpdHk7XG59XG5cbmRlZmluZShDdWJlaGVsaXgsIGN1YmVoZWxpeCwgZXh0ZW5kKENvbG9yLCB7XG4gIGJyaWdodGVyOiBmdW5jdGlvbihrKSB7XG4gICAgayA9IGsgPT0gbnVsbCA/IGJyaWdodGVyIDogTWF0aC5wb3coYnJpZ2h0ZXIsIGspO1xuICAgIHJldHVybiBuZXcgQ3ViZWhlbGl4KHRoaXMuaCwgdGhpcy5zLCB0aGlzLmwgKiBrLCB0aGlzLm9wYWNpdHkpO1xuICB9LFxuICBkYXJrZXI6IGZ1bmN0aW9uKGspIHtcbiAgICBrID0gayA9PSBudWxsID8gZGFya2VyIDogTWF0aC5wb3coZGFya2VyLCBrKTtcbiAgICByZXR1cm4gbmV3IEN1YmVoZWxpeCh0aGlzLmgsIHRoaXMucywgdGhpcy5sICogaywgdGhpcy5vcGFjaXR5KTtcbiAgfSxcbiAgcmdiOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgaCA9IGlzTmFOKHRoaXMuaCkgPyAwIDogKHRoaXMuaCArIDEyMCkgKiBkZWcycmFkLFxuICAgICAgICBsID0gK3RoaXMubCxcbiAgICAgICAgYSA9IGlzTmFOKHRoaXMucykgPyAwIDogdGhpcy5zICogbCAqICgxIC0gbCksXG4gICAgICAgIGNvc2ggPSBNYXRoLmNvcyhoKSxcbiAgICAgICAgc2luaCA9IE1hdGguc2luKGgpO1xuICAgIHJldHVybiBuZXcgUmdiKFxuICAgICAgMjU1ICogKGwgKyBhICogKEEgKiBjb3NoICsgQiAqIHNpbmgpKSxcbiAgICAgIDI1NSAqIChsICsgYSAqIChDICogY29zaCArIEQgKiBzaW5oKSksXG4gICAgICAyNTUgKiAobCArIGEgKiAoRSAqIGNvc2gpKSxcbiAgICAgIHRoaXMub3BhY2l0eVxuICAgICk7XG4gIH1cbn0pKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWNvbG9yL3NyYy9jdWJlaGVsaXguanNcbi8vIG1vZHVsZSBpZCA9IDIyNlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///226\n");

/***/ }),
/* 227 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9kaXNjcmV0ZS5qcz9iZjBjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHJhbmdlKSB7XG4gIHZhciBuID0gcmFuZ2UubGVuZ3RoO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHJldHVybiByYW5nZVtNYXRoLm1heCgwLCBNYXRoLm1pbihuIC0gMSwgTWF0aC5mbG9vcih0ICogbikpKV07XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvZGlzY3JldGUuanNcbi8vIG1vZHVsZSBpZCA9IDIyN1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///227\n");

/***/ }),
/* 228 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__color__ = __webpack_require__(29);\n\n\n/* unused harmony default export */ var _unused_webpack_default_export = (function(a, b) {\n  var i = Object(__WEBPACK_IMPORTED_MODULE_0__color__[\"c\" /* hue */])(+a, +b);\n  return function(t) {\n    var x = i(t);\n    return x - 360 * Math.floor(x / 360);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9odWUuanM/OTdlOSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2h1ZX0gZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYikge1xuICB2YXIgaSA9IGh1ZSgrYSwgK2IpO1xuICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgIHZhciB4ID0gaSh0KTtcbiAgICByZXR1cm4geCAtIDM2MCAqIE1hdGguZmxvb3IoeCAvIDM2MCk7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvaHVlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///228\n");

/***/ }),
/* 229 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(a, b) {\n  return a = +a, b -= a, function(t) {\n    return Math.round(a + b * t);\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjI5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qcz8zYjMzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGEsIGIpIHtcbiAgcmV0dXJuIGEgPSArYSwgYiAtPSBhLCBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIE1hdGgucm91bmQoYSArIGIgKiB0KTtcbiAgfTtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9yb3VuZC5qc1xuLy8gbW9kdWxlIGlkID0gMjI5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///229\n");

/***/ }),
/* 230 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export interpolateTransformCss */\n/* unused harmony export interpolateTransformSvg */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__number__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__parse__ = __webpack_require__(231);\n\n\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(xa, xb)}, {i: i - 2, x: Object(__WEBPACK_IMPORTED_MODULE_0__number__[\"a\" /* default */])(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nvar interpolateTransformCss = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__[\"a\" /* parseCss */], \"px, \", \"px)\", \"deg)\");\nvar interpolateTransformSvg = interpolateTransform(__WEBPACK_IMPORTED_MODULE_1__parse__[\"b\" /* parseSvg */], \", \", \")\", \")\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vaW5kZXguanM/Y2EwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbnVtYmVyIGZyb20gXCIuLi9udW1iZXJcIjtcbmltcG9ydCB7cGFyc2VDc3MsIHBhcnNlU3ZnfSBmcm9tIFwiLi9wYXJzZVwiO1xuXG5mdW5jdGlvbiBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZSwgcHhDb21tYSwgcHhQYXJlbiwgZGVnUGFyZW4pIHtcblxuICBmdW5jdGlvbiBwb3Aocykge1xuICAgIHJldHVybiBzLmxlbmd0aCA/IHMucG9wKCkgKyBcIiBcIiA6IFwiXCI7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFuc2xhdGUoeGEsIHlhLCB4YiwgeWIsIHMsIHEpIHtcbiAgICBpZiAoeGEgIT09IHhiIHx8IHlhICE9PSB5Yikge1xuICAgICAgdmFyIGkgPSBzLnB1c2goXCJ0cmFuc2xhdGUoXCIsIG51bGwsIHB4Q29tbWEsIG51bGwsIHB4UGFyZW4pO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiB8fCB5Yikge1xuICAgICAgcy5wdXNoKFwidHJhbnNsYXRlKFwiICsgeGIgKyBweENvbW1hICsgeWIgKyBweFBhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByb3RhdGUoYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBpZiAoYSAtIGIgPiAxODApIGIgKz0gMzYwOyBlbHNlIGlmIChiIC0gYSA+IDE4MCkgYSArPSAzNjA7IC8vIHNob3J0ZXN0IHBhdGhcbiAgICAgIHEucHVzaCh7aTogcy5wdXNoKHBvcChzKSArIFwicm90YXRlKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInJvdGF0ZShcIiArIGIgKyBkZWdQYXJlbik7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2tld1goYSwgYiwgcywgcSkge1xuICAgIGlmIChhICE9PSBiKSB7XG4gICAgICBxLnB1c2goe2k6IHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiLCBudWxsLCBkZWdQYXJlbikgLSAyLCB4OiBudW1iZXIoYSwgYil9KTtcbiAgICB9IGVsc2UgaWYgKGIpIHtcbiAgICAgIHMucHVzaChwb3AocykgKyBcInNrZXdYKFwiICsgYiArIGRlZ1BhcmVuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzY2FsZSh4YSwgeWEsIHhiLCB5YiwgcywgcSkge1xuICAgIGlmICh4YSAhPT0geGIgfHwgeWEgIT09IHliKSB7XG4gICAgICB2YXIgaSA9IHMucHVzaChwb3AocykgKyBcInNjYWxlKFwiLCBudWxsLCBcIixcIiwgbnVsbCwgXCIpXCIpO1xuICAgICAgcS5wdXNoKHtpOiBpIC0gNCwgeDogbnVtYmVyKHhhLCB4Yil9LCB7aTogaSAtIDIsIHg6IG51bWJlcih5YSwgeWIpfSk7XG4gICAgfSBlbHNlIGlmICh4YiAhPT0gMSB8fCB5YiAhPT0gMSkge1xuICAgICAgcy5wdXNoKHBvcChzKSArIFwic2NhbGUoXCIgKyB4YiArIFwiLFwiICsgeWIgKyBcIilcIik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKGEsIGIpIHtcbiAgICB2YXIgcyA9IFtdLCAvLyBzdHJpbmcgY29uc3RhbnRzIGFuZCBwbGFjZWhvbGRlcnNcbiAgICAgICAgcSA9IFtdOyAvLyBudW1iZXIgaW50ZXJwb2xhdG9yc1xuICAgIGEgPSBwYXJzZShhKSwgYiA9IHBhcnNlKGIpO1xuICAgIHRyYW5zbGF0ZShhLnRyYW5zbGF0ZVgsIGEudHJhbnNsYXRlWSwgYi50cmFuc2xhdGVYLCBiLnRyYW5zbGF0ZVksIHMsIHEpO1xuICAgIHJvdGF0ZShhLnJvdGF0ZSwgYi5yb3RhdGUsIHMsIHEpO1xuICAgIHNrZXdYKGEuc2tld1gsIGIuc2tld1gsIHMsIHEpO1xuICAgIHNjYWxlKGEuc2NhbGVYLCBhLnNjYWxlWSwgYi5zY2FsZVgsIGIuc2NhbGVZLCBzLCBxKTtcbiAgICBhID0gYiA9IG51bGw7IC8vIGdjXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgIHZhciBpID0gLTEsIG4gPSBxLmxlbmd0aCwgbztcbiAgICAgIHdoaWxlICgrK2kgPCBuKSBzWyhvID0gcVtpXSkuaV0gPSBvLngodCk7XG4gICAgICByZXR1cm4gcy5qb2luKFwiXCIpO1xuICAgIH07XG4gIH07XG59XG5cbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1Dc3MgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZUNzcywgXCJweCwgXCIsIFwicHgpXCIsIFwiZGVnKVwiKTtcbmV4cG9ydCB2YXIgaW50ZXJwb2xhdGVUcmFuc2Zvcm1TdmcgPSBpbnRlcnBvbGF0ZVRyYW5zZm9ybShwYXJzZVN2ZywgXCIsIFwiLCBcIilcIiwgXCIpXCIpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9pbmRleC5qc1xuLy8gbW9kdWxlIGlkID0gMjMwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///230\n");

/***/ }),
/* 231 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = parseCss;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = parseSvg;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__decompose__ = __webpack_require__(232);\n\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nfunction parseCss(value) {\n  if (value === \"none\") return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__[\"a\" /* default */])(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nfunction parseSvg(value) {\n  if (value == null) return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return __WEBPACK_IMPORTED_MODULE_0__decompose__[\"b\" /* identity */];\n  value = value.matrix;\n  return Object(__WEBPACK_IMPORTED_MODULE_0__decompose__[\"a\" /* default */])(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vcGFyc2UuanM/NDkyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZGVjb21wb3NlLCB7aWRlbnRpdHl9IGZyb20gXCIuL2RlY29tcG9zZVwiO1xuXG52YXIgY3NzTm9kZSxcbiAgICBjc3NSb290LFxuICAgIGNzc1ZpZXcsXG4gICAgc3ZnTm9kZTtcblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQ3NzKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PT0gXCJub25lXCIpIHJldHVybiBpZGVudGl0eTtcbiAgaWYgKCFjc3NOb2RlKSBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIkRJVlwiKSwgY3NzUm9vdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgY3NzVmlldyA9IGRvY3VtZW50LmRlZmF1bHRWaWV3O1xuICBjc3NOb2RlLnN0eWxlLnRyYW5zZm9ybSA9IHZhbHVlO1xuICB2YWx1ZSA9IGNzc1ZpZXcuZ2V0Q29tcHV0ZWRTdHlsZShjc3NSb290LmFwcGVuZENoaWxkKGNzc05vZGUpLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwidHJhbnNmb3JtXCIpO1xuICBjc3NSb290LnJlbW92ZUNoaWxkKGNzc05vZGUpO1xuICB2YWx1ZSA9IHZhbHVlLnNsaWNlKDcsIC0xKS5zcGxpdChcIixcIik7XG4gIHJldHVybiBkZWNvbXBvc2UoK3ZhbHVlWzBdLCArdmFsdWVbMV0sICt2YWx1ZVsyXSwgK3ZhbHVlWzNdLCArdmFsdWVbNF0sICt2YWx1ZVs1XSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVN2Zyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIGlkZW50aXR5O1xuICBpZiAoIXN2Z05vZGUpIHN2Z05vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLCBcImdcIik7XG4gIHN2Z05vZGUuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsIHZhbHVlKTtcbiAgaWYgKCEodmFsdWUgPSBzdmdOb2RlLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCkpKSByZXR1cm4gaWRlbnRpdHk7XG4gIHZhbHVlID0gdmFsdWUubWF0cml4O1xuICByZXR1cm4gZGVjb21wb3NlKHZhbHVlLmEsIHZhbHVlLmIsIHZhbHVlLmMsIHZhbHVlLmQsIHZhbHVlLmUsIHZhbHVlLmYpO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL3RyYW5zZm9ybS9wYXJzZS5qc1xuLy8gbW9kdWxlIGlkID0gMjMxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///231\n");

/***/ }),
/* 232 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return identity; });\nvar degrees = 180 / Math.PI;\n\nvar identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy90cmFuc2Zvcm0vZGVjb21wb3NlLmpzPzhjZGYiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGRlZ3JlZXMgPSAxODAgLyBNYXRoLlBJO1xuXG5leHBvcnQgdmFyIGlkZW50aXR5ID0ge1xuICB0cmFuc2xhdGVYOiAwLFxuICB0cmFuc2xhdGVZOiAwLFxuICByb3RhdGU6IDAsXG4gIHNrZXdYOiAwLFxuICBzY2FsZVg6IDEsXG4gIHNjYWxlWTogMVxufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24oYSwgYiwgYywgZCwgZSwgZikge1xuICB2YXIgc2NhbGVYLCBzY2FsZVksIHNrZXdYO1xuICBpZiAoc2NhbGVYID0gTWF0aC5zcXJ0KGEgKiBhICsgYiAqIGIpKSBhIC89IHNjYWxlWCwgYiAvPSBzY2FsZVg7XG4gIGlmIChza2V3WCA9IGEgKiBjICsgYiAqIGQpIGMgLT0gYSAqIHNrZXdYLCBkIC09IGIgKiBza2V3WDtcbiAgaWYgKHNjYWxlWSA9IE1hdGguc3FydChjICogYyArIGQgKiBkKSkgYyAvPSBzY2FsZVksIGQgLz0gc2NhbGVZLCBza2V3WCAvPSBzY2FsZVk7XG4gIGlmIChhICogZCA8IGIgKiBjKSBhID0gLWEsIGIgPSAtYiwgc2tld1ggPSAtc2tld1gsIHNjYWxlWCA9IC1zY2FsZVg7XG4gIHJldHVybiB7XG4gICAgdHJhbnNsYXRlWDogZSxcbiAgICB0cmFuc2xhdGVZOiBmLFxuICAgIHJvdGF0ZTogTWF0aC5hdGFuMihiLCBhKSAqIGRlZ3JlZXMsXG4gICAgc2tld1g6IE1hdGguYXRhbihza2V3WCkgKiBkZWdyZWVzLFxuICAgIHNjYWxlWDogc2NhbGVYLFxuICAgIHNjYWxlWTogc2NhbGVZXG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvdHJhbnNmb3JtL2RlY29tcG9zZS5qc1xuLy8gbW9kdWxlIGlkID0gMjMyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///232\n");

/***/ }),
/* 233 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("var rho = Math.SQRT2,\n    rho2 = 2,\n    rho4 = 4,\n    epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\n// p0 = [ux0, uy0, w0]\n// p1 = [ux1, uy1, w1]\n/* unused harmony default export */ var _unused_webpack_default_export = (function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n      ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n      dx = ux1 - ux0,\n      dy = uy1 - uy0,\n      d2 = dx * dx + dy * dy,\n      i,\n      S;\n\n  // Special case for u0 ≅ u1.\n  if (d2 < epsilon2) {\n    S = Math.log(w1 / w0) / rho;\n    i = function(t) {\n      return [\n        ux0 + t * dx,\n        uy0 + t * dy,\n        w0 * Math.exp(rho * t * S)\n      ];\n    }\n  }\n\n  // General case.\n  else {\n    var d1 = Math.sqrt(d2),\n        b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n        b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n        r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n        r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n    S = (r1 - r0) / rho;\n    i = function(t) {\n      var s = t * S,\n          coshr0 = cosh(r0),\n          u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n      return [\n        ux0 + u * dx,\n        uy0 + u * dy,\n        w0 * coshr0 / cosh(rho * s + r0)\n      ];\n    }\n  }\n\n  i.duration = S * 1000;\n\n  return i;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy96b29tLmpzPzVjZTQiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIHJobyA9IE1hdGguU1FSVDIsXG4gICAgcmhvMiA9IDIsXG4gICAgcmhvNCA9IDQsXG4gICAgZXBzaWxvbjIgPSAxZS0xMjtcblxuZnVuY3Rpb24gY29zaCh4KSB7XG4gIHJldHVybiAoKHggPSBNYXRoLmV4cCh4KSkgKyAxIC8geCkgLyAyO1xufVxuXG5mdW5jdGlvbiBzaW5oKHgpIHtcbiAgcmV0dXJuICgoeCA9IE1hdGguZXhwKHgpKSAtIDEgLyB4KSAvIDI7XG59XG5cbmZ1bmN0aW9uIHRhbmgoeCkge1xuICByZXR1cm4gKCh4ID0gTWF0aC5leHAoMiAqIHgpKSAtIDEpIC8gKHggKyAxKTtcbn1cblxuLy8gcDAgPSBbdXgwLCB1eTAsIHcwXVxuLy8gcDEgPSBbdXgxLCB1eTEsIHcxXVxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocDAsIHAxKSB7XG4gIHZhciB1eDAgPSBwMFswXSwgdXkwID0gcDBbMV0sIHcwID0gcDBbMl0sXG4gICAgICB1eDEgPSBwMVswXSwgdXkxID0gcDFbMV0sIHcxID0gcDFbMl0sXG4gICAgICBkeCA9IHV4MSAtIHV4MCxcbiAgICAgIGR5ID0gdXkxIC0gdXkwLFxuICAgICAgZDIgPSBkeCAqIGR4ICsgZHkgKiBkeSxcbiAgICAgIGksXG4gICAgICBTO1xuXG4gIC8vIFNwZWNpYWwgY2FzZSBmb3IgdTAg4omFIHUxLlxuICBpZiAoZDIgPCBlcHNpbG9uMikge1xuICAgIFMgPSBNYXRoLmxvZyh3MSAvIHcwKSAvIHJobztcbiAgICBpID0gZnVuY3Rpb24odCkge1xuICAgICAgcmV0dXJuIFtcbiAgICAgICAgdXgwICsgdCAqIGR4LFxuICAgICAgICB1eTAgKyB0ICogZHksXG4gICAgICAgIHcwICogTWF0aC5leHAocmhvICogdCAqIFMpXG4gICAgICBdO1xuICAgIH1cbiAgfVxuXG4gIC8vIEdlbmVyYWwgY2FzZS5cbiAgZWxzZSB7XG4gICAgdmFyIGQxID0gTWF0aC5zcXJ0KGQyKSxcbiAgICAgICAgYjAgPSAodzEgKiB3MSAtIHcwICogdzAgKyByaG80ICogZDIpIC8gKDIgKiB3MCAqIHJobzIgKiBkMSksXG4gICAgICAgIGIxID0gKHcxICogdzEgLSB3MCAqIHcwIC0gcmhvNCAqIGQyKSAvICgyICogdzEgKiByaG8yICogZDEpLFxuICAgICAgICByMCA9IE1hdGgubG9nKE1hdGguc3FydChiMCAqIGIwICsgMSkgLSBiMCksXG4gICAgICAgIHIxID0gTWF0aC5sb2coTWF0aC5zcXJ0KGIxICogYjEgKyAxKSAtIGIxKTtcbiAgICBTID0gKHIxIC0gcjApIC8gcmhvO1xuICAgIGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICB2YXIgcyA9IHQgKiBTLFxuICAgICAgICAgIGNvc2hyMCA9IGNvc2gocjApLFxuICAgICAgICAgIHUgPSB3MCAvIChyaG8yICogZDEpICogKGNvc2hyMCAqIHRhbmgocmhvICogcyArIHIwKSAtIHNpbmgocjApKTtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHV4MCArIHUgKiBkeCxcbiAgICAgICAgdXkwICsgdSAqIGR5LFxuICAgICAgICB3MCAqIGNvc2hyMCAvIGNvc2gocmhvICogcyArIHIwKVxuICAgICAgXTtcbiAgICB9XG4gIH1cblxuICBpLmR1cmF0aW9uID0gUyAqIDEwMDA7XG5cbiAgcmV0dXJuIGk7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvem9vbS5qc1xuLy8gbW9kdWxlIGlkID0gMjMzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///233\n");

/***/ }),
/* 234 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export hslLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"d\" /* hsl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"d\" /* hsl */])(end)).h),\n        s = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.s, end.s),\n        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (hsl(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar hslLong = hsl(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9oc2wuanM/ZmMxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2hzbCBhcyBjb2xvckhzbH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGhzbChodWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaCA9IGh1ZSgoc3RhcnQgPSBjb2xvckhzbChzdGFydCkpLmgsIChlbmQgPSBjb2xvckhzbChlbmQpKS5oKSxcbiAgICAgICAgcyA9IGNvbG9yKHN0YXJ0LnMsIGVuZC5zKSxcbiAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICBzdGFydC5zID0gcyh0KTtcbiAgICAgIHN0YXJ0LmwgPSBsKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaHNsKGh1ZSk7XG5leHBvcnQgdmFyIGhzbExvbmcgPSBoc2woY29sb3IpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2hzbC5qc1xuLy8gbW9kdWxlIGlkID0gMjM0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///234\n");

/***/ }),
/* 235 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export default */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction lab(start, end) {\n  var l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"e\" /* lab */])(start)).l, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"e\" /* lab */])(end)).l),\n      a = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.a, end.a),\n      b = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.b, end.b),\n      opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9sYWIuanM/NDYxMCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2xhYiBhcyBjb2xvckxhYn0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IgZnJvbSBcIi4vY29sb3JcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbGFiKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGwgPSBjb2xvcigoc3RhcnQgPSBjb2xvckxhYihzdGFydCkpLmwsIChlbmQgPSBjb2xvckxhYihlbmQpKS5sKSxcbiAgICAgIGEgPSBjb2xvcihzdGFydC5hLCBlbmQuYSksXG4gICAgICBiID0gY29sb3Ioc3RhcnQuYiwgZW5kLmIpLFxuICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICBzdGFydC5sID0gbCh0KTtcbiAgICBzdGFydC5hID0gYSh0KTtcbiAgICBzdGFydC5iID0gYih0KTtcbiAgICBzdGFydC5vcGFjaXR5ID0gb3BhY2l0eSh0KTtcbiAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICB9O1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2xhYi5qc1xuLy8gbW9kdWxlIGlkID0gMjM1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///235\n");

/***/ }),
/* 236 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export hclLong */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"c\" /* hcl */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"c\" /* hcl */])(end)).h),\n        c = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.c, end.c),\n        l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n        opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (hcl(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar hclLong = hcl(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9oY2wuanM/ZGE0OSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2hjbCBhcyBjb2xvckhjbH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGhjbChodWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHN0YXJ0LCBlbmQpIHtcbiAgICB2YXIgaCA9IGh1ZSgoc3RhcnQgPSBjb2xvckhjbChzdGFydCkpLmgsIChlbmQgPSBjb2xvckhjbChlbmQpKS5oKSxcbiAgICAgICAgYyA9IGNvbG9yKHN0YXJ0LmMsIGVuZC5jKSxcbiAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgb3BhY2l0eSA9IGNvbG9yKHN0YXJ0Lm9wYWNpdHksIGVuZC5vcGFjaXR5KTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICBzdGFydC5jID0gYyh0KTtcbiAgICAgIHN0YXJ0LmwgPSBsKHQpO1xuICAgICAgc3RhcnQub3BhY2l0eSA9IG9wYWNpdHkodCk7XG4gICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgaGNsKGh1ZSk7XG5leHBvcnQgdmFyIGhjbExvbmcgPSBoY2woY29sb3IpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtaW50ZXJwb2xhdGUvc3JjL2hjbC5qc1xuLy8gbW9kdWxlIGlkID0gMjM2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///236\n");

/***/ }),
/* 237 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cubehelixLong; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__color__ = __webpack_require__(29);\n\n\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(start)).h, (end = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(end)).h),\n          s = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.s, end.s),\n          l = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.l, end.l),\n          opacity = Object(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */])(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\n/* unused harmony default export */ var _unused_webpack_default_export = (cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__[\"c\" /* hue */]));\nvar cubehelixLong = cubehelix(__WEBPACK_IMPORTED_MODULE_1__color__[\"a\" /* default */]);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9jdWJlaGVsaXguanM/NjhhZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N1YmVoZWxpeCBhcyBjb2xvckN1YmVoZWxpeH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQgY29sb3IsIHtodWV9IGZyb20gXCIuL2NvbG9yXCI7XG5cbmZ1bmN0aW9uIGN1YmVoZWxpeChodWUpIHtcbiAgcmV0dXJuIChmdW5jdGlvbiBjdWJlaGVsaXhHYW1tYSh5KSB7XG4gICAgeSA9ICt5O1xuXG4gICAgZnVuY3Rpb24gY3ViZWhlbGl4KHN0YXJ0LCBlbmQpIHtcbiAgICAgIHZhciBoID0gaHVlKChzdGFydCA9IGNvbG9yQ3ViZWhlbGl4KHN0YXJ0KSkuaCwgKGVuZCA9IGNvbG9yQ3ViZWhlbGl4KGVuZCkpLmgpLFxuICAgICAgICAgIHMgPSBjb2xvcihzdGFydC5zLCBlbmQucyksXG4gICAgICAgICAgbCA9IGNvbG9yKHN0YXJ0LmwsIGVuZC5sKSxcbiAgICAgICAgICBvcGFjaXR5ID0gY29sb3Ioc3RhcnQub3BhY2l0eSwgZW5kLm9wYWNpdHkpO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3RhcnQuaCA9IGgodCk7XG4gICAgICAgIHN0YXJ0LnMgPSBzKHQpO1xuICAgICAgICBzdGFydC5sID0gbChNYXRoLnBvdyh0LCB5KSk7XG4gICAgICAgIHN0YXJ0Lm9wYWNpdHkgPSBvcGFjaXR5KHQpO1xuICAgICAgICByZXR1cm4gc3RhcnQgKyBcIlwiO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBjdWJlaGVsaXguZ2FtbWEgPSBjdWJlaGVsaXhHYW1tYTtcblxuICAgIHJldHVybiBjdWJlaGVsaXg7XG4gIH0pKDEpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjdWJlaGVsaXgoaHVlKTtcbmV4cG9ydCB2YXIgY3ViZWhlbGl4TG9uZyA9IGN1YmVoZWxpeChjb2xvcik7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvY3ViZWhlbGl4LmpzXG4vLyBtb2R1bGUgaWQgPSAyMzdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///237\n");

/***/ }),
/* 238 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export default */\nfunction piecewise(interpolate, values) {\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9waWVjZXdpc2UuanM/ZWQ2ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwaWVjZXdpc2UoaW50ZXJwb2xhdGUsIHZhbHVlcykge1xuICB2YXIgaSA9IDAsIG4gPSB2YWx1ZXMubGVuZ3RoIC0gMSwgdiA9IHZhbHVlc1swXSwgSSA9IG5ldyBBcnJheShuIDwgMCA/IDAgOiBuKTtcbiAgd2hpbGUgKGkgPCBuKSBJW2ldID0gaW50ZXJwb2xhdGUodiwgdiA9IHZhbHVlc1srK2ldKTtcbiAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgaSA9IE1hdGgubWF4KDAsIE1hdGgubWluKG4gLSAxLCBNYXRoLmZsb29yKHQgKj0gbikpKTtcbiAgICByZXR1cm4gSVtpXSh0IC0gaSk7XG4gIH07XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1pbnRlcnBvbGF0ZS9zcmMvcGllY2V3aXNlLmpzXG4vLyBtb2R1bGUgaWQgPSAyMzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///238\n");

/***/ }),
/* 239 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony default export */ var _unused_webpack_default_export = (function(interpolator, n) {\n  var samples = new Array(n);\n  for (var i = 0; i < n; ++i) samples[i] = interpolator(i / (n - 1));\n  return samples;\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjM5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9xdWFudGl6ZS5qcz84ZmM2Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKGludGVycG9sYXRvciwgbikge1xuICB2YXIgc2FtcGxlcyA9IG5ldyBBcnJheShuKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyArK2kpIHNhbXBsZXNbaV0gPSBpbnRlcnBvbGF0b3IoaSAvIChuIC0gMSkpO1xuICByZXR1cm4gc2FtcGxlcztcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLWludGVycG9sYXRlL3NyYy9xdWFudGl6ZS5qc1xuLy8gbW9kdWxlIGlkID0gMjM5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///239\n");

/***/ }),
/* 240 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1BSR24uanM/ZTU2MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJhZjhkYzNmN2Y3Zjc3ZmJmN2JcIixcbiAgXCI3YjMyOTRjMmE1Y2ZhNmRiYTAwMDg4MzdcIixcbiAgXCI3YjMyOTRjMmE1Y2ZmN2Y3ZjdhNmRiYTAwMDg4MzdcIixcbiAgXCI3NjJhODNhZjhkYzNlN2Q0ZThkOWYwZDM3ZmJmN2IxYjc4MzdcIixcbiAgXCI3NjJhODNhZjhkYzNlN2Q0ZThmN2Y3ZjdkOWYwZDM3ZmJmN2IxYjc4MzdcIixcbiAgXCI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzdcIixcbiAgXCI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThmN2Y3ZjdkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzdcIixcbiAgXCI0MDAwNGI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzcwMDQ0MWJcIixcbiAgXCI0MDAwNGI3NjJhODM5OTcwYWJjMmE1Y2ZlN2Q0ZThmN2Y3ZjdkOWYwZDNhNmRiYTA1YWFlNjExYjc4MzcwMDQ0MWJcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUFJHbi5qc1xuLy8gbW9kdWxlIGlkID0gMjQwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///240\n");

/***/ }),
/* 241 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1BpWUcuanM/NDQxZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlOWEzYzlmN2Y3ZjdhMWQ3NmFcIixcbiAgXCJkMDFjOGJmMWI2ZGFiOGUxODY0ZGFjMjZcIixcbiAgXCJkMDFjOGJmMWI2ZGFmN2Y3ZjdiOGUxODY0ZGFjMjZcIixcbiAgXCJjNTFiN2RlOWEzYzlmZGUwZWZlNmY1ZDBhMWQ3NmE0ZDkyMjFcIixcbiAgXCJjNTFiN2RlOWEzYzlmZGUwZWZmN2Y3ZjdlNmY1ZDBhMWQ3NmE0ZDkyMjFcIixcbiAgXCJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjFcIixcbiAgXCJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZmN2Y3ZjdlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjFcIixcbiAgXCI4ZTAxNTJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjEyNzY0MTlcIixcbiAgXCI4ZTAxNTJjNTFiN2RkZTc3YWVmMWI2ZGFmZGUwZWZmN2Y3ZjdlNmY1ZDBiOGUxODY3ZmJjNDE0ZDkyMjEyNzY0MTlcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUGlZRy5qc1xuLy8gbW9kdWxlIGlkID0gMjQxXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///241\n");

/***/ }),
/* 242 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1B1T3IuanM/YWE1NCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCI5OThlYzNmN2Y3ZjdmMWEzNDBcIixcbiAgXCI1ZTNjOTliMmFiZDJmZGI4NjNlNjYxMDFcIixcbiAgXCI1ZTNjOTliMmFiZDJmN2Y3ZjdmZGI4NjNlNjYxMDFcIixcbiAgXCI1NDI3ODg5OThlYzNkOGRhZWJmZWUwYjZmMWEzNDBiMzU4MDZcIixcbiAgXCI1NDI3ODg5OThlYzNkOGRhZWJmN2Y3ZjdmZWUwYjZmMWEzNDBiMzU4MDZcIixcbiAgXCI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDZcIixcbiAgXCI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmN2Y3ZjdmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDZcIixcbiAgXCIyZDAwNGI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDY3ZjNiMDhcIixcbiAgXCIyZDAwNGI1NDI3ODg4MDczYWNiMmFiZDJkOGRhZWJmN2Y3ZjdmZWUwYjZmZGI4NjNlMDgyMTRiMzU4MDY3ZjNiMDhcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUHVPci5qc1xuLy8gbW9kdWxlIGlkID0gMjQyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///242\n");

/***/ }),
/* 243 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkQnUuanM/OTg1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZjhhNjJmN2Y3Zjc2N2E5Y2ZcIixcbiAgXCJjYTAwMjBmNGE1ODI5MmM1ZGUwNTcxYjBcIixcbiAgXCJjYTAwMjBmNGE1ODJmN2Y3Zjc5MmM1ZGUwNTcxYjBcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdkMWU1ZjA2N2E5Y2YyMTY2YWNcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdmN2Y3ZjdkMWU1ZjA2N2E5Y2YyMTY2YWNcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWNcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmN2Y3ZjdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWNcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWMwNTMwNjFcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmN2Y3ZjdkMWU1ZjA5MmM1ZGU0MzkzYzMyMTY2YWMwNTMwNjFcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUmRCdS5qc1xuLy8gbW9kdWxlIGlkID0gMjQzXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///243\n");

/***/ }),
/* 244 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkR3kuanM/OGQ5NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZjhhNjJmZmZmZmY5OTk5OTlcIixcbiAgXCJjYTAwMjBmNGE1ODJiYWJhYmE0MDQwNDBcIixcbiAgXCJjYTAwMjBmNGE1ODJmZmZmZmZiYWJhYmE0MDQwNDBcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdlMGUwZTA5OTk5OTk0ZDRkNGRcIixcbiAgXCJiMjE4MmJlZjhhNjJmZGRiYzdmZmZmZmZlMGUwZTA5OTk5OTk0ZDRkNGRcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGRcIixcbiAgXCJiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmZmZmZmZlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGRcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGQxYTFhMWFcIixcbiAgXCI2NzAwMWZiMjE4MmJkNjYwNGRmNGE1ODJmZGRiYzdmZmZmZmZlMGUwZTBiYWJhYmE4Nzg3ODc0ZDRkNGQxYTFhMWFcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9kaXZlcmdpbmcvUmRHeS5qc1xuLy8gbW9kdWxlIGlkID0gMjQ0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///244\n");

/***/ }),
/* 245 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkWWxCdS5qcz8zODYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZjOGQ1OWZmZmZiZjkxYmZkYlwiLFxuICBcImQ3MTkxY2ZkYWU2MWFiZDllOTJjN2JiNlwiLFxuICBcImQ3MTkxY2ZkYWU2MWZmZmZiZmFiZDllOTJjN2JiNlwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA5MGUwZjNmODkxYmZkYjQ1NzViNFwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA5MGZmZmZiZmUwZjNmODkxYmZkYjQ1NzViNFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNFwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NVwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA5MGZmZmZiZmUwZjNmOGFiZDllOTc0YWRkMTQ1NzViNDMxMzY5NVwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2RpdmVyZ2luZy9SZFlsQnUuanNcbi8vIG1vZHVsZSBpZCA9IDI0NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///245\n");

/***/ }),
/* 246 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1JkWWxHbi5qcz83ZDNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZjOGQ1OWZmZmZiZjkxY2Y2MFwiLFxuICBcImQ3MTkxY2ZkYWU2MWE2ZDk2YTFhOTY0MVwiLFxuICBcImQ3MTkxY2ZkYWU2MWZmZmZiZmE2ZDk2YTFhOTY0MVwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA4YmQ5ZWY4YjkxY2Y2MDFhOTg1MFwiLFxuICBcImQ3MzAyN2ZjOGQ1OWZlZTA4YmZmZmZiZmQ5ZWY4YjkxY2Y2MDFhOTg1MFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MFwiLFxuICBcImQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MFwiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzN1wiLFxuICBcImE1MDAyNmQ3MzAyN2Y0NmQ0M2ZkYWU2MWZlZTA4YmZmZmZiZmQ5ZWY4YmE2ZDk2YTY2YmQ2MzFhOTg1MDAwNjgzN1wiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL2RpdmVyZ2luZy9SZFlsR24uanNcbi8vIG1vZHVsZSBpZCA9IDI0NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///246\n");

/***/ }),
/* 247 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1NwZWN0cmFsLmpzPzIxNmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmM4ZDU5ZmZmZmJmOTlkNTk0XCIsXG4gIFwiZDcxOTFjZmRhZTYxYWJkZGE0MmI4M2JhXCIsXG4gIFwiZDcxOTFjZmRhZTYxZmZmZmJmYWJkZGE0MmI4M2JhXCIsXG4gIFwiZDUzZTRmZmM4ZDU5ZmVlMDhiZTZmNTk4OTlkNTk0MzI4OGJkXCIsXG4gIFwiZDUzZTRmZmM4ZDU5ZmVlMDhiZmZmZmJmZTZmNTk4OTlkNTk0MzI4OGJkXCIsXG4gIFwiZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkXCIsXG4gIFwiZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZmZmZmJmZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkXCIsXG4gIFwiOWUwMTQyZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkNWU0ZmEyXCIsXG4gIFwiOWUwMTQyZDUzZTRmZjQ2ZDQzZmRhZTYxZmVlMDhiZmZmZmJmZTZmNTk4YWJkZGE0NjZjMmE1MzI4OGJkNWU0ZmEyXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvZGl2ZXJnaW5nL1NwZWN0cmFsLmpzXG4vLyBtb2R1bGUgaWQgPSAyNDdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///247\n");

/***/ }),
/* 248 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzP2JmNDMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTVmNWY5OTlkOGM5MmNhMjVmXCIsXG4gIFwiZWRmOGZiYjJlMmUyNjZjMmE0MjM4YjQ1XCIsXG4gIFwiZWRmOGZiYjJlMmUyNjZjMmE0MmNhMjVmMDA2ZDJjXCIsXG4gIFwiZWRmOGZiY2NlY2U2OTlkOGM5NjZjMmE0MmNhMjVmMDA2ZDJjXCIsXG4gIFwiZWRmOGZiY2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA1ODI0XCIsXG4gIFwiZjdmY2ZkZTVmNWY5Y2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA1ODI0XCIsXG4gIFwiZjdmY2ZkZTVmNWY5Y2NlY2U2OTlkOGM5NjZjMmE0NDFhZTc2MjM4YjQ1MDA2ZDJjMDA0NDFiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdUduLmpzXG4vLyBtb2R1bGUgaWQgPSAyNDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///248\n");

/***/ }),
/* 249 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQ5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzPzAyZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTBlY2Y0OWViY2RhODg1NmE3XCIsXG4gIFwiZWRmOGZiYjNjZGUzOGM5NmM2ODg0MTlkXCIsXG4gIFwiZWRmOGZiYjNjZGUzOGM5NmM2ODg1NmE3ODEwZjdjXCIsXG4gIFwiZWRmOGZiYmZkM2U2OWViY2RhOGM5NmM2ODg1NmE3ODEwZjdjXCIsXG4gIFwiZWRmOGZiYmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkNmUwMTZiXCIsXG4gIFwiZjdmY2ZkZTBlY2Y0YmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkNmUwMTZiXCIsXG4gIFwiZjdmY2ZkZTBlY2Y0YmZkM2U2OWViY2RhOGM5NmM2OGM2YmIxODg0MTlkODEwZjdjNGQwMDRiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9CdVB1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///249\n");

/***/ }),
/* 250 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzPzdmZjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTBmM2RiYThkZGI1NDNhMmNhXCIsXG4gIFwiZjBmOWU4YmFlNGJjN2JjY2M0MmI4Y2JlXCIsXG4gIFwiZjBmOWU4YmFlNGJjN2JjY2M0NDNhMmNhMDg2OGFjXCIsXG4gIFwiZjBmOWU4Y2NlYmM1YThkZGI1N2JjY2M0NDNhMmNhMDg2OGFjXCIsXG4gIFwiZjBmOWU4Y2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg1ODllXCIsXG4gIFwiZjdmY2YwZTBmM2RiY2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg1ODllXCIsXG4gIFwiZjdmY2YwZTBmM2RiY2NlYmM1YThkZGI1N2JjY2M0NGViM2QzMmI4Y2JlMDg2OGFjMDg0MDgxXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9HbkJ1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///250\n");

/***/ }),
/* 251 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzP2VmYjEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmVlOGM4ZmRiYjg0ZTM0YTMzXCIsXG4gIFwiZmVmMGQ5ZmRjYzhhZmM4ZDU5ZDczMDFmXCIsXG4gIFwiZmVmMGQ5ZmRjYzhhZmM4ZDU5ZTM0YTMzYjMwMDAwXCIsXG4gIFwiZmVmMGQ5ZmRkNDllZmRiYjg0ZmM4ZDU5ZTM0YTMzYjMwMDAwXCIsXG4gIFwiZmVmMGQ5ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmOTkwMDAwXCIsXG4gIFwiZmZmN2VjZmVlOGM4ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmOTkwMDAwXCIsXG4gIFwiZmZmN2VjZmVlOGM4ZmRkNDllZmRiYjg0ZmM4ZDU5ZWY2NTQ4ZDczMDFmYjMwMDAwN2YwMDAwXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9PclJkLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///251\n");

/***/ }),
/* 252 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1R24uanM/YzJjNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlY2UyZjBhNmJkZGIxYzkwOTlcIixcbiAgXCJmNmVmZjdiZGM5ZTE2N2E5Y2YwMjgxOGFcIixcbiAgXCJmNmVmZjdiZGM5ZTE2N2E5Y2YxYzkwOTkwMTZjNTlcIixcbiAgXCJmNmVmZjdkMGQxZTZhNmJkZGI2N2E5Y2YxYzkwOTkwMTZjNTlcIixcbiAgXCJmNmVmZjdkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTY0NTBcIixcbiAgXCJmZmY3ZmJlY2UyZjBkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTY0NTBcIixcbiAgXCJmZmY3ZmJlY2UyZjBkMGQxZTZhNmJkZGI2N2E5Y2YzNjkwYzAwMjgxOGEwMTZjNTkwMTQ2MzZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1B1QnVHbi5qc1xuLy8gbW9kdWxlIGlkID0gMjUyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///252\n");

/***/ }),
/* 253 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzPzA5YzQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZWNlN2YyYTZiZGRiMmI4Y2JlXCIsXG4gIFwiZjFlZWY2YmRjOWUxNzRhOWNmMDU3MGIwXCIsXG4gIFwiZjFlZWY2YmRjOWUxNzRhOWNmMmI4Y2JlMDQ1YThkXCIsXG4gIFwiZjFlZWY2ZDBkMWU2YTZiZGRiNzRhOWNmMmI4Y2JlMDQ1YThkXCIsXG4gIFwiZjFlZWY2ZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDM0ZTdiXCIsXG4gIFwiZmZmN2ZiZWNlN2YyZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDM0ZTdiXCIsXG4gIFwiZmZmN2ZiZWNlN2YyZDBkMWU2YTZiZGRiNzRhOWNmMzY5MGMwMDU3MGIwMDQ1YThkMDIzODU4XCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdUJ1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///253\n");

/***/ }),
/* 254 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzPzViNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTdlMWVmYzk5NGM3ZGQxYzc3XCIsXG4gIFwiZjFlZWY2ZDdiNWQ4ZGY2NWIwY2UxMjU2XCIsXG4gIFwiZjFlZWY2ZDdiNWQ4ZGY2NWIwZGQxYzc3OTgwMDQzXCIsXG4gIFwiZjFlZWY2ZDRiOWRhYzk5NGM3ZGY2NWIwZGQxYzc3OTgwMDQzXCIsXG4gIFwiZjFlZWY2ZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTEwMDNmXCIsXG4gIFwiZjdmNGY5ZTdlMWVmZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTEwMDNmXCIsXG4gIFwiZjdmNGY5ZTdlMWVmZDRiOWRhYzk5NGM3ZGY2NWIwZTcyOThhY2UxMjU2OTgwMDQzNjcwMDFmXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9QdVJkLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///254\n");

/***/ }),
/* 255 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzP2VjOTEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZmRlMGRkZmE5ZmI1YzUxYjhhXCIsXG4gIFwiZmVlYmUyZmJiNGI5Zjc2OGExYWUwMTdlXCIsXG4gIFwiZmVlYmUyZmJiNGI5Zjc2OGExYzUxYjhhN2EwMTc3XCIsXG4gIFwiZmVlYmUyZmNjNWMwZmE5ZmI1Zjc2OGExYzUxYjhhN2EwMTc3XCIsXG4gIFwiZmVlYmUyZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3XCIsXG4gIFwiZmZmN2YzZmRlMGRkZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3XCIsXG4gIFwiZmZmN2YzZmRlMGRkZmNjNWMwZmE5ZmI1Zjc2OGExZGQzNDk3YWUwMTdlN2EwMTc3NDkwMDZhXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9SZFB1LmpzXG4vLyBtb2R1bGUgaWQgPSAyNTVcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///255\n");

/***/ }),
/* 256 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduQnUuanM/MjE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJlZGY4YjE3ZmNkYmIyYzdmYjhcIixcbiAgXCJmZmZmY2NhMWRhYjQ0MWI2YzQyMjVlYThcIixcbiAgXCJmZmZmY2NhMWRhYjQ0MWI2YzQyYzdmYjgyNTM0OTRcIixcbiAgXCJmZmZmY2NjN2U5YjQ3ZmNkYmI0MWI2YzQyYzdmYjgyNTM0OTRcIixcbiAgXCJmZmZmY2NjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgwYzJjODRcIixcbiAgXCJmZmZmZDllZGY4YjFjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgwYzJjODRcIixcbiAgXCJmZmZmZDllZGY4YjFjN2U5YjQ3ZmNkYmI0MWI2YzQxZDkxYzAyMjVlYTgyNTM0OTQwODFkNThcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsR25CdS5qc1xuLy8gbW9kdWxlIGlkID0gMjU2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///256\n");

/***/ }),
/* 257 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzPzg0NWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZjdmY2I5YWRkZDhlMzFhMzU0XCIsXG4gIFwiZmZmZmNjYzJlNjk5NzhjNjc5MjM4NDQzXCIsXG4gIFwiZmZmZmNjYzJlNjk5NzhjNjc5MzFhMzU0MDA2ODM3XCIsXG4gIFwiZmZmZmNjZDlmMGEzYWRkZDhlNzhjNjc5MzFhMzU0MDA2ODM3XCIsXG4gIFwiZmZmZmNjZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA1YTMyXCIsXG4gIFwiZmZmZmU1ZjdmY2I5ZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA1YTMyXCIsXG4gIFwiZmZmZmU1ZjdmY2I5ZDlmMGEzYWRkZDhlNzhjNjc5NDFhYjVkMjM4NDQzMDA2ODM3MDA0NTI5XCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbEduLmpzXG4vLyBtb2R1bGUgaWQgPSAyNTdcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///257\n");

/***/ }),
/* 258 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbE9yQnIuanM/YTA1YSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmZmY3YmNmZWM0NGZkOTVmMGVcIixcbiAgXCJmZmZmZDRmZWQ5OGVmZTk5MjljYzRjMDJcIixcbiAgXCJmZmZmZDRmZWQ5OGVmZTk5MjlkOTVmMGU5OTM0MDRcIixcbiAgXCJmZmZmZDRmZWUzOTFmZWM0NGZmZTk5MjlkOTVmMGU5OTM0MDRcIixcbiAgXCJmZmZmZDRmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI4YzJkMDRcIixcbiAgXCJmZmZmZTVmZmY3YmNmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI4YzJkMDRcIixcbiAgXCJmZmZmZTVmZmY3YmNmZWUzOTFmZWM0NGZmZTk5MjllYzcwMTRjYzRjMDI5OTM0MDQ2NjI1MDZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsT3JCci5qc1xuLy8gbW9kdWxlIGlkID0gMjU4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///258\n");

/***/ }),
/* 259 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjU5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9ZbE9yUmQuanM/NjY0MSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmZmVkYTBmZWIyNGNmMDNiMjBcIixcbiAgXCJmZmZmYjJmZWNjNWNmZDhkM2NlMzFhMWNcIixcbiAgXCJmZmZmYjJmZWNjNWNmZDhkM2NmMDNiMjBiZDAwMjZcIixcbiAgXCJmZmZmYjJmZWQ5NzZmZWIyNGNmZDhkM2NmMDNiMjBiZDAwMjZcIixcbiAgXCJmZmZmYjJmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiMTAwMjZcIixcbiAgXCJmZmZmY2NmZmVkYTBmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiMTAwMjZcIixcbiAgXCJmZmZmY2NmZmVkYTBmZWQ5NzZmZWIyNGNmZDhkM2NmYzRlMmFlMzFhMWNiZDAwMjY4MDAwMjZcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL1lsT3JSZC5qc1xuLy8gbW9kdWxlIGlkID0gMjU5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///259\n");

/***/ }),
/* 260 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvQmx1ZXMuanM/OTQ0ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJkZWViZjc5ZWNhZTEzMTgyYmRcIixcbiAgXCJlZmYzZmZiZGQ3ZTc2YmFlZDYyMTcxYjVcIixcbiAgXCJlZmYzZmZiZGQ3ZTc2YmFlZDYzMTgyYmQwODUxOWNcIixcbiAgXCJlZmYzZmZjNmRiZWY5ZWNhZTE2YmFlZDYzMTgyYmQwODUxOWNcIixcbiAgXCJlZmYzZmZjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODQ1OTRcIixcbiAgXCJmN2ZiZmZkZWViZjdjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODQ1OTRcIixcbiAgXCJmN2ZiZmZkZWViZjdjNmRiZWY5ZWNhZTE2YmFlZDY0MjkyYzYyMTcxYjUwODUxOWMwODMwNmJcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLXNpbmdsZS9CbHVlcy5qc1xuLy8gbW9kdWxlIGlkID0gMjYwXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///260\n");

/***/ }),
/* 261 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JlZW5zLmpzP2M2ODgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5pbXBvcnQgcmFtcCBmcm9tIFwiLi4vcmFtcC5qc1wiO1xuXG5leHBvcnQgdmFyIHNjaGVtZSA9IG5ldyBBcnJheSgzKS5jb25jYXQoXG4gIFwiZTVmNWUwYTFkOTliMzFhMzU0XCIsXG4gIFwiZWRmOGU5YmFlNGIzNzRjNDc2MjM4YjQ1XCIsXG4gIFwiZWRmOGU5YmFlNGIzNzRjNDc2MzFhMzU0MDA2ZDJjXCIsXG4gIFwiZWRmOGU5YzdlOWMwYTFkOTliNzRjNDc2MzFhMzU0MDA2ZDJjXCIsXG4gIFwiZWRmOGU5YzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA1YTMyXCIsXG4gIFwiZjdmY2Y1ZTVmNWUwYzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA1YTMyXCIsXG4gIFwiZjdmY2Y1ZTVmNWUwYzdlOWMwYTFkOTliNzRjNDc2NDFhYjVkMjM4YjQ1MDA2ZDJjMDA0NDFiXCJcbikubWFwKGNvbG9ycyk7XG5cbmV4cG9ydCBkZWZhdWx0IHJhbXAoc2NoZW1lKTtcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JlZW5zLmpzXG4vLyBtb2R1bGUgaWQgPSAyNjFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///261\n");

/***/ }),
/* 262 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvR3JleXMuanM/MTE1ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29sb3JzIGZyb20gXCIuLi9jb2xvcnMuanNcIjtcbmltcG9ydCByYW1wIGZyb20gXCIuLi9yYW1wLmpzXCI7XG5cbmV4cG9ydCB2YXIgc2NoZW1lID0gbmV3IEFycmF5KDMpLmNvbmNhdChcbiAgXCJmMGYwZjBiZGJkYmQ2MzYzNjNcIixcbiAgXCJmN2Y3ZjdjY2NjY2M5Njk2OTY1MjUyNTJcIixcbiAgXCJmN2Y3ZjdjY2NjY2M5Njk2OTY2MzYzNjMyNTI1MjVcIixcbiAgXCJmN2Y3ZjdkOWQ5ZDliZGJkYmQ5Njk2OTY2MzYzNjMyNTI1MjVcIixcbiAgXCJmN2Y3ZjdkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjVcIixcbiAgXCJmZmZmZmZmMGYwZjBkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjVcIixcbiAgXCJmZmZmZmZmMGYwZjBkOWQ5ZDliZGJkYmQ5Njk2OTY3MzczNzM1MjUyNTIyNTI1MjUwMDAwMDBcIlxuKS5tYXAoY29sb3JzKTtcblxuZXhwb3J0IGRlZmF1bHQgcmFtcChzY2hlbWUpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLXNpbmdsZS9HcmV5cy5qc1xuLy8gbW9kdWxlIGlkID0gMjYyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///262\n");

/***/ }),
/* 263 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvUHVycGxlcy5qcz82OGY1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImVmZWRmNWJjYmRkYzc1NmJiMVwiLFxuICBcImYyZjBmN2NiYzllMjllOWFjODZhNTFhM1wiLFxuICBcImYyZjBmN2NiYzllMjllOWFjODc1NmJiMTU0Mjc4ZlwiLFxuICBcImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODc1NmJiMTU0Mjc4ZlwiLFxuICBcImYyZjBmN2RhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NlwiLFxuICBcImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzRhMTQ4NlwiLFxuICBcImZjZmJmZGVmZWRmNWRhZGFlYmJjYmRkYzllOWFjODgwN2RiYTZhNTFhMzU0Mjc4ZjNmMDA3ZFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL1B1cnBsZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2M1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///263\n");

/***/ }),
/* 264 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvUmVkcy5qcz9kMDlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZlZTBkMmZjOTI3MmRlMmQyNlwiLFxuICBcImZlZTVkOWZjYWU5MWZiNmE0YWNiMTgxZFwiLFxuICBcImZlZTVkOWZjYWU5MWZiNmE0YWRlMmQyNmE1MGYxNVwiLFxuICBcImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWRlMmQyNmE1MGYxNVwiLFxuICBcImZlZTVkOWZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZFwiLFxuICBcImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZDk5MDAwZFwiLFxuICBcImZmZjVmMGZlZTBkMmZjYmJhMWZjOTI3MmZiNmE0YWVmM2IyY2NiMTgxZGE1MGYxNTY3MDAwZFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL1JlZHMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///264\n");

/***/ }),
/* 265 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return scheme; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ramp_js__ = __webpack_require__(2);\n\n\n\nvar scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1__ramp_js__[\"a\" /* default */])(scheme));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1zaW5nbGUvT3Jhbmdlcy5qcz9kNmRiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb2xvcnMgZnJvbSBcIi4uL2NvbG9ycy5qc1wiO1xuaW1wb3J0IHJhbXAgZnJvbSBcIi4uL3JhbXAuanNcIjtcblxuZXhwb3J0IHZhciBzY2hlbWUgPSBuZXcgQXJyYXkoMykuY29uY2F0KFxuICBcImZlZTZjZWZkYWU2YmU2NTUwZFwiLFxuICBcImZlZWRkZWZkYmU4NWZkOGQzY2Q5NDcwMVwiLFxuICBcImZlZWRkZWZkYmU4NWZkOGQzY2U2NTUwZGE2MzYwM1wiLFxuICBcImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2U2NTUwZGE2MzYwM1wiLFxuICBcImZlZWRkZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNFwiLFxuICBcImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMThjMmQwNFwiLFxuICBcImZmZjVlYmZlZTZjZWZkZDBhMmZkYWU2YmZkOGQzY2YxNjkxM2Q5NDgwMWE2MzYwMzdmMjcwNFwiXG4pLm1hcChjb2xvcnMpO1xuXG5leHBvcnQgZGVmYXVsdCByYW1wKHNjaGVtZSk7XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9kMy1zY2FsZS1jaHJvbWF0aWMvc3JjL3NlcXVlbnRpYWwtc2luZ2xlL09yYW5nZXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///265\n");

/***/ }),
/* 266 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(-4.54 - t * (35.34 - t * (2381.73 - t * (6402.7 - t * (7024.72 - t * 2710.57))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(32.49 + t * (170.73 + t * (52.82 - t * (131.46 - t * (176.58 - t * 67.37))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(81.24 + t * (442.36 - t * (2482.43 - t * (6167.24 - t * (6614.94 - t * 2475.67)))))))\n      + \")\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9jaXZpZGlzLmpzPzc0YmIiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odCkge1xuICB0ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgdCkpO1xuICByZXR1cm4gXCJyZ2IoXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKC00LjU0IC0gdCAqICgzNS4zNCAtIHQgKiAoMjM4MS43MyAtIHQgKiAoNjQwMi43IC0gdCAqICg3MDI0LjcyIC0gdCAqIDI3MTAuNTcpKSkpKSkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCgzMi40OSArIHQgKiAoMTcwLjczICsgdCAqICg1Mi44MiAtIHQgKiAoMTMxLjQ2IC0gdCAqICgxNzYuNTggLSB0ICogNjcuMzcpKSkpKSkpICsgXCIsIFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCg4MS4yNCArIHQgKiAoNDQyLjM2IC0gdCAqICgyNDgyLjQzIC0gdCAqICg2MTY3LjI0IC0gdCAqICg2NjE0Ljk0IC0gdCAqIDI0NzUuNjcpKSkpKSkpXG4gICAgICArIFwiKVwiO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL2NpdmlkaXMuanNcbi8vIG1vZHVsZSBpZCA9IDI2NlxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///266\n");

/***/ }),
/* 267 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(65);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(300, 0.5, 0.0), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(-240, 0.5, 1.0)));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9jdWJlaGVsaXguanM/NzQwNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2N1YmVoZWxpeH0gZnJvbSBcImQzLWNvbG9yXCI7XG5pbXBvcnQge2ludGVycG9sYXRlQ3ViZWhlbGl4TG9uZ30gZnJvbSBcImQzLWludGVycG9sYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGludGVycG9sYXRlQ3ViZWhlbGl4TG9uZyhjdWJlaGVsaXgoMzAwLCAwLjUsIDAuMCksIGN1YmVoZWxpeCgtMjQwLCAwLjUsIDEuMCkpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL2N1YmVoZWxpeC5qc1xuLy8gbW9kdWxlIGlkID0gMjY3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///267\n");

/***/ }),
/* 268 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return warm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cool; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_d3_interpolate__ = __webpack_require__(65);\n\n\n\nvar warm = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(-100, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(80, 1.50, 0.8));\n\nvar cool = Object(__WEBPACK_IMPORTED_MODULE_1_d3_interpolate__[\"a\" /* interpolateCubehelixLong */])(Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(260, 0.75, 0.35), Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])(80, 1.50, 0.8));\n\nvar c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"b\" /* cubehelix */])();\n\n/* harmony default export */ __webpack_exports__[\"b\"] = (function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9yYWluYm93LmpzP2U1MjkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtjdWJlaGVsaXh9IGZyb20gXCJkMy1jb2xvclwiO1xuaW1wb3J0IHtpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmd9IGZyb20gXCJkMy1pbnRlcnBvbGF0ZVwiO1xuXG5leHBvcnQgdmFyIHdhcm0gPSBpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmcoY3ViZWhlbGl4KC0xMDAsIDAuNzUsIDAuMzUpLCBjdWJlaGVsaXgoODAsIDEuNTAsIDAuOCkpO1xuXG5leHBvcnQgdmFyIGNvb2wgPSBpbnRlcnBvbGF0ZUN1YmVoZWxpeExvbmcoY3ViZWhlbGl4KDI2MCwgMC43NSwgMC4zNSksIGN1YmVoZWxpeCg4MCwgMS41MCwgMC44KSk7XG5cbnZhciBjID0gY3ViZWhlbGl4KCk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHQpIHtcbiAgaWYgKHQgPCAwIHx8IHQgPiAxKSB0IC09IE1hdGguZmxvb3IodCk7XG4gIHZhciB0cyA9IE1hdGguYWJzKHQgLSAwLjUpO1xuICBjLmggPSAzNjAgKiB0IC0gMTAwO1xuICBjLnMgPSAxLjUgLSAxLjUgKiB0cztcbiAgYy5sID0gMC44IC0gMC45ICogdHM7XG4gIHJldHVybiBjICsgXCJcIjtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9yYWluYm93LmpzXG4vLyBtb2R1bGUgaWQgPSAyNjhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///268\n");

/***/ }),
/* 269 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_d3_color__ = __webpack_require__(21);\n\n\nvar c = Object(__WEBPACK_IMPORTED_MODULE_0_d3_color__[\"f\" /* rgb */])(),\n    pi_1_3 = Math.PI / 3,\n    pi_2_3 = Math.PI * 2 / 3;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  var x;\n  t = (0.5 - t) * Math.PI;\n  c.r = 255 * (x = Math.sin(t)) * x;\n  c.g = 255 * (x = Math.sin(t + pi_1_3)) * x;\n  c.b = 255 * (x = Math.sin(t + pi_2_3)) * x;\n  return c + \"\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjY5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzP2YwNjYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtyZ2J9IGZyb20gXCJkMy1jb2xvclwiO1xuXG52YXIgYyA9IHJnYigpLFxuICAgIHBpXzFfMyA9IE1hdGguUEkgLyAzLFxuICAgIHBpXzJfMyA9IE1hdGguUEkgKiAyIC8gMztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24odCkge1xuICB2YXIgeDtcbiAgdCA9ICgwLjUgLSB0KSAqIE1hdGguUEk7XG4gIGMuciA9IDI1NSAqICh4ID0gTWF0aC5zaW4odCkpICogeDtcbiAgYy5nID0gMjU1ICogKHggPSBNYXRoLnNpbih0ICsgcGlfMV8zKSkgKiB4O1xuICBjLmIgPSAyNTUgKiAoeCA9IE1hdGguc2luKHQgKyBwaV8yXzMpKSAqIHg7XG4gIHJldHVybiBjICsgXCJcIjtcbn1cblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS9zaW5lYm93LmpzXG4vLyBtb2R1bGUgaWQgPSAyNjlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///269\n");

/***/ }),
/* 270 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony default export */ __webpack_exports__[\"a\"] = (function(t) {\n  t = Math.max(0, Math.min(1, t));\n  return \"rgb(\"\n      + Math.max(0, Math.min(255, Math.round(34.61 + t * (1172.33 - t * (10793.56 - t * (33300.12 - t * (38394.49 - t * 14825.05))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(23.31 + t * (557.33 + t * (1225.33 - t * (3574.96 - t * (1073.77 + t * 707.56))))))) + \", \"\n      + Math.max(0, Math.min(255, Math.round(27.2 + t * (3211.1 - t * (15327.97 - t * (27814 - t * (22569.18 - t * 6838.66)))))))\n      + \")\";\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcwLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS90dXJiby5qcz9iNWRhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uKHQpIHtcbiAgdCA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHQpKTtcbiAgcmV0dXJuIFwicmdiKFwiXG4gICAgICArIE1hdGgubWF4KDAsIE1hdGgubWluKDI1NSwgTWF0aC5yb3VuZCgzNC42MSArIHQgKiAoMTE3Mi4zMyAtIHQgKiAoMTA3OTMuNTYgLSB0ICogKDMzMzAwLjEyIC0gdCAqICgzODM5NC40OSAtIHQgKiAxNDgyNS4wNSkpKSkpKSkgKyBcIiwgXCJcbiAgICAgICsgTWF0aC5tYXgoMCwgTWF0aC5taW4oMjU1LCBNYXRoLnJvdW5kKDIzLjMxICsgdCAqICg1NTcuMzMgKyB0ICogKDEyMjUuMzMgLSB0ICogKDM1NzQuOTYgLSB0ICogKDEwNzMuNzcgKyB0ICogNzA3LjU2KSkpKSkpKSArIFwiLCBcIlxuICAgICAgKyBNYXRoLm1heCgwLCBNYXRoLm1pbigyNTUsIE1hdGgucm91bmQoMjcuMiArIHQgKiAoMzIxMS4xIC0gdCAqICgxNTMyNy45NyAtIHQgKiAoMjc4MTQgLSB0ICogKDIyNTY5LjE4IC0gdCAqIDY4MzguNjYpKSkpKSkpXG4gICAgICArIFwiKVwiO1xufVxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL3R1cmJvLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///270\n");

/***/ }),
/* 271 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return magma; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return inferno; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return plasma; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__colors_js__ = __webpack_require__(0);\n\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\")));\n\nvar magma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nvar inferno = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nvar plasma = ramp(Object(__WEBPACK_IMPORTED_MODULE_0__colors_js__[\"a\" /* default */])(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcxLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2QzLXNjYWxlLWNocm9tYXRpYy9zcmMvc2VxdWVudGlhbC1tdWx0aS92aXJpZGlzLmpzPzg4OTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbG9ycyBmcm9tIFwiLi4vY29sb3JzLmpzXCI7XG5cbmZ1bmN0aW9uIHJhbXAocmFuZ2UpIHtcbiAgdmFyIG4gPSByYW5nZS5sZW5ndGg7XG4gIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgcmV0dXJuIHJhbmdlW01hdGgubWF4KDAsIE1hdGgubWluKG4gLSAxLCBNYXRoLmZsb29yKHQgKiBuKSkpXTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgcmFtcChjb2xvcnMoXCI0NDAxNTQ0NDAyNTY0NTA0NTc0NTA1NTk0NjA3NWE0NjA4NWM0NjBhNWQ0NjBiNWU0NzBkNjA0NzBlNjE0NzEwNjM0NzExNjQ0NzEzNjU0ODE0Njc0ODE2Njg0ODE3Njk0ODE4NmE0ODFhNmM0ODFiNmQ0ODFjNmU0ODFkNmY0ODFmNzA0ODIwNzE0ODIxNzM0ODIzNzQ0ODI0NzU0ODI1NzY0ODI2Nzc0ODI4Nzg0ODI5Nzk0NzJhN2E0NzJjN2E0NzJkN2I0NzJlN2M0NzJmN2Q0NjMwN2U0NjMyN2U0NjMzN2Y0NjM0ODA0NTM1ODE0NTM3ODE0NTM4ODI0NDM5ODM0NDNhODM0NDNiODQ0MzNkODQ0MzNlODU0MjNmODU0MjQwODY0MjQxODY0MTQyODc0MTQ0ODc0MDQ1ODg0MDQ2ODgzZjQ3ODgzZjQ4ODkzZTQ5ODkzZTRhODkzZTRjOGEzZDRkOGEzZDRlOGEzYzRmOGEzYzUwOGIzYjUxOGIzYjUyOGIzYTUzOGIzYTU0OGMzOTU1OGMzOTU2OGMzODU4OGMzODU5OGMzNzVhOGMzNzViOGQzNjVjOGQzNjVkOGQzNTVlOGQzNTVmOGQzNDYwOGQzNDYxOGQzMzYyOGQzMzYzOGQzMjY0OGUzMjY1OGUzMTY2OGUzMTY3OGUzMTY4OGUzMDY5OGUzMDZhOGUyZjZiOGUyZjZjOGUyZTZkOGUyZTZlOGUyZTZmOGUyZDcwOGUyZDcxOGUyYzcxOGUyYzcyOGUyYzczOGUyYjc0OGUyYjc1OGUyYTc2OGUyYTc3OGUyYTc4OGUyOTc5OGUyOTdhOGUyOTdiOGUyODdjOGUyODdkOGUyNzdlOGUyNzdmOGUyNzgwOGUyNjgxOGUyNjgyOGUyNjgyOGUyNTgzOGUyNTg0OGUyNTg1OGUyNDg2OGUyNDg3OGUyMzg4OGUyMzg5OGUyMzhhOGQyMjhiOGQyMjhjOGQyMjhkOGQyMThlOGQyMThmOGQyMTkwOGQyMTkxOGMyMDkyOGMyMDkyOGMyMDkzOGMxZjk0OGMxZjk1OGIxZjk2OGIxZjk3OGIxZjk4OGIxZjk5OGExZjlhOGExZTliOGExZTljODkxZTlkODkxZjllODkxZjlmODgxZmEwODgxZmExODgxZmExODcxZmEyODcyMGEzODYyMGE0ODYyMWE1ODUyMWE2ODUyMmE3ODUyMmE4ODQyM2E5ODMyNGFhODMyNWFiODIyNWFjODIyNmFkODEyN2FkODEyOGFlODAyOWFmN2YyYWIwN2YyY2IxN2UyZGIyN2QyZWIzN2MyZmI0N2MzMWI1N2IzMmI2N2EzNGI2NzkzNWI3NzkzN2I4NzgzOGI5NzczYWJhNzYzYmJiNzUzZGJjNzQzZmJjNzM0MGJkNzI0MmJlNzE0NGJmNzA0NmMwNmY0OGMxNmU0YWMxNmQ0Y2MyNmM0ZWMzNmI1MGM0NmE1MmM1Njk1NGM1Njg1NmM2Njc1OGM3NjU1YWM4NjQ1Y2M4NjM1ZWM5NjI2MGNhNjA2M2NiNWY2NWNiNWU2N2NjNWM2OWNkNWI2Y2NkNWE2ZWNlNTg3MGNmNTc3M2QwNTY3NWQwNTQ3N2QxNTM3YWQxNTE3Y2QyNTA3ZmQzNGU4MWQzNGQ4NGQ0NGI4NmQ1NDk4OWQ1NDg4YmQ2NDY4ZWQ2NDU5MGQ3NDM5M2Q3NDE5NWQ4NDA5OGQ4M2U5YmQ5M2M5ZGQ5M2JhMGRhMzlhMmRhMzdhNWRiMzZhOGRiMzRhYWRjMzJhZGRjMzBiMGRkMmZiMmRkMmRiNWRlMmJiOGRlMjliYWRlMjhiZGRmMjZjMGRmMjVjMmRmMjNjNWUwMjFjOGUwMjBjYWUxMWZjZGUxMWRkMGUxMWNkMmUyMWJkNWUyMWFkOGUyMTlkYWUzMTlkZGUzMThkZmUzMThlMmU0MThlNWU0MTllN2U0MTllYWU1MWFlY2U1MWJlZmU1MWNmMWU1MWRmNGU2MWVmNmU2MjBmOGU2MjFmYmU3MjNmZGU3MjVcIikpO1xuXG5leHBvcnQgdmFyIG1hZ21hID0gcmFtcChjb2xvcnMoXCIwMDAwMDQwMTAwMDUwMTAxMDYwMTAxMDgwMjAxMDkwMjAyMGIwMjAyMGQwMzAzMGYwMzAzMTIwNDA0MTQwNTA0MTYwNjA1MTgwNjA1MWEwNzA2MWMwODA3MWUwOTA3MjAwYTA4MjIwYjA5MjQwYzA5MjYwZDBhMjkwZTBiMmIxMDBiMmQxMTBjMmYxMjBkMzExMzBkMzQxNDBlMzYxNTBlMzgxNjBmM2IxODBmM2QxOTEwM2YxYTEwNDIxYzEwNDQxZDExNDcxZTExNDkyMDExNGIyMTExNGUyMjExNTAyNDEyNTMyNTEyNTUyNzEyNTgyOTExNWEyYTExNWMyYzExNWYyZDExNjEyZjExNjMzMTExNjUzMzEwNjczNDEwNjkzNjEwNmIzODEwNmMzOTBmNmUzYjBmNzAzZDBmNzEzZjBmNzI0MDBmNzQ0MjBmNzU0NDBmNzY0NTEwNzc0NzEwNzg0OTEwNzg0YTEwNzk0YzExN2E0ZTExN2I0ZjEyN2I1MTEyN2M1MjEzN2M1NDEzN2Q1NjE0N2Q1NzE1N2U1OTE1N2U1YTE2N2U1YzE2N2Y1ZDE3N2Y1ZjE4N2Y2MDE4ODA2MjE5ODA2NDFhODA2NTFhODA2NzFiODA2ODFjODE2YTFjODE2YjFkODE2ZDFkODE2ZTFlODE3MDFmODE3MjFmODE3MzIwODE3NTIxODE3NjIxODE3ODIyODE3OTIyODI3YjIzODI3YzIzODI3ZTI0ODI4MDI1ODI4MTI1ODE4MzI2ODE4NDI2ODE4NjI3ODE4ODI3ODE4OTI4ODE4YjI5ODE4YzI5ODE4ZTJhODE5MDJhODE5MTJiODE5MzJiODA5NDJjODA5NjJjODA5ODJkODA5OTJkODA5YjJlN2Y5YzJlN2Y5ZTJmN2ZhMDJmN2ZhMTMwN2VhMzMwN2VhNTMxN2VhNjMxN2RhODMyN2RhYTMzN2RhYjMzN2NhZDM0N2NhZTM0N2JiMDM1N2JiMjM1N2JiMzM2N2FiNTM2N2FiNzM3NzliODM3NzliYTM4NzhiYzM5NzhiZDM5NzdiZjNhNzdjMDNhNzZjMjNiNzVjNDNjNzVjNTNjNzRjNzNkNzNjODNlNzNjYTNlNzJjYzNmNzFjZDQwNzFjZjQwNzBkMDQxNmZkMjQyNmZkMzQzNmVkNTQ0NmRkNjQ1NmNkODQ1NmNkOTQ2NmJkYjQ3NmFkYzQ4NjlkZTQ5NjhkZjRhNjhlMDRjNjdlMjRkNjZlMzRlNjVlNDRmNjRlNTUwNjRlNzUyNjNlODUzNjJlOTU0NjJlYTU2NjFlYjU3NjBlYzU4NjBlZDVhNWZlZTViNWVlZjVkNWVmMDVmNWVmMTYwNWRmMjYyNWRmMjY0NWNmMzY1NWNmNDY3NWNmNDY5NWNmNTZiNWNmNjZjNWNmNjZlNWNmNzcwNWNmNzcyNWNmODc0NWNmODc2NWNmOTc4NWRmOTc5NWRmOTdiNWRmYTdkNWVmYTdmNWVmYTgxNWZmYjgzNWZmYjg1NjBmYjg3NjFmYzg5NjFmYzhhNjJmYzhjNjNmYzhlNjRmYzkwNjVmZDkyNjZmZDk0NjdmZDk2NjhmZDk4NjlmZDlhNmFmZDliNmJmZTlkNmNmZTlmNmRmZWExNmVmZWEzNmZmZWE1NzFmZWE3NzJmZWE5NzNmZWFhNzRmZWFjNzZmZWFlNzdmZWIwNzhmZWIyN2FmZWI0N2JmZWI2N2NmZWI3N2VmZWI5N2ZmZWJiODFmZWJkODJmZWJmODRmZWMxODVmZWMyODdmZWM0ODhmZWM2OGFmZWM4OGNmZWNhOGRmZWNjOGZmZWNkOTBmZWNmOTJmZWQxOTRmZWQzOTVmZWQ1OTdmZWQ3OTlmZWQ4OWFmZGRhOWNmZGRjOWVmZGRlYTBmZGUwYTFmZGUyYTNmZGUzYTVmZGU1YTdmZGU3YTlmZGU5YWFmZGViYWNmY2VjYWVmY2VlYjBmY2YwYjJmY2YyYjRmY2Y0YjZmY2Y2YjhmY2Y3YjlmY2Y5YmJmY2ZiYmRmY2ZkYmZcIikpO1xuXG5leHBvcnQgdmFyIGluZmVybm8gPSByYW1wKGNvbG9ycyhcIjAwMDAwNDAxMDAwNTAxMDEwNjAxMDEwODAyMDEwYTAyMDIwYzAyMDIwZTAzMDIxMDA0MDMxMjA0MDMxNDA1MDQxNzA2MDQxOTA3MDUxYjA4MDUxZDA5MDYxZjBhMDcyMjBiMDcyNDBjMDgyNjBkMDgyOTBlMDkyYjEwMDkyZDExMGEzMDEyMGEzMjE0MGIzNDE1MGIzNzE2MGIzOTE4MGMzYzE5MGMzZTFiMGM0MTFjMGM0MzFlMGM0NTFmMGM0ODIxMGM0YTIzMGM0YzI0MGM0ZjI2MGM1MTI4MGI1MzI5MGI1NTJiMGI1NzJkMGI1OTJmMGE1YjMxMGE1YzMyMGE1ZTM0MGE1ZjM2MDk2MTM4MDk2MjM5MDk2MzNiMDk2NDNkMDk2NTNlMDk2NjQwMGE2NzQyMGE2ODQ0MGE2ODQ1MGE2OTQ3MGI2YTQ5MGI2YTRhMGM2YjRjMGM2YjRkMGQ2YzRmMGQ2YzUxMGU2YzUyMGU2ZDU0MGY2ZDU1MGY2ZDU3MTA2ZTU5MTA2ZTVhMTE2ZTVjMTI2ZTVkMTI2ZTVmMTM2ZTYxMTM2ZTYyMTQ2ZTY0MTU2ZTY1MTU2ZTY3MTY2ZTY5MTY2ZTZhMTc2ZTZjMTg2ZTZkMTg2ZTZmMTk2ZTcxMTk2ZTcyMWE2ZTc0MWE2ZTc1MWI2ZTc3MWM2ZDc4MWM2ZDdhMWQ2ZDdjMWQ2ZDdkMWU2ZDdmMWU2YzgwMWY2YzgyMjA2Yzg0MjA2Yjg1MjE2Yjg3MjE2Yjg4MjI2YThhMjI2YThjMjM2OThkMjM2OThmMjQ2OTkwMjU2ODkyMjU2ODkzMjY2Nzk1MjY2Nzk3Mjc2Njk4Mjc2NjlhMjg2NTliMjk2NDlkMjk2NDlmMmE2M2EwMmE2M2EyMmI2MmEzMmM2MWE1MmM2MGE2MmQ2MGE4MmU1ZmE5MmU1ZWFiMmY1ZWFkMzA1ZGFlMzA1Y2IwMzE1YmIxMzI1YWIzMzI1YWI0MzM1OWI2MzQ1OGI3MzU1N2I5MzU1NmJhMzY1NWJjMzc1NGJkMzg1M2JmMzk1MmMwM2E1MWMxM2E1MGMzM2I0ZmM0M2M0ZWM2M2Q0ZGM3M2U0Y2M4M2Y0YmNhNDA0YWNiNDE0OWNjNDI0OGNlNDM0N2NmNDQ0NmQwNDU0NWQyNDY0NGQzNDc0M2Q0NDg0MmQ1NGE0MWQ3NGIzZmQ4NGMzZWQ5NGQzZGRhNGUzY2RiNTAzYmRkNTEzYWRlNTIzOGRmNTMzN2UwNTUzNmUxNTYzNWUyNTczNGUzNTkzM2U0NWEzMWU1NWMzMGU2NWQyZmU3NWUyZWU4NjAyZGU5NjEyYmVhNjMyYWViNjQyOWViNjYyOGVjNjcyNmVkNjkyNWVlNmEyNGVmNmMyM2VmNmUyMWYwNmYyMGYxNzExZmYxNzMxZGYyNzQxY2YzNzYxYmYzNzgxOWY0NzkxOGY1N2IxN2Y1N2QxNWY2N2UxNGY2ODAxM2Y3ODIxMmY3ODQxMGY4ODUwZmY4ODcwZWY4ODkwY2Y5OGIwYmY5OGMwYWY5OGUwOWZhOTAwOGZhOTIwN2ZhOTQwN2ZiOTYwNmZiOTcwNmZiOTkwNmZiOWIwNmZiOWQwN2ZjOWYwN2ZjYTEwOGZjYTMwOWZjYTUwYWZjYTYwY2ZjYTgwZGZjYWEwZmZjYWMxMWZjYWUxMmZjYjAxNGZjYjIxNmZjYjQxOGZiYjYxYWZiYjgxZGZiYmExZmZiYmMyMWZiYmUyM2ZhYzAyNmZhYzIyOGZhYzQyYWZhYzYyZGY5YzcyZmY5YzkzMmY5Y2IzNWY4Y2QzN2Y4Y2YzYWY3ZDEzZGY3ZDM0MGY2ZDU0M2Y2ZDc0NmY1ZDk0OWY1ZGI0Y2Y0ZGQ0ZmY0ZGY1M2Y0ZTE1NmYzZTM1YWYzZTU1ZGYyZTY2MWYyZTg2NWYyZWE2OWYxZWM2ZGYxZWQ3MWYxZWY3NWYxZjE3OWYyZjI3ZGYyZjQ4MmYzZjU4NmYzZjY4YWY0Zjg4ZWY1Zjk5MmY2ZmE5NmY4ZmI5YWY5ZmM5ZGZhZmRhMWZjZmZhNFwiKSk7XG5cbmV4cG9ydCB2YXIgcGxhc21hID0gcmFtcChjb2xvcnMoXCIwZDA4ODcxMDA3ODgxMzA3ODkxNjA3OGExOTA2OGMxYjA2OGQxZDA2OGUyMDA2OGYyMjA2OTAyNDA2OTEyNjA1OTEyODA1OTIyYTA1OTMyYzA1OTQyZTA1OTUyZjA1OTYzMTA1OTczMzA1OTczNTA0OTgzNzA0OTkzODA0OWEzYTA0OWEzYzA0OWIzZTA0OWMzZjA0OWM0MTA0OWQ0MzAzOWU0NDAzOWU0NjAzOWY0ODAzOWY0OTAzYTA0YjAzYTE0YzAyYTE0ZTAyYTI1MDAyYTI1MTAyYTM1MzAyYTM1NTAyYTQ1NjAxYTQ1ODAxYTQ1OTAxYTU1YjAxYTU1YzAxYTY1ZTAxYTY2MDAxYTY2MTAwYTc2MzAwYTc2NDAwYTc2NjAwYTc2NzAwYTg2OTAwYTg2YTAwYTg2YzAwYTg2ZTAwYTg2ZjAwYTg3MTAwYTg3MjAxYTg3NDAxYTg3NTAxYTg3NzAxYTg3ODAxYTg3YTAyYTg3YjAyYTg3ZDAzYTg3ZTAzYTg4MDA0YTg4MTA0YTc4MzA1YTc4NDA1YTc4NjA2YTY4NzA3YTY4ODA4YTY4YTA5YTU4YjBhYTU4ZDBiYTU4ZTBjYTQ4ZjBkYTQ5MTBlYTM5MjBmYTM5NDEwYTI5NTExYTE5NjEzYTE5ODE0YTA5OTE1OWY5YTE2OWY5YzE3OWU5ZDE4OWQ5ZTE5OWRhMDFhOWNhMTFiOWJhMjFkOWFhMzFlOWFhNTFmOTlhNjIwOThhNzIxOTdhODIyOTZhYTIzOTVhYjI0OTRhYzI2OTRhZDI3OTNhZTI4OTJiMDI5OTFiMTJhOTBiMjJiOGZiMzJjOGViNDJlOGRiNTJmOGNiNjMwOGJiNzMxOGFiODMyODliYTMzODhiYjM0ODhiYzM1ODdiZDM3ODZiZTM4ODViZjM5ODRjMDNhODNjMTNiODJjMjNjODFjMzNkODBjNDNlN2ZjNTQwN2VjNjQxN2RjNzQyN2NjODQzN2JjOTQ0N2FjYTQ1N2FjYjQ2NzljYzQ3NzhjYzQ5NzdjZDRhNzZjZTRiNzVjZjRjNzRkMDRkNzNkMTRlNzJkMjRmNzFkMzUxNzFkNDUyNzBkNTUzNmZkNTU0NmVkNjU1NmRkNzU2NmNkODU3NmJkOTU4NmFkYTVhNmFkYTViNjlkYjVjNjhkYzVkNjdkZDVlNjZkZTVmNjVkZTYxNjRkZjYyNjNlMDYzNjNlMTY0NjJlMjY1NjFlMjY2NjBlMzY4NWZlNDY5NWVlNTZhNWRlNTZiNWRlNjZjNWNlNzZlNWJlNzZmNWFlODcwNTllOTcxNThlOTcyNTdlYTc0NTdlYjc1NTZlYjc2NTVlYzc3NTRlZDc5NTNlZDdhNTJlZTdiNTFlZjdjNTFlZjdlNTBmMDdmNGZmMDgwNGVmMTgxNGRmMTgzNGNmMjg0NGJmMzg1NGJmMzg3NGFmNDg4NDlmNDg5NDhmNThiNDdmNThjNDZmNjhkNDVmNjhmNDRmNzkwNDRmNzkxNDNmNzkzNDJmODk0NDFmODk1NDBmOTk3M2ZmOTk4M2VmOTlhM2VmYTliM2RmYTljM2NmYTllM2JmYjlmM2FmYmExMzlmYmEyMzhmY2EzMzhmY2E1MzdmY2E2MzZmY2E4MzVmY2E5MzRmZGFiMzNmZGFjMzNmZGFlMzJmZGFmMzFmZGIxMzBmZGIyMmZmZGI0MmZmZGI1MmVmZWI3MmRmZWI4MmNmZWJhMmNmZWJiMmJmZWJkMmFmZWJlMmFmZWMwMjlmZGMyMjlmZGMzMjhmZGM1MjdmZGM2MjdmZGM4MjdmZGNhMjZmZGNiMjZmY2NkMjVmY2NlMjVmY2QwMjVmY2QyMjVmYmQzMjRmYmQ1MjRmYmQ3MjRmYWQ4MjRmYWRhMjRmOWRjMjRmOWRkMjVmOGRmMjVmOGUxMjVmN2UyMjVmN2U0MjVmNmU2MjZmNmU4MjZmNWU5MjZmNWViMjdmNGVkMjdmM2VlMjdmM2YwMjdmMmYyMjdmMWY0MjZmMWY1MjVmMGY3MjRmMGY5MjFcIikpO1xuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9ub2RlX21vZHVsZXMvZDMtc2NhbGUtY2hyb21hdGljL3NyYy9zZXF1ZW50aWFsLW11bHRpL3ZpcmlkaXMuanNcbi8vIG1vZHVsZSBpZCA9IDI3MVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///271\n");

/***/ }),
/* 272 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export triangulate */\n/* unused harmony export flatten */\n/* unused harmony export offsetPolygon */\n/* unused harmony export extrudePolygon */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = extrudePolyline;\n/* unused harmony export extrudeGeoJSON */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_earcut__ = __webpack_require__(273);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_earcut___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_earcut__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__simplify__ = __webpack_require__(274);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__math__ = __webpack_require__(275);\n// TODO fitRect x, y are negative?\n// TODO Dimensions\n// TODO bevel=\"top\"|\"bottom\"\n\n\n\n\n\nfunction triangulate(vertices, holes, dimensions=2) {\n    return __WEBPACK_IMPORTED_MODULE_0_earcut___default()(vertices, holes, dimensions);\n};\n\nfunction flatten(data) {\n    return __WEBPACK_IMPORTED_MODULE_0_earcut___default.a.flatten(data);\n}\n\nconst v1 = [];\nconst v2 = [];\nconst v = [];\n\nfunction innerOffsetPolygon(\n    vertices, out, start, end, outStart, offset, miterLimit, close\n) {\n    const checkMiterLimit = miterLimit != null;\n    let outOff = outStart;\n    let indicesMap = null;\n    if (checkMiterLimit) {\n        indicesMap = new Uint32Array(end - start);\n    }\n    for (let i = start; i < end; i++) {\n        const nextIdx = i === end - 1 ? start : i + 1;\n        const prevIdx = i === start ? end - 1 : i - 1;\n        const x1 = vertices[prevIdx * 2];\n        const y1 = vertices[prevIdx * 2 + 1];\n        const x2 = vertices[i * 2];\n        const y2 = vertices[i * 2 + 1];\n        const x3 = vertices[nextIdx * 2];\n        const y3 = vertices[nextIdx * 2 + 1];\n\n        v1[0] = x2 - x1;\n        v1[1] = y2 - y1;\n        v2[0] = x3 - x2;\n        v2[1] = y3 - y2;\n\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v1, v1);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v2, v2);\n\n        checkMiterLimit && (indicesMap[i] = outOff);\n        if (!close && i === start) {\n            v[0] = v2[1];\n            v[1] = -v2[0];\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n            out[outOff * 2] = x2 + v[0] * offset;\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\n            outOff++;\n        }\n        else if (!close && i === end - 1) {\n            v[0] = v1[1];\n            v[1] = -v1[0];\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n            out[outOff * 2] = x2 + v[0] * offset;\n            out[outOff * 2 + 1] = y2 + v[1] * offset;\n            outOff++;\n        }\n        else {\n            // PENDING Why using sub will lost the direction info.\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"c\" /* v2Add */])(v, v2, v1);\n            const tmp = v[1];\n            v[1] = -v[0];\n            v[0] = tmp;\n\n            Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"e\" /* v2Normalize */])(v, v);\n\n            const cosA = Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"d\" /* v2Dot */])(v, v2);\n            const sinA = Math.sqrt(1 - cosA * cosA);\n            // PENDING\n            const miter = offset * Math.min(10, 1 / sinA);\n\n            const isCovex = offset * cosA < 0;\n\n            if (checkMiterLimit && (1 / sinA) > miterLimit && isCovex) {\n                const mx = x2 + v[0] * offset;\n                const my = y2 + v[1] * offset;\n                const halfA = Math.acos(sinA) / 2;\n                const dist = Math.tan(halfA) * Math.abs(offset);\n                out[outOff * 2] = mx + v[1] * dist;\n                out[outOff * 2 + 1] = my - v[0] * dist;\n                outOff++;\n                out[outOff * 2] = mx - v[1] * dist;\n                out[outOff * 2 + 1] = my + v[0] * dist;\n                outOff++;\n            }\n            else {\n                out[outOff * 2] = x2 + v[0] * miter;\n                out[outOff * 2 + 1] = y2 + v[1] * miter;\n                outOff++;\n            }\n        }\n    }\n\n    return indicesMap;\n}\n\nfunction offsetPolygon(vertices, holes, offset, miterLimit, close) {\n    const offsetVertices = miterLimit != null ? [] : new Float32Array(vertices.length);\n    const exteriorSize = (holes && holes.length) ? holes[0] : vertices.length / 2;\n\n    innerOffsetPolygon(\n        vertices, offsetVertices, 0, exteriorSize, 0, offset, miterLimit, close, false\n    );\n\n    if (holes) {\n        for (let i = 0; i < holes.length; i++) {\n            const start = holes[i];\n            const end = holes[i + 1] || vertices.length / 2;\n            innerOffsetPolygon(\n                vertices, offsetVertices, start, end,\n                miterLimit != null ? offsetVertices.length / 2 : start,\n                offset, miterLimit, close\n            );\n        }\n    }\n\n    return offsetVertices;\n}\n\nfunction reversePoints(points, stride, start, end) {\n    for (let i = 0; i < Math.floor((end - start) / 2); i++) {\n        for (let j = 0; j < stride; j++) {\n            const a = (i + start) * stride + j;\n            const b = (end - i - 1) * stride + j;\n            const tmp = points[a];\n            points[a] = points[b];\n            points[b] = tmp;\n        }\n    }\n\n    return points;\n}\n\nfunction convertToClockwise(vertices, holes) {\n    let polygonVertexCount = vertices.length / 2;\n    let start = 0;\n    let end = holes && holes.length ? holes[0] : polygonVertexCount;\n    if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(vertices, start, end) > 0) {\n        reversePoints(vertices, 2, start, end);\n    }\n    for (let h = 1; h < (holes ? holes.length : 0) + 1; h++) {\n        start = holes[h - 1];\n        end = holes[h] || polygonVertexCount;\n        if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(vertices, start, end) < 0) {\n            reversePoints(vertices, 2, start, end);\n        }\n    }\n}\n\nfunction normalizeOpts(opts) {\n\n    opts.depth = opts.depth || 1;\n    opts.bevelSize = opts.bevelSize || 0;\n    opts.bevelSegments = opts.bevelSegments == null ? 2 : opts.bevelSegments;\n    opts.smoothSide = opts.smoothSide || false;\n    opts.smoothBevel = opts.smoothBevel || false;\n    opts.simplify = opts.simplify || 0;\n\n    // Normalize bevel options.\n    if (typeof opts.depth === 'number') {\n        opts.bevelSize = Math.min(!(opts.bevelSegments > 0) ? 0 : opts.bevelSize, opts.depth / 2);\n    }\n    if (!(opts.bevelSize > 0)) {\n        opts.bevelSegments = 0;\n    }\n    opts.bevelSegments = Math.round(opts.bevelSegments);\n\n    const boundingRect = opts.boundingRect;\n    opts.translate = opts.translate || [0, 0];\n    opts.scale = opts.scale || [1, 1];\n    if (opts.fitRect) {\n        let targetX = opts.fitRect.x == null\n            ? (boundingRect.x || 0)\n            : opts.fitRect.x;\n        let targetY = opts.fitRect.y == null\n            ? (boundingRect.y || 0)\n            : opts.fitRect.y;\n        let targetWidth = opts.fitRect.width;\n        let targetHeight = opts.fitRect.height;\n        if (targetWidth == null) {\n            if (targetHeight != null) {\n                targetWidth = targetHeight / boundingRect.height * boundingRect.width;\n            }\n            else {\n                targetWidth = boundingRect.width;\n                targetHeight = boundingRect.height;\n            }\n        }\n        else if (targetHeight == null) {\n            targetHeight = targetWidth / boundingRect.width * boundingRect.height;\n        }\n        opts.scale = [\n            targetWidth / boundingRect.width,\n            targetHeight / boundingRect.height\n        ];\n        opts.translate = [\n            (targetX - boundingRect.x) * opts.scale[0],\n            (targetY - boundingRect.y) * opts.scale[1]\n        ];\n    }\n}\n\nfunction generateNormal(indices, position) {\n\n    function v3Set(p, a, b, c) {\n        p[0] = a; p[1] = b; p[2] = c;\n    }\n\n    const p1 = [];\n    const p2 = [];\n    const p3 = [];\n\n    const v21 = [];\n    const v32 = [];\n\n    const n = [];\n\n    const len = indices.length;\n    const normals = new Float32Array(position.length);\n    for (let f = 0; f < len;) {\n        const i1 = indices[f++] * 3;\n        const i2 = indices[f++] * 3;\n        const i3 = indices[f++] * 3;\n\n        v3Set(p1, position[i1], position[i1 + 1], position[i1 + 2]);\n        v3Set(p2, position[i2], position[i2 + 1], position[i2 + 2]);\n        v3Set(p3, position[i3], position[i3 + 1], position[i3 + 2]);\n\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"h\" /* v3Sub */])(v21, p1, p2);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"h\" /* v3Sub */])(v32, p2, p3);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"f\" /* v3Cross */])(n, v21, v32);\n        // Already be weighted by the triangle area\n        for (let i = 0; i < 3; i++) {\n            normals[i1 + i] = normals[i1 + i] + n[i];\n            normals[i2 + i] = normals[i2 + i] + n[i];\n            normals[i3 + i] = normals[i3 + i] + n[i];\n        }\n    }\n\n    for (var i = 0; i < normals.length;) {\n        v3Set(n, normals[i], normals[i+1], normals[i+2]);\n        Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"g\" /* v3Normalize */])(n, n);\n        normals[i++] = n[0];\n        normals[i++] = n[1];\n        normals[i++] = n[2];\n    }\n\n    return normals;\n}\n// 0,0----1,0\n// 0,1----1,1\nconst quadToTriangle = [\n    [0, 0], [1, 0], [1, 1],\n    [0, 0], [1, 1], [0, 1]\n];\n\n// Add side vertices and indices. Include bevel.\nfunction addExtrudeSide(\n    out, {vertices, topVertices, depth, rect}, start, end,\n    cursors, opts\n) {\n    const ringVertexCount = end - start;\n    const splitSide = opts.smoothSide ? 1 : 2;\n    const splitRingVertexCount = ringVertexCount * splitSide;\n\n    const splitBevel = opts.smoothBevel ? 1 : 2;\n    const bevelSize = Math.min(depth / 2, opts.bevelSize);\n    const bevelSegments = opts.bevelSegments;\n    const vertexOffset = cursors.vertex;\n    const size = Math.max(rect.width, rect.height);\n\n    // Side vertices\n    if (bevelSize > 0) {\n\n        const v0 = [0, 0, 1];\n        const v1 = [];\n        const v2 = [0, 0, -1];\n        const v = [];\n\n        let ringCount = 0;\n        let vLen = new Float32Array(ringVertexCount);\n        for (let k = 0; k < 2; k++) {\n            const z = (k === 0 ? (depth - bevelSize) : bevelSize);\n            for (let s = 0; s <= bevelSegments * splitBevel; s++) {\n                let uLen = 0;\n                let prevX;\n                let prevY;\n                for (let i = 0; i < ringVertexCount; i++) {\n\n                    for (let j = 0; j < splitSide; j++) {\n                        // TODO Cache and optimize\n                        let idx = ((i + j) % ringVertexCount + start) * 2;\n                        v1[0] = vertices[idx] - topVertices[idx];\n                        v1[1] = vertices[idx + 1] - topVertices[idx + 1];\n                        v1[2] = 0;\n                        const l = Math.sqrt(v1[0] * v1[0] + v1[1] * v1[1]);\n                        v1[0] /= l;\n                        v1[1] /= l;\n\n                        const t = (Math.floor(s / splitBevel) + (s % splitBevel)) / bevelSegments;\n                        k === 0 ? Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* slerp */])(v, v0, v1, t)\n                            : Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"b\" /* slerp */])(v, v1, v2, t);\n\n                        const t2 = k === 0  ? t : 1 - t;\n                        const a = bevelSize * Math.sin(t2 * Math.PI / 2);\n                        const b = l * Math.cos(t2 * Math.PI / 2);\n\n                        // ellipse radius\n                        const r = bevelSize * l / Math.sqrt(a * a + b * b);\n\n                        const x = v[0] * r + topVertices[idx];\n                        const y = v[1] * r + topVertices[idx + 1];\n                        const zz = v[2] * r + z;\n                        out.position[cursors.vertex * 3] = x;\n                        out.position[cursors.vertex * 3 + 1] = y;\n                        out.position[cursors.vertex * 3 + 2] = zz;\n\n                        // TODO Cache and optimize\n                        if (i > 0 || j > 0) {\n                            uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\n                        }\n                        if (s > 0 || k > 0) {\n                            let tmp = (cursors.vertex - splitRingVertexCount) * 3;\n                            let prevX2 = out.position[tmp];\n                            let prevY2 = out.position[tmp + 1];\n                            let prevZ2 = out.position[tmp + 2];\n\n                            vLen[i] += Math.sqrt(\n                                (prevX2 - x) * (prevX2 - x)\n                                + (prevY2 - y) * (prevY2 - y)\n                                + (prevZ2 - zz) * (prevZ2 - zz)\n                            );\n                        }\n                        out.uv[cursors.vertex * 2] = uLen / size;\n                        out.uv[cursors.vertex * 2 + 1] = vLen[i] / size;\n\n                        prevX = x;\n                        prevY = y;\n                        cursors.vertex++;\n                    }\n\n                    if ((splitBevel > 1 && (s % splitBevel)) || (splitBevel === 1 && s >= 1)) {\n                        for (let f = 0; f < 6; f++) {\n                            const m = (quadToTriangle[f][0] + i * splitSide) % splitRingVertexCount;\n                            const n = quadToTriangle[f][1] + ringCount;\n                            out.indices[cursors.index++] = (n - 1) * splitRingVertexCount + m + vertexOffset;\n                        }\n                    }\n                }\n\n                ringCount++;\n            }\n        }\n    }\n    else {\n        for (let k = 0; k < 2; k++) {\n            const z = k === 0 ? depth - bevelSize : bevelSize;\n            let uLen = 0;\n            let prevX;\n            let prevY;\n            for (let i = 0; i < ringVertexCount; i++) {\n                for (let m = 0; m < splitSide; m++) {\n                    const idx = ((i + m) % ringVertexCount + start) * 2;\n                    const x = vertices[idx];\n                    const y = vertices[idx + 1];\n                    out.position[cursors.vertex * 3] = x;\n                    out.position[cursors.vertex * 3 + 1] = y;\n                    out.position[cursors.vertex * 3 + 2] = z;\n                    if (i > 0 || m > 0) {\n                        uLen += Math.sqrt((prevX - x) * (prevX - x) + (prevY - y) * (prevY - y));\n                    }\n                    out.uv[cursors.vertex * 2] = uLen / size;\n                    out.uv[cursors.vertex * 2 + 1] = z / size;\n                    prevX = x;\n                    prevY = y;\n\n                    cursors.vertex++;\n                }\n            }\n        }\n    }\n    // Connect the side\n    const sideStartRingN = bevelSize > 0 ? (bevelSegments * splitBevel + 1) : 1;\n    for (let i = 0; i < ringVertexCount; i++) {\n        for (let f = 0; f < 6; f++) {\n            const m = (quadToTriangle[f][0] + i * splitSide) % splitRingVertexCount;\n            const n = quadToTriangle[f][1] + sideStartRingN;\n            out.indices[cursors.index++] = (n - 1) * splitRingVertexCount + m + vertexOffset;\n        }\n    }\n}\n\nfunction addTopAndBottom({indices, vertices, topVertices, rect, depth}, out, cursors, opts) {\n    if (vertices.length <= 4) {\n        return;\n    }\n\n    const vertexOffset = cursors.vertex;\n    // Top indices\n    const indicesLen = indices.length;\n    for (let i = 0; i < indicesLen; i++) {\n        out.indices[cursors.index++] = vertexOffset + indices[i];\n    }\n    const size = Math.max(rect.width, rect.height);\n    // Top and bottom vertices\n    for (let k = 0; k < (opts.excludeBottom ? 1 : 2); k++) {\n        for (let i = 0; i < topVertices.length; i += 2) {\n            const x = topVertices[i];\n            const y = topVertices[i + 1];\n            out.position[cursors.vertex * 3] = x;\n            out.position[cursors.vertex * 3 + 1] = y;\n            out.position[cursors.vertex * 3 + 2] = (1 - k) * depth;\n\n            out.uv[cursors.vertex * 2] = (x - rect.x) / size;\n            out.uv[cursors.vertex * 2 + 1] = (y - rect.y) / size;\n            cursors.vertex++;\n        }\n    }\n    // Bottom indices\n    if (!opts.excludeBottom) {\n        const vertexCount = vertices.length / 2;\n        for (let i = 0; i < indicesLen; i += 3) {\n            for (let k = 0; k < 3; k++) {\n                out.indices[cursors.index++] = vertexOffset + vertexCount + indices[i + 2 - k];\n            }\n        }\n    }\n}\n\n\nfunction innerExtrudeTriangulatedPolygon(preparedData, opts) {\n    let indexCount = 0;\n    let vertexCount = 0;\n\n    for (let p = 0; p < preparedData.length; p++) {\n        const {indices, vertices, holes, depth} = preparedData[p];\n        const polygonVertexCount = vertices.length / 2;\n        const bevelSize = Math.min(depth / 2, opts.bevelSize);\n        const bevelSegments = !(bevelSize > 0) ? 0 : opts.bevelSegments;\n\n        indexCount += indices.length * (opts.excludeBottom ? 1 : 2);\n        vertexCount += polygonVertexCount * (opts.excludeBottom ? 1 : 2);\n        const ringCount = 2 + bevelSegments * 2;\n\n        let start = 0;\n        let end = 0;\n        for (let h = 0; h < (holes ? holes.length : 0) + 1; h++) {\n            if (h === 0) {\n                end = holes && holes.length ? holes[0] : polygonVertexCount;\n            }\n            else {\n                start = holes[h - 1];\n                end = holes[h] || polygonVertexCount;\n            }\n\n            indexCount += (end - start) * 6 * (ringCount - 1);\n\n            const sideRingVertexCount = (end - start) * (opts.smoothSide ? 1 : 2);\n            vertexCount += sideRingVertexCount * ringCount\n                // Double the bevel vertex number if not smooth\n                + (!opts.smoothBevel ? bevelSegments * sideRingVertexCount * 2 : 0);\n        }\n    }\n\n    const data = {\n        position: new Float32Array(vertexCount * 3),\n        indices: new (vertexCount > 0xffff ? Uint32Array : Uint16Array)(indexCount),\n        uv: new Float32Array(vertexCount * 2)\n    };\n\n    const cursors = {\n        vertex: 0, index: 0\n    };\n\n    for (let d = 0; d < preparedData.length; d++) {\n        addTopAndBottom(preparedData[d], data, cursors, opts);\n    }\n\n    for (let d = 0; d < preparedData.length; d++) {\n        const {holes, vertices} = preparedData[d];\n        const topVertexCount = vertices.length / 2;\n\n        let start = 0;\n        let end = (holes && holes.length) ? holes[0] : topVertexCount;\n        // Add exterior\n        addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\n        // Add holes\n        if (holes) {\n            for (let h = 0; h < holes.length; h++) {\n                start = holes[h];\n                end = holes[h + 1] || topVertexCount;\n                addExtrudeSide(data, preparedData[d], start, end, cursors, opts);\n            }\n        }\n    }\n\n    // Wrap uv\n    for (let i = 0; i < data.uv.length; i++) {\n        const val = data.uv[i];\n        if (val > 0 && Math.round(val) === val) {\n            data.uv[i] = 1;\n        }\n        else {\n            data.uv[i] = val % 1;\n        }\n    }\n\n    data.normal = generateNormal(data.indices, data.position);\n    // PENDING\n    data.boundingRect = preparedData[0] && preparedData[0].rect;\n\n    return data;\n}\n\nfunction convertPolylineToTriangulatedPolygon(polyline, polylineIdx, opts) {\n    const lineWidth = opts.lineWidth;\n    const pointCount = polyline.length;\n    const points = new Float32Array(pointCount * 2);\n    const translate = opts.translate || [0, 0];\n    const scale = opts.scale || [1, 1];\n    for (let i = 0, k = 0; i < pointCount; i++) {\n        points[k++] = polyline[i][0] * scale[0] + translate[0];\n        points[k++] = polyline[i][1] * scale[1] + translate[1];\n    }\n\n    if (Object(__WEBPACK_IMPORTED_MODULE_2__math__[\"a\" /* area */])(points, 0, pointCount) < 0) {\n        reversePoints(points, 2, 0, pointCount);\n    }\n\n    const insidePoints = [];\n    const outsidePoints = [];\n    const miterLimit = opts.miterLimit;\n    const outsideIndicesMap = innerOffsetPolygon(\n        points, outsidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false\n    );\n    reversePoints(points, 2, 0, pointCount);\n    const insideIndicesMap = innerOffsetPolygon(\n        points, insidePoints, 0, pointCount, 0, -lineWidth / 2, miterLimit, false\n    );\n\n    const polygonVertexCount = (insidePoints.length + outsidePoints.length) / 2;\n    const polygonVertices = new Float32Array(polygonVertexCount * 2);\n\n    let offset = 0;\n    const outsidePointCount = outsidePoints.length / 2;\n    for (let i = 0; i < outsidePoints.length; i++) {\n        polygonVertices[offset++] = outsidePoints[i];\n    }\n    for (let i = 0; i < insidePoints.length; i++) {\n        polygonVertices[offset++] = insidePoints[i];\n    }\n\n    // Built indices\n    const indices = new (polygonVertexCount > 0xffff ? Uint32Array : Uint16Array)(\n        ((pointCount - 1) * 2 + (polygonVertexCount - pointCount * 2)) * 3\n    );\n    let off = 0;\n    for (let i = 0; i < pointCount - 1; i++) {\n        const i2 = i + 1;\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i] - 1;\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n\n        indices[off++] = outsidePointCount - 1 - outsideIndicesMap[i];\n        indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n        indices[off++] = insideIndicesMap[i] + outsidePointCount;\n\n        if (insideIndicesMap[i2] - insideIndicesMap[i] === 2) {\n            indices[off++] = insideIndicesMap[i] + 2 + outsidePointCount;\n            indices[off++] = insideIndicesMap[i] + 1 + outsidePointCount;\n            indices[off++] = outsidePointCount - outsideIndicesMap[i2] - 1;\n        }\n        else if (outsideIndicesMap[i2] - outsideIndicesMap[i] === 2) {\n            indices[off++] = insideIndicesMap[i2] + outsidePointCount;\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 1);\n            indices[off++] = outsidePointCount - 1 - (outsideIndicesMap[i] + 2);\n        }\n    }\n\n    const topVertices = opts.bevelSize > 0\n        ? offsetPolygon(polygonVertices, [], opts.bevelSize, null, true) : polygonVertices;\n    const boundingRect = opts.boundingRect;\n    return {\n        vertices: polygonVertices,\n        indices,\n        topVertices,\n        rect: {\n            x: boundingRect.x * scale[0] + translate[0],\n            y: boundingRect.y * scale[1] + translate[1],\n            width: boundingRect.width * scale[0],\n            height: boundingRect.height * scale[1],\n        },\n        depth: typeof opts.depth === 'function' ? opts.depth(polylineIdx) : opts.depth,\n        holes: []\n    };\n}\n\nfunction removeClosePointsOfPolygon(polygon, epsilon) {\n    const newPolygon = [];\n    for (let k  = 0; k < polygon.length; k++) {\n        const points = polygon[k];\n        const newPoints = [];\n        const len = points.length;\n        let x1 = points[len - 1][0];\n        let y1 = points[len - 1][1];\n        let dist = 0;\n        for (let i = 0; i < len; i++) {\n            let x2 = points[i][0];\n            let y2 = points[i][1];\n            const dx = x2 - x1;\n            const dy = y2 - y1;\n            dist += Math.sqrt(dx * dx + dy * dy);\n            if (dist > epsilon) {\n                newPoints.push(points[i]);\n                dist = 0;\n            }\n            x1 = x2;\n            y1 = y2;\n        }\n        if (newPoints.length >= 3) {\n            newPolygon.push(newPoints);\n        }\n    }\n    return newPolygon.length > 0 ? newPolygon : null;\n}\n\nfunction simplifyPolygon(polygon, tolerance) {\n    const newPolygon = [];\n    for (let k  = 0; k < polygon.length; k++) {\n        let points = polygon[k];\n        points = Object(__WEBPACK_IMPORTED_MODULE_1__simplify__[\"a\" /* default */])(points, tolerance, true);\n        if (points.length >= 3) {\n            newPolygon.push(points);\n        }\n    }\n    return newPolygon.length > 0 ? newPolygon : null;\n}\n/**\n *\n * @param {Array} polygons Polygons array that match GeoJSON MultiPolygon geometry.\n * @param {Object} [opts]\n * @param {number|Function} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n *\n * @return {Object} {indices, position, uv, normal, boundingRect}\n */\nfunction extrudePolygon(polygons, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n    for (let i = 0; i < polygons.length; i++) {\n        updateBoundingRect(polygons[i][0], min, max);\n    }\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    normalizeOpts(opts);\n\n    const preparedData = [];\n    const translate = opts.translate || [0, 0];\n    const scale = opts.scale || [1, 1];\n    const boundingRect = opts.boundingRect;\n    const transformdRect = {\n        x: boundingRect.x * scale[0] + translate[0],\n        y: boundingRect.y * scale[1] + translate[1],\n        width: boundingRect.width * scale[0],\n        height: boundingRect.height * scale[1],\n    };\n\n    const epsilon = Math.min(\n        boundingRect.width, boundingRect.height\n    ) / 1e5;\n    for (let i = 0; i < polygons.length; i++) {\n        let newPolygon = removeClosePointsOfPolygon(polygons[i], epsilon);\n        if (!newPolygon) {\n            continue;\n        }\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\n        if (simplifyTolerance > 0) {\n            newPolygon = simplifyPolygon(newPolygon, simplifyTolerance);\n        }\n        if (!newPolygon) {\n            continue;\n        }\n\n        const {vertices, holes, dimensions} = __WEBPACK_IMPORTED_MODULE_0_earcut___default.a.flatten(newPolygon);\n\n        for (let k = 0; k < vertices.length;) {\n            vertices[k] = vertices[k++] * scale[0] + translate[0];\n            vertices[k] = vertices[k++] * scale[1] + translate[1];\n        }\n\n        convertToClockwise(vertices, holes);\n\n        if (dimensions !== 2) {\n            throw new Error('Only 2D polygon points are supported');\n        }\n        const topVertices = opts.bevelSize > 0\n            ? offsetPolygon(vertices, holes, opts.bevelSize, null, true) : vertices;\n        const indices = triangulate(topVertices, holes, dimensions);\n        preparedData.push({\n            indices,\n            vertices,\n            topVertices,\n            holes,\n            rect: transformdRect,\n            depth: typeof opts.depth === 'function' ? opts.depth(i) : opts.depth\n        });\n    }\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\n};\n\n/**\n *\n * @param {Array} polylines Polylines array that match GeoJSON MultiLineString geometry.\n * @param {Object} [opts]\n * @param {number} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {boolean} [opts.lineWidth = 1]\n * @param {boolean} [opts.miterLimit = 2]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n * @param {Object} [opts.boundingRect]\n * @return {Object} {indices, position, uv, normal, boundingRect}\n */\nfunction extrudePolyline(polylines, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n    for (let i = 0; i < polylines.length; i++) {\n        updateBoundingRect(polylines[i], min, max);\n    }\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    normalizeOpts(opts);\n    const scale = opts.scale || [1, 1];\n\n    if (opts.lineWidth == null) {\n        opts.lineWidth = 1;\n    }\n    if (opts.miterLimit == null) {\n        opts.miterLimit = 2;\n    }\n    const preparedData = [];\n    // Extrude polyline to polygon\n    for (let i = 0; i < polylines.length; i++) {\n        let newPolyline = polylines[i];\n        const simplifyTolerance = opts.simplify / Math.max(scale[0], scale[1]);\n        if (simplifyTolerance > 0) {\n            newPolyline = Object(__WEBPACK_IMPORTED_MODULE_1__simplify__[\"a\" /* default */])(newPolyline, simplifyTolerance, true);\n        }\n        preparedData.push(convertPolylineToTriangulatedPolygon(newPolyline, i, opts));\n    }\n\n    return innerExtrudeTriangulatedPolygon(preparedData, opts);\n}\n\nfunction updateBoundingRect(points, min, max) {\n    for (let i = 0; i < points.length; i++) {\n        min[0] = Math.min(points[i][0], min[0]);\n        min[1] = Math.min(points[i][1], min[1]);\n        max[0] = Math.max(points[i][0], max[0]);\n        max[1] = Math.max(points[i][1], max[1]);\n    }\n}\n\n/**\n *\n * @param {Object} geojson\n * @param {Object} [opts]\n * @param {number} [opts.depth]\n * @param {number} [opts.bevelSize = 0]\n * @param {number} [opts.bevelSegments = 2]\n * @param {number} [opts.simplify = 0]\n * @param {boolean} [opts.smoothSide = false]\n * @param {boolean} [opts.smoothBevel = false]\n * @param {boolean} [opts.excludeBottom = false]\n * @param {boolean} [opts.lineWidth = 1]\n * @param {boolean} [opts.miterLimit = 2]\n * @param {Object} [opts.fitRect] translate and scale will be ignored if fitRect is set\n * @param {Array} [opts.translate]\n * @param {Array} [opts.scale]\n * @param {Object} [opts.boundingRect]\n * @return {Object} {polyline: {indices, position, uv, normal}, polygon: {indices, position, uv, normal}}\n */\n\n // TODO Not merge feature\nfunction extrudeGeoJSON(geojson, opts) {\n\n    opts = Object.assign({}, opts);\n\n    const polylines = [];\n    const polygons = [];\n\n    const polylineFeatureIndices = [];\n    const polygonFeatureIndices = [];\n\n    const min = [Infinity, Infinity];\n    const max = [-Infinity, -Infinity];\n\n    for (let i = 0; i < geojson.features.length; i++) {\n        const feature = geojson.features[i];\n        const geometry = feature.geometry;\n        if (geometry && geometry.coordinates) {\n            switch (geometry.type) {\n                case 'LineString':\n                    polylines.push(geometry.coordinates);\n                    polylineFeatureIndices.push(i);\n                    updateBoundingRect(geometry.coordinates, min, max);\n                    break;\n                case 'MultiLineString':\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\n                        polylines.push(geometry.coordinates[k]);\n                        polylineFeatureIndices.push(i);\n                        updateBoundingRect(geometry.coordinates[k], min, max);\n                    }\n                    break;\n                case 'Polygon':\n                    polygons.push(geometry.coordinates);\n                    polygonFeatureIndices.push(i);\n                    updateBoundingRect(geometry.coordinates[0], min, max);\n                    break;\n                case 'MultiPolygon':\n                    for (let k = 0; k < geometry.coordinates.length; k++) {\n                        polygons.push(geometry.coordinates[k]);\n                        polygonFeatureIndices.push(i);\n                        updateBoundingRect(geometry.coordinates[k][0], min, max);\n                    }\n                    break;\n            }\n        }\n    }\n\n    opts.boundingRect = opts.boundingRect || {\n        x: min[0], y: min[1], width: max[0] - min[0], height: max[1] - min[1]\n    };\n\n    const originalDepth = opts.depth;\n    return {\n        polyline: extrudePolyline(polylines, Object.assign(opts, {\n            depth: function (idx) {\n                if (typeof originalDepth === 'function') {\n                    return originalDepth(\n                        geojson.features[polylineFeatureIndices[idx]]\n                    );\n                }\n                return originalDepth;\n            }\n        })),\n        polygon: extrudePolygon(polygons, Object.assign(opts, {\n            depth: function (idx) {\n                if (typeof originalDepth === 'function') {\n                    return originalDepth(\n                        geojson.features[polygonFeatureIndices[idx]]\n                    );\n                }\n                return originalDepth;\n            }\n        }))\n    };\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21haW4uanM/MzdmNSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUT0RPIGZpdFJlY3QgeCwgeSBhcmUgbmVnYXRpdmU/XG4vLyBUT0RPIERpbWVuc2lvbnNcbi8vIFRPRE8gYmV2ZWw9XCJ0b3BcInxcImJvdHRvbVwiXG5cbmltcG9ydCBlYXJjdXQgZnJvbSAnZWFyY3V0JztcbmltcG9ydCBkb1NpbXBsaWZ5IGZyb20gJy4vc2ltcGxpZnknO1xuaW1wb3J0IHtcbiAgICBzbGVycCwgdjJOb3JtYWxpemUsIHYyRG90LCB2MkFkZCwgYXJlYSxcbiAgICB2M05vcm1hbGl6ZSwgdjNTdWIsIHYzQ3Jvc3Ncbn0gZnJvbSAnLi9tYXRoJztcblxuZXhwb3J0IGZ1bmN0aW9uIHRyaWFuZ3VsYXRlKHZlcnRpY2VzLCBob2xlcywgZGltZW5zaW9ucz0yKSB7XG4gICAgcmV0dXJuIGVhcmN1dCh2ZXJ0aWNlcywgaG9sZXMsIGRpbWVuc2lvbnMpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZsYXR0ZW4oZGF0YSkge1xuICAgIHJldHVybiBlYXJjdXQuZmxhdHRlbihkYXRhKTtcbn1cblxuY29uc3QgdjEgPSBbXTtcbmNvbnN0IHYyID0gW107XG5jb25zdCB2ID0gW107XG5cbmZ1bmN0aW9uIGlubmVyT2Zmc2V0UG9seWdvbihcbiAgICB2ZXJ0aWNlcywgb3V0LCBzdGFydCwgZW5kLCBvdXRTdGFydCwgb2Zmc2V0LCBtaXRlckxpbWl0LCBjbG9zZVxuKSB7XG4gICAgY29uc3QgY2hlY2tNaXRlckxpbWl0ID0gbWl0ZXJMaW1pdCAhPSBudWxsO1xuICAgIGxldCBvdXRPZmYgPSBvdXRTdGFydDtcbiAgICBsZXQgaW5kaWNlc01hcCA9IG51bGw7XG4gICAgaWYgKGNoZWNrTWl0ZXJMaW1pdCkge1xuICAgICAgICBpbmRpY2VzTWFwID0gbmV3IFVpbnQzMkFycmF5KGVuZCAtIHN0YXJ0KTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgICAgY29uc3QgbmV4dElkeCA9IGkgPT09IGVuZCAtIDEgPyBzdGFydCA6IGkgKyAxO1xuICAgICAgICBjb25zdCBwcmV2SWR4ID0gaSA9PT0gc3RhcnQgPyBlbmQgLSAxIDogaSAtIDE7XG4gICAgICAgIGNvbnN0IHgxID0gdmVydGljZXNbcHJldklkeCAqIDJdO1xuICAgICAgICBjb25zdCB5MSA9IHZlcnRpY2VzW3ByZXZJZHggKiAyICsgMV07XG4gICAgICAgIGNvbnN0IHgyID0gdmVydGljZXNbaSAqIDJdO1xuICAgICAgICBjb25zdCB5MiA9IHZlcnRpY2VzW2kgKiAyICsgMV07XG4gICAgICAgIGNvbnN0IHgzID0gdmVydGljZXNbbmV4dElkeCAqIDJdO1xuICAgICAgICBjb25zdCB5MyA9IHZlcnRpY2VzW25leHRJZHggKiAyICsgMV07XG5cbiAgICAgICAgdjFbMF0gPSB4MiAtIHgxO1xuICAgICAgICB2MVsxXSA9IHkyIC0geTE7XG4gICAgICAgIHYyWzBdID0geDMgLSB4MjtcbiAgICAgICAgdjJbMV0gPSB5MyAtIHkyO1xuXG4gICAgICAgIHYyTm9ybWFsaXplKHYxLCB2MSk7XG4gICAgICAgIHYyTm9ybWFsaXplKHYyLCB2Mik7XG5cbiAgICAgICAgY2hlY2tNaXRlckxpbWl0ICYmIChpbmRpY2VzTWFwW2ldID0gb3V0T2ZmKTtcbiAgICAgICAgaWYgKCFjbG9zZSAmJiBpID09PSBzdGFydCkge1xuICAgICAgICAgICAgdlswXSA9IHYyWzFdO1xuICAgICAgICAgICAgdlsxXSA9IC12MlswXTtcbiAgICAgICAgICAgIHYyTm9ybWFsaXplKHYsIHYpO1xuICAgICAgICAgICAgb3V0W291dE9mZiAqIDJdID0geDIgKyB2WzBdICogb2Zmc2V0O1xuICAgICAgICAgICAgb3V0W291dE9mZiAqIDIgKyAxXSA9IHkyICsgdlsxXSAqIG9mZnNldDtcbiAgICAgICAgICAgIG91dE9mZisrO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFjbG9zZSAmJiBpID09PSBlbmQgLSAxKSB7XG4gICAgICAgICAgICB2WzBdID0gdjFbMV07XG4gICAgICAgICAgICB2WzFdID0gLXYxWzBdO1xuICAgICAgICAgICAgdjJOb3JtYWxpemUodiwgdik7XG4gICAgICAgICAgICBvdXRbb3V0T2ZmICogMl0gPSB4MiArIHZbMF0gKiBvZmZzZXQ7XG4gICAgICAgICAgICBvdXRbb3V0T2ZmICogMiArIDFdID0geTIgKyB2WzFdICogb2Zmc2V0O1xuICAgICAgICAgICAgb3V0T2ZmKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBQRU5ESU5HIFdoeSB1c2luZyBzdWIgd2lsbCBsb3N0IHRoZSBkaXJlY3Rpb24gaW5mby5cbiAgICAgICAgICAgIHYyQWRkKHYsIHYyLCB2MSk7XG4gICAgICAgICAgICBjb25zdCB0bXAgPSB2WzFdO1xuICAgICAgICAgICAgdlsxXSA9IC12WzBdO1xuICAgICAgICAgICAgdlswXSA9IHRtcDtcblxuICAgICAgICAgICAgdjJOb3JtYWxpemUodiwgdik7XG5cbiAgICAgICAgICAgIGNvbnN0IGNvc0EgPSB2MkRvdCh2LCB2Mik7XG4gICAgICAgICAgICBjb25zdCBzaW5BID0gTWF0aC5zcXJ0KDEgLSBjb3NBICogY29zQSk7XG4gICAgICAgICAgICAvLyBQRU5ESU5HXG4gICAgICAgICAgICBjb25zdCBtaXRlciA9IG9mZnNldCAqIE1hdGgubWluKDEwLCAxIC8gc2luQSk7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzQ292ZXggPSBvZmZzZXQgKiBjb3NBIDwgMDtcblxuICAgICAgICAgICAgaWYgKGNoZWNrTWl0ZXJMaW1pdCAmJiAoMSAvIHNpbkEpID4gbWl0ZXJMaW1pdCAmJiBpc0NvdmV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbXggPSB4MiArIHZbMF0gKiBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgbXkgPSB5MiArIHZbMV0gKiBvZmZzZXQ7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFsZkEgPSBNYXRoLmFjb3Moc2luQSkgLyAyO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRpc3QgPSBNYXRoLnRhbihoYWxmQSkgKiBNYXRoLmFicyhvZmZzZXQpO1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyXSA9IG14ICsgdlsxXSAqIGRpc3Q7XG4gICAgICAgICAgICAgICAgb3V0W291dE9mZiAqIDIgKyAxXSA9IG15IC0gdlswXSAqIGRpc3Q7XG4gICAgICAgICAgICAgICAgb3V0T2ZmKys7XG4gICAgICAgICAgICAgICAgb3V0W291dE9mZiAqIDJdID0gbXggLSB2WzFdICogZGlzdDtcbiAgICAgICAgICAgICAgICBvdXRbb3V0T2ZmICogMiArIDFdID0gbXkgKyB2WzBdICogZGlzdDtcbiAgICAgICAgICAgICAgICBvdXRPZmYrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyXSA9IHgyICsgdlswXSAqIG1pdGVyO1xuICAgICAgICAgICAgICAgIG91dFtvdXRPZmYgKiAyICsgMV0gPSB5MiArIHZbMV0gKiBtaXRlcjtcbiAgICAgICAgICAgICAgICBvdXRPZmYrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpbmRpY2VzTWFwO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gb2Zmc2V0UG9seWdvbih2ZXJ0aWNlcywgaG9sZXMsIG9mZnNldCwgbWl0ZXJMaW1pdCwgY2xvc2UpIHtcbiAgICBjb25zdCBvZmZzZXRWZXJ0aWNlcyA9IG1pdGVyTGltaXQgIT0gbnVsbCA/IFtdIDogbmV3IEZsb2F0MzJBcnJheSh2ZXJ0aWNlcy5sZW5ndGgpO1xuICAgIGNvbnN0IGV4dGVyaW9yU2l6ZSA9IChob2xlcyAmJiBob2xlcy5sZW5ndGgpID8gaG9sZXNbMF0gOiB2ZXJ0aWNlcy5sZW5ndGggLyAyO1xuXG4gICAgaW5uZXJPZmZzZXRQb2x5Z29uKFxuICAgICAgICB2ZXJ0aWNlcywgb2Zmc2V0VmVydGljZXMsIDAsIGV4dGVyaW9yU2l6ZSwgMCwgb2Zmc2V0LCBtaXRlckxpbWl0LCBjbG9zZSwgZmFsc2VcbiAgICApO1xuXG4gICAgaWYgKGhvbGVzKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaG9sZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0ID0gaG9sZXNbaV07XG4gICAgICAgICAgICBjb25zdCBlbmQgPSBob2xlc1tpICsgMV0gfHwgdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICAgICAgICAgIGlubmVyT2Zmc2V0UG9seWdvbihcbiAgICAgICAgICAgICAgICB2ZXJ0aWNlcywgb2Zmc2V0VmVydGljZXMsIHN0YXJ0LCBlbmQsXG4gICAgICAgICAgICAgICAgbWl0ZXJMaW1pdCAhPSBudWxsID8gb2Zmc2V0VmVydGljZXMubGVuZ3RoIC8gMiA6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIG9mZnNldCwgbWl0ZXJMaW1pdCwgY2xvc2VcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gb2Zmc2V0VmVydGljZXM7XG59XG5cbmZ1bmN0aW9uIHJldmVyc2VQb2ludHMocG9pbnRzLCBzdHJpZGUsIHN0YXJ0LCBlbmQpIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IE1hdGguZmxvb3IoKGVuZCAtIHN0YXJ0KSAvIDIpOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzdHJpZGU7IGorKykge1xuICAgICAgICAgICAgY29uc3QgYSA9IChpICsgc3RhcnQpICogc3RyaWRlICsgajtcbiAgICAgICAgICAgIGNvbnN0IGIgPSAoZW5kIC0gaSAtIDEpICogc3RyaWRlICsgajtcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IHBvaW50c1thXTtcbiAgICAgICAgICAgIHBvaW50c1thXSA9IHBvaW50c1tiXTtcbiAgICAgICAgICAgIHBvaW50c1tiXSA9IHRtcDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb2ludHM7XG59XG5cbmZ1bmN0aW9uIGNvbnZlcnRUb0Nsb2Nrd2lzZSh2ZXJ0aWNlcywgaG9sZXMpIHtcbiAgICBsZXQgcG9seWdvblZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICBsZXQgc3RhcnQgPSAwO1xuICAgIGxldCBlbmQgPSBob2xlcyAmJiBob2xlcy5sZW5ndGggPyBob2xlc1swXSA6IHBvbHlnb25WZXJ0ZXhDb3VudDtcbiAgICBpZiAoYXJlYSh2ZXJ0aWNlcywgc3RhcnQsIGVuZCkgPiAwKSB7XG4gICAgICAgIHJldmVyc2VQb2ludHModmVydGljZXMsIDIsIHN0YXJ0LCBlbmQpO1xuICAgIH1cbiAgICBmb3IgKGxldCBoID0gMTsgaCA8IChob2xlcyA/IGhvbGVzLmxlbmd0aCA6IDApICsgMTsgaCsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZXNbaCAtIDFdO1xuICAgICAgICBlbmQgPSBob2xlc1toXSB8fCBwb2x5Z29uVmVydGV4Q291bnQ7XG4gICAgICAgIGlmIChhcmVhKHZlcnRpY2VzLCBzdGFydCwgZW5kKSA8IDApIHtcbiAgICAgICAgICAgIHJldmVyc2VQb2ludHModmVydGljZXMsIDIsIHN0YXJ0LCBlbmQpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBub3JtYWxpemVPcHRzKG9wdHMpIHtcblxuICAgIG9wdHMuZGVwdGggPSBvcHRzLmRlcHRoIHx8IDE7XG4gICAgb3B0cy5iZXZlbFNpemUgPSBvcHRzLmJldmVsU2l6ZSB8fCAwO1xuICAgIG9wdHMuYmV2ZWxTZWdtZW50cyA9IG9wdHMuYmV2ZWxTZWdtZW50cyA9PSBudWxsID8gMiA6IG9wdHMuYmV2ZWxTZWdtZW50cztcbiAgICBvcHRzLnNtb290aFNpZGUgPSBvcHRzLnNtb290aFNpZGUgfHwgZmFsc2U7XG4gICAgb3B0cy5zbW9vdGhCZXZlbCA9IG9wdHMuc21vb3RoQmV2ZWwgfHwgZmFsc2U7XG4gICAgb3B0cy5zaW1wbGlmeSA9IG9wdHMuc2ltcGxpZnkgfHwgMDtcblxuICAgIC8vIE5vcm1hbGl6ZSBiZXZlbCBvcHRpb25zLlxuICAgIGlmICh0eXBlb2Ygb3B0cy5kZXB0aCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgb3B0cy5iZXZlbFNpemUgPSBNYXRoLm1pbighKG9wdHMuYmV2ZWxTZWdtZW50cyA+IDApID8gMCA6IG9wdHMuYmV2ZWxTaXplLCBvcHRzLmRlcHRoIC8gMik7XG4gICAgfVxuICAgIGlmICghKG9wdHMuYmV2ZWxTaXplID4gMCkpIHtcbiAgICAgICAgb3B0cy5iZXZlbFNlZ21lbnRzID0gMDtcbiAgICB9XG4gICAgb3B0cy5iZXZlbFNlZ21lbnRzID0gTWF0aC5yb3VuZChvcHRzLmJldmVsU2VnbWVudHMpO1xuXG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3Q7XG4gICAgb3B0cy50cmFuc2xhdGUgPSBvcHRzLnRyYW5zbGF0ZSB8fCBbMCwgMF07XG4gICAgb3B0cy5zY2FsZSA9IG9wdHMuc2NhbGUgfHwgWzEsIDFdO1xuICAgIGlmIChvcHRzLmZpdFJlY3QpIHtcbiAgICAgICAgbGV0IHRhcmdldFggPSBvcHRzLmZpdFJlY3QueCA9PSBudWxsXG4gICAgICAgICAgICA/IChib3VuZGluZ1JlY3QueCB8fCAwKVxuICAgICAgICAgICAgOiBvcHRzLmZpdFJlY3QueDtcbiAgICAgICAgbGV0IHRhcmdldFkgPSBvcHRzLmZpdFJlY3QueSA9PSBudWxsXG4gICAgICAgICAgICA/IChib3VuZGluZ1JlY3QueSB8fCAwKVxuICAgICAgICAgICAgOiBvcHRzLmZpdFJlY3QueTtcbiAgICAgICAgbGV0IHRhcmdldFdpZHRoID0gb3B0cy5maXRSZWN0LndpZHRoO1xuICAgICAgICBsZXQgdGFyZ2V0SGVpZ2h0ID0gb3B0cy5maXRSZWN0LmhlaWdodDtcbiAgICAgICAgaWYgKHRhcmdldFdpZHRoID09IG51bGwpIHtcbiAgICAgICAgICAgIGlmICh0YXJnZXRIZWlnaHQgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHRhcmdldFdpZHRoID0gdGFyZ2V0SGVpZ2h0IC8gYm91bmRpbmdSZWN0LmhlaWdodCAqIGJvdW5kaW5nUmVjdC53aWR0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRhcmdldFdpZHRoID0gYm91bmRpbmdSZWN0LndpZHRoO1xuICAgICAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IGJvdW5kaW5nUmVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGFyZ2V0SGVpZ2h0ID09IG51bGwpIHtcbiAgICAgICAgICAgIHRhcmdldEhlaWdodCA9IHRhcmdldFdpZHRoIC8gYm91bmRpbmdSZWN0LndpZHRoICogYm91bmRpbmdSZWN0LmhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBvcHRzLnNjYWxlID0gW1xuICAgICAgICAgICAgdGFyZ2V0V2lkdGggLyBib3VuZGluZ1JlY3Qud2lkdGgsXG4gICAgICAgICAgICB0YXJnZXRIZWlnaHQgLyBib3VuZGluZ1JlY3QuaGVpZ2h0XG4gICAgICAgIF07XG4gICAgICAgIG9wdHMudHJhbnNsYXRlID0gW1xuICAgICAgICAgICAgKHRhcmdldFggLSBib3VuZGluZ1JlY3QueCkgKiBvcHRzLnNjYWxlWzBdLFxuICAgICAgICAgICAgKHRhcmdldFkgLSBib3VuZGluZ1JlY3QueSkgKiBvcHRzLnNjYWxlWzFdXG4gICAgICAgIF07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBnZW5lcmF0ZU5vcm1hbChpbmRpY2VzLCBwb3NpdGlvbikge1xuXG4gICAgZnVuY3Rpb24gdjNTZXQocCwgYSwgYiwgYykge1xuICAgICAgICBwWzBdID0gYTsgcFsxXSA9IGI7IHBbMl0gPSBjO1xuICAgIH1cblxuICAgIGNvbnN0IHAxID0gW107XG4gICAgY29uc3QgcDIgPSBbXTtcbiAgICBjb25zdCBwMyA9IFtdO1xuXG4gICAgY29uc3QgdjIxID0gW107XG4gICAgY29uc3QgdjMyID0gW107XG5cbiAgICBjb25zdCBuID0gW107XG5cbiAgICBjb25zdCBsZW4gPSBpbmRpY2VzLmxlbmd0aDtcbiAgICBjb25zdCBub3JtYWxzID0gbmV3IEZsb2F0MzJBcnJheShwb3NpdGlvbi5sZW5ndGgpO1xuICAgIGZvciAobGV0IGYgPSAwOyBmIDwgbGVuOykge1xuICAgICAgICBjb25zdCBpMSA9IGluZGljZXNbZisrXSAqIDM7XG4gICAgICAgIGNvbnN0IGkyID0gaW5kaWNlc1tmKytdICogMztcbiAgICAgICAgY29uc3QgaTMgPSBpbmRpY2VzW2YrK10gKiAzO1xuXG4gICAgICAgIHYzU2V0KHAxLCBwb3NpdGlvbltpMV0sIHBvc2l0aW9uW2kxICsgMV0sIHBvc2l0aW9uW2kxICsgMl0pO1xuICAgICAgICB2M1NldChwMiwgcG9zaXRpb25baTJdLCBwb3NpdGlvbltpMiArIDFdLCBwb3NpdGlvbltpMiArIDJdKTtcbiAgICAgICAgdjNTZXQocDMsIHBvc2l0aW9uW2kzXSwgcG9zaXRpb25baTMgKyAxXSwgcG9zaXRpb25baTMgKyAyXSk7XG5cbiAgICAgICAgdjNTdWIodjIxLCBwMSwgcDIpO1xuICAgICAgICB2M1N1Yih2MzIsIHAyLCBwMyk7XG4gICAgICAgIHYzQ3Jvc3MobiwgdjIxLCB2MzIpO1xuICAgICAgICAvLyBBbHJlYWR5IGJlIHdlaWdodGVkIGJ5IHRoZSB0cmlhbmdsZSBhcmVhXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7XG4gICAgICAgICAgICBub3JtYWxzW2kxICsgaV0gPSBub3JtYWxzW2kxICsgaV0gKyBuW2ldO1xuICAgICAgICAgICAgbm9ybWFsc1tpMiArIGldID0gbm9ybWFsc1tpMiArIGldICsgbltpXTtcbiAgICAgICAgICAgIG5vcm1hbHNbaTMgKyBpXSA9IG5vcm1hbHNbaTMgKyBpXSArIG5baV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vcm1hbHMubGVuZ3RoOykge1xuICAgICAgICB2M1NldChuLCBub3JtYWxzW2ldLCBub3JtYWxzW2krMV0sIG5vcm1hbHNbaSsyXSk7XG4gICAgICAgIHYzTm9ybWFsaXplKG4sIG4pO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzBdO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzFdO1xuICAgICAgICBub3JtYWxzW2krK10gPSBuWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBub3JtYWxzO1xufVxuLy8gMCwwLS0tLTEsMFxuLy8gMCwxLS0tLTEsMVxuY29uc3QgcXVhZFRvVHJpYW5nbGUgPSBbXG4gICAgWzAsIDBdLCBbMSwgMF0sIFsxLCAxXSxcbiAgICBbMCwgMF0sIFsxLCAxXSwgWzAsIDFdXG5dO1xuXG4vLyBBZGQgc2lkZSB2ZXJ0aWNlcyBhbmQgaW5kaWNlcy4gSW5jbHVkZSBiZXZlbC5cbmZ1bmN0aW9uIGFkZEV4dHJ1ZGVTaWRlKFxuICAgIG91dCwge3ZlcnRpY2VzLCB0b3BWZXJ0aWNlcywgZGVwdGgsIHJlY3R9LCBzdGFydCwgZW5kLFxuICAgIGN1cnNvcnMsIG9wdHNcbikge1xuICAgIGNvbnN0IHJpbmdWZXJ0ZXhDb3VudCA9IGVuZCAtIHN0YXJ0O1xuICAgIGNvbnN0IHNwbGl0U2lkZSA9IG9wdHMuc21vb3RoU2lkZSA/IDEgOiAyO1xuICAgIGNvbnN0IHNwbGl0UmluZ1ZlcnRleENvdW50ID0gcmluZ1ZlcnRleENvdW50ICogc3BsaXRTaWRlO1xuXG4gICAgY29uc3Qgc3BsaXRCZXZlbCA9IG9wdHMuc21vb3RoQmV2ZWwgPyAxIDogMjtcbiAgICBjb25zdCBiZXZlbFNpemUgPSBNYXRoLm1pbihkZXB0aCAvIDIsIG9wdHMuYmV2ZWxTaXplKTtcbiAgICBjb25zdCBiZXZlbFNlZ21lbnRzID0gb3B0cy5iZXZlbFNlZ21lbnRzO1xuICAgIGNvbnN0IHZlcnRleE9mZnNldCA9IGN1cnNvcnMudmVydGV4O1xuICAgIGNvbnN0IHNpemUgPSBNYXRoLm1heChyZWN0LndpZHRoLCByZWN0LmhlaWdodCk7XG5cbiAgICAvLyBTaWRlIHZlcnRpY2VzXG4gICAgaWYgKGJldmVsU2l6ZSA+IDApIHtcblxuICAgICAgICBjb25zdCB2MCA9IFswLCAwLCAxXTtcbiAgICAgICAgY29uc3QgdjEgPSBbXTtcbiAgICAgICAgY29uc3QgdjIgPSBbMCwgMCwgLTFdO1xuICAgICAgICBjb25zdCB2ID0gW107XG5cbiAgICAgICAgbGV0IHJpbmdDb3VudCA9IDA7XG4gICAgICAgIGxldCB2TGVuID0gbmV3IEZsb2F0MzJBcnJheShyaW5nVmVydGV4Q291bnQpO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IDI7IGsrKykge1xuICAgICAgICAgICAgY29uc3QgeiA9IChrID09PSAwID8gKGRlcHRoIC0gYmV2ZWxTaXplKSA6IGJldmVsU2l6ZSk7XG4gICAgICAgICAgICBmb3IgKGxldCBzID0gMDsgcyA8PSBiZXZlbFNlZ21lbnRzICogc3BsaXRCZXZlbDsgcysrKSB7XG4gICAgICAgICAgICAgICAgbGV0IHVMZW4gPSAwO1xuICAgICAgICAgICAgICAgIGxldCBwcmV2WDtcbiAgICAgICAgICAgICAgICBsZXQgcHJldlk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nVmVydGV4Q291bnQ7IGkrKykge1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgc3BsaXRTaWRlOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgYW5kIG9wdGltaXplXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaWR4ID0gKChpICsgaikgJSByaW5nVmVydGV4Q291bnQgKyBzdGFydCkgKiAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdjFbMF0gPSB2ZXJ0aWNlc1tpZHhdIC0gdG9wVmVydGljZXNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzFdID0gdmVydGljZXNbaWR4ICsgMV0gLSB0b3BWZXJ0aWNlc1tpZHggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzJdID0gMDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGwgPSBNYXRoLnNxcnQodjFbMF0gKiB2MVswXSArIHYxWzFdICogdjFbMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdjFbMF0gLz0gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYxWzFdIC89IGw7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSAoTWF0aC5mbG9vcihzIC8gc3BsaXRCZXZlbCkgKyAocyAlIHNwbGl0QmV2ZWwpKSAvIGJldmVsU2VnbWVudHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBrID09PSAwID8gc2xlcnAodiwgdjAsIHYxLCB0KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogc2xlcnAodiwgdjEsIHYyLCB0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdDIgPSBrID09PSAwICA/IHQgOiAxIC0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGEgPSBiZXZlbFNpemUgKiBNYXRoLnNpbih0MiAqIE1hdGguUEkgLyAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBsICogTWF0aC5jb3ModDIgKiBNYXRoLlBJIC8gMik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVsbGlwc2UgcmFkaXVzXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gYmV2ZWxTaXplICogbCAvIE1hdGguc3FydChhICogYSArIGIgKiBiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeCA9IHZbMF0gKiByICsgdG9wVmVydGljZXNbaWR4XTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHkgPSB2WzFdICogciArIHRvcFZlcnRpY2VzW2lkeCArIDFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgenogPSB2WzJdICogciArIHo7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzXSA9IHg7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzICsgMV0gPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDJdID0geno7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE8gQ2FjaGUgYW5kIG9wdGltaXplXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaSA+IDAgfHwgaiA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1TGVuICs9IE1hdGguc3FydCgocHJldlggLSB4KSAqIChwcmV2WCAtIHgpICsgKHByZXZZIC0geSkgKiAocHJldlkgLSB5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocyA+IDAgfHwgayA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG1wID0gKGN1cnNvcnMudmVydGV4IC0gc3BsaXRSaW5nVmVydGV4Q291bnQpICogMztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldlgyID0gb3V0LnBvc2l0aW9uW3RtcF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZZMiA9IG91dC5wb3NpdGlvblt0bXAgKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgcHJldloyID0gb3V0LnBvc2l0aW9uW3RtcCArIDJdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdkxlbltpXSArPSBNYXRoLnNxcnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChwcmV2WDIgLSB4KSAqIChwcmV2WDIgLSB4KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChwcmV2WTIgLSB5KSAqIChwcmV2WTIgLSB5KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChwcmV2WjIgLSB6eikgKiAocHJldloyIC0genopXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDJdID0gdUxlbiAvIHNpemU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXQudXZbY3Vyc29ycy52ZXJ0ZXggKiAyICsgMV0gPSB2TGVuW2ldIC8gc2l6ZTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlggPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlkgPSB5O1xuICAgICAgICAgICAgICAgICAgICAgICAgY3Vyc29ycy52ZXJ0ZXgrKztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc3BsaXRCZXZlbCA+IDEgJiYgKHMgJSBzcGxpdEJldmVsKSkgfHwgKHNwbGl0QmV2ZWwgPT09IDEgJiYgcyA+PSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZiA9IDA7IGYgPCA2OyBmKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtID0gKHF1YWRUb1RyaWFuZ2xlW2ZdWzBdICsgaSAqIHNwbGl0U2lkZSkgJSBzcGxpdFJpbmdWZXJ0ZXhDb3VudDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gcXVhZFRvVHJpYW5nbGVbZl1bMV0gKyByaW5nQ291bnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0LmluZGljZXNbY3Vyc29ycy5pbmRleCsrXSA9IChuIC0gMSkgKiBzcGxpdFJpbmdWZXJ0ZXhDb3VudCArIG0gKyB2ZXJ0ZXhPZmZzZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByaW5nQ291bnQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAyOyBrKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHogPSBrID09PSAwID8gZGVwdGggLSBiZXZlbFNpemUgOiBiZXZlbFNpemU7XG4gICAgICAgICAgICBsZXQgdUxlbiA9IDA7XG4gICAgICAgICAgICBsZXQgcHJldlg7XG4gICAgICAgICAgICBsZXQgcHJldlk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJpbmdWZXJ0ZXhDb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbSA9IDA7IG0gPCBzcGxpdFNpZGU7IG0rKykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSAoKGkgKyBtKSAlIHJpbmdWZXJ0ZXhDb3VudCArIHN0YXJ0KSAqIDI7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHggPSB2ZXJ0aWNlc1tpZHhdO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB5ID0gdmVydGljZXNbaWR4ICsgMV07XG4gICAgICAgICAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDNdID0geDtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDFdID0geTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnBvc2l0aW9uW2N1cnNvcnMudmVydGV4ICogMyArIDJdID0gejtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwIHx8IG0gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1TGVuICs9IE1hdGguc3FydCgocHJldlggLSB4KSAqIChwcmV2WCAtIHgpICsgKHByZXZZIC0geSkgKiAocHJldlkgLSB5KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb3V0LnV2W2N1cnNvcnMudmVydGV4ICogMl0gPSB1TGVuIC8gc2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgb3V0LnV2W2N1cnNvcnMudmVydGV4ICogMiArIDFdID0geiAvIHNpemU7XG4gICAgICAgICAgICAgICAgICAgIHByZXZYID0geDtcbiAgICAgICAgICAgICAgICAgICAgcHJldlkgPSB5O1xuXG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcnMudmVydGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8vIENvbm5lY3QgdGhlIHNpZGVcbiAgICBjb25zdCBzaWRlU3RhcnRSaW5nTiA9IGJldmVsU2l6ZSA+IDAgPyAoYmV2ZWxTZWdtZW50cyAqIHNwbGl0QmV2ZWwgKyAxKSA6IDE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByaW5nVmVydGV4Q291bnQ7IGkrKykge1xuICAgICAgICBmb3IgKGxldCBmID0gMDsgZiA8IDY7IGYrKykge1xuICAgICAgICAgICAgY29uc3QgbSA9IChxdWFkVG9UcmlhbmdsZVtmXVswXSArIGkgKiBzcGxpdFNpZGUpICUgc3BsaXRSaW5nVmVydGV4Q291bnQ7XG4gICAgICAgICAgICBjb25zdCBuID0gcXVhZFRvVHJpYW5nbGVbZl1bMV0gKyBzaWRlU3RhcnRSaW5nTjtcbiAgICAgICAgICAgIG91dC5pbmRpY2VzW2N1cnNvcnMuaW5kZXgrK10gPSAobiAtIDEpICogc3BsaXRSaW5nVmVydGV4Q291bnQgKyBtICsgdmVydGV4T2Zmc2V0O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBhZGRUb3BBbmRCb3R0b20oe2luZGljZXMsIHZlcnRpY2VzLCB0b3BWZXJ0aWNlcywgcmVjdCwgZGVwdGh9LCBvdXQsIGN1cnNvcnMsIG9wdHMpIHtcbiAgICBpZiAodmVydGljZXMubGVuZ3RoIDw9IDQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHZlcnRleE9mZnNldCA9IGN1cnNvcnMudmVydGV4O1xuICAgIC8vIFRvcCBpbmRpY2VzXG4gICAgY29uc3QgaW5kaWNlc0xlbiA9IGluZGljZXMubGVuZ3RoO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kaWNlc0xlbjsgaSsrKSB7XG4gICAgICAgIG91dC5pbmRpY2VzW2N1cnNvcnMuaW5kZXgrK10gPSB2ZXJ0ZXhPZmZzZXQgKyBpbmRpY2VzW2ldO1xuICAgIH1cbiAgICBjb25zdCBzaXplID0gTWF0aC5tYXgocmVjdC53aWR0aCwgcmVjdC5oZWlnaHQpO1xuICAgIC8vIFRvcCBhbmQgYm90dG9tIHZlcnRpY2VzXG4gICAgZm9yIChsZXQgayA9IDA7IGsgPCAob3B0cy5leGNsdWRlQm90dG9tID8gMSA6IDIpOyBrKyspIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0b3BWZXJ0aWNlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgICAgICAgICAgY29uc3QgeCA9IHRvcFZlcnRpY2VzW2ldO1xuICAgICAgICAgICAgY29uc3QgeSA9IHRvcFZlcnRpY2VzW2kgKyAxXTtcbiAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDNdID0geDtcbiAgICAgICAgICAgIG91dC5wb3NpdGlvbltjdXJzb3JzLnZlcnRleCAqIDMgKyAxXSA9IHk7XG4gICAgICAgICAgICBvdXQucG9zaXRpb25bY3Vyc29ycy52ZXJ0ZXggKiAzICsgMl0gPSAoMSAtIGspICogZGVwdGg7XG5cbiAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDJdID0gKHggLSByZWN0LngpIC8gc2l6ZTtcbiAgICAgICAgICAgIG91dC51dltjdXJzb3JzLnZlcnRleCAqIDIgKyAxXSA9ICh5IC0gcmVjdC55KSAvIHNpemU7XG4gICAgICAgICAgICBjdXJzb3JzLnZlcnRleCsrO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJvdHRvbSBpbmRpY2VzXG4gICAgaWYgKCFvcHRzLmV4Y2x1ZGVCb3R0b20pIHtcbiAgICAgICAgY29uc3QgdmVydGV4Q291bnQgPSB2ZXJ0aWNlcy5sZW5ndGggLyAyO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGluZGljZXNMZW47IGkgKz0gMykge1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAzOyBrKyspIHtcbiAgICAgICAgICAgICAgICBvdXQuaW5kaWNlc1tjdXJzb3JzLmluZGV4KytdID0gdmVydGV4T2Zmc2V0ICsgdmVydGV4Q291bnQgKyBpbmRpY2VzW2kgKyAyIC0ga107XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblxuZnVuY3Rpb24gaW5uZXJFeHRydWRlVHJpYW5ndWxhdGVkUG9seWdvbihwcmVwYXJlZERhdGEsIG9wdHMpIHtcbiAgICBsZXQgaW5kZXhDb3VudCA9IDA7XG4gICAgbGV0IHZlcnRleENvdW50ID0gMDtcblxuICAgIGZvciAobGV0IHAgPSAwOyBwIDwgcHJlcGFyZWREYXRhLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgIGNvbnN0IHtpbmRpY2VzLCB2ZXJ0aWNlcywgaG9sZXMsIGRlcHRofSA9IHByZXBhcmVkRGF0YVtwXTtcbiAgICAgICAgY29uc3QgcG9seWdvblZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcbiAgICAgICAgY29uc3QgYmV2ZWxTaXplID0gTWF0aC5taW4oZGVwdGggLyAyLCBvcHRzLmJldmVsU2l6ZSk7XG4gICAgICAgIGNvbnN0IGJldmVsU2VnbWVudHMgPSAhKGJldmVsU2l6ZSA+IDApID8gMCA6IG9wdHMuYmV2ZWxTZWdtZW50cztcblxuICAgICAgICBpbmRleENvdW50ICs9IGluZGljZXMubGVuZ3RoICogKG9wdHMuZXhjbHVkZUJvdHRvbSA/IDEgOiAyKTtcbiAgICAgICAgdmVydGV4Q291bnQgKz0gcG9seWdvblZlcnRleENvdW50ICogKG9wdHMuZXhjbHVkZUJvdHRvbSA/IDEgOiAyKTtcbiAgICAgICAgY29uc3QgcmluZ0NvdW50ID0gMiArIGJldmVsU2VnbWVudHMgKiAyO1xuXG4gICAgICAgIGxldCBzdGFydCA9IDA7XG4gICAgICAgIGxldCBlbmQgPSAwO1xuICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IChob2xlcyA/IGhvbGVzLmxlbmd0aCA6IDApICsgMTsgaCsrKSB7XG4gICAgICAgICAgICBpZiAoaCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGVuZCA9IGhvbGVzICYmIGhvbGVzLmxlbmd0aCA/IGhvbGVzWzBdIDogcG9seWdvblZlcnRleENvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgc3RhcnQgPSBob2xlc1toIC0gMV07XG4gICAgICAgICAgICAgICAgZW5kID0gaG9sZXNbaF0gfHwgcG9seWdvblZlcnRleENvdW50O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpbmRleENvdW50ICs9IChlbmQgLSBzdGFydCkgKiA2ICogKHJpbmdDb3VudCAtIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBzaWRlUmluZ1ZlcnRleENvdW50ID0gKGVuZCAtIHN0YXJ0KSAqIChvcHRzLnNtb290aFNpZGUgPyAxIDogMik7XG4gICAgICAgICAgICB2ZXJ0ZXhDb3VudCArPSBzaWRlUmluZ1ZlcnRleENvdW50ICogcmluZ0NvdW50XG4gICAgICAgICAgICAgICAgLy8gRG91YmxlIHRoZSBiZXZlbCB2ZXJ0ZXggbnVtYmVyIGlmIG5vdCBzbW9vdGhcbiAgICAgICAgICAgICAgICArICghb3B0cy5zbW9vdGhCZXZlbCA/IGJldmVsU2VnbWVudHMgKiBzaWRlUmluZ1ZlcnRleENvdW50ICogMiA6IDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgcG9zaXRpb246IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAzKSxcbiAgICAgICAgaW5kaWNlczogbmV3ICh2ZXJ0ZXhDb3VudCA+IDB4ZmZmZiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKGluZGV4Q291bnQpLFxuICAgICAgICB1djogbmV3IEZsb2F0MzJBcnJheSh2ZXJ0ZXhDb3VudCAqIDIpXG4gICAgfTtcblxuICAgIGNvbnN0IGN1cnNvcnMgPSB7XG4gICAgICAgIHZlcnRleDogMCwgaW5kZXg6IDBcbiAgICB9O1xuXG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCBwcmVwYXJlZERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgYWRkVG9wQW5kQm90dG9tKHByZXBhcmVkRGF0YVtkXSwgZGF0YSwgY3Vyc29ycywgb3B0cyk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgZCA9IDA7IGQgPCBwcmVwYXJlZERhdGEubGVuZ3RoOyBkKyspIHtcbiAgICAgICAgY29uc3Qge2hvbGVzLCB2ZXJ0aWNlc30gPSBwcmVwYXJlZERhdGFbZF07XG4gICAgICAgIGNvbnN0IHRvcFZlcnRleENvdW50ID0gdmVydGljZXMubGVuZ3RoIC8gMjtcblxuICAgICAgICBsZXQgc3RhcnQgPSAwO1xuICAgICAgICBsZXQgZW5kID0gKGhvbGVzICYmIGhvbGVzLmxlbmd0aCkgPyBob2xlc1swXSA6IHRvcFZlcnRleENvdW50O1xuICAgICAgICAvLyBBZGQgZXh0ZXJpb3JcbiAgICAgICAgYWRkRXh0cnVkZVNpZGUoZGF0YSwgcHJlcGFyZWREYXRhW2RdLCBzdGFydCwgZW5kLCBjdXJzb3JzLCBvcHRzKTtcbiAgICAgICAgLy8gQWRkIGhvbGVzXG4gICAgICAgIGlmIChob2xlcykge1xuICAgICAgICAgICAgZm9yIChsZXQgaCA9IDA7IGggPCBob2xlcy5sZW5ndGg7IGgrKykge1xuICAgICAgICAgICAgICAgIHN0YXJ0ID0gaG9sZXNbaF07XG4gICAgICAgICAgICAgICAgZW5kID0gaG9sZXNbaCArIDFdIHx8IHRvcFZlcnRleENvdW50O1xuICAgICAgICAgICAgICAgIGFkZEV4dHJ1ZGVTaWRlKGRhdGEsIHByZXBhcmVkRGF0YVtkXSwgc3RhcnQsIGVuZCwgY3Vyc29ycywgb3B0cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcmFwIHV2XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLnV2Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGRhdGEudXZbaV07XG4gICAgICAgIGlmICh2YWwgPiAwICYmIE1hdGgucm91bmQodmFsKSA9PT0gdmFsKSB7XG4gICAgICAgICAgICBkYXRhLnV2W2ldID0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEudXZbaV0gPSB2YWwgJSAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGF0YS5ub3JtYWwgPSBnZW5lcmF0ZU5vcm1hbChkYXRhLmluZGljZXMsIGRhdGEucG9zaXRpb24pO1xuICAgIC8vIFBFTkRJTkdcbiAgICBkYXRhLmJvdW5kaW5nUmVjdCA9IHByZXBhcmVkRGF0YVswXSAmJiBwcmVwYXJlZERhdGFbMF0ucmVjdDtcblxuICAgIHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBjb252ZXJ0UG9seWxpbmVUb1RyaWFuZ3VsYXRlZFBvbHlnb24ocG9seWxpbmUsIHBvbHlsaW5lSWR4LCBvcHRzKSB7XG4gICAgY29uc3QgbGluZVdpZHRoID0gb3B0cy5saW5lV2lkdGg7XG4gICAgY29uc3QgcG9pbnRDb3VudCA9IHBvbHlsaW5lLmxlbmd0aDtcbiAgICBjb25zdCBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KHBvaW50Q291bnQgKiAyKTtcbiAgICBjb25zdCB0cmFuc2xhdGUgPSBvcHRzLnRyYW5zbGF0ZSB8fCBbMCwgMF07XG4gICAgY29uc3Qgc2NhbGUgPSBvcHRzLnNjYWxlIHx8IFsxLCAxXTtcbiAgICBmb3IgKGxldCBpID0gMCwgayA9IDA7IGkgPCBwb2ludENvdW50OyBpKyspIHtcbiAgICAgICAgcG9pbnRzW2srK10gPSBwb2x5bGluZVtpXVswXSAqIHNjYWxlWzBdICsgdHJhbnNsYXRlWzBdO1xuICAgICAgICBwb2ludHNbaysrXSA9IHBvbHlsaW5lW2ldWzFdICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV07XG4gICAgfVxuXG4gICAgaWYgKGFyZWEocG9pbnRzLCAwLCBwb2ludENvdW50KSA8IDApIHtcbiAgICAgICAgcmV2ZXJzZVBvaW50cyhwb2ludHMsIDIsIDAsIHBvaW50Q291bnQpO1xuICAgIH1cblxuICAgIGNvbnN0IGluc2lkZVBvaW50cyA9IFtdO1xuICAgIGNvbnN0IG91dHNpZGVQb2ludHMgPSBbXTtcbiAgICBjb25zdCBtaXRlckxpbWl0ID0gb3B0cy5taXRlckxpbWl0O1xuICAgIGNvbnN0IG91dHNpZGVJbmRpY2VzTWFwID0gaW5uZXJPZmZzZXRQb2x5Z29uKFxuICAgICAgICBwb2ludHMsIG91dHNpZGVQb2ludHMsIDAsIHBvaW50Q291bnQsIDAsIC1saW5lV2lkdGggLyAyLCBtaXRlckxpbWl0LCBmYWxzZVxuICAgICk7XG4gICAgcmV2ZXJzZVBvaW50cyhwb2ludHMsIDIsIDAsIHBvaW50Q291bnQpO1xuICAgIGNvbnN0IGluc2lkZUluZGljZXNNYXAgPSBpbm5lck9mZnNldFBvbHlnb24oXG4gICAgICAgIHBvaW50cywgaW5zaWRlUG9pbnRzLCAwLCBwb2ludENvdW50LCAwLCAtbGluZVdpZHRoIC8gMiwgbWl0ZXJMaW1pdCwgZmFsc2VcbiAgICApO1xuXG4gICAgY29uc3QgcG9seWdvblZlcnRleENvdW50ID0gKGluc2lkZVBvaW50cy5sZW5ndGggKyBvdXRzaWRlUG9pbnRzLmxlbmd0aCkgLyAyO1xuICAgIGNvbnN0IHBvbHlnb25WZXJ0aWNlcyA9IG5ldyBGbG9hdDMyQXJyYXkocG9seWdvblZlcnRleENvdW50ICogMik7XG5cbiAgICBsZXQgb2Zmc2V0ID0gMDtcbiAgICBjb25zdCBvdXRzaWRlUG9pbnRDb3VudCA9IG91dHNpZGVQb2ludHMubGVuZ3RoIC8gMjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG91dHNpZGVQb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9seWdvblZlcnRpY2VzW29mZnNldCsrXSA9IG91dHNpZGVQb2ludHNbaV07XG4gICAgfVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5zaWRlUG9pbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHBvbHlnb25WZXJ0aWNlc1tvZmZzZXQrK10gPSBpbnNpZGVQb2ludHNbaV07XG4gICAgfVxuXG4gICAgLy8gQnVpbHQgaW5kaWNlc1xuICAgIGNvbnN0IGluZGljZXMgPSBuZXcgKHBvbHlnb25WZXJ0ZXhDb3VudCA+IDB4ZmZmZiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKFxuICAgICAgICAoKHBvaW50Q291bnQgLSAxKSAqIDIgKyAocG9seWdvblZlcnRleENvdW50IC0gcG9pbnRDb3VudCAqIDIpKSAqIDNcbiAgICApO1xuICAgIGxldCBvZmYgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRDb3VudCAtIDE7IGkrKykge1xuICAgICAgICBjb25zdCBpMiA9IGkgKyAxO1xuICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIG91dHNpZGVJbmRpY2VzTWFwW2ldO1xuICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIG91dHNpZGVJbmRpY2VzTWFwW2ldIC0gMTtcbiAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMSArIG91dHNpZGVQb2ludENvdW50O1xuXG4gICAgICAgIGluZGljZXNbb2ZmKytdID0gb3V0c2lkZVBvaW50Q291bnQgLSAxIC0gb3V0c2lkZUluZGljZXNNYXBbaV07XG4gICAgICAgIGluZGljZXNbb2ZmKytdID0gaW5zaWRlSW5kaWNlc01hcFtpXSArIDEgKyBvdXRzaWRlUG9pbnRDb3VudDtcbiAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgb3V0c2lkZVBvaW50Q291bnQ7XG5cbiAgICAgICAgaWYgKGluc2lkZUluZGljZXNNYXBbaTJdIC0gaW5zaWRlSW5kaWNlc01hcFtpXSA9PT0gMikge1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMiArIG91dHNpZGVQb2ludENvdW50O1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpbnNpZGVJbmRpY2VzTWFwW2ldICsgMSArIG91dHNpZGVQb2ludENvdW50O1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBvdXRzaWRlUG9pbnRDb3VudCAtIG91dHNpZGVJbmRpY2VzTWFwW2kyXSAtIDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAob3V0c2lkZUluZGljZXNNYXBbaTJdIC0gb3V0c2lkZUluZGljZXNNYXBbaV0gPT09IDIpIHtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaW5zaWRlSW5kaWNlc01hcFtpMl0gKyBvdXRzaWRlUG9pbnRDb3VudDtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gb3V0c2lkZVBvaW50Q291bnQgLSAxIC0gKG91dHNpZGVJbmRpY2VzTWFwW2ldICsgMSk7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IG91dHNpZGVQb2ludENvdW50IC0gMSAtIChvdXRzaWRlSW5kaWNlc01hcFtpXSArIDIpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdG9wVmVydGljZXMgPSBvcHRzLmJldmVsU2l6ZSA+IDBcbiAgICAgICAgPyBvZmZzZXRQb2x5Z29uKHBvbHlnb25WZXJ0aWNlcywgW10sIG9wdHMuYmV2ZWxTaXplLCBudWxsLCB0cnVlKSA6IHBvbHlnb25WZXJ0aWNlcztcbiAgICBjb25zdCBib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdDtcbiAgICByZXR1cm4ge1xuICAgICAgICB2ZXJ0aWNlczogcG9seWdvblZlcnRpY2VzLFxuICAgICAgICBpbmRpY2VzLFxuICAgICAgICB0b3BWZXJ0aWNlcyxcbiAgICAgICAgcmVjdDoge1xuICAgICAgICAgICAgeDogYm91bmRpbmdSZWN0LnggKiBzY2FsZVswXSArIHRyYW5zbGF0ZVswXSxcbiAgICAgICAgICAgIHk6IGJvdW5kaW5nUmVjdC55ICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV0sXG4gICAgICAgICAgICB3aWR0aDogYm91bmRpbmdSZWN0LndpZHRoICogc2NhbGVbMF0sXG4gICAgICAgICAgICBoZWlnaHQ6IGJvdW5kaW5nUmVjdC5oZWlnaHQgKiBzY2FsZVsxXSxcbiAgICAgICAgfSxcbiAgICAgICAgZGVwdGg6IHR5cGVvZiBvcHRzLmRlcHRoID09PSAnZnVuY3Rpb24nID8gb3B0cy5kZXB0aChwb2x5bGluZUlkeCkgOiBvcHRzLmRlcHRoLFxuICAgICAgICBob2xlczogW11cbiAgICB9O1xufVxuXG5mdW5jdGlvbiByZW1vdmVDbG9zZVBvaW50c09mUG9seWdvbihwb2x5Z29uLCBlcHNpbG9uKSB7XG4gICAgY29uc3QgbmV3UG9seWdvbiA9IFtdO1xuICAgIGZvciAobGV0IGsgID0gMDsgayA8IHBvbHlnb24ubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gcG9seWdvbltrXTtcbiAgICAgICAgY29uc3QgbmV3UG9pbnRzID0gW107XG4gICAgICAgIGNvbnN0IGxlbiA9IHBvaW50cy5sZW5ndGg7XG4gICAgICAgIGxldCB4MSA9IHBvaW50c1tsZW4gLSAxXVswXTtcbiAgICAgICAgbGV0IHkxID0gcG9pbnRzW2xlbiAtIDFdWzFdO1xuICAgICAgICBsZXQgZGlzdCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgIGxldCB4MiA9IHBvaW50c1tpXVswXTtcbiAgICAgICAgICAgIGxldCB5MiA9IHBvaW50c1tpXVsxXTtcbiAgICAgICAgICAgIGNvbnN0IGR4ID0geDIgLSB4MTtcbiAgICAgICAgICAgIGNvbnN0IGR5ID0geTIgLSB5MTtcbiAgICAgICAgICAgIGRpc3QgKz0gTWF0aC5zcXJ0KGR4ICogZHggKyBkeSAqIGR5KTtcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZXBzaWxvbikge1xuICAgICAgICAgICAgICAgIG5ld1BvaW50cy5wdXNoKHBvaW50c1tpXSk7XG4gICAgICAgICAgICAgICAgZGlzdCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB4MSA9IHgyO1xuICAgICAgICAgICAgeTEgPSB5MjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3UG9pbnRzLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgICAgICBuZXdQb2x5Z29uLnB1c2gobmV3UG9pbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV3UG9seWdvbi5sZW5ndGggPiAwID8gbmV3UG9seWdvbiA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHNpbXBsaWZ5UG9seWdvbihwb2x5Z29uLCB0b2xlcmFuY2UpIHtcbiAgICBjb25zdCBuZXdQb2x5Z29uID0gW107XG4gICAgZm9yIChsZXQgayAgPSAwOyBrIDwgcG9seWdvbi5sZW5ndGg7IGsrKykge1xuICAgICAgICBsZXQgcG9pbnRzID0gcG9seWdvbltrXTtcbiAgICAgICAgcG9pbnRzID0gZG9TaW1wbGlmeShwb2ludHMsIHRvbGVyYW5jZSwgdHJ1ZSk7XG4gICAgICAgIGlmIChwb2ludHMubGVuZ3RoID49IDMpIHtcbiAgICAgICAgICAgIG5ld1BvbHlnb24ucHVzaChwb2ludHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdQb2x5Z29uLmxlbmd0aCA+IDAgPyBuZXdQb2x5Z29uIDogbnVsbDtcbn1cbi8qKlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHBvbHlnb25zIFBvbHlnb25zIGFycmF5IHRoYXQgbWF0Y2ggR2VvSlNPTiBNdWx0aVBvbHlnb24gZ2VvbWV0cnkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHNdXG4gKiBAcGFyYW0ge251bWJlcnxGdW5jdGlvbn0gW29wdHMuZGVwdGhdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYmV2ZWxTaXplID0gMF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5iZXZlbFNlZ21lbnRzID0gMl1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5zaW1wbGlmeSA9IDBdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNtb290aFNpZGUgPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc21vb3RoQmV2ZWwgPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZXhjbHVkZUJvdHRvbSA9IGZhbHNlXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmZpdFJlY3RdIHRyYW5zbGF0ZSBhbmQgc2NhbGUgd2lsbCBiZSBpZ25vcmVkIGlmIGZpdFJlY3QgaXMgc2V0XG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy50cmFuc2xhdGVdXG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy5zY2FsZV1cbiAqXG4gKiBAcmV0dXJuIHtPYmplY3R9IHtpbmRpY2VzLCBwb3NpdGlvbiwgdXYsIG5vcm1hbCwgYm91bmRpbmdSZWN0fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZXh0cnVkZVBvbHlnb24ocG9seWdvbnMsIG9wdHMpIHtcblxuICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzKTtcblxuICAgIGNvbnN0IG1pbiA9IFtJbmZpbml0eSwgSW5maW5pdHldO1xuICAgIGNvbnN0IG1heCA9IFstSW5maW5pdHksIC1JbmZpbml0eV07XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2x5Z29ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QocG9seWdvbnNbaV1bMF0sIG1pbiwgbWF4KTtcbiAgICB9XG4gICAgb3B0cy5ib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdCB8fCB7XG4gICAgICAgIHg6IG1pblswXSwgeTogbWluWzFdLCB3aWR0aDogbWF4WzBdIC0gbWluWzBdLCBoZWlnaHQ6IG1heFsxXSAtIG1pblsxXVxuICAgIH07XG5cbiAgICBub3JtYWxpemVPcHRzKG9wdHMpO1xuXG4gICAgY29uc3QgcHJlcGFyZWREYXRhID0gW107XG4gICAgY29uc3QgdHJhbnNsYXRlID0gb3B0cy50cmFuc2xhdGUgfHwgWzAsIDBdO1xuICAgIGNvbnN0IHNjYWxlID0gb3B0cy5zY2FsZSB8fCBbMSwgMV07XG4gICAgY29uc3QgYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3Q7XG4gICAgY29uc3QgdHJhbnNmb3JtZFJlY3QgPSB7XG4gICAgICAgIHg6IGJvdW5kaW5nUmVjdC54ICogc2NhbGVbMF0gKyB0cmFuc2xhdGVbMF0sXG4gICAgICAgIHk6IGJvdW5kaW5nUmVjdC55ICogc2NhbGVbMV0gKyB0cmFuc2xhdGVbMV0sXG4gICAgICAgIHdpZHRoOiBib3VuZGluZ1JlY3Qud2lkdGggKiBzY2FsZVswXSxcbiAgICAgICAgaGVpZ2h0OiBib3VuZGluZ1JlY3QuaGVpZ2h0ICogc2NhbGVbMV0sXG4gICAgfTtcblxuICAgIGNvbnN0IGVwc2lsb24gPSBNYXRoLm1pbihcbiAgICAgICAgYm91bmRpbmdSZWN0LndpZHRoLCBib3VuZGluZ1JlY3QuaGVpZ2h0XG4gICAgKSAvIDFlNTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlnb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBuZXdQb2x5Z29uID0gcmVtb3ZlQ2xvc2VQb2ludHNPZlBvbHlnb24ocG9seWdvbnNbaV0sIGVwc2lsb24pO1xuICAgICAgICBpZiAoIW5ld1BvbHlnb24pIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNpbXBsaWZ5VG9sZXJhbmNlID0gb3B0cy5zaW1wbGlmeSAvIE1hdGgubWF4KHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGlmIChzaW1wbGlmeVRvbGVyYW5jZSA+IDApIHtcbiAgICAgICAgICAgIG5ld1BvbHlnb24gPSBzaW1wbGlmeVBvbHlnb24obmV3UG9seWdvbiwgc2ltcGxpZnlUb2xlcmFuY2UpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghbmV3UG9seWdvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB7dmVydGljZXMsIGhvbGVzLCBkaW1lbnNpb25zfSA9IGVhcmN1dC5mbGF0dGVuKG5ld1BvbHlnb24pO1xuXG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgdmVydGljZXMubGVuZ3RoOykge1xuICAgICAgICAgICAgdmVydGljZXNba10gPSB2ZXJ0aWNlc1trKytdICogc2NhbGVbMF0gKyB0cmFuc2xhdGVbMF07XG4gICAgICAgICAgICB2ZXJ0aWNlc1trXSA9IHZlcnRpY2VzW2srK10gKiBzY2FsZVsxXSArIHRyYW5zbGF0ZVsxXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnZlcnRUb0Nsb2Nrd2lzZSh2ZXJ0aWNlcywgaG9sZXMpO1xuXG4gICAgICAgIGlmIChkaW1lbnNpb25zICE9PSAyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgMkQgcG9seWdvbiBwb2ludHMgYXJlIHN1cHBvcnRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRvcFZlcnRpY2VzID0gb3B0cy5iZXZlbFNpemUgPiAwXG4gICAgICAgICAgICA/IG9mZnNldFBvbHlnb24odmVydGljZXMsIGhvbGVzLCBvcHRzLmJldmVsU2l6ZSwgbnVsbCwgdHJ1ZSkgOiB2ZXJ0aWNlcztcbiAgICAgICAgY29uc3QgaW5kaWNlcyA9IHRyaWFuZ3VsYXRlKHRvcFZlcnRpY2VzLCBob2xlcywgZGltZW5zaW9ucyk7XG4gICAgICAgIHByZXBhcmVkRGF0YS5wdXNoKHtcbiAgICAgICAgICAgIGluZGljZXMsXG4gICAgICAgICAgICB2ZXJ0aWNlcyxcbiAgICAgICAgICAgIHRvcFZlcnRpY2VzLFxuICAgICAgICAgICAgaG9sZXMsXG4gICAgICAgICAgICByZWN0OiB0cmFuc2Zvcm1kUmVjdCxcbiAgICAgICAgICAgIGRlcHRoOiB0eXBlb2Ygb3B0cy5kZXB0aCA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuZGVwdGgoaSkgOiBvcHRzLmRlcHRoXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaW5uZXJFeHRydWRlVHJpYW5ndWxhdGVkUG9seWdvbihwcmVwYXJlZERhdGEsIG9wdHMpO1xufTtcblxuLyoqXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcG9seWxpbmVzIFBvbHlsaW5lcyBhcnJheSB0aGF0IG1hdGNoIEdlb0pTT04gTXVsdGlMaW5lU3RyaW5nIGdlb21ldHJ5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmRlcHRoXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmJldmVsU2l6ZSA9IDBdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuYmV2ZWxTZWdtZW50cyA9IDJdXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdHMuc2ltcGxpZnkgPSAwXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zbW9vdGhTaWRlID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLnNtb290aEJldmVsID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmV4Y2x1ZGVCb3R0b20gPSBmYWxzZV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubGluZVdpZHRoID0gMV1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMubWl0ZXJMaW1pdCA9IDJdXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdHMuZml0UmVjdF0gdHJhbnNsYXRlIGFuZCBzY2FsZSB3aWxsIGJlIGlnbm9yZWQgaWYgZml0UmVjdCBpcyBzZXRcbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnRyYW5zbGF0ZV1cbiAqIEBwYXJhbSB7QXJyYXl9IFtvcHRzLnNjYWxlXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmJvdW5kaW5nUmVjdF1cbiAqIEByZXR1cm4ge09iamVjdH0ge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsLCBib3VuZGluZ1JlY3R9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBleHRydWRlUG9seWxpbmUocG9seWxpbmVzLCBvcHRzKSB7XG5cbiAgICBvcHRzID0gT2JqZWN0LmFzc2lnbih7fSwgb3B0cyk7XG5cbiAgICBjb25zdCBtaW4gPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICBjb25zdCBtYXggPSBbLUluZmluaXR5LCAtSW5maW5pdHldO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9seWxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHVwZGF0ZUJvdW5kaW5nUmVjdChwb2x5bGluZXNbaV0sIG1pbiwgbWF4KTtcbiAgICB9XG4gICAgb3B0cy5ib3VuZGluZ1JlY3QgPSBvcHRzLmJvdW5kaW5nUmVjdCB8fCB7XG4gICAgICAgIHg6IG1pblswXSwgeTogbWluWzFdLCB3aWR0aDogbWF4WzBdIC0gbWluWzBdLCBoZWlnaHQ6IG1heFsxXSAtIG1pblsxXVxuICAgIH07XG5cbiAgICBub3JtYWxpemVPcHRzKG9wdHMpO1xuICAgIGNvbnN0IHNjYWxlID0gb3B0cy5zY2FsZSB8fCBbMSwgMV07XG5cbiAgICBpZiAob3B0cy5saW5lV2lkdGggPT0gbnVsbCkge1xuICAgICAgICBvcHRzLmxpbmVXaWR0aCA9IDE7XG4gICAgfVxuICAgIGlmIChvcHRzLm1pdGVyTGltaXQgPT0gbnVsbCkge1xuICAgICAgICBvcHRzLm1pdGVyTGltaXQgPSAyO1xuICAgIH1cbiAgICBjb25zdCBwcmVwYXJlZERhdGEgPSBbXTtcbiAgICAvLyBFeHRydWRlIHBvbHlsaW5lIHRvIHBvbHlnb25cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvbHlsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgbmV3UG9seWxpbmUgPSBwb2x5bGluZXNbaV07XG4gICAgICAgIGNvbnN0IHNpbXBsaWZ5VG9sZXJhbmNlID0gb3B0cy5zaW1wbGlmeSAvIE1hdGgubWF4KHNjYWxlWzBdLCBzY2FsZVsxXSk7XG4gICAgICAgIGlmIChzaW1wbGlmeVRvbGVyYW5jZSA+IDApIHtcbiAgICAgICAgICAgIG5ld1BvbHlsaW5lID0gZG9TaW1wbGlmeShuZXdQb2x5bGluZSwgc2ltcGxpZnlUb2xlcmFuY2UsIHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIHByZXBhcmVkRGF0YS5wdXNoKGNvbnZlcnRQb2x5bGluZVRvVHJpYW5ndWxhdGVkUG9seWdvbihuZXdQb2x5bGluZSwgaSwgb3B0cykpO1xuICAgIH1cblxuICAgIHJldHVybiBpbm5lckV4dHJ1ZGVUcmlhbmd1bGF0ZWRQb2x5Z29uKHByZXBhcmVkRGF0YSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHVwZGF0ZUJvdW5kaW5nUmVjdChwb2ludHMsIG1pbiwgbWF4KSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbWluWzBdID0gTWF0aC5taW4ocG9pbnRzW2ldWzBdLCBtaW5bMF0pO1xuICAgICAgICBtaW5bMV0gPSBNYXRoLm1pbihwb2ludHNbaV1bMV0sIG1pblsxXSk7XG4gICAgICAgIG1heFswXSA9IE1hdGgubWF4KHBvaW50c1tpXVswXSwgbWF4WzBdKTtcbiAgICAgICAgbWF4WzFdID0gTWF0aC5tYXgocG9pbnRzW2ldWzFdLCBtYXhbMV0pO1xuICAgIH1cbn1cblxuLyoqXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGdlb2pzb25cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0c11cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5kZXB0aF1cbiAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5iZXZlbFNpemUgPSAwXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmJldmVsU2VnbWVudHMgPSAyXVxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnNpbXBsaWZ5ID0gMF1cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuc21vb3RoU2lkZSA9IGZhbHNlXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5zbW9vdGhCZXZlbCA9IGZhbHNlXVxuICogQHBhcmFtIHtib29sZWFufSBbb3B0cy5leGNsdWRlQm90dG9tID0gZmFsc2VdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmxpbmVXaWR0aCA9IDFdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLm1pdGVyTGltaXQgPSAyXVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRzLmZpdFJlY3RdIHRyYW5zbGF0ZSBhbmQgc2NhbGUgd2lsbCBiZSBpZ25vcmVkIGlmIGZpdFJlY3QgaXMgc2V0XG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy50cmFuc2xhdGVdXG4gKiBAcGFyYW0ge0FycmF5fSBbb3B0cy5zY2FsZV1cbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0cy5ib3VuZGluZ1JlY3RdXG4gKiBAcmV0dXJuIHtPYmplY3R9IHtwb2x5bGluZToge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsfSwgcG9seWdvbjoge2luZGljZXMsIHBvc2l0aW9uLCB1diwgbm9ybWFsfX1cbiAqL1xuXG4gLy8gVE9ETyBOb3QgbWVyZ2UgZmVhdHVyZVxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJ1ZGVHZW9KU09OKGdlb2pzb24sIG9wdHMpIHtcblxuICAgIG9wdHMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRzKTtcblxuICAgIGNvbnN0IHBvbHlsaW5lcyA9IFtdO1xuICAgIGNvbnN0IHBvbHlnb25zID0gW107XG5cbiAgICBjb25zdCBwb2x5bGluZUZlYXR1cmVJbmRpY2VzID0gW107XG4gICAgY29uc3QgcG9seWdvbkZlYXR1cmVJbmRpY2VzID0gW107XG5cbiAgICBjb25zdCBtaW4gPSBbSW5maW5pdHksIEluZmluaXR5XTtcbiAgICBjb25zdCBtYXggPSBbLUluZmluaXR5LCAtSW5maW5pdHldO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnZW9qc29uLmZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IGZlYXR1cmUgPSBnZW9qc29uLmZlYXR1cmVzW2ldO1xuICAgICAgICBjb25zdCBnZW9tZXRyeSA9IGZlYXR1cmUuZ2VvbWV0cnk7XG4gICAgICAgIGlmIChnZW9tZXRyeSAmJiBnZW9tZXRyeS5jb29yZGluYXRlcykge1xuICAgICAgICAgICAgc3dpdGNoIChnZW9tZXRyeS50eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnTGluZVN0cmluZyc6XG4gICAgICAgICAgICAgICAgICAgIHBvbHlsaW5lcy5wdXNoKGdlb21ldHJ5LmNvb3JkaW5hdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVGZWF0dXJlSW5kaWNlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QoZ2VvbWV0cnkuY29vcmRpbmF0ZXMsIG1pbiwgbWF4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBnZW9tZXRyeS5jb29yZGluYXRlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVzLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXNba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWxpbmVGZWF0dXJlSW5kaWNlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRpbmdSZWN0KGdlb21ldHJ5LmNvb3JkaW5hdGVzW2tdLCBtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUG9seWdvbic6XG4gICAgICAgICAgICAgICAgICAgIHBvbHlnb25zLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXMpO1xuICAgICAgICAgICAgICAgICAgICBwb2x5Z29uRmVhdHVyZUluZGljZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQm91bmRpbmdSZWN0KGdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdLCBtaW4sIG1heCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ011bHRpUG9seWdvbic6XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgZ2VvbWV0cnkuY29vcmRpbmF0ZXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvbHlnb25zLnB1c2goZ2VvbWV0cnkuY29vcmRpbmF0ZXNba10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9seWdvbkZlYXR1cmVJbmRpY2VzLnB1c2goaSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVCb3VuZGluZ1JlY3QoZ2VvbWV0cnkuY29vcmRpbmF0ZXNba11bMF0sIG1pbiwgbWF4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9wdHMuYm91bmRpbmdSZWN0ID0gb3B0cy5ib3VuZGluZ1JlY3QgfHwge1xuICAgICAgICB4OiBtaW5bMF0sIHk6IG1pblsxXSwgd2lkdGg6IG1heFswXSAtIG1pblswXSwgaGVpZ2h0OiBtYXhbMV0gLSBtaW5bMV1cbiAgICB9O1xuXG4gICAgY29uc3Qgb3JpZ2luYWxEZXB0aCA9IG9wdHMuZGVwdGg7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcG9seWxpbmU6IGV4dHJ1ZGVQb2x5bGluZShwb2x5bGluZXMsIE9iamVjdC5hc3NpZ24ob3B0cywge1xuICAgICAgICAgICAgZGVwdGg6IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRGVwdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uLmZlYXR1cmVzW3BvbHlsaW5lRmVhdHVyZUluZGljZXNbaWR4XV1cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKSxcbiAgICAgICAgcG9seWdvbjogZXh0cnVkZVBvbHlnb24ocG9seWdvbnMsIE9iamVjdC5hc3NpZ24ob3B0cywge1xuICAgICAgICAgICAgZGVwdGg6IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9yaWdpbmFsRGVwdGggPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRGVwdGgoXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW9qc29uLmZlYXR1cmVzW3BvbHlnb25GZWF0dXJlSW5kaWNlc1tpZHhdXVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gb3JpZ2luYWxEZXB0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgfTtcbn1cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9nZW9tZXRyeS1leHRydWRlL3NyYy9tYWluLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzJcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///272\n");

/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjczLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2VhcmN1dC9zcmMvZWFyY3V0LmpzPzIyZGQiXSwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGVhcmN1dDtcbm1vZHVsZS5leHBvcnRzLmRlZmF1bHQgPSBlYXJjdXQ7XG5cbmZ1bmN0aW9uIGVhcmN1dChkYXRhLCBob2xlSW5kaWNlcywgZGltKSB7XG5cbiAgICBkaW0gPSBkaW0gfHwgMjtcblxuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aCxcbiAgICAgICAgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGgsXG4gICAgICAgIG91dGVyTm9kZSA9IGxpbmtlZExpc3QoZGF0YSwgMCwgb3V0ZXJMZW4sIGRpbSwgdHJ1ZSksXG4gICAgICAgIHRyaWFuZ2xlcyA9IFtdO1xuXG4gICAgaWYgKCFvdXRlck5vZGUgfHwgb3V0ZXJOb2RlLm5leHQgPT09IG91dGVyTm9kZS5wcmV2KSByZXR1cm4gdHJpYW5nbGVzO1xuXG4gICAgdmFyIG1pblgsIG1pblksIG1heFgsIG1heFksIHgsIHksIGludlNpemU7XG5cbiAgICBpZiAoaGFzSG9sZXMpIG91dGVyTm9kZSA9IGVsaW1pbmF0ZUhvbGVzKGRhdGEsIGhvbGVJbmRpY2VzLCBvdXRlck5vZGUsIGRpbSk7XG5cbiAgICAvLyBpZiB0aGUgc2hhcGUgaXMgbm90IHRvbyBzaW1wbGUsIHdlJ2xsIHVzZSB6LW9yZGVyIGN1cnZlIGhhc2ggbGF0ZXI7IGNhbGN1bGF0ZSBwb2x5Z29uIGJib3hcbiAgICBpZiAoZGF0YS5sZW5ndGggPiA4MCAqIGRpbSkge1xuICAgICAgICBtaW5YID0gbWF4WCA9IGRhdGFbMF07XG4gICAgICAgIG1pblkgPSBtYXhZID0gZGF0YVsxXTtcblxuICAgICAgICBmb3IgKHZhciBpID0gZGltOyBpIDwgb3V0ZXJMZW47IGkgKz0gZGltKSB7XG4gICAgICAgICAgICB4ID0gZGF0YVtpXTtcbiAgICAgICAgICAgIHkgPSBkYXRhW2kgKyAxXTtcbiAgICAgICAgICAgIGlmICh4IDwgbWluWCkgbWluWCA9IHg7XG4gICAgICAgICAgICBpZiAoeSA8IG1pblkpIG1pblkgPSB5O1xuICAgICAgICAgICAgaWYgKHggPiBtYXhYKSBtYXhYID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gbWF4WSkgbWF4WSA9IHk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtaW5YLCBtaW5ZIGFuZCBpbnZTaXplIGFyZSBsYXRlciB1c2VkIHRvIHRyYW5zZm9ybSBjb29yZHMgaW50byBpbnRlZ2VycyBmb3Igei1vcmRlciBjYWxjdWxhdGlvblxuICAgICAgICBpbnZTaXplID0gTWF0aC5tYXgobWF4WCAtIG1pblgsIG1heFkgLSBtaW5ZKTtcbiAgICAgICAgaW52U2l6ZSA9IGludlNpemUgIT09IDAgPyAxIC8gaW52U2l6ZSA6IDA7XG4gICAgfVxuXG4gICAgZWFyY3V0TGlua2VkKG91dGVyTm9kZSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgcmV0dXJuIHRyaWFuZ2xlcztcbn1cblxuLy8gY3JlYXRlIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0IGZyb20gcG9seWdvbiBwb2ludHMgaW4gdGhlIHNwZWNpZmllZCB3aW5kaW5nIG9yZGVyXG5mdW5jdGlvbiBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgY2xvY2t3aXNlKSB7XG4gICAgdmFyIGksIGxhc3Q7XG5cbiAgICBpZiAoY2xvY2t3aXNlID09PSAoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pID4gMCkpIHtcbiAgICAgICAgZm9yIChpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gZGltKSBsYXN0ID0gaW5zZXJ0Tm9kZShpLCBkYXRhW2ldLCBkYXRhW2kgKyAxXSwgbGFzdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZm9yIChpID0gZW5kIC0gZGltOyBpID49IHN0YXJ0OyBpIC09IGRpbSkgbGFzdCA9IGluc2VydE5vZGUoaSwgZGF0YVtpXSwgZGF0YVtpICsgMV0sIGxhc3QpO1xuICAgIH1cblxuICAgIGlmIChsYXN0ICYmIGVxdWFscyhsYXN0LCBsYXN0Lm5leHQpKSB7XG4gICAgICAgIHJlbW92ZU5vZGUobGFzdCk7XG4gICAgICAgIGxhc3QgPSBsYXN0Lm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxhc3Q7XG59XG5cbi8vIGVsaW1pbmF0ZSBjb2xpbmVhciBvciBkdXBsaWNhdGUgcG9pbnRzXG5mdW5jdGlvbiBmaWx0ZXJQb2ludHMoc3RhcnQsIGVuZCkge1xuICAgIGlmICghc3RhcnQpIHJldHVybiBzdGFydDtcbiAgICBpZiAoIWVuZCkgZW5kID0gc3RhcnQ7XG5cbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBhZ2FpbjtcbiAgICBkbyB7XG4gICAgICAgIGFnYWluID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKCFwLnN0ZWluZXIgJiYgKGVxdWFscyhwLCBwLm5leHQpIHx8IGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID09PSAwKSkge1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwKTtcbiAgICAgICAgICAgIHAgPSBlbmQgPSBwLnByZXY7XG4gICAgICAgICAgICBpZiAocCA9PT0gcC5uZXh0KSBicmVhaztcbiAgICAgICAgICAgIGFnYWluID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcCA9IHAubmV4dDtcbiAgICAgICAgfVxuICAgIH0gd2hpbGUgKGFnYWluIHx8IHAgIT09IGVuZCk7XG5cbiAgICByZXR1cm4gZW5kO1xufVxuXG4vLyBtYWluIGVhciBzbGljaW5nIGxvb3Agd2hpY2ggdHJpYW5ndWxhdGVzIGEgcG9seWdvbiAoZ2l2ZW4gYXMgYSBsaW5rZWQgbGlzdClcbmZ1bmN0aW9uIGVhcmN1dExpbmtlZChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplLCBwYXNzKSB7XG4gICAgaWYgKCFlYXIpIHJldHVybjtcblxuICAgIC8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbiAgICBpZiAoIXBhc3MgJiYgaW52U2l6ZSkgaW5kZXhDdXJ2ZShlYXIsIG1pblgsIG1pblksIGludlNpemUpO1xuXG4gICAgdmFyIHN0b3AgPSBlYXIsXG4gICAgICAgIHByZXYsIG5leHQ7XG5cbiAgICAvLyBpdGVyYXRlIHRocm91Z2ggZWFycywgc2xpY2luZyB0aGVtIG9uZSBieSBvbmVcbiAgICB3aGlsZSAoZWFyLnByZXYgIT09IGVhci5uZXh0KSB7XG4gICAgICAgIHByZXYgPSBlYXIucHJldjtcbiAgICAgICAgbmV4dCA9IGVhci5uZXh0O1xuXG4gICAgICAgIGlmIChpbnZTaXplID8gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSA6IGlzRWFyKGVhcikpIHtcbiAgICAgICAgICAgIC8vIGN1dCBvZmYgdGhlIHRyaWFuZ2xlXG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChwcmV2LmkgLyBkaW0pO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goZWFyLmkgLyBkaW0pO1xuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2gobmV4dC5pIC8gZGltKTtcblxuICAgICAgICAgICAgcmVtb3ZlTm9kZShlYXIpO1xuXG4gICAgICAgICAgICAvLyBza2lwcGluZyB0aGUgbmV4dCB2ZXJ0ZXggbGVhZHMgdG8gbGVzcyBzbGl2ZXIgdHJpYW5nbGVzXG4gICAgICAgICAgICBlYXIgPSBuZXh0Lm5leHQ7XG4gICAgICAgICAgICBzdG9wID0gbmV4dC5uZXh0O1xuXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGVhciA9IG5leHQ7XG5cbiAgICAgICAgLy8gaWYgd2UgbG9vcGVkIHRocm91Z2ggdGhlIHdob2xlIHJlbWFpbmluZyBwb2x5Z29uIGFuZCBjYW4ndCBmaW5kIGFueSBtb3JlIGVhcnNcbiAgICAgICAgaWYgKGVhciA9PT0gc3RvcCkge1xuICAgICAgICAgICAgLy8gdHJ5IGZpbHRlcmluZyBwb2ludHMgYW5kIHNsaWNpbmcgYWdhaW5cbiAgICAgICAgICAgIGlmICghcGFzcykge1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChmaWx0ZXJQb2ludHMoZWFyKSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUsIDEpO1xuXG4gICAgICAgICAgICAvLyBpZiB0aGlzIGRpZG4ndCB3b3JrLCB0cnkgY3VyaW5nIGFsbCBzbWFsbCBzZWxmLWludGVyc2VjdGlvbnMgbG9jYWxseVxuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXNzID09PSAxKSB7XG4gICAgICAgICAgICAgICAgZWFyID0gY3VyZUxvY2FsSW50ZXJzZWN0aW9ucyhlYXIsIHRyaWFuZ2xlcywgZGltKTtcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoZWFyLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSwgMik7XG5cbiAgICAgICAgICAgIC8vIGFzIGEgbGFzdCByZXNvcnQsIHRyeSBzcGxpdHRpbmcgdGhlIHJlbWFpbmluZyBwb2x5Z29uIGludG8gdHdvXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhc3MgPT09IDIpIHtcbiAgICAgICAgICAgICAgICBzcGxpdEVhcmN1dChlYXIsIHRyaWFuZ2xlcywgZGltLCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIGNoZWNrIHdoZXRoZXIgYSBwb2x5Z29uIG5vZGUgZm9ybXMgYSB2YWxpZCBlYXIgd2l0aCBhZGphY2VudCBub2Rlc1xuZnVuY3Rpb24gaXNFYXIoZWFyKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gbm93IG1ha2Ugc3VyZSB3ZSBkb24ndCBoYXZlIG90aGVyIHBvaW50cyBpbnNpZGUgdGhlIHBvdGVudGlhbCBlYXJcbiAgICB2YXIgcCA9IGVhci5uZXh0Lm5leHQ7XG5cbiAgICB3aGlsZSAocCAhPT0gZWFyLnByZXYpIHtcbiAgICAgICAgaWYgKHBvaW50SW5UcmlhbmdsZShhLngsIGEueSwgYi54LCBiLnksIGMueCwgYy55LCBwLngsIHAueSkgJiZcbiAgICAgICAgICAgIGFyZWEocC5wcmV2LCBwLCBwLm5leHQpID49IDApIHJldHVybiBmYWxzZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNFYXJIYXNoZWQoZWFyLCBtaW5YLCBtaW5ZLCBpbnZTaXplKSB7XG4gICAgdmFyIGEgPSBlYXIucHJldixcbiAgICAgICAgYiA9IGVhcixcbiAgICAgICAgYyA9IGVhci5uZXh0O1xuXG4gICAgaWYgKGFyZWEoYSwgYiwgYykgPj0gMCkgcmV0dXJuIGZhbHNlOyAvLyByZWZsZXgsIGNhbid0IGJlIGFuIGVhclxuXG4gICAgLy8gdHJpYW5nbGUgYmJveDsgbWluICYgbWF4IGFyZSBjYWxjdWxhdGVkIGxpa2UgdGhpcyBmb3Igc3BlZWRcbiAgICB2YXIgbWluVFggPSBhLnggPCBiLnggPyAoYS54IDwgYy54ID8gYS54IDogYy54KSA6IChiLnggPCBjLnggPyBiLnggOiBjLngpLFxuICAgICAgICBtaW5UWSA9IGEueSA8IGIueSA/IChhLnkgPCBjLnkgPyBhLnkgOiBjLnkpIDogKGIueSA8IGMueSA/IGIueSA6IGMueSksXG4gICAgICAgIG1heFRYID0gYS54ID4gYi54ID8gKGEueCA+IGMueCA/IGEueCA6IGMueCkgOiAoYi54ID4gYy54ID8gYi54IDogYy54KSxcbiAgICAgICAgbWF4VFkgPSBhLnkgPiBiLnkgPyAoYS55ID4gYy55ID8gYS55IDogYy55KSA6IChiLnkgPiBjLnkgPyBiLnkgOiBjLnkpO1xuXG4gICAgLy8gei1vcmRlciByYW5nZSBmb3IgdGhlIGN1cnJlbnQgdHJpYW5nbGUgYmJveDtcbiAgICB2YXIgbWluWiA9IHpPcmRlcihtaW5UWCwgbWluVFksIG1pblgsIG1pblksIGludlNpemUpLFxuICAgICAgICBtYXhaID0gek9yZGVyKG1heFRYLCBtYXhUWSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG5cbiAgICB2YXIgcCA9IGVhci5wcmV2WixcbiAgICAgICAgbiA9IGVhci5uZXh0WjtcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIGluIGJvdGggZGlyZWN0aW9uc1xuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aICYmIG4gJiYgbi56IDw9IG1heFopIHtcbiAgICAgICAgaWYgKHAgIT09IGVhci5wcmV2ICYmIHAgIT09IGVhci5uZXh0ICYmXG4gICAgICAgICAgICBwb2ludEluVHJpYW5nbGUoYS54LCBhLnksIGIueCwgYi55LCBjLngsIGMueSwgcC54LCBwLnkpICYmXG4gICAgICAgICAgICBhcmVhKHAucHJldiwgcCwgcC5uZXh0KSA+PSAwKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHAgPSBwLnByZXZaO1xuXG4gICAgICAgIGlmIChuICE9PSBlYXIucHJldiAmJiBuICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIG4ueCwgbi55KSAmJlxuICAgICAgICAgICAgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGRlY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChwICYmIHAueiA+PSBtaW5aKSB7XG4gICAgICAgIGlmIChwICE9PSBlYXIucHJldiAmJiBwICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIHAueCwgcC55KSAmJlxuICAgICAgICAgICAgYXJlYShwLnByZXYsIHAsIHAubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBwID0gcC5wcmV2WjtcbiAgICB9XG5cbiAgICAvLyBsb29rIGZvciByZW1haW5pbmcgcG9pbnRzIGluIGluY3JlYXNpbmcgei1vcmRlclxuICAgIHdoaWxlIChuICYmIG4ueiA8PSBtYXhaKSB7XG4gICAgICAgIGlmIChuICE9PSBlYXIucHJldiAmJiBuICE9PSBlYXIubmV4dCAmJlxuICAgICAgICAgICAgcG9pbnRJblRyaWFuZ2xlKGEueCwgYS55LCBiLngsIGIueSwgYy54LCBjLnksIG4ueCwgbi55KSAmJlxuICAgICAgICAgICAgYXJlYShuLnByZXYsIG4sIG4ubmV4dCkgPj0gMCkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBuID0gbi5uZXh0WjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbn1cblxuLy8gZ28gdGhyb3VnaCBhbGwgcG9seWdvbiBub2RlcyBhbmQgY3VyZSBzbWFsbCBsb2NhbCBzZWxmLWludGVyc2VjdGlvbnNcbmZ1bmN0aW9uIGN1cmVMb2NhbEludGVyc2VjdGlvbnMoc3RhcnQsIHRyaWFuZ2xlcywgZGltKSB7XG4gICAgdmFyIHAgPSBzdGFydDtcbiAgICBkbyB7XG4gICAgICAgIHZhciBhID0gcC5wcmV2LFxuICAgICAgICAgICAgYiA9IHAubmV4dC5uZXh0O1xuXG4gICAgICAgIGlmICghZXF1YWxzKGEsIGIpICYmIGludGVyc2VjdHMoYSwgcCwgcC5uZXh0LCBiKSAmJiBsb2NhbGx5SW5zaWRlKGEsIGIpICYmIGxvY2FsbHlJbnNpZGUoYiwgYSkpIHtcblxuICAgICAgICAgICAgdHJpYW5nbGVzLnB1c2goYS5pIC8gZGltKTtcbiAgICAgICAgICAgIHRyaWFuZ2xlcy5wdXNoKHAuaSAvIGRpbSk7XG4gICAgICAgICAgICB0cmlhbmdsZXMucHVzaChiLmkgLyBkaW0pO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgdHdvIG5vZGVzIGludm9sdmVkXG4gICAgICAgICAgICByZW1vdmVOb2RlKHApO1xuICAgICAgICAgICAgcmVtb3ZlTm9kZShwLm5leHQpO1xuXG4gICAgICAgICAgICBwID0gc3RhcnQgPSBiO1xuICAgICAgICB9XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gc3RhcnQpO1xuXG4gICAgcmV0dXJuIHA7XG59XG5cbi8vIHRyeSBzcGxpdHRpbmcgcG9seWdvbiBpbnRvIHR3byBhbmQgdHJpYW5ndWxhdGUgdGhlbSBpbmRlcGVuZGVudGx5XG5mdW5jdGlvbiBzcGxpdEVhcmN1dChzdGFydCwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICAvLyBsb29rIGZvciBhIHZhbGlkIGRpYWdvbmFsIHRoYXQgZGl2aWRlcyB0aGUgcG9seWdvbiBpbnRvIHR3b1xuICAgIHZhciBhID0gc3RhcnQ7XG4gICAgZG8ge1xuICAgICAgICB2YXIgYiA9IGEubmV4dC5uZXh0O1xuICAgICAgICB3aGlsZSAoYiAhPT0gYS5wcmV2KSB7XG4gICAgICAgICAgICBpZiAoYS5pICE9PSBiLmkgJiYgaXNWYWxpZERpYWdvbmFsKGEsIGIpKSB7XG4gICAgICAgICAgICAgICAgLy8gc3BsaXQgdGhlIHBvbHlnb24gaW4gdHdvIGJ5IHRoZSBkaWFnb25hbFxuICAgICAgICAgICAgICAgIHZhciBjID0gc3BsaXRQb2x5Z29uKGEsIGIpO1xuXG4gICAgICAgICAgICAgICAgLy8gZmlsdGVyIGNvbGluZWFyIHBvaW50cyBhcm91bmQgdGhlIGN1dHNcbiAgICAgICAgICAgICAgICBhID0gZmlsdGVyUG9pbnRzKGEsIGEubmV4dCk7XG4gICAgICAgICAgICAgICAgYyA9IGZpbHRlclBvaW50cyhjLCBjLm5leHQpO1xuXG4gICAgICAgICAgICAgICAgLy8gcnVuIGVhcmN1dCBvbiBlYWNoIGhhbGZcbiAgICAgICAgICAgICAgICBlYXJjdXRMaW5rZWQoYSwgdHJpYW5nbGVzLCBkaW0sIG1pblgsIG1pblksIGludlNpemUpO1xuICAgICAgICAgICAgICAgIGVhcmN1dExpbmtlZChjLCB0cmlhbmdsZXMsIGRpbSwgbWluWCwgbWluWSwgaW52U2l6ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYiA9IGIubmV4dDtcbiAgICAgICAgfVxuICAgICAgICBhID0gYS5uZXh0O1xuICAgIH0gd2hpbGUgKGEgIT09IHN0YXJ0KTtcbn1cblxuLy8gbGluayBldmVyeSBob2xlIGludG8gdGhlIG91dGVyIGxvb3AsIHByb2R1Y2luZyBhIHNpbmdsZS1yaW5nIHBvbHlnb24gd2l0aG91dCBob2xlc1xuZnVuY3Rpb24gZWxpbWluYXRlSG9sZXMoZGF0YSwgaG9sZUluZGljZXMsIG91dGVyTm9kZSwgZGltKSB7XG4gICAgdmFyIHF1ZXVlID0gW10sXG4gICAgICAgIGksIGxlbiwgc3RhcnQsIGVuZCwgbGlzdDtcblxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIHN0YXJ0ID0gaG9sZUluZGljZXNbaV0gKiBkaW07XG4gICAgICAgIGVuZCA9IGkgPCBsZW4gLSAxID8gaG9sZUluZGljZXNbaSArIDFdICogZGltIDogZGF0YS5sZW5ndGg7XG4gICAgICAgIGxpc3QgPSBsaW5rZWRMaXN0KGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSwgZmFsc2UpO1xuICAgICAgICBpZiAobGlzdCA9PT0gbGlzdC5uZXh0KSBsaXN0LnN0ZWluZXIgPSB0cnVlO1xuICAgICAgICBxdWV1ZS5wdXNoKGdldExlZnRtb3N0KGxpc3QpKTtcbiAgICB9XG5cbiAgICBxdWV1ZS5zb3J0KGNvbXBhcmVYKTtcblxuICAgIC8vIHByb2Nlc3MgaG9sZXMgZnJvbSBsZWZ0IHRvIHJpZ2h0XG4gICAgZm9yIChpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGVsaW1pbmF0ZUhvbGUocXVldWVbaV0sIG91dGVyTm9kZSk7XG4gICAgICAgIG91dGVyTm9kZSA9IGZpbHRlclBvaW50cyhvdXRlck5vZGUsIG91dGVyTm9kZS5uZXh0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gb3V0ZXJOb2RlO1xufVxuXG5mdW5jdGlvbiBjb21wYXJlWChhLCBiKSB7XG4gICAgcmV0dXJuIGEueCAtIGIueDtcbn1cblxuLy8gZmluZCBhIGJyaWRnZSBiZXR3ZWVuIHZlcnRpY2VzIHRoYXQgY29ubmVjdHMgaG9sZSB3aXRoIGFuIG91dGVyIHJpbmcgYW5kIGFuZCBsaW5rIGl0XG5mdW5jdGlvbiBlbGltaW5hdGVIb2xlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIG91dGVyTm9kZSA9IGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSk7XG4gICAgaWYgKG91dGVyTm9kZSkge1xuICAgICAgICB2YXIgYiA9IHNwbGl0UG9seWdvbihvdXRlck5vZGUsIGhvbGUpO1xuICAgICAgICBmaWx0ZXJQb2ludHMoYiwgYi5uZXh0KTtcbiAgICB9XG59XG5cbi8vIERhdmlkIEViZXJseSdzIGFsZ29yaXRobSBmb3IgZmluZGluZyBhIGJyaWRnZSBiZXR3ZWVuIGhvbGUgYW5kIG91dGVyIHBvbHlnb25cbmZ1bmN0aW9uIGZpbmRIb2xlQnJpZGdlKGhvbGUsIG91dGVyTm9kZSkge1xuICAgIHZhciBwID0gb3V0ZXJOb2RlLFxuICAgICAgICBoeCA9IGhvbGUueCxcbiAgICAgICAgaHkgPSBob2xlLnksXG4gICAgICAgIHF4ID0gLUluZmluaXR5LFxuICAgICAgICBtO1xuXG4gICAgLy8gZmluZCBhIHNlZ21lbnQgaW50ZXJzZWN0ZWQgYnkgYSByYXkgZnJvbSB0aGUgaG9sZSdzIGxlZnRtb3N0IHBvaW50IHRvIHRoZSBsZWZ0O1xuICAgIC8vIHNlZ21lbnQncyBlbmRwb2ludCB3aXRoIGxlc3NlciB4IHdpbGwgYmUgcG90ZW50aWFsIGNvbm5lY3Rpb24gcG9pbnRcbiAgICBkbyB7XG4gICAgICAgIGlmIChoeSA8PSBwLnkgJiYgaHkgPj0gcC5uZXh0LnkgJiYgcC5uZXh0LnkgIT09IHAueSkge1xuICAgICAgICAgICAgdmFyIHggPSBwLnggKyAoaHkgLSBwLnkpICogKHAubmV4dC54IC0gcC54KSAvIChwLm5leHQueSAtIHAueSk7XG4gICAgICAgICAgICBpZiAoeCA8PSBoeCAmJiB4ID4gcXgpIHtcbiAgICAgICAgICAgICAgICBxeCA9IHg7XG4gICAgICAgICAgICAgICAgaWYgKHggPT09IGh4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoeSA9PT0gcC55KSByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh5ID09PSBwLm5leHQueSkgcmV0dXJuIHAubmV4dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbSA9IHAueCA8IHAubmV4dC54ID8gcCA6IHAubmV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IG91dGVyTm9kZSk7XG5cbiAgICBpZiAoIW0pIHJldHVybiBudWxsO1xuXG4gICAgaWYgKGh4ID09PSBxeCkgcmV0dXJuIG0ucHJldjsgLy8gaG9sZSB0b3VjaGVzIG91dGVyIHNlZ21lbnQ7IHBpY2sgbG93ZXIgZW5kcG9pbnRcblxuICAgIC8vIGxvb2sgZm9yIHBvaW50cyBpbnNpZGUgdGhlIHRyaWFuZ2xlIG9mIGhvbGUgcG9pbnQsIHNlZ21lbnQgaW50ZXJzZWN0aW9uIGFuZCBlbmRwb2ludDtcbiAgICAvLyBpZiB0aGVyZSBhcmUgbm8gcG9pbnRzIGZvdW5kLCB3ZSBoYXZlIGEgdmFsaWQgY29ubmVjdGlvbjtcbiAgICAvLyBvdGhlcndpc2UgY2hvb3NlIHRoZSBwb2ludCBvZiB0aGUgbWluaW11bSBhbmdsZSB3aXRoIHRoZSByYXkgYXMgY29ubmVjdGlvbiBwb2ludFxuXG4gICAgdmFyIHN0b3AgPSBtLFxuICAgICAgICBteCA9IG0ueCxcbiAgICAgICAgbXkgPSBtLnksXG4gICAgICAgIHRhbk1pbiA9IEluZmluaXR5LFxuICAgICAgICB0YW47XG5cbiAgICBwID0gbS5uZXh0O1xuXG4gICAgd2hpbGUgKHAgIT09IHN0b3ApIHtcbiAgICAgICAgaWYgKGh4ID49IHAueCAmJiBwLnggPj0gbXggJiYgaHggIT09IHAueCAmJlxuICAgICAgICAgICAgICAgIHBvaW50SW5UcmlhbmdsZShoeSA8IG15ID8gaHggOiBxeCwgaHksIG14LCBteSwgaHkgPCBteSA/IHF4IDogaHgsIGh5LCBwLngsIHAueSkpIHtcblxuICAgICAgICAgICAgdGFuID0gTWF0aC5hYnMoaHkgLSBwLnkpIC8gKGh4IC0gcC54KTsgLy8gdGFuZ2VudGlhbFxuXG4gICAgICAgICAgICBpZiAoKHRhbiA8IHRhbk1pbiB8fCAodGFuID09PSB0YW5NaW4gJiYgcC54ID4gbS54KSkgJiYgbG9jYWxseUluc2lkZShwLCBob2xlKSkge1xuICAgICAgICAgICAgICAgIG0gPSBwO1xuICAgICAgICAgICAgICAgIHRhbk1pbiA9IHRhbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG07XG59XG5cbi8vIGludGVybGluayBwb2x5Z29uIG5vZGVzIGluIHotb3JkZXJcbmZ1bmN0aW9uIGluZGV4Q3VydmUoc3RhcnQsIG1pblgsIG1pblksIGludlNpemUpIHtcbiAgICB2YXIgcCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueiA9PT0gbnVsbCkgcC56ID0gek9yZGVyKHAueCwgcC55LCBtaW5YLCBtaW5ZLCBpbnZTaXplKTtcbiAgICAgICAgcC5wcmV2WiA9IHAucHJldjtcbiAgICAgICAgcC5uZXh0WiA9IHAubmV4dDtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBzdGFydCk7XG5cbiAgICBwLnByZXZaLm5leHRaID0gbnVsbDtcbiAgICBwLnByZXZaID0gbnVsbDtcblxuICAgIHNvcnRMaW5rZWQocCk7XG59XG5cbi8vIFNpbW9uIFRhdGhhbSdzIGxpbmtlZCBsaXN0IG1lcmdlIHNvcnQgYWxnb3JpdGhtXG4vLyBodHRwOi8vd3d3LmNoaWFyay5ncmVlbmVuZC5vcmcudWsvfnNndGF0aGFtL2FsZ29yaXRobXMvbGlzdHNvcnQuaHRtbFxuZnVuY3Rpb24gc29ydExpbmtlZChsaXN0KSB7XG4gICAgdmFyIGksIHAsIHEsIGUsIHRhaWwsIG51bU1lcmdlcywgcFNpemUsIHFTaXplLFxuICAgICAgICBpblNpemUgPSAxO1xuXG4gICAgZG8ge1xuICAgICAgICBwID0gbGlzdDtcbiAgICAgICAgbGlzdCA9IG51bGw7XG4gICAgICAgIHRhaWwgPSBudWxsO1xuICAgICAgICBudW1NZXJnZXMgPSAwO1xuXG4gICAgICAgIHdoaWxlIChwKSB7XG4gICAgICAgICAgICBudW1NZXJnZXMrKztcbiAgICAgICAgICAgIHEgPSBwO1xuICAgICAgICAgICAgcFNpemUgPSAwO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGluU2l6ZTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgcFNpemUrKztcbiAgICAgICAgICAgICAgICBxID0gcS5uZXh0WjtcbiAgICAgICAgICAgICAgICBpZiAoIXEpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcVNpemUgPSBpblNpemU7XG5cbiAgICAgICAgICAgIHdoaWxlIChwU2l6ZSA+IDAgfHwgKHFTaXplID4gMCAmJiBxKSkge1xuXG4gICAgICAgICAgICAgICAgaWYgKHBTaXplICE9PSAwICYmIChxU2l6ZSA9PT0gMCB8fCAhcSB8fCBwLnogPD0gcS56KSkge1xuICAgICAgICAgICAgICAgICAgICBlID0gcDtcbiAgICAgICAgICAgICAgICAgICAgcCA9IHAubmV4dFo7XG4gICAgICAgICAgICAgICAgICAgIHBTaXplLS07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZSA9IHE7XG4gICAgICAgICAgICAgICAgICAgIHEgPSBxLm5leHRaO1xuICAgICAgICAgICAgICAgICAgICBxU2l6ZS0tO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmICh0YWlsKSB0YWlsLm5leHRaID0gZTtcbiAgICAgICAgICAgICAgICBlbHNlIGxpc3QgPSBlO1xuXG4gICAgICAgICAgICAgICAgZS5wcmV2WiA9IHRhaWw7XG4gICAgICAgICAgICAgICAgdGFpbCA9IGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHAgPSBxO1xuICAgICAgICB9XG5cbiAgICAgICAgdGFpbC5uZXh0WiA9IG51bGw7XG4gICAgICAgIGluU2l6ZSAqPSAyO1xuXG4gICAgfSB3aGlsZSAobnVtTWVyZ2VzID4gMSk7XG5cbiAgICByZXR1cm4gbGlzdDtcbn1cblxuLy8gei1vcmRlciBvZiBhIHBvaW50IGdpdmVuIGNvb3JkcyBhbmQgaW52ZXJzZSBvZiB0aGUgbG9uZ2VyIHNpZGUgb2YgZGF0YSBiYm94XG5mdW5jdGlvbiB6T3JkZXIoeCwgeSwgbWluWCwgbWluWSwgaW52U2l6ZSkge1xuICAgIC8vIGNvb3JkcyBhcmUgdHJhbnNmb3JtZWQgaW50byBub24tbmVnYXRpdmUgMTUtYml0IGludGVnZXIgcmFuZ2VcbiAgICB4ID0gMzI3NjcgKiAoeCAtIG1pblgpICogaW52U2l6ZTtcbiAgICB5ID0gMzI3NjcgKiAoeSAtIG1pblkpICogaW52U2l6ZTtcblxuICAgIHggPSAoeCB8ICh4IDw8IDgpKSAmIDB4MDBGRjAwRkY7XG4gICAgeCA9ICh4IHwgKHggPDwgNCkpICYgMHgwRjBGMEYwRjtcbiAgICB4ID0gKHggfCAoeCA8PCAyKSkgJiAweDMzMzMzMzMzO1xuICAgIHggPSAoeCB8ICh4IDw8IDEpKSAmIDB4NTU1NTU1NTU7XG5cbiAgICB5ID0gKHkgfCAoeSA8PCA4KSkgJiAweDAwRkYwMEZGO1xuICAgIHkgPSAoeSB8ICh5IDw8IDQpKSAmIDB4MEYwRjBGMEY7XG4gICAgeSA9ICh5IHwgKHkgPDwgMikpICYgMHgzMzMzMzMzMztcbiAgICB5ID0gKHkgfCAoeSA8PCAxKSkgJiAweDU1NTU1NTU1O1xuXG4gICAgcmV0dXJuIHggfCAoeSA8PCAxKTtcbn1cblxuLy8gZmluZCB0aGUgbGVmdG1vc3Qgbm9kZSBvZiBhIHBvbHlnb24gcmluZ1xuZnVuY3Rpb24gZ2V0TGVmdG1vc3Qoc3RhcnQpIHtcbiAgICB2YXIgcCA9IHN0YXJ0LFxuICAgICAgICBsZWZ0bW9zdCA9IHN0YXJ0O1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAueCA8IGxlZnRtb3N0LnggfHwgKHAueCA9PT0gbGVmdG1vc3QueCAmJiBwLnkgPCBsZWZ0bW9zdC55KSkgbGVmdG1vc3QgPSBwO1xuICAgICAgICBwID0gcC5uZXh0O1xuICAgIH0gd2hpbGUgKHAgIT09IHN0YXJ0KTtcblxuICAgIHJldHVybiBsZWZ0bW9zdDtcbn1cblxuLy8gY2hlY2sgaWYgYSBwb2ludCBsaWVzIHdpdGhpbiBhIGNvbnZleCB0cmlhbmdsZVxuZnVuY3Rpb24gcG9pbnRJblRyaWFuZ2xlKGF4LCBheSwgYngsIGJ5LCBjeCwgY3ksIHB4LCBweSkge1xuICAgIHJldHVybiAoY3ggLSBweCkgKiAoYXkgLSBweSkgLSAoYXggLSBweCkgKiAoY3kgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYXggLSBweCkgKiAoYnkgLSBweSkgLSAoYnggLSBweCkgKiAoYXkgLSBweSkgPj0gMCAmJlxuICAgICAgICAgICAoYnggLSBweCkgKiAoY3kgLSBweSkgLSAoY3ggLSBweCkgKiAoYnkgLSBweSkgPj0gMDtcbn1cblxuLy8gY2hlY2sgaWYgYSBkaWFnb25hbCBiZXR3ZWVuIHR3byBwb2x5Z29uIG5vZGVzIGlzIHZhbGlkIChsaWVzIGluIHBvbHlnb24gaW50ZXJpb3IpXG5mdW5jdGlvbiBpc1ZhbGlkRGlhZ29uYWwoYSwgYikge1xuICAgIHJldHVybiBhLm5leHQuaSAhPT0gYi5pICYmIGEucHJldi5pICE9PSBiLmkgJiYgIWludGVyc2VjdHNQb2x5Z29uKGEsIGIpICYmXG4gICAgICAgICAgIGxvY2FsbHlJbnNpZGUoYSwgYikgJiYgbG9jYWxseUluc2lkZShiLCBhKSAmJiBtaWRkbGVJbnNpZGUoYSwgYik7XG59XG5cbi8vIHNpZ25lZCBhcmVhIG9mIGEgdHJpYW5nbGVcbmZ1bmN0aW9uIGFyZWEocCwgcSwgcikge1xuICAgIHJldHVybiAocS55IC0gcC55KSAqIChyLnggLSBxLngpIC0gKHEueCAtIHAueCkgKiAoci55IC0gcS55KTtcbn1cblxuLy8gY2hlY2sgaWYgdHdvIHBvaW50cyBhcmUgZXF1YWxcbmZ1bmN0aW9uIGVxdWFscyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEueCA9PT0gcDIueCAmJiBwMS55ID09PSBwMi55O1xufVxuXG4vLyBjaGVjayBpZiB0d28gc2VnbWVudHMgaW50ZXJzZWN0XG5mdW5jdGlvbiBpbnRlcnNlY3RzKHAxLCBxMSwgcDIsIHEyKSB7XG4gICAgaWYgKChlcXVhbHMocDEsIHExKSAmJiBlcXVhbHMocDIsIHEyKSkgfHxcbiAgICAgICAgKGVxdWFscyhwMSwgcTIpICYmIGVxdWFscyhwMiwgcTEpKSkgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGFyZWEocDEsIHExLCBwMikgPiAwICE9PSBhcmVhKHAxLCBxMSwgcTIpID4gMCAmJlxuICAgICAgICAgICBhcmVhKHAyLCBxMiwgcDEpID4gMCAhPT0gYXJlYShwMiwgcTIsIHExKSA+IDA7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpbnRlcnNlY3RzIGFueSBwb2x5Z29uIHNlZ21lbnRzXG5mdW5jdGlvbiBpbnRlcnNlY3RzUG9seWdvbihhLCBiKSB7XG4gICAgdmFyIHAgPSBhO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKHAuaSAhPT0gYS5pICYmIHAubmV4dC5pICE9PSBhLmkgJiYgcC5pICE9PSBiLmkgJiYgcC5uZXh0LmkgIT09IGIuaSAmJlxuICAgICAgICAgICAgICAgIGludGVyc2VjdHMocCwgcC5uZXh0LCBhLCBiKSkgcmV0dXJuIHRydWU7XG4gICAgICAgIHAgPSBwLm5leHQ7XG4gICAgfSB3aGlsZSAocCAhPT0gYSk7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGNoZWNrIGlmIGEgcG9seWdvbiBkaWFnb25hbCBpcyBsb2NhbGx5IGluc2lkZSB0aGUgcG9seWdvblxuZnVuY3Rpb24gbG9jYWxseUluc2lkZShhLCBiKSB7XG4gICAgcmV0dXJuIGFyZWEoYS5wcmV2LCBhLCBhLm5leHQpIDwgMCA/XG4gICAgICAgIGFyZWEoYSwgYiwgYS5uZXh0KSA+PSAwICYmIGFyZWEoYSwgYS5wcmV2LCBiKSA+PSAwIDpcbiAgICAgICAgYXJlYShhLCBiLCBhLnByZXYpIDwgMCB8fCBhcmVhKGEsIGEubmV4dCwgYikgPCAwO1xufVxuXG4vLyBjaGVjayBpZiB0aGUgbWlkZGxlIHBvaW50IG9mIGEgcG9seWdvbiBkaWFnb25hbCBpcyBpbnNpZGUgdGhlIHBvbHlnb25cbmZ1bmN0aW9uIG1pZGRsZUluc2lkZShhLCBiKSB7XG4gICAgdmFyIHAgPSBhLFxuICAgICAgICBpbnNpZGUgPSBmYWxzZSxcbiAgICAgICAgcHggPSAoYS54ICsgYi54KSAvIDIsXG4gICAgICAgIHB5ID0gKGEueSArIGIueSkgLyAyO1xuICAgIGRvIHtcbiAgICAgICAgaWYgKCgocC55ID4gcHkpICE9PSAocC5uZXh0LnkgPiBweSkpICYmIHAubmV4dC55ICE9PSBwLnkgJiZcbiAgICAgICAgICAgICAgICAocHggPCAocC5uZXh0LnggLSBwLngpICogKHB5IC0gcC55KSAvIChwLm5leHQueSAtIHAueSkgKyBwLngpKVxuICAgICAgICAgICAgaW5zaWRlID0gIWluc2lkZTtcbiAgICAgICAgcCA9IHAubmV4dDtcbiAgICB9IHdoaWxlIChwICE9PSBhKTtcblxuICAgIHJldHVybiBpbnNpZGU7XG59XG5cbi8vIGxpbmsgdHdvIHBvbHlnb24gdmVydGljZXMgd2l0aCBhIGJyaWRnZTsgaWYgdGhlIHZlcnRpY2VzIGJlbG9uZyB0byB0aGUgc2FtZSByaW5nLCBpdCBzcGxpdHMgcG9seWdvbiBpbnRvIHR3bztcbi8vIGlmIG9uZSBiZWxvbmdzIHRvIHRoZSBvdXRlciByaW5nIGFuZCBhbm90aGVyIHRvIGEgaG9sZSwgaXQgbWVyZ2VzIGl0IGludG8gYSBzaW5nbGUgcmluZ1xuZnVuY3Rpb24gc3BsaXRQb2x5Z29uKGEsIGIpIHtcbiAgICB2YXIgYTIgPSBuZXcgTm9kZShhLmksIGEueCwgYS55KSxcbiAgICAgICAgYjIgPSBuZXcgTm9kZShiLmksIGIueCwgYi55KSxcbiAgICAgICAgYW4gPSBhLm5leHQsXG4gICAgICAgIGJwID0gYi5wcmV2O1xuXG4gICAgYS5uZXh0ID0gYjtcbiAgICBiLnByZXYgPSBhO1xuXG4gICAgYTIubmV4dCA9IGFuO1xuICAgIGFuLnByZXYgPSBhMjtcblxuICAgIGIyLm5leHQgPSBhMjtcbiAgICBhMi5wcmV2ID0gYjI7XG5cbiAgICBicC5uZXh0ID0gYjI7XG4gICAgYjIucHJldiA9IGJwO1xuXG4gICAgcmV0dXJuIGIyO1xufVxuXG4vLyBjcmVhdGUgYSBub2RlIGFuZCBvcHRpb25hbGx5IGxpbmsgaXQgd2l0aCBwcmV2aW91cyBvbmUgKGluIGEgY2lyY3VsYXIgZG91Ymx5IGxpbmtlZCBsaXN0KVxuZnVuY3Rpb24gaW5zZXJ0Tm9kZShpLCB4LCB5LCBsYXN0KSB7XG4gICAgdmFyIHAgPSBuZXcgTm9kZShpLCB4LCB5KTtcblxuICAgIGlmICghbGFzdCkge1xuICAgICAgICBwLnByZXYgPSBwO1xuICAgICAgICBwLm5leHQgPSBwO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcC5uZXh0ID0gbGFzdC5uZXh0O1xuICAgICAgICBwLnByZXYgPSBsYXN0O1xuICAgICAgICBsYXN0Lm5leHQucHJldiA9IHA7XG4gICAgICAgIGxhc3QubmV4dCA9IHA7XG4gICAgfVxuICAgIHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiByZW1vdmVOb2RlKHApIHtcbiAgICBwLm5leHQucHJldiA9IHAucHJldjtcbiAgICBwLnByZXYubmV4dCA9IHAubmV4dDtcblxuICAgIGlmIChwLnByZXZaKSBwLnByZXZaLm5leHRaID0gcC5uZXh0WjtcbiAgICBpZiAocC5uZXh0WikgcC5uZXh0Wi5wcmV2WiA9IHAucHJldlo7XG59XG5cbmZ1bmN0aW9uIE5vZGUoaSwgeCwgeSkge1xuICAgIC8vIHZlcnRleCBpbmRleCBpbiBjb29yZGluYXRlcyBhcnJheVxuICAgIHRoaXMuaSA9IGk7XG5cbiAgICAvLyB2ZXJ0ZXggY29vcmRpbmF0ZXNcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG5cbiAgICAvLyBwcmV2aW91cyBhbmQgbmV4dCB2ZXJ0ZXggbm9kZXMgaW4gYSBwb2x5Z29uIHJpbmdcbiAgICB0aGlzLnByZXYgPSBudWxsO1xuICAgIHRoaXMubmV4dCA9IG51bGw7XG5cbiAgICAvLyB6LW9yZGVyIGN1cnZlIHZhbHVlXG4gICAgdGhpcy56ID0gbnVsbDtcblxuICAgIC8vIHByZXZpb3VzIGFuZCBuZXh0IG5vZGVzIGluIHotb3JkZXJcbiAgICB0aGlzLnByZXZaID0gbnVsbDtcbiAgICB0aGlzLm5leHRaID0gbnVsbDtcblxuICAgIC8vIGluZGljYXRlcyB3aGV0aGVyIHRoaXMgaXMgYSBzdGVpbmVyIHBvaW50XG4gICAgdGhpcy5zdGVpbmVyID0gZmFsc2U7XG59XG5cbi8vIHJldHVybiBhIHBlcmNlbnRhZ2UgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBwb2x5Z29uIGFyZWEgYW5kIGl0cyB0cmlhbmd1bGF0aW9uIGFyZWE7XG4vLyB1c2VkIHRvIHZlcmlmeSBjb3JyZWN0bmVzcyBvZiB0cmlhbmd1bGF0aW9uXG5lYXJjdXQuZGV2aWF0aW9uID0gZnVuY3Rpb24gKGRhdGEsIGhvbGVJbmRpY2VzLCBkaW0sIHRyaWFuZ2xlcykge1xuICAgIHZhciBoYXNIb2xlcyA9IGhvbGVJbmRpY2VzICYmIGhvbGVJbmRpY2VzLmxlbmd0aDtcbiAgICB2YXIgb3V0ZXJMZW4gPSBoYXNIb2xlcyA/IGhvbGVJbmRpY2VzWzBdICogZGltIDogZGF0YS5sZW5ndGg7XG5cbiAgICB2YXIgcG9seWdvbkFyZWEgPSBNYXRoLmFicyhzaWduZWRBcmVhKGRhdGEsIDAsIG91dGVyTGVuLCBkaW0pKTtcbiAgICBpZiAoaGFzSG9sZXMpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGhvbGVJbmRpY2VzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBob2xlSW5kaWNlc1tpXSAqIGRpbTtcbiAgICAgICAgICAgIHZhciBlbmQgPSBpIDwgbGVuIC0gMSA/IGhvbGVJbmRpY2VzW2kgKyAxXSAqIGRpbSA6IGRhdGEubGVuZ3RoO1xuICAgICAgICAgICAgcG9seWdvbkFyZWEgLT0gTWF0aC5hYnMoc2lnbmVkQXJlYShkYXRhLCBzdGFydCwgZW5kLCBkaW0pKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciB0cmlhbmdsZXNBcmVhID0gMDtcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJpYW5nbGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIHZhciBhID0gdHJpYW5nbGVzW2ldICogZGltO1xuICAgICAgICB2YXIgYiA9IHRyaWFuZ2xlc1tpICsgMV0gKiBkaW07XG4gICAgICAgIHZhciBjID0gdHJpYW5nbGVzW2kgKyAyXSAqIGRpbTtcbiAgICAgICAgdHJpYW5nbGVzQXJlYSArPSBNYXRoLmFicyhcbiAgICAgICAgICAgIChkYXRhW2FdIC0gZGF0YVtjXSkgKiAoZGF0YVtiICsgMV0gLSBkYXRhW2EgKyAxXSkgLVxuICAgICAgICAgICAgKGRhdGFbYV0gLSBkYXRhW2JdKSAqIChkYXRhW2MgKyAxXSAtIGRhdGFbYSArIDFdKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBvbHlnb25BcmVhID09PSAwICYmIHRyaWFuZ2xlc0FyZWEgPT09IDAgPyAwIDpcbiAgICAgICAgTWF0aC5hYnMoKHRyaWFuZ2xlc0FyZWEgLSBwb2x5Z29uQXJlYSkgLyBwb2x5Z29uQXJlYSk7XG59O1xuXG5mdW5jdGlvbiBzaWduZWRBcmVhKGRhdGEsIHN0YXJ0LCBlbmQsIGRpbSkge1xuICAgIHZhciBzdW0gPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydCwgaiA9IGVuZCAtIGRpbTsgaSA8IGVuZDsgaSArPSBkaW0pIHtcbiAgICAgICAgc3VtICs9IChkYXRhW2pdIC0gZGF0YVtpXSkgKiAoZGF0YVtpICsgMV0gKyBkYXRhW2ogKyAxXSk7XG4gICAgICAgIGogPSBpO1xuICAgIH1cbiAgICByZXR1cm4gc3VtO1xufVxuXG4vLyB0dXJuIGEgcG9seWdvbiBpbiBhIG11bHRpLWRpbWVuc2lvbmFsIGFycmF5IGZvcm0gKGUuZy4gYXMgaW4gR2VvSlNPTikgaW50byBhIGZvcm0gRWFyY3V0IGFjY2VwdHNcbmVhcmN1dC5mbGF0dGVuID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgICB2YXIgZGltID0gZGF0YVswXVswXS5sZW5ndGgsXG4gICAgICAgIHJlc3VsdCA9IHt2ZXJ0aWNlczogW10sIGhvbGVzOiBbXSwgZGltZW5zaW9uczogZGltfSxcbiAgICAgICAgaG9sZUluZGV4ID0gMDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGRhdGFbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgZGltOyBkKyspIHJlc3VsdC52ZXJ0aWNlcy5wdXNoKGRhdGFbaV1bal1bZF0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaG9sZUluZGV4ICs9IGRhdGFbaSAtIDFdLmxlbmd0aDtcbiAgICAgICAgICAgIHJlc3VsdC5ob2xlcy5wdXNoKGhvbGVJbmRleCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9lYXJjdXQvc3JjL2VhcmN1dC5qc1xuLy8gbW9kdWxlIGlkID0gMjczXG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///273\n");

/***/ }),
/* 274 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/*\n (c) 2017, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1[0] - p2[0],\n        dy = p1[1] - p2[1];\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1[0],\n        y = p1[1],\n        dx = p2[0] - x,\n        dy = p2[1] - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2[0];\n            y = p2[1];\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p[0] - x;\n    dy = p[1] - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n/* harmony default export */ __webpack_exports__[\"a\"] = (simplify);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL3NpbXBsaWZ5LmpzPzkwM2YiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAoYykgMjAxNywgVmxhZGltaXIgQWdhZm9ua2luXG4gU2ltcGxpZnkuanMsIGEgaGlnaC1wZXJmb3JtYW5jZSBKUyBwb2x5bGluZSBzaW1wbGlmaWNhdGlvbiBsaWJyYXJ5XG4gbW91cm5lci5naXRodWIuaW8vc2ltcGxpZnktanNcbiovXG5cbi8vIHRvIHN1aXQgeW91ciBwb2ludCBmb3JtYXQsIHJ1biBzZWFyY2gvcmVwbGFjZSBmb3IgJy54JyBhbmQgJy55Jztcbi8vIGZvciAzRCB2ZXJzaW9uLCBzZWUgM2QgYnJhbmNoIChjb25maWd1cmFiaWxpdHkgd291bGQgZHJhdyBzaWduaWZpY2FudCBwZXJmb3JtYW5jZSBvdmVyaGVhZClcblxuLy8gc3F1YXJlIGRpc3RhbmNlIGJldHdlZW4gMiBwb2ludHNcbmZ1bmN0aW9uIGdldFNxRGlzdChwMSwgcDIpIHtcblxuICAgIHZhciBkeCA9IHAxWzBdIC0gcDJbMF0sXG4gICAgICAgIGR5ID0gcDFbMV0gLSBwMlsxXTtcblxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cblxuLy8gc3F1YXJlIGRpc3RhbmNlIGZyb20gYSBwb2ludCB0byBhIHNlZ21lbnRcbmZ1bmN0aW9uIGdldFNxU2VnRGlzdChwLCBwMSwgcDIpIHtcblxuICAgIHZhciB4ID0gcDFbMF0sXG4gICAgICAgIHkgPSBwMVsxXSxcbiAgICAgICAgZHggPSBwMlswXSAtIHgsXG4gICAgICAgIGR5ID0gcDJbMV0gLSB5O1xuXG4gICAgaWYgKGR4ICE9PSAwIHx8IGR5ICE9PSAwKSB7XG5cbiAgICAgICAgdmFyIHQgPSAoKHBbMF0gLSB4KSAqIGR4ICsgKHBbMV0gLSB5KSAqIGR5KSAvIChkeCAqIGR4ICsgZHkgKiBkeSk7XG5cbiAgICAgICAgaWYgKHQgPiAxKSB7XG4gICAgICAgICAgICB4ID0gcDJbMF07XG4gICAgICAgICAgICB5ID0gcDJbMV07XG5cbiAgICAgICAgfSBlbHNlIGlmICh0ID4gMCkge1xuICAgICAgICAgICAgeCArPSBkeCAqIHQ7XG4gICAgICAgICAgICB5ICs9IGR5ICogdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGR4ID0gcFswXSAtIHg7XG4gICAgZHkgPSBwWzFdIC0geTtcblxuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeTtcbn1cbi8vIHJlc3Qgb2YgdGhlIGNvZGUgZG9lc24ndCBjYXJlIGFib3V0IHBvaW50IGZvcm1hdFxuXG4vLyBiYXNpYyBkaXN0YW5jZS1iYXNlZCBzaW1wbGlmaWNhdGlvblxuZnVuY3Rpb24gc2ltcGxpZnlSYWRpYWxEaXN0KHBvaW50cywgc3FUb2xlcmFuY2UpIHtcblxuICAgIHZhciBwcmV2UG9pbnQgPSBwb2ludHNbMF0sXG4gICAgICAgIG5ld1BvaW50cyA9IFtwcmV2UG9pbnRdLFxuICAgICAgICBwb2ludDtcblxuICAgIGZvciAodmFyIGkgPSAxLCBsZW4gPSBwb2ludHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgcG9pbnQgPSBwb2ludHNbaV07XG5cbiAgICAgICAgaWYgKGdldFNxRGlzdChwb2ludCwgcHJldlBvaW50KSA+IHNxVG9sZXJhbmNlKSB7XG4gICAgICAgICAgICBuZXdQb2ludHMucHVzaChwb2ludCk7XG4gICAgICAgICAgICBwcmV2UG9pbnQgPSBwb2ludDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV2UG9pbnQgIT09IHBvaW50KSBuZXdQb2ludHMucHVzaChwb2ludCk7XG5cbiAgICByZXR1cm4gbmV3UG9pbnRzO1xufVxuXG5mdW5jdGlvbiBzaW1wbGlmeURQU3RlcChwb2ludHMsIGZpcnN0LCBsYXN0LCBzcVRvbGVyYW5jZSwgc2ltcGxpZmllZCkge1xuICAgIHZhciBtYXhTcURpc3QgPSBzcVRvbGVyYW5jZSxcbiAgICAgICAgaW5kZXg7XG5cbiAgICBmb3IgKHZhciBpID0gZmlyc3QgKyAxOyBpIDwgbGFzdDsgaSsrKSB7XG4gICAgICAgIHZhciBzcURpc3QgPSBnZXRTcVNlZ0Rpc3QocG9pbnRzW2ldLCBwb2ludHNbZmlyc3RdLCBwb2ludHNbbGFzdF0pO1xuXG4gICAgICAgIGlmIChzcURpc3QgPiBtYXhTcURpc3QpIHtcbiAgICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgICAgIG1heFNxRGlzdCA9IHNxRGlzdDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtYXhTcURpc3QgPiBzcVRvbGVyYW5jZSkge1xuICAgICAgICBpZiAoaW5kZXggLSBmaXJzdCA+IDEpIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgZmlyc3QsIGluZGV4LCBzcVRvbGVyYW5jZSwgc2ltcGxpZmllZCk7XG4gICAgICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbaW5kZXhdKTtcbiAgICAgICAgaWYgKGxhc3QgLSBpbmRleCA+IDEpIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgaW5kZXgsIGxhc3QsIHNxVG9sZXJhbmNlLCBzaW1wbGlmaWVkKTtcbiAgICB9XG59XG5cbi8vIHNpbXBsaWZpY2F0aW9uIHVzaW5nIFJhbWVyLURvdWdsYXMtUGV1Y2tlciBhbGdvcml0aG1cbmZ1bmN0aW9uIHNpbXBsaWZ5RG91Z2xhc1BldWNrZXIocG9pbnRzLCBzcVRvbGVyYW5jZSkge1xuICAgIHZhciBsYXN0ID0gcG9pbnRzLmxlbmd0aCAtIDE7XG5cbiAgICB2YXIgc2ltcGxpZmllZCA9IFtwb2ludHNbMF1dO1xuICAgIHNpbXBsaWZ5RFBTdGVwKHBvaW50cywgMCwgbGFzdCwgc3FUb2xlcmFuY2UsIHNpbXBsaWZpZWQpO1xuICAgIHNpbXBsaWZpZWQucHVzaChwb2ludHNbbGFzdF0pO1xuXG4gICAgcmV0dXJuIHNpbXBsaWZpZWQ7XG59XG5cbi8vIGJvdGggYWxnb3JpdGhtcyBjb21iaW5lZCBmb3IgYXdlc29tZSBwZXJmb3JtYW5jZVxuZnVuY3Rpb24gc2ltcGxpZnkocG9pbnRzLCB0b2xlcmFuY2UsIGhpZ2hlc3RRdWFsaXR5KSB7XG5cbiAgICBpZiAocG9pbnRzLmxlbmd0aCA8PSAyKSByZXR1cm4gcG9pbnRzO1xuXG4gICAgdmFyIHNxVG9sZXJhbmNlID0gdG9sZXJhbmNlICE9PSB1bmRlZmluZWQgPyB0b2xlcmFuY2UgKiB0b2xlcmFuY2UgOiAxO1xuXG4gICAgcG9pbnRzID0gaGlnaGVzdFF1YWxpdHkgPyBwb2ludHMgOiBzaW1wbGlmeVJhZGlhbERpc3QocG9pbnRzLCBzcVRvbGVyYW5jZSk7XG4gICAgcG9pbnRzID0gc2ltcGxpZnlEb3VnbGFzUGV1Y2tlcihwb2ludHMsIHNxVG9sZXJhbmNlKTtcblxuICAgIHJldHVybiBwb2ludHM7XG59XG5leHBvcnQgZGVmYXVsdCBzaW1wbGlmeTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL25vZGVfbW9kdWxlcy9nZW9tZXRyeS1leHRydWRlL3NyYy9zaW1wbGlmeS5qc1xuLy8gbW9kdWxlIGlkID0gMjc0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///274\n");

/***/ }),
/* 275 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export dot */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = v2Dot;\n/* unused harmony export normalize */\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = v2Normalize;\n/* unused harmony export scale */\n/* unused harmony export mul */\n/* unused harmony export scaleAndAdd */\n/* unused harmony export add */\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = v2Add;\n/* unused harmony export sub */\n/* unused harmony export v2Sub */\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = v3Sub;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = v3Normalize;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = v3Cross;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = slerp;\n/* unused harmony export lineIntersection */\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = area;\n/* unused harmony export triangleArea */\nfunction dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1] + v1[2] * v2[2];\n}\nfunction v2Dot(v1, v2) {\n    return v1[0] * v2[0] + v1[1] * v2[1];\n}\n\nfunction normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const d = Math.sqrt(x * x + y * y + z * z);\n    out[0] = x / d;\n    out[1] = y / d;\n    out[2] = z / d;\n    return out;\n}\n\nfunction v2Normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const d = Math.sqrt(x * x + y * y);\n    out[0] = x / d;\n    out[1] = y / d;\n    return out;\n}\n\nfunction scale(out, v, s) {\n    out[0] = v[0] * s;\n    out[1] = v[1] * s;\n    out[2] = v[2] * s;\n    return out;\n}\n\nfunction mul(out, v1, v2) {\n    out[0] = v1[0] * v2[0];\n    out[1] = v1[1] * v2[1];\n    out[2] = v1[2] * v2[2];\n    return out;\n}\n\nfunction scaleAndAdd(out, v1, v2, s) {\n    out[0] = v1[0] + v2[0] * s;\n    out[1] = v1[1] + v2[1] * s;\n    out[2] = v1[2] + v2[2] * s;\n    return out;\n}\n\nfunction add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    out[2] = v1[2] + v2[2];\n    return out;\n}\n\nfunction v2Add(out, v1, v2) {\n    out[0] = v1[0] + v2[0];\n    out[1] = v1[1] + v2[1];\n    return out;\n}\n\nfunction sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    out[2] = v1[2] - v2[2];\n    return out;\n}\n\nfunction v2Sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    return out;\n}\n\nfunction v3Sub(out, v1, v2) {\n    out[0] = v1[0] - v2[0];\n    out[1] = v1[1] - v2[1];\n    out[2] = v1[2] - v2[2];\n    return out;\n}\n\nfunction v3Normalize(out, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    const d = Math.sqrt(x * x + y * y + z * z);\n    out[0] = x / d;\n    out[1] = y / d;\n    out[2] = z / d;\n    return out;\n}\n\nfunction v3Cross(out, v1, v2) {\n    var ax = v1[0], ay = v1[1], az = v1[2],\n        bx = v2[0], by = v2[1], bz = v2[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n\nconst rel = [];\n// start and end must be normalized\nfunction slerp(out, start, end, t) {\n    // https://keithmaggio.wordpress.com/2011/02/15/math-magician-lerp-slerp-and-nlerp/\n    const cosT = dot(start, end);\n    const theta = Math.acos(cosT) * t;\n\n    scaleAndAdd(rel, end, start, -cosT);\n    normalize(rel, rel);// start and rel Orthonormal basis\n\n    scale(out, start, Math.cos(theta));\n    scaleAndAdd(out, out, rel, Math.sin(theta));\n\n    return out;\n}\n\nfunction lineIntersection(x1, y1, x2, y2, x3, y3, x4, y4, out, writeOffset) {\n    const dx1 = x2 - x1;\n    const dx2 = x4 - x3;\n    const dy1 = y2 - y1;\n    const dy2 = y4 - y3;\n\n    const cross = dy2 * dx1 - dx2 * dy1;\n    const tmp1 = y1 - y3;\n    const tmp2 = x1 - x3;\n    const t1 = (dx2 * tmp1 - dy2 * tmp2) / cross;\n    // const t2 = (dx1 * tmp1 - dy1 * tmp2) / cross;\n\n    out[writeOffset] = x1 + t1 * (x2 - x1);\n    out[writeOffset + 1] = y1 + t1 * (y2 - y1);\n\n    return t1;\n}\n\nfunction area(points, start, end) {\n    // Signed polygon area\n    const n = end - start;\n    if (n < 3) {\n        return 0;\n    }\n    let area = 0;\n    for (let i = (end - 1) * 2, j = start * 2; j < end * 2;) {\n        const x0 = points[i];\n        const y0 = points[i + 1];\n        const x1 = points[j];\n        const y1 = points[j + 1];\n        i = j;\n        j += 2;\n        area += x0 * y1 - x1 * y0;\n    }\n\n    return area;\n}\n\n\nfunction triangleArea(x0, y0, x1, y1, x2, y2) {\n    return (x1 - x0) * (y2 - y1) - (y1 - y0) * (x2 - x1);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21hdGguanM/OTg2ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZG90KHYxLCB2Mikge1xuICAgIHJldHVybiB2MVswXSAqIHYyWzBdICsgdjFbMV0gKiB2MlsxXSArIHYxWzJdICogdjJbMl07XG59XG5leHBvcnQgZnVuY3Rpb24gdjJEb3QodjEsIHYyKSB7XG4gICAgcmV0dXJuIHYxWzBdICogdjJbMF0gKyB2MVsxXSAqIHYyWzFdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKG91dCwgdikge1xuICAgIGNvbnN0IHggPSB2WzBdO1xuICAgIGNvbnN0IHkgPSB2WzFdO1xuICAgIGNvbnN0IHogPSB2WzJdO1xuICAgIGNvbnN0IGQgPSBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6KTtcbiAgICBvdXRbMF0gPSB4IC8gZDtcbiAgICBvdXRbMV0gPSB5IC8gZDtcbiAgICBvdXRbMl0gPSB6IC8gZDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjJOb3JtYWxpemUob3V0LCB2KSB7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KTtcbiAgICBvdXRbMF0gPSB4IC8gZDtcbiAgICBvdXRbMV0gPSB5IC8gZDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2NhbGUob3V0LCB2LCBzKSB7XG4gICAgb3V0WzBdID0gdlswXSAqIHM7XG4gICAgb3V0WzFdID0gdlsxXSAqIHM7XG4gICAgb3V0WzJdID0gdlsyXSAqIHM7XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG11bChvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdICogdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gKiB2MlsxXTtcbiAgICBvdXRbMl0gPSB2MVsyXSAqIHYyWzJdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZUFuZEFkZChvdXQsIHYxLCB2Miwgcykge1xuICAgIG91dFswXSA9IHYxWzBdICsgdjJbMF0gKiBzO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV0gKiBzO1xuICAgIG91dFsyXSA9IHYxWzJdICsgdjJbMl0gKiBzO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSArIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV07XG4gICAgb3V0WzJdID0gdjFbMl0gKyB2MlsyXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjJBZGQob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSArIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdICsgdjJbMV07XG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN1YihvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdIC0gdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gLSB2MlsxXTtcbiAgICBvdXRbMl0gPSB2MVsyXSAtIHYyWzJdO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2MlN1YihvdXQsIHYxLCB2Mikge1xuICAgIG91dFswXSA9IHYxWzBdIC0gdjJbMF07XG4gICAgb3V0WzFdID0gdjFbMV0gLSB2MlsxXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjNTdWIob3V0LCB2MSwgdjIpIHtcbiAgICBvdXRbMF0gPSB2MVswXSAtIHYyWzBdO1xuICAgIG91dFsxXSA9IHYxWzFdIC0gdjJbMV07XG4gICAgb3V0WzJdID0gdjFbMl0gLSB2MlsyXTtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdjNOb3JtYWxpemUob3V0LCB2KSB7XG4gICAgY29uc3QgeCA9IHZbMF07XG4gICAgY29uc3QgeSA9IHZbMV07XG4gICAgY29uc3QgeiA9IHZbMl07XG4gICAgY29uc3QgZCA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopO1xuICAgIG91dFswXSA9IHggLyBkO1xuICAgIG91dFsxXSA9IHkgLyBkO1xuICAgIG91dFsyXSA9IHogLyBkO1xuICAgIHJldHVybiBvdXQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB2M0Nyb3NzKG91dCwgdjEsIHYyKSB7XG4gICAgdmFyIGF4ID0gdjFbMF0sIGF5ID0gdjFbMV0sIGF6ID0gdjFbMl0sXG4gICAgICAgIGJ4ID0gdjJbMF0sIGJ5ID0gdjJbMV0sIGJ6ID0gdjJbMl07XG5cbiAgICBvdXRbMF0gPSBheSAqIGJ6IC0gYXogKiBieTtcbiAgICBvdXRbMV0gPSBheiAqIGJ4IC0gYXggKiBiejtcbiAgICBvdXRbMl0gPSBheCAqIGJ5IC0gYXkgKiBieDtcbiAgICByZXR1cm4gb3V0O1xufVxuXG5jb25zdCByZWwgPSBbXTtcbi8vIHN0YXJ0IGFuZCBlbmQgbXVzdCBiZSBub3JtYWxpemVkXG5leHBvcnQgZnVuY3Rpb24gc2xlcnAob3V0LCBzdGFydCwgZW5kLCB0KSB7XG4gICAgLy8gaHR0cHM6Ly9rZWl0aG1hZ2dpby53b3JkcHJlc3MuY29tLzIwMTEvMDIvMTUvbWF0aC1tYWdpY2lhbi1sZXJwLXNsZXJwLWFuZC1ubGVycC9cbiAgICBjb25zdCBjb3NUID0gZG90KHN0YXJ0LCBlbmQpO1xuICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hY29zKGNvc1QpICogdDtcblxuICAgIHNjYWxlQW5kQWRkKHJlbCwgZW5kLCBzdGFydCwgLWNvc1QpO1xuICAgIG5vcm1hbGl6ZShyZWwsIHJlbCk7Ly8gc3RhcnQgYW5kIHJlbCBPcnRob25vcm1hbCBiYXNpc1xuXG4gICAgc2NhbGUob3V0LCBzdGFydCwgTWF0aC5jb3ModGhldGEpKTtcbiAgICBzY2FsZUFuZEFkZChvdXQsIG91dCwgcmVsLCBNYXRoLnNpbih0aGV0YSkpO1xuXG4gICAgcmV0dXJuIG91dDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpbmVJbnRlcnNlY3Rpb24oeDEsIHkxLCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0LCBvdXQsIHdyaXRlT2Zmc2V0KSB7XG4gICAgY29uc3QgZHgxID0geDIgLSB4MTtcbiAgICBjb25zdCBkeDIgPSB4NCAtIHgzO1xuICAgIGNvbnN0IGR5MSA9IHkyIC0geTE7XG4gICAgY29uc3QgZHkyID0geTQgLSB5MztcblxuICAgIGNvbnN0IGNyb3NzID0gZHkyICogZHgxIC0gZHgyICogZHkxO1xuICAgIGNvbnN0IHRtcDEgPSB5MSAtIHkzO1xuICAgIGNvbnN0IHRtcDIgPSB4MSAtIHgzO1xuICAgIGNvbnN0IHQxID0gKGR4MiAqIHRtcDEgLSBkeTIgKiB0bXAyKSAvIGNyb3NzO1xuICAgIC8vIGNvbnN0IHQyID0gKGR4MSAqIHRtcDEgLSBkeTEgKiB0bXAyKSAvIGNyb3NzO1xuXG4gICAgb3V0W3dyaXRlT2Zmc2V0XSA9IHgxICsgdDEgKiAoeDIgLSB4MSk7XG4gICAgb3V0W3dyaXRlT2Zmc2V0ICsgMV0gPSB5MSArIHQxICogKHkyIC0geTEpO1xuXG4gICAgcmV0dXJuIHQxO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYXJlYShwb2ludHMsIHN0YXJ0LCBlbmQpIHtcbiAgICAvLyBTaWduZWQgcG9seWdvbiBhcmVhXG4gICAgY29uc3QgbiA9IGVuZCAtIHN0YXJ0O1xuICAgIGlmIChuIDwgMykge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgbGV0IGFyZWEgPSAwO1xuICAgIGZvciAobGV0IGkgPSAoZW5kIC0gMSkgKiAyLCBqID0gc3RhcnQgKiAyOyBqIDwgZW5kICogMjspIHtcbiAgICAgICAgY29uc3QgeDAgPSBwb2ludHNbaV07XG4gICAgICAgIGNvbnN0IHkwID0gcG9pbnRzW2kgKyAxXTtcbiAgICAgICAgY29uc3QgeDEgPSBwb2ludHNbal07XG4gICAgICAgIGNvbnN0IHkxID0gcG9pbnRzW2ogKyAxXTtcbiAgICAgICAgaSA9IGo7XG4gICAgICAgIGogKz0gMjtcbiAgICAgICAgYXJlYSArPSB4MCAqIHkxIC0geDEgKiB5MDtcbiAgICB9XG5cbiAgICByZXR1cm4gYXJlYTtcbn1cblxuXG5leHBvcnQgZnVuY3Rpb24gdHJpYW5nbGVBcmVhKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICByZXR1cm4gKHgxIC0geDApICogKHkyIC0geTEpIC0gKHkxIC0geTApICogKHgyIC0geDEpO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vbm9kZV9tb2R1bGVzL2dlb21ldHJ5LWV4dHJ1ZGUvc3JjL21hdGguanNcbi8vIG1vZHVsZSBpZCA9IDI3NVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///275\n");

/***/ }),
/* 276 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export generateCircle */\nfunction generateCircle(center, innerRadius, outerRadius, gap) {\n    let polylines = [];\n    let cx = center[0];\n    let cy = center[1];\n    for (let r = innerRadius; r <= outerRadius; r += gap) {\n        let polyline = [];\n        for (let a = 0; a <= 360; a += 1) {\n            let x = cx + Math.cos(a / 180 * Math.PI) * r;\n            let y = cy + Math.sin(a / 180 * Math.PI) * r;\n            polyline.push([x, y]);\n        }\n\n        polylines.push(polyline);\n    }\n    return polylines;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc2LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRvci9jaXJjbGUuanM/Yzg5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVDaXJjbGUoY2VudGVyLCBpbm5lclJhZGl1cywgb3V0ZXJSYWRpdXMsIGdhcCkge1xuICAgIGxldCBwb2x5bGluZXMgPSBbXTtcbiAgICBsZXQgY3ggPSBjZW50ZXJbMF07XG4gICAgbGV0IGN5ID0gY2VudGVyWzFdO1xuICAgIGZvciAobGV0IHIgPSBpbm5lclJhZGl1czsgciA8PSBvdXRlclJhZGl1czsgciArPSBnYXApIHtcbiAgICAgICAgbGV0IHBvbHlsaW5lID0gW107XG4gICAgICAgIGZvciAobGV0IGEgPSAwOyBhIDw9IDM2MDsgYSArPSAxKSB7XG4gICAgICAgICAgICBsZXQgeCA9IGN4ICsgTWF0aC5jb3MoYSAvIDE4MCAqIE1hdGguUEkpICogcjtcbiAgICAgICAgICAgIGxldCB5ID0gY3kgKyBNYXRoLnNpbihhIC8gMTgwICogTWF0aC5QSSkgKiByO1xuICAgICAgICAgICAgcG9seWxpbmUucHVzaChbeCwgeV0pO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9seWxpbmVzLnB1c2gocG9seWxpbmUpO1xuICAgIH1cbiAgICByZXR1cm4gcG9seWxpbmVzO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9nZW5lcmF0b3IvY2lyY2xlLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzZcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///276\n");

/***/ }),
/* 277 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* harmony export (immutable) */ __webpack_exports__[\"a\"] = generatePerlin;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = perlinSeed;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep_noise2__ = __webpack_require__(278);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__dep_noise2___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__);\n// import {noise, noiseSeed} from '../dep/noise';\n\n\nfunction halton(index, base) {\n\n    var result = 0;\n    var f = 1 / base;\n    var i = index;\n    while (i > 0) {\n        result = result + f * (i % base);\n        i = Math.floor(i / base);\n        f = f / base;\n    }\n    return result;\n}\n\n\nfunction lineGenerator(x, y, min, max, noiseScale) {\n    let width = max[0] - min[0];\n    let height = max[1] - min[1];\n    // let points = new Float32Array(20000);\n    let off = 0;\n    // points[off++] = x;\n    // points[off++] = y;\n    let points = [[x, y]];\n    // https://github.com/wangyasai/Perlin-Noise/blob/gh-pages/js/sketch.js#L97\n    for (let i = 0; i < 100; i++) {\n        for (let k = 0; k < 10; k++) {\n            let angle = Object(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__[\"perlin2\"])(x / noiseScale, y / noiseScale) * Math.PI * 2 * 40 * noiseScale;\n            let vx = Math.cos(angle) / 200;\n            let vy = Math.sin(angle) / 200;\n            x += vx;\n            y += vy;\n        }\n\n        if (x > max[0] || x < min[0] || y > max[1] || y < min[1]) {\n            break;\n        }\n\n        points.push([x, y]);\n        // points[off++] = x;\n        // points[off++] = y;\n    }\n    return points;\n    // return points.subarray(0, off);\n}\nfunction generatePerlin(min, max, number, noiseScale) {\n    let polylines = [];\n    let width = max[0] - min[0];\n    let height = max[1] - min[1];\n    for (let i = 0; i < number; i++) {\n        let x = halton(i, 2) * width + min[0];\n        let y = halton(i, 3) * height + min[1];\n        // let x = Math.random() * width + min[0];\n        // let y = Math.random() * height + min[1];\n\n        let polyline = lineGenerator(x, y, min, max, noiseScale);\n        if (polyline.length >= 10) {\n            polylines.push(polyline);\n        }\n    }\n\n    return polylines;\n}\nfunction perlinSeed(value) {\n    Object(__WEBPACK_IMPORTED_MODULE_0__dep_noise2__[\"seed\"])(value);\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dlbmVyYXRvci9wZXJsaW4uanM/NTZjMiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQge25vaXNlLCBub2lzZVNlZWR9IGZyb20gJy4uL2RlcC9ub2lzZSc7XG5pbXBvcnQge3BlcmxpbjIsIHNlZWR9IGZyb20gJy4uL2RlcC9ub2lzZTInO1xuXG5mdW5jdGlvbiBoYWx0b24oaW5kZXgsIGJhc2UpIHtcblxuICAgIHZhciByZXN1bHQgPSAwO1xuICAgIHZhciBmID0gMSAvIGJhc2U7XG4gICAgdmFyIGkgPSBpbmRleDtcbiAgICB3aGlsZSAoaSA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0ICsgZiAqIChpICUgYmFzZSk7XG4gICAgICAgIGkgPSBNYXRoLmZsb29yKGkgLyBiYXNlKTtcbiAgICAgICAgZiA9IGYgLyBiYXNlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGxpbmVHZW5lcmF0b3IoeCwgeSwgbWluLCBtYXgsIG5vaXNlU2NhbGUpIHtcbiAgICBsZXQgd2lkdGggPSBtYXhbMF0gLSBtaW5bMF07XG4gICAgbGV0IGhlaWdodCA9IG1heFsxXSAtIG1pblsxXTtcbiAgICAvLyBsZXQgcG9pbnRzID0gbmV3IEZsb2F0MzJBcnJheSgyMDAwMCk7XG4gICAgbGV0IG9mZiA9IDA7XG4gICAgLy8gcG9pbnRzW29mZisrXSA9IHg7XG4gICAgLy8gcG9pbnRzW29mZisrXSA9IHk7XG4gICAgbGV0IHBvaW50cyA9IFtbeCwgeV1dO1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS93YW5neWFzYWkvUGVybGluLU5vaXNlL2Jsb2IvZ2gtcGFnZXMvanMvc2tldGNoLmpzI0w5N1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCAxMDsgaysrKSB7XG4gICAgICAgICAgICBsZXQgYW5nbGUgPSBwZXJsaW4yKHggLyBub2lzZVNjYWxlLCB5IC8gbm9pc2VTY2FsZSkgKiBNYXRoLlBJICogMiAqIDQwICogbm9pc2VTY2FsZTtcbiAgICAgICAgICAgIGxldCB2eCA9IE1hdGguY29zKGFuZ2xlKSAvIDIwMDtcbiAgICAgICAgICAgIGxldCB2eSA9IE1hdGguc2luKGFuZ2xlKSAvIDIwMDtcbiAgICAgICAgICAgIHggKz0gdng7XG4gICAgICAgICAgICB5ICs9IHZ5O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHggPiBtYXhbMF0gfHwgeCA8IG1pblswXSB8fCB5ID4gbWF4WzFdIHx8IHkgPCBtaW5bMV0pIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcG9pbnRzLnB1c2goW3gsIHldKTtcbiAgICAgICAgLy8gcG9pbnRzW29mZisrXSA9IHg7XG4gICAgICAgIC8vIHBvaW50c1tvZmYrK10gPSB5O1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnRzO1xuICAgIC8vIHJldHVybiBwb2ludHMuc3ViYXJyYXkoMCwgb2ZmKTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBlcmxpbihtaW4sIG1heCwgbnVtYmVyLCBub2lzZVNjYWxlKSB7XG4gICAgbGV0IHBvbHlsaW5lcyA9IFtdO1xuICAgIGxldCB3aWR0aCA9IG1heFswXSAtIG1pblswXTtcbiAgICBsZXQgaGVpZ2h0ID0gbWF4WzFdIC0gbWluWzFdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtYmVyOyBpKyspIHtcbiAgICAgICAgbGV0IHggPSBoYWx0b24oaSwgMikgKiB3aWR0aCArIG1pblswXTtcbiAgICAgICAgbGV0IHkgPSBoYWx0b24oaSwgMykgKiBoZWlnaHQgKyBtaW5bMV07XG4gICAgICAgIC8vIGxldCB4ID0gTWF0aC5yYW5kb20oKSAqIHdpZHRoICsgbWluWzBdO1xuICAgICAgICAvLyBsZXQgeSA9IE1hdGgucmFuZG9tKCkgKiBoZWlnaHQgKyBtaW5bMV07XG5cbiAgICAgICAgbGV0IHBvbHlsaW5lID0gbGluZUdlbmVyYXRvcih4LCB5LCBtaW4sIG1heCwgbm9pc2VTY2FsZSk7XG4gICAgICAgIGlmIChwb2x5bGluZS5sZW5ndGggPj0gMTApIHtcbiAgICAgICAgICAgIHBvbHlsaW5lcy5wdXNoKHBvbHlsaW5lKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwb2x5bGluZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gcGVybGluU2VlZCh2YWx1ZSkge1xuICAgIHNlZWQodmFsdWUpO1xufVxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL2dlbmVyYXRvci9wZXJsaW4uanNcbi8vIG1vZHVsZSBpZCA9IDI3N1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///277\n");

/***/ }),
/* 278 */
/***/ (function(module, exports) {

eval("/*\n * A speed-improved perlin and simplex noise algorithms for 2D.\n *\n * Based on example code by Stefan Gustavson (stegu@itn.liu.se).\n * Optimisations by Peter Eastman (peastman@drizzle.stanford.edu).\n * Better rank ordering method by Stefan Gustavson in 2012.\n * Converted to Javascript by Joseph Gentle.\n *\n * Version 2012-03-09\n *\n * This code was placed in the public domain by its original author,\n * Stefan Gustavson. You may use it as you see fit, but\n * attribution is appreciated.\n *\n */\n\n\nfunction Grad(x, y, z) {\n    this.x = x; this.y = y; this.z = z;\n}\n\nGrad.prototype.dot2 = function(x, y) {\n    return this.x*x + this.y*y;\n};\n\nGrad.prototype.dot3 = function(x, y, z) {\n    return this.x*x + this.y*y + this.z*z;\n};\n\nvar grad3 = [new Grad(1,1,0),new Grad(-1,1,0),new Grad(1,-1,0),new Grad(-1,-1,0),\n                new Grad(1,0,1),new Grad(-1,0,1),new Grad(1,0,-1),new Grad(-1,0,-1),\n                new Grad(0,1,1),new Grad(0,-1,1),new Grad(0,1,-1),new Grad(0,-1,-1)];\n\nvar p = [151,160,137,91,90,15,\n131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,\n190, 6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,\n88,237,149,56,87,174,20,125,136,171,168, 68,175,74,165,71,134,139,48,27,166,\n77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,\n102,143,54, 65,25,63,161, 1,216,80,73,209,76,132,187,208, 89,18,169,200,196,\n135,130,116,188,159,86,164,100,109,198,173,186, 3,64,52,217,226,250,124,123,\n5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,\n223,183,170,213,119,248,152, 2,44,154,163, 70,221,153,101,155,167, 43,172,9,\n129,22,39,253, 19,98,108,110,79,113,224,232,178,185, 112,104,218,246,97,228,\n251,34,242,193,238,210,144,12,191,179,162,241, 81,51,145,235,249,14,239,107,\n49,192,214, 31,181,199,106,157,184, 84,204,176,115,121,50,45,127, 4,150,254,\n138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\n// To remove the need for index wrapping, double the permutation table length\nvar perm = new Array(512);\nvar gradP = new Array(512);\n\n// This isn't a very good seeding function, but it works ok. It supports 2^16\n// different seed values. Write something better if you need more seeds.\nmodule.exports.seed = function(seed) {\n    if(seed > 0 && seed < 1) {\n    // Scale the seed out\n    seed *= 65536;\n    }\n\n    seed = Math.floor(seed);\n    if(seed < 256) {\n    seed |= seed << 8;\n    }\n\n    for(var i = 0; i < 256; i++) {\n    var v;\n    if (i & 1) {\n        v = p[i] ^ (seed & 255);\n    } else {\n        v = p[i] ^ ((seed>>8) & 255);\n    }\n\n    perm[i] = perm[i + 256] = v;\n    gradP[i] = gradP[i + 256] = grad3[v % 12];\n    }\n};\n\nmodule.exports.seed(0);\n\n/*\nfor(var i=0; i<256; i++) {\n    perm[i] = perm[i + 256] = p[i];\n    gradP[i] = gradP[i + 256] = grad3[perm[i] % 12];\n}*/\n\n// Skewing and unskewing factors for 2, 3, and 4 dimensions\nvar F2 = 0.5*(Math.sqrt(3)-1);\nvar G2 = (3-Math.sqrt(3))/6;\n\nvar F3 = 1/3;\nvar G3 = 1/6;\n\n// 2D simplex noise\nmodule.exports.simplex2 = function(xin, yin) {\n    var n0, n1, n2; // Noise contributions from the three corners\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin)*F2; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var t = (i+j)*G2;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    // For the 2D case, the simplex shape is an equilateral triangle.\n    // Determine which simplex we are in.\n    var i1, j1; // Offsets for second (middle) corner of simplex in (i,j) coords\n    if(x0>y0) { // lower triangle, XY order: (0,0)->(1,0)->(1,1)\n    i1=1; j1=0;\n    } else {    // upper triangle, YX order: (0,0)->(0,1)->(1,1)\n    i1=0; j1=1;\n    }\n    // A step of (1,0) in (i,j) means a step of (1-c,-c) in (x,y), and\n    // a step of (0,1) in (i,j) means a step of (-c,1-c) in (x,y), where\n    // c = (3-sqrt(3))/6\n    var x1 = x0 - i1 + G2; // Offsets for middle corner in (x,y) unskewed coords\n    var y1 = y0 - j1 + G2;\n    var x2 = x0 - 1 + 2 * G2; // Offsets for last corner in (x,y) unskewed coords\n    var y2 = y0 - 1 + 2 * G2;\n    // Work out the hashed gradient indices of the three simplex corners\n    i &= 255;\n    j &= 255;\n    var gi0 = gradP[i+perm[j]];\n    var gi1 = gradP[i+i1+perm[j+j1]];\n    var gi2 = gradP[i+1+perm[j+1]];\n    // Calculate the contribution from the three corners\n    var t0 = 0.5 - x0*x0-y0*y0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot2(x0, y0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.5 - x1*x1-y1*y1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot2(x1, y1);\n    }\n    var t2 = 0.5 - x2*x2-y2*y2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot2(x2, y2);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 70 * (n0 + n1 + n2);\n};\n\n// 3D simplex noise\nmodule.exports.simplex3 = function(xin, yin, zin) {\n    var n0, n1, n2, n3; // Noise contributions from the four corners\n\n    // Skew the input space to determine which simplex cell we're in\n    var s = (xin+yin+zin)*F3; // Hairy factor for 2D\n    var i = Math.floor(xin+s);\n    var j = Math.floor(yin+s);\n    var k = Math.floor(zin+s);\n\n    var t = (i+j+k)*G3;\n    var x0 = xin-i+t; // The x,y distances from the cell origin, unskewed.\n    var y0 = yin-j+t;\n    var z0 = zin-k+t;\n\n    // For the 3D case, the simplex shape is a slightly irregular tetrahedron.\n    // Determine which simplex we are in.\n    var i1, j1, k1; // Offsets for second corner of simplex in (i,j,k) coords\n    var i2, j2, k2; // Offsets for third corner of simplex in (i,j,k) coords\n    if(x0 >= y0) {\n    if(y0 >= z0)      { i1=1; j1=0; k1=0; i2=1; j2=1; k2=0; }\n    else if(x0 >= z0) { i1=1; j1=0; k1=0; i2=1; j2=0; k2=1; }\n    else              { i1=0; j1=0; k1=1; i2=1; j2=0; k2=1; }\n    } else {\n    if(y0 < z0)      { i1=0; j1=0; k1=1; i2=0; j2=1; k2=1; }\n    else if(x0 < z0) { i1=0; j1=1; k1=0; i2=0; j2=1; k2=1; }\n    else             { i1=0; j1=1; k1=0; i2=1; j2=1; k2=0; }\n    }\n    // A step of (1,0,0) in (i,j,k) means a step of (1-c,-c,-c) in (x,y,z),\n    // a step of (0,1,0) in (i,j,k) means a step of (-c,1-c,-c) in (x,y,z), and\n    // a step of (0,0,1) in (i,j,k) means a step of (-c,-c,1-c) in (x,y,z), where\n    // c = 1/6.\n    var x1 = x0 - i1 + G3; // Offsets for second corner\n    var y1 = y0 - j1 + G3;\n    var z1 = z0 - k1 + G3;\n\n    var x2 = x0 - i2 + 2 * G3; // Offsets for third corner\n    var y2 = y0 - j2 + 2 * G3;\n    var z2 = z0 - k2 + 2 * G3;\n\n    var x3 = x0 - 1 + 3 * G3; // Offsets for fourth corner\n    var y3 = y0 - 1 + 3 * G3;\n    var z3 = z0 - 1 + 3 * G3;\n\n    // Work out the hashed gradient indices of the four simplex corners\n    i &= 255;\n    j &= 255;\n    k &= 255;\n    var gi0 = gradP[i+   perm[j+   perm[k   ]]];\n    var gi1 = gradP[i+i1+perm[j+j1+perm[k+k1]]];\n    var gi2 = gradP[i+i2+perm[j+j2+perm[k+k2]]];\n    var gi3 = gradP[i+ 1+perm[j+ 1+perm[k+ 1]]];\n\n    // Calculate the contribution from the four corners\n    var t0 = 0.6 - x0*x0 - y0*y0 - z0*z0;\n    if(t0<0) {\n    n0 = 0;\n    } else {\n    t0 *= t0;\n    n0 = t0 * t0 * gi0.dot3(x0, y0, z0);  // (x,y) of grad3 used for 2D gradient\n    }\n    var t1 = 0.6 - x1*x1 - y1*y1 - z1*z1;\n    if(t1<0) {\n    n1 = 0;\n    } else {\n    t1 *= t1;\n    n1 = t1 * t1 * gi1.dot3(x1, y1, z1);\n    }\n    var t2 = 0.6 - x2*x2 - y2*y2 - z2*z2;\n    if(t2<0) {\n    n2 = 0;\n    } else {\n    t2 *= t2;\n    n2 = t2 * t2 * gi2.dot3(x2, y2, z2);\n    }\n    var t3 = 0.6 - x3*x3 - y3*y3 - z3*z3;\n    if(t3<0) {\n    n3 = 0;\n    } else {\n    t3 *= t3;\n    n3 = t3 * t3 * gi3.dot3(x3, y3, z3);\n    }\n    // Add contributions from each corner to get the final noise value.\n    // The result is scaled to return values in the interval [-1,1].\n    return 32 * (n0 + n1 + n2 + n3);\n\n};\n\n// ##### Perlin noise stuff\n\nfunction fade(t) {\n    return t*t*t*(t*(t*6-15)+10);\n}\n\nfunction lerp(a, b, t) {\n    return (1-t)*a + t*b;\n}\n\n// 2D Perlin Noise\nmodule.exports.perlin2 = function(x, y) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y);\n    // Get relative xy coordinates of point within that cell\n    x = x - X; y = y - Y;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255;\n\n    // Calculate noise contributions from each of the four corners\n    var n00 = gradP[X+perm[Y]].dot2(x, y);\n    var n01 = gradP[X+perm[Y+1]].dot2(x, y-1);\n    var n10 = gradP[X+1+perm[Y]].dot2(x-1, y);\n    var n11 = gradP[X+1+perm[Y+1]].dot2(x-1, y-1);\n\n    // Compute the fade curve value for x\n    var u = fade(x);\n\n    // Interpolate the four results\n    return lerp(\n        lerp(n00, n10, u),\n        lerp(n01, n11, u),\n        fade(y));\n};\n\n// 3D Perlin Noise\nmodule.exports.perlin3 = function(x, y, z) {\n    // Find unit grid cell containing point\n    var X = Math.floor(x), Y = Math.floor(y), Z = Math.floor(z);\n    // Get relative xyz coordinates of point within that cell\n    x = x - X; y = y - Y; z = z - Z;\n    // Wrap the integer cells at 255 (smaller integer period can be introduced here)\n    X = X & 255; Y = Y & 255; Z = Z & 255;\n\n    // Calculate noise contributions from each of the eight corners\n    var n000 = gradP[X+  perm[Y+  perm[Z  ]]].dot3(x,   y,     z);\n    var n001 = gradP[X+  perm[Y+  perm[Z+1]]].dot3(x,   y,   z-1);\n    var n010 = gradP[X+  perm[Y+1+perm[Z  ]]].dot3(x,   y-1,   z);\n    var n011 = gradP[X+  perm[Y+1+perm[Z+1]]].dot3(x,   y-1, z-1);\n    var n100 = gradP[X+1+perm[Y+  perm[Z  ]]].dot3(x-1,   y,   z);\n    var n101 = gradP[X+1+perm[Y+  perm[Z+1]]].dot3(x-1,   y, z-1);\n    var n110 = gradP[X+1+perm[Y+1+perm[Z  ]]].dot3(x-1, y-1,   z);\n    var n111 = gradP[X+1+perm[Y+1+perm[Z+1]]].dot3(x-1, y-1, z-1);\n\n    // Compute the fade curve value for x, y, z\n    var u = fade(x);\n    var v = fade(y);\n    var w = fade(z);\n\n    // Interpolate\n    return lerp(\n        lerp(\n        lerp(n000, n100, u),\n        lerp(n001, n101, u), w),\n        lerp(\n        lerp(n010, n110, u),\n        lerp(n011, n111, u), w),\n        v);\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2RlcC9ub2lzZTIuanM/ZDhiOCJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQSBzcGVlZC1pbXByb3ZlZCBwZXJsaW4gYW5kIHNpbXBsZXggbm9pc2UgYWxnb3JpdGhtcyBmb3IgMkQuXG4gKlxuICogQmFzZWQgb24gZXhhbXBsZSBjb2RlIGJ5IFN0ZWZhbiBHdXN0YXZzb24gKHN0ZWd1QGl0bi5saXUuc2UpLlxuICogT3B0aW1pc2F0aW9ucyBieSBQZXRlciBFYXN0bWFuIChwZWFzdG1hbkBkcml6emxlLnN0YW5mb3JkLmVkdSkuXG4gKiBCZXR0ZXIgcmFuayBvcmRlcmluZyBtZXRob2QgYnkgU3RlZmFuIEd1c3RhdnNvbiBpbiAyMDEyLlxuICogQ29udmVydGVkIHRvIEphdmFzY3JpcHQgYnkgSm9zZXBoIEdlbnRsZS5cbiAqXG4gKiBWZXJzaW9uIDIwMTItMDMtMDlcbiAqXG4gKiBUaGlzIGNvZGUgd2FzIHBsYWNlZCBpbiB0aGUgcHVibGljIGRvbWFpbiBieSBpdHMgb3JpZ2luYWwgYXV0aG9yLFxuICogU3RlZmFuIEd1c3RhdnNvbi4gWW91IG1heSB1c2UgaXQgYXMgeW91IHNlZSBmaXQsIGJ1dFxuICogYXR0cmlidXRpb24gaXMgYXBwcmVjaWF0ZWQuXG4gKlxuICovXG5cblxuZnVuY3Rpb24gR3JhZCh4LCB5LCB6KSB7XG4gICAgdGhpcy54ID0geDsgdGhpcy55ID0geTsgdGhpcy56ID0gejtcbn1cblxuR3JhZC5wcm90b3R5cGUuZG90MiA9IGZ1bmN0aW9uKHgsIHkpIHtcbiAgICByZXR1cm4gdGhpcy54KnggKyB0aGlzLnkqeTtcbn07XG5cbkdyYWQucHJvdG90eXBlLmRvdDMgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgcmV0dXJuIHRoaXMueCp4ICsgdGhpcy55KnkgKyB0aGlzLnoqejtcbn07XG5cbnZhciBncmFkMyA9IFtuZXcgR3JhZCgxLDEsMCksbmV3IEdyYWQoLTEsMSwwKSxuZXcgR3JhZCgxLC0xLDApLG5ldyBHcmFkKC0xLC0xLDApLFxuICAgICAgICAgICAgICAgIG5ldyBHcmFkKDEsMCwxKSxuZXcgR3JhZCgtMSwwLDEpLG5ldyBHcmFkKDEsMCwtMSksbmV3IEdyYWQoLTEsMCwtMSksXG4gICAgICAgICAgICAgICAgbmV3IEdyYWQoMCwxLDEpLG5ldyBHcmFkKDAsLTEsMSksbmV3IEdyYWQoMCwxLC0xKSxuZXcgR3JhZCgwLC0xLC0xKV07XG5cbnZhciBwID0gWzE1MSwxNjAsMTM3LDkxLDkwLDE1LFxuMTMxLDEzLDIwMSw5NSw5Niw1MywxOTQsMjMzLDcsMjI1LDE0MCwzNiwxMDMsMzAsNjksMTQyLDgsOTksMzcsMjQwLDIxLDEwLDIzLFxuMTkwLCA2LDE0OCwyNDcsMTIwLDIzNCw3NSwwLDI2LDE5Nyw2Miw5NCwyNTIsMjE5LDIwMywxMTcsMzUsMTEsMzIsNTcsMTc3LDMzLFxuODgsMjM3LDE0OSw1Niw4NywxNzQsMjAsMTI1LDEzNiwxNzEsMTY4LCA2OCwxNzUsNzQsMTY1LDcxLDEzNCwxMzksNDgsMjcsMTY2LFxuNzcsMTQ2LDE1OCwyMzEsODMsMTExLDIyOSwxMjIsNjAsMjExLDEzMywyMzAsMjIwLDEwNSw5Miw0MSw1NSw0NiwyNDUsNDAsMjQ0LFxuMTAyLDE0Myw1NCwgNjUsMjUsNjMsMTYxLCAxLDIxNiw4MCw3MywyMDksNzYsMTMyLDE4NywyMDgsIDg5LDE4LDE2OSwyMDAsMTk2LFxuMTM1LDEzMCwxMTYsMTg4LDE1OSw4NiwxNjQsMTAwLDEwOSwxOTgsMTczLDE4NiwgMyw2NCw1MiwyMTcsMjI2LDI1MCwxMjQsMTIzLFxuNSwyMDIsMzgsMTQ3LDExOCwxMjYsMjU1LDgyLDg1LDIxMiwyMDcsMjA2LDU5LDIyNyw0NywxNiw1OCwxNywxODIsMTg5LDI4LDQyLFxuMjIzLDE4MywxNzAsMjEzLDExOSwyNDgsMTUyLCAyLDQ0LDE1NCwxNjMsIDcwLDIyMSwxNTMsMTAxLDE1NSwxNjcsIDQzLDE3Miw5LFxuMTI5LDIyLDM5LDI1MywgMTksOTgsMTA4LDExMCw3OSwxMTMsMjI0LDIzMiwxNzgsMTg1LCAxMTIsMTA0LDIxOCwyNDYsOTcsMjI4LFxuMjUxLDM0LDI0MiwxOTMsMjM4LDIxMCwxNDQsMTIsMTkxLDE3OSwxNjIsMjQxLCA4MSw1MSwxNDUsMjM1LDI0OSwxNCwyMzksMTA3LFxuNDksMTkyLDIxNCwgMzEsMTgxLDE5OSwxMDYsMTU3LDE4NCwgODQsMjA0LDE3NiwxMTUsMTIxLDUwLDQ1LDEyNywgNCwxNTAsMjU0LFxuMTM4LDIzNiwyMDUsOTMsMjIyLDExNCw2NywyOSwyNCw3MiwyNDMsMTQxLDEyOCwxOTUsNzgsNjYsMjE1LDYxLDE1NiwxODBdO1xuLy8gVG8gcmVtb3ZlIHRoZSBuZWVkIGZvciBpbmRleCB3cmFwcGluZywgZG91YmxlIHRoZSBwZXJtdXRhdGlvbiB0YWJsZSBsZW5ndGhcbnZhciBwZXJtID0gbmV3IEFycmF5KDUxMik7XG52YXIgZ3JhZFAgPSBuZXcgQXJyYXkoNTEyKTtcblxuLy8gVGhpcyBpc24ndCBhIHZlcnkgZ29vZCBzZWVkaW5nIGZ1bmN0aW9uLCBidXQgaXQgd29ya3Mgb2suIEl0IHN1cHBvcnRzIDJeMTZcbi8vIGRpZmZlcmVudCBzZWVkIHZhbHVlcy4gV3JpdGUgc29tZXRoaW5nIGJldHRlciBpZiB5b3UgbmVlZCBtb3JlIHNlZWRzLlxubW9kdWxlLmV4cG9ydHMuc2VlZCA9IGZ1bmN0aW9uKHNlZWQpIHtcbiAgICBpZihzZWVkID4gMCAmJiBzZWVkIDwgMSkge1xuICAgIC8vIFNjYWxlIHRoZSBzZWVkIG91dFxuICAgIHNlZWQgKj0gNjU1MzY7XG4gICAgfVxuXG4gICAgc2VlZCA9IE1hdGguZmxvb3Ioc2VlZCk7XG4gICAgaWYoc2VlZCA8IDI1Nikge1xuICAgIHNlZWQgfD0gc2VlZCA8PCA4O1xuICAgIH1cblxuICAgIGZvcih2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICAgIHZhciB2O1xuICAgIGlmIChpICYgMSkge1xuICAgICAgICB2ID0gcFtpXSBeIChzZWVkICYgMjU1KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2ID0gcFtpXSBeICgoc2VlZD4+OCkgJiAyNTUpO1xuICAgIH1cblxuICAgIHBlcm1baV0gPSBwZXJtW2kgKyAyNTZdID0gdjtcbiAgICBncmFkUFtpXSA9IGdyYWRQW2kgKyAyNTZdID0gZ3JhZDNbdiAlIDEyXTtcbiAgICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5zZWVkKDApO1xuXG4vKlxuZm9yKHZhciBpPTA7IGk8MjU2OyBpKyspIHtcbiAgICBwZXJtW2ldID0gcGVybVtpICsgMjU2XSA9IHBbaV07XG4gICAgZ3JhZFBbaV0gPSBncmFkUFtpICsgMjU2XSA9IGdyYWQzW3Blcm1baV0gJSAxMl07XG59Ki9cblxuLy8gU2tld2luZyBhbmQgdW5za2V3aW5nIGZhY3RvcnMgZm9yIDIsIDMsIGFuZCA0IGRpbWVuc2lvbnNcbnZhciBGMiA9IDAuNSooTWF0aC5zcXJ0KDMpLTEpO1xudmFyIEcyID0gKDMtTWF0aC5zcXJ0KDMpKS82O1xuXG52YXIgRjMgPSAxLzM7XG52YXIgRzMgPSAxLzY7XG5cbi8vIDJEIHNpbXBsZXggbm9pc2Vcbm1vZHVsZS5leHBvcnRzLnNpbXBsZXgyID0gZnVuY3Rpb24oeGluLCB5aW4pIHtcbiAgICB2YXIgbjAsIG4xLCBuMjsgLy8gTm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIHRoZSB0aHJlZSBjb3JuZXJzXG4gICAgLy8gU2tldyB0aGUgaW5wdXQgc3BhY2UgdG8gZGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggY2VsbCB3ZSdyZSBpblxuICAgIHZhciBzID0gKHhpbit5aW4pKkYyOyAvLyBIYWlyeSBmYWN0b3IgZm9yIDJEXG4gICAgdmFyIGkgPSBNYXRoLmZsb29yKHhpbitzKTtcbiAgICB2YXIgaiA9IE1hdGguZmxvb3IoeWluK3MpO1xuICAgIHZhciB0ID0gKGkraikqRzI7XG4gICAgdmFyIHgwID0geGluLWkrdDsgLy8gVGhlIHgseSBkaXN0YW5jZXMgZnJvbSB0aGUgY2VsbCBvcmlnaW4sIHVuc2tld2VkLlxuICAgIHZhciB5MCA9IHlpbi1qK3Q7XG4gICAgLy8gRm9yIHRoZSAyRCBjYXNlLCB0aGUgc2ltcGxleCBzaGFwZSBpcyBhbiBlcXVpbGF0ZXJhbCB0cmlhbmdsZS5cbiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc2ltcGxleCB3ZSBhcmUgaW4uXG4gICAgdmFyIGkxLCBqMTsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIChtaWRkbGUpIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGopIGNvb3Jkc1xuICAgIGlmKHgwPnkwKSB7IC8vIGxvd2VyIHRyaWFuZ2xlLCBYWSBvcmRlcjogKDAsMCktPigxLDApLT4oMSwxKVxuICAgIGkxPTE7IGoxPTA7XG4gICAgfSBlbHNlIHsgICAgLy8gdXBwZXIgdHJpYW5nbGUsIFlYIG9yZGVyOiAoMCwwKS0+KDAsMSktPigxLDEpXG4gICAgaTE9MDsgajE9MTtcbiAgICB9XG4gICAgLy8gQSBzdGVwIG9mICgxLDApIGluIChpLGopIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jKSBpbiAoeCx5KSwgYW5kXG4gICAgLy8gYSBzdGVwIG9mICgwLDEpIGluIChpLGopIG1lYW5zIGEgc3RlcCBvZiAoLWMsMS1jKSBpbiAoeCx5KSwgd2hlcmVcbiAgICAvLyBjID0gKDMtc3FydCgzKSkvNlxuICAgIHZhciB4MSA9IHgwIC0gaTEgKyBHMjsgLy8gT2Zmc2V0cyBmb3IgbWlkZGxlIGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcbiAgICB2YXIgeTEgPSB5MCAtIGoxICsgRzI7XG4gICAgdmFyIHgyID0geDAgLSAxICsgMiAqIEcyOyAvLyBPZmZzZXRzIGZvciBsYXN0IGNvcm5lciBpbiAoeCx5KSB1bnNrZXdlZCBjb29yZHNcbiAgICB2YXIgeTIgPSB5MCAtIDEgKyAyICogRzI7XG4gICAgLy8gV29yayBvdXQgdGhlIGhhc2hlZCBncmFkaWVudCBpbmRpY2VzIG9mIHRoZSB0aHJlZSBzaW1wbGV4IGNvcm5lcnNcbiAgICBpICY9IDI1NTtcbiAgICBqICY9IDI1NTtcbiAgICB2YXIgZ2kwID0gZ3JhZFBbaStwZXJtW2pdXTtcbiAgICB2YXIgZ2kxID0gZ3JhZFBbaStpMStwZXJtW2orajFdXTtcbiAgICB2YXIgZ2kyID0gZ3JhZFBbaSsxK3Blcm1baisxXV07XG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgdGhyZWUgY29ybmVyc1xuICAgIHZhciB0MCA9IDAuNSAtIHgwKngwLXkwKnkwO1xuICAgIGlmKHQwPDApIHtcbiAgICBuMCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Mih4MCwgeTApOyAgLy8gKHgseSkgb2YgZ3JhZDMgdXNlZCBmb3IgMkQgZ3JhZGllbnRcbiAgICB9XG4gICAgdmFyIHQxID0gMC41IC0geDEqeDEteTEqeTE7XG4gICAgaWYodDE8MCkge1xuICAgIG4xID0gMDtcbiAgICB9IGVsc2Uge1xuICAgIHQxICo9IHQxO1xuICAgIG4xID0gdDEgKiB0MSAqIGdpMS5kb3QyKHgxLCB5MSk7XG4gICAgfVxuICAgIHZhciB0MiA9IDAuNSAtIHgyKngyLXkyKnkyO1xuICAgIGlmKHQyPDApIHtcbiAgICBuMiA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MiAqPSB0MjtcbiAgICBuMiA9IHQyICogdDIgKiBnaTIuZG90Mih4MiwgeTIpO1xuICAgIH1cbiAgICAvLyBBZGQgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggY29ybmVyIHRvIGdldCB0aGUgZmluYWwgbm9pc2UgdmFsdWUuXG4gICAgLy8gVGhlIHJlc3VsdCBpcyBzY2FsZWQgdG8gcmV0dXJuIHZhbHVlcyBpbiB0aGUgaW50ZXJ2YWwgWy0xLDFdLlxuICAgIHJldHVybiA3MCAqIChuMCArIG4xICsgbjIpO1xufTtcblxuLy8gM0Qgc2ltcGxleCBub2lzZVxubW9kdWxlLmV4cG9ydHMuc2ltcGxleDMgPSBmdW5jdGlvbih4aW4sIHlpbiwgemluKSB7XG4gICAgdmFyIG4wLCBuMSwgbjIsIG4zOyAvLyBOb2lzZSBjb250cmlidXRpb25zIGZyb20gdGhlIGZvdXIgY29ybmVyc1xuXG4gICAgLy8gU2tldyB0aGUgaW5wdXQgc3BhY2UgdG8gZGV0ZXJtaW5lIHdoaWNoIHNpbXBsZXggY2VsbCB3ZSdyZSBpblxuICAgIHZhciBzID0gKHhpbit5aW4remluKSpGMzsgLy8gSGFpcnkgZmFjdG9yIGZvciAyRFxuICAgIHZhciBpID0gTWF0aC5mbG9vcih4aW4rcyk7XG4gICAgdmFyIGogPSBNYXRoLmZsb29yKHlpbitzKTtcbiAgICB2YXIgayA9IE1hdGguZmxvb3IoemluK3MpO1xuXG4gICAgdmFyIHQgPSAoaStqK2spKkczO1xuICAgIHZhciB4MCA9IHhpbi1pK3Q7IC8vIFRoZSB4LHkgZGlzdGFuY2VzIGZyb20gdGhlIGNlbGwgb3JpZ2luLCB1bnNrZXdlZC5cbiAgICB2YXIgeTAgPSB5aW4tait0O1xuICAgIHZhciB6MCA9IHppbi1rK3Q7XG5cbiAgICAvLyBGb3IgdGhlIDNEIGNhc2UsIHRoZSBzaW1wbGV4IHNoYXBlIGlzIGEgc2xpZ2h0bHkgaXJyZWd1bGFyIHRldHJhaGVkcm9uLlxuICAgIC8vIERldGVybWluZSB3aGljaCBzaW1wbGV4IHdlIGFyZSBpbi5cbiAgICB2YXIgaTEsIGoxLCBrMTsgLy8gT2Zmc2V0cyBmb3Igc2Vjb25kIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXG4gICAgdmFyIGkyLCBqMiwgazI7IC8vIE9mZnNldHMgZm9yIHRoaXJkIGNvcm5lciBvZiBzaW1wbGV4IGluIChpLGosaykgY29vcmRzXG4gICAgaWYoeDAgPj0geTApIHtcbiAgICBpZih5MCA+PSB6MCkgICAgICB7IGkxPTE7IGoxPTA7IGsxPTA7IGkyPTE7IGoyPTE7IGsyPTA7IH1cbiAgICBlbHNlIGlmKHgwID49IHowKSB7IGkxPTE7IGoxPTA7IGsxPTA7IGkyPTE7IGoyPTA7IGsyPTE7IH1cbiAgICBlbHNlICAgICAgICAgICAgICB7IGkxPTA7IGoxPTA7IGsxPTE7IGkyPTE7IGoyPTA7IGsyPTE7IH1cbiAgICB9IGVsc2Uge1xuICAgIGlmKHkwIDwgejApICAgICAgeyBpMT0wOyBqMT0wOyBrMT0xOyBpMj0wOyBqMj0xOyBrMj0xOyB9XG4gICAgZWxzZSBpZih4MCA8IHowKSB7IGkxPTA7IGoxPTE7IGsxPTA7IGkyPTA7IGoyPTE7IGsyPTE7IH1cbiAgICBlbHNlICAgICAgICAgICAgIHsgaTE9MDsgajE9MTsgazE9MDsgaTI9MTsgajI9MTsgazI9MDsgfVxuICAgIH1cbiAgICAvLyBBIHN0ZXAgb2YgKDEsMCwwKSBpbiAoaSxqLGspIG1lYW5zIGEgc3RlcCBvZiAoMS1jLC1jLC1jKSBpbiAoeCx5LHopLFxuICAgIC8vIGEgc3RlcCBvZiAoMCwxLDApIGluIChpLGosaykgbWVhbnMgYSBzdGVwIG9mICgtYywxLWMsLWMpIGluICh4LHkseiksIGFuZFxuICAgIC8vIGEgc3RlcCBvZiAoMCwwLDEpIGluIChpLGosaykgbWVhbnMgYSBzdGVwIG9mICgtYywtYywxLWMpIGluICh4LHkseiksIHdoZXJlXG4gICAgLy8gYyA9IDEvNi5cbiAgICB2YXIgeDEgPSB4MCAtIGkxICsgRzM7IC8vIE9mZnNldHMgZm9yIHNlY29uZCBjb3JuZXJcbiAgICB2YXIgeTEgPSB5MCAtIGoxICsgRzM7XG4gICAgdmFyIHoxID0gejAgLSBrMSArIEczO1xuXG4gICAgdmFyIHgyID0geDAgLSBpMiArIDIgKiBHMzsgLy8gT2Zmc2V0cyBmb3IgdGhpcmQgY29ybmVyXG4gICAgdmFyIHkyID0geTAgLSBqMiArIDIgKiBHMztcbiAgICB2YXIgejIgPSB6MCAtIGsyICsgMiAqIEczO1xuXG4gICAgdmFyIHgzID0geDAgLSAxICsgMyAqIEczOyAvLyBPZmZzZXRzIGZvciBmb3VydGggY29ybmVyXG4gICAgdmFyIHkzID0geTAgLSAxICsgMyAqIEczO1xuICAgIHZhciB6MyA9IHowIC0gMSArIDMgKiBHMztcblxuICAgIC8vIFdvcmsgb3V0IHRoZSBoYXNoZWQgZ3JhZGllbnQgaW5kaWNlcyBvZiB0aGUgZm91ciBzaW1wbGV4IGNvcm5lcnNcbiAgICBpICY9IDI1NTtcbiAgICBqICY9IDI1NTtcbiAgICBrICY9IDI1NTtcbiAgICB2YXIgZ2kwID0gZ3JhZFBbaSsgICBwZXJtW2orICAgcGVybVtrICAgXV1dO1xuICAgIHZhciBnaTEgPSBncmFkUFtpK2kxK3Blcm1baitqMStwZXJtW2srazFdXV07XG4gICAgdmFyIGdpMiA9IGdyYWRQW2kraTIrcGVybVtqK2oyK3Blcm1baytrMl1dXTtcbiAgICB2YXIgZ2kzID0gZ3JhZFBbaSsgMStwZXJtW2orIDErcGVybVtrKyAxXV1dO1xuXG4gICAgLy8gQ2FsY3VsYXRlIHRoZSBjb250cmlidXRpb24gZnJvbSB0aGUgZm91ciBjb3JuZXJzXG4gICAgdmFyIHQwID0gMC42IC0geDAqeDAgLSB5MCp5MCAtIHowKnowO1xuICAgIGlmKHQwPDApIHtcbiAgICBuMCA9IDA7XG4gICAgfSBlbHNlIHtcbiAgICB0MCAqPSB0MDtcbiAgICBuMCA9IHQwICogdDAgKiBnaTAuZG90Myh4MCwgeTAsIHowKTsgIC8vICh4LHkpIG9mIGdyYWQzIHVzZWQgZm9yIDJEIGdyYWRpZW50XG4gICAgfVxuICAgIHZhciB0MSA9IDAuNiAtIHgxKngxIC0geTEqeTEgLSB6MSp6MTtcbiAgICBpZih0MTwwKSB7XG4gICAgbjEgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDEgKj0gdDE7XG4gICAgbjEgPSB0MSAqIHQxICogZ2kxLmRvdDMoeDEsIHkxLCB6MSk7XG4gICAgfVxuICAgIHZhciB0MiA9IDAuNiAtIHgyKngyIC0geTIqeTIgLSB6Mip6MjtcbiAgICBpZih0MjwwKSB7XG4gICAgbjIgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDIgKj0gdDI7XG4gICAgbjIgPSB0MiAqIHQyICogZ2kyLmRvdDMoeDIsIHkyLCB6Mik7XG4gICAgfVxuICAgIHZhciB0MyA9IDAuNiAtIHgzKngzIC0geTMqeTMgLSB6Myp6MztcbiAgICBpZih0MzwwKSB7XG4gICAgbjMgPSAwO1xuICAgIH0gZWxzZSB7XG4gICAgdDMgKj0gdDM7XG4gICAgbjMgPSB0MyAqIHQzICogZ2kzLmRvdDMoeDMsIHkzLCB6Myk7XG4gICAgfVxuICAgIC8vIEFkZCBjb250cmlidXRpb25zIGZyb20gZWFjaCBjb3JuZXIgdG8gZ2V0IHRoZSBmaW5hbCBub2lzZSB2YWx1ZS5cbiAgICAvLyBUaGUgcmVzdWx0IGlzIHNjYWxlZCB0byByZXR1cm4gdmFsdWVzIGluIHRoZSBpbnRlcnZhbCBbLTEsMV0uXG4gICAgcmV0dXJuIDMyICogKG4wICsgbjEgKyBuMiArIG4zKTtcblxufTtcblxuLy8gIyMjIyMgUGVybGluIG5vaXNlIHN0dWZmXG5cbmZ1bmN0aW9uIGZhZGUodCkge1xuICAgIHJldHVybiB0KnQqdCoodCoodCo2LTE1KSsxMCk7XG59XG5cbmZ1bmN0aW9uIGxlcnAoYSwgYiwgdCkge1xuICAgIHJldHVybiAoMS10KSphICsgdCpiO1xufVxuXG4vLyAyRCBQZXJsaW4gTm9pc2Vcbm1vZHVsZS5leHBvcnRzLnBlcmxpbjIgPSBmdW5jdGlvbih4LCB5KSB7XG4gICAgLy8gRmluZCB1bml0IGdyaWQgY2VsbCBjb250YWluaW5nIHBvaW50XG4gICAgdmFyIFggPSBNYXRoLmZsb29yKHgpLCBZID0gTWF0aC5mbG9vcih5KTtcbiAgICAvLyBHZXQgcmVsYXRpdmUgeHkgY29vcmRpbmF0ZXMgb2YgcG9pbnQgd2l0aGluIHRoYXQgY2VsbFxuICAgIHggPSB4IC0gWDsgeSA9IHkgLSBZO1xuICAgIC8vIFdyYXAgdGhlIGludGVnZXIgY2VsbHMgYXQgMjU1IChzbWFsbGVyIGludGVnZXIgcGVyaW9kIGNhbiBiZSBpbnRyb2R1Y2VkIGhlcmUpXG4gICAgWCA9IFggJiAyNTU7IFkgPSBZICYgMjU1O1xuXG4gICAgLy8gQ2FsY3VsYXRlIG5vaXNlIGNvbnRyaWJ1dGlvbnMgZnJvbSBlYWNoIG9mIHRoZSBmb3VyIGNvcm5lcnNcbiAgICB2YXIgbjAwID0gZ3JhZFBbWCtwZXJtW1ldXS5kb3QyKHgsIHkpO1xuICAgIHZhciBuMDEgPSBncmFkUFtYK3Blcm1bWSsxXV0uZG90Mih4LCB5LTEpO1xuICAgIHZhciBuMTAgPSBncmFkUFtYKzErcGVybVtZXV0uZG90Mih4LTEsIHkpO1xuICAgIHZhciBuMTEgPSBncmFkUFtYKzErcGVybVtZKzFdXS5kb3QyKHgtMSwgeS0xKTtcblxuICAgIC8vIENvbXB1dGUgdGhlIGZhZGUgY3VydmUgdmFsdWUgZm9yIHhcbiAgICB2YXIgdSA9IGZhZGUoeCk7XG5cbiAgICAvLyBJbnRlcnBvbGF0ZSB0aGUgZm91ciByZXN1bHRzXG4gICAgcmV0dXJuIGxlcnAoXG4gICAgICAgIGxlcnAobjAwLCBuMTAsIHUpLFxuICAgICAgICBsZXJwKG4wMSwgbjExLCB1KSxcbiAgICAgICAgZmFkZSh5KSk7XG59O1xuXG4vLyAzRCBQZXJsaW4gTm9pc2Vcbm1vZHVsZS5leHBvcnRzLnBlcmxpbjMgPSBmdW5jdGlvbih4LCB5LCB6KSB7XG4gICAgLy8gRmluZCB1bml0IGdyaWQgY2VsbCBjb250YWluaW5nIHBvaW50XG4gICAgdmFyIFggPSBNYXRoLmZsb29yKHgpLCBZID0gTWF0aC5mbG9vcih5KSwgWiA9IE1hdGguZmxvb3Ioeik7XG4gICAgLy8gR2V0IHJlbGF0aXZlIHh5eiBjb29yZGluYXRlcyBvZiBwb2ludCB3aXRoaW4gdGhhdCBjZWxsXG4gICAgeCA9IHggLSBYOyB5ID0geSAtIFk7IHogPSB6IC0gWjtcbiAgICAvLyBXcmFwIHRoZSBpbnRlZ2VyIGNlbGxzIGF0IDI1NSAoc21hbGxlciBpbnRlZ2VyIHBlcmlvZCBjYW4gYmUgaW50cm9kdWNlZCBoZXJlKVxuICAgIFggPSBYICYgMjU1OyBZID0gWSAmIDI1NTsgWiA9IFogJiAyNTU7XG5cbiAgICAvLyBDYWxjdWxhdGUgbm9pc2UgY29udHJpYnV0aW9ucyBmcm9tIGVhY2ggb2YgdGhlIGVpZ2h0IGNvcm5lcnNcbiAgICB2YXIgbjAwMCA9IGdyYWRQW1grICBwZXJtW1krICBwZXJtW1ogIF1dXS5kb3QzKHgsICAgeSwgICAgIHopO1xuICAgIHZhciBuMDAxID0gZ3JhZFBbWCsgIHBlcm1bWSsgIHBlcm1bWisxXV1dLmRvdDMoeCwgICB5LCAgIHotMSk7XG4gICAgdmFyIG4wMTAgPSBncmFkUFtYKyAgcGVybVtZKzErcGVybVtaICBdXV0uZG90Myh4LCAgIHktMSwgICB6KTtcbiAgICB2YXIgbjAxMSA9IGdyYWRQW1grICBwZXJtW1krMStwZXJtW1orMV1dXS5kb3QzKHgsICAgeS0xLCB6LTEpO1xuICAgIHZhciBuMTAwID0gZ3JhZFBbWCsxK3Blcm1bWSsgIHBlcm1bWiAgXV1dLmRvdDMoeC0xLCAgIHksICAgeik7XG4gICAgdmFyIG4xMDEgPSBncmFkUFtYKzErcGVybVtZKyAgcGVybVtaKzFdXV0uZG90Myh4LTEsICAgeSwgei0xKTtcbiAgICB2YXIgbjExMCA9IGdyYWRQW1grMStwZXJtW1krMStwZXJtW1ogIF1dXS5kb3QzKHgtMSwgeS0xLCAgIHopO1xuICAgIHZhciBuMTExID0gZ3JhZFBbWCsxK3Blcm1bWSsxK3Blcm1bWisxXV1dLmRvdDMoeC0xLCB5LTEsIHotMSk7XG5cbiAgICAvLyBDb21wdXRlIHRoZSBmYWRlIGN1cnZlIHZhbHVlIGZvciB4LCB5LCB6XG4gICAgdmFyIHUgPSBmYWRlKHgpO1xuICAgIHZhciB2ID0gZmFkZSh5KTtcbiAgICB2YXIgdyA9IGZhZGUoeik7XG5cbiAgICAvLyBJbnRlcnBvbGF0ZVxuICAgIHJldHVybiBsZXJwKFxuICAgICAgICBsZXJwKFxuICAgICAgICBsZXJwKG4wMDAsIG4xMDAsIHUpLFxuICAgICAgICBsZXJwKG4wMDEsIG4xMDEsIHUpLCB3KSxcbiAgICAgICAgbGVycChcbiAgICAgICAgbGVycChuMDEwLCBuMTEwLCB1KSxcbiAgICAgICAgbGVycChuMDExLCBuMTExLCB1KSwgdyksXG4gICAgICAgIHYpO1xufTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9kZXAvbm9pc2UyLmpzXG4vLyBtb2R1bGUgaWQgPSAyNzhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///278\n");

/***/ }),
/* 279 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("/* unused harmony export extrude */\nfunction extrude(points, height) {\n    let vertexCount = points.length / 2;\n    let position = new Float32Array(vertexCount * 6);\n    let indices = new (vertexCount > 65536 ? Uint32Array : Uint16Array)((vertexCount - 1) * 6);\n    let normal = new Float32Array(vertexCount * 6);\n\n    let prevX = 0;\n    let prevY = 0;\n    let nx;\n    let ny;\n    let off = 0;\n    for(let i = 0; i < vertexCount; i++) {\n        let i2 = i * 2;\n        let i6 = i * 6;\n        let x = points[i2];\n        let y = points[i2 + 1];\n\n        // Position\n        position[i6] = x;\n        position[i6 + 1] = y;\n        position[i6 + 2] = 0;\n        position[i6 + 3] = x;\n        position[i6 + 4] = y;\n        position[i6 + 5] = height;\n\n        // Normal\n        if (i === vertexCount - 1) {\n            let dx = x - prevX;\n            let dy = y - prevY;\n            nx = -dy;\n            ny = dx;\n        }\n        else {\n            let nextX = points[(i + 1) * 2];\n            let nextY = points[(i + 1) * 2 + 1];\n            let dx2 = nextX - x;\n            let dy2 = nextY - y;\n            if (i === 0) {\n                nx = -dy2;\n                ny = dx2;\n            }\n            else {\n                let dx1 = prevX - x;\n                let dy1 = prevY - y;\n\n                nx = dx1 + dx2;\n                ny = dy1 + dy2;\n            }\n        }\n        let d = Math.sqrt(nx * nx + ny * ny);\n        nx /= d;\n        ny /= d;\n        normal[i6] = normal[i6 + 3] = nx;\n        normal[i6 + 1] = normal[i6 + 4] = ny;\n        normal[i6 + 2] = normal[i6 + 5] = 0;\n\n        // Indices\n        if (i > 0) {\n            indices[off++] = i2 - 2;\n            indices[off++] = i2;\n            indices[off++] = i2 - 1;\n\n            indices[off++] = i2;\n            indices[off++] = i2 + 1;\n            indices[off++] = i2 - 1;\n        }\n\n        prevX = x;\n        prevY = y;\n    }\n    return {position, indices, normal};\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjc5LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2V4dHJ1ZGUuanM/OTUwMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gZXh0cnVkZShwb2ludHMsIGhlaWdodCkge1xuICAgIGxldCB2ZXJ0ZXhDb3VudCA9IHBvaW50cy5sZW5ndGggLyAyO1xuICAgIGxldCBwb3NpdGlvbiA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiA2KTtcbiAgICBsZXQgaW5kaWNlcyA9IG5ldyAodmVydGV4Q291bnQgPiA2NTUzNiA/IFVpbnQzMkFycmF5IDogVWludDE2QXJyYXkpKCh2ZXJ0ZXhDb3VudCAtIDEpICogNik7XG4gICAgbGV0IG5vcm1hbCA9IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiA2KTtcblxuICAgIGxldCBwcmV2WCA9IDA7XG4gICAgbGV0IHByZXZZID0gMDtcbiAgICBsZXQgbng7XG4gICAgbGV0IG55O1xuICAgIGxldCBvZmYgPSAwO1xuICAgIGZvcihsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXhDb3VudDsgaSsrKSB7XG4gICAgICAgIGxldCBpMiA9IGkgKiAyO1xuICAgICAgICBsZXQgaTYgPSBpICogNjtcbiAgICAgICAgbGV0IHggPSBwb2ludHNbaTJdO1xuICAgICAgICBsZXQgeSA9IHBvaW50c1tpMiArIDFdO1xuXG4gICAgICAgIC8vIFBvc2l0aW9uXG4gICAgICAgIHBvc2l0aW9uW2k2XSA9IHg7XG4gICAgICAgIHBvc2l0aW9uW2k2ICsgMV0gPSB5O1xuICAgICAgICBwb3NpdGlvbltpNiArIDJdID0gMDtcbiAgICAgICAgcG9zaXRpb25baTYgKyAzXSA9IHg7XG4gICAgICAgIHBvc2l0aW9uW2k2ICsgNF0gPSB5O1xuICAgICAgICBwb3NpdGlvbltpNiArIDVdID0gaGVpZ2h0O1xuXG4gICAgICAgIC8vIE5vcm1hbFxuICAgICAgICBpZiAoaSA9PT0gdmVydGV4Q291bnQgLSAxKSB7XG4gICAgICAgICAgICBsZXQgZHggPSB4IC0gcHJldlg7XG4gICAgICAgICAgICBsZXQgZHkgPSB5IC0gcHJldlk7XG4gICAgICAgICAgICBueCA9IC1keTtcbiAgICAgICAgICAgIG55ID0gZHg7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsZXQgbmV4dFggPSBwb2ludHNbKGkgKyAxKSAqIDJdO1xuICAgICAgICAgICAgbGV0IG5leHRZID0gcG9pbnRzWyhpICsgMSkgKiAyICsgMV07XG4gICAgICAgICAgICBsZXQgZHgyID0gbmV4dFggLSB4O1xuICAgICAgICAgICAgbGV0IGR5MiA9IG5leHRZIC0geTtcbiAgICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbnggPSAtZHkyO1xuICAgICAgICAgICAgICAgIG55ID0gZHgyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IGR4MSA9IHByZXZYIC0geDtcbiAgICAgICAgICAgICAgICBsZXQgZHkxID0gcHJldlkgLSB5O1xuXG4gICAgICAgICAgICAgICAgbnggPSBkeDEgKyBkeDI7XG4gICAgICAgICAgICAgICAgbnkgPSBkeTEgKyBkeTI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGQgPSBNYXRoLnNxcnQobnggKiBueCArIG55ICogbnkpO1xuICAgICAgICBueCAvPSBkO1xuICAgICAgICBueSAvPSBkO1xuICAgICAgICBub3JtYWxbaTZdID0gbm9ybWFsW2k2ICsgM10gPSBueDtcbiAgICAgICAgbm9ybWFsW2k2ICsgMV0gPSBub3JtYWxbaTYgKyA0XSA9IG55O1xuICAgICAgICBub3JtYWxbaTYgKyAyXSA9IG5vcm1hbFtpNiArIDVdID0gMDtcblxuICAgICAgICAvLyBJbmRpY2VzXG4gICAgICAgIGlmIChpID4gMCkge1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpMiAtIDI7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IGkyO1xuICAgICAgICAgICAgaW5kaWNlc1tvZmYrK10gPSBpMiAtIDE7XG5cbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaTI7XG4gICAgICAgICAgICBpbmRpY2VzW29mZisrXSA9IGkyICsgMTtcbiAgICAgICAgICAgIGluZGljZXNbb2ZmKytdID0gaTIgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJldlggPSB4O1xuICAgICAgICBwcmV2WSA9IHk7XG4gICAgfVxuICAgIHJldHVybiB7cG9zaXRpb24sIGluZGljZXMsIG5vcm1hbH07XG59XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvZXh0cnVkZS5qc1xuLy8gbW9kdWxlIGlkID0gMjc5XG4vLyBtb2R1bGUgY2h1bmtzID0gMCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///279\n");

/***/ })
/******/ ]);